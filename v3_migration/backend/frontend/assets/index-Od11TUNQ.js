function rb(a,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const u=Object.getOwnPropertyDescriptor(s,l);u&&Object.defineProperty(a,l,u.get?u:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();function xh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var nd={exports:{}},po={};var Ig;function eE(){if(Ig)return po;Ig=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(s,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var h in l)h!=="key"&&(u[h]=l[h])}else u=l;return l=u.ref,{$$typeof:a,type:s,key:f,ref:l!==void 0?l:null,props:u}}return po.Fragment=n,po.jsx=r,po.jsxs=r,po}var Hg;function tE(){return Hg||(Hg=1,nd.exports=eE()),nd.exports}var m=tE(),ad={exports:{}},Ke={};var Vg;function nE(){if(Vg)return Ke;Vg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function k(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,U={};function P(x,M,A){this.props=x,this.context=M,this.refs=U,this.updater=A||N}P.prototype.isReactComponent={},P.prototype.setState=function(x,M){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,M,"setState")},P.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function K(){}K.prototype=P.prototype;function q(x,M,A){this.props=x,this.context=M,this.refs=U,this.updater=A||N}var Z=q.prototype=new K;Z.constructor=q,G(Z,P.prototype),Z.isPureReactComponent=!0;var ce=Array.isArray;function oe(){}var $={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function ie(x,M,A){var X=A.ref;return{$$typeof:a,type:x,key:M,ref:X!==void 0?X:null,props:A}}function F(x,M){return ie(x.type,M,x.props)}function ue(x){return typeof x=="object"&&x!==null&&x.$$typeof===a}function _e(x){var M={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(A){return M[A]})}var Me=/\/+/g;function qe(x,M){return typeof x=="object"&&x!==null&&x.key!=null?_e(""+x.key):M.toString(36)}function Ve(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(oe,oe):(x.status="pending",x.then(function(M){x.status==="pending"&&(x.status="fulfilled",x.value=M)},function(M){x.status==="pending"&&(x.status="rejected",x.reason=M)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function C(x,M,A,X,me){var je=typeof x;(je==="undefined"||je==="boolean")&&(x=null);var Ie=!1;if(x===null)Ie=!0;else switch(je){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(x.$$typeof){case a:case n:Ie=!0;break;case b:return Ie=x._init,C(Ie(x._payload),M,A,X,me)}}if(Ie)return me=me(x),Ie=X===""?"."+qe(x,0):X,ce(me)?(A="",Ie!=null&&(A=Ie.replace(Me,"$&/")+"/"),C(me,M,A,"",function(kt){return kt})):me!=null&&(ue(me)&&(me=F(me,A+(me.key==null||x&&x.key===me.key?"":(""+me.key).replace(Me,"$&/")+"/")+Ie)),M.push(me)),1;Ie=0;var Be=X===""?".":X+":";if(ce(x))for(var Ue=0;Ue<x.length;Ue++)X=x[Ue],je=Be+qe(X,Ue),Ie+=C(X,M,A,je,me);else if(Ue=k(x),typeof Ue=="function")for(x=Ue.call(x),Ue=0;!(X=x.next()).done;)X=X.value,je=Be+qe(X,Ue++),Ie+=C(X,M,A,je,me);else if(je==="object"){if(typeof x.then=="function")return C(Ve(x),M,A,X,me);throw M=String(x),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function L(x,M,A){if(x==null)return x;var X=[],me=0;return C(x,X,"","",function(je){return M.call(A,je,me++)}),X}function se(x){if(x._status===-1){var M=x._result;M=M(),M.then(function(A){(x._status===0||x._status===-1)&&(x._status=1,x._result=A)},function(A){(x._status===0||x._status===-1)&&(x._status=2,x._result=A)}),x._status===-1&&(x._status=0,x._result=M)}if(x._status===1)return x._result.default;throw x._result}var ge=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},be={map:L,forEach:function(x,M,A){L(x,function(){M.apply(this,arguments)},A)},count:function(x){var M=0;return L(x,function(){M++}),M},toArray:function(x){return L(x,function(M){return M})||[]},only:function(x){if(!ue(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return Ke.Activity=v,Ke.Children=be,Ke.Component=P,Ke.Fragment=r,Ke.Profiler=l,Ke.PureComponent=q,Ke.StrictMode=s,Ke.Suspense=p,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(x){return $.H.useMemoCache(x)}},Ke.cache=function(x){return function(){return x.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(x,M,A){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var X=G({},x.props),me=x.key;if(M!=null)for(je in M.key!==void 0&&(me=""+M.key),M)!re.call(M,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&M.ref===void 0||(X[je]=M[je]);var je=arguments.length-2;if(je===1)X.children=A;else if(1<je){for(var Ie=Array(je),Be=0;Be<je;Be++)Ie[Be]=arguments[Be+2];X.children=Ie}return ie(x.type,me,X)},Ke.createContext=function(x){return x={$$typeof:f,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:u,_context:x},x},Ke.createElement=function(x,M,A){var X,me={},je=null;if(M!=null)for(X in M.key!==void 0&&(je=""+M.key),M)re.call(M,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(me[X]=M[X]);var Ie=arguments.length-2;if(Ie===1)me.children=A;else if(1<Ie){for(var Be=Array(Ie),Ue=0;Ue<Ie;Ue++)Be[Ue]=arguments[Ue+2];me.children=Be}if(x&&x.defaultProps)for(X in Ie=x.defaultProps,Ie)me[X]===void 0&&(me[X]=Ie[X]);return ie(x,je,me)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(x){return{$$typeof:h,render:x}},Ke.isValidElement=ue,Ke.lazy=function(x){return{$$typeof:b,_payload:{_status:-1,_result:x},_init:se}},Ke.memo=function(x,M){return{$$typeof:y,type:x,compare:M===void 0?null:M}},Ke.startTransition=function(x){var M=$.T,A={};$.T=A;try{var X=x(),me=$.S;me!==null&&me(A,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(oe,ge)}catch(je){ge(je)}finally{M!==null&&A.types!==null&&(M.types=A.types),$.T=M}},Ke.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Ke.use=function(x){return $.H.use(x)},Ke.useActionState=function(x,M,A){return $.H.useActionState(x,M,A)},Ke.useCallback=function(x,M){return $.H.useCallback(x,M)},Ke.useContext=function(x){return $.H.useContext(x)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(x,M){return $.H.useDeferredValue(x,M)},Ke.useEffect=function(x,M){return $.H.useEffect(x,M)},Ke.useEffectEvent=function(x){return $.H.useEffectEvent(x)},Ke.useId=function(){return $.H.useId()},Ke.useImperativeHandle=function(x,M,A){return $.H.useImperativeHandle(x,M,A)},Ke.useInsertionEffect=function(x,M){return $.H.useInsertionEffect(x,M)},Ke.useLayoutEffect=function(x,M){return $.H.useLayoutEffect(x,M)},Ke.useMemo=function(x,M){return $.H.useMemo(x,M)},Ke.useOptimistic=function(x,M){return $.H.useOptimistic(x,M)},Ke.useReducer=function(x,M,A){return $.H.useReducer(x,M,A)},Ke.useRef=function(x){return $.H.useRef(x)},Ke.useState=function(x){return $.H.useState(x)},Ke.useSyncExternalStore=function(x,M,A){return $.H.useSyncExternalStore(x,M,A)},Ke.useTransition=function(){return $.H.useTransition()},Ke.version="19.2.0",Ke}var qg;function Eh(){return qg||(qg=1,ad.exports=nE()),ad.exports}var E=Eh();const xa=xh(E),aE=rb({__proto__:null,default:xa},[E]);var rd={exports:{}},mo={},id={exports:{}},sd={};var Yg;function rE(){return Yg||(Yg=1,(function(a){function n(C,L){var se=C.length;C.push(L);e:for(;0<se;){var ge=se-1>>>1,be=C[ge];if(0<l(be,L))C[ge]=L,C[se]=be,se=ge;else break e}}function r(C){return C.length===0?null:C[0]}function s(C){if(C.length===0)return null;var L=C[0],se=C.pop();if(se!==L){C[0]=se;e:for(var ge=0,be=C.length,x=be>>>1;ge<x;){var M=2*(ge+1)-1,A=C[M],X=M+1,me=C[X];if(0>l(A,se))X<be&&0>l(me,A)?(C[ge]=me,C[X]=se,ge=X):(C[ge]=A,C[M]=se,ge=M);else if(X<be&&0>l(me,se))C[ge]=me,C[X]=se,ge=X;else break e}}return L}function l(C,L){var se=C.sortIndex-L.sortIndex;return se!==0?se:C.id-L.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var f=Date,h=f.now();a.unstable_now=function(){return f.now()-h}}var p=[],y=[],b=1,v=null,S=3,k=!1,N=!1,G=!1,U=!1,P=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Z(C){for(var L=r(y);L!==null;){if(L.callback===null)s(y);else if(L.startTime<=C)s(y),L.sortIndex=L.expirationTime,n(p,L);else break;L=r(y)}}function ce(C){if(G=!1,Z(C),!N)if(r(p)!==null)N=!0,oe||(oe=!0,_e());else{var L=r(y);L!==null&&Ve(ce,L.startTime-C)}}var oe=!1,$=-1,re=5,ie=-1;function F(){return U?!0:!(a.unstable_now()-ie<re)}function ue(){if(U=!1,oe){var C=a.unstable_now();ie=C;var L=!0;try{e:{N=!1,G&&(G=!1,K($),$=-1),k=!0;var se=S;try{t:{for(Z(C),v=r(p);v!==null&&!(v.expirationTime>C&&F());){var ge=v.callback;if(typeof ge=="function"){v.callback=null,S=v.priorityLevel;var be=ge(v.expirationTime<=C);if(C=a.unstable_now(),typeof be=="function"){v.callback=be,Z(C),L=!0;break t}v===r(p)&&s(p),Z(C)}else s(p);v=r(p)}if(v!==null)L=!0;else{var x=r(y);x!==null&&Ve(ce,x.startTime-C),L=!1}}break e}finally{v=null,S=se,k=!1}L=void 0}}finally{L?_e():oe=!1}}}var _e;if(typeof q=="function")_e=function(){q(ue)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,qe=Me.port2;Me.port1.onmessage=ue,_e=function(){qe.postMessage(null)}}else _e=function(){P(ue,0)};function Ve(C,L){$=P(function(){C(a.unstable_now())},L)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(C){C.callback=null},a.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<C?Math.floor(1e3/C):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(C){switch(S){case 1:case 2:case 3:var L=3;break;default:L=S}var se=S;S=L;try{return C()}finally{S=se}},a.unstable_requestPaint=function(){U=!0},a.unstable_runWithPriority=function(C,L){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var se=S;S=C;try{return L()}finally{S=se}},a.unstable_scheduleCallback=function(C,L,se){var ge=a.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ge+se:ge):se=ge,C){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=se+be,C={id:b++,callback:L,priorityLevel:C,startTime:se,expirationTime:be,sortIndex:-1},se>ge?(C.sortIndex=se,n(y,C),r(p)===null&&C===r(y)&&(G?(K($),$=-1):G=!0,Ve(ce,se-ge))):(C.sortIndex=be,n(p,C),N||k||(N=!0,oe||(oe=!0,_e()))),C},a.unstable_shouldYield=F,a.unstable_wrapCallback=function(C){var L=S;return function(){var se=S;S=L;try{return C.apply(this,arguments)}finally{S=se}}}})(sd)),sd}var Gg;function iE(){return Gg||(Gg=1,id.exports=rE()),id.exports}var od={exports:{}},kn={};var Zg;function sE(){if(Zg)return kn;Zg=1;var a=Eh();function n(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,y,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:p,containerInfo:y,implementation:b}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,kn.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return u(p,y,null,b)},kn.flushSync=function(p){var y=f.T,b=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=b,s.d.f()}},kn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},kn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},kn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,v=h(b,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:k}):b==="script"&&s.d.X(p,{crossOrigin:v,integrity:S,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},kn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=h(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},kn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,v=h(b,y.crossOrigin);s.d.L(p,b,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},kn.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=h(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},kn.requestFormReset=function(p){s.d.r(p)},kn.unstable_batchedUpdates=function(p,y){return p(y)},kn.useFormState=function(p,y,b){return f.H.useFormState(p,y,b)},kn.useFormStatus=function(){return f.H.useHostTransitionStatus()},kn.version="19.2.0",kn}var Pg;function ib(){if(Pg)return od.exports;Pg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),od.exports=sE(),od.exports}var Fg;function oE(){if(Fg)return mo;Fg=1;var a=iE(),n=Eh(),r=ib();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(s(188))}function y(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,o=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){i=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return p(c),e;if(d===o)return p(c),t;d=d.sibling}throw Error(s(188))}if(i.return!==o.return)i=c,o=d;else{for(var g=!1,w=c.child;w;){if(w===i){g=!0,i=c,o=d;break}if(w===o){g=!0,o=c,i=d;break}w=w.sibling}if(!g){for(w=d.child;w;){if(w===i){g=!0,i=d,o=c;break}if(w===o){g=!0,o=d,i=c;break}w=w.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function _e(e){return e===null||typeof e!="object"?null:(e=ue&&e[ue]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Symbol.for("react.client.reference");function qe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case P:return"Profiler";case U:return"StrictMode";case ce:return"Suspense";case oe:return"SuspenseList";case ie:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case q:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return t=e.displayName||null,t!==null?t:qe(e.type)||"Memo";case re:t=e._payload,e=e._init;try{return qe(e(t))}catch{}}return null}var Ve=Array.isArray,C=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},ge=[],be=-1;function x(e){return{current:e}}function M(e){0>be||(e.current=ge[be],ge[be]=null,be--)}function A(e,t){be++,ge[be]=e.current,e.current=t}var X=x(null),me=x(null),je=x(null),Ie=x(null);function Be(e,t){switch(A(je,t),A(me,e),A(X,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ug(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ug(t),e=cg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(X),A(X,e)}function Ue(){M(X),M(me),M(je)}function kt(e){e.memoizedState!==null&&A(Ie,e);var t=X.current,i=cg(t,e.type);t!==i&&(A(me,e),A(X,i))}function Ce(e){me.current===e&&(M(X),M(me)),Ie.current===e&&(M(Ie),uo._currentValue=se)}var Ge,V;function ne(e){if(Ge===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ge=t&&t[1]||"",V=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ge+e+V}var J=!1;function Ee(e,t){if(!e||J)return"";J=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Y){var B=Y}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(Y){B=Y}e.call(ae.prototype)}}else{try{throw Error()}catch(Y){B=Y}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Y){if(Y&&B&&typeof Y.stack=="string")return[Y.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),g=d[0],w=d[1];if(g&&w){var T=g.split(`
`),z=w.split(`
`);for(c=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;if(o===T.length||c===z.length)for(o=T.length-1,c=z.length-1;1<=o&&0<=c&&T[o]!==z[c];)c--;for(;1<=o&&0<=c;o--,c--)if(T[o]!==z[c]){if(o!==1||c!==1)do if(o--,c--,0>c||T[o]!==z[c]){var W=`
`+T[o].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=o&&0<=c);break}}}finally{J=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?ne(i):""}function ye(e,t){switch(e.tag){case 26:case 27:case 5:return ne(e.type);case 16:return ne("Lazy");case 13:return e.child!==t&&t!==null?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return Ee(e.type,!1);case 11:return Ee(e.type.render,!1);case 1:return Ee(e.type,!0);case 31:return ne("Activity");default:return""}}function I(e){try{var t="",i=null;do t+=ye(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var _=Object.prototype.hasOwnProperty,ee=a.unstable_scheduleCallback,ve=a.unstable_cancelCallback,ke=a.unstable_shouldYield,bt=a.unstable_requestPaint,xe=a.unstable_now,We=a.unstable_getCurrentPriorityLevel,Qe=a.unstable_ImmediatePriority,Bt=a.unstable_UserBlockingPriority,De=a.unstable_NormalPriority,rt=a.unstable_LowPriority,ht=a.unstable_IdlePriority,pn=a.log,Ft=a.unstable_setDisableYieldValue,jt=null,Ye=null;function Ze(e){if(typeof pn=="function"&&Ft(e),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(jt,e)}catch{}}var mt=Math.clz32?Math.clz32:Sn,cn=Math.log,An=Math.LN2;function Sn(e){return e>>>=0,e===0?32:31-(cn(e)/An|0)|0}var D=256,H=262144,fe=4194304;function de(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Le(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var c=0,d=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~d,o!==0?c=de(o):(g&=w,g!==0?c=de(g):i||(i=w&~e,i!==0&&(c=de(i))))):(w=o&~d,w!==0?c=de(w):g!==0?c=de(g):i||(i=o&~e,i!==0&&(c=de(i)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,i=t&-t,d>=i||d===32&&(i&4194048)!==0)?t:c}function Ut(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xe(){var e=fe;return fe<<=1,(fe&62914560)===0&&(fe=4194304),e}function Kt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function At(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ct(e,t,i,o,c,d){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,T=e.expirationTimes,z=e.hiddenUpdates;for(i=g&~i;0<i;){var W=31-mt(i),ae=1<<W;w[W]=0,T[W]=-1;var B=z[W];if(B!==null)for(z[W]=null,W=0;W<B.length;W++){var Y=B[W];Y!==null&&(Y.lane&=-536870913)}i&=~ae}o!==0&&xs(e,o,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(g&~t))}function xs(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-mt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Es(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-mt(i),c=1<<o;c&t|e[o]&t&&(e[o]|=t),i&=~c}}function Zu(e,t){var i=t&-t;return i=(i&42)!==0?1:ks(i),(i&(e.suspendedLanes|t))!==0?0:i}function ks(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function da(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:Mg(e.type))}function sr(e,t){var i=L.p;try{return L.p=e,t()}finally{L.p=i}}var xn=Math.random().toString(36).slice(2),Gt="__reactFiber$"+xn,En="__reactProps$"+xn,ka="__reactContainer$"+xn,Q="__reactEvents$"+xn,le="__reactListeners$"+xn,he="__reactHandles$"+xn,pe="__reactResources$"+xn,Ae="__reactMarker$"+xn;function et(e){delete e[Gt],delete e[En],delete e[Q],delete e[le],delete e[he]}function _t(e){var t=e[Gt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ka]||i[Gt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=gg(e);e!==null;){if(i=e[Gt])return i;e=gg(e)}return t}e=i,i=e.parentNode}return null}function Vt(e){if(e=e[Gt]||e[ka]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Wt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function qt(e){var t=e[pe];return t||(t=e[pe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yt(e){e[Ae]=!0}var Mn=new Set,La={};function Ba(e,t){or(e,t),or(e+"Capture",t)}function or(e,t){for(La[e]=t,e=0;e<t.length;e++)Mn.add(t[e])}var Uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cs={},Pu={};function Zw(e){return _.call(Pu,e)?!0:_.call(Cs,e)?!1:Uo.test(e)?Pu[e]=!0:(Cs[e]=!0,!1)}function $o(e,t,i){if(Zw(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Io(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Ua(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function Qn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pw(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,d=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){i=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fu(e){if(!e._valueTracker){var t=tp(e)?"checked":"value";e._valueTracker=Pw(e,t,""+e[t])}}function np(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=tp(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Ho(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Fw=/[\n"\\]/g;function Jn(e){return e.replace(Fw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Xu(e,t,i,o,c,d,g,w){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Qn(t)):e.value!==""+Qn(t)&&(e.value=""+Qn(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Ku(e,g,Qn(t)):i!=null?Ku(e,g,Qn(i)):o!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Qn(w):e.removeAttribute("name")}function ap(e,t,i,o,c,d,g,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Fu(e);return}i=i!=null?""+Qn(i):"",t=t!=null?""+Qn(t):i,w||t===e.value||(e.value=t),e.defaultValue=t}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Fu(e)}function Ku(e,t,i){t==="number"&&Ho(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function mi(e,t,i,o){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Qn(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function rp(e,t,i){if(t!=null&&(t=""+Qn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Qn(i):""}function ip(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(s(92));if(Ve(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=Qn(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Fu(e)}function yi(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Xw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sp(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||Xw.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function op(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var c in t)o=t[c],t.hasOwnProperty(c)&&i[c]!==o&&sp(e,c,o)}else for(var d in t)t.hasOwnProperty(d)&&sp(e,d,t[d])}function Qu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vo(e){return Qw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function $a(){}var Ju=null;function Wu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gi=null,vi=null;function lp(e){var t=Vt(e);if(t&&(e=t.stateNode)){var i=e[En]||null;e:switch(e=t.stateNode,t.type){case"input":if(Xu(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Jn(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var c=o[En]||null;if(!c)throw Error(s(90));Xu(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&np(o)}break e;case"textarea":rp(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&mi(e,!!i.multiple,t,!1)}}}var ec=!1;function up(e,t,i){if(ec)return e(t,i);ec=!0;try{var o=e(t);return o}finally{if(ec=!1,(gi!==null||vi!==null)&&(jl(),gi&&(t=gi,e=vi,vi=gi=null,lp(t),e)))for(t=0;t<e.length;t++)lp(e[t])}}function Ts(e,t){var i=e.stateNode;if(i===null)return null;var o=i[En]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tc=!1;if(Ia)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){tc=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{tc=!1}var lr=null,nc=null,qo=null;function cp(){if(qo)return qo;var e,t=nc,i=t.length,o,c="value"in lr?lr.value:lr.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===c[d-o];o++);return qo=c.slice(e,1<o?1-o:void 0)}function Yo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Go(){return!0}function fp(){return!1}function Rn(e){function t(i,o,c,d,g){this._reactName=i,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Go:fp,this.isPropagationStopped=fp,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=Rn(Hr),Ns=v({},Hr,{view:0,detail:0}),Jw=Rn(Ns),ac,rc,js,Po=v({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==js&&(js&&e.type==="mousemove"?(ac=e.screenX-js.screenX,rc=e.screenY-js.screenY):rc=ac=0,js=e),ac)},movementY:function(e){return"movementY"in e?e.movementY:rc}}),dp=Rn(Po),Ww=v({},Po,{dataTransfer:0}),eS=Rn(Ww),tS=v({},Ns,{relatedTarget:0}),ic=Rn(tS),nS=v({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),aS=Rn(nS),rS=v({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iS=Rn(rS),sS=v({},Hr,{data:0}),hp=Rn(sS),oS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uS[e])?!!t[e]:!1}function sc(){return cS}var fS=v({},Ns,{key:function(e){if(e.key){var t=oS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sc,charCode:function(e){return e.type==="keypress"?Yo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dS=Rn(fS),hS=v({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pp=Rn(hS),pS=v({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sc}),mS=Rn(pS),yS=v({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gS=Rn(yS),vS=v({},Po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bS=Rn(vS),wS=v({},Hr,{newState:0,oldState:0}),SS=Rn(wS),xS=[9,13,27,32],oc=Ia&&"CompositionEvent"in window,As=null;Ia&&"documentMode"in document&&(As=document.documentMode);var ES=Ia&&"TextEvent"in window&&!As,mp=Ia&&(!oc||As&&8<As&&11>=As),yp=" ",gp=!1;function vp(e,t){switch(e){case"keyup":return xS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bi=!1;function kS(e,t){switch(e){case"compositionend":return bp(t);case"keypress":return t.which!==32?null:(gp=!0,yp);case"textInput":return e=t.data,e===yp&&gp?null:e;default:return null}}function CS(e,t){if(bi)return e==="compositionend"||!oc&&vp(e,t)?(e=cp(),qo=nc=lr=null,bi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mp&&t.locale!=="ko"?null:t.data;default:return null}}var TS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!TS[e.type]:t==="textarea"}function Sp(e,t,i,o){gi?vi?vi.push(o):vi=[o]:gi=o,t=Ll(t,"onChange"),0<t.length&&(i=new Zo("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var _s=null,Ds=null;function OS(e){ag(e,0)}function Fo(e){var t=Wt(e);if(np(t))return e}function xp(e,t){if(e==="change")return t}var Ep=!1;if(Ia){var lc;if(Ia){var uc="oninput"in document;if(!uc){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),uc=typeof kp.oninput=="function"}lc=uc}else lc=!1;Ep=lc&&(!document.documentMode||9<document.documentMode)}function Cp(){_s&&(_s.detachEvent("onpropertychange",Tp),Ds=_s=null)}function Tp(e){if(e.propertyName==="value"&&Fo(Ds)){var t=[];Sp(t,Ds,e,Wu(e)),up(OS,t)}}function NS(e,t,i){e==="focusin"?(Cp(),_s=t,Ds=i,_s.attachEvent("onpropertychange",Tp)):e==="focusout"&&Cp()}function jS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fo(Ds)}function AS(e,t){if(e==="click")return Fo(t)}function _S(e,t){if(e==="input"||e==="change")return Fo(t)}function DS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vn=typeof Object.is=="function"?Object.is:DS;function Ms(e,t){if(Vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var c=i[o];if(!_.call(t,c)||!Vn(e[c],t[c]))return!1}return!0}function Op(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Np(e,t){var i=Op(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Op(i)}}function jp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ap(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ho(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ho(e.document)}return t}function cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var MS=Ia&&"documentMode"in document&&11>=document.documentMode,wi=null,fc=null,Rs=null,dc=!1;function _p(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;dc||wi==null||wi!==Ho(o)||(o=wi,"selectionStart"in o&&cc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Rs&&Ms(Rs,o)||(Rs=o,o=Ll(fc,"onSelect"),0<o.length&&(t=new Zo("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=wi)))}function Vr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Si={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionrun:Vr("Transition","TransitionRun"),transitionstart:Vr("Transition","TransitionStart"),transitioncancel:Vr("Transition","TransitionCancel"),transitionend:Vr("Transition","TransitionEnd")},hc={},Dp={};Ia&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function qr(e){if(hc[e])return hc[e];if(!Si[e])return e;var t=Si[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Dp)return hc[e]=t[i];return e}var Mp=qr("animationend"),Rp=qr("animationiteration"),zp=qr("animationstart"),RS=qr("transitionrun"),zS=qr("transitionstart"),LS=qr("transitioncancel"),Lp=qr("transitionend"),Bp=new Map,pc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pc.push("scrollEnd");function ha(e,t){Bp.set(e,t),Ba(t,[e])}var Xo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Wn=[],xi=0,mc=0;function Ko(){for(var e=xi,t=mc=xi=0;t<e;){var i=Wn[t];Wn[t++]=null;var o=Wn[t];Wn[t++]=null;var c=Wn[t];Wn[t++]=null;var d=Wn[t];if(Wn[t++]=null,o!==null&&c!==null){var g=o.pending;g===null?c.next=c:(c.next=g.next,g.next=c),o.pending=c}d!==0&&Up(i,c,d)}}function Qo(e,t,i,o){Wn[xi++]=e,Wn[xi++]=t,Wn[xi++]=i,Wn[xi++]=o,mc|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function yc(e,t,i,o){return Qo(e,t,i,o),Jo(e)}function Yr(e,t){return Qo(e,null,null,t),Jo(e)}function Up(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var c=!1,d=e.return;d!==null;)d.childLanes|=i,o=d.alternate,o!==null&&(o.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-mt(i),e=d.hiddenUpdates,o=e[c],o===null?e[c]=[t]:o.push(t),t.lane=i|536870912),d):null}function Jo(e){if(50<no)throw no=0,Tf=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ei={};function BS(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(e,t,i,o){return new BS(e,t,i,o)}function gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ha(e,t){var i=e.alternate;return i===null?(i=qn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function $p(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wo(e,t,i,o,c,d){var g=0;if(o=e,typeof e=="function")gc(e)&&(g=1);else if(typeof e=="string")g=Vx(e,i,X.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ie:return e=qn(31,i,t,c),e.elementType=ie,e.lanes=d,e;case G:return Gr(i.children,c,d,t);case U:g=8,c|=24;break;case P:return e=qn(12,i,t,c|2),e.elementType=P,e.lanes=d,e;case ce:return e=qn(13,i,t,c),e.elementType=ce,e.lanes=d,e;case oe:return e=qn(19,i,t,c),e.elementType=oe,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:g=10;break e;case K:g=9;break e;case Z:g=11;break e;case $:g=14;break e;case re:g=16,o=null;break e}g=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return t=qn(g,i,t,c),t.elementType=e,t.type=o,t.lanes=d,t}function Gr(e,t,i,o){return e=qn(7,e,o,t),e.lanes=i,e}function vc(e,t,i){return e=qn(6,e,null,t),e.lanes=i,e}function Ip(e){var t=qn(18,null,null,0);return t.stateNode=e,t}function bc(e,t,i){return t=qn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hp=new WeakMap;function ea(e,t){if(typeof e=="object"&&e!==null){var i=Hp.get(e);return i!==void 0?i:(t={value:e,source:t,stack:I(t)},Hp.set(e,t),t)}return{value:e,source:t,stack:I(t)}}var ki=[],Ci=0,el=null,zs=0,ta=[],na=0,ur=null,Ca=1,Ta="";function Va(e,t){ki[Ci++]=zs,ki[Ci++]=el,el=e,zs=t}function Vp(e,t,i){ta[na++]=Ca,ta[na++]=Ta,ta[na++]=ur,ur=e;var o=Ca;e=Ta;var c=32-mt(o)-1;o&=~(1<<c),i+=1;var d=32-mt(t)+c;if(30<d){var g=c-c%5;d=(o&(1<<g)-1).toString(32),o>>=g,c-=g,Ca=1<<32-mt(t)+c|i<<c|o,Ta=d+e}else Ca=1<<d|i<<c|o,Ta=e}function wc(e){e.return!==null&&(Va(e,1),Vp(e,1,0))}function Sc(e){for(;e===el;)el=ki[--Ci],ki[Ci]=null,zs=ki[--Ci],ki[Ci]=null;for(;e===ur;)ur=ta[--na],ta[na]=null,Ta=ta[--na],ta[na]=null,Ca=ta[--na],ta[na]=null}function qp(e,t){ta[na++]=Ca,ta[na++]=Ta,ta[na++]=ur,Ca=t.id,Ta=t.overflow,ur=e}var mn=null,$t=null,ft=!1,cr=null,aa=!1,xc=Error(s(519));function fr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ls(ea(t,e)),xc}function Yp(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[Gt]=e,t[En]=o,i){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(i=0;i<ro.length;i++)st(ro[i],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),ap(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),ip(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||og(t.textContent,i)?(o.popover!=null&&(st("beforetoggle",t),st("toggle",t)),o.onScroll!=null&&st("scroll",t),o.onScrollEnd!=null&&st("scrollend",t),o.onClick!=null&&(t.onclick=$a),t=!0):t=!1,t||fr(e,!0)}function Gp(e){for(mn=e.return;mn;)switch(mn.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:mn=mn.return}}function Ti(e){if(e!==mn)return!1;if(!ft)return Gp(e),ft=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Hf(e.type,e.memoizedProps)),i=!i),i&&$t&&fr(e),Gp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=yg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=yg(e)}else t===27?(t=$t,Cr(e.type)?(e=Zf,Zf=null,$t=e):$t=t):$t=mn?ia(e.stateNode.nextSibling):null;return!0}function Zr(){$t=mn=null,ft=!1}function Ec(){var e=cr;return e!==null&&(Un===null?Un=e:Un.push.apply(Un,e),cr=null),e}function Ls(e){cr===null?cr=[e]:cr.push(e)}var kc=x(null),Pr=null,qa=null;function dr(e,t,i){A(kc,t._currentValue),t._currentValue=i}function Ya(e){e._currentValue=kc.current,M(kc)}function Cc(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function Tc(e,t,i,o){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var g=c.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=c;for(var T=0;T<t.length;T++)if(w.context===t[T]){d.lanes|=i,w=d.alternate,w!==null&&(w.lanes|=i),Cc(d.return,i,e),o||(g=null);break e}d=w.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(s(341));g.lanes|=i,d=g.alternate,d!==null&&(d.lanes|=i),Cc(g,i,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function Oi(e,t,i,o){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(s(387));if(g=g.memoizedProps,g!==null){var w=c.type;Vn(c.pendingProps.value,g.value)||(e!==null?e.push(w):e=[w])}}else if(c===Ie.current){if(g=c.alternate,g===null)throw Error(s(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(uo):e=[uo])}c=c.return}e!==null&&Tc(t,e,i,o),t.flags|=262144}function tl(e){for(e=e.firstContext;e!==null;){if(!Vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fr(e){Pr=e,qa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yn(e){return Zp(Pr,e)}function nl(e,t){return Pr===null&&Fr(e),Zp(e,t)}function Zp(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},qa===null){if(e===null)throw Error(s(308));qa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else qa=qa.next=t;return i}var US=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},$S=a.unstable_scheduleCallback,IS=a.unstable_NormalPriority,nn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oc(){return{controller:new US,data:new Map,refCount:0}}function Bs(e){e.refCount--,e.refCount===0&&$S(IS,function(){e.controller.abort()})}var Us=null,Nc=0,Ni=0,ji=null;function HS(e,t){if(Us===null){var i=Us=[];Nc=0,Ni=Df(),ji={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Nc++,t.then(Pp,Pp),t}function Pp(){if(--Nc===0&&Us!==null){ji!==null&&(ji.status="fulfilled");var e=Us;Us=null,Ni=0,ji=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function VS(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var c=0;c<i.length;c++)(0,i[c])(t)},function(c){for(o.status="rejected",o.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),o}var Fp=C.S;C.S=function(e,t){_y=xe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&HS(e,t),Fp!==null&&Fp(e,t)};var Xr=x(null);function jc(){var e=Xr.current;return e!==null?e:zt.pooledCache}function al(e,t){t===null?A(Xr,Xr.current):A(Xr,t.pool)}function Xp(){var e=jc();return e===null?null:{parent:nn._currentValue,pool:e}}var Ai=Error(s(460)),Ac=Error(s(474)),rl=Error(s(542)),il={then:function(){}};function Kp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qp(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then($a,$a),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wp(e),e;default:if(typeof t.status=="string")t.then($a,$a);else{if(e=zt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=o}},function(o){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wp(e),e}throw Qr=t,Ai}}function Kr(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Qr=i,Ai):i}}var Qr=null;function Jp(){if(Qr===null)throw Error(s(459));var e=Qr;return Qr=null,e}function Wp(e){if(e===Ai||e===rl)throw Error(s(483))}var _i=null,$s=0;function sl(e){var t=$s;return $s+=1,_i===null&&(_i=[]),Qp(_i,e,t)}function Is(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ol(e,t){throw t.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function em(e){function t(j,O){if(e){var R=j.deletions;R===null?(j.deletions=[O],j.flags|=16):R.push(O)}}function i(j,O){if(!e)return null;for(;O!==null;)t(j,O),O=O.sibling;return null}function o(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function c(j,O){return j=Ha(j,O),j.index=0,j.sibling=null,j}function d(j,O,R){return j.index=R,e?(R=j.alternate,R!==null?(R=R.index,R<O?(j.flags|=67108866,O):R):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function g(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function w(j,O,R,te){return O===null||O.tag!==6?(O=vc(R,j.mode,te),O.return=j,O):(O=c(O,R),O.return=j,O)}function T(j,O,R,te){var $e=R.type;return $e===G?W(j,O,R.props.children,te,R.key):O!==null&&(O.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===re&&Kr($e)===O.type)?(O=c(O,R.props),Is(O,R),O.return=j,O):(O=Wo(R.type,R.key,R.props,null,j.mode,te),Is(O,R),O.return=j,O)}function z(j,O,R,te){return O===null||O.tag!==4||O.stateNode.containerInfo!==R.containerInfo||O.stateNode.implementation!==R.implementation?(O=bc(R,j.mode,te),O.return=j,O):(O=c(O,R.children||[]),O.return=j,O)}function W(j,O,R,te,$e){return O===null||O.tag!==7?(O=Gr(R,j.mode,te,$e),O.return=j,O):(O=c(O,R),O.return=j,O)}function ae(j,O,R){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=vc(""+O,j.mode,R),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case k:return R=Wo(O.type,O.key,O.props,null,j.mode,R),Is(R,O),R.return=j,R;case N:return O=bc(O,j.mode,R),O.return=j,O;case re:return O=Kr(O),ae(j,O,R)}if(Ve(O)||_e(O))return O=Gr(O,j.mode,R,null),O.return=j,O;if(typeof O.then=="function")return ae(j,sl(O),R);if(O.$$typeof===q)return ae(j,nl(j,O),R);ol(j,O)}return null}function B(j,O,R,te){var $e=O!==null?O.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return $e!==null?null:w(j,O,""+R,te);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case k:return R.key===$e?T(j,O,R,te):null;case N:return R.key===$e?z(j,O,R,te):null;case re:return R=Kr(R),B(j,O,R,te)}if(Ve(R)||_e(R))return $e!==null?null:W(j,O,R,te,null);if(typeof R.then=="function")return B(j,O,sl(R),te);if(R.$$typeof===q)return B(j,O,nl(j,R),te);ol(j,R)}return null}function Y(j,O,R,te,$e){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return j=j.get(R)||null,w(O,j,""+te,$e);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case k:return j=j.get(te.key===null?R:te.key)||null,T(O,j,te,$e);case N:return j=j.get(te.key===null?R:te.key)||null,z(O,j,te,$e);case re:return te=Kr(te),Y(j,O,R,te,$e)}if(Ve(te)||_e(te))return j=j.get(R)||null,W(O,j,te,$e,null);if(typeof te.then=="function")return Y(j,O,R,sl(te),$e);if(te.$$typeof===q)return Y(j,O,R,nl(O,te),$e);ol(O,te)}return null}function Te(j,O,R,te){for(var $e=null,gt=null,Re=O,tt=O=0,lt=null;Re!==null&&tt<R.length;tt++){Re.index>tt?(lt=Re,Re=null):lt=Re.sibling;var vt=B(j,Re,R[tt],te);if(vt===null){Re===null&&(Re=lt);break}e&&Re&&vt.alternate===null&&t(j,Re),O=d(vt,O,tt),gt===null?$e=vt:gt.sibling=vt,gt=vt,Re=lt}if(tt===R.length)return i(j,Re),ft&&Va(j,tt),$e;if(Re===null){for(;tt<R.length;tt++)Re=ae(j,R[tt],te),Re!==null&&(O=d(Re,O,tt),gt===null?$e=Re:gt.sibling=Re,gt=Re);return ft&&Va(j,tt),$e}for(Re=o(Re);tt<R.length;tt++)lt=Y(Re,j,tt,R[tt],te),lt!==null&&(e&&lt.alternate!==null&&Re.delete(lt.key===null?tt:lt.key),O=d(lt,O,tt),gt===null?$e=lt:gt.sibling=lt,gt=lt);return e&&Re.forEach(function(Ar){return t(j,Ar)}),ft&&Va(j,tt),$e}function He(j,O,R,te){if(R==null)throw Error(s(151));for(var $e=null,gt=null,Re=O,tt=O=0,lt=null,vt=R.next();Re!==null&&!vt.done;tt++,vt=R.next()){Re.index>tt?(lt=Re,Re=null):lt=Re.sibling;var Ar=B(j,Re,vt.value,te);if(Ar===null){Re===null&&(Re=lt);break}e&&Re&&Ar.alternate===null&&t(j,Re),O=d(Ar,O,tt),gt===null?$e=Ar:gt.sibling=Ar,gt=Ar,Re=lt}if(vt.done)return i(j,Re),ft&&Va(j,tt),$e;if(Re===null){for(;!vt.done;tt++,vt=R.next())vt=ae(j,vt.value,te),vt!==null&&(O=d(vt,O,tt),gt===null?$e=vt:gt.sibling=vt,gt=vt);return ft&&Va(j,tt),$e}for(Re=o(Re);!vt.done;tt++,vt=R.next())vt=Y(Re,j,tt,vt.value,te),vt!==null&&(e&&vt.alternate!==null&&Re.delete(vt.key===null?tt:vt.key),O=d(vt,O,tt),gt===null?$e=vt:gt.sibling=vt,gt=vt);return e&&Re.forEach(function(Wx){return t(j,Wx)}),ft&&Va(j,tt),$e}function Rt(j,O,R,te){if(typeof R=="object"&&R!==null&&R.type===G&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case k:e:{for(var $e=R.key;O!==null;){if(O.key===$e){if($e=R.type,$e===G){if(O.tag===7){i(j,O.sibling),te=c(O,R.props.children),te.return=j,j=te;break e}}else if(O.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===re&&Kr($e)===O.type){i(j,O.sibling),te=c(O,R.props),Is(te,R),te.return=j,j=te;break e}i(j,O);break}else t(j,O);O=O.sibling}R.type===G?(te=Gr(R.props.children,j.mode,te,R.key),te.return=j,j=te):(te=Wo(R.type,R.key,R.props,null,j.mode,te),Is(te,R),te.return=j,j=te)}return g(j);case N:e:{for($e=R.key;O!==null;){if(O.key===$e)if(O.tag===4&&O.stateNode.containerInfo===R.containerInfo&&O.stateNode.implementation===R.implementation){i(j,O.sibling),te=c(O,R.children||[]),te.return=j,j=te;break e}else{i(j,O);break}else t(j,O);O=O.sibling}te=bc(R,j.mode,te),te.return=j,j=te}return g(j);case re:return R=Kr(R),Rt(j,O,R,te)}if(Ve(R))return Te(j,O,R,te);if(_e(R)){if($e=_e(R),typeof $e!="function")throw Error(s(150));return R=$e.call(R),He(j,O,R,te)}if(typeof R.then=="function")return Rt(j,O,sl(R),te);if(R.$$typeof===q)return Rt(j,O,nl(j,R),te);ol(j,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,O!==null&&O.tag===6?(i(j,O.sibling),te=c(O,R),te.return=j,j=te):(i(j,O),te=vc(R,j.mode,te),te.return=j,j=te),g(j)):i(j,O)}return function(j,O,R,te){try{$s=0;var $e=Rt(j,O,R,te);return _i=null,$e}catch(Re){if(Re===Ai||Re===rl)throw Re;var gt=qn(29,Re,null,j.mode);return gt.lanes=te,gt.return=j,gt}finally{}}}var Jr=em(!0),tm=em(!1),hr=!1;function _c(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function pr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function mr(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(wt&2)!==0){var c=o.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),o.pending=t,t=Jo(e),Up(e,null,i),t}return Qo(e,o,t,i),Jo(e)}function Hs(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Es(e,i)}}function Mc(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?c=d=g:d=d.next=g,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Rc=!1;function Vs(){if(Rc){var e=ji;if(e!==null)throw e}}function qs(e,t,i,o){Rc=!1;var c=e.updateQueue;hr=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var T=w,z=T.next;T.next=null,g===null?d=z:g.next=z,g=T;var W=e.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==g&&(w===null?W.firstBaseUpdate=z:w.next=z,W.lastBaseUpdate=T))}if(d!==null){var ae=c.baseState;g=0,W=z=T=null,w=d;do{var B=w.lane&-536870913,Y=B!==w.lane;if(Y?(ot&B)===B:(o&B)===B){B!==0&&B===Ni&&(Rc=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Te=e,He=w;B=t;var Rt=i;switch(He.tag){case 1:if(Te=He.payload,typeof Te=="function"){ae=Te.call(Rt,ae,B);break e}ae=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=He.payload,B=typeof Te=="function"?Te.call(Rt,ae,B):Te,B==null)break e;ae=v({},ae,B);break e;case 2:hr=!0}}B=w.callback,B!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=c.callbacks,Y===null?c.callbacks=[B]:Y.push(B))}else Y={lane:B,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(z=W=Y,T=ae):W=W.next=Y,g|=B;if(w=w.next,w===null){if(w=c.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,c.lastBaseUpdate=Y,c.shared.pending=null}}while(!0);W===null&&(T=ae),c.baseState=T,c.firstBaseUpdate=z,c.lastBaseUpdate=W,d===null&&(c.shared.lanes=0),wr|=g,e.lanes=g,e.memoizedState=ae}}function nm(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function am(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)nm(i[e],t)}var Di=x(null),ll=x(0);function rm(e,t){e=Wa,A(ll,e),A(Di,t),Wa=e|t.baseLanes}function zc(){A(ll,Wa),A(Di,Di.current)}function Lc(){Wa=ll.current,M(Di),M(ll)}var Yn=x(null),ra=null;function yr(e){var t=e.alternate;A(en,en.current&1),A(Yn,e),ra===null&&(t===null||Di.current!==null||t.memoizedState!==null)&&(ra=e)}function Bc(e){A(en,en.current),A(Yn,e),ra===null&&(ra=e)}function im(e){e.tag===22?(A(en,en.current),A(Yn,e),ra===null&&(ra=e)):gr()}function gr(){A(en,en.current),A(Yn,Yn.current)}function Gn(e){M(Yn),ra===e&&(ra=null),M(en)}var en=x(0);function ul(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Yf(i)||Gf(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ga=0,Je=null,Dt=null,an=null,cl=!1,Mi=!1,Wr=!1,fl=0,Ys=0,Ri=null,qS=0;function Qt(){throw Error(s(321))}function Uc(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Vn(e[i],t[i]))return!1;return!0}function $c(e,t,i,o,c,d){return Ga=d,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?Vm:ef,Wr=!1,d=i(o,c),Wr=!1,Mi&&(d=om(t,i,o,c)),sm(e),d}function sm(e){C.H=Ps;var t=Dt!==null&&Dt.next!==null;if(Ga=0,an=Dt=Je=null,cl=!1,Ys=0,Ri=null,t)throw Error(s(300));e===null||rn||(e=e.dependencies,e!==null&&tl(e)&&(rn=!0))}function om(e,t,i,o){Je=e;var c=0;do{if(Mi&&(Ri=null),Ys=0,Mi=!1,25<=c)throw Error(s(301));if(c+=1,an=Dt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}C.H=qm,d=t(i,o)}while(Mi);return d}function YS(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?Gs(t):t,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(Je.flags|=1024),t}function Ic(){var e=fl!==0;return fl=0,e}function Hc(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Vc(e){if(cl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}cl=!1}Ga=0,an=Dt=Je=null,Mi=!1,Ys=fl=0,Ri=null}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Je.memoizedState=an=e:an=an.next=e,an}function tn(){if(Dt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=an===null?Je.memoizedState:an.next;if(t!==null)an=t,Dt=e;else{if(e===null)throw Je.alternate===null?Error(s(467)):Error(s(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},an===null?Je.memoizedState=an=e:an=an.next=e}return an}function dl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gs(e){var t=Ys;return Ys+=1,Ri===null&&(Ri=[]),e=Qp(Ri,e,t),t=Je,(an===null?t.memoizedState:an.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?Vm:ef),e}function hl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Gs(e);if(e.$$typeof===q)return yn(e)}throw Error(s(438,String(e)))}function qc(e){var t=null,i=Je.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=Je.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=dl(),Je.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=F;return t.index++,i}function Za(e,t){return typeof t=="function"?t(e):t}function pl(e){var t=tn();return Yc(t,Dt,e)}function Yc(e,t,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var c=e.baseQueue,d=o.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}t.baseQueue=c=d,o.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var w=g=null,T=null,z=t,W=!1;do{var ae=z.lane&-536870913;if(ae!==z.lane?(ot&ae)===ae:(Ga&ae)===ae){var B=z.revertLane;if(B===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),ae===Ni&&(W=!0);else if((Ga&B)===B){z=z.next,B===Ni&&(W=!0);continue}else ae={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},T===null?(w=T=ae,g=d):T=T.next=ae,Je.lanes|=B,wr|=B;ae=z.action,Wr&&i(d,ae),d=z.hasEagerState?z.eagerState:i(d,ae)}else B={lane:ae,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},T===null?(w=T=B,g=d):T=T.next=B,Je.lanes|=ae,wr|=ae;z=z.next}while(z!==null&&z!==t);if(T===null?g=d:T.next=w,!Vn(d,e.memoizedState)&&(rn=!0,W&&(i=ji,i!==null)))throw i;e.memoizedState=d,e.baseState=g,e.baseQueue=T,o.lastRenderedState=d}return c===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Gc(e){var t=tn(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);Vn(d,t.memoizedState)||(rn=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,o]}function lm(e,t,i){var o=Je,c=tn(),d=ft;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=t();var g=!Vn((Dt||c).memoizedState,i);if(g&&(c.memoizedState=i,rn=!0),c=c.queue,Fc(fm.bind(null,o,c,e),[e]),c.getSnapshot!==t||g||an!==null&&an.memoizedState.tag&1){if(o.flags|=2048,zi(9,{destroy:void 0},cm.bind(null,o,c,i,t),null),zt===null)throw Error(s(349));d||(Ga&127)!==0||um(o,t,i)}return i}function um(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Je.updateQueue,t===null?(t=dl(),Je.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function cm(e,t,i,o){t.value=i,t.getSnapshot=o,dm(t)&&hm(e)}function fm(e,t,i){return i(function(){dm(t)&&hm(e)})}function dm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Vn(e,i)}catch{return!0}}function hm(e){var t=Yr(e,2);t!==null&&$n(t,e,2)}function Zc(e){var t=_n();if(typeof e=="function"){var i=e;if(e=i(),Wr){Ze(!0);try{i()}finally{Ze(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:e},t}function pm(e,t,i,o){return e.baseState=i,Yc(e,Dt,typeof o=="function"?o:Za)}function GS(e,t,i,o,c){if(gl(e))throw Error(s(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){d.listeners.push(g)}};C.T!==null?i(!0):d.isTransition=!1,o(d),i=t.pending,i===null?(d.next=t.pending=d,mm(t,d)):(d.next=i.next,t.pending=i.next=d)}}function mm(e,t){var i=t.action,o=t.payload,c=e.state;if(t.isTransition){var d=C.T,g={};C.T=g;try{var w=i(c,o),T=C.S;T!==null&&T(g,w),ym(e,t,w)}catch(z){Pc(e,t,z)}finally{d!==null&&g.types!==null&&(d.types=g.types),C.T=d}}else try{d=i(c,o),ym(e,t,d)}catch(z){Pc(e,t,z)}}function ym(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){gm(e,t,o)},function(o){return Pc(e,t,o)}):gm(e,t,i)}function gm(e,t,i){t.status="fulfilled",t.value=i,vm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,mm(e,i)))}function Pc(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,vm(t),t=t.next;while(t!==o)}e.action=null}function vm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function bm(e,t){return t}function wm(e,t){if(ft){var i=zt.formState;if(i!==null){e:{var o=Je;if(ft){if($t){t:{for(var c=$t,d=aa;c.nodeType!==8;){if(!d){c=null;break t}if(c=ia(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){$t=ia(c.nextSibling),o=c.data==="F!";break e}}fr(o)}o=!1}o&&(t=i[0])}}return i=_n(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bm,lastRenderedState:t},i.queue=o,i=$m.bind(null,Je,o),o.dispatch=i,o=Zc(!1),d=Wc.bind(null,Je,!1,o.queue),o=_n(),c={state:t,dispatch:null,action:e,pending:null},o.queue=c,i=GS.bind(null,Je,c,d,i),c.dispatch=i,o.memoizedState=e,[t,i,!1]}function Sm(e){var t=tn();return xm(t,Dt,e)}function xm(e,t,i){if(t=Yc(e,t,bm)[0],e=pl(Za)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Gs(t)}catch(g){throw g===Ai?rl:g}else o=t;t=tn();var c=t.queue,d=c.dispatch;return i!==t.memoizedState&&(Je.flags|=2048,zi(9,{destroy:void 0},ZS.bind(null,c,i),null)),[o,d,e]}function ZS(e,t){e.action=t}function Em(e){var t=tn(),i=Dt;if(i!==null)return xm(t,i,e);tn(),t=t.memoizedState,i=tn();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function zi(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=Je.updateQueue,t===null&&(t=dl(),Je.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function km(){return tn().memoizedState}function ml(e,t,i,o){var c=_n();Je.flags|=e,c.memoizedState=zi(1|t,{destroy:void 0},i,o===void 0?null:o)}function yl(e,t,i,o){var c=tn();o=o===void 0?null:o;var d=c.memoizedState.inst;Dt!==null&&o!==null&&Uc(o,Dt.memoizedState.deps)?c.memoizedState=zi(t,d,i,o):(Je.flags|=e,c.memoizedState=zi(1|t,d,i,o))}function Cm(e,t){ml(8390656,8,e,t)}function Fc(e,t){yl(2048,8,e,t)}function PS(e){Je.flags|=4;var t=Je.updateQueue;if(t===null)t=dl(),Je.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Tm(e){var t=tn().memoizedState;return PS({ref:t,nextImpl:e}),function(){if((wt&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Om(e,t){return yl(4,2,e,t)}function Nm(e,t){return yl(4,4,e,t)}function jm(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Am(e,t,i){i=i!=null?i.concat([e]):null,yl(4,4,jm.bind(null,t,e),i)}function Xc(){}function _m(e,t){var i=tn();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&Uc(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Dm(e,t){var i=tn();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&Uc(t,o[1]))return o[0];if(o=e(),Wr){Ze(!0);try{e()}finally{Ze(!1)}}return i.memoizedState=[o,t],o}function Kc(e,t,i){return i===void 0||(Ga&1073741824)!==0&&(ot&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=My(),Je.lanes|=e,wr|=e,i)}function Mm(e,t,i,o){return Vn(i,t)?i:Di.current!==null?(e=Kc(e,i,o),Vn(e,t)||(rn=!0),e):(Ga&42)===0||(Ga&1073741824)!==0&&(ot&261930)===0?(rn=!0,e.memoizedState=i):(e=My(),Je.lanes|=e,wr|=e,t)}function Rm(e,t,i,o,c){var d=L.p;L.p=d!==0&&8>d?d:8;var g=C.T,w={};C.T=w,Wc(e,!1,t,i);try{var T=c(),z=C.S;if(z!==null&&z(w,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var W=VS(T,o);Zs(e,t,W,Fn(e))}else Zs(e,t,o,Fn(e))}catch(ae){Zs(e,t,{then:function(){},status:"rejected",reason:ae},Fn())}finally{L.p=d,g!==null&&w.types!==null&&(g.types=w.types),C.T=g}}function FS(){}function Qc(e,t,i,o){if(e.tag!==5)throw Error(s(476));var c=zm(e).queue;Rm(e,c,t,se,i===null?FS:function(){return Lm(e),i(o)})}function zm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:se},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Lm(e){var t=zm(e);t.next===null&&(t=e.alternate.memoizedState),Zs(e,t.next.queue,{},Fn())}function Jc(){return yn(uo)}function Bm(){return tn().memoizedState}function Um(){return tn().memoizedState}function XS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Fn();e=pr(i);var o=mr(t,e,i);o!==null&&($n(o,t,i),Hs(o,t,i)),t={cache:Oc()},e.payload=t;return}t=t.return}}function KS(e,t,i){var o=Fn();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},gl(e)?Im(t,i):(i=yc(e,t,i,o),i!==null&&($n(i,e,o),Hm(i,t,o)))}function $m(e,t,i){var o=Fn();Zs(e,t,i,o)}function Zs(e,t,i,o){var c={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(gl(e))Im(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,w=d(g,i);if(c.hasEagerState=!0,c.eagerState=w,Vn(w,g))return Qo(e,t,c,0),zt===null&&Ko(),!1}catch{}finally{}if(i=yc(e,t,c,o),i!==null)return $n(i,e,o),Hm(i,t,o),!0}return!1}function Wc(e,t,i,o){if(o={lane:2,revertLane:Df(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},gl(e)){if(t)throw Error(s(479))}else t=yc(e,i,o,2),t!==null&&$n(t,e,2)}function gl(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Im(e,t){Mi=cl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Hm(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Es(e,i)}}var Ps={readContext:yn,use:hl,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Ps.useEffectEvent=Qt;var Vm={readContext:yn,use:hl,useCallback:function(e,t){return _n().memoizedState=[e,t===void 0?null:t],e},useContext:yn,useEffect:Cm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,ml(4194308,4,jm.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ml(4194308,4,e,t)},useInsertionEffect:function(e,t){ml(4,2,e,t)},useMemo:function(e,t){var i=_n();t=t===void 0?null:t;var o=e();if(Wr){Ze(!0);try{e()}finally{Ze(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=_n();if(i!==void 0){var c=i(t);if(Wr){Ze(!0);try{i(t)}finally{Ze(!1)}}}else c=t;return o.memoizedState=o.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},o.queue=e,e=e.dispatch=KS.bind(null,Je,e),[o.memoizedState,e]},useRef:function(e){var t=_n();return e={current:e},t.memoizedState=e},useState:function(e){e=Zc(e);var t=e.queue,i=$m.bind(null,Je,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Xc,useDeferredValue:function(e,t){var i=_n();return Kc(i,e,t)},useTransition:function(){var e=Zc(!1);return e=Rm.bind(null,Je,e.queue,!0,!1),_n().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=Je,c=_n();if(ft){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),zt===null)throw Error(s(349));(ot&127)!==0||um(o,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,Cm(fm.bind(null,o,d,e),[e]),o.flags|=2048,zi(9,{destroy:void 0},cm.bind(null,o,d,i,t),null),i},useId:function(){var e=_n(),t=zt.identifierPrefix;if(ft){var i=Ta,o=Ca;i=(o&~(1<<32-mt(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=fl++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=qS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Jc,useFormState:wm,useActionState:wm,useOptimistic:function(e){var t=_n();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Wc.bind(null,Je,!0,i),i.dispatch=t,[e,t]},useMemoCache:qc,useCacheRefresh:function(){return _n().memoizedState=XS.bind(null,Je)},useEffectEvent:function(e){var t=_n(),i={impl:e};return t.memoizedState=i,function(){if((wt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},ef={readContext:yn,use:hl,useCallback:_m,useContext:yn,useEffect:Fc,useImperativeHandle:Am,useInsertionEffect:Om,useLayoutEffect:Nm,useMemo:Dm,useReducer:pl,useRef:km,useState:function(){return pl(Za)},useDebugValue:Xc,useDeferredValue:function(e,t){var i=tn();return Mm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=pl(Za)[0],t=tn().memoizedState;return[typeof e=="boolean"?e:Gs(e),t]},useSyncExternalStore:lm,useId:Bm,useHostTransitionStatus:Jc,useFormState:Sm,useActionState:Sm,useOptimistic:function(e,t){var i=tn();return pm(i,Dt,e,t)},useMemoCache:qc,useCacheRefresh:Um};ef.useEffectEvent=Tm;var qm={readContext:yn,use:hl,useCallback:_m,useContext:yn,useEffect:Fc,useImperativeHandle:Am,useInsertionEffect:Om,useLayoutEffect:Nm,useMemo:Dm,useReducer:Gc,useRef:km,useState:function(){return Gc(Za)},useDebugValue:Xc,useDeferredValue:function(e,t){var i=tn();return Dt===null?Kc(i,e,t):Mm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=Gc(Za)[0],t=tn().memoizedState;return[typeof e=="boolean"?e:Gs(e),t]},useSyncExternalStore:lm,useId:Bm,useHostTransitionStatus:Jc,useFormState:Em,useActionState:Em,useOptimistic:function(e,t){var i=tn();return Dt!==null?pm(i,Dt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:qc,useCacheRefresh:Um};qm.useEffectEvent=Tm;function tf(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:v({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var nf={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Fn(),c=pr(o);c.payload=t,i!=null&&(c.callback=i),t=mr(e,c,o),t!==null&&($n(t,e,o),Hs(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Fn(),c=pr(o);c.tag=1,c.payload=t,i!=null&&(c.callback=i),t=mr(e,c,o),t!==null&&($n(t,e,o),Hs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Fn(),o=pr(i);o.tag=2,t!=null&&(o.callback=t),t=mr(e,o,i),t!==null&&($n(t,e,i),Hs(t,e,i))}};function Ym(e,t,i,o,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,g):t.prototype&&t.prototype.isPureReactComponent?!Ms(i,o)||!Ms(c,d):!0}function Gm(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&nf.enqueueReplaceState(t,t.state,null)}function ei(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=v({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function Zm(e){Xo(e)}function Pm(e){console.error(e)}function Fm(e){Xo(e)}function vl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Xm(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function af(e,t,i){return i=pr(i),i.tag=3,i.payload={element:null},i.callback=function(){vl(e,t)},i}function Km(e){return e=pr(e),e.tag=3,e}function Qm(e,t,i,o){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var d=o.value;e.payload=function(){return c(d)},e.callback=function(){Xm(t,i,o)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Xm(t,i,o),typeof c!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function QS(e,t,i,o,c){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Oi(t,i,c,!0),i=Yn.current,i!==null){switch(i.tag){case 31:case 13:return ra===null?Al():i.alternate===null&&Jt===0&&(Jt=3),i.flags&=-257,i.flags|=65536,i.lanes=c,o===il?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),jf(e,o,c)),!1;case 22:return i.flags|=65536,o===il?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),jf(e,o,c)),!1}throw Error(s(435,i.tag))}return jf(e,o,c),Al(),!1}if(ft)return t=Yn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,o!==xc&&(e=Error(s(422),{cause:o}),Ls(ea(e,i)))):(o!==xc&&(t=Error(s(423),{cause:o}),Ls(ea(t,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,o=ea(o,i),c=af(e.stateNode,o,c),Mc(e,c),Jt!==4&&(Jt=2)),!1;var d=Error(s(520),{cause:o});if(d=ea(d,i),to===null?to=[d]:to.push(d),Jt!==4&&(Jt=2),t===null)return!0;o=ea(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=af(i.stateNode,o,e),Mc(i,e),!1;case 1:if(t=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Sr===null||!Sr.has(d))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Km(c),Qm(c,e,i,o),Mc(i,c),!1}i=i.return}while(i!==null);return!1}var rf=Error(s(461)),rn=!1;function gn(e,t,i,o){t.child=e===null?tm(t,null,i,o):Jr(t,e.child,i,o)}function Jm(e,t,i,o,c){i=i.render;var d=t.ref;if("ref"in o){var g={};for(var w in o)w!=="ref"&&(g[w]=o[w])}else g=o;return Fr(t),o=$c(e,t,i,g,d,c),w=Ic(),e!==null&&!rn?(Hc(e,t,c),Pa(e,t,c)):(ft&&w&&wc(t),t.flags|=1,gn(e,t,o,c),t.child)}function Wm(e,t,i,o,c){if(e===null){var d=i.type;return typeof d=="function"&&!gc(d)&&d.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=d,ey(e,t,d,o,c)):(e=Wo(i.type,null,o,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!hf(e,c)){var g=d.memoizedProps;if(i=i.compare,i=i!==null?i:Ms,i(g,o)&&e.ref===t.ref)return Pa(e,t,c)}return t.flags|=1,e=Ha(d,o),e.ref=t.ref,e.return=t,t.child=e}function ey(e,t,i,o,c){if(e!==null){var d=e.memoizedProps;if(Ms(d,o)&&e.ref===t.ref)if(rn=!1,t.pendingProps=o=d,hf(e,c))(e.flags&131072)!==0&&(rn=!0);else return t.lanes=e.lanes,Pa(e,t,c)}return sf(e,t,i,o,c)}function ty(e,t,i,o){var c=o.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|i:i,e!==null){for(o=t.child=e.child,c=0;o!==null;)c=c|o.lanes|o.childLanes,o=o.sibling;o=c&~d}else o=0,t.child=null;return ny(e,t,d,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&al(t,d!==null?d.cachePool:null),d!==null?rm(t,d):zc(),im(t);else return o=t.lanes=536870912,ny(e,t,d!==null?d.baseLanes|i:i,i,o)}else d!==null?(al(t,d.cachePool),rm(t,d),gr(),t.memoizedState=null):(e!==null&&al(t,null),zc(),gr());return gn(e,t,c,i),t.child}function Fs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ny(e,t,i,o,c){var d=jc();return d=d===null?null:{parent:nn._currentValue,pool:d},t.memoizedState={baseLanes:i,cachePool:d},e!==null&&al(t,null),zc(),im(t),e!==null&&Oi(e,t,o,!0),t.childLanes=c,null}function bl(e,t){return t=Sl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ay(e,t,i){return Jr(t,e.child,null,i),e=bl(t,t.pendingProps),e.flags|=2,Gn(t),t.memoizedState=null,e}function JS(e,t,i){var o=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ft){if(o.mode==="hidden")return e=bl(t,o),t.lanes=536870912,Fs(null,e);if(Bc(t),(e=$t)?(e=mg(e,aa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ur!==null?{id:Ca,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},i=Ip(e),i.return=t,t.child=i,mn=t,$t=null)):e=null,e===null)throw fr(t);return t.lanes=536870912,null}return bl(t,o)}var d=e.memoizedState;if(d!==null){var g=d.dehydrated;if(Bc(t),c)if(t.flags&256)t.flags&=-257,t=ay(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(rn||Oi(e,t,i,!1),c=(i&e.childLanes)!==0,rn||c){if(o=zt,o!==null&&(g=Zu(o,i),g!==0&&g!==d.retryLane))throw d.retryLane=g,Yr(e,g),$n(o,e,g),rf;Al(),t=ay(e,t,i)}else e=d.treeContext,$t=ia(g.nextSibling),mn=t,ft=!0,cr=null,aa=!1,e!==null&&qp(t,e),t=bl(t,o),t.flags|=4096;return t}return e=Ha(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function wl(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function sf(e,t,i,o,c){return Fr(t),i=$c(e,t,i,o,void 0,c),o=Ic(),e!==null&&!rn?(Hc(e,t,c),Pa(e,t,c)):(ft&&o&&wc(t),t.flags|=1,gn(e,t,i,c),t.child)}function ry(e,t,i,o,c,d){return Fr(t),t.updateQueue=null,i=om(t,o,i,c),sm(e),o=Ic(),e!==null&&!rn?(Hc(e,t,d),Pa(e,t,d)):(ft&&o&&wc(t),t.flags|=1,gn(e,t,i,d),t.child)}function iy(e,t,i,o,c){if(Fr(t),t.stateNode===null){var d=Ei,g=i.contextType;typeof g=="object"&&g!==null&&(d=yn(g)),d=new i(o,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=nf,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=o,d.state=t.memoizedState,d.refs={},_c(t),g=i.contextType,d.context=typeof g=="object"&&g!==null?yn(g):Ei,d.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(tf(t,i,g,o),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(g=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&nf.enqueueReplaceState(d,d.state,null),qs(t,o,d,c),Vs(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){d=t.stateNode;var w=t.memoizedProps,T=ei(i,w);d.props=T;var z=d.context,W=i.contextType;g=Ei,typeof W=="object"&&W!==null&&(g=yn(W));var ae=i.getDerivedStateFromProps;W=typeof ae=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||z!==g)&&Gm(t,d,o,g),hr=!1;var B=t.memoizedState;d.state=B,qs(t,o,d,c),Vs(),z=t.memoizedState,w||B!==z||hr?(typeof ae=="function"&&(tf(t,i,ae,o),z=t.memoizedState),(T=hr||Ym(t,i,T,o,B,z,g))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=z),d.props=o,d.state=z,d.context=g,o=T):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{d=t.stateNode,Dc(e,t),g=t.memoizedProps,W=ei(i,g),d.props=W,ae=t.pendingProps,B=d.context,z=i.contextType,T=Ei,typeof z=="object"&&z!==null&&(T=yn(z)),w=i.getDerivedStateFromProps,(z=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==ae||B!==T)&&Gm(t,d,o,T),hr=!1,B=t.memoizedState,d.state=B,qs(t,o,d,c),Vs();var Y=t.memoizedState;g!==ae||B!==Y||hr||e!==null&&e.dependencies!==null&&tl(e.dependencies)?(typeof w=="function"&&(tf(t,i,w,o),Y=t.memoizedState),(W=hr||Ym(t,i,W,o,B,Y,T)||e!==null&&e.dependencies!==null&&tl(e.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Y,T),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Y,T)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Y),d.props=o,d.state=Y,d.context=T,o=W):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),o=!1)}return d=o,wl(e,t),o=(t.flags&128)!==0,d||o?(d=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&o?(t.child=Jr(t,e.child,null,c),t.child=Jr(t,null,i,c)):gn(e,t,i,c),t.memoizedState=d.state,e=t.child):e=Pa(e,t,c),e}function sy(e,t,i,o){return Zr(),t.flags|=256,gn(e,t,i,o),t.child}var of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lf(e){return{baseLanes:e,cachePool:Xp()}}function uf(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Pn),e}function oy(e,t,i){var o=t.pendingProps,c=!1,d=(t.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(en.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(ft){if(c?yr(t):gr(),(e=$t)?(e=mg(e,aa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ur!==null?{id:Ca,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},i=Ip(e),i.return=t,t.child=i,mn=t,$t=null)):e=null,e===null)throw fr(t);return Gf(e)?t.lanes=32:t.lanes=536870912,null}var w=o.children;return o=o.fallback,c?(gr(),c=t.mode,w=Sl({mode:"hidden",children:w},c),o=Gr(o,c,i,null),w.return=t,o.return=t,w.sibling=o,t.child=w,o=t.child,o.memoizedState=lf(i),o.childLanes=uf(e,g,i),t.memoizedState=of,Fs(null,o)):(yr(t),cf(t,w))}var T=e.memoizedState;if(T!==null&&(w=T.dehydrated,w!==null)){if(d)t.flags&256?(yr(t),t.flags&=-257,t=ff(e,t,i)):t.memoizedState!==null?(gr(),t.child=e.child,t.flags|=128,t=null):(gr(),w=o.fallback,c=t.mode,o=Sl({mode:"visible",children:o.children},c),w=Gr(w,c,i,null),w.flags|=2,o.return=t,w.return=t,o.sibling=w,t.child=o,Jr(t,e.child,null,i),o=t.child,o.memoizedState=lf(i),o.childLanes=uf(e,g,i),t.memoizedState=of,t=Fs(null,o));else if(yr(t),Gf(w)){if(g=w.nextSibling&&w.nextSibling.dataset,g)var z=g.dgst;g=z,o=Error(s(419)),o.stack="",o.digest=g,Ls({value:o,source:null,stack:null}),t=ff(e,t,i)}else if(rn||Oi(e,t,i,!1),g=(i&e.childLanes)!==0,rn||g){if(g=zt,g!==null&&(o=Zu(g,i),o!==0&&o!==T.retryLane))throw T.retryLane=o,Yr(e,o),$n(g,e,o),rf;Yf(w)||Al(),t=ff(e,t,i)}else Yf(w)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,$t=ia(w.nextSibling),mn=t,ft=!0,cr=null,aa=!1,e!==null&&qp(t,e),t=cf(t,o.children),t.flags|=4096);return t}return c?(gr(),w=o.fallback,c=t.mode,T=e.child,z=T.sibling,o=Ha(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,z!==null?w=Ha(z,w):(w=Gr(w,c,i,null),w.flags|=2),w.return=t,o.return=t,o.sibling=w,t.child=o,Fs(null,o),o=t.child,w=e.child.memoizedState,w===null?w=lf(i):(c=w.cachePool,c!==null?(T=nn._currentValue,c=c.parent!==T?{parent:T,pool:T}:c):c=Xp(),w={baseLanes:w.baseLanes|i,cachePool:c}),o.memoizedState=w,o.childLanes=uf(e,g,i),t.memoizedState=of,Fs(e.child,o)):(yr(t),i=e.child,e=i.sibling,i=Ha(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function cf(e,t){return t=Sl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Sl(e,t){return e=qn(22,e,null,t),e.lanes=0,e}function ff(e,t,i){return Jr(t,e.child,null,i),e=cf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ly(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Cc(e.return,t,i)}function df(e,t,i,o,c,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:c,treeForkCount:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=i,g.tailMode=c,g.treeForkCount=d)}function uy(e,t,i){var o=t.pendingProps,c=o.revealOrder,d=o.tail;o=o.children;var g=en.current,w=(g&2)!==0;if(w?(g=g&1|2,t.flags|=128):g&=1,A(en,g),gn(e,t,o,i),o=ft?zs:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ly(e,i,t);else if(e.tag===19)ly(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&ul(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),df(t,!1,c,i,d,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ul(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}df(t,!0,i,null,d,o);break;case"together":df(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function Pa(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),wr|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Oi(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Ha(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ha(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function hf(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&tl(e)))}function WS(e,t,i){switch(t.tag){case 3:Be(t,t.stateNode.containerInfo),dr(t,nn,e.memoizedState.cache),Zr();break;case 27:case 5:kt(t);break;case 4:Be(t,t.stateNode.containerInfo);break;case 10:dr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Bc(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(yr(t),t.flags|=128,null):(i&t.child.childLanes)!==0?oy(e,t,i):(yr(t),e=Pa(e,t,i),e!==null?e.sibling:null);yr(t);break;case 19:var c=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Oi(e,t,i,!1),o=(i&t.childLanes)!==0),c){if(o)return uy(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),A(en,en.current),o)break;return null;case 22:return t.lanes=0,ty(e,t,i,t.pendingProps);case 24:dr(t,nn,e.memoizedState.cache)}return Pa(e,t,i)}function cy(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)rn=!0;else{if(!hf(e,i)&&(t.flags&128)===0)return rn=!1,WS(e,t,i);rn=(e.flags&131072)!==0}else rn=!1,ft&&(t.flags&1048576)!==0&&Vp(t,zs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=Kr(t.elementType),t.type=e,typeof e=="function")gc(e)?(o=ei(e,o),t.tag=1,t=iy(null,t,e,o,i)):(t.tag=0,t=sf(null,t,e,o,i));else{if(e!=null){var c=e.$$typeof;if(c===Z){t.tag=11,t=Jm(null,t,e,o,i);break e}else if(c===$){t.tag=14,t=Wm(null,t,e,o,i);break e}}throw t=qe(e)||e,Error(s(306,t,""))}}return t;case 0:return sf(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,c=ei(o,t.pendingProps),iy(e,t,o,c,i);case 3:e:{if(Be(t,t.stateNode.containerInfo),e===null)throw Error(s(387));o=t.pendingProps;var d=t.memoizedState;c=d.element,Dc(e,t),qs(t,o,null,i);var g=t.memoizedState;if(o=g.cache,dr(t,nn,o),o!==d.cache&&Tc(t,[nn],i,!0),Vs(),o=g.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=sy(e,t,o,i);break e}else if(o!==c){c=ea(Error(s(424)),t),Ls(c),t=sy(e,t,o,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=ia(e.firstChild),mn=t,ft=!0,cr=null,aa=!0,i=tm(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Zr(),o===c){t=Pa(e,t,i);break e}gn(e,t,o,i)}t=t.child}return t;case 26:return wl(e,t),e===null?(i=Sg(t.type,null,t.pendingProps,null))?t.memoizedState=i:ft||(i=t.type,e=t.pendingProps,o=Bl(je.current).createElement(i),o[Gt]=t,o[En]=e,vn(o,i,e),yt(o),t.stateNode=o):t.memoizedState=Sg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return kt(t),e===null&&ft&&(o=t.stateNode=vg(t.type,t.pendingProps,je.current),mn=t,aa=!0,c=$t,Cr(t.type)?(Zf=c,$t=ia(o.firstChild)):$t=c),gn(e,t,t.pendingProps.children,i),wl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ft&&((c=o=$t)&&(o=jx(o,t.type,t.pendingProps,aa),o!==null?(t.stateNode=o,mn=t,$t=ia(o.firstChild),aa=!1,c=!0):c=!1),c||fr(t)),kt(t),c=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,o=d.children,Hf(c,d)?o=null:g!==null&&Hf(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=$c(e,t,YS,null,null,i),uo._currentValue=c),wl(e,t),gn(e,t,o,i),t.child;case 6:return e===null&&ft&&((e=i=$t)&&(i=Ax(i,t.pendingProps,aa),i!==null?(t.stateNode=i,mn=t,$t=null,e=!0):e=!1),e||fr(t)),null;case 13:return oy(e,t,i);case 4:return Be(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Jr(t,null,o,i):gn(e,t,o,i),t.child;case 11:return Jm(e,t,t.type,t.pendingProps,i);case 7:return gn(e,t,t.pendingProps,i),t.child;case 8:return gn(e,t,t.pendingProps.children,i),t.child;case 12:return gn(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,dr(t,t.type,o.value),gn(e,t,o.children,i),t.child;case 9:return c=t.type._context,o=t.pendingProps.children,Fr(t),c=yn(c),o=o(c),t.flags|=1,gn(e,t,o,i),t.child;case 14:return Wm(e,t,t.type,t.pendingProps,i);case 15:return ey(e,t,t.type,t.pendingProps,i);case 19:return uy(e,t,i);case 31:return JS(e,t,i);case 22:return ty(e,t,i,t.pendingProps);case 24:return Fr(t),o=yn(nn),e===null?(c=jc(),c===null&&(c=zt,d=Oc(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=i),c=d),t.memoizedState={parent:o,cache:c},_c(t),dr(t,nn,c)):((e.lanes&i)!==0&&(Dc(e,t),qs(t,null,null,i),Vs()),c=e.memoizedState,d=t.memoizedState,c.parent!==o?(c={parent:o,cache:o},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),dr(t,nn,o)):(o=d.cache,dr(t,nn,o),o!==c.cache&&Tc(t,[nn],i,!0))),gn(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Fa(e){e.flags|=4}function pf(e,t,i,o,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(By())e.flags|=8192;else throw Qr=il,Ac}else e.flags&=-16777217}function fy(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tg(t))if(By())e.flags|=8192;else throw Qr=il,Ac}function xl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Xe():536870912,e.lanes|=t,$i|=t)}function Xs(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function It(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function ex(e,t,i){var o=t.pendingProps;switch(Sc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(t),null;case 1:return It(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Ya(nn),Ue(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ti(t)?Fa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ec())),It(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(Fa(t),d!==null?(It(t),fy(t,d)):(It(t),pf(t,c,null,o,i))):d?d!==e.memoizedState?(Fa(t),It(t),fy(t,d)):(It(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&Fa(t),It(t),pf(t,c,e,o,i)),null;case 27:if(Ce(t),i=je.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Fa(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return It(t),null}e=X.current,Ti(t)?Yp(t):(e=vg(c,o,i),t.stateNode=e,Fa(t))}return It(t),null;case 5:if(Ce(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Fa(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return It(t),null}if(d=X.current,Ti(t))Yp(t);else{var g=Bl(je.current);switch(d){case 1:d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=g.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?g.createElement(c,{is:o.is}):g.createElement(c)}}d[Gt]=t,d[En]=o;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)d.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=d;e:switch(vn(d,c,o),c){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Fa(t)}}return It(t),pf(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Fa(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(e=je.current,Ti(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,c=mn,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}e[Gt]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||og(e.nodeValue,i)),e||fr(t,!0)}else e=Bl(e).createTextNode(o),e[Gt]=t,t.stateNode=e}return It(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=Ti(t),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Gt]=t}else Zr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;It(t),e=!1}else i=Ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Gn(t),t):(Gn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return It(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Ti(t),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[Gt]=t}else Zr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;It(t),c=!1}else c=Ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Gn(t),t):(Gn(t),null)}return Gn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),xl(t,t.updateQueue),It(t),null);case 4:return Ue(),e===null&&Lf(t.stateNode.containerInfo),It(t),null;case 10:return Ya(t.type),It(t),null;case 19:if(M(en),o=t.memoizedState,o===null)return It(t),null;if(c=(t.flags&128)!==0,d=o.rendering,d===null)if(c)Xs(o,!1);else{if(Jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=ul(e),d!==null){for(t.flags|=128,Xs(o,!1),e=d.updateQueue,t.updateQueue=e,xl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)$p(i,e),i=i.sibling;return A(en,en.current&1|2),ft&&Va(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&xe()>Ol&&(t.flags|=128,c=!0,Xs(o,!1),t.lanes=4194304)}else{if(!c)if(e=ul(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,xl(t,e),Xs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!ft)return It(t),null}else 2*xe()-o.renderingStartTime>Ol&&i!==536870912&&(t.flags|=128,c=!0,Xs(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(e=o.last,e!==null?e.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=xe(),e.sibling=null,i=en.current,A(en,c?i&1|2:i&1),ft&&Va(t,o.treeForkCount),e):(It(t),null);case 22:case 23:return Gn(t),Lc(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(It(t),t.subtreeFlags&6&&(t.flags|=8192)):It(t),i=t.updateQueue,i!==null&&xl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&M(Xr),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ya(nn),It(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function tx(e,t){switch(Sc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ya(nn),Ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ce(t),null;case 31:if(t.memoizedState!==null){if(Gn(t),t.alternate===null)throw Error(s(340));Zr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Gn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Zr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return M(en),null;case 4:return Ue(),null;case 10:return Ya(t.type),null;case 22:case 23:return Gn(t),Lc(),e!==null&&M(Xr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ya(nn),null;case 25:return null;default:return null}}function dy(e,t){switch(Sc(t),t.tag){case 3:Ya(nn),Ue();break;case 26:case 27:case 5:Ce(t);break;case 4:Ue();break;case 31:t.memoizedState!==null&&Gn(t);break;case 13:Gn(t);break;case 19:M(en);break;case 10:Ya(t.type);break;case 22:case 23:Gn(t),Lc(),e!==null&&M(Xr);break;case 24:Ya(nn)}}function Ks(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var c=o.next;i=c;do{if((i.tag&e)===e){o=void 0;var d=i.create,g=i.inst;o=d(),g.destroy=o}i=i.next}while(i!==c)}}catch(w){Ot(t,t.return,w)}}function vr(e,t,i){try{var o=t.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&e)===e){var g=o.inst,w=g.destroy;if(w!==void 0){g.destroy=void 0,c=t;var T=i,z=w;try{z()}catch(W){Ot(c,T,W)}}}o=o.next}while(o!==d)}}catch(W){Ot(t,t.return,W)}}function hy(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{am(t,i)}catch(o){Ot(e,e.return,o)}}}function py(e,t,i){i.props=ei(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Ot(e,t,o)}}function Qs(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(c){Ot(e,t,c)}}function Oa(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(c){Ot(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){Ot(e,t,c)}else i.current=null}function my(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(c){Ot(e,e.return,c)}}function mf(e,t,i){try{var o=e.stateNode;Ex(o,e.type,i,t),o[En]=t}catch(c){Ot(e,e.return,c)}}function yy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Cr(e.type)||e.tag===4}function yf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Cr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gf(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=$a));else if(o!==4&&(o===27&&Cr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(gf(e,t,i),e=e.sibling;e!==null;)gf(e,t,i),e=e.sibling}function El(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&Cr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(El(e,t,i),e=e.sibling;e!==null;)El(e,t,i),e=e.sibling}function gy(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);vn(t,o,i),t[Gt]=e,t[En]=i}catch(d){Ot(e,e.return,d)}}var Xa=!1,sn=!1,vf=!1,vy=typeof WeakSet=="function"?WeakSet:Set,dn=null;function nx(e,t){if(e=e.containerInfo,$f=Yl,e=Ap(e),cc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var g=0,w=-1,T=-1,z=0,W=0,ae=e,B=null;t:for(;;){for(var Y;ae!==i||c!==0&&ae.nodeType!==3||(w=g+c),ae!==d||o!==0&&ae.nodeType!==3||(T=g+o),ae.nodeType===3&&(g+=ae.nodeValue.length),(Y=ae.firstChild)!==null;)B=ae,ae=Y;for(;;){if(ae===e)break t;if(B===i&&++z===c&&(w=g),B===d&&++W===o&&(T=g),(Y=ae.nextSibling)!==null)break;ae=B,B=ae.parentNode}ae=Y}i=w===-1||T===-1?null:{start:w,end:T}}else i=null}i=i||{start:0,end:0}}else i=null;for(If={focusedElem:e,selectionRange:i},Yl=!1,dn=t;dn!==null;)if(t=dn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dn=e;else for(;dn!==null;){switch(t=dn,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)c=e[i],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=t,c=d.memoizedProps,d=d.memoizedState,o=i.stateNode;try{var Te=ei(i.type,c);e=o.getSnapshotBeforeUpdate(Te,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(He){Ot(i,i.return,He)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)qf(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":qf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,dn=e;break}dn=t.return}}function by(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Qa(e,i),o&4&&Ks(5,i);break;case 1:if(Qa(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){Ot(i,i.return,g)}else{var c=ei(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ot(i,i.return,g)}}o&64&&hy(i),o&512&&Qs(i,i.return);break;case 3:if(Qa(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{am(e,t)}catch(g){Ot(i,i.return,g)}}break;case 27:t===null&&o&4&&gy(i);case 26:case 5:Qa(e,i),t===null&&o&4&&my(i),o&512&&Qs(i,i.return);break;case 12:Qa(e,i);break;case 31:Qa(e,i),o&4&&xy(e,i);break;case 13:Qa(e,i),o&4&&Ey(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=fx.bind(null,i),_x(e,i))));break;case 22:if(o=i.memoizedState!==null||Xa,!o){t=t!==null&&t.memoizedState!==null||sn,c=Xa;var d=sn;Xa=o,(sn=t)&&!d?Ja(e,i,(i.subtreeFlags&8772)!==0):Qa(e,i),Xa=c,sn=d}break;case 30:break;default:Qa(e,i)}}function wy(e){var t=e.alternate;t!==null&&(e.alternate=null,wy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&et(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Yt=null,zn=!1;function Ka(e,t,i){for(i=i.child;i!==null;)Sy(e,t,i),i=i.sibling}function Sy(e,t,i){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(jt,i)}catch{}switch(i.tag){case 26:sn||Oa(i,t),Ka(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:sn||Oa(i,t);var o=Yt,c=zn;Cr(i.type)&&(Yt=i.stateNode,zn=!1),Ka(e,t,i),so(i.stateNode),Yt=o,zn=c;break;case 5:sn||Oa(i,t);case 6:if(o=Yt,c=zn,Yt=null,Ka(e,t,i),Yt=o,zn=c,Yt!==null)if(zn)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(i.stateNode)}catch(d){Ot(i,t,d)}else try{Yt.removeChild(i.stateNode)}catch(d){Ot(i,t,d)}break;case 18:Yt!==null&&(zn?(e=Yt,hg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Pi(e)):hg(Yt,i.stateNode));break;case 4:o=Yt,c=zn,Yt=i.stateNode.containerInfo,zn=!0,Ka(e,t,i),Yt=o,zn=c;break;case 0:case 11:case 14:case 15:vr(2,i,t),sn||vr(4,i,t),Ka(e,t,i);break;case 1:sn||(Oa(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&py(i,t,o)),Ka(e,t,i);break;case 21:Ka(e,t,i);break;case 22:sn=(o=sn)||i.memoizedState!==null,Ka(e,t,i),sn=o;break;default:Ka(e,t,i)}}function xy(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pi(e)}catch(i){Ot(t,t.return,i)}}}function Ey(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pi(e)}catch(i){Ot(t,t.return,i)}}function ax(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new vy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new vy),t;default:throw Error(s(435,e.tag))}}function kl(e,t){var i=ax(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var c=dx.bind(null,e,o);o.then(c,c)}})}function Ln(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var c=i[o],d=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 27:if(Cr(w.type)){Yt=w.stateNode,zn=!1;break e}break;case 5:Yt=w.stateNode,zn=!1;break e;case 3:case 4:Yt=w.stateNode.containerInfo,zn=!0;break e}w=w.return}if(Yt===null)throw Error(s(160));Sy(d,g,c),Yt=null,zn=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ky(t,e),t=t.sibling}var pa=null;function ky(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ln(t,e),Bn(e),o&4&&(vr(3,e,e.return),Ks(3,e),vr(5,e,e.return));break;case 1:Ln(t,e),Bn(e),o&512&&(sn||i===null||Oa(i,i.return)),o&64&&Xa&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var c=pa;if(Ln(t,e),Bn(e),o&512&&(sn||i===null||Oa(i,i.return)),o&4){var d=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(o){case"title":d=c.getElementsByTagName("title")[0],(!d||d[Ae]||d[Gt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(o),c.head.insertBefore(d,c.querySelector("head > title"))),vn(d,o,i),d[Gt]=e,yt(d),o=d;break e;case"link":var g=kg("link","href",c).get(o+(i.href||""));if(g){for(var w=0;w<g.length;w++)if(d=g[w],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(w,1);break t}}d=c.createElement(o),vn(d,o,i),c.head.appendChild(d);break;case"meta":if(g=kg("meta","content",c).get(o+(i.content||""))){for(w=0;w<g.length;w++)if(d=g[w],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(w,1);break t}}d=c.createElement(o),vn(d,o,i),c.head.appendChild(d);break;default:throw Error(s(468,o))}d[Gt]=e,yt(d),o=d}e.stateNode=o}else Cg(c,e.type,e.stateNode);else e.stateNode=Eg(c,o,e.memoizedProps);else d!==o?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,o===null?Cg(c,e.type,e.stateNode):Eg(c,o,e.memoizedProps)):o===null&&e.stateNode!==null&&mf(e,e.memoizedProps,i.memoizedProps)}break;case 27:Ln(t,e),Bn(e),o&512&&(sn||i===null||Oa(i,i.return)),i!==null&&o&4&&mf(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Ln(t,e),Bn(e),o&512&&(sn||i===null||Oa(i,i.return)),e.flags&32){c=e.stateNode;try{yi(c,"")}catch(Te){Ot(e,e.return,Te)}}o&4&&e.stateNode!=null&&(c=e.memoizedProps,mf(e,c,i!==null?i.memoizedProps:c)),o&1024&&(vf=!0);break;case 6:if(Ln(t,e),Bn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Te){Ot(e,e.return,Te)}}break;case 3:if(Il=null,c=pa,pa=Ul(t.containerInfo),Ln(t,e),pa=c,Bn(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Pi(t.containerInfo)}catch(Te){Ot(e,e.return,Te)}vf&&(vf=!1,Cy(e));break;case 4:o=pa,pa=Ul(e.stateNode.containerInfo),Ln(t,e),Bn(e),pa=o;break;case 12:Ln(t,e),Bn(e);break;case 31:Ln(t,e),Bn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,kl(e,o)));break;case 13:Ln(t,e),Bn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Tl=xe()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,kl(e,o)));break;case 22:c=e.memoizedState!==null;var T=i!==null&&i.memoizedState!==null,z=Xa,W=sn;if(Xa=z||c,sn=W||T,Ln(t,e),sn=W,Xa=z,Bn(e),o&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(i===null||T||Xa||sn||ti(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){T=i=t;try{if(d=T.stateNode,c)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{w=T.stateNode;var ae=T.memoizedProps.style,B=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;w.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(Te){Ot(T,T.return,Te)}}}else if(t.tag===6){if(i===null){T=t;try{T.stateNode.nodeValue=c?"":T.memoizedProps}catch(Te){Ot(T,T.return,Te)}}}else if(t.tag===18){if(i===null){T=t;try{var Y=T.stateNode;c?pg(Y,!0):pg(T.stateNode,!1)}catch(Te){Ot(T,T.return,Te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,kl(e,i))));break;case 19:Ln(t,e),Bn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,kl(e,o)));break;case 30:break;case 21:break;default:Ln(t,e),Bn(e)}}function Bn(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(yy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var c=i.stateNode,d=yf(e);El(e,d,c);break;case 5:var g=i.stateNode;i.flags&32&&(yi(g,""),i.flags&=-33);var w=yf(e);El(e,w,g);break;case 3:case 4:var T=i.stateNode.containerInfo,z=yf(e);gf(e,z,T);break;default:throw Error(s(161))}}catch(W){Ot(e,e.return,W)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Cy(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Qa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)by(e,t.alternate,t),t=t.sibling}function ti(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vr(4,t,t.return),ti(t);break;case 1:Oa(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&py(t,t.return,i),ti(t);break;case 27:so(t.stateNode);case 26:case 5:Oa(t,t.return),ti(t);break;case 22:t.memoizedState===null&&ti(t);break;case 30:ti(t);break;default:ti(t)}e=e.sibling}}function Ja(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,c=e,d=t,g=d.flags;switch(d.tag){case 0:case 11:case 15:Ja(c,d,i),Ks(4,d);break;case 1:if(Ja(c,d,i),o=d,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(z){Ot(o,o.return,z)}if(o=d,c=o.updateQueue,c!==null){var w=o.stateNode;try{var T=c.shared.hiddenCallbacks;if(T!==null)for(c.shared.hiddenCallbacks=null,c=0;c<T.length;c++)nm(T[c],w)}catch(z){Ot(o,o.return,z)}}i&&g&64&&hy(d),Qs(d,d.return);break;case 27:gy(d);case 26:case 5:Ja(c,d,i),i&&o===null&&g&4&&my(d),Qs(d,d.return);break;case 12:Ja(c,d,i);break;case 31:Ja(c,d,i),i&&g&4&&xy(c,d);break;case 13:Ja(c,d,i),i&&g&4&&Ey(c,d);break;case 22:d.memoizedState===null&&Ja(c,d,i),Qs(d,d.return);break;case 30:break;default:Ja(c,d,i)}t=t.sibling}}function bf(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Bs(i))}function wf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bs(e))}function ma(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ty(e,t,i,o),t=t.sibling}function Ty(e,t,i,o){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ma(e,t,i,o),c&2048&&Ks(9,t);break;case 1:ma(e,t,i,o);break;case 3:ma(e,t,i,o),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bs(e)));break;case 12:if(c&2048){ma(e,t,i,o),e=t.stateNode;try{var d=t.memoizedProps,g=d.id,w=d.onPostCommit;typeof w=="function"&&w(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Ot(t,t.return,T)}}else ma(e,t,i,o);break;case 31:ma(e,t,i,o);break;case 13:ma(e,t,i,o);break;case 23:break;case 22:d=t.stateNode,g=t.alternate,t.memoizedState!==null?d._visibility&2?ma(e,t,i,o):Js(e,t):d._visibility&2?ma(e,t,i,o):(d._visibility|=2,Li(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),c&2048&&bf(g,t);break;case 24:ma(e,t,i,o),c&2048&&wf(t.alternate,t);break;default:ma(e,t,i,o)}}function Li(e,t,i,o,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,g=t,w=i,T=o,z=g.flags;switch(g.tag){case 0:case 11:case 15:Li(d,g,w,T,c),Ks(8,g);break;case 23:break;case 22:var W=g.stateNode;g.memoizedState!==null?W._visibility&2?Li(d,g,w,T,c):Js(d,g):(W._visibility|=2,Li(d,g,w,T,c)),c&&z&2048&&bf(g.alternate,g);break;case 24:Li(d,g,w,T,c),c&&z&2048&&wf(g.alternate,g);break;default:Li(d,g,w,T,c)}t=t.sibling}}function Js(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,c=o.flags;switch(o.tag){case 22:Js(i,o),c&2048&&bf(o.alternate,o);break;case 24:Js(i,o),c&2048&&wf(o.alternate,o);break;default:Js(i,o)}t=t.sibling}}var Ws=8192;function Bi(e,t,i){if(e.subtreeFlags&Ws)for(e=e.child;e!==null;)Oy(e,t,i),e=e.sibling}function Oy(e,t,i){switch(e.tag){case 26:Bi(e,t,i),e.flags&Ws&&e.memoizedState!==null&&qx(i,pa,e.memoizedState,e.memoizedProps);break;case 5:Bi(e,t,i);break;case 3:case 4:var o=pa;pa=Ul(e.stateNode.containerInfo),Bi(e,t,i),pa=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ws,Ws=16777216,Bi(e,t,i),Ws=o):Bi(e,t,i));break;default:Bi(e,t,i)}}function Ny(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function eo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];dn=o,Ay(o,e)}Ny(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jy(e),e=e.sibling}function jy(e){switch(e.tag){case 0:case 11:case 15:eo(e),e.flags&2048&&vr(9,e,e.return);break;case 3:eo(e);break;case 12:eo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Cl(e)):eo(e);break;default:eo(e)}}function Cl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];dn=o,Ay(o,e)}Ny(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:vr(8,t,t.return),Cl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Cl(t));break;default:Cl(t)}e=e.sibling}}function Ay(e,t){for(;dn!==null;){var i=dn;switch(i.tag){case 0:case 11:case 15:vr(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Bs(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,dn=o;else e:for(i=e;dn!==null;){o=dn;var c=o.sibling,d=o.return;if(wy(o),o===i){dn=null;break e}if(c!==null){c.return=d,dn=c;break e}dn=d}}}var rx={getCacheForType:function(e){var t=yn(nn),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return yn(nn).controller.signal}},ix=typeof WeakMap=="function"?WeakMap:Map,wt=0,zt=null,it=null,ot=0,Tt=0,Zn=null,br=!1,Ui=!1,Sf=!1,Wa=0,Jt=0,wr=0,ni=0,xf=0,Pn=0,$i=0,to=null,Un=null,Ef=!1,Tl=0,_y=0,Ol=1/0,Nl=null,Sr=null,fn=0,xr=null,Ii=null,er=0,kf=0,Cf=null,Dy=null,no=0,Tf=null;function Fn(){return(wt&2)!==0&&ot!==0?ot&-ot:C.T!==null?Df():da()}function My(){if(Pn===0)if((ot&536870912)===0||ft){var e=H;H<<=1,(H&3932160)===0&&(H=262144),Pn=e}else Pn=536870912;return e=Yn.current,e!==null&&(e.flags|=32),Pn}function $n(e,t,i){(e===zt&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(Hi(e,0),Er(e,ot,Pn,!1)),At(e,i),((wt&2)===0||e!==zt)&&(e===zt&&((wt&2)===0&&(ni|=i),Jt===4&&Er(e,ot,Pn,!1)),Na(e))}function Ry(e,t,i){if((wt&6)!==0)throw Error(s(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Ut(e,t),c=o?lx(e,t):Nf(e,t,!0),d=o;do{if(c===0){Ui&&!o&&Er(e,t,0,!1);break}else{if(i=e.current.alternate,d&&!sx(i)){c=Nf(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var w=e;c=to;var T=w.current.memoizedState.isDehydrated;if(T&&(Hi(w,g).flags|=256),g=Nf(w,g,!1),g!==2){if(Sf&&!T){w.errorRecoveryDisabledLanes|=d,ni|=d,c=4;break e}d=Un,Un=c,d!==null&&(Un===null?Un=d:Un.push.apply(Un,d))}c=g}if(d=!1,c!==2)continue}}if(c===1){Hi(e,0),Er(e,t,0,!0);break}e:{switch(o=e,d=c,d){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Er(o,t,Pn,!br);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(c=Tl+300-xe(),10<c)){if(Er(o,t,Pn,!br),Le(o,0,!0)!==0)break e;er=t,o.timeoutHandle=fg(zy.bind(null,o,i,Un,Nl,Ef,t,Pn,ni,$i,br,d,"Throttled",-0,0),c);break e}zy(o,i,Un,Nl,Ef,t,Pn,ni,$i,br,d,null,-0,0)}}break}while(!0);Na(e)}function zy(e,t,i,o,c,d,g,w,T,z,W,ae,B,Y){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$a},Oy(t,d,ae);var Te=(d&62914560)===d?Tl-xe():(d&4194048)===d?_y-xe():0;if(Te=Yx(ae,Te),Te!==null){er=d,e.cancelPendingCommit=Te(qy.bind(null,e,t,d,i,o,c,g,w,T,W,ae,null,B,Y)),Er(e,d,g,!z);return}}qy(e,t,d,i,o,c,g,w,T)}function sx(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var c=i[o],d=c.getSnapshot;c=c.value;try{if(!Vn(d(),c))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Er(e,t,i,o){t&=~xf,t&=~ni,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var c=t;0<c;){var d=31-mt(c),g=1<<d;o[d]=-1,c&=~g}i!==0&&xs(e,i,t)}function jl(){return(wt&6)===0?(ao(0),!1):!0}function Of(){if(it!==null){if(Tt===0)var e=it.return;else e=it,qa=Pr=null,Vc(e),_i=null,$s=0,e=it;for(;e!==null;)dy(e.alternate,e),e=e.return;it=null}}function Hi(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Tx(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),er=0,Of(),zt=e,it=i=Ha(e.current,null),ot=t,Tt=0,Zn=null,br=!1,Ui=Ut(e,t),Sf=!1,$i=Pn=xf=ni=wr=Jt=0,Un=to=null,Ef=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var c=31-mt(o),d=1<<c;t|=e[c],o&=~d}return Wa=t,Ko(),i}function Ly(e,t){Je=null,C.H=Ps,t===Ai||t===rl?(t=Jp(),Tt=3):t===Ac?(t=Jp(),Tt=4):Tt=t===rf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Zn=t,it===null&&(Jt=1,vl(e,ea(t,e.current)))}function By(){var e=Yn.current;return e===null?!0:(ot&4194048)===ot?ra===null:(ot&62914560)===ot||(ot&536870912)!==0?e===ra:!1}function Uy(){var e=C.H;return C.H=Ps,e===null?Ps:e}function $y(){var e=C.A;return C.A=rx,e}function Al(){Jt=4,br||(ot&4194048)!==ot&&Yn.current!==null||(Ui=!0),(wr&134217727)===0&&(ni&134217727)===0||zt===null||Er(zt,ot,Pn,!1)}function Nf(e,t,i){var o=wt;wt|=2;var c=Uy(),d=$y();(zt!==e||ot!==t)&&(Nl=null,Hi(e,t)),t=!1;var g=Jt;e:do try{if(Tt!==0&&it!==null){var w=it,T=Zn;switch(Tt){case 8:Of(),g=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(t=!0);var z=Tt;if(Tt=0,Zn=null,Vi(e,w,T,z),i&&Ui){g=0;break e}break;default:z=Tt,Tt=0,Zn=null,Vi(e,w,T,z)}}ox(),g=Jt;break}catch(W){Ly(e,W)}while(!0);return t&&e.shellSuspendCounter++,qa=Pr=null,wt=o,C.H=c,C.A=d,it===null&&(zt=null,ot=0,Ko()),g}function ox(){for(;it!==null;)Iy(it)}function lx(e,t){var i=wt;wt|=2;var o=Uy(),c=$y();zt!==e||ot!==t?(Nl=null,Ol=xe()+500,Hi(e,t)):Ui=Ut(e,t);e:do try{if(Tt!==0&&it!==null){t=it;var d=Zn;t:switch(Tt){case 1:Tt=0,Zn=null,Vi(e,t,d,1);break;case 2:case 9:if(Kp(d)){Tt=0,Zn=null,Hy(t);break}t=function(){Tt!==2&&Tt!==9||zt!==e||(Tt=7),Na(e)},d.then(t,t);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:Kp(d)?(Tt=0,Zn=null,Hy(t)):(Tt=0,Zn=null,Vi(e,t,d,7));break;case 5:var g=null;switch(it.tag){case 26:g=it.memoizedState;case 5:case 27:var w=it;if(g?Tg(g):w.stateNode.complete){Tt=0,Zn=null;var T=w.sibling;if(T!==null)it=T;else{var z=w.return;z!==null?(it=z,_l(z)):it=null}break t}}Tt=0,Zn=null,Vi(e,t,d,5);break;case 6:Tt=0,Zn=null,Vi(e,t,d,6);break;case 8:Of(),Jt=6;break e;default:throw Error(s(462))}}ux();break}catch(W){Ly(e,W)}while(!0);return qa=Pr=null,C.H=o,C.A=c,wt=i,it!==null?0:(zt=null,ot=0,Ko(),Jt)}function ux(){for(;it!==null&&!ke();)Iy(it)}function Iy(e){var t=cy(e.alternate,e,Wa);e.memoizedProps=e.pendingProps,t===null?_l(e):it=t}function Hy(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=ry(i,t,t.pendingProps,t.type,void 0,ot);break;case 11:t=ry(i,t,t.pendingProps,t.type.render,t.ref,ot);break;case 5:Vc(t);default:dy(i,t),t=it=$p(t,Wa),t=cy(i,t,Wa)}e.memoizedProps=e.pendingProps,t===null?_l(e):it=t}function Vi(e,t,i,o){qa=Pr=null,Vc(t),_i=null,$s=0;var c=t.return;try{if(QS(e,c,t,i,ot)){Jt=1,vl(e,ea(i,e.current)),it=null;return}}catch(d){if(c!==null)throw it=c,d;Jt=1,vl(e,ea(i,e.current)),it=null;return}t.flags&32768?(ft||o===1?e=!0:Ui||(ot&536870912)!==0?e=!1:(br=e=!0,(o===2||o===9||o===3||o===6)&&(o=Yn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Vy(t,e)):_l(t)}function _l(e){var t=e;do{if((t.flags&32768)!==0){Vy(t,br);return}e=t.return;var i=ex(t.alternate,t,Wa);if(i!==null){it=i;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);Jt===0&&(Jt=5)}function Vy(e,t){do{var i=tx(e.alternate,e);if(i!==null){i.flags&=32767,it=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=i}while(e!==null);Jt=6,it=null}function qy(e,t,i,o,c,d,g,w,T){e.cancelPendingCommit=null;do Dl();while(fn!==0);if((wt&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(d=t.lanes|t.childLanes,d|=mc,Ct(e,i,d,g,w,T),e===zt&&(it=zt=null,ot=0),Ii=t,xr=e,er=i,kf=d,Cf=c,Dy=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,hx(De,function(){return Fy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=C.T,C.T=null,c=L.p,L.p=2,g=wt,wt|=4;try{nx(e,t,i)}finally{wt=g,L.p=c,C.T=o}}fn=1,Yy(),Gy(),Zy()}}function Yy(){if(fn===1){fn=0;var e=xr,t=Ii,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=C.T,C.T=null;var o=L.p;L.p=2;var c=wt;wt|=4;try{ky(t,e);var d=If,g=Ap(e.containerInfo),w=d.focusedElem,T=d.selectionRange;if(g!==w&&w&&w.ownerDocument&&jp(w.ownerDocument.documentElement,w)){if(T!==null&&cc(w)){var z=T.start,W=T.end;if(W===void 0&&(W=z),"selectionStart"in w)w.selectionStart=z,w.selectionEnd=Math.min(W,w.value.length);else{var ae=w.ownerDocument||document,B=ae&&ae.defaultView||window;if(B.getSelection){var Y=B.getSelection(),Te=w.textContent.length,He=Math.min(T.start,Te),Rt=T.end===void 0?He:Math.min(T.end,Te);!Y.extend&&He>Rt&&(g=Rt,Rt=He,He=g);var j=Np(w,He),O=Np(w,Rt);if(j&&O&&(Y.rangeCount!==1||Y.anchorNode!==j.node||Y.anchorOffset!==j.offset||Y.focusNode!==O.node||Y.focusOffset!==O.offset)){var R=ae.createRange();R.setStart(j.node,j.offset),Y.removeAllRanges(),He>Rt?(Y.addRange(R),Y.extend(O.node,O.offset)):(R.setEnd(O.node,O.offset),Y.addRange(R))}}}}for(ae=[],Y=w;Y=Y.parentNode;)Y.nodeType===1&&ae.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ae.length;w++){var te=ae[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Yl=!!$f,If=$f=null}finally{wt=c,L.p=o,C.T=i}}e.current=t,fn=2}}function Gy(){if(fn===2){fn=0;var e=xr,t=Ii,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=C.T,C.T=null;var o=L.p;L.p=2;var c=wt;wt|=4;try{by(e,t.alternate,t)}finally{wt=c,L.p=o,C.T=i}}fn=3}}function Zy(){if(fn===4||fn===3){fn=0,bt();var e=xr,t=Ii,i=er,o=Dy;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?fn=5:(fn=0,Ii=xr=null,Py(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Sr=null),pi(i),t=t.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(jt,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=C.T,c=L.p,L.p=2,C.T=null;try{for(var d=e.onRecoverableError,g=0;g<o.length;g++){var w=o[g];d(w.value,{componentStack:w.stack})}}finally{C.T=t,L.p=c}}(er&3)!==0&&Dl(),Na(e),c=e.pendingLanes,(i&261930)!==0&&(c&42)!==0?e===Tf?no++:(no=0,Tf=e):no=0,ao(0)}}function Py(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Bs(t)))}function Dl(){return Yy(),Gy(),Zy(),Fy()}function Fy(){if(fn!==5)return!1;var e=xr,t=kf;kf=0;var i=pi(er),o=C.T,c=L.p;try{L.p=32>i?32:i,C.T=null,i=Cf,Cf=null;var d=xr,g=er;if(fn=0,Ii=xr=null,er=0,(wt&6)!==0)throw Error(s(331));var w=wt;if(wt|=4,jy(d.current),Ty(d,d.current,g,i),wt=w,ao(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(jt,d)}catch{}return!0}finally{L.p=c,C.T=o,Py(e,t)}}function Xy(e,t,i){t=ea(i,t),t=af(e.stateNode,t,2),e=mr(e,t,2),e!==null&&(At(e,2),Na(e))}function Ot(e,t,i){if(e.tag===3)Xy(e,e,i);else for(;t!==null;){if(t.tag===3){Xy(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Sr===null||!Sr.has(o))){e=ea(i,e),i=Km(2),o=mr(t,i,2),o!==null&&(Qm(i,o,t,e),At(o,2),Na(o));break}}t=t.return}}function jf(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new ix;var c=new Set;o.set(t,c)}else c=o.get(t),c===void 0&&(c=new Set,o.set(t,c));c.has(i)||(Sf=!0,c.add(i),e=cx.bind(null,e,t,i),t.then(e,e))}function cx(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,zt===e&&(ot&i)===i&&(Jt===4||Jt===3&&(ot&62914560)===ot&&300>xe()-Tl?(wt&2)===0&&Hi(e,0):xf|=i,$i===ot&&($i=0)),Na(e)}function Ky(e,t){t===0&&(t=Xe()),e=Yr(e,t),e!==null&&(At(e,t),Na(e))}function fx(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Ky(e,i)}function dx(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(t),Ky(e,i)}function hx(e,t){return ee(e,t)}var Ml=null,qi=null,Af=!1,Rl=!1,_f=!1,kr=0;function Na(e){e!==qi&&e.next===null&&(qi===null?Ml=qi=e:qi=qi.next=e),Rl=!0,Af||(Af=!0,mx())}function ao(e,t){if(!_f&&Rl){_f=!0;do for(var i=!1,o=Ml;o!==null;){if(e!==0){var c=o.pendingLanes;if(c===0)var d=0;else{var g=o.suspendedLanes,w=o.pingedLanes;d=(1<<31-mt(42|e)+1)-1,d&=c&~(g&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,eg(o,d))}else d=ot,d=Le(o,o===zt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Ut(o,d)||(i=!0,eg(o,d));o=o.next}while(i);_f=!1}}function px(){Qy()}function Qy(){Rl=Af=!1;var e=0;kr!==0&&Cx()&&(e=kr);for(var t=xe(),i=null,o=Ml;o!==null;){var c=o.next,d=Jy(o,t);d===0?(o.next=null,i===null?Ml=c:i.next=c,c===null&&(qi=i)):(i=o,(e!==0||(d&3)!==0)&&(Rl=!0)),o=c}fn!==0&&fn!==5||ao(e),kr!==0&&(kr=0)}function Jy(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var g=31-mt(d),w=1<<g,T=c[g];T===-1?((w&i)===0||(w&o)!==0)&&(c[g]=Xt(w,t)):T<=t&&(e.expiredLanes|=w),d&=~w}if(t=zt,i=ot,i=Le(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ve(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ut(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&ve(o),pi(i)){case 2:case 8:i=Bt;break;case 32:i=De;break;case 268435456:i=ht;break;default:i=De}return o=Wy.bind(null,e),i=ee(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&ve(o),e.callbackPriority=2,e.callbackNode=null,2}function Wy(e,t){if(fn!==0&&fn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Dl()&&e.callbackNode!==i)return null;var o=ot;return o=Le(e,e===zt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ry(e,o,t),Jy(e,xe()),e.callbackNode!=null&&e.callbackNode===i?Wy.bind(null,e):null)}function eg(e,t){if(Dl())return null;Ry(e,t,!0)}function mx(){Ox(function(){(wt&6)!==0?ee(Qe,px):Qy()})}function Df(){if(kr===0){var e=Ni;e===0&&(e=D,D<<=1,(D&261888)===0&&(D=256)),kr=e}return kr}function tg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vo(""+e)}function ng(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function yx(e,t,i,o,c){if(t==="submit"&&i&&i.stateNode===c){var d=tg((c[En]||null).action),g=o.submitter;g&&(t=(t=g[En]||null)?tg(t.formAction):g.getAttribute("formAction"),t!==null&&(d=t,g=null));var w=new Zo("action","action",null,o,c);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(kr!==0){var T=g?ng(c,g):new FormData(c);Qc(i,{pending:!0,data:T,method:c.method,action:d},null,T)}}else typeof d=="function"&&(w.preventDefault(),T=g?ng(c,g):new FormData(c),Qc(i,{pending:!0,data:T,method:c.method,action:d},d,T))},currentTarget:c}]})}}for(var Mf=0;Mf<pc.length;Mf++){var Rf=pc[Mf],gx=Rf.toLowerCase(),vx=Rf[0].toUpperCase()+Rf.slice(1);ha(gx,"on"+vx)}ha(Mp,"onAnimationEnd"),ha(Rp,"onAnimationIteration"),ha(zp,"onAnimationStart"),ha("dblclick","onDoubleClick"),ha("focusin","onFocus"),ha("focusout","onBlur"),ha(RS,"onTransitionRun"),ha(zS,"onTransitionStart"),ha(LS,"onTransitionCancel"),ha(Lp,"onTransitionEnd"),or("onMouseEnter",["mouseout","mouseover"]),or("onMouseLeave",["mouseout","mouseover"]),or("onPointerEnter",["pointerout","pointerover"]),or("onPointerLeave",["pointerout","pointerover"]),Ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ro));function ag(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],c=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var g=o.length-1;0<=g;g--){var w=o[g],T=w.instance,z=w.currentTarget;if(w=w.listener,T!==d&&c.isPropagationStopped())break e;d=w,c.currentTarget=z;try{d(c)}catch(W){Xo(W)}c.currentTarget=null,d=T}else for(g=0;g<o.length;g++){if(w=o[g],T=w.instance,z=w.currentTarget,w=w.listener,T!==d&&c.isPropagationStopped())break e;d=w,c.currentTarget=z;try{d(c)}catch(W){Xo(W)}c.currentTarget=null,d=T}}}}function st(e,t){var i=t[Q];i===void 0&&(i=t[Q]=new Set);var o=e+"__bubble";i.has(o)||(rg(t,e,2,!1),i.add(o))}function zf(e,t,i){var o=0;t&&(o|=4),rg(i,e,o,t)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Lf(e){if(!e[zl]){e[zl]=!0,Mn.forEach(function(i){i!=="selectionchange"&&(bx.has(i)||zf(i,!1,e),zf(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zl]||(t[zl]=!0,zf("selectionchange",!1,t))}}function rg(e,t,i,o){switch(Mg(t)){case 2:var c=Px;break;case 8:c=Fx;break;default:c=Qf}i=c.bind(null,t,i,e),c=void 0,!tc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Bf(e,t,i,o,c){var d=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var w=o.stateNode.containerInfo;if(w===c)break;if(g===4)for(g=o.return;g!==null;){var T=g.tag;if((T===3||T===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;w!==null;){if(g=_t(w),g===null)return;if(T=g.tag,T===5||T===6||T===26||T===27){o=d=g;continue e}w=w.parentNode}}o=o.return}up(function(){var z=d,W=Wu(i),ae=[];e:{var B=Bp.get(e);if(B!==void 0){var Y=Zo,Te=e;switch(e){case"keypress":if(Yo(i)===0)break e;case"keydown":case"keyup":Y=dS;break;case"focusin":Te="focus",Y=ic;break;case"focusout":Te="blur",Y=ic;break;case"beforeblur":case"afterblur":Y=ic;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=dp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=eS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=mS;break;case Mp:case Rp:case zp:Y=aS;break;case Lp:Y=gS;break;case"scroll":case"scrollend":Y=Jw;break;case"wheel":Y=bS;break;case"copy":case"cut":case"paste":Y=iS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=pp;break;case"toggle":case"beforetoggle":Y=SS}var He=(t&4)!==0,Rt=!He&&(e==="scroll"||e==="scrollend"),j=He?B!==null?B+"Capture":null:B;He=[];for(var O=z,R;O!==null;){var te=O;if(R=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||R===null||j===null||(te=Ts(O,j),te!=null&&He.push(io(O,te,R))),Rt)break;O=O.return}0<He.length&&(B=new Y(B,Te,null,i,W),ae.push({event:B,listeners:He}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",B&&i!==Ju&&(Te=i.relatedTarget||i.fromElement)&&(_t(Te)||Te[ka]))break e;if((Y||B)&&(B=W.window===W?W:(B=W.ownerDocument)?B.defaultView||B.parentWindow:window,Y?(Te=i.relatedTarget||i.toElement,Y=z,Te=Te?_t(Te):null,Te!==null&&(Rt=u(Te),He=Te.tag,Te!==Rt||He!==5&&He!==27&&He!==6)&&(Te=null)):(Y=null,Te=z),Y!==Te)){if(He=dp,te="onMouseLeave",j="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(He=pp,te="onPointerLeave",j="onPointerEnter",O="pointer"),Rt=Y==null?B:Wt(Y),R=Te==null?B:Wt(Te),B=new He(te,O+"leave",Y,i,W),B.target=Rt,B.relatedTarget=R,te=null,_t(W)===z&&(He=new He(j,O+"enter",Te,i,W),He.target=R,He.relatedTarget=Rt,te=He),Rt=te,Y&&Te)t:{for(He=wx,j=Y,O=Te,R=0,te=j;te;te=He(te))R++;te=0;for(var $e=O;$e;$e=He($e))te++;for(;0<R-te;)j=He(j),R--;for(;0<te-R;)O=He(O),te--;for(;R--;){if(j===O||O!==null&&j===O.alternate){He=j;break t}j=He(j),O=He(O)}He=null}else He=null;Y!==null&&ig(ae,B,Y,He,!1),Te!==null&&Rt!==null&&ig(ae,Rt,Te,He,!0)}}e:{if(B=z?Wt(z):window,Y=B.nodeName&&B.nodeName.toLowerCase(),Y==="select"||Y==="input"&&B.type==="file")var gt=xp;else if(wp(B))if(Ep)gt=_S;else{gt=jS;var Re=NS}else Y=B.nodeName,!Y||Y.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Qu(z.elementType)&&(gt=xp):gt=AS;if(gt&&(gt=gt(e,z))){Sp(ae,gt,i,W);break e}Re&&Re(e,B,z),e==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&Ku(B,"number",B.value)}switch(Re=z?Wt(z):window,e){case"focusin":(wp(Re)||Re.contentEditable==="true")&&(wi=Re,fc=z,Rs=null);break;case"focusout":Rs=fc=wi=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,_p(ae,i,W);break;case"selectionchange":if(MS)break;case"keydown":case"keyup":_p(ae,i,W)}var tt;if(oc)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else bi?vp(e,i)&&(lt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(lt="onCompositionStart");lt&&(mp&&i.locale!=="ko"&&(bi||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&bi&&(tt=cp()):(lr=W,nc="value"in lr?lr.value:lr.textContent,bi=!0)),Re=Ll(z,lt),0<Re.length&&(lt=new hp(lt,e,null,i,W),ae.push({event:lt,listeners:Re}),tt?lt.data=tt:(tt=bp(i),tt!==null&&(lt.data=tt)))),(tt=ES?kS(e,i):CS(e,i))&&(lt=Ll(z,"onBeforeInput"),0<lt.length&&(Re=new hp("onBeforeInput","beforeinput",null,i,W),ae.push({event:Re,listeners:lt}),Re.data=tt)),yx(ae,e,z,i,W)}ag(ae,t)})}function io(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ll(e,t){for(var i=t+"Capture",o=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Ts(e,i),c!=null&&o.unshift(io(e,c,d)),c=Ts(e,t),c!=null&&o.push(io(e,c,d))),e.tag===3)return o;e=e.return}return[]}function wx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ig(e,t,i,o,c){for(var d=t._reactName,g=[];i!==null&&i!==o;){var w=i,T=w.alternate,z=w.stateNode;if(w=w.tag,T!==null&&T===o)break;w!==5&&w!==26&&w!==27||z===null||(T=z,c?(z=Ts(i,d),z!=null&&g.unshift(io(i,z,T))):c||(z=Ts(i,d),z!=null&&g.push(io(i,z,T)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var Sx=/\r\n?/g,xx=/\u0000|\uFFFD/g;function sg(e){return(typeof e=="string"?e:""+e).replace(Sx,`
`).replace(xx,"")}function og(e,t){return t=sg(t),sg(e)===t}function Mt(e,t,i,o,c,d){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||yi(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&yi(e,""+o);break;case"className":Io(e,"class",o);break;case"tabIndex":Io(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Io(e,i,o);break;case"style":op(e,o,d);break;case"data":if(t!=="object"){Io(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Vo(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(t!=="input"&&Mt(e,t,"name",c.name,c,null),Mt(e,t,"formEncType",c.formEncType,c,null),Mt(e,t,"formMethod",c.formMethod,c,null),Mt(e,t,"formTarget",c.formTarget,c,null)):(Mt(e,t,"encType",c.encType,c,null),Mt(e,t,"method",c.method,c,null),Mt(e,t,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Vo(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=$a);break;case"onScroll":o!=null&&st("scroll",e);break;case"onScrollEnd":o!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Vo(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":st("beforetoggle",e),st("toggle",e),$o(e,"popover",o);break;case"xlinkActuate":Ua(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ua(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ua(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ua(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ua(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ua(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ua(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ua(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ua(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":$o(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Kw.get(i)||i,$o(e,i,o))}}function Uf(e,t,i,o,c,d){switch(i){case"style":op(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?yi(e,o):(typeof o=="number"||typeof o=="bigint")&&yi(e,""+o);break;case"onScroll":o!=null&&st("scroll",e);break;case"onScrollEnd":o!=null&&st("scrollend",e);break;case"onClick":o!=null&&(e.onclick=$a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!La.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),t=i.slice(2,c?i.length-7:void 0),d=e[En]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof o=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,c);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):$o(e,i,o)}}}function vn(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var o=!1,c=!1,d;for(d in i)if(i.hasOwnProperty(d)){var g=i[d];if(g!=null)switch(d){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Mt(e,t,d,g,i,null)}}c&&Mt(e,t,"srcSet",i.srcSet,i,null),o&&Mt(e,t,"src",i.src,i,null);return;case"input":st("invalid",e);var w=d=g=c=null,T=null,z=null;for(o in i)if(i.hasOwnProperty(o)){var W=i[o];if(W!=null)switch(o){case"name":c=W;break;case"type":g=W;break;case"checked":T=W;break;case"defaultChecked":z=W;break;case"value":d=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,t));break;default:Mt(e,t,o,W,i,null)}}ap(e,d,w,T,z,g,c,!1);return;case"select":st("invalid",e),o=g=d=null;for(c in i)if(i.hasOwnProperty(c)&&(w=i[c],w!=null))switch(c){case"value":d=w;break;case"defaultValue":g=w;break;case"multiple":o=w;default:Mt(e,t,c,w,i,null)}t=d,i=g,e.multiple=!!o,t!=null?mi(e,!!o,t,!1):i!=null&&mi(e,!!o,i,!0);return;case"textarea":st("invalid",e),d=c=o=null;for(g in i)if(i.hasOwnProperty(g)&&(w=i[g],w!=null))switch(g){case"value":o=w;break;case"defaultValue":c=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Mt(e,t,g,w,i,null)}ip(e,o,c,d);return;case"option":for(T in i)if(i.hasOwnProperty(T)&&(o=i[T],o!=null))switch(T){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Mt(e,t,T,o,i,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(o=0;o<ro.length;o++)st(ro[o],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in i)if(i.hasOwnProperty(z)&&(o=i[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Mt(e,t,z,o,i,null)}return;default:if(Qu(t)){for(W in i)i.hasOwnProperty(W)&&(o=i[W],o!==void 0&&Uf(e,t,W,o,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(o=i[w],o!=null&&Mt(e,t,w,o,i,null))}function Ex(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,g=null,w=null,T=null,z=null,W=null;for(Y in i){var ae=i[Y];if(i.hasOwnProperty(Y)&&ae!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":T=ae;default:o.hasOwnProperty(Y)||Mt(e,t,Y,null,o,ae)}}for(var B in o){var Y=o[B];if(ae=i[B],o.hasOwnProperty(B)&&(Y!=null||ae!=null))switch(B){case"type":d=Y;break;case"name":c=Y;break;case"checked":z=Y;break;case"defaultChecked":W=Y;break;case"value":g=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,t));break;default:Y!==ae&&Mt(e,t,B,Y,o,ae)}}Xu(e,g,w,T,z,W,d,c);return;case"select":Y=g=w=B=null;for(d in i)if(T=i[d],i.hasOwnProperty(d)&&T!=null)switch(d){case"value":break;case"multiple":Y=T;default:o.hasOwnProperty(d)||Mt(e,t,d,null,o,T)}for(c in o)if(d=o[c],T=i[c],o.hasOwnProperty(c)&&(d!=null||T!=null))switch(c){case"value":B=d;break;case"defaultValue":w=d;break;case"multiple":g=d;default:d!==T&&Mt(e,t,c,d,o,T)}t=w,i=g,o=Y,B!=null?mi(e,!!i,B,!1):!!o!=!!i&&(t!=null?mi(e,!!i,t,!0):mi(e,!!i,i?[]:"",!1));return;case"textarea":Y=B=null;for(w in i)if(c=i[w],i.hasOwnProperty(w)&&c!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Mt(e,t,w,null,o,c)}for(g in o)if(c=o[g],d=i[g],o.hasOwnProperty(g)&&(c!=null||d!=null))switch(g){case"value":B=c;break;case"defaultValue":Y=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==d&&Mt(e,t,g,c,o,d)}rp(e,B,Y);return;case"option":for(var Te in i)if(B=i[Te],i.hasOwnProperty(Te)&&B!=null&&!o.hasOwnProperty(Te))switch(Te){case"selected":e.selected=!1;break;default:Mt(e,t,Te,null,o,B)}for(T in o)if(B=o[T],Y=i[T],o.hasOwnProperty(T)&&B!==Y&&(B!=null||Y!=null))switch(T){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Mt(e,t,T,B,o,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in i)B=i[He],i.hasOwnProperty(He)&&B!=null&&!o.hasOwnProperty(He)&&Mt(e,t,He,null,o,B);for(z in o)if(B=o[z],Y=i[z],o.hasOwnProperty(z)&&B!==Y&&(B!=null||Y!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,t));break;default:Mt(e,t,z,B,o,Y)}return;default:if(Qu(t)){for(var Rt in i)B=i[Rt],i.hasOwnProperty(Rt)&&B!==void 0&&!o.hasOwnProperty(Rt)&&Uf(e,t,Rt,void 0,o,B);for(W in o)B=o[W],Y=i[W],!o.hasOwnProperty(W)||B===Y||B===void 0&&Y===void 0||Uf(e,t,W,B,o,Y);return}}for(var j in i)B=i[j],i.hasOwnProperty(j)&&B!=null&&!o.hasOwnProperty(j)&&Mt(e,t,j,null,o,B);for(ae in o)B=o[ae],Y=i[ae],!o.hasOwnProperty(ae)||B===Y||B==null&&Y==null||Mt(e,t,ae,B,o,Y)}function lg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var c=i[o],d=c.transferSize,g=c.initiatorType,w=c.duration;if(d&&w&&lg(g)){for(g=0,w=c.responseEnd,o+=1;o<i.length;o++){var T=i[o],z=T.startTime;if(z>w)break;var W=T.transferSize,ae=T.initiatorType;W&&lg(ae)&&(T=T.responseEnd,g+=W*(T<w?1:(w-z)/(T-z)))}if(--o,t+=8*(d+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $f=null,If=null;function Bl(e){return e.nodeType===9?e:e.ownerDocument}function ug(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Hf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vf=null;function Cx(){var e=window.event;return e&&e.type==="popstate"?e===Vf?!1:(Vf=e,!0):(Vf=null,!1)}var fg=typeof setTimeout=="function"?setTimeout:void 0,Tx=typeof clearTimeout=="function"?clearTimeout:void 0,dg=typeof Promise=="function"?Promise:void 0,Ox=typeof queueMicrotask=="function"?queueMicrotask:typeof dg<"u"?function(e){return dg.resolve(null).then(e).catch(Nx)}:fg;function Nx(e){setTimeout(function(){throw e})}function Cr(e){return e==="head"}function hg(e,t){var i=t,o=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(c),Pi(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")so(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,so(i);for(var d=i.firstChild;d;){var g=d.nextSibling,w=d.nodeName;d[Ae]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&d.rel.toLowerCase()==="stylesheet"||i.removeChild(d),d=g}}else i==="body"&&so(e.ownerDocument.body);i=c}while(i);Pi(t)}function pg(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function qf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":qf(i),et(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function jx(e,t,i,o){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ae])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ia(e.nextSibling),e===null)break}return null}function Ax(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ia(e.nextSibling),e===null))return null;return e}function mg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ia(e.nextSibling),e===null))return null;return e}function Yf(e){return e.data==="$?"||e.data==="$~"}function Gf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _x(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ia(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Zf=null;function yg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return ia(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function gg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function vg(e,t,i){switch(t=Bl(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function so(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);et(e)}var sa=new Map,bg=new Set;function Ul(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var tr=L.d;L.d={f:Dx,r:Mx,D:Rx,C:zx,L:Lx,m:Bx,X:$x,S:Ux,M:Ix};function Dx(){var e=tr.f(),t=jl();return e||t}function Mx(e){var t=Vt(e);t!==null&&t.tag===5&&t.type==="form"?Lm(t):tr.r(e)}var Yi=typeof document>"u"?null:document;function wg(e,t,i){var o=Yi;if(o&&typeof t=="string"&&t){var c=Jn(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),bg.has(c)||(bg.add(c),e={rel:e,crossOrigin:i,href:t},o.querySelector(c)===null&&(t=o.createElement("link"),vn(t,"link",e),yt(t),o.head.appendChild(t)))}}function Rx(e){tr.D(e),wg("dns-prefetch",e,null)}function zx(e,t){tr.C(e,t),wg("preconnect",e,t)}function Lx(e,t,i){tr.L(e,t,i);var o=Yi;if(o&&e&&t){var c='link[rel="preload"][as="'+Jn(t)+'"]';t==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+Jn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+Jn(i.imageSizes)+'"]')):c+='[href="'+Jn(e)+'"]';var d=c;switch(t){case"style":d=Gi(e);break;case"script":d=Zi(e)}sa.has(d)||(e=v({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),sa.set(d,e),o.querySelector(c)!==null||t==="style"&&o.querySelector(oo(d))||t==="script"&&o.querySelector(lo(d))||(t=o.createElement("link"),vn(t,"link",e),yt(t),o.head.appendChild(t)))}}function Bx(e,t){tr.m(e,t);var i=Yi;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Jn(o)+'"][href="'+Jn(e)+'"]',d=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Zi(e)}if(!sa.has(d)&&(e=v({rel:"modulepreload",href:e},t),sa.set(d,e),i.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(lo(d)))return}o=i.createElement("link"),vn(o,"link",e),yt(o),i.head.appendChild(o)}}}function Ux(e,t,i){tr.S(e,t,i);var o=Yi;if(o&&e){var c=qt(o).hoistableStyles,d=Gi(e);t=t||"default";var g=c.get(d);if(!g){var w={loading:0,preload:null};if(g=o.querySelector(oo(d)))w.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},i),(i=sa.get(d))&&Pf(e,i);var T=g=o.createElement("link");yt(T),vn(T,"link",e),T._p=new Promise(function(z,W){T.onload=z,T.onerror=W}),T.addEventListener("load",function(){w.loading|=1}),T.addEventListener("error",function(){w.loading|=2}),w.loading|=4,$l(g,t,o)}g={type:"stylesheet",instance:g,count:1,state:w},c.set(d,g)}}}function $x(e,t){tr.X(e,t);var i=Yi;if(i&&e){var o=qt(i).hoistableScripts,c=Zi(e),d=o.get(c);d||(d=i.querySelector(lo(c)),d||(e=v({src:e,async:!0},t),(t=sa.get(c))&&Ff(e,t),d=i.createElement("script"),yt(d),vn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(c,d))}}function Ix(e,t){tr.M(e,t);var i=Yi;if(i&&e){var o=qt(i).hoistableScripts,c=Zi(e),d=o.get(c);d||(d=i.querySelector(lo(c)),d||(e=v({src:e,async:!0,type:"module"},t),(t=sa.get(c))&&Ff(e,t),d=i.createElement("script"),yt(d),vn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(c,d))}}function Sg(e,t,i,o){var c=(c=je.current)?Ul(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Gi(i.href),i=qt(c).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Gi(i.href);var d=qt(c).hoistableStyles,g=d.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,g),(d=c.querySelector(oo(e)))&&!d._p&&(g.instance=d,g.state.loading=5),sa.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},sa.set(e,i),d||Hx(c,e,i,g.state))),t&&o===null)throw Error(s(528,""));return g}if(t&&o!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Zi(i),i=qt(c).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Gi(e){return'href="'+Jn(e)+'"'}function oo(e){return'link[rel="stylesheet"]['+e+"]"}function xg(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Hx(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),vn(t,"link",i),yt(t),e.head.appendChild(t))}function Zi(e){return'[src="'+Jn(e)+'"]'}function lo(e){return"script[async]"+e}function Eg(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Jn(i.href)+'"]');if(o)return t.instance=o,yt(o),o;var c=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),yt(o),vn(o,"style",c),$l(o,i.precedence,e),t.instance=o;case"stylesheet":c=Gi(i.href);var d=e.querySelector(oo(c));if(d)return t.state.loading|=4,t.instance=d,yt(d),d;o=xg(i),(c=sa.get(c))&&Pf(o,c),d=(e.ownerDocument||e).createElement("link"),yt(d);var g=d;return g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),vn(d,"link",o),t.state.loading|=4,$l(d,i.precedence,e),t.instance=d;case"script":return d=Zi(i.src),(c=e.querySelector(lo(d)))?(t.instance=c,yt(c),c):(o=i,(c=sa.get(d))&&(o=v({},i),Ff(o,c)),e=e.ownerDocument||e,c=e.createElement("script"),yt(c),vn(c,"link",o),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,$l(o,i.precedence,e));return t.instance}function $l(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,d=c,g=0;g<o.length;g++){var w=o[g];if(w.dataset.precedence===t)d=w;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Pf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ff(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Il=null;function kg(e,t,i){if(Il===null){var o=new Map,c=Il=new Map;c.set(i,o)}else c=Il,o=c.get(i),o||(o=new Map,c.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var d=i[c];if(!(d[Ae]||d[Gt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var g=d.getAttribute(t)||"";g=e+g;var w=o.get(g);w?w.push(d):o.set(g,[d])}}return o}function Cg(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Vx(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Tg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function qx(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=Gi(o.href),d=t.querySelector(oo(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Hl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=d,yt(d);return}d=t.ownerDocument||t,o=xg(o),(c=sa.get(c))&&Pf(o,c),d=d.createElement("link"),yt(d);var g=d;g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),vn(d,"link",o),i.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Hl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Xf=0;function Yx(e,t){return e.stylesheets&&e.count===0&&ql(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&ql(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&Xf===0&&(Xf=62500*kx());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ql(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Xf?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(c)}}:null}function Hl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ql(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Vl=null;function ql(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Vl=new Map,t.forEach(Gx,e),Vl=null,Hl.call(e))}function Gx(e,t){if(!(t.state.loading&4)){var i=Vl.get(e);if(i)var o=i.get(null);else{i=new Map,Vl.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var g=c[d];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),o=g)}o&&i.set(null,o)}c=t.instance,g=c.getAttribute("data-precedence"),d=i.get(g)||o,d===o&&i.set(null,c),i.set(g,c),this.count++,o=Hl.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var uo={$$typeof:q,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function Zx(e,t,i,o,c,d,g,w,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Og(e,t,i,o,c,d,g,w,T,z,W,ae){return e=new Zx(e,t,i,g,T,z,W,ae,w),t=1,d===!0&&(t|=24),d=qn(3,null,null,t),e.current=d,d.stateNode=e,t=Oc(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:o,isDehydrated:i,cache:t},_c(d),e}function Ng(e){return e?(e=Ei,e):Ei}function jg(e,t,i,o,c,d){c=Ng(c),o.context===null?o.context=c:o.pendingContext=c,o=pr(t),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=mr(e,o,t),i!==null&&($n(i,e,t),Hs(i,e,t))}function Ag(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Kf(e,t){Ag(e,t),(e=e.alternate)&&Ag(e,t)}function _g(e){if(e.tag===13||e.tag===31){var t=Yr(e,67108864);t!==null&&$n(t,e,67108864),Kf(e,67108864)}}function Dg(e){if(e.tag===13||e.tag===31){var t=Fn();t=ks(t);var i=Yr(e,t);i!==null&&$n(i,e,t),Kf(e,t)}}var Yl=!0;function Px(e,t,i,o){var c=C.T;C.T=null;var d=L.p;try{L.p=2,Qf(e,t,i,o)}finally{L.p=d,C.T=c}}function Fx(e,t,i,o){var c=C.T;C.T=null;var d=L.p;try{L.p=8,Qf(e,t,i,o)}finally{L.p=d,C.T=c}}function Qf(e,t,i,o){if(Yl){var c=Jf(o);if(c===null)Bf(e,t,o,Gl,i),Rg(e,o);else if(Kx(c,e,t,i,o))o.stopPropagation();else if(Rg(e,o),t&4&&-1<Xx.indexOf(e)){for(;c!==null;){var d=Vt(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=de(d.pendingLanes);if(g!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;g;){var T=1<<31-mt(g);w.entanglements[1]|=T,g&=~T}Na(d),(wt&6)===0&&(Ol=xe()+500,ao(0))}}break;case 31:case 13:w=Yr(d,2),w!==null&&$n(w,d,2),jl(),Kf(d,2)}if(d=Jf(o),d===null&&Bf(e,t,o,Gl,i),d===c)break;c=d}c!==null&&o.stopPropagation()}else Bf(e,t,o,null,i)}}function Jf(e){return e=Wu(e),Wf(e)}var Gl=null;function Wf(e){if(Gl=null,e=_t(e),e!==null){var t=u(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=f(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Gl=e,null}function Mg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case Qe:return 2;case Bt:return 8;case De:case rt:return 32;case ht:return 268435456;default:return 32}default:return 32}}var ed=!1,Tr=null,Or=null,Nr=null,co=new Map,fo=new Map,jr=[],Xx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rg(e,t){switch(e){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":co.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(t.pointerId)}}function ho(e,t,i,o,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Vt(t),t!==null&&_g(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Kx(e,t,i,o,c){switch(t){case"focusin":return Tr=ho(Tr,e,t,i,o,c),!0;case"dragenter":return Or=ho(Or,e,t,i,o,c),!0;case"mouseover":return Nr=ho(Nr,e,t,i,o,c),!0;case"pointerover":var d=c.pointerId;return co.set(d,ho(co.get(d)||null,e,t,i,o,c)),!0;case"gotpointercapture":return d=c.pointerId,fo.set(d,ho(fo.get(d)||null,e,t,i,o,c)),!0}return!1}function zg(e){var t=_t(e.target);if(t!==null){var i=u(t);if(i!==null){if(t=i.tag,t===13){if(t=f(i),t!==null){e.blockedOn=t,sr(e.priority,function(){Dg(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,sr(e.priority,function(){Dg(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Jf(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Ju=o,i.target.dispatchEvent(o),Ju=null}else return t=Vt(i),t!==null&&_g(t),e.blockedOn=i,!1;t.shift()}return!0}function Lg(e,t,i){Zl(e)&&i.delete(t)}function Qx(){ed=!1,Tr!==null&&Zl(Tr)&&(Tr=null),Or!==null&&Zl(Or)&&(Or=null),Nr!==null&&Zl(Nr)&&(Nr=null),co.forEach(Lg),fo.forEach(Lg)}function Pl(e,t){e.blockedOn===t&&(e.blockedOn=null,ed||(ed=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Qx)))}var Fl=null;function Bg(e){Fl!==e&&(Fl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Fl===e&&(Fl=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],c=e[t+2];if(typeof o!="function"){if(Wf(o||i)===null)continue;break}var d=Vt(i);d!==null&&(e.splice(t,3),t-=3,Qc(d,{pending:!0,data:c,method:i.method,action:o},o,c))}}))}function Pi(e){function t(T){return Pl(T,e)}Tr!==null&&Pl(Tr,e),Or!==null&&Pl(Or,e),Nr!==null&&Pl(Nr,e),co.forEach(t),fo.forEach(t);for(var i=0;i<jr.length;i++){var o=jr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<jr.length&&(i=jr[0],i.blockedOn===null);)zg(i),i.blockedOn===null&&jr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],g=c[En]||null;if(typeof d=="function")g||Bg(i);else if(g){var w=null;if(d&&d.hasAttribute("formAction")){if(c=d,g=d[En]||null)w=g.formAction;else if(Wf(c)!==null)continue}else w=g.action;typeof w=="function"?i[o+1]=w:(i.splice(o,3),o-=3),Bg(i)}}}function Ug(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function td(e){this._internalRoot=e}Xl.prototype.render=td.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,o=Fn();jg(i,o,e,t,null,null)},Xl.prototype.unmount=td.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jg(e.current,2,null,e,null,null),jl(),t[ka]=null}};function Xl(e){this._internalRoot=e}Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=da();e={blockedOn:null,target:e,priority:t};for(var i=0;i<jr.length&&t!==0&&t<jr[i].priority;i++);jr.splice(i,0,e),i===0&&zg(e)}};var $g=n.version;if($g!=="19.2.0")throw Error(s(527,$g,"19.2.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Jx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{jt=Kl.inject(Jx),Ye=Kl}catch{}}return mo.createRoot=function(e,t){if(!l(e))throw Error(s(299));var i=!1,o="",c=Zm,d=Pm,g=Fm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Og(e,1,!1,null,null,i,o,null,c,d,g,Ug),e[ka]=t.current,Lf(e),new td(t)},mo.hydrateRoot=function(e,t,i){if(!l(e))throw Error(s(299));var o=!1,c="",d=Zm,g=Pm,w=Fm,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(T=i.formState)),t=Og(e,1,!0,t,i??null,o,c,T,d,g,w,Ug),t.context=Ng(null),i=t.current,o=Fn(),o=ks(o),c=pr(o),c.callback=null,mr(i,c,o),i=o,t.current.lanes=i,At(t,i),Na(t),e[ka]=t.current,Lf(e),new Xl(t)},mo.version="19.2.0",mo}var Xg;function lE(){if(Xg)return rd.exports;Xg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),rd.exports=oE(),rd.exports}var sb=lE();const uE="modulepreload",cE=function(a,n){return new URL(a,n).href},Kg={},Qg=function(n,r,s){let l=Promise.resolve();if(r&&r.length>0){let y=function(b){return Promise.all(b.map(v=>Promise.resolve(v).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const f=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=y(r.map(b=>{if(b=cE(b,s),b in Kg)return;Kg[b]=!0;const v=b.endsWith(".css"),S=v?'[rel="stylesheet"]':"";if(s)for(let N=f.length-1;N>=0;N--){const G=f[N];if(G.href===b&&(!v||G.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${S}`))return;const k=document.createElement("link");if(k.rel=v?"stylesheet":uE,v||(k.as="script"),k.crossOrigin="",k.href=b,p&&k.setAttribute("nonce",p),document.head.appendChild(k),v)return new Promise((N,G)=>{k.addEventListener("load",N),k.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${b}`)))})}))}function u(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return l.then(f=>{for(const h of f||[])h.status==="rejected"&&u(h.reason);return n().catch(u)})};var Lr=ib();const kh=xh(Lr),Jg=rb({__proto__:null,default:kh},[Lr]);function Wg(a,n,r,s,l,u,f){try{var h=a[u](f),p=h.value}catch(y){return void r(y)}h.done?n(p):Promise.resolve(p).then(s,l)}function at(a){return function(){var n=this,r=arguments;return new Promise(function(s,l){var u=a.apply(n,r);function f(p){Wg(u,s,l,f,h,"next",p)}function h(p){Wg(u,s,l,f,h,"throw",p)}f(void 0)})}}function ut(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function bn(a){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bn(a)}function fE(a,n){if(bn(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,n);if(bn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function ob(a){var n=fE(a,"string");return bn(n)=="symbol"?n:n+""}function dE(a,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,ob(s.key),s)}}function ct(a,n,r){return n&&dE(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function hE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function za(a,n){if(n&&(bn(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hE(a)}function Lt(a){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lt(a)}function No(a,n){return No=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},No(a,n)}function Hn(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&No(a,n)}function ze(a,n,r){return(n=ob(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}var ld={exports:{}},ud={exports:{}},ev;function lb(){return ev||(ev=1,(function(a){function n(r,s){this.v=r,this.k=s}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(ud)),ud.exports}var cd={exports:{}},fd={exports:{}},tv;function ub(){return tv||(tv=1,(function(a){function n(r,s,l,u){var f=Object.defineProperty;try{f({},"",{})}catch{f=0}a.exports=n=function(p,y,b,v){function S(k,N){n(p,k,function(G){return this._invoke(k,N,G)})}y?f?f(p,y,{value:b,enumerable:!v,configurable:!v,writable:!v}):p[y]=b:(S("next",0),S("throw",1),S("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,n(r,s,l,u)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(fd)),fd.exports}var nv;function cb(){return nv||(nv=1,(function(a){var n=ub();function r(){var s,l,u=typeof Symbol=="function"?Symbol:{},f=u.iterator||"@@iterator",h=u.toStringTag||"@@toStringTag";function p(U,P,K,q){var Z=P&&P.prototype instanceof b?P:b,ce=Object.create(Z.prototype);return n(ce,"_invoke",(function(oe,$,re){var ie,F,ue,_e=0,Me=re||[],qe=!1,Ve={p:0,n:0,v:s,a:C,f:C.bind(s,4),d:function(se,ge){return ie=se,F=0,ue=s,Ve.n=ge,y}};function C(L,se){for(F=L,ue=se,l=0;!qe&&_e&&!ge&&l<Me.length;l++){var ge,be=Me[l],x=Ve.p,M=be[2];L>3?(ge=M===se)&&(ue=be[(F=be[4])?5:(F=3,3)],be[4]=be[5]=s):be[0]<=x&&((ge=L<2&&x<be[1])?(F=0,Ve.v=se,Ve.n=be[1]):x<M&&(ge=L<3||be[0]>se||se>M)&&(be[4]=L,be[5]=se,Ve.n=M,F=0))}if(ge||L>1)return y;throw qe=!0,se}return function(L,se,ge){if(_e>1)throw TypeError("Generator is already running");for(qe&&se===1&&C(se,ge),F=se,ue=ge;(l=F<2?s:ue)||!qe;){ie||(F?F<3?(F>1&&(Ve.n=-1),C(F,ue)):Ve.n=ue:Ve.v=ue);try{if(_e=2,ie){if(F||(L="next"),l=ie[L]){if(!(l=l.call(ie,ue)))throw TypeError("iterator result is not an object");if(!l.done)return l;ue=l.value,F<2&&(F=0)}else F===1&&(l=ie.return)&&l.call(ie),F<2&&(ue=TypeError("The iterator does not provide a '"+L+"' method"),F=1);ie=s}else if((l=(qe=Ve.n<0)?ue:oe.call($,Ve))!==y)break}catch(be){ie=s,F=1,ue=be}finally{_e=1}}return{value:l,done:qe}}})(U,K,q),!0),ce}var y={};function b(){}function v(){}function S(){}l=Object.getPrototypeOf;var k=[][f]?l(l([][f]())):(n(l={},f,function(){return this}),l),N=S.prototype=b.prototype=Object.create(k);function G(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,S):(U.__proto__=S,n(U,h,"GeneratorFunction")),U.prototype=Object.create(N),U}return v.prototype=S,n(N,"constructor",S),n(S,"constructor",v),v.displayName="GeneratorFunction",n(S,h,"GeneratorFunction"),n(N),n(N,h,"Generator"),n(N,f,function(){return this}),n(N,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:p,m:G}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(cd)),cd.exports}var dd={exports:{}},hd={exports:{}},pd={exports:{}},av;function fb(){return av||(av=1,(function(a){var n=lb(),r=ub();function s(l,u){function f(p,y,b,v){try{var S=l[p](y),k=S.value;return k instanceof n?u.resolve(k.v).then(function(N){f("next",N,b,v)},function(N){f("throw",N,b,v)}):u.resolve(k).then(function(N){S.value=N,b(S)},function(N){return f("throw",N,b,v)})}catch(N){v(N)}}var h;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(p,y,b){function v(){return new u(function(S,k){f(p,b,S,k)})}return h=h?h.then(v,v):v()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(pd)),pd.exports}var rv;function db(){return rv||(rv=1,(function(a){var n=cb(),r=fb();function s(l,u,f,h,p){return new r(n().w(l,u,f,h),p||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(hd)),hd.exports}var iv;function pE(){return iv||(iv=1,(function(a){var n=db();function r(s,l,u,f,h){var p=n(s,l,u,f,h);return p.next().then(function(y){return y.done?y.value:p.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(dd)),dd.exports}var md={exports:{}},sv;function mE(){return sv||(sv=1,(function(a){function n(r){var s=Object(r),l=[];for(var u in s)l.unshift(u);return function f(){for(;l.length;)if((u=l.pop())in s)return f.value=u,f.done=!1,f;return f.done=!0,f}}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(md)),md.exports}var yd={exports:{}},gd={exports:{}},ov;function yE(){return ov||(ov=1,(function(a){function n(r){"@babel/helpers - typeof";return a.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,n(r)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(gd)),gd.exports}var lv;function gE(){return lv||(lv=1,(function(a){var n=yE().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],u=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&u>=s.length&&(s=void 0),{value:s&&s[u++],done:!s}}}}throw new TypeError(n(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(yd)),yd.exports}var uv;function vE(){return uv||(uv=1,(function(a){var n=lb(),r=cb(),s=pE(),l=db(),u=fb(),f=mE(),h=gE();function p(){var y=r(),b=y.m(p),v=(Object.getPrototypeOf?Object.getPrototypeOf(b):b.__proto__).constructor;function S(G){var U=typeof G=="function"&&G.constructor;return!!U&&(U===v||(U.displayName||U.name)==="GeneratorFunction")}var k={throw:1,return:2,break:3,continue:3};function N(G){var U,P;return function(K){U||(U={stop:function(){return P(K.a,2)},catch:function(){return K.v},abrupt:function(Z,ce){return P(K.a,k[Z],ce)},delegateYield:function(Z,ce,oe){return U.resultName=ce,P(K.d,h(Z),oe)},finish:function(Z){return P(K.f,Z)}},P=function(Z,ce,oe){K.p=U.prev,K.n=U.next;try{return Z(ce,oe)}finally{U.next=K.n}}),U.resultName&&(U[U.resultName]=K.v,U.resultName=void 0),U.sent=K.v,U.next=K.n;try{return G.call(this,U)}finally{K.p=U.prev,K.n=U.next}}}return(a.exports=p=function(){return{wrap:function(P,K,q,Z){return y.w(N(P),K,q,Z&&Z.reverse())},isGeneratorFunction:S,mark:y.m,awrap:function(P,K){return new n(P,K)},AsyncIterator:u,async:function(P,K,q,Z,ce){return(S(K)?l:s)(N(P),K,q,Z,ce)},keys:f,values:h}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=p,a.exports.__esModule=!0,a.exports.default=a.exports})(ld)),ld.exports}var vd,cv;function bE(){if(cv)return vd;cv=1;var a=vE()();vd=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return vd}var wE=bE();const we=xh(wE);function SE(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=xE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,u=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw u}}}}function xE(a,n){if(a){if(typeof a=="string")return fv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fv(a,n):void 0}}function fv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function EE(){return{debug:function(n){}}}var hb=(function(){function a(){ut(this,a),ze(this,"pipes",[])}return ct(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var n=at(we.mark(function s(l){var u,f,h,p;return we.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:u=l,f=SE(this.pipes),b.prev=2,f.s();case 4:if((h=f.n()).done){b.next=13;break}return p=h.value,b.next=8,p(u);case 8:if(u=b.sent,!(typeof u>"u")){b.next=11;break}return b.abrupt("return");case 11:b.next=4;break;case 13:b.next=18;break;case 15:b.prev=15,b.t0=b.catch(2),f.e(b.t0);case 18:return b.prev=18,f.f(),b.finish(18);case 21:return b.abrupt("return",u);case 22:case"end":return b.stop()}},s,this,[[2,15,18,21]])}));function r(s){return n.apply(this,arguments)}return r})()}])})(),hs=(function(){function a(n){ut(this,a),ze(this,"signal",new hb),this.name=n}return ct(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),EE()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function dv(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=kE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,u=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw u}}}}function kE(a,n){if(a){if(typeof a=="string")return hv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hv(a,n):void 0}}function hv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function CE(a,n,r){return n=Lt(n),za(a,pb()?Reflect.construct(n,r||[],Lt(a).constructor):n.apply(a,r))}function pb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pb=function(){return!!a})()}var $r=(function(a){function n(){var r;return ut(this,n),r=CE(this,n,["NodeEditor"]),ze(r,"nodes",[]),ze(r,"connections",[]),r}return Hn(n,a),ct(n,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=at(we.mark(function l(u){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getNode(u.id)){h.next=2;break}throw new Error("node has already been added");case 2:return h.next=4,this.emit({type:"nodecreate",data:u});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.nodes.push(u),h.next=9,this.emit({type:"nodecreated",data:u});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=at(we.mark(function l(u){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getConnection(u.id)){h.next=2;break}throw new Error("connection has already been added");case 2:return h.next=4,this.emit({type:"connectioncreate",data:u});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.connections.push(u),h.next=9,this.emit({type:"connectioncreated",data:u});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=at(we.mark(function l(u){var f,h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(f=this.nodes.find(function(b){return b.id===u}),f){y.next=3;break}throw new Error("cannot find node");case 3:return y.next=5,this.emit({type:"noderemove",data:f});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.nodes.indexOf(f),this.nodes.splice(h,1),y.next=11,this.emit({type:"noderemoved",data:f});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=at(we.mark(function l(u){var f,h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(f=this.connections.find(function(b){return b.id===u}),f){y.next=3;break}throw new Error("cannot find connection");case 3:return y.next=5,this.emit({type:"connectionremove",data:f});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.connections.indexOf(f),this.connections.splice(h,1),y.next=11,this.emit({type:"connectionremoved",data:f});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=at(we.mark(function l(){var u,f,h,p,y,b;return we.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.emit({type:"clear"});case 2:if(S.sent){S.next=6;break}return S.next=5,this.emit({type:"clearcancelled"});case 5:return S.abrupt("return",!1);case 6:u=dv(this.connections.slice()),S.prev=7,u.s();case 9:if((f=u.n()).done){S.next=15;break}return h=f.value,S.next=13,this.removeConnection(h.id);case 13:S.next=9;break;case 15:S.next=20;break;case 17:S.prev=17,S.t0=S.catch(7),u.e(S.t0);case 20:return S.prev=20,u.f(),S.finish(20);case 23:p=dv(this.nodes.slice()),S.prev=24,p.s();case 26:if((y=p.n()).done){S.next=32;break}return b=y.value,S.next=30,this.removeNode(b.id);case 30:S.next=26;break;case 32:S.next=37;break;case 34:S.prev=34,S.t1=S.catch(24),p.e(S.t1);case 37:return S.prev=37,p.f(),S.finish(37);case 40:return S.next=42,this.emit({type:"cleared"});case 42:return S.abrupt("return",!0);case 43:case"end":return S.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(hs),bd=globalThis.crypto;function Ir(){if("randomBytes"in bd)return bd.randomBytes(8).toString("hex");var a=bd.getRandomValues(new Uint8Array(8)),n=Array.from(a),r=n.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Ch(a,n,r){return n=Lt(n),za(a,mb()?Reflect.construct(n,r||[],Lt(a).constructor):n.apply(a,r))}function mb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mb=function(){return!!a})()}var TE=ct(function a(n){ut(this,a),this.name=n}),Th=ct(function a(n,r,s){ut(this,a),this.socket=n,this.label=r,this.multipleConnections=s,this.id=Ir()}),OE=(function(a){function n(r,s,l){var u;return ut(this,n),u=Ch(this,n,[r,s,l]),ze(u,"control",null),ze(u,"showControl",!0),u.socket=r,u.label=s,u.multipleConnections=l,u}return Hn(n,a),ct(n,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(Th),NE=(function(a){function n(r,s,l){return ut(this,n),Ch(this,n,[r,s,l!==!1])}return Hn(n,a),ct(n)})(Th),yb=ct(function a(){ut(this,a),this.id=Ir()}),jE=(function(a){function n(r,s){var l,u;return ut(this,n),u=Ch(this,n),u.type=r,u.options=s,u.id=Ir(),u.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(u.value=s.initial),u}return Hn(n,a),ct(n,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(yb),AE=(function(){function a(n){ut(this,a),ze(this,"inputs",{}),ze(this,"outputs",{}),ze(this,"controls",{}),this.label=n,this.id=Ir()}return ct(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),_E=ct(function a(n,r,s,l){if(ut(this,a),this.sourceOutput=r,this.targetInput=l,!n.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=Ir(),this.source=n.id,this.target=s.id}),Nt=Object.freeze({__proto__:null,Socket:TE,Port:Th,Input:OE,Output:NE,Control:yb,InputControl:jE,Node:AE,Connection:_E});const DE=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Nt,NodeEditor:$r,Scope:hs,Signal:hb,getUID:Ir},Symbol.toStringTag,{value:"Module"}));function Hd(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function ME(a){if(Array.isArray(a))return Hd(a)}function RE(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function gb(a,n){if(a){if(typeof a=="string")return Hd(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hd(a,n):void 0}}function zE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ps(a){return ME(a)||RE(a)||gb(a)||zE()}var LE=(function(){function a(n){ut(this,a),this.reordered=n,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ct(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,u=s.top,f=r.clientX-l,h=r.clientY-u;return{x:f,y:h}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var n=at(we.mark(function s(l,u){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.holder.contains(l)){h.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(u!==null&&!this.holder.contains(u))){h.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,u),h.next=7,this.reordered(l);case 7:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function vb(a,n){var r=function(f){n.move(f)},s=function(f){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),n.up(f)},l=function(f){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),n.down(f)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var pv=function(n){return n.length===0?0:Math.min.apply(Math,ps(n))},mv=function(n){return n.length===0?0:Math.max.apply(Math,ps(n))};function bb(a){var n=pv(a.map(function(u){return u.position.x})),r=pv(a.map(function(u){return u.position.y})),s=mv(a.map(function(u){return u.position.x+u.width})),l=mv(a.map(function(u){return u.position.y+u.height}));return{left:n,right:s,top:r,bottom:l,width:Math.abs(n-s),height:Math.abs(r-l),center:{x:(n+s)/2,y:(r+l)/2}}}function yv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function BE(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?yv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):yv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Oh=(function(){function a(n){var r=this;ut(this,a),ze(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=BE({},r.config.getCurrentPosition()),r.events.start(s))}),ze(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},u=r.config.getZoom(),f=r.startPosition.x+l.x/u,h=r.startPosition.y+l.y/u;r.events.translate(f,h,s)}}),ze(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=n||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return ct(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=vb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),wb=(function(){function a(n){var r=this;ut(this,a),ze(this,"previous",null),ze(this,"pointers",[]),ze(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),u=l.left,f=l.top,h=s.deltaY<0,p=h?r.intensity:-r.intensity,y=(u-s.clientX)*p,b=(f-s.clientY)*p;r.onzoom(p,y,b,"wheel")}),ze(this,"down",function(s){r.pointers.push(s)}),ze(this,"move",function(s){if(r.pointers=r.pointers.map(function(N){return N.pointerId===s.pointerId?s:N}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),u=l.left,f=l.top,h=r.getTouches(),p=h.cx,y=h.cy,b=h.distance;if(r.previous!==null&&r.previous.distance>0){var v=b/r.previous.distance-1,S=(u-p)*v,k=(f-y)*v;r.onzoom(v,S-(r.previous.cx-p),k-(r.previous.cy-y),"touch")}r.previous={cx:p,cy:y,distance:b}}}),ze(this,"contextmenu",function(){r.pointers=[]}),ze(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),ze(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),u=l.left,f=l.top,h=4*r.intensity,p=(u-s.clientX)*h,y=(f-s.clientY)*h;r.onzoom(h,p,y,"dblclick")}),this.intensity=n}return ct(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],u=s[1],f=[r.touches[1].clientX,r.touches[1].clientY],h=f[0],p=f[1],y=Math.sqrt(Math.pow(l-h,2)+Math.pow(u-p,2));return{cx:(l+h)/2,cy:(u+p)/2,distance:y}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),Sb=(function(){function a(n,r,s){var l=this;ut(this,a),ze(this,"transform",{k:1,x:0,y:0}),ze(this,"pointer",{x:0,y:0}),ze(this,"zoomHandler",null),ze(this,"dragHandler",null),ze(this,"pointerdown",function(u){l.setPointerFrom(u),l.events.pointerDown(l.pointer,u)}),ze(this,"pointermove",function(u){l.setPointerFrom(u),l.events.pointerMove(l.pointer,u)}),ze(this,"pointerup",function(u){l.setPointerFrom(u),l.events.pointerUp(l.pointer,u)}),ze(this,"resize",function(u){l.events.resize(u)}),ze(this,"onTranslate",function(u,f){var h;(h=l.zoomHandler)!==null&&h!==void 0&&h.isTranslating()||l.translate(u,f)}),ze(this,"onZoom",function(u,f,h,p){l.zoom(l.transform.k*(1+u),f,h,p),l.update()}),this.container=n,this.events=r,this.guards=s,this.content=new LE(function(u){return l.events.reordered(u)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new wb(.1)),this.setDragHandler(new Oh),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),n.appendChild(this.content.holder),this.update()}return ct(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,u=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(u,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,u=s.y,f=this.transform.k;this.pointer={x:l/f,y:u/f}}},{key:"translate",value:(function(){var n=at(we.mark(function s(l,u){var f,h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f={x:l,y:u},y.next=3,this.guards.translate({previous:this.transform,position:f});case 3:if(h=y.sent,h){y.next=6;break}return y.abrupt("return",!1);case 6:return this.transform.x=h.data.position.x,this.transform.y=h.data.position.y,this.update(),y.next=11,this.events.translated(h.data);case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var n=at(we.mark(function s(l){var u,f,h,p,y,b,v=arguments;return we.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return u=v.length>1&&v[1]!==void 0?v[1]:0,f=v.length>2&&v[2]!==void 0?v[2]:0,h=v.length>3?v[3]:void 0,p=this.transform.k,k.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:h});case 6:if(y=k.sent,y){k.next=9;break}return k.abrupt("return",!0);case 9:return b=(p-y.data.zoom)/(p-l||1),this.transform.k=y.data.zoom||1,this.transform.x+=u*b,this.transform.y+=f*b,this.update(),k.next=16,this.events.zoomed(y.data);case 16:return k.abrupt("return",!1);case 17:case"end":return k.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function UE(a,n,r){return n=Lt(n),za(a,xb()?Reflect.construct(n,r||[],Lt(a).constructor):n.apply(a,r))}function xb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xb=function(){return!!a})()}var Do=(function(a){function n(){return ut(this,n),UE(this,n,arguments)}return Hn(n,a),ct(n)})(hs),$E=ct(function a(n){ut(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return n.contextmenu(r)})}),IE=(function(){function a(){ut(this,a),ze(this,"views",new WeakMap),ze(this,"viewsElements",new Map)}return ct(a,[{key:"set",value:function(r){var s=r.element,l=r.type,u=r.payload;u!=null&&u.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(u.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function gv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function vv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?gv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):gv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Eb=(function(){function a(n,r,s){var l=this;ut(this,a),ze(this,"translate",(function(){var u=at(we.mark(function f(h,p){var y,b;return we.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return y=vv({},l.position),S.next=3,l.guards.translate({previous:y,position:{x:h,y:p}});case 3:if(b=S.sent,b){S.next=6;break}return S.abrupt("return",!1);case 6:return l.position=vv({},b.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),S.next=10,l.events.translated({position:l.position,previous:y});case 10:return S.abrupt("return",!0);case 11:case"end":return S.stop()}},f)}));return function(f,h){return u.apply(this,arguments)}})()),ze(this,"resize",(function(){var u=at(we.mark(function f(h,p){var y,b;return we.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return y={width:h,height:p},S.next=3,l.guards.resize({size:y});case 3:if(S.sent){S.next=5;break}return S.abrupt("return",!1);case 5:if(b=l.element.querySelector("*:not(span):not([fragment])"),!(!b||!(b instanceof HTMLElement))){S.next=8;break}return S.abrupt("return",!1);case 8:return b.style.width="".concat(h,"px"),b.style.height="".concat(p,"px"),S.next=12,l.events.resized({size:y});case 12:return S.abrupt("return",!0);case 13:case"end":return S.stop()}},f)}));return function(f,h){return u.apply(this,arguments)}})()),this.getZoom=n,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(u){return l.events.contextmenu(u)}),this.dragHandler=new Oh,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ct(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function kb(a,n){return a.map(function(r){return{view:n.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,u=l.width,f=l.height;return typeof u<"u"&&typeof f<"u"?{position:s.position,width:u,height:f}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function HE(a,n){var r=a.parentScope($r),s=n.map(function(u){return bn(u)==="object"?u:r.getNode(u)}),l=kb(s,a.nodeViews);return bb(l)}function VE(a){var n=a;n.addPipe(function(r){if(!r||bn(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=n.nodeViews.get(r.data.id),l=n.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var u=n.connectionViews.get(r.data.id),f=n.area.content;u&&f.reorder(u.element,f.holder.firstChild)}return r})}function bv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function nr(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?bv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):bv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function qE(a,n){var r=n!=null&&n.scaling?n.scaling===!0?{min:.1,max:1}:n.scaling:!1,s=n!=null&&n.translation?n.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:n.translation:!1;function l(f){if(!r)throw new Error("scaling param isnt defined");var h=typeof r=="function"?r():r,p=h.min,y=h.max;return f<p?p:f>y?y:f}function u(f){if(!s)throw new Error("translation param isnt defined");var h=nr({},f),p=typeof s=="function"?s():s,y=p.left,b=p.top,v=p.right,S=p.bottom;return h.x<y&&(h.x=y),h.x>v&&(h.x=v),h.y<b&&(h.y=b),h.y>S&&(h.y=S),h}a.addPipe(function(f){if(!f||bn(f)!=="object"||!("type"in f))return f;if(r&&f.type==="zoom")return nr(nr({},f),{},{data:nr(nr({},f.data),{},{zoom:l(f.data.zoom)})});if(s&&f.type==="zoomed"){var h=u(a.area.transform);a.area.translate(h.x,h.y)}return s&&f.type==="translate"?nr(nr({},f),{},{data:nr(nr({},f.data),{},{position:u(f.data.position)})}):f})}function YE(){var a=!1;function n(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",n),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}}var Cb=(function(){function a(){ut(this,a),ze(this,"entities",new Map),ze(this,"pickId",null)}return ct(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var n=at(we.mark(function s(l,u){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(u){h.next=3;break}return h.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var n=at(we.mark(function s(l){var u,f;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(u="".concat(l.label,"_").concat(l.id),f=this.entities.get(u),!f){p.next=6;break}return this.entities.delete(u),p.next=6,f.unselect();case 6:case"end":return p.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var n=at(we.mark(function s(){var l=this;return we.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Promise.all(ps(Array.from(this.entities.values())).map(function(h){return l.remove(h)}));case 2:case"end":return f.stop()}},s,this)}));function r(){return n.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var n=at(we.mark(function s(l,u){var f=this;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Promise.all(Array.from(this.entities.values()).map(function(y){return!f.isPicked(y)&&y.translate(l,u)}));case 2:case"end":return p.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function GE(){return new Cb}function ZE(a,n,r){var s=null,l=a,u=function(){return s||(s=l.parentScope($r))},f=0;function h(k){k.selected||(k.selected=!0,l.update("node",k.id))}function p(k){k.selected&&(k.selected=!1,l.update("node",k.id))}function y(k,N){return b.apply(this,arguments)}function b(){return b=at(we.mark(function k(N,G){var U;return we.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(U=u().getNode(N),U){K.next=3;break}return K.abrupt("return");case 3:return K.next=5,n.add({label:"node",id:U.id,translate:function(Z,ce){return at(we.mark(function oe(){var $,re;return we.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if($=l.nodeViews.get(U.id),re=$?.position,!re){F.next=5;break}return F.next=5,$.translate(re.x+Z,re.y+ce);case 5:case"end":return F.stop()}},oe)}))()},unselect:function(){p(U)}},G);case 5:h(U);case 6:case"end":return K.stop()}},k)})),b.apply(this,arguments)}function v(k){return S.apply(this,arguments)}function S(){return S=at(we.mark(function k(N){return we.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,n.remove({id:N,label:"node"});case 2:case"end":return U.stop()}},k)})),S.apply(this,arguments)}return l.addPipe((function(){var k=at(we.mark(function N(G){var U,P,K,q,Z,ce,oe,$;return we.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!(!G||bn(G)!=="object"||!("type"in G))){ie.next=2;break}return ie.abrupt("return",G);case 2:if(G.type!=="nodepicked"){ie.next=11;break}return U=G.data.id,P=r.accumulating.active(),n.pick({id:U,label:"node"}),f=null,ie.next=9,y(U,P);case 9:ie.next=33;break;case 11:if(G.type!=="nodetranslated"){ie.next=20;break}if(K=G.data,q=K.id,Z=K.position,ce=K.previous,oe=Z.x-ce.x,$=Z.y-ce.y,!n.isPicked({id:q,label:"node"})){ie.next=18;break}return ie.next=18,n.translate(oe,$);case 18:ie.next=33;break;case 20:if(G.type!=="pointerdown"){ie.next=24;break}f=0,ie.next=33;break;case 24:if(G.type!=="pointermove"){ie.next=28;break}f!==null&&f++,ie.next=33;break;case 28:if(G.type!=="pointerup"){ie.next=33;break}if(!(f!==null&&f<4)){ie.next=32;break}return ie.next=32,n.unselectAll();case 32:f=null;case 33:return ie.abrupt("return",G);case 34:case"end":return ie.stop()}},N)}));return function(N){return k.apply(this,arguments)}})()),{select:y,unselect:v}}function PE(a,n){var r=null,s=function(){return r||(r=a.parentScope($r))};function l(u,f){var h=s().getNode(u);if(h){var p=h.inputs[f];if(!p)throw new Error("cannot find input");var y=p.showControl,b=s().getConnections(),v=!!b.find(function(S){return S.target===u&&S.targetInput===f});p.showControl=n?n({hasAnyConnection:v,input:p}):!v,p.showControl!==y&&a.update("node",h.id)}}a.addPipe(function(u){return(u.type==="connectioncreated"||u.type==="connectionremoved")&&l(u.data.target,u.data.targetInput),u})}function wv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Ql(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?wv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function FE(a,n){var r=a,s=typeof n?.size>"u"?16:n.size,l=typeof n?.dynamic>"u"?!0:n.dynamic;function u(f){return Math.round(f/s)*s}r.addPipe(function(f){if(!f||bn(f)!=="object"||!("type"in f))return f;if(l&&f.type==="nodetranslate"){var h=f.data.position,p=u(h.x),y=u(h.y);return Ql(Ql({},f),{},{data:Ql(Ql({},f.data),{},{position:{x:p,y}})})}if(!l&&f.type==="nodedragged"){var b=r.nodeViews.get(f.data.id);if(b){var v=b.position,S=v.x,k=v.y;b.translate(u(S),u(k))}}return f})}function XE(a,n,r){return Vd.apply(this,arguments)}function Vd(){return Vd=at(we.mark(function a(n,r,s){var l,u,f,h,p,y,b,v,S,k,N,G,U;return we.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return l=s||{},u=l.scale,f=u===void 0?.9:u,h=n.parentScope($r),p=r.map(function(q){return bn(q)==="object"?q:h.getNode(q)}),y=kb(p,n.nodeViews),b=bb(y),v=[n.container.clientWidth,n.container.clientHeight],S=v[0],k=v[1],N=S/b.width,G=k/b.height,U=Math.min(G*f,N*f,1),n.area.transform.x=S/2-b.center.x*U,n.area.transform.y=k/2-b.center.y*U,K.next=12,n.area.zoom(U,0,0);case 12:case"end":return K.stop()}},a)})),Vd.apply(this,arguments)}var Dr=Object.freeze({__proto__:null,getBoundingBox:HE,simpleNodesOrder:VE,restrictor:qE,accumulateOnCtrl:YE,selectableNodes:ZE,Selector:Cb,selector:GE,showInputControl:PE,snapGrid:FE,zoomAt:XE});function Sv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function xv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Sv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function KE(a,n,r){return n=Lt(n),za(a,Tb()?Reflect.construct(n,r||[],Lt(a).constructor):n.apply(a,r))}function Tb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tb=function(){return!!a})()}var Ob=(function(a){function n(r){var s;return ut(this,n),s=KE(this,n,["area"]),ze(s,"nodeViews",new Map),ze(s,"connectionViews",new Map),ze(s,"elements",new IE),ze(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!(bn(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new Sb(r,{zoomed:function(u){return s.emit({type:"zoomed",data:u})},pointerDown:function(u,f){return void s.emit({type:"pointerdown",data:{position:u,event:f}})},pointerMove:function(u,f){return void s.emit({type:"pointermove",data:{position:u,event:f}})},pointerUp:function(u,f){return void s.emit({type:"pointerup",data:{position:u,event:f}})},resize:function(u){return void s.emit({type:"resized",data:{event:u}})},translated:function(u){return s.emit({type:"translated",data:u})},reordered:function(u){return s.emit({type:"reordered",data:{element:u}})}},{translate:function(u){return s.emit({type:"translate",data:u})},zoom:function(u){return s.emit({type:"zoom",data:u})}}),s}return Hn(n,a),ct(n,[{key:"addNodeView",value:function(s){var l=this,u=s.id,f=new Eb(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:u}})},translated:function(p){return l.emit({type:"nodetranslated",data:xv({id:u},p)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(p){return void l.emit({type:"contextmenu",data:{event:p,context:s}})},resized:function(p){var y=p.size;return l.emit({type:"noderesized",data:{id:s.id,size:y}})}},{translate:function(p){return l.emit({type:"nodetranslate",data:xv({id:u},p)})},resize:function(p){var y=p.size;return l.emit({type:"noderesize",data:{id:s.id,size:y}})}});return this.nodeViews.set(u,f),this.area.content.add(f.element),this.emit({type:"render",data:{element:f.element,type:"node",payload:s}}),f}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,u=new $E({contextmenu:function(h){return void l.emit({type:"contextmenu",data:{event:h,context:s}})}});return this.connectionViews.set(s.id,u),this.area.content.add(u.element),this.emit({type:"render",data:{element:u.element,type:"connection",payload:s}}),u}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=at(we.mark(function l(u,f){var h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(h=this.elements.get(u,f),!h){y.next=4;break}return y.next=4,this.emit({type:"render",data:h});case 4:case"end":return y.stop()}},l,this)}));function s(l,u){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=at(we.mark(function l(u,f,h){var p;return we.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(p=this.nodeViews.get(u),!p){b.next=5;break}return b.next=4,p.resize(f,h);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},l,this)}));function s(l,u,f){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=at(we.mark(function l(u,f){var h,p,y;return we.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(h=f.x,p=f.y,y=this.nodeViews.get(u),!y){v.next=6;break}return v.next=5,y.translate(h,p);case 5:return v.abrupt("return",v.sent);case 6:case"end":return v.stop()}},l,this)}));function s(l,u){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(Do);const Ev=Object.freeze(Object.defineProperty({__proto__:null,Area:Sb,AreaExtensions:Dr,AreaPlugin:Ob,BaseAreaPlugin:Do,Drag:Oh,NodeView:Eb,Zoom:wb,usePointerListener:vb},Symbol.toStringTag,{value:"Module"}));function QE(a,n){for(;!{}.hasOwnProperty.call(a,n)&&(a=Lt(a))!==null;);return a}function jo(){return jo=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,n,r){var s=QE(a,n);if(s){var l=Object.getOwnPropertyDescriptor(s,n);return l.get?l.get.call(arguments.length<3?a:r):l.value}},jo.apply(null,arguments)}function JE(a){if(Array.isArray(a))return a}function WE(a,n){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,u,f,h=[],p=!0,y=!1;try{if(u=(r=r.call(a)).next,n!==0)for(;!(p=(s=u.call(r)).done)&&(h.push(s.value),h.length!==n);p=!0);}catch(b){y=!0,l=b}finally{try{if(!p&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(y)throw l}}return h}}function e2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dn(a,n){return JE(a)||WE(a,n)||gb(a,n)||e2()}function kv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function wd(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?kv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):kv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function t2(a){var n=null,r=null;function s(u){r&&u.removeConnectionView(r),n=null,r=null}function l(u){s(u),r="pseudo_".concat(Ir())}return{isMounted:function(){return!!r},mount:l,render:function(f,h,p){var y=h.x,b=h.y,v=p.side==="output",S={x:y+(v?-3:3),y:b};if(!r)throw new Error("pseudo connection id wasn't generated");var k=v?wd({id:r,source:p.nodeId,sourceOutput:p.key,target:"",targetInput:""},a??{}):wd({id:r,target:p.nodeId,targetInput:p.key,source:"",sourceOutput:""},a??{});if(!n){var N=f.addConnectionView(k);n=N.element}n&&f.emit({type:"render",data:wd({element:n,type:"connection",payload:k},v?{end:S}:{start:S})})},unmount:s}}function n2(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=a2(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,u=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw u}}}}function a2(a,n){if(a){if(typeof a=="string")return Cv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cv(a,n):void 0}}function Cv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function r2(a,n){var r=n2(n),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,u=a.get(l);if(u)return u}}catch(f){r.e(f)}finally{r.f()}}function Nb(a,n){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,n),u=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return u&&u!==s&&l.unshift.apply(l,ps(Nb(a,n,u))),l}var Nh=(function(){function a(){ut(this,a)}return ct(a,[{key:"setContext",value:function(r){this.context=r}}])})();function jb(a,n){var r=a.side==="output"&&n.side==="input",s=a.side==="input"&&n.side==="output",l=r?[a,n]:s?[n,a]:[],u=Dn(l,2),f=u[0],h=u[1];if(f&&h)return[f,h]}function i2(a,n){return!!jb(a,n)}function s2(a,n,r){var s=jb(a,n)||[null,null],l=Dn(s,2),u=l[0],f=l[1];if(u&&f)return r.editor.addConnection({id:Ir(),source:u.nodeId,sourceOutput:u.key,target:f.nodeId,targetInput:f.key}),!0}function o2(a,n){var r=n.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function l2(a,n){var r=a.nodeId,s=a.side,l=a.key;return n.getConnections().filter(function(u){if(s==="input")return u.target===r&&u.targetInput===l;if(s==="output")return u.source===r&&u.sourceOutput===l})}function qd(a,n){var r=a.map(function(s){var l=o2(s,n),u=l?.multipleConnections;return u?[]:l2(s,n)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(u){var f=u.id;return f})));l.forEach(function(u){return void n.removeConnection(u)})}}}function jh(a,n,r){return n=Lt(n),za(a,Ab()?Reflect.construct(n,[],Lt(a).constructor):n.apply(a,r))}function Ab(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ab=function(){return!!a})()}var u2=(function(a){function n(r,s){var l;return ut(this,n),l=jh(this,n),l.initial=r,l.params=s,l}return Hn(n,a),ct(n,[{key:"pick",value:(function(){var r=at(we.mark(function l(u,f){var h,p;return we.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:h=u.socket,this.params.canMakeConnection(this.initial,h)&&(qd([this.initial,h],f.editor).commit(),p=this.params.makeConnection(this.initial,h,f),this.drop(f,p?h:null,p));case 2:case"end":return b.stop()}},l,this)}));function s(l,u){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:u}}),this.context.switchTo(new Ah(this.params))}}])})(Nh),c2=(function(a){function n(r,s,l){var u;ut(this,n),u=jh(this,n),u.connection=r,u.params=s;var f=Array.from(l.socketsCache.values()).find(function(h){return h.nodeId===u.connection.source&&h.side==="output"&&h.key===u.connection.sourceOutput});if(!f)throw new Error("cannot find output socket");return u.outputSocket=f,u}return Hn(n,a),ct(n,[{key:"init",value:(function(){var r=at(we.mark(function l(u){var f=this;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:u.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(y){y?(u.editor.removeConnection(f.connection.id),f.initial=f.outputSocket):f.drop(u)});case 1:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=at(we.mark(function l(u,f){var h,p,y,b,v,S;return we.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:h=u.socket,p=u.event,this.initial&&!(h.side==="input"&&this.connection.target===h.nodeId&&this.connection.targetInput===h.key)?this.params.canMakeConnection(this.initial,h)&&(qd([this.initial,h],f.editor).commit(),y=this.params.makeConnection(this.initial,h,f),b=y?h:null,this.drop(f,b,y)):p==="down"&&this.initial&&(qd([this.initial,h],f.editor).commit(),v=this.params.makeConnection(this.initial,h,f),S=v?null:h,this.drop(f,S,v));case 2:case"end":return N.stop()}},l,this)}));function s(l,u){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:u}}),this.context.switchTo(new Ah(this.params))}}])})(Nh),Ah=(function(a){function n(r){var s;return ut(this,n),s=jh(this,n),s.params=r,s}return Hn(n,a),ct(n,[{key:"pick",value:(function(){var r=at(we.mark(function l(u,f){var h,p,y,b;return we.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(h=u.socket,p=u.event,p==="down"){S.next=3;break}return S.abrupt("return");case 3:if(h.side!=="input"){S.next=11;break}if(y=f.editor.getConnections().find(function(k){return k.target===h.nodeId&&k.targetInput===h.key}),!y){S.next=11;break}return b=new c2(y,this.params,f),S.next=9,b.init(f);case 9:return this.context.switchTo(b),S.abrupt("return");case 11:return S.next=13,f.scope.emit({type:"connectionpick",data:{socket:h}});case 13:if(!S.sent){S.next=17;break}this.context.switchTo(new u2(h,this.params)),S.next=18;break;case 17:this.drop(f);case 18:case"end":return S.stop()}},l,this)}));function s(l,u){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:u}}),delete this.initial}}])})(Nh),f2=(function(){function a(n){ut(this,a);var r=n?.canMakeConnection||i2,s=n?.makeConnection||s2;this.switchTo(new Ah({canMakeConnection:r,makeConnection:s}))}return ct(a,[{key:"pick",value:(function(){var n=at(we.mark(function s(l,u){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.currentState.pick(l,u);case 2:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function d2(){return function(){return new f2}}var h2=Object.freeze({__proto__:null,setup:d2}),p2=Object.freeze({__proto__:null,classic:h2});function m2(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=y2(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,u=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw u}}}}function y2(a,n){if(a){if(typeof a=="string")return Tv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tv(a,n):void 0}}function Tv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function g2(a,n,r){return n=Lt(n),za(a,_b()?Reflect.construct(n,r||[],Lt(a).constructor):n.apply(a,r))}function _b(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_b=function(){return!!a})()}function v2(a,n,r,s){var l=jo(Lt(a.prototype),n,r);return typeof l=="function"?function(u){return l.apply(r,u)}:l}var b2=(function(a){function n(){var r;return ut(this,n),r=g2(this,n,["connection"]),ze(r,"presets",[]),ze(r,"currentFlow",null),ze(r,"preudoconnection",t2({isPseudo:!0})),ze(r,"socketsCache",new Map),r}return Hn(n,a),ct(n,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=m2(this.presets),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,h=f(s);if(h)return h}}catch(p){l.e(p)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=at(we.mark(function l(u,f){var h,p,y;return we.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(h={editor:this.editor,scope:this,socketsCache:this.socketsCache},p=Nb(u.clientX,u.clientY),y=r2(this.socketsCache,p),!y){v.next=13;break}if(u.preventDefault(),u.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(y),!this.currentFlow){v.next=11;break}return v.next=10,this.currentFlow.pick({socket:y,event:f},h);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:v.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(h);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return v.stop()}},l,this)}));function s(l,u){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;v2(n,"setParent",this)([s]),this.areaPlugin=this.parentScope(Do),this.editor=this.areaPlugin.parentScope($r);var u=function(h){l.pick(h,"down")};this.addPipe(function(f){if(!f||bn(f)!=="object"||!("type"in f))return f;if(f.type==="pointermove")l.update();else if(f.type==="pointerup")l.pick(f.data.event,"up");else if(f.type==="render"){if(f.data.type==="socket"){var h=f.data.element;h.addEventListener("pointerdown",u),l.socketsCache.set(h,f.data)}}else if(f.type==="unmount"){var p=f.data.element;p.removeEventListener("pointerdown",u),l.socketsCache.delete(p)}return f})}}])})(hs);function w2(a,n){var r=Dn(a,2),s=r[0],l=s.x,u=s.y,f=r[1],h=f.x,p=f.y,y=Math.abs(u-p),b=l+Math.max(y/2,Math.abs(h-l))*n,v=h-Math.max(y/2,Math.abs(h-l))*n;return"M ".concat(l," ").concat(u," C ").concat(b," ").concat(u," ").concat(v," ").concat(p," ").concat(h," ").concat(p)}function S2(a,n,r){var s=Dn(a,2),l=s[0],u=l.x,f=l.y,h=s[1],p=h.x,y=h.y,b=y>f?1:-1,v=r+Math.abs(u-p)/(r/2),S=(u+p)/2,k=f-b*v,N=(y-f)*n;return`
        M `.concat(u," ").concat(f,`
        C `).concat(u+v," ").concat(f,`
        `).concat(u+v," ").concat(k-N,`
        `).concat(S," ").concat(k,`
        C `).concat(p-v," ").concat(k+N,`
        `).concat(p-v," ").concat(y,`
        `).concat(p," ").concat(y,`
    `)}function x2(a,n){return Yd.apply(this,arguments)}function Yd(){return Yd=at(we.mark(function a(n,r){var s,l,u,f,h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(n.offsetParent){y.next=5;break}return y.next=3,new Promise(function(b){return setTimeout(b,0)});case 3:y.next=0;break;case 5:if(s=n.offsetLeft,l=n.offsetTop,u=n.offsetParent,u){y.next=10;break}throw new Error("child has null offsetParent");case 10:for(;u!==null&&u!==r;)s+=u.offsetLeft+u.clientLeft,l+=u.offsetTop+u.clientTop,u=u.offsetParent;return f=n.offsetWidth,h=n.offsetHeight,y.abrupt("return",{x:s+f/2,y:l+h/2});case 14:case"end":return y.stop()}},a)})),Yd.apply(this,arguments)}var E2=(function(){function a(){ut(this,a),ze(this,"listeners",new Set)}return ct(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),k2=(function(){function a(){ut(this,a),ze(this,"elements",new Map)}return ct(a,[{key:"getPosition",value:function(r){var s,l,u=Array.from(this.elements.values()).flat(),f=u.filter(function(h){return h.side===r.side&&h.nodeId===r.nodeId&&h.key===r.key});return f.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=f.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(ps(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),C2=(function(){function a(){ut(this,a),ze(this,"sockets",new k2),ze(this,"emitter",new E2),ze(this,"area",null)}return ct(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(Do),this.area.addPipe((function(){var l=at(we.mark(function u(f){var h,p,y,b,v,S,k,N,G,U,P;return we.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(!(f.type==="rendered"&&f.data.type==="socket")){q.next=8;break}return h=f.data,p=h.nodeId,y=h.key,b=h.side,v=h.element,q.next=4,s.calculatePosition(p,b,y,v);case 4:S=q.sent,S&&(s.sockets.add({nodeId:p,key:y,side:b,element:v,position:S}),s.emitter.emit({nodeId:p,key:y,side:b})),q.next=24;break;case 8:if(f.type!=="unmount"){q.next=12;break}s.sockets.remove(f.data.element),q.next=24;break;case 12:if(f.type!=="nodetranslated"){q.next=16;break}s.emitter.emit({nodeId:f.data.id}),q.next=24;break;case 16:if(f.type!=="noderesized"){q.next=23;break}return k=f.data.id,q.next=20,Promise.all(s.sockets.snapshot().filter(function(Z){return Z.nodeId===f.data.id&&Z.side==="output"}).map((function(){var Z=at(we.mark(function ce(oe){var $,re,ie,F;return we.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return $=oe.side,re=oe.key,ie=oe.element,_e.next=3,s.calculatePosition(k,$,re,ie);case 3:F=_e.sent,F&&(oe.position=F);case 5:case"end":return _e.stop()}},ce)}));return function(ce){return Z.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:k}),q.next=24;break;case 23:f.type==="render"&&f.data.type==="connection"&&(N=f.data.payload,G=N.source,U=N.target,P=G||U,s.emitter.emit({nodeId:P}));case 24:return q.abrupt("return",f);case 25:case"end":return q.stop()}},u)}));return function(u){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,u){var f=this,h=this.emitter.listen(function(p){if(p.nodeId===r&&(!p.key||p.side===s)&&(!p.side||p.key===l)){var y,b=f.sockets.getPosition({side:s,nodeId:r,key:l});if(!b)return;var v=b.x,S=b.y,k=(y=f.area)===null||y===void 0?void 0:y.nodeViews.get(r);k&&u({x:v+k.position.x,y:S+k.position.y})}});return this.sockets.snapshot().forEach(function(p){p.nodeId===r&&f.emitter.emit(p)}),h}}])})();function T2(a,n,r){return n=Lt(n),za(a,Db()?Reflect.construct(n,[],Lt(a).constructor):n.apply(a,r))}function Db(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Db=function(){return!!a})()}var O2=(function(a){function n(r){var s;return ut(this,n),s=T2(this,n),s.props=r,s}return Hn(n,a),ct(n,[{key:"calculatePosition",value:(function(){var r=at(we.mark(function l(u,f,h,p){var y,b,v,S;return we.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(v=(y=this.area)===null||y===void 0?void 0:y.nodeViews.get(u),v!=null&&v.element){N.next=3;break}return N.abrupt("return",null);case 3:return N.next=5,x2(p,v.element);case 5:if(S=N.sent,!((b=this.props)!==null&&b!==void 0&&b.offset)){N.next=8;break}return N.abrupt("return",this.props.offset(S,u,f,h));case 8:return N.abrupt("return",{x:S.x+12*(f==="input"?-1:1),y:S.y});case 9:case"end":return N.stop()}},l,this)}));function s(l,u,f,h){return r.apply(this,arguments)}return s})()}])})(C2);function N2(a){return new O2(a)}function wn(a,n){return n||(n=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(n)}}))}var In=function(){return In=Object.assign||function(n){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u])}return n},In.apply(this,arguments)};function Eu(a,n,r){if(r||arguments.length===2)for(var s=0,l=n.length,u;s<l;s++)(u||!(s in n))&&(u||(u=Array.prototype.slice.call(n,0,s)),u[s]=n[s]);return a.concat(u||Array.prototype.slice.call(n))}var Ht="-ms-",ko="-moz-",xt="-webkit-",Mb="comm",Mu="rule",_h="decl",j2="@import",Rb="@keyframes",A2="@layer",zb=Math.abs,Dh=String.fromCharCode,Gd=Object.assign;function _2(a,n){return hn(a,0)^45?(((n<<2^hn(a,0))<<2^hn(a,1))<<2^hn(a,2))<<2^hn(a,3):0}function Lb(a){return a.trim()}function rr(a,n){return(a=n.exec(a))?a[0]:a}function nt(a,n,r){return a.replace(n,r)}function fu(a,n,r){return a.indexOf(n,r)}function hn(a,n){return a.charCodeAt(n)|0}function ss(a,n,r){return a.slice(n,r)}function ja(a){return a.length}function Bb(a){return a.length}function vo(a,n){return n.push(a),a}function D2(a,n){return a.map(n).join("")}function Ov(a,n){return a.filter(function(r){return!rr(r,n)})}var Ru=1,os=1,Ub=0,fa=0,ln=0,ms="";function zu(a,n,r,s,l,u,f,h){return{value:a,root:n,parent:r,type:s,props:l,children:u,line:Ru,column:os,length:f,return:"",siblings:h}}function Mr(a,n){return Gd(zu("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},n)}function Fi(a){for(;a.root;)a=Mr(a.root,{children:[a]});vo(a,a.siblings)}function M2(){return ln}function R2(){return ln=fa>0?hn(ms,--fa):0,os--,ln===10&&(os=1,Ru--),ln}function Sa(){return ln=fa<Ub?hn(ms,fa++):0,os++,ln===10&&(os=1,Ru++),ln}function li(){return hn(ms,fa)}function du(){return fa}function Lu(a,n){return ss(ms,a,n)}function Zd(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function z2(a){return Ru=os=1,Ub=ja(ms=a),fa=0,[]}function L2(a){return ms="",a}function Sd(a){return Lb(Lu(fa-1,Pd(a===91?a+2:a===40?a+1:a)))}function B2(a){for(;(ln=li())&&ln<33;)Sa();return Zd(a)>2||Zd(ln)>3?"":" "}function U2(a,n){for(;--n&&Sa()&&!(ln<48||ln>102||ln>57&&ln<65||ln>70&&ln<97););return Lu(a,du()+(n<6&&li()==32&&Sa()==32))}function Pd(a){for(;Sa();)switch(ln){case a:return fa;case 34:case 39:a!==34&&a!==39&&Pd(ln);break;case 40:a===41&&Pd(a);break;case 92:Sa();break}return fa}function $2(a,n){for(;Sa()&&a+ln!==57;)if(a+ln===84&&li()===47)break;return"/*"+Lu(n,fa-1)+"*"+Dh(a===47?a:Sa())}function I2(a){for(;!Zd(li());)Sa();return Lu(a,fa)}function H2(a){return L2(hu("",null,null,null,[""],a=z2(a),0,[0],a))}function hu(a,n,r,s,l,u,f,h,p){for(var y=0,b=0,v=f,S=0,k=0,N=0,G=1,U=1,P=1,K=0,q="",Z=l,ce=u,oe=s,$=q;U;)switch(N=K,K=Sa()){case 40:if(N!=108&&hn($,v-1)==58){fu($+=nt(Sd(K),"&","&\f"),"&\f",zb(y?h[y-1]:0))!=-1&&(P=-1);break}case 34:case 39:case 91:$+=Sd(K);break;case 9:case 10:case 13:case 32:$+=B2(N);break;case 92:$+=U2(du()-1,7);continue;case 47:switch(li()){case 42:case 47:vo(V2($2(Sa(),du()),n,r,p),p);break;default:$+="/"}break;case 123*G:h[y++]=ja($)*P;case 125*G:case 59:case 0:switch(K){case 0:case 125:U=0;case 59+b:P==-1&&($=nt($,/\f/g,"")),k>0&&ja($)-v&&vo(k>32?jv($+";",s,r,v-1,p):jv(nt($," ","")+";",s,r,v-2,p),p);break;case 59:$+=";";default:if(vo(oe=Nv($,n,r,y,b,l,h,q,Z=[],ce=[],v,u),u),K===123)if(b===0)hu($,n,oe,oe,Z,u,v,h,ce);else switch(S===99&&hn($,3)===110?100:S){case 100:case 108:case 109:case 115:hu(a,oe,oe,s&&vo(Nv(a,oe,oe,0,0,l,h,q,l,Z=[],v,ce),ce),l,ce,v,h,s?Z:ce);break;default:hu($,oe,oe,oe,[""],ce,0,h,ce)}}y=b=k=0,G=P=1,q=$="",v=f;break;case 58:v=1+ja($),k=N;default:if(G<1){if(K==123)--G;else if(K==125&&G++==0&&R2()==125)continue}switch($+=Dh(K),K*G){case 38:P=b>0?1:($+="\f",-1);break;case 44:h[y++]=(ja($)-1)*P,P=1;break;case 64:li()===45&&($+=Sd(Sa())),S=li(),b=v=ja(q=$+=I2(du())),K++;break;case 45:N===45&&ja($)==2&&(G=0)}}return u}function Nv(a,n,r,s,l,u,f,h,p,y,b,v){for(var S=l-1,k=l===0?u:[""],N=Bb(k),G=0,U=0,P=0;G<s;++G)for(var K=0,q=ss(a,S+1,S=zb(U=f[G])),Z=a;K<N;++K)(Z=Lb(U>0?k[K]+" "+q:nt(q,/&\f/g,k[K])))&&(p[P++]=Z);return zu(a,n,r,l===0?Mu:h,p,y,b,v)}function V2(a,n,r,s){return zu(a,n,r,Mb,Dh(M2()),ss(a,2,-2),0,s)}function jv(a,n,r,s,l){return zu(a,n,r,_h,ss(a,0,s),ss(a,s+1,-1),s,l)}function $b(a,n,r){switch(_2(a,n)){case 5103:return xt+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xt+a+a;case 4789:return ko+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return xt+a+ko+a+Ht+a+a;case 5936:switch(hn(a,n+11)){case 114:return xt+a+Ht+nt(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return xt+a+Ht+nt(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return xt+a+Ht+nt(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return xt+a+Ht+a+a;case 6165:return xt+a+Ht+"flex-"+a+a;case 5187:return xt+a+nt(a,/(\w+).+(:[^]+)/,xt+"box-$1$2"+Ht+"flex-$1$2")+a;case 5443:return xt+a+Ht+"flex-item-"+nt(a,/flex-|-self/g,"")+(rr(a,/flex-|baseline/)?"":Ht+"grid-row-"+nt(a,/flex-|-self/g,""))+a;case 4675:return xt+a+Ht+"flex-line-pack"+nt(a,/align-content|flex-|-self/g,"")+a;case 5548:return xt+a+Ht+nt(a,"shrink","negative")+a;case 5292:return xt+a+Ht+nt(a,"basis","preferred-size")+a;case 6060:return xt+"box-"+nt(a,"-grow","")+xt+a+Ht+nt(a,"grow","positive")+a;case 4554:return xt+nt(a,/([^-])(transform)/g,"$1"+xt+"$2")+a;case 6187:return nt(nt(nt(a,/(zoom-|grab)/,xt+"$1"),/(image-set)/,xt+"$1"),a,"")+a;case 5495:case 3959:return nt(a,/(image-set\([^]*)/,xt+"$1$`$1");case 4968:return nt(nt(a,/(.+:)(flex-)?(.*)/,xt+"box-pack:$3"+Ht+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xt+a+a;case 4200:if(!rr(a,/flex-|baseline/))return Ht+"grid-column-align"+ss(a,n)+a;break;case 2592:case 3360:return Ht+nt(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return n=l,rr(s.props,/grid-\w+-end/)})?~fu(a+(r=r[n].value),"span",0)?a:Ht+nt(a,"-start","")+a+Ht+"grid-row-span:"+(~fu(r,"span",0)?rr(r,/\d+/):+rr(r,/\d+/)-+rr(a,/\d+/))+";":Ht+nt(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return rr(s.props,/grid-\w+-start/)})?a:Ht+nt(nt(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return nt(a,/(.+)-inline(.+)/,xt+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ja(a)-1-n>6)switch(hn(a,n+1)){case 109:if(hn(a,n+4)!==45)break;case 102:return nt(a,/(.+:)(.+)-([^]+)/,"$1"+xt+"$2-$3$1"+ko+(hn(a,n+3)==108?"$3":"$2-$3"))+a;case 115:return~fu(a,"stretch",0)?$b(nt(a,"stretch","fill-available"),n,r)+a:a}break;case 5152:case 5920:return nt(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,u,f,h,p,y){return Ht+l+":"+u+y+(f?Ht+l+"-span:"+(h?p:+p-+u)+y:"")+a});case 4949:if(hn(a,n+6)===121)return nt(a,":",":"+xt)+a;break;case 6444:switch(hn(a,hn(a,14)===45?18:11)){case 120:return nt(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+xt+(hn(a,14)===45?"inline-":"")+"box$3$1"+xt+"$2$3$1"+Ht+"$2box$3")+a;case 100:return nt(a,":",":"+Ht)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return nt(a,"scroll-","scroll-snap-")+a}return a}function ku(a,n){for(var r="",s=0;s<a.length;s++)r+=n(a[s],s,a,n)||"";return r}function q2(a,n,r,s){switch(a.type){case A2:if(a.children.length)break;case j2:case _h:return a.return=a.return||a.value;case Mb:return"";case Rb:return a.return=a.value+"{"+ku(a.children,s)+"}";case Mu:if(!ja(a.value=a.props.join(",")))return""}return ja(r=ku(a.children,s))?a.return=a.value+"{"+r+"}":""}function Y2(a){var n=Bb(a);return function(r,s,l,u){for(var f="",h=0;h<n;h++)f+=a[h](r,s,l,u)||"";return f}}function G2(a){return function(n){n.root||(n=n.return)&&a(n)}}function Z2(a,n,r,s){if(a.length>-1&&!a.return)switch(a.type){case _h:a.return=$b(a.value,a.length,r);return;case Rb:return ku([Mr(a,{value:nt(a.value,"@","@"+xt)})],s);case Mu:if(a.length)return D2(r=a.props,function(l){switch(rr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Fi(Mr(a,{props:[nt(l,/:(read-\w+)/,":"+ko+"$1")]})),Fi(Mr(a,{props:[l]})),Gd(a,{props:Ov(r,s)});break;case"::placeholder":Fi(Mr(a,{props:[nt(l,/:(plac\w+)/,":"+xt+"input-$1")]})),Fi(Mr(a,{props:[nt(l,/:(plac\w+)/,":"+ko+"$1")]})),Fi(Mr(a,{props:[nt(l,/:(plac\w+)/,Ht+"input-$1")]})),Fi(Mr(a,{props:[l]})),Gd(a,{props:Ov(r,s)});break}return""})}}var P2={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Xn={},ls=typeof process<"u"&&Xn!==void 0&&(Xn.REACT_APP_SC_ATTR||Xn.SC_ATTR)||"data-styled",Ib="active",Hb="data-styled-version",Bu="6.1.19",Mh=`/*!sc*/
`,Cu=typeof window<"u"&&typeof document<"u",F2=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Xn!==void 0&&Xn.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Xn.REACT_APP_SC_DISABLE_SPEEDY!==""?Xn.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Xn.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Xn!==void 0&&Xn.SC_DISABLE_SPEEDY!==void 0&&Xn.SC_DISABLE_SPEEDY!==""&&Xn.SC_DISABLE_SPEEDY!=="false"&&Xn.SC_DISABLE_SPEEDY),Uu=Object.freeze([]),us=Object.freeze({});function X2(a,n,r){return r===void 0&&(r=us),a.theme!==r.theme&&a.theme||n||r.theme}var Vb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),K2=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Q2=/(^-|-$)/g;function Av(a){return a.replace(K2,"-").replace(Q2,"")}var J2=/(a)(d)/gi,Jl=52,_v=function(a){return String.fromCharCode(a+(a>25?39:97))};function Fd(a){var n,r="";for(n=Math.abs(a);n>Jl;n=n/Jl|0)r=_v(n%Jl)+r;return(_v(n%Jl)+r).replace(J2,"$1-$2")}var xd,qb=5381,ts=function(a,n){for(var r=n.length;r;)a=33*a^n.charCodeAt(--r);return a},Yb=function(a){return ts(qb,a)};function W2(a){return Fd(Yb(a)>>>0)}function ek(a){return a.displayName||a.name||"Component"}function Ed(a){return typeof a=="string"&&!0}var Gb=typeof Symbol=="function"&&Symbol.for,Zb=Gb?Symbol.for("react.memo"):60115,tk=Gb?Symbol.for("react.forward_ref"):60112,nk={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ak={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Pb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},rk=((xd={})[tk]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xd[Zb]=Pb,xd);function Dv(a){return("type"in(n=a)&&n.type.$$typeof)===Zb?Pb:"$$typeof"in a?rk[a.$$typeof]:nk;var n}var ik=Object.defineProperty,sk=Object.getOwnPropertyNames,Mv=Object.getOwnPropertySymbols,ok=Object.getOwnPropertyDescriptor,lk=Object.getPrototypeOf,Rv=Object.prototype;function Fb(a,n,r){if(typeof n!="string"){if(Rv){var s=lk(n);s&&s!==Rv&&Fb(a,s,r)}var l=sk(n);Mv&&(l=l.concat(Mv(n)));for(var u=Dv(a),f=Dv(n),h=0;h<l.length;++h){var p=l[h];if(!(p in ak||r&&r[p]||f&&p in f||u&&p in u)){var y=ok(n,p);try{ik(a,p,y)}catch{}}}}return a}function cs(a){return typeof a=="function"}function Rh(a){return typeof a=="object"&&"styledComponentId"in a}function ii(a,n){return a&&n?"".concat(a," ").concat(n):a||n||""}function zv(a,n){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Ao(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function Xd(a,n,r){if(r===void 0&&(r=!1),!r&&!Ao(a)&&!Array.isArray(a))return n;if(Array.isArray(n))for(var s=0;s<n.length;s++)a[s]=Xd(a[s],n[s]);else if(Ao(n))for(var s in n)a[s]=Xd(a[s],n[s]);return a}function zh(a,n){Object.defineProperty(a,"toString",{value:n})}function Mo(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var uk=(function(){function a(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return a.prototype.indexOfGroup=function(n){for(var r=0,s=0;s<n;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,u=l;n>=u;)if((u<<=1)<0)throw Mo(16,"".concat(n));this.groupSizes=new Uint32Array(u),this.groupSizes.set(s),this.length=u;for(var f=l;f<u;f++)this.groupSizes[f]=0}for(var h=this.indexOfGroup(n+1),p=(f=0,r.length);f<p;f++)this.tag.insertRule(h,r[f])&&(this.groupSizes[n]++,h++)},a.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],s=this.indexOfGroup(n),l=s+r;this.groupSizes[n]=0;for(var u=s;u<l;u++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var s=this.groupSizes[n],l=this.indexOfGroup(n),u=l+s,f=l;f<u;f++)r+="".concat(this.tag.getRule(f)).concat(Mh);return r},a})(),pu=new Map,Tu=new Map,mu=1,Wl=function(a){if(pu.has(a))return pu.get(a);for(;Tu.has(mu);)mu++;var n=mu++;return pu.set(a,n),Tu.set(n,a),n},ck=function(a,n){mu=n+1,pu.set(a,n),Tu.set(n,a)},fk="style[".concat(ls,"][").concat(Hb,'="').concat(Bu,'"]'),dk=new RegExp("^".concat(ls,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),hk=function(a,n,r){for(var s,l=r.split(","),u=0,f=l.length;u<f;u++)(s=l[u])&&a.registerName(n,s)},pk=function(a,n){for(var r,s=((r=n.textContent)!==null&&r!==void 0?r:"").split(Mh),l=[],u=0,f=s.length;u<f;u++){var h=s[u].trim();if(h){var p=h.match(dk);if(p){var y=0|parseInt(p[1],10),b=p[2];y!==0&&(ck(b,y),hk(a,b,p[3]),a.getTag().insertRules(y,l)),l.length=0}else l.push(h)}}},Lv=function(a){for(var n=document.querySelectorAll(fk),r=0,s=n.length;r<s;r++){var l=n[r];l&&l.getAttribute(ls)!==Ib&&(pk(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function mk(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Xb=function(a){var n=document.head,r=a||n,s=document.createElement("style"),l=(function(h){var p=Array.from(h.querySelectorAll("style[".concat(ls,"]")));return p[p.length-1]})(r),u=l!==void 0?l.nextSibling:null;s.setAttribute(ls,Ib),s.setAttribute(Hb,Bu);var f=mk();return f&&s.setAttribute("nonce",f),r.insertBefore(s,u),s},yk=(function(){function a(n){this.element=Xb(n),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,u=s.length;l<u;l++){var f=s[l];if(f.ownerNode===r)return f}throw Mo(17)})(this.element),this.length=0}return a.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},a.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},a})(),gk=(function(){function a(n){this.element=Xb(n),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[n]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},a.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},a})(),vk=(function(){function a(n){this.rules=[],this.length=0}return a.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},a.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},a.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},a})(),Bv=Cu,bk={isServer:!Cu,useCSSOMInjection:!F2},Kb=(function(){function a(n,r,s){n===void 0&&(n=us),r===void 0&&(r={});var l=this;this.options=In(In({},bk),n),this.gs=r,this.names=new Map(s),this.server=!!n.isServer,!this.server&&Cu&&Bv&&(Bv=!1,Lv(this)),zh(this,function(){return(function(u){for(var f=u.getTag(),h=f.length,p="",y=function(v){var S=(function(P){return Tu.get(P)})(v);if(S===void 0)return"continue";var k=u.names.get(S),N=f.getGroup(v);if(k===void 0||!k.size||N.length===0)return"continue";var G="".concat(ls,".g").concat(v,'[id="').concat(S,'"]'),U="";k!==void 0&&k.forEach(function(P){P.length>0&&(U+="".concat(P,","))}),p+="".concat(N).concat(G,'{content:"').concat(U,'"}').concat(Mh)},b=0;b<h;b++)y(b);return p})(l)})}return a.registerId=function(n){return Wl(n)},a.prototype.rehydrate=function(){!this.server&&Cu&&Lv(this)},a.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new a(In(In({},this.options),n),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(n=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new vk(l):s?new yk(l):new gk(l)})(this.options),new uk(n)));var n},a.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},a.prototype.registerName=function(n,r){if(Wl(n),this.names.has(n))this.names.get(n).add(r);else{var s=new Set;s.add(r),this.names.set(n,s)}},a.prototype.insertRules=function(n,r,s){this.registerName(n,r),this.getTag().insertRules(Wl(n),s)},a.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},a.prototype.clearRules=function(n){this.getTag().clearGroup(Wl(n)),this.clearNames(n)},a.prototype.clearTag=function(){this.tag=void 0},a})(),wk=/&/g,Sk=/^\s*\/\/.*$/gm;function Qb(a,n){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(s){return"".concat(n," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=Qb(r.children,n)),r})}function xk(a){var n,r,s,l=us,u=l.options,f=u===void 0?us:u,h=l.plugins,p=h===void 0?Uu:h,y=function(S,k,N){return N.startsWith(r)&&N.endsWith(r)&&N.replaceAll(r,"").length>0?".".concat(n):S},b=p.slice();b.push(function(S){S.type===Mu&&S.value.includes("&")&&(S.props[0]=S.props[0].replace(wk,r).replace(s,y))}),f.prefix&&b.push(Z2),b.push(q2);var v=function(S,k,N,G){k===void 0&&(k=""),N===void 0&&(N=""),G===void 0&&(G="&"),n=G,r=k,s=new RegExp("\\".concat(r,"\\b"),"g");var U=S.replace(Sk,""),P=H2(N||k?"".concat(N," ").concat(k," { ").concat(U," }"):U);f.namespace&&(P=Qb(P,f.namespace));var K=[];return ku(P,Y2(b.concat(G2(function(q){return K.push(q)})))),K};return v.hash=p.length?p.reduce(function(S,k){return k.name||Mo(15),ts(S,k.name)},qb).toString():"",v}var Ek=new Kb,Kd=xk(),Jb=xa.createContext({shouldForwardProp:void 0,styleSheet:Ek,stylis:Kd});Jb.Consumer;xa.createContext(void 0);function Uv(){return E.useContext(Jb)}var kk=(function(){function a(n,r){var s=this;this.inject=function(l,u){u===void 0&&(u=Kd);var f=s.name+u.hash;l.hasNameForId(s.id,f)||l.insertRules(s.id,f,u(s.rules,f,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,zh(this,function(){throw Mo(12,String(s.name))})}return a.prototype.getName=function(n){return n===void 0&&(n=Kd),this.name+n.hash},a})(),Ck=function(a){return a>="A"&&a<="Z"};function $v(a){for(var n="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;Ck(s)?n+="-"+s.toLowerCase():n+=s}return n.startsWith("ms-")?"-"+n:n}var Wb=function(a){return a==null||a===!1||a===""},e1=function(a){var n,r,s=[];for(var l in a){var u=a[l];a.hasOwnProperty(l)&&!Wb(u)&&(Array.isArray(u)&&u.isCss||cs(u)?s.push("".concat($v(l),":"),u,";"):Ao(u)?s.push.apply(s,Eu(Eu(["".concat(l," {")],e1(u),!1),["}"],!1)):s.push("".concat($v(l),": ").concat((n=l,(r=u)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in P2||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function ui(a,n,r,s){if(Wb(a))return[];if(Rh(a))return[".".concat(a.styledComponentId)];if(cs(a)){if(!cs(u=a)||u.prototype&&u.prototype.isReactComponent||!n)return[a];var l=a(n);return ui(l,n,r,s)}var u;return a instanceof kk?r?(a.inject(r,s),[a.getName(s)]):[a]:Ao(a)?e1(a):Array.isArray(a)?Array.prototype.concat.apply(Uu,a.map(function(f){return ui(f,n,r,s)})):[a.toString()]}function Tk(a){for(var n=0;n<a.length;n+=1){var r=a[n];if(cs(r)&&!Rh(r))return!1}return!0}var Ok=Yb(Bu),Nk=(function(){function a(n,r,s){this.rules=n,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&Tk(n),this.componentId=r,this.baseHash=ts(Ok,r),this.baseStyle=s,Kb.registerId(r)}return a.prototype.generateAndInjectStyles=function(n,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=ii(l,this.staticRulesId);else{var u=zv(ui(this.rules,n,r,s)),f=Fd(ts(this.baseHash,u)>>>0);if(!r.hasNameForId(this.componentId,f)){var h=s(u,".".concat(f),void 0,this.componentId);r.insertRules(this.componentId,f,h)}l=ii(l,f),this.staticRulesId=f}else{for(var p=ts(this.baseHash,s.hash),y="",b=0;b<this.rules.length;b++){var v=this.rules[b];if(typeof v=="string")y+=v;else if(v){var S=zv(ui(v,n,r,s));p=ts(p,S+b),y+=S}}if(y){var k=Fd(p>>>0);r.hasNameForId(this.componentId,k)||r.insertRules(this.componentId,k,s(y,".".concat(k),void 0,this.componentId)),l=ii(l,k)}}return l},a})(),t1=xa.createContext(void 0);t1.Consumer;var kd={};function jk(a,n,r){var s=Rh(a),l=a,u=!Ed(a),f=n.attrs,h=f===void 0?Uu:f,p=n.componentId,y=p===void 0?(function(Z,ce){var oe=typeof Z!="string"?"sc":Av(Z);kd[oe]=(kd[oe]||0)+1;var $="".concat(oe,"-").concat(W2(Bu+oe+kd[oe]));return ce?"".concat(ce,"-").concat($):$})(n.displayName,n.parentComponentId):p,b=n.displayName,v=b===void 0?(function(Z){return Ed(Z)?"styled.".concat(Z):"Styled(".concat(ek(Z),")")})(a):b,S=n.displayName&&n.componentId?"".concat(Av(n.displayName),"-").concat(n.componentId):n.componentId||y,k=s&&l.attrs?l.attrs.concat(h).filter(Boolean):h,N=n.shouldForwardProp;if(s&&l.shouldForwardProp){var G=l.shouldForwardProp;if(n.shouldForwardProp){var U=n.shouldForwardProp;N=function(Z,ce){return G(Z,ce)&&U(Z,ce)}}else N=G}var P=new Nk(r,S,s?l.componentStyle:void 0);function K(Z,ce){return(function(oe,$,re){var ie=oe.attrs,F=oe.componentStyle,ue=oe.defaultProps,_e=oe.foldedComponentIds,Me=oe.styledComponentId,qe=oe.target,Ve=xa.useContext(t1),C=Uv(),L=oe.shouldForwardProp||C.shouldForwardProp,se=X2($,Ve,ue)||us,ge=(function(me,je,Ie){for(var Be,Ue=In(In({},je),{className:void 0,theme:Ie}),kt=0;kt<me.length;kt+=1){var Ce=cs(Be=me[kt])?Be(Ue):Be;for(var Ge in Ce)Ue[Ge]=Ge==="className"?ii(Ue[Ge],Ce[Ge]):Ge==="style"?In(In({},Ue[Ge]),Ce[Ge]):Ce[Ge]}return je.className&&(Ue.className=ii(Ue.className,je.className)),Ue})(ie,$,se),be=ge.as||qe,x={};for(var M in ge)ge[M]===void 0||M[0]==="$"||M==="as"||M==="theme"&&ge.theme===se||(M==="forwardedAs"?x.as=ge.forwardedAs:L&&!L(M,be)||(x[M]=ge[M]));var A=(function(me,je){var Ie=Uv(),Be=me.generateAndInjectStyles(je,Ie.styleSheet,Ie.stylis);return Be})(F,ge),X=ii(_e,Me);return A&&(X+=" "+A),ge.className&&(X+=" "+ge.className),x[Ed(be)&&!Vb.has(be)?"class":"className"]=X,re&&(x.ref=re),E.createElement(be,x)})(q,Z,ce)}K.displayName=v;var q=xa.forwardRef(K);return q.attrs=k,q.componentStyle=P,q.displayName=v,q.shouldForwardProp=N,q.foldedComponentIds=s?ii(l.foldedComponentIds,l.styledComponentId):"",q.styledComponentId=S,q.target=s?l.target:a,Object.defineProperty(q,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Z){this._foldedDefaultProps=s?(function(ce){for(var oe=[],$=1;$<arguments.length;$++)oe[$-1]=arguments[$];for(var re=0,ie=oe;re<ie.length;re++)Xd(ce,ie[re],!0);return ce})({},l.defaultProps,Z):Z}}),zh(q,function(){return".".concat(q.styledComponentId)}),u&&Fb(q,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),q}function Iv(a,n){for(var r=[a[0]],s=0,l=n.length;s<l;s+=1)r.push(n[s],a[s+1]);return r}var Hv=function(a){return Object.assign(a,{isCss:!0})};function Lh(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(cs(a)||Ao(a))return Hv(ui(Iv(Uu,Eu([a],n,!0))));var s=a;return n.length===0&&s.length===1&&typeof s[0]=="string"?ui(s):Hv(ui(Iv(s,n)))}function Qd(a,n,r){if(r===void 0&&(r=us),!n)throw Mo(1,n);var s=function(l){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];return a(n,r,Lh.apply(void 0,Eu([l],u,!1)))};return s.attrs=function(l){return Qd(a,n,In(In({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return Qd(a,n,In(In({},r),l))},s}var n1=function(a){return Qd(jk,a)},jn=n1;Vb.forEach(function(a){jn[a]=n1(a)});function fi(){return fi=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},fi.apply(null,arguments)}function Ak(a,n){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(n.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function Bh(a,n){if(a==null)return{};var r,s,l=Ak(a,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);for(s=0;s<u.length;s++)r=u[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function _k(a){var n=a?.createRoot,r=new WeakMap;function s(f){var h=r.get(f);if(h)return h;var p=document.createElement("span");return f.appendChild(p),r.set(f,p),p}function l(f){var h=r.get(f);h&&(h.remove(),r.delete(f))}if(n){var u=new WeakMap;return{mount:function(h,p){var y,b=s(p),v=u.get(b);return v||(v=n(b),u.set(b,v)),v.render(h),(y=b.firstElementChild)!==null&&y!==void 0?y:b},unmount:function(h){var p=s(h),y=u.get(p);y&&(y.unmount(),u.delete(p)),l(h)}}}return{mount:function(h,p){var y=s(p);if("render"in Jg&&typeof Lr.render=="function"){var b=Lr.render(h,y);return b||y}throw new Error("ReactDOM.render is not available")},unmount:function(h){var p=s(h);if("unmountComponentAtNode"in Jg&&typeof Lr.unmountComponentAtNode=="function")Lr.unmountComponentAtNode(p);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(h)}}}function Dk(a){var n=a.children,r=a.rendered;return E.useEffect(function(){r()}),n}function Mk(){var a=E.useRef(!1);return E.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){Lr.flushSync(r)}):r()}}}var a1=E.createContext({start:null,end:null,path:null});function Rk(a){var n=a.children,r=E.useState(null),s=Dn(r,2),l=s[0],u=s[1],f=E.useState(null),h=Dn(f,2),p=h[0],y=h[1],b=E.useState(null),v=Dn(b,2),S=v[0],k=v[1],N="x"in a.start?a.start:l,G="x"in a.end?a.end:p,U=Mk();return E.useEffect(function(){var P=typeof a.start=="function"&&a.start(function(q){U.apply(function(){u(q)})}),K=typeof a.end=="function"&&a.end(function(q){U.apply(function(){y(q)})});return function(){P&&P(),K&&K()}},[]),E.useEffect(function(){N&&G&&a.path(N,G).then(function(P){U.apply(function(){k(P)})})},[N,G]),E.createElement(a1.Provider,{value:{start:N,end:G,path:S}},n)}function r1(){return E.useContext(a1)}var Vv,qv,zk=jn.svg(Vv||(Vv=wn([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),Lk=jn.path(qv||(qv=wn([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function i1(a){var n=r1(),r=n.path;return r?E.createElement(zk,{"data-testid":"connection"},E.createElement(Lk,{styles:a.styles,d:r})):null}function Bk(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Uk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,u=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw u}}}}function Uk(a,n){if(a){if(typeof a=="string")return Yv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yv(a,n):void 0}}function Yv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function $k(a){for(var n=new a.constructor(a.type),r=n;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=Bk(s),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,h=n[f];typeof h!="function"&&Object.defineProperty(n,f,{value:a[f]})}}catch(p){l.e(p)}finally{l.f()}}return n}var Ik="__reactContainer$";function Hk(a){for(var n=a;n;){if(n._reactRootContainer||Object.keys(n).some(function(r){return r.startsWith(Ik)}))return n;n=n.parentElement}}function Gv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Zv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Gv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Gv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function s1(a,n){return{start:function(s){var l=Zv({},n(s));function u(h){var p=Zv({},n(h)),y=p.x-l.x,b=p.y-l.y;l=p,a(y,b)}function f(){window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f)}window.addEventListener("pointermove",u),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f)}}}function Vk(a,n){E.useEffect(function(){var r=function(u){if(!n){var f=Hk(u.target),h=E.version.startsWith("16")?document:f;h&&(u.stopPropagation(),h.dispatchEvent($k(u)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,n])}var Pv,qk=jn.input(Pv||(Pv=wn([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function Jd(a){var n=E.useState(a.data.value),r=Dn(n,2),s=r[0],l=r[1],u=E.useRef(null);return Vk(u),E.useEffect(function(){l(a.data.value)},[a.data.value]),E.createElement(qk,{value:s,type:a.data.type,ref:u,readOnly:a.data.readonly,onChange:function(h){var p=a.data.type==="number"?+h.target.value:h.target.value;l(p),a.data.setValue(p)},styles:a.styles})}var Wd="rgba(110,136,255,0.8)",o1="#ffd92c",Aa=24,ir=6,l1="#96b38a",u1=180,Yk=Object.freeze({__proto__:null,$nodecolor:Wd,$nodecolorselected:o1,$socketsize:Aa,$socketmargin:ir,$socketcolor:l1,$nodewidth:u1}),Gk=["init","unmount"];function Uh(a){var n=a.init,r=a.unmount,s=Bh(a,Gk),l=E.useRef(null);return E.useEffect(function(){var u=l.current;return function(){u&&r(u)}},[]),E.useEffect(function(){l.current&&n(l.current)}),E.createElement("span",fi({},s,{ref:l}))}var Zk=["name","emit","payload"];function eh(a){var n=a.name,r=a.emit,s=a.payload,l=Bh(a,Zk);return E.createElement(Uh,fi({},l,{className:n,init:function(f){r({type:"render",data:{type:"control",element:f,payload:s}})},unmount:function(f){r({type:"unmount",data:{element:f}})}}))}var Pk=["name","emit","nodeId","side","socketKey","payload"];function th(a){var n=a.name,r=a.emit,s=a.nodeId,l=a.side,u=a.socketKey,f=a.payload,h=Bh(a,Pk);return E.createElement(Uh,fi({},h,{className:n,init:function(y){r({type:"render",data:{type:"socket",side:l,key:u,nodeId:s,element:y,payload:f}})},unmount:function(y){r({type:"unmount",data:{element:y}})}}))}var Fv,Xv,c1=jn.div(Fv||(Fv=wn([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),Wd,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(u1,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},Wd,function(a){return a.selected&&Lh(Xv||(Xv=wn([`
        background: `,`;
        border-color: #e3c000;
    `])),o1)},Aa/2+ir,Aa/2+ir,ir,Aa,Aa+2*ir,ir,Aa/2+ir,function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function Cd(a){a.sort(function(n,r){var s,l,u=((s=n[1])===null||s===void 0?void 0:s.index)||0,f=((l=r[1])===null||l===void 0?void 0:l.index)||0;return u-f})}function f1(a){var n=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,u=a.data,f=u.id,h=u.label,p=u.width,y=u.height;return Cd(n),Cd(r),Cd(s),E.createElement(c1,{selected:l,width:p,height:y,styles:a.styles,"data-testid":"node"},E.createElement("div",{className:"title","data-testid":"title"},h),r.map(function(b){var v=Dn(b,2),S=v[0],k=v[1];return k&&E.createElement("div",{className:"output",key:S,"data-testid":"output-".concat(S)},E.createElement("div",{className:"output-title","data-testid":"output-title"},k.label),E.createElement(th,{name:"output-socket",side:"output",socketKey:S,nodeId:f,emit:a.emit,payload:k.socket,"data-testid":"output-socket"}))}),s.map(function(b){var v=Dn(b,2),S=v[0],k=v[1];return k?E.createElement(eh,{key:S,name:"control",emit:a.emit,payload:k,"data-testid":"control-".concat(S)}):null}),n.map(function(b){var v=Dn(b,2),S=v[0],k=v[1];return k&&E.createElement("div",{className:"input",key:S,"data-testid":"input-".concat(S)},E.createElement(th,{name:"input-socket",side:"input",socketKey:S,nodeId:f,emit:a.emit,payload:k.socket,"data-testid":"input-socket"}),k&&(!k.control||!k.showControl)&&E.createElement("div",{className:"input-title","data-testid":"input-title"},k.label),k.control&&k.showControl&&E.createElement(eh,{key:S,name:"input-control",emit:a.emit,payload:k.control,"data-testid":"input-control"}))}))}var Kv,Qv,d1=jn.div(Kv||(Kv=wn([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),Aa/2,Aa,Aa,l1),Fk=jn.div(Qv||(Qv=wn([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(Aa+ir*2)/2,ir,d1);function h1(a){return E.createElement(Fk,null,E.createElement(d1,{title:a.data.name}))}function Xk(a){var n=typeof a?.socketPositionWatcher>"u"?N2():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,u=r.socket,f=r.control;return{attach:function(p){n.attach(p)},render:function(p,y){if(p.data.type==="node"){var b=y.parentScope(),v=s?s(p.data):f1;return v&&E.createElement(v,{data:p.data.payload,emit:function(ce){return void b.emit(ce)}})}else if(p.data.type==="connection"){var S=l?l(p.data):i1,k=p.data.payload,N=k.sourceOutput,G=k.targetInput,U=k.source,P=k.target;return S&&E.createElement(Rk,{start:p.data.start||function(Z){return n.listen(U,"output",N,Z)},end:p.data.end||function(Z){return n.listen(P,"input",G,Z)},path:(function(){var Z=at(we.mark(function ce(oe,$){var re,ie,F,ue,_e;return we.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.next=1,y.emit({type:"connectionpath",data:{payload:k,points:[oe,$]}});case 1:if(re=Me.sent,re){Me.next=2;break}return Me.abrupt("return","");case 2:if(ie=re.data,F=ie.path,ue=ie.points,_e=.3,!(!F&&ue.length!==2)){Me.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(F){Me.next=4;break}return Me.abrupt("return",k.isLoop?S2(ue,_e,120):w2(ue,_e));case 4:return Me.abrupt("return",F);case 5:case"end":return Me.stop()}},ce)}));return function(ce,oe){return Z.apply(this,arguments)}})()},E.createElement(S,{data:p.data.payload}))}else if(p.data.type==="socket"){var K=u?u(p.data):h1;return K&&p.data.payload&&E.createElement(K,{data:p.data.payload})}else if(p.data.type==="control"){var q=f&&p.data.payload?f(p.data):p.data.payload instanceof Nt.InputControl?Jd:null;return q&&E.createElement(q,{data:p.data.payload})}}}}var Kk=Object.freeze({__proto__:null,vars:Yk,setup:Xk,Connection:i1,useConnection:r1,Control:Jd,InputControl:Jd,Node:f1,NodeStyles:c1,RefControl:eh,RefSocket:th,Socket:h1});function p1(a,n){var r=E.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},n)};return E.useEffect(function(){return s},[]),[l,s]}var Qk="rgba(110,136,255,0.8)",Jk="rgba(130, 153, 255, 0.8)",Wk="rgba(69, 103, 255, 0.8)",eu="5px",nh=120,Jv,$h=jn.div(Jv||(Jv=wn([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),Wk,Qk,eu,eu,eu,eu,Jk),Wv,e0,t0,m1=jn($h)(Wv||(Wv=wn([`
    `,`
`])),function(a){return a.hasSubitems&&Lh(e0||(e0=wn([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),y1=jn.div(t0||(t0=wn([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),nh);function g1(a){var n,r,s,l,u=E.useState(!1),f=Dn(u,2),h=f[0],p=f[1],y=E.useCallback(function(){p(!1)},[p]),b=p1(y,a.delay),v=Dn(b,2),S=v[0],k=v[1],N=((n=a.components)===null||n===void 0||(r=n.item)===null||r===void 0?void 0:r.call(n,a.data))||m1,G=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||y1;return E.createElement(N,{onClick:function(P){P.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(P){P.stopPropagation()},onPointerOver:function(){k(),p(!0)},onPointerLeave:function(){S&&S()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&h&&E.createElement(G,null,a.data.subitems.map(function(U){return E.createElement(g1,{key:U.key,data:U,delay:a.delay,hide:a.hide,components:a.components},U.label)})))}var n0,v1=jn.input(n0||(n0=wn([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function eC(a){var n=a.component||v1;return E.createElement(n,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var a0,b1=jn.div(a0||(a0=wn([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),nh,nh/2);function tC(a){var n,r,s,l,u,f,h=p1(a.onHide,a.delay),p=Dn(h,2),y=p[0],b=p[1],v=E.useState(""),S=Dn(v,2),k=S[0],N=S[1],G=new RegExp(k,"i"),U=a.items.filter(function(q){return q.label.match(G)}),P=((n=a.components)===null||n===void 0||(r=n.main)===null||r===void 0?void 0:r.call(n))||b1,K=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||$h;return E.createElement(P,{onMouseOver:function(){b()},onMouseLeave:function(){y?.()},onWheel:function(Z){Z.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&E.createElement(K,null,E.createElement(eC,{value:k,onChange:N,component:(u=a.components)===null||u===void 0||(f=u.search)===null||f===void 0?void 0:f.call(u)})),U.map(function(q){return E.createElement(g1,{key:q.key,data:q,delay:a.delay,hide:a.onHide,components:a.components},q.label)}))}function nC(a){var n=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return E.createElement(tC,{items:s.data.items,delay:n,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var aC=Object.freeze({__proto__:null,setup:nC,Item:m1,Subitems:y1,Menu:b1,Search:v1,Common:$h}),tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rC=typeof tu=="object"&&tu&&tu.Object===Object&&tu,iC=typeof self=="object"&&self&&self.Object===Object&&self;rC||iC||Function("return this")();function sC(){const a=E.useRef(!1);return E.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),E.useCallback(()=>a.current,[])}var r0={width:void 0,height:void 0};function oC(a){const{ref:n,box:r="content-box"}=a,[{width:s,height:l},u]=E.useState(r0),f=sC(),h=E.useRef({...r0}),p=E.useRef(void 0);return p.current=a.onResize,E.useEffect(()=>{if(!n.current||typeof window>"u"||!("ResizeObserver"in window))return;const y=new ResizeObserver(([b])=>{const v=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",S=i0(b,v,"inlineSize"),k=i0(b,v,"blockSize");if(h.current.width!==S||h.current.height!==k){const G={width:S,height:k};h.current.width=S,h.current.height=k,p.current?p.current(G):f()&&u(G)}});return y.observe(n.current,{box:r}),()=>{y.disconnect()}},[r,n,f]),{width:s,height:l}}function i0(a,n,r){return a[n]?Array.isArray(a[n])?a[n][0][r]:a[n][r]:n==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function _a(a){return"".concat(a,"px")}var s0,lC=jn.div(s0||(s0=wn([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function uC(a){return E.createElement(lC,{style:{left:_a(a.left),top:_a(a.top),width:_a(a.width),height:_a(a.height)},"data-testid":"minimap-node"})}var o0,cC=jn.div(o0||(o0=wn([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function fC(a){var n=function(u){return u*a.containerWidth},r=function(u){return u/a.containerWidth},s=s1(function(l,u){a.translate(r(-l),r(-u))},function(l){return{x:l.pageX,y:l.pageY}});return E.createElement(cC,{onPointerDown:s.start,style:{left:_a(n(a.left)),top:_a(n(a.top)),width:_a(n(a.width)),height:_a(n(a.height))},"data-testid":"minimap-viewport"})}var l0,dC=jn.div(l0||(l0=wn([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function hC(a){var n,r=E.useRef(null),s=oC({ref:r}),l=s.width,u=l===void 0?0:l,f=((n=r.current)===null||n===void 0?void 0:n.clientWidth)||u,h=E.useCallback(function(p){return p*f},[f]);return E.createElement(dC,{size:a.size,style:{width:_a(a.size*a.ratio),height:_a(a.size)},onPointerDown:function(y){y.stopPropagation(),y.preventDefault()},onDoubleClick:function(y){if(y.stopPropagation(),y.preventDefault(),!!r.current){var b=r.current.getBoundingClientRect(),v=(y.clientX-b.left)/(a.size*a.ratio),S=(y.clientY-b.top)/(a.size*a.ratio);a.point(v,S)}},ref:r,"data-testid":"minimap"},f?a.nodes.map(function(p,y){return E.createElement(uC,{key:y,left:h(p.left),top:h(p.top),width:h(p.width),height:h(p.height)})}):null,E.createElement(fC,fi({},a.viewport,{start:a.start,containerWidth:f,translate:a.translate})))}function pC(a){return{render:function(r){if(r.data.type==="minimap")return E.createElement(hC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var mC=Object.freeze({__proto__:null,setup:pC}),u0,Co=20,yC=jn.div(u0||(u0=wn([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),Co,Co,function(a){return a.selected?"#ffd92c":"steelblue"},Co);function gC(a){var n=s1(function(u,f){a.translate(u,f)},a.pointer),r=a.position,s=r.x,l=r.y;return E.createElement(yC,{onPointerDown:function(f){f.stopPropagation(),f.preventDefault(),n.start(f),a.pointerdown()},onContextMenu:function(f){f.stopPropagation(),f.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-Co/2,"px"),left:"".concat(s-Co/2,"px")},"data-testid":"pin"})}function vC(a){function n(r,s){return E.createElement(E.Fragment,null,r.pins.map(function(l){return E.createElement(gC,fi({},l,{key:l.id,contextMenu:function(){var f;a==null||(f=a.contextMenu)===null||f===void 0||f.call(a,l.id)},translate:function(f,h){var p;a==null||(p=a.translate)===null||p===void 0||p.call(a,l.id,f,h)},pointerdown:function(){var f;a==null||(f=a.pointerdown)===null||f===void 0||f.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var u=s.data,f=l.parentScope(Do);if(u.type==="reroute-pins")return n(u.data,function(){return f.area.pointer})}}}var bC=Object.freeze({__proto__:null,setup:vC}),Td=Object.freeze({__proto__:null,classic:Kk,contextMenu:aC,minimap:mC,reroute:bC});function wC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=SC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,u=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw u}}}}function SC(a,n){if(a){if(typeof a=="string")return c0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c0(a,n):void 0}}function c0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function f0(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function nu(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?f0(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):f0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function xC(a,n,r){return n=Lt(n),za(a,w1()?Reflect.construct(n,r||[],Lt(a).constructor):n.apply(a,r))}function w1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w1=function(){return!!a})()}function EC(a,n,r,s){var l=jo(Lt(a.prototype),n,r);return typeof l=="function"?function(u){return l.apply(r,u)}:l}var kC=(function(a){function n(){for(var r,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var f=l[0];return ut(this,n),r=xC(this,n,["react-render"]),ze(r,"presets",[]),r.renderer=_k({createRoot:f?.createRoot}),r.addPipe(function(h){if(!h||bn(h)!=="object"||!("type"in h))return h;if(h.type==="unmount")r.unmount(h.data.element);else if(h.type==="render"){if("filled"in h.data&&h.data.filled)return h;if(r.mount(h.data.element,h))return nu(nu({},h),{},{data:nu(nu({},h.data),{},{filled:!0})})}return h}),r}return Hn(n,a),ct(n,[{key:"setParent",value:function(s){var l=this;EC(n,"setParent",this)([s]),this.presets.forEach(function(u){u.attach&&u.attach(l)})}},{key:"mount",value:function(s,l){var u=this.parentScope(),f=wC(this.presets),h;try{for(f.s();!(h=f.n()).done;){var p=h.value,y=p.render(l,this);if(y){var b=E.createElement(Dk,{rendered:function(){return void u.emit({type:"rendered",data:l.data})}},y);return this.renderer.mount(b,s),!0}}}catch(v){f.e(v)}finally{f.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(hs);function CC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function S1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S1=function(){return!!a})()}function TC(a,n,r){if(S1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,n);var l=new(a.bind.apply(a,s));return r&&No(l,r.prototype),l}function ah(a){var n=typeof Map=="function"?new Map:void 0;return ah=function(s){if(s===null||!CC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(s))return n.get(s);n.set(s,l)}function l(){return TC(s,arguments,Lt(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),No(l,s)},ah(a)}function OC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=NC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,u=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw u}}}}function NC(a,n){if(a){if(typeof a=="string")return d0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d0(a,n):void 0}}function d0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}var jC=(function(){function a(n){ut(this,a),ze(this,"setups",new Map),this.editor=n}return ct(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var n=at(we.mark(function s(l){var u=this,f,h,p,y,b,v,S,k,N,G,U,P;return we.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(f=this.setups.get(l),f){q.next=3;break}throw new Error("node is not initialized");case 3:return h=f.inputs(),p=this.editor.getConnections().filter(function(Z){return Z.target===l&&h.includes(Z.targetInput)}),y={},q.next=8,Promise.all(p.map((function(){var Z=at(we.mark(function ce(oe){return we.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.t0=oe,re.next=3,u.fetch(oe.source);case 3:return re.t1=re.sent,re.abrupt("return",{c:re.t0,sourceData:re.t1});case 5:case"end":return re.stop()}},ce)}));return function(ce){return Z.apply(this,arguments)}})()));case 8:b=q.sent,v=OC(b);try{for(v.s();!(S=v.n()).done;)k=S.value,N=k.c,G=k.sourceData,U=y[N.targetInput]?y[N.targetInput]:[],P=y,P[N.targetInput]=[].concat(ps(U),[G[N.sourceOutput]])}catch(Z){v.e(Z)}finally{v.f()}return q.abrupt("return",y);case 12:case"end":return q.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var n=at(we.mark(function s(l){var u=this,f,h,p,y;return we.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(f=this.setups.get(l),f){v.next=3;break}throw new Error("node is not initialized");case 3:return h=f.outputs(),v.next=6,f.data(function(){return u.fetchInputs(l)});case 6:if(p=v.sent,y=Object.keys(p),h.every(function(S){return y.includes(S)})){v.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(h.join('", "'),'". Got "').concat(y.join('", "'),'"'));case 10:return v.abrupt("return",p);case 11:case"end":return v.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()}])})(),AC=(function(){function a(n){ut(this,a),ze(this,"cache",new Map),this.onDelete=n}return ct(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function _C(a,n,r){return n=Lt(n),za(a,x1()?Reflect.construct(n,r||[],Lt(a).constructor):n.apply(a,r))}function x1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x1=function(){return!!a})()}var h0=(function(a){function n(){return ut(this,n),_C(this,n,["cancelled"])}return Hn(n,a),ct(n)})(ah(Error));function DC(){var a=!1;function n(p){if(a)throw new h0;return p}for(var r,s=new Promise(function(p,y){r=y,p()}),l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var h=u.reduce(function(p,y){var b=p.then(y).then(n);return b},s);return h.cancel=function(){a||r(new h0),a=!0},h}function MC(a,n,r){return n=Lt(n),za(a,E1()?Reflect.construct(n,r||[],Lt(a).constructor):n.apply(a,r))}function E1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E1=function(){return!!a})()}function RC(a,n,r,s){var l=jo(Lt(a.prototype),n,r);return typeof l=="function"?function(u){return l.apply(r,u)}:l}var zC=(function(a){function n(r){var s;return ut(this,n),s=MC(this,n,["dataflow-engine"]),ze(s,"cache",new AC(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return Hn(n,a),ct(n,[{key:"setParent",value:function(s){RC(n,"setParent",this)([s]),this.editor=this.parentScope($r),this.dataflow=new jC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,u=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:u.inputs,outputs:u.outputs,data:(function(){var f=at(we.mark(function p(y){var b,v;return we.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(b=l.cache.get(s.id),!b){k.next=3;break}return k.abrupt("return",b);case 3:return v=DC(function(){return y()},function(N){return s.data(N)}),l.cache.add(s.id,v),k.abrupt("return",v);case 6:case"end":return k.stop()}},p)}));function h(p){return f.apply(this,arguments)}return h})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var u=this.getDataflow().setups.get(s);if(!u)throw new Error("setup");var f=u.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(h){return h.source===s&&f.includes(h.sourceOutput)}).forEach(function(h){l.reset(h.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=at(we.mark(function l(u){var f;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=bn(u)==="object"?u.id:u,p.abrupt("return",this.getDataflow().fetchInputs(f));case 2:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=at(we.mark(function l(u){var f;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=bn(u)==="object"?u.id:u,p.abrupt("return",this.getDataflow().fetch(f));case 2:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(hs);const LC=!1,Ih=(...a)=>LC,p0=Nt.Socket.canConnect;Nt.Socket.canConnect=function(a,n){return Ih(`[Socket Check] ${a.name} <-> ${n.name}`),p0&&p0(a,n)||a.name==="any"||n.name==="any"?!0:a.name===n.name};Nt.Socket.prototype.canConnectTo=function(a){return Ih(`[Socket Instance Check] ${this.name} -> ${a.name}`),Nt.Socket.canConnect(this,a)};const fs={boolean:new Nt.Socket("boolean"),number:new Nt.Socket("number"),object:new Nt.Socket("object"),lightInfo:new Nt.Socket("light_info"),any:new Nt.Socket("any")};Object.values(fs).forEach(a=>{a.canConnectTo=function(n){return Ih(`[Socket Instance Direct] ${this.name} -> ${n.name}`),this.name===n.name||this.name==="any"||n.name==="any"}});let Xi=null;function $u(){if(Xi!==null)return Xi;const n=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return n?(Xi=n[1],console.log("[API] Running in HA ingress, base:",Xi)):(Xi="",console.log("[API] Running standalone, no base path")),Xi}function di(a){const n=$u(),r=a.startsWith("/")?a:"/"+a;return n+r}$u();const si="t2app-pin",Ou="t2app-pin-remember",k1=(a,n)=>{try{return a.getItem(n)}catch{return null}},au=(a,n,r)=>{try{return a.setItem(n,r),!0}catch{return!1}},To=(a,n)=>{try{return a.removeItem(n),!0}catch{return!1}},Nu=()=>k1(localStorage,Ou)==="true",as=()=>{const n=Nu()?localStorage:sessionStorage;return(k1(n,si)||"").trim()||null},C1=()=>{To(sessionStorage,si),To(localStorage,si),To(localStorage,Ou),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},m0=(a,{remember:n}={})=>{const r=(a||"").toString().trim(),s=typeof n=="boolean"?n:Nu();if(!r){C1(),typeof n=="boolean"&&au(localStorage,Ou,n?"true":"false");return}au(localStorage,Ou,s?"true":"false"),s?(au(localStorage,si,r),To(sessionStorage,si)):(au(sessionStorage,si,r),To(localStorage,si)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},es=async(a,n={})=>{const r=typeof a=="string"?di(a):a;return fetch(r,n)},ba=async(a,n={})=>{const r=as(),s=typeof a=="string"?di(a):a;if(!r)return fetch(s,n);const l=new Headers(n.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...n,headers:l})},y0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function BC(){const[a,n]=E.useState([]),[r,s]=E.useState(!1),[l,u]=E.useState(null),[f,h]=E.useState(null),[p,y]=E.useState(5e3),[b,v]=E.useState(null),S=E.useCallback(async()=>{s(!0),u(null);try{const P=await es("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:p})});if(!P.ok){const q=await P.json();throw new Error(q.error||`Scan failed (${P.status})`)}const K=await P.json();n(K.devices||[]),h(new Date)}catch(P){console.error("[Discovery] Scan error:",P),u(P.message)}finally{s(!1)}},[p]),k=P=>y0[P]||y0.generic,N=P=>P?new Date(P).toLocaleTimeString():"",U=(P=>{const K={};for(const q of P){const Z=q.type||"generic";K[Z]||(K[Z]=[]),K[Z].push(q)}return K})(a);return m.jsxs("div",{className:"discovery-panel",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),m.jsxs("select",{value:p,onChange:P=>y(Number(P.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[m.jsx("option",{value:3e3,children:"3 seconds"}),m.jsx("option",{value:5e3,children:"5 seconds"}),m.jsx("option",{value:1e4,children:"10 seconds"}),m.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),m.jsx("button",{onClick:S,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):m.jsx(m.Fragment,{children:" Scan Network"})})]}),l&&m.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),f&&m.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",f.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&f&&m.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[m.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),m.jsx("div",{children:"No devices found on your network."}),m.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(U).map(([P,K])=>{const q=k(P);return m.jsxs("div",{style:{marginBottom:"16px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[m.jsx("span",{style:{fontSize:"16px"},children:q.icon}),m.jsx("span",{style:{color:q.color,fontSize:"13px",fontWeight:500},children:q.label}),m.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:K.length})]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:K.map(Z=>m.jsxs("div",{style:{background:b===Z.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>v(b===Z.id?null:Z.id),children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:Z.name}),m.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[Z.ip,":",Z.port]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Z.configured?m.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):m.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),m.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:b===Z.id?"":""})]})]}),b===Z.id&&m.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[m.jsx("span",{children:"Host:"}),m.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:Z.host||"N/A"}),m.jsx("span",{children:"Source:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:Z.source==="mdns"?"mDNS/Bonjour":Z.source==="udp"?"UDP Broadcast":Z.source}),m.jsx("span",{children:"Discovered:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:N(Z.discoveredAt)}),Z.capabilities&&Z.capabilities.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:"Capabilities:"}),m.jsx("span",{style:{color:"#5fb3b3"},children:Z.capabilities.join(", ")})]}),Z.model&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:"Model:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:Z.model})]})]}),m.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[m.jsx("button",{onClick:ce=>{ce.stopPropagation(),window.open(`http://${Z.ip}:${Z.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),m.jsx("button",{onClick:ce=>{ce.stopPropagation(),navigator.clipboard.writeText(Z.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},Z.id))})]},P)}),m.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const ru=[{key:"primary",label:"Primary Accent Color",type:"color",default:"#5fb3b3"},{key:"background",label:"Node Background",type:"color",default:"#1e2428"},{key:"surface",label:"Node Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text Color",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"},{key:"success",label:"Success Color",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning Color",type:"color",default:"#d4a054"},{key:"error",label:"Error Color",type:"color",default:"#c75f5f"},{key:"borderOpacity",label:"Border Opacity (%)",type:"range",min:0,max:100,default:25}],UC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],g0=a=>{try{const n=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},v0=a=>{try{const n=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function $C({isOpen:a,onClose:n}){const[r,s]=E.useState({}),[l,u]=E.useState(!0),[f,h]=E.useState(!1),[p,y]=E.useState(null),[b,v]=E.useState(null),[S,k]=E.useState({}),[N,G]=E.useState({}),[U,P]=E.useState({}),[K,q]=E.useState({}),Z=E.useRef(null),[ce,oe]=E.useState(""),[$,re]=E.useState(()=>Nu()),[ie,F]=E.useState(()=>!!as()),[ue,_e]=E.useState(!1),[Me,qe]=E.useState(()=>{try{const D=localStorage.getItem("t2theme-overrides"),H=D?JSON.parse(D):{},fe={};return ru.forEach(de=>{fe[de.key]=de.default}),{...fe,...H}}catch{const D={};return ru.forEach(H=>{D[H.key]=H.default}),D}}),[Ve,C]=E.useState(!1),L={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[se,ge]=E.useState(()=>{try{const D=localStorage.getItem("t2category-overrides"),H=D?JSON.parse(D):{},fe={};for(const[de,Le]of Object.entries(L))fe[de]={...Le,...H[de]||{}};return fe}catch{return{...L}}}),[be,x]=E.useState(!1),M={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},A={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[X,me]=E.useState(()=>{try{const D=localStorage.getItem("t2socket-colors"),H=D?JSON.parse(D):{},fe={};for(const[de,Le]of Object.entries(M))fe[de]={...Le,...H[de]||{}};return fe}catch{return{...M}}}),[je,Ie]=E.useState(!1),[Be,Ue]=E.useState(!1),[kt,Ce]=E.useState(null),[Ge,V]=E.useState(!1),[ne,J]=E.useState(!1);E.useEffect(()=>{a&&(Ee(),G({Security:!0,"Home Assistant":!0}),P({}),re(Nu()),F(!!as()),oe(""))},[a]);const Ee=async()=>{u(!0),y(null);try{const D=await ba("/api/settings");if(!D.ok)throw new Error("Failed to fetch settings");const fe=(await D.json()).settings||{};s(fe);try{const de=await ba("/api/config");if(de.ok){const Le=await de.json();if(Le.success){V(Le.isAddon||!1),J(!0);const Ut=!fe.LOCATION_CITY,Xt=!fe.LOCATION_LATITUDE,Xe=!fe.LOCATION_LONGITUDE,Kt=!fe.LOCATION_TIMEZONE;(Ut||Xt||Xe||Kt)&&(s(At=>({...At,...Ut&&Le.locationName?{LOCATION_CITY:Le.locationName}:{},...Xt&&Le.latitude?{LOCATION_LATITUDE:String(Le.latitude)}:{},...Xe&&Le.longitude?{LOCATION_LONGITUDE:String(Le.longitude)}:{},...Kt&&Le.timezone?{LOCATION_TIMEZONE:Le.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(de){console.log("[Settings] Could not fetch HA config for location auto-fill:",de.message)}}catch(D){y("Failed to load settings: "+D.message)}finally{u(!1)}},ye=async()=>{h(!0),y(null),v(null);try{const D=await ba("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!D.ok){const H=await D.json();throw new Error(H.error||"Failed to save settings")}v("Settings saved! Some changes may require a server restart."),setTimeout(()=>v(null),5e3)}catch(D){y("Failed to save: "+D.message)}finally{h(!1)}},I=(D,H)=>{s(fe=>({...fe,[D]:H}))},_=async()=>{const D=r.LOCATION_CITY;if(!D||D.trim().length<2){Ce("Please enter a city name first");return}Ue(!0),Ce(null);try{const H=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(D)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!H.ok)throw new Error("Geocoding service unavailable");const fe=await H.json();if(fe.length===0){Ce(`Could not find "${D}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const de=fe[0],Le=parseFloat(de.lat).toFixed(4),Ut=parseFloat(de.lon).toFixed(4),Xt=de.address?[de.address.city||de.address.town||de.address.village||de.name,de.address.state,de.address.country].filter(Boolean).join(", "):de.display_name.split(",").slice(0,3).join(",");let Xe="UTC";const Kt=de.address?.state?.toLowerCase()||"",At=de.address?.country?.toLowerCase()||"";if(At.includes("portugal"))Xe="Europe/Lisbon";else if(At.includes("spain"))Xe="Europe/Madrid";else if(At.includes("france"))Xe="Europe/Paris";else if(At.includes("germany"))Xe="Europe/Berlin";else if(At.includes("italy"))Xe="Europe/Rome";else if(At.includes("united kingdom")||At.includes("ireland"))Xe="Europe/London";else if(At.includes("netherlands"))Xe="Europe/Amsterdam";else if(At.includes("belgium"))Xe="Europe/Brussels";else if(At.includes("australia"))Xe="Australia/Sydney";else if(At.includes("japan"))Xe="Asia/Tokyo";else if(At.includes("china"))Xe="Asia/Shanghai";else if(At.includes("india"))Xe="Asia/Kolkata";else if(At.includes("brazil"))Xe="America/Sao_Paulo";else if(At.includes("canada"))Kt.includes("british columbia")?Xe="America/Vancouver":Kt.includes("alberta")?Xe="America/Edmonton":Kt.includes("saskatchewan")?Xe="America/Regina":Kt.includes("manitoba")?Xe="America/Winnipeg":Kt.includes("ontario")?Xe="America/Toronto":Kt.includes("quebec")?Xe="America/Montreal":Xe="America/Toronto";else if(At.includes("united states")||At.includes("usa"))Kt.includes("hawaii")?Xe="Pacific/Honolulu":Kt.includes("alaska")?Xe="America/Anchorage":["california","nevada","oregon","washington"].some(Ct=>Kt.includes(Ct))?Xe="America/Los_Angeles":["arizona"].some(Ct=>Kt.includes(Ct))?Xe="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(Ct=>Kt.includes(Ct))?Xe="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(Ct=>Kt.includes(Ct))?Xe="America/Chicago":Xe="America/New_York";else{const Ct=parseFloat(Ut);Ct>=-125&&Ct<-115?Xe="America/Los_Angeles":Ct>=-115&&Ct<-102?Xe="America/Denver":Ct>=-102&&Ct<-87?Xe="America/Chicago":Ct>=-87&&Ct<-67?Xe="America/New_York":Ct>=-10&&Ct<3?Xe="Europe/London":Ct>=3&&Ct<15?Xe="Europe/Paris":Ct>=15&&Ct<30&&(Xe="Europe/Berlin")}s(Ct=>({...Ct,LOCATION_CITY:Xt,LOCATION_LATITUDE:Le,LOCATION_LONGITUDE:Ut,LOCATION_TIMEZONE:Xe})),v(`Found: ${Xt} (${Le}, ${Ut})`),setTimeout(()=>v(null),5e3)}catch(H){Ce("Search failed: "+H.message)}finally{Ue(!1)}},ee=(D,H)=>{qe(fe=>({...fe,[D]:H})),C(!0)},ve=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(Me)),v("Theme saved! Refresh the page to apply changes."),C(!1),setTimeout(()=>v(null),5e3)}catch(D){y("Failed to save theme: "+D.message)}},ke=()=>{const D={};ru.forEach(H=>{D[H.key]=H.default}),qe(D),localStorage.removeItem("t2theme-overrides"),v("Theme reset to defaults! Refresh the page to apply."),C(!1),setTimeout(()=>v(null),5e3)},bt=(D,H,fe)=>{ge(de=>({...de,[D]:{...de[D],[H]:fe}})),x(!0)},xe=D=>{const H=parseInt(D.slice(1,3),16),fe=parseInt(D.slice(3,5),16),de=parseInt(D.slice(5,7),16);return`${H}, ${fe}, ${de}`},We={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},Qe=D=>{const H=document.documentElement;for(const[fe,de]of Object.entries(D)){const Le=We[fe];Le&&(H.style.setProperty(`--node-${Le}-color`,de.accent),H.style.setProperty(`--node-${Le}-color-rgb`,xe(de.accent)),de.background&&H.style.setProperty(`--node-${Le}-bg`,de.background))}},Bt=()=>{try{const D={};for(const[H,fe]of Object.entries(se)){const de=L[H],Le={};fe.accent!==de.accent&&(Le.accent=fe.accent),fe.background!==de.background&&(Le.background=fe.background),Object.keys(Le).length>0&&(D[H]=Le)}Object.keys(D).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(D)):localStorage.removeItem("t2category-overrides"),Qe(se),v("Category colors applied!"),x(!1),setTimeout(()=>v(null),3e3)}catch(D){y("Failed to save category colors: "+D.message)}},De=()=>{ge({...L}),localStorage.removeItem("t2category-overrides"),Qe(L),v("Category colors reset to defaults!"),x(!1),setTimeout(()=>v(null),3e3)},rt=(D,H)=>{me(fe=>({...fe,[D]:{...fe[D],color:H}})),Ie(!0)},ht=(D,H=20)=>{const fe=parseInt(D.slice(1),16),de=Math.max(0,(fe>>16)-Math.round(255*H/100)),Le=Math.max(0,(fe>>8&255)-Math.round(255*H/100)),Ut=Math.max(0,(fe&255)-Math.round(255*H/100));return`#${(1<<24|de<<16|Le<<8|Ut).toString(16).slice(1)}`},pn=(D,H=20)=>{const fe=parseInt(D.slice(1),16),de=Math.min(255,(fe>>16)+Math.round(255*H/100)),Le=Math.min(255,(fe>>8&255)+Math.round(255*H/100)),Ut=Math.min(255,(fe&255)+Math.round(255*H/100));return`#${(1<<24|de<<16|Le<<8|Ut).toString(16).slice(1)}`},Ft=D=>{const H=document.documentElement;for(const[fe,de]of Object.entries(D)){const Le=A[fe];Le&&(H.style.setProperty(`--socket-${Le}-color`,de.color),H.style.setProperty(`--socket-${Le}-dark`,ht(de.color,15)),H.style.setProperty(`--socket-${Le}-border`,pn(de.color,20)),H.style.setProperty(`--socket-${Le}-rgb`,xe(de.color)))}},jt=()=>{try{const D={};for(const[H,fe]of Object.entries(X)){const de=M[H];fe.color!==de.color&&(D[H]={color:fe.color})}Object.keys(D).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(D)):localStorage.removeItem("t2socket-colors"),Ft(X),v("Socket colors applied!"),Ie(!1),setTimeout(()=>v(null),3e3)}catch(D){y("Failed to save socket colors: "+D.message)}},Ye=()=>{me({...M}),localStorage.removeItem("t2socket-colors"),Ft(M),v("Socket colors reset to defaults!"),Ie(!1),setTimeout(()=>v(null),3e3)},Ze=D=>{G(H=>({...H,[D]:!H[D]}))},mt=D=>{k(H=>({...H,[D]:!H[D]}))},cn=async D=>{q(H=>({...H,[D]:!0})),P(H=>({...H,[D]:null}));try{const fe=await(await ba("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:D,settings:r})})).json();P(de=>({...de,[D]:{success:fe.success,message:fe.message||(fe.success?"Connection successful!":"Connection failed"),details:fe.details}}))}catch(H){P(fe=>({...fe,[D]:{success:!1,message:"Test failed: "+H.message}}))}finally{q(H=>({...H,[D]:!1}))}},An=()=>{const D={version:"1.0",timestamp:new Date().toISOString(),settings:r},H=new Blob([JSON.stringify(D,null,2)],{type:"application/json"}),fe=URL.createObjectURL(H),de=document.createElement("a");de.href=fe,de.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(fe),v("Settings exported successfully!"),setTimeout(()=>v(null),3e3)},Sn=D=>{const H=D.target.files?.[0];if(!H)return;const fe=new FileReader;fe.onload=de=>{try{const Le=JSON.parse(de.target.result);if(!Le.settings||typeof Le.settings!="object")throw new Error("Invalid backup file format");s(Ut=>({...Ut,...Le.settings})),v(`Imported ${Object.keys(Le.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>v(null),5e3)}catch(Le){y("Failed to import backup: "+Le.message)}},fe.readAsText(H),D.target.value=""};return a?kh.createPortal(m.jsx("div",{className:"settings-modal-overlay",onClick:n,children:m.jsxs("div",{className:"settings-modal",onClick:D=>D.stopPropagation(),children:[m.jsxs("div",{className:"settings-header",children:[m.jsx("h2",{children:" Settings & API Keys"}),m.jsx("button",{className:"settings-close-btn",onClick:n,children:""})]}),m.jsx("div",{className:"settings-content",children:l?m.jsx("div",{className:"settings-loading",children:"Loading settings..."}):m.jsxs(m.Fragment,{children:[p&&m.jsx("div",{className:"settings-error",children:p}),b&&m.jsx("div",{className:"settings-success",children:b}),m.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>Ze("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[m.jsxs("span",{children:[N.Security?"":""," Security (This Device)"]}),ie&&m.jsxs("span",{style:{fontSize:"10px",color:$?"#00c896":"#ffaa00"},children:[" ",$?"REMEMBERED":"SESSION"]})]}),N.Security&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),m.jsxs("div",{className:"settings-field",children:[m.jsxs("label",{className:"settings-label",children:["App PIN",m.jsx("button",{className:"settings-show-btn",onClick:()=>_e(D=>!D),type:"button",children:ue?" Hide":" Show"})]}),m.jsx("input",{type:ue?"text":"password",className:"settings-input",value:ce,onChange:D=>oe(D.target.value),placeholder:ie?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[m.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[m.jsx("input",{type:"checkbox",checked:$,onChange:D=>{const H=D.target.checked;re(H);const fe=as();fe&&m0(fe,{remember:H})}}),"Remember PIN on this device"]}),m.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[m.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const D=ce.trim();D&&(m0(D,{remember:$}),F(!0),oe(""),(async()=>{try{const H=await ba("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:D}})});if(!H.ok){const fe=await H.text();throw new Error(fe||`HTTP ${H.status}`)}v("PIN saved (server + this device)."),setTimeout(()=>v(null),3e3)}catch{v("PIN saved on this device. Server PIN update failed."),setTimeout(()=>v(null),4e3)}finally{Ee()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!ce.trim(),children:" Save PIN"}),m.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{C1(),F(!1),oe(""),re(!1),v("PIN cleared."),setTimeout(()=>v(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!ie,children:"Clear"})]})]}),m.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:ie?`PIN is saved (${$?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),m.jsxs("div",{className:"settings-backup-section",children:[m.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),m.jsxs("div",{className:"settings-backup-buttons",children:[m.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:An,children:" Export Backup"}),m.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>Z.current?.click(),children:" Import Backup"}),m.jsx("input",{ref:Z,type:"file",accept:".json",style:{display:"none"},onChange:Sn})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>Ze("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[m.jsxs("span",{children:[N.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&m.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),N.Performance&&m.jsxs("div",{className:"settings-category-content",children:[m.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",m.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),m.jsx("br",{}),m.jsx("br",{}),"Performance Mode disables:",m.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[m.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),m.jsx("li",{children:"Complex glow shadows"}),m.jsx("li",{children:"Infinite pulse/glow animations"}),m.jsx("li",{children:"Transition effects on nodes"})]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),m.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),m.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[m.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:D=>{window.setPerformanceMode?.(D.target.checked),G(H=>({...H}))},style:{opacity:0,width:0,height:0}}),m.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:m.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),m.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsx("div",{className:"settings-category-header",onClick:()=>Ze("Discovery"),children:m.jsxs("span",{children:[N.Discovery?"":""," Network Device Discovery"]})}),N.Discovery&&m.jsx("div",{className:"settings-category-content",children:m.jsx(BC,{})})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>Ze("Theme"),children:[m.jsxs("span",{children:[N.Theme?"":""," Node Theme Settings"]}),Ve&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.Theme&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Theme settings are stored locally. Refresh the page after saving to apply changes."}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:ru.map(D=>m.jsxs("div",{className:"settings-field",style:{marginBottom:"8px"},children:[m.jsx("label",{className:"settings-label",style:{fontSize:"10px"},children:D.label}),D.type==="color"?m.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("input",{type:"color",value:Me[D.key]||D.default,onChange:H=>ee(D.key,H.target.value),style:{width:"40px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("input",{type:"text",value:Me[D.key]||D.default,onChange:H=>ee(D.key,H.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"11px"}})]}):D.type==="range"?m.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("input",{type:"range",min:D.min,max:D.max,value:Me[D.key]||D.default,onChange:H=>ee(D.key,parseInt(H.target.value)),style:{flex:1}}),m.jsxs("span",{style:{minWidth:"35px",textAlign:"right",color:"#c5cdd3",fontSize:"12px"},children:[Me[D.key]||D.default,"%"]})]}):null]},D.key))}),m.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:Me.background,borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(Me.borderOpacity||25)/100})`},children:[m.jsx("div",{style:{fontSize:"10px",color:Me.textMuted,marginBottom:"8px"},children:"PREVIEW"}),m.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[m.jsx("div",{style:{padding:"8px 12px",background:Me.surface,color:Me.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),m.jsx("div",{style:{padding:"8px 12px",background:Me.surfaceLight,color:Me.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),m.jsx("span",{style:{color:Me.primary},children:"Primary"}),m.jsx("span",{style:{color:Me.success},children:"Success"}),m.jsx("span",{style:{color:Me.warning},children:"Warning"}),m.jsx("span",{style:{color:Me.error},children:"Error"})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:ke,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:ve,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Theme"})]})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>Ze("CategoryColors"),children:[m.jsxs("span",{children:[N.CategoryColors?"":""," Category Accent Colors"]}),be&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.CategoryColors&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(se).map(([D,H])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:H.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${H.accent}55`},children:[m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[m.jsx("input",{type:"color",value:H.accent,onChange:fe=>bt(D,"accent",fe.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[m.jsx("input",{type:"color",value:H.background||"#0a0f14",onChange:fe=>bt(D,"background",fe.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),m.jsx("div",{style:{flex:1,minWidth:0},children:m.jsxs("div",{style:{fontSize:"11px",color:H.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[H.icon," ",D]})})]},D))}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:De,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:Bt,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>Ze("SocketColors"),children:[m.jsxs("span",{children:[N.SocketColors?"":""," Socket Colors"]}),je&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.SocketColors&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),m.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[m.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx("span",{children:""})," Preview Node"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(X).slice(0,3).map(([D,H])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${H.color}, ${g0(H.color)})`,border:`2px solid ${v0(H.color)}`,boxShadow:`0 0 8px ${H.color}80`}}),m.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:D})]},D))}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(X).slice(3).map(([D,H])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:D}),m.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${H.color}, ${g0(H.color)})`,border:`2px solid ${v0(H.color)}`,boxShadow:`0 0 8px ${H.color}80`}})]},D))})]})]}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(X).map(([D,H])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${H.color}55`},children:[m.jsx("input",{type:"color",value:H.color,onChange:fe=>rt(D,fe.target.value),title:`${D} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsxs("div",{style:{fontSize:"12px",color:H.color,fontWeight:"600"},children:[H.icon," ",D]}),m.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:H.description})]})]},D))}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:Ye,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:jt,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),UC.map(D=>m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>Ze(D.category),children:[m.jsxs("span",{children:[N[D.category]?"":"",D.icon," ",D.category]}),D.testable&&N[D.category]&&m.jsx("button",{className:`settings-test-btn ${U[D.testable]?.success?"success":U[D.testable]?.success===!1?"error":""}`,onClick:H=>{H.stopPropagation(),cn(D.testable)},disabled:K[D.testable],children:K[D.testable]?" Testing...":" Test Connection"})]}),N[D.category]&&m.jsxs("div",{className:"settings-category-content",children:[U[D.testable]&&m.jsxs("div",{className:`settings-test-result ${U[D.testable].success?"success":"error"}`,children:[U[D.testable].success?"":""," ",U[D.testable].message,U[D.testable].details&&m.jsx("div",{className:"settings-test-details",children:U[D.testable].details})]}),D.category==="Location"&&m.jsxs("div",{className:"settings-location-search",children:[ne&&Ge&&m.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),m.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),m.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:H=>I("LOCATION_CITY",H.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:H=>{H.key==="Enter"&&_()}}),m.jsx("button",{className:"settings-test-btn",onClick:_,disabled:Be,style:{whiteSpace:"nowrap"},children:Be?" Searching...":" Search City"})]}),kt&&m.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",kt]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[m.jsxs("div",{className:"settings-field",children:[m.jsx("label",{className:"settings-label",children:"Latitude"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:H=>I("LOCATION_LATITUDE",H.target.value),placeholder:"32.7767"})]}),m.jsxs("div",{className:"settings-field",children:[m.jsx("label",{className:"settings-label",children:"Longitude"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:H=>I("LOCATION_LONGITUDE",H.target.value),placeholder:"-96.7970"})]})]}),m.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[m.jsx("label",{className:"settings-label",children:"Timezone"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:H=>I("LOCATION_TIMEZONE",H.target.value),placeholder:"America/Chicago"}),m.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),D.category!=="Location"&&D.settings.map(H=>m.jsxs("div",{className:"settings-field",children:[m.jsxs("label",{className:"settings-label",children:[H.label,H.isSecret&&m.jsx("button",{className:"settings-show-btn",onClick:()=>mt(H.key),type:"button",children:S[H.key]?" Hide":" Show"})]}),H.type==="select"?m.jsxs("select",{className:"settings-input",value:r[H.key]||"",onChange:fe=>I(H.key,fe.target.value),children:[m.jsx("option",{value:"",children:"Select..."}),H.options.map(fe=>m.jsx("option",{value:fe,children:fe},fe))]}):m.jsx("input",{type:H.isSecret&&!S[H.key]?"password":"text",className:"settings-input",value:r[H.key]||"",onChange:fe=>I(H.key,fe.target.value),placeholder:H.placeholder}),m.jsx("span",{className:"settings-key-hint",children:H.key})]},H.key))]})]},D.category))]})}),m.jsxs("div",{className:"settings-footer",children:[m.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:n,children:"Cancel"}),m.jsx("button",{className:"settings-btn settings-btn-primary",onClick:ye,disabled:f||l,children:f?"Saving...":" Save Settings"})]})]})}),document.body):null}const IC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function HC({isOpen:a,onClose:n}){if(E.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,n]),!a)return null;const r=s=>{s.target===s.currentTarget&&n()};return kh.createPortal(m.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:m.jsxs("div",{className:"shortcuts-modal",children:[m.jsxs("div",{className:"shortcuts-modal-header",children:[m.jsx("h2",{children:" Keyboard Shortcuts"}),m.jsx("button",{className:"shortcuts-close-btn",onClick:n,children:" Close"})]}),m.jsx("div",{className:"shortcuts-modal-body",children:IC.map((s,l)=>m.jsxs("div",{className:"shortcuts-section",children:[m.jsx("h3",{children:s.category}),m.jsx("div",{className:"shortcuts-list",children:s.items.map((u,f)=>m.jsxs("div",{className:"shortcut-row",children:[m.jsx("div",{className:"shortcut-keys",children:u.keys.map((h,p)=>m.jsxs(xa.Fragment,{children:[m.jsx("kbd",{children:h}),p<u.keys.length-1&&m.jsx("span",{className:"key-separator",children:"+"})]},p))}),m.jsx("div",{className:"shortcut-action",children:u.action})]},f))})]},l))}),m.jsx("div",{className:"shortcuts-modal-footer",children:m.jsxs("p",{children:["Press ",m.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function VC({isExpanded:a,onToggle:n}){const[r,s]=E.useState([]),[l,u]=E.useState([]),[f,h]=E.useState(!0),[p,y]=E.useState(!1),[b,v]=E.useState(null),[S,k]=E.useState(!1),[N,G]=E.useState(null),[U,P]=E.useState(null),[K,q]=E.useState({username:"",password:"",name:""}),[Z,ce]=E.useState({username:"",password:""}),[oe,$]=E.useState(""),[re,ie]=E.useState(5e3),[F,ue]=E.useState(null),_e=E.useRef(null),[Me,qe]=E.useState({});E.useEffect(()=>(Ve(),()=>{_e.current&&clearInterval(_e.current)}),[]),E.useEffect(()=>(_e.current&&clearInterval(_e.current),a&&r.length>0&&re>0&&(_e.current=setInterval(()=>{qe(A=>{const X={...A};return r.forEach(me=>{X[me.ip]=Date.now()}),X})},re)),()=>{_e.current&&clearInterval(_e.current)}),[a,r,re]);const Ve=async()=>{try{h(!0);const A=await es("/api/cameras");if(A.ok){const X=await A.json();s(X.cameras||[]),X.defaultCredentials&&ce(me=>({...me,username:X.defaultCredentials.username||""}))}}catch{v("Failed to load cameras")}finally{h(!1)}},C=async()=>{y(!0),v(null);try{const A=await es("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(A.ok){const X=await A.json();if(X.found&&X.found.length>0){const me=r.map(Ie=>Ie.ip),je=X.found.filter(Ie=>!me.includes(Ie.ip));u(je),window.T2Toast&&(je.length>0?window.T2Toast.success(`Found ${je.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${X.found.length} cameras, all already configured.`))}else u([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{v("Discovery failed")}finally{y(!1)}},L=async()=>{try{await es("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{v("Failed to save credentials")}},se=async(A,X,me)=>{try{await es("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:A,name:X||`Camera ${A.split(".").pop()}`,username:me?.username||Z.username,password:me?.password||Z.password})}),u(je=>je.filter(Ie=>Ie.ip!==A)),G(null),$(""),await Ve(),window.T2Toast&&window.T2Toast.success(`Camera ${A} added!`)}catch{v("Failed to add camera")}},ge=async A=>{try{await fetch(`/api/cameras/${A}`,{method:"DELETE"}),await Ve(),F===A&&ue(null)}catch{v("Failed to remove camera")}},be=async()=>{if(U)try{await es("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:U,name:K.name,username:K.username,password:K.password})}),P(null),qe(A=>({...A,[U]:Date.now()})),await Ve(),window.T2Toast&&window.T2Toast.success(`Camera ${U} updated!`)}catch{v("Failed to update camera")}},x={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},M=A=>{const X=Me[A]||Date.now();return`/api/cameras/snapshot/${A}?t=${X}`};return m.jsxs("div",{style:x.container,children:[m.jsxs("div",{style:x.header,onClick:n,children:[m.jsxs("div",{style:x.title,children:[m.jsx("span",{style:x.icon,children:""}),m.jsx("span",{children:"Cameras"}),r.length>0&&m.jsx("span",{style:x.badge,children:r.length})]}),m.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&m.jsxs("div",{style:x.content,children:[m.jsxs("div",{style:x.toolbar,children:[m.jsx("button",{style:{...x.btn,...p?x.btnActive:{}},onClick:C,disabled:p,children:p?" Scanning...":" Discover"}),m.jsx("button",{style:{...x.btn,...S?x.btnActive:{}},onClick:()=>k(!S),children:" Settings"}),m.jsxs("select",{style:x.refreshSelect,value:re,onChange:A=>ie(Number(A.target.value)),title:"Refresh interval",children:[m.jsx("option",{value:0,children:"Manual"}),m.jsx("option",{value:2e3,children:"2s"}),m.jsx("option",{value:5e3,children:"5s"}),m.jsx("option",{value:1e4,children:"10s"}),m.jsx("option",{value:3e4,children:"30s"})]})]}),S&&m.jsxs("div",{style:x.settings,children:[m.jsxs("div",{style:x.inputGroup,children:[m.jsx("label",{style:x.label,children:"Select Camera to Configure"}),m.jsxs("select",{style:{...x.input,cursor:"pointer"},value:U||"",onChange:A=>{const X=A.target.value;if(!X){P(null),q({username:"",password:"",name:""});return}const me=r.find(je=>je.ip===X);me?(P(X),q({name:me.name||"",username:me.username||"",password:""})):(P(X),q({name:`Camera ${X.split(".").pop()}`,username:Z.username||"",password:Z.password||""}))},children:[m.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&m.jsx("optgroup",{label:" Configured Cameras",children:r.map(A=>m.jsxs("option",{value:A.ip,children:[A.name," (",A.ip,")"]},A.ip))}),l.length>0&&m.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(A=>m.jsxs("option",{value:A.ip,children:[A.ip," (Ports: ",A.ports.join(", "),")"]},A.ip))})]})]}),U&&m.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[m.jsxs("div",{style:x.inputGroup,children:[m.jsx("label",{style:x.label,children:"Camera Name"}),m.jsx("input",{type:"text",style:x.input,value:K.name,onChange:A=>q(X=>({...X,name:A.target.value})),placeholder:"Front Door"})]}),m.jsxs("div",{style:x.inputGroup,children:[m.jsx("label",{style:x.label,children:"Username"}),m.jsx("input",{type:"text",style:x.input,value:K.username,onChange:A=>q(X=>({...X,username:A.target.value})),placeholder:"admin"})]}),m.jsxs("div",{style:x.inputGroup,children:[m.jsxs("label",{style:x.label,children:["Password ",r.find(A=>A.ip===U)?"(leave blank to keep current)":""]}),m.jsx("input",{type:"password",style:x.input,value:K.password,onChange:A=>q(X=>({...X,password:A.target.value})),placeholder:""})]}),m.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:m.jsx("button",{style:{...x.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(X=>X.ip===U)?se(U,K.name,K):be()},children:r.find(A=>A.ip===U)?" Save Changes":" Add Camera"})})]}),m.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[m.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("input",{type:"text",style:{...x.input,flex:1},value:Z.username,onChange:A=>ce(X=>({...X,username:A.target.value})),placeholder:"Username"}),m.jsx("input",{type:"password",style:{...x.input,flex:1},value:Z.password,onChange:A=>ce(X=>({...X,password:A.target.value})),placeholder:"Password"}),m.jsx("button",{style:x.btn,onClick:L,title:"Save as default",children:""})]})]}),m.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[m.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("input",{type:"text",id:"addCameraIp",style:{...x.input,flex:1},placeholder:"192.168.1.100",onKeyDown:A=>{if(A.key==="Enter"&&A.target.value){const X=A.target.value;!l.find(me=>me.ip===X)&&!r.find(me=>me.ip===X)&&u(me=>[...me,{ip:X,ports:["manual"]}]),P(X),q({name:`Camera ${X.split(".").pop()}`,username:Z.username||"",password:Z.password||""}),A.target.value=""}}}),m.jsx("button",{style:x.btn,onClick:()=>{const A=document.getElementById("addCameraIp"),X=A?.value;X&&(!l.find(me=>me.ip===X)&&!r.find(me=>me.ip===X)&&u(me=>[...me,{ip:X,ports:["manual"]}]),P(X),q({name:`Camera ${X.split(".").pop()}`,username:Z.username||"",password:Z.password||""}),A.value="")},children:"Configure"})]})]})]}),b&&m.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",b]}),f?m.jsx("div",{style:x.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?m.jsxs("div",{style:x.emptyState,children:[m.jsx("p",{children:"No cameras configured"}),m.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):m.jsx("div",{style:x.grid,children:r.map(A=>m.jsxs("div",{style:{...x.cameraCard,...F===A.ip?x.cameraCardSelected:{}},onClick:()=>ue(A.ip),children:[m.jsx("img",{src:M(A.ip),alt:A.name,style:x.cameraImage,onError:X=>{X.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),m.jsxs("div",{style:x.cameraInfo,children:[m.jsx("span",{style:x.cameraName,title:A.ip,children:A.name}),m.jsxs("div",{style:{display:"flex",gap:"4px"},children:[m.jsx("button",{style:{...x.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:X=>{X.stopPropagation(),k(!0),P(A.ip),q({name:A.name||"",username:A.username||"",password:""})},title:"Edit credentials",children:""}),m.jsx("button",{style:x.deleteBtn,onClick:X=>{X.stopPropagation(),ge(A.ip)},title:"Remove camera",children:""})]})]})]},A.ip))})]}),F&&m.jsxs("div",{style:x.fullView,onClick:()=>ue(null),children:[m.jsx("img",{src:M(F),alt:"Camera feed",style:x.fullImage}),m.jsx("button",{style:x.closeBtn,onClick:()=>ue(null),children:" Close"}),m.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(A=>A.ip===F)?.name||F})]})]})}const Ma=Object.create(null);Ma.open="0";Ma.close="1";Ma.ping="2";Ma.pong="3";Ma.message="4";Ma.upgrade="5";Ma.noop="6";const yu=Object.create(null);Object.keys(Ma).forEach(a=>{yu[Ma[a]]=a});const rh={type:"error",data:"parser error"},T1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",O1=typeof ArrayBuffer=="function",N1=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Hh=({type:a,data:n},r,s)=>T1&&n instanceof Blob?r?s(n):b0(n,s):O1&&(n instanceof ArrayBuffer||N1(n))?r?s(n):b0(new Blob([n]),s):s(Ma[a]+(n||"")),b0=(a,n)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];n("b"+(s||""))},r.readAsDataURL(a)};function w0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let Od;function qC(a,n){if(T1&&a.data instanceof Blob)return a.data.arrayBuffer().then(w0).then(n);if(O1&&(a.data instanceof ArrayBuffer||N1(a.data)))return n(w0(a.data));Hh(a,!1,r=>{Od||(Od=new TextEncoder),n(Od.encode(r))})}const S0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<S0.length;a++)bo[S0.charCodeAt(a)]=a;const YC=a=>{let n=a.length*.75,r=a.length,s,l=0,u,f,h,p;a[a.length-1]==="="&&(n--,a[a.length-2]==="="&&n--);const y=new ArrayBuffer(n),b=new Uint8Array(y);for(s=0;s<r;s+=4)u=bo[a.charCodeAt(s)],f=bo[a.charCodeAt(s+1)],h=bo[a.charCodeAt(s+2)],p=bo[a.charCodeAt(s+3)],b[l++]=u<<2|f>>4,b[l++]=(f&15)<<4|h>>2,b[l++]=(h&3)<<6|p&63;return y},GC=typeof ArrayBuffer=="function",Vh=(a,n)=>{if(typeof a!="string")return{type:"message",data:j1(a,n)};const r=a.charAt(0);return r==="b"?{type:"message",data:ZC(a.substring(1),n)}:yu[r]?a.length>1?{type:yu[r],data:a.substring(1)}:{type:yu[r]}:rh},ZC=(a,n)=>{if(GC){const r=YC(a);return j1(r,n)}else return{base64:!0,data:a}},j1=(a,n)=>{switch(n){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},A1="",PC=(a,n)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((u,f)=>{Hh(u,!1,h=>{s[f]=h,++l===r&&n(s.join(A1))})})},FC=(a,n)=>{const r=a.split(A1),s=[];for(let l=0;l<r.length;l++){const u=Vh(r[l],n);if(s.push(u),u.type==="error")break}return s};function XC(){return new TransformStream({transform(a,n){qC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const u=new DataView(l.buffer);u.setUint8(0,126),u.setUint16(1,s)}else{l=new Uint8Array(9);const u=new DataView(l.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),n.enqueue(l),n.enqueue(r)})}})}let Nd;function iu(a){return a.reduce((n,r)=>n+r.length,0)}function su(a,n){if(a[0].length===n)return a.shift();const r=new Uint8Array(n);let s=0;for(let l=0;l<n;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function KC(a,n){Nd||(Nd=new TextDecoder);const r=[];let s=0,l=-1,u=!1;return new TransformStream({transform(f,h){for(r.push(f);;){if(s===0){if(iu(r)<1)break;const p=su(r,1);u=(p[0]&128)===128,l=p[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(iu(r)<2)break;const p=su(r,2);l=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),s=3}else if(s===2){if(iu(r)<8)break;const p=su(r,8),y=new DataView(p.buffer,p.byteOffset,p.length),b=y.getUint32(0);if(b>Math.pow(2,21)-1){h.enqueue(rh);break}l=b*Math.pow(2,32)+y.getUint32(4),s=3}else{if(iu(r)<l)break;const p=su(r,l);h.enqueue(Vh(u?p:Nd.decode(p),n)),s=0}if(l===0||l>a){h.enqueue(rh);break}}}})}const _1=4;function un(a){if(a)return QC(a)}function QC(a){for(var n in un.prototype)a[n]=un.prototype[n];return a}un.prototype.on=un.prototype.addEventListener=function(a,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(n),this};un.prototype.once=function(a,n){function r(){this.off(a,r),n.apply(this,arguments)}return r.fn=n,this.on(a,r),this};un.prototype.off=un.prototype.removeListener=un.prototype.removeAllListeners=un.prototype.removeEventListener=function(a,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===n||s.fn===n){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};un.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,n)}return this};un.prototype.emitReserved=un.prototype.emit;un.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};un.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Iu=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),la=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),JC="arraybuffer";function D1(a,...n){return n.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const WC=la.setTimeout,eT=la.clearTimeout;function Hu(a,n){n.useNativeTimers?(a.setTimeoutFn=WC.bind(la),a.clearTimeoutFn=eT.bind(la)):(a.setTimeoutFn=la.setTimeout.bind(la),a.clearTimeoutFn=la.clearTimeout.bind(la))}const tT=1.33;function nT(a){return typeof a=="string"?aT(a):Math.ceil((a.byteLength||a.size)*tT)}function aT(a){let n=0,r=0;for(let s=0,l=a.length;s<l;s++)n=a.charCodeAt(s),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(s++,r+=4);return r}function M1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function rT(a){let n="";for(let r in a)a.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return n}function iT(a){let n={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let u=r[s].split("=");n[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return n}class sT extends Error{constructor(n,r,s){super(n),this.description=r,this.context=s,this.type="TransportError"}}class qh extends un{constructor(n){super(),this.writable=!1,Hu(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,s){return super.emitReserved("error",new sT(n,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=Vh(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=rT(n);return r.length?"?"+r:""}}class oT extends qh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};FC(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,PC(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=M1()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let R1=!1;try{R1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const lT=R1;function uT(){}class cT extends oT{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||s!==n.port}}doWrite(n,r){const s=this.request({method:"POST",data:n});s.on("success",r),s.on("error",(l,u)=>{this.onError("xhr post error",l,u)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=n}}class Da extends un{constructor(n,r,s){super(),this.createRequest=n,Hu(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var n;const r=D1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Da.requestsCount++,Da.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=uT,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Da.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Da.requestsCount=0;Da.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",x0);else if(typeof addEventListener=="function"){const a="onpagehide"in la?"pagehide":"unload";addEventListener(a,x0,!1)}}function x0(){for(let a in Da.requests)Da.requests.hasOwnProperty(a)&&Da.requests[a].abort()}const fT=(function(){const a=z1({xdomain:!1});return a&&a.responseType!==null})();class dT extends cT{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=fT&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new Da(z1,this.uri(),n)}}function z1(a){const n=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||lT))return new XMLHttpRequest}catch{}if(!n)try{return new la[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const L1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class hT extends qh{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,s=L1?{}:D1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;Hh(s,this.supportsBinary,u=>{try{this.doWrite(s,u)}catch{}l&&Iu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=M1()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const jd=la.WebSocket||la.MozWebSocket;class pT extends hT{createSocket(n,r,s){return L1?new jd(n,r,s):r?new jd(n,r):new jd(n)}doWrite(n,r){this.ws.send(r)}}class mT extends qh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=KC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=n.readable.pipeThrough(r).getReader(),l=XC();l.readable.pipeTo(n.writable),this._writer=l.writable.getWriter();const u=()=>{s.read().then(({done:h,value:p})=>{h||(this.onPacket(p),u())}).catch(h=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;this._writer.write(s).then(()=>{l&&Iu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const yT={websocket:pT,webtransport:mT,polling:dT},gT=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,vT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ih(a){if(a.length>8e3)throw"URI too long";const n=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=gT.exec(a||""),u={},f=14;for(;f--;)u[vT[f]]=l[f]||"";return r!=-1&&s!=-1&&(u.source=n,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=bT(u,u.path),u.queryKey=wT(u,u.query),u}function bT(a,n){const r=/\/{2,9}/g,s=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&s.splice(0,1),n.slice(-1)=="/"&&s.splice(s.length-1,1),s}function wT(a,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,u){l&&(r[l]=u)}),r}const sh=typeof addEventListener=="function"&&typeof removeEventListener=="function",gu=[];sh&&addEventListener("offline",()=>{gu.forEach(a=>a())},!1);class Br extends un{constructor(n,r){if(super(),this.binaryType=JC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const s=ih(n);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=ih(r.host).host);Hu(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=iT(this.opts.query)),sh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},gu.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=_1,r.transport=n,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Br.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Br.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=nT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,Iu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,s){return this._sendPacket("message",n,r,s),this}send(n,r,s){return this._sendPacket("message",n,r,s),this}_sendPacket(n,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const u={type:n,data:r,options:s};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),l&&this.once("flush",l),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}_onError(n){if(Br.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),sh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=gu.indexOf(this._offlineEventListener);s!==-1&&gu.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Br.protocol=_1;class ST extends Br{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),s=!1;Br.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",v=>{if(!s)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Br.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(b(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const S=new Error("probe error");S.transport=r.name,this.emitReserved("upgradeError",S)}}))};function u(){s||(s=!0,b(),r.close(),r=null)}const f=v=>{const S=new Error("probe error: "+v);S.transport=r.name,u(),this.emitReserved("upgradeError",S)};function h(){f("transport closed")}function p(){f("socket closed")}function y(v){r&&v.name!==r.name&&u()}const b=()=>{r.removeListener("open",l),r.removeListener("error",f),r.removeListener("close",h),this.off("close",p),this.off("upgrading",y)};r.once("open",l),r.once("error",f),r.once("close",h),this.once("close",p),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let s=0;s<n.length;s++)~this.transports.indexOf(n[s])&&r.push(n[s]);return r}}let xT=class extends ST{constructor(n,r={}){const s=typeof n=="object"?n:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>yT[l]).filter(l=>!!l)),super(n,s)}};function ET(a,n="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=ih(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const u=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+u+":"+s.port+n,s.href=s.protocol+"://"+u+(r&&r.port===s.port?"":":"+s.port),s}const kT=typeof ArrayBuffer=="function",CT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,B1=Object.prototype.toString,TT=typeof Blob=="function"||typeof Blob<"u"&&B1.call(Blob)==="[object BlobConstructor]",OT=typeof File=="function"||typeof File<"u"&&B1.call(File)==="[object FileConstructor]";function Yh(a){return kT&&(a instanceof ArrayBuffer||CT(a))||TT&&a instanceof Blob||OT&&a instanceof File}function vu(a,n){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(vu(a[r]))return!0;return!1}if(Yh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return vu(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&vu(a[r]))return!0;return!1}function NT(a){const n=[],r=a.data,s=a;return s.data=oh(r,n),s.attachments=n.length,{packet:s,buffers:n}}function oh(a,n){if(!a)return a;if(Yh(a)){const r={_placeholder:!0,num:n.length};return n.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=oh(a[s],n);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=oh(a[s],n));return r}return a}function jT(a,n){return a.data=lh(a.data,n),delete a.attachments,a}function lh(a,n){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<n.length)return n[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=lh(a[r],n);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=lh(a[r],n));return a}const AT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_T=5;var dt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(dt||(dt={}));class DT{constructor(n){this.replacer=n}encode(n){return(n.type===dt.EVENT||n.type===dt.ACK)&&vu(n)?this.encodeAsBinary({type:n.type===dt.EVENT?dt.BINARY_EVENT:dt.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===dt.BINARY_EVENT||n.type===dt.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=NT(n),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function E0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Gh extends un{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const s=r.type===dt.BINARY_EVENT;s||r.type===dt.BINARY_ACK?(r.type=s?dt.EVENT:dt.ACK,this.reconstructor=new MT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Yh(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const s={type:Number(n.charAt(0))};if(dt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===dt.BINARY_EVENT||s.type===dt.BINARY_ACK){const u=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const f=n.substring(u,r);if(f!=Number(f)||n.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(f)}if(n.charAt(r+1)==="/"){const u=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););s.nsp=n.substring(u,r)}else s.nsp="/";const l=n.charAt(r+1);if(l!==""&&Number(l)==l){const u=r+1;for(;++r;){const f=n.charAt(r);if(f==null||Number(f)!=f){--r;break}if(r===n.length)break}s.id=Number(n.substring(u,r+1))}if(n.charAt(++r)){const u=this.tryParse(n.substr(r));if(Gh.isPayloadValid(s.type,u))s.data=u;else throw new Error("invalid payload")}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case dt.CONNECT:return E0(r);case dt.DISCONNECT:return r===void 0;case dt.CONNECT_ERROR:return typeof r=="string"||E0(r);case dt.EVENT:case dt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&AT.indexOf(r[0])===-1);case dt.ACK:case dt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class MT{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=jT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const RT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Gh,Encoder:DT,get PacketType(){return dt},protocol:_T},Symbol.toStringTag,{value:"Module"}));function va(a,n,r){return a.on(n,r),function(){a.off(n,r)}}const zT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class U1 extends un{constructor(n,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[va(n,"open",this.onopen.bind(this)),va(n,"packet",this.onpacket.bind(this)),va(n,"error",this.onerror.bind(this)),va(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var s,l,u;if(zT.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const f={type:dt.EVENT,data:r};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const b=this.ids++,v=r.pop();this._registerAckCallback(b,v),f.id=b}const h=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,p=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!h||(p?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(n,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[n]=r;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===n&&this.sendBuffer.splice(h,1);r.call(this,new Error("operation has timed out"))},l),f=(...h)=>{this.io.clearTimeoutFn(u),r.apply(this,h)};f.withError=!0,this.acks[n]=f}emitWithAck(n,...r){return new Promise((s,l)=>{const u=(f,h)=>f?l(f):s(h);u.withError=!0,r.push(u),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((l,...u)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...u)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:dt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(s=>String(s.id)===n)){const s=this.acks[n];delete this.acks[n],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case dt.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case dt.EVENT:case dt.BINARY_EVENT:this.onevent(n);break;case dt.ACK:case dt.BINARY_ACK:this.onack(n);break;case dt.DISCONNECT:this.ondisconnect();break;case dt.CONNECT_ERROR:this.destroy();const s=new Error(n.data.message);s.data=n.data.data,this.emitReserved("connect_error",s);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:dt.ACK,id:n,data:l}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:dt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,n.data)}}}function ys(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}ys.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*a);a=(Math.floor(n*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};ys.prototype.reset=function(){this.attempts=0};ys.prototype.setMin=function(a){this.ms=a};ys.prototype.setMax=function(a){this.max=a};ys.prototype.setJitter=function(a){this.jitter=a};class uh extends un{constructor(n,r){var s;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Hu(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ys({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const l=r.parser||RT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new xT(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=va(r,"open",function(){s.onopen(),n&&n()}),u=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),n?n(h):this.maybeReconnectOnOpen()},f=va(r,"error",u);if(this._timeout!==!1){const h=this._timeout,p=this.setTimeoutFn(()=>{l(),u(new Error("timeout")),r.close()},h);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(l),this.subs.push(f),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(va(n,"ping",this.onping.bind(this)),va(n,"data",this.ondata.bind(this)),va(n,"error",this.onerror.bind(this)),va(n,"close",this.onclose.bind(this)),va(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){Iu(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let s=this.nsps[n];return s?this._autoConnect&&!s.active&&s.connect():(s=new U1(this,n,r),this.nsps[n]=s),s}_destroy(n){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let s=0;s<r.length;s++)this.engine.write(r[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(l=>{l?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",l)):n.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const yo={};function bu(a,n){typeof a=="object"&&(n=a,a=void 0),n=n||{};const r=ET(a,n.path||"/socket.io"),s=r.source,l=r.id,u=r.path,f=yo[l]&&u in yo[l].nsps,h=n.forceNew||n["force new connection"]||n.multiplex===!1||f;let p;return h?p=new uh(s,n):(yo[l]||(yo[l]=new uh(s,n)),p=yo[l]),r.query&&!n.query&&(n.query=r.queryKey),p.socket(r.path,n)}Object.assign(bu,{Manager:uh,Socket:U1,io:bu,connect:bu});const LT=typeof window<"u"?window.location.origin:"http://localhost:3000",k0=$u(),BT=k0?`${k0}/socket.io`:"/socket.io",Ne=bu(LT,{path:BT,autoConnect:!1,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3}),UT=()=>{Ne.connected||Ne.connect()},$T=()=>{Ne.connected&&Ne.disconnect()};class IT{constructor(){this.nodes=new Map}register(n,r){typeof n=="object"&&r===void 0&&(r=n,n=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(n,r)}get(n){return this.nodes.get(n)}getAll(){return Array.from(this.nodes.values()).filter(n=>n)}getByLabel(n){for(const r of this.nodes.values())if(r.label===n)return r;return null}getByInstance(n){for(const r of this.nodes.values())if(r.nodeClass&&n instanceof r.nodeClass)return r;return null}}const Cn=new IT;class hi extends Error{}class HT extends hi{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class VT extends hi{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class qT extends hi{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class ns extends hi{}class $1 extends hi{constructor(n){super(`Invalid unit ${n}`)}}class Tn extends hi{}class _r extends hi{constructor(){super("Zone is an abstract class")}}const Se="numeric",Ea="short",Kn="long",ju={year:Se,month:Se,day:Se},I1={year:Se,month:Ea,day:Se},YT={year:Se,month:Ea,day:Se,weekday:Ea},H1={year:Se,month:Kn,day:Se},V1={year:Se,month:Kn,day:Se,weekday:Kn},q1={hour:Se,minute:Se},Y1={hour:Se,minute:Se,second:Se},G1={hour:Se,minute:Se,second:Se,timeZoneName:Ea},Z1={hour:Se,minute:Se,second:Se,timeZoneName:Kn},P1={hour:Se,minute:Se,hourCycle:"h23"},F1={hour:Se,minute:Se,second:Se,hourCycle:"h23"},X1={hour:Se,minute:Se,second:Se,hourCycle:"h23",timeZoneName:Ea},K1={hour:Se,minute:Se,second:Se,hourCycle:"h23",timeZoneName:Kn},Q1={year:Se,month:Se,day:Se,hour:Se,minute:Se},J1={year:Se,month:Se,day:Se,hour:Se,minute:Se,second:Se},W1={year:Se,month:Ea,day:Se,hour:Se,minute:Se},ew={year:Se,month:Ea,day:Se,hour:Se,minute:Se,second:Se},GT={year:Se,month:Ea,day:Se,weekday:Ea,hour:Se,minute:Se},tw={year:Se,month:Kn,day:Se,hour:Se,minute:Se,timeZoneName:Ea},nw={year:Se,month:Kn,day:Se,hour:Se,minute:Se,second:Se,timeZoneName:Ea},aw={year:Se,month:Kn,day:Se,weekday:Kn,hour:Se,minute:Se,timeZoneName:Kn},rw={year:Se,month:Kn,day:Se,weekday:Kn,hour:Se,minute:Se,second:Se,timeZoneName:Kn};class gs{get type(){throw new _r}get name(){throw new _r}get ianaName(){return this.name}get isUniversal(){throw new _r}offsetName(n,r){throw new _r}formatOffset(n,r){throw new _r}offset(n){throw new _r}equals(n){throw new _r}get isValid(){throw new _r}}let Ad=null;class Ro extends gs{static get instance(){return Ad===null&&(Ad=new Ro),Ad}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return yw(n,r,s)}formatOffset(n,r){return Oo(this.offset(n),r)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const ch=new Map;function ZT(a){let n=ch.get(a);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),ch.set(a,n)),n}const PT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function FT(a,n){const r=a.format(n).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,u,f,h,p,y,b]=s;return[f,l,u,h,p,y,b]}function XT(a,n){const r=a.formatToParts(n),s=[];for(let l=0;l<r.length;l++){const{type:u,value:f}=r[l],h=PT[u];u==="era"?s[h]=f:Pe(h)||(s[h]=parseInt(f,10))}return s}const _d=new Map;class Ra extends gs{static create(n){let r=_d.get(n);return r===void 0&&_d.set(n,r=new Ra(n)),r}static resetCache(){_d.clear(),ch.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=Ra.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return yw(n,r,s,this.name)}formatOffset(n,r){return Oo(this.offset(n),r)}offset(n){if(!this.valid)return NaN;const r=new Date(n);if(isNaN(r))return NaN;const s=ZT(this.name);let[l,u,f,h,p,y,b]=s.formatToParts?XT(s,r):FT(s,r);h==="BC"&&(l=-Math.abs(l)+1);const S=qu({year:l,month:u,day:f,hour:p===24?0:p,minute:y,second:b,millisecond:0});let k=+r;const N=k%1e3;return k-=N>=0?N:1e3+N,(S-k)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let C0={};function KT(a,n={}){const r=JSON.stringify([a,n]);let s=C0[r];return s||(s=new Intl.ListFormat(a,n),C0[r]=s),s}const fh=new Map;function dh(a,n={}){const r=JSON.stringify([a,n]);let s=fh.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,n),fh.set(r,s)),s}const hh=new Map;function QT(a,n={}){const r=JSON.stringify([a,n]);let s=hh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,n),hh.set(r,s)),s}const ph=new Map;function JT(a,n={}){const{base:r,...s}=n,l=JSON.stringify([a,s]);let u=ph.get(l);return u===void 0&&(u=new Intl.RelativeTimeFormat(a,n),ph.set(l,u)),u}let wo=null;function WT(){return wo||(wo=new Intl.DateTimeFormat().resolvedOptions().locale,wo)}const mh=new Map;function iw(a){let n=mh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat(a).resolvedOptions(),mh.set(a,n)),n}const yh=new Map;function eO(a){let n=yh.get(a);if(!n){const r=new Intl.Locale(a);n="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in n||(n={...sw,...n}),yh.set(a,n)}return n}function tO(a){const n=a.indexOf("-x-");n!==-1&&(a=a.substring(0,n));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=dh(a).resolvedOptions(),l=a}catch{const p=a.substring(0,r);s=dh(p).resolvedOptions(),l=p}const{numberingSystem:u,calendar:f}=s;return[l,u,f]}}function nO(a,n,r){return(r||n)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),n&&(a+=`-nu-${n}`)),a}function aO(a){const n=[];for(let r=1;r<=12;r++){const s=Fe.utc(2009,r,1);n.push(a(s))}return n}function rO(a){const n=[];for(let r=1;r<=7;r++){const s=Fe.utc(2016,11,13+r);n.push(a(s))}return n}function ou(a,n,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(n):s(n)}function iO(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||iw(a.locale).numberingSystem==="latn"}class sO{constructor(n,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:u,...f}=s;if(!r||Object.keys(f).length>0){const h={useGrouping:!1,...s};s.padTo>0&&(h.minimumIntegerDigits=s.padTo),this.inf=QT(n,h)}}format(n){if(this.inf){const r=this.floor?Math.floor(n):n;return this.inf.format(r)}else{const r=this.floor?Math.floor(n):Kh(n,3);return on(r,this.padTo)}}}class oO{constructor(n,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const f=-1*(n.offset/60),h=f>=0?`Etc/GMT+${f}`:`Etc/GMT${f}`;n.offset!==0&&Ra.create(h).valid?(l=h,this.dt=n):(l="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,l=n.zone.name):(l="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const u={...this.opts};u.timeZone=u.timeZone||l,this.dtf=dh(r,u)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class lO{constructor(n,r,s){this.opts={style:"long",...s},!r&&pw()&&(this.rtf=JT(n,s))}format(n,r){return this.rtf?this.rtf.format(n,r):jO(r,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,r){return this.rtf?this.rtf.formatToParts(n,r):[]}}const sw={firstDay:1,minimalDays:4,weekend:[6,7]};class Et{static fromOpts(n){return Et.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,r,s,l,u=!1){const f=n||Pt.defaultLocale,h=f||(u?"en-US":WT()),p=r||Pt.defaultNumberingSystem,y=s||Pt.defaultOutputCalendar,b=vh(l)||Pt.defaultWeekSettings;return new Et(h,p,y,b,f)}static resetCache(){wo=null,fh.clear(),hh.clear(),ph.clear(),mh.clear(),yh.clear()}static fromObject({locale:n,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return Et.create(n,r,s,l)}constructor(n,r,s,l,u){const[f,h,p]=tO(n);this.locale=f,this.numberingSystem=r||h||null,this.outputCalendar=s||p||null,this.weekSettings=l,this.intl=nO(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=u,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=iO(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&r?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:Et.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,vh(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,r=!1){return ou(this,n,bw,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:n,day:"numeric"}:{month:n},u=r?"format":"standalone";if(!this.monthsCache[u][n]){const f=s?h=>this.dtFormatter(h,l).format():h=>this.extract(h,l,"month");this.monthsCache[u][n]=aO(f)}return this.monthsCache[u][n]})}weekdays(n,r=!1){return ou(this,n,xw,()=>{const s=r?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},l=r?"format":"standalone";return this.weekdaysCache[l][n]||(this.weekdaysCache[l][n]=rO(u=>this.extract(u,s,"weekday"))),this.weekdaysCache[l][n]})}meridiems(){return ou(this,void 0,()=>Ew,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Fe.utc(2016,11,13,9),Fe.utc(2016,11,13,19)].map(r=>this.extract(r,n,"dayperiod"))}return this.meridiemCache})}eras(n){return ou(this,n,kw,()=>{const r={era:n};return this.eraCache[n]||(this.eraCache[n]=[Fe.utc(-40,1,1),Fe.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[n]})}extract(n,r,s){const l=this.dtFormatter(n,r),u=l.formatToParts(),f=u.find(h=>h.type.toLowerCase()===s);return f?f.value:null}numberFormatter(n={}){return new sO(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,r={}){return new oO(n,this.intl,r)}relFormatter(n={}){return new lO(this.intl,this.isEnglish(),n)}listFormatter(n={}){return KT(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||iw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:mw()?eO(this.locale):sw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Dd=null;class Nn extends gs{static get utcInstance(){return Dd===null&&(Dd=new Nn(0)),Dd}static instance(n){return n===0?Nn.utcInstance:new Nn(n)}static parseSpecifier(n){if(n){const r=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Nn(Yu(r[1],r[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Oo(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Oo(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,r){return Oo(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class ow extends gs{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function zr(a,n){if(Pe(a)||a===null)return n;if(a instanceof gs)return a;if(pO(a)){const r=a.toLowerCase();return r==="default"?n:r==="local"||r==="system"?Ro.instance:r==="utc"||r==="gmt"?Nn.utcInstance:Nn.parseSpecifier(r)||Ra.create(a)}else return Ur(a)?Nn.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new ow(a)}const Zh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},T0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},uO=Zh.hanidec.replace(/[\[|\]]/g,"").split("");function cO(a){let n=parseInt(a,10);if(isNaN(n)){n="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Zh.hanidec)!==-1)n+=uO.indexOf(a[r]);else for(const l in T0){const[u,f]=T0[l];s>=u&&s<=f&&(n+=s-u)}}return parseInt(n,10)}else return n}const gh=new Map;function fO(){gh.clear()}function ya({numberingSystem:a},n=""){const r=a||"latn";let s=gh.get(r);s===void 0&&(s=new Map,gh.set(r,s));let l=s.get(n);return l===void 0&&(l=new RegExp(`${Zh[r]}${n}`),s.set(n,l)),l}let O0=()=>Date.now(),N0="system",j0=null,A0=null,_0=null,D0=60,M0,R0=null;class Pt{static get now(){return O0}static set now(n){O0=n}static set defaultZone(n){N0=n}static get defaultZone(){return zr(N0,Ro.instance)}static get defaultLocale(){return j0}static set defaultLocale(n){j0=n}static get defaultNumberingSystem(){return A0}static set defaultNumberingSystem(n){A0=n}static get defaultOutputCalendar(){return _0}static set defaultOutputCalendar(n){_0=n}static get defaultWeekSettings(){return R0}static set defaultWeekSettings(n){R0=vh(n)}static get twoDigitCutoffYear(){return D0}static set twoDigitCutoffYear(n){D0=n%100}static get throwOnInvalid(){return M0}static set throwOnInvalid(n){M0=n}static resetCaches(){Et.resetCache(),Ra.resetCache(),Fe.resetCache(),fO()}}class wa{constructor(n,r){this.reason=n,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const lw=[0,31,59,90,120,151,181,212,243,273,304,334],uw=[0,31,60,91,121,152,182,213,244,274,305,335];function ua(a,n){return new wa("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${a}, which is invalid`)}function Ph(a,n,r){const s=new Date(Date.UTC(a,n-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function cw(a,n,r){return r+(zo(a)?uw:lw)[n-1]}function fw(a,n){const r=zo(a)?uw:lw,s=r.findIndex(u=>u<n),l=n-r[s];return{month:s+1,day:l}}function Fh(a,n){return(a-n+7)%7+1}function Au(a,n=4,r=1){const{year:s,month:l,day:u}=a,f=cw(s,l,u),h=Fh(Ph(s,l,u),r);let p=Math.floor((f-h+14-n)/7),y;return p<1?(y=s-1,p=_o(y,n,r)):p>_o(s,n,r)?(y=s+1,p=1):y=s,{weekYear:y,weekNumber:p,weekday:h,...Gu(a)}}function z0(a,n=4,r=1){const{weekYear:s,weekNumber:l,weekday:u}=a,f=Fh(Ph(s,1,n),r),h=rs(s);let p=l*7+u-f-7+n,y;p<1?(y=s-1,p+=rs(y)):p>h?(y=s+1,p-=rs(s)):y=s;const{month:b,day:v}=fw(y,p);return{year:y,month:b,day:v,...Gu(a)}}function Md(a){const{year:n,month:r,day:s}=a,l=cw(n,r,s);return{year:n,ordinal:l,...Gu(a)}}function L0(a){const{year:n,ordinal:r}=a,{month:s,day:l}=fw(n,r);return{year:n,month:s,day:l,...Gu(a)}}function B0(a,n){if(!Pe(a.localWeekday)||!Pe(a.localWeekNumber)||!Pe(a.localWeekYear)){if(!Pe(a.weekday)||!Pe(a.weekNumber)||!Pe(a.weekYear))throw new ns("Cannot mix locale-based week fields with ISO-based week fields");return Pe(a.localWeekday)||(a.weekday=a.localWeekday),Pe(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Pe(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function dO(a,n=4,r=1){const s=Vu(a.weekYear),l=ca(a.weekNumber,1,_o(a.weekYear,n,r)),u=ca(a.weekday,1,7);return s?l?u?!1:ua("weekday",a.weekday):ua("week",a.weekNumber):ua("weekYear",a.weekYear)}function hO(a){const n=Vu(a.year),r=ca(a.ordinal,1,rs(a.year));return n?r?!1:ua("ordinal",a.ordinal):ua("year",a.year)}function dw(a){const n=Vu(a.year),r=ca(a.month,1,12),s=ca(a.day,1,_u(a.year,a.month));return n?r?s?!1:ua("day",a.day):ua("month",a.month):ua("year",a.year)}function hw(a){const{hour:n,minute:r,second:s,millisecond:l}=a,u=ca(n,0,23)||n===24&&r===0&&s===0&&l===0,f=ca(r,0,59),h=ca(s,0,59),p=ca(l,0,999);return u?f?h?p?!1:ua("millisecond",l):ua("second",s):ua("minute",r):ua("hour",n)}function Pe(a){return typeof a>"u"}function Ur(a){return typeof a=="number"}function Vu(a){return typeof a=="number"&&a%1===0}function pO(a){return typeof a=="string"}function mO(a){return Object.prototype.toString.call(a)==="[object Date]"}function pw(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function mw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function yO(a){return Array.isArray(a)?a:[a]}function U0(a,n,r){if(a.length!==0)return a.reduce((s,l)=>{const u=[n(l),l];return s&&r(s[0],u[0])===s[0]?s:u},null)[1]}function gO(a,n){return n.reduce((r,s)=>(r[s]=a[s],r),{})}function ds(a,n){return Object.prototype.hasOwnProperty.call(a,n)}function vh(a){if(a==null)return null;if(typeof a!="object")throw new Tn("Week settings must be an object");if(!ca(a.firstDay,1,7)||!ca(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(n=>!ca(n,1,7)))throw new Tn("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function ca(a,n,r){return Vu(a)&&a>=n&&a<=r}function vO(a,n){return a-n*Math.floor(a/n)}function on(a,n=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(n,"0"):s=(""+a).padStart(n,"0"),s}function Rr(a){if(!(Pe(a)||a===null||a===""))return parseInt(a,10)}function ai(a){if(!(Pe(a)||a===null||a===""))return parseFloat(a)}function Xh(a){if(!(Pe(a)||a===null||a==="")){const n=parseFloat("0."+a)*1e3;return Math.floor(n)}}function Kh(a,n,r="round"){const s=10**n;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function zo(a){return a%4===0&&(a%100!==0||a%400===0)}function rs(a){return zo(a)?366:365}function _u(a,n){const r=vO(n-1,12)+1,s=a+(n-r)/12;return r===2?zo(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function qu(a){let n=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(n=new Date(n),n.setUTCFullYear(a.year,a.month-1,a.day)),+n}function $0(a,n,r){return-Fh(Ph(a,1,n),r)+n-1}function _o(a,n=4,r=1){const s=$0(a,n,r),l=$0(a+1,n,r);return(rs(a)-s+l)/7}function bh(a){return a>99?a:a>Pt.twoDigitCutoffYear?1900+a:2e3+a}function yw(a,n,r,s=null){const l=new Date(a),u={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(u.timeZone=s);const f={timeZoneName:n,...u},h=new Intl.DateTimeFormat(r,f).formatToParts(l).find(p=>p.type.toLowerCase()==="timezonename");return h?h.value:null}function Yu(a,n){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(n,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function gw(a){const n=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(n))throw new Tn(`Invalid unit value ${a}`);return n}function Du(a,n){const r={};for(const s in a)if(ds(a,s)){const l=a[s];if(l==null)continue;r[n(s)]=gw(l)}return r}function Oo(a,n){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(n){case"short":return`${l}${on(r,2)}:${on(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${on(r,2)}${on(s,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Gu(a){return gO(a,["hour","minute","second","millisecond"])}const bO=["January","February","March","April","May","June","July","August","September","October","November","December"],vw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wO=["J","F","M","A","M","J","J","A","S","O","N","D"];function bw(a){switch(a){case"narrow":return[...wO];case"short":return[...vw];case"long":return[...bO];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const ww=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Sw=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],SO=["M","T","W","T","F","S","S"];function xw(a){switch(a){case"narrow":return[...SO];case"short":return[...Sw];case"long":return[...ww];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ew=["AM","PM"],xO=["Before Christ","Anno Domini"],EO=["BC","AD"],kO=["B","A"];function kw(a){switch(a){case"narrow":return[...kO];case"short":return[...EO];case"long":return[...xO];default:return null}}function CO(a){return Ew[a.hour<12?0:1]}function TO(a,n){return xw(n)[a.weekday-1]}function OO(a,n){return bw(n)[a.month-1]}function NO(a,n){return kw(n)[a.year<0?0:1]}function jO(a,n,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},u=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&u){const v=a==="days";switch(n){case 1:return v?"tomorrow":`next ${l[a][0]}`;case-1:return v?"yesterday":`last ${l[a][0]}`;case 0:return v?"today":`this ${l[a][0]}`}}const f=Object.is(n,-0)||n<0,h=Math.abs(n),p=h===1,y=l[a],b=s?p?y[1]:y[2]||y[1]:p?l[a][0]:a;return f?`${h} ${b} ago`:`in ${h} ${b}`}function I0(a,n){let r="";for(const s of a)s.literal?r+=s.val:r+=n(s.val);return r}const AO={D:ju,DD:I1,DDD:H1,DDDD:V1,t:q1,tt:Y1,ttt:G1,tttt:Z1,T:P1,TT:F1,TTT:X1,TTTT:K1,f:Q1,ff:W1,fff:tw,ffff:aw,F:J1,FF:ew,FFF:nw,FFFF:rw};class On{static create(n,r={}){return new On(n,r)}static parseFormat(n){let r=null,s="",l=!1;const u=[];for(let f=0;f<n.length;f++){const h=n.charAt(f);h==="'"?((s.length>0||l)&&u.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||h===r?s+=h:(s.length>0&&u.push({literal:/^\s+$/.test(s),val:s}),s=h,r=h)}return s.length>0&&u.push({literal:l||/^\s+$/.test(s),val:s}),u}static macroTokenToFormatOpts(n){return AO[n]}constructor(n,r){this.opts=r,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...r}).format()}dtFormatter(n,r={}){return this.loc.dtFormatter(n,{...this.opts,...r})}formatDateTime(n,r){return this.dtFormatter(n,r).format()}formatDateTimeParts(n,r){return this.dtFormatter(n,r).formatToParts()}formatInterval(n,r){return this.dtFormatter(n.start,r).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,r){return this.dtFormatter(n,r).resolvedOptions()}num(n,r=0,s=void 0){if(this.opts.forceSimple)return on(n,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(n)}formatDateTimeFromString(n,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",u=(k,N)=>this.loc.extract(n,k,N),f=k=>n.isOffsetFixed&&n.offset===0&&k.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,k.format):"",h=()=>s?CO(n):u({hour:"numeric",hourCycle:"h12"},"dayperiod"),p=(k,N)=>s?OO(n,k):u(N?{month:k}:{month:k,day:"numeric"},"month"),y=(k,N)=>s?TO(n,k):u(N?{weekday:k}:{weekday:k,month:"long",day:"numeric"},"weekday"),b=k=>{const N=On.macroTokenToFormatOpts(k);return N?this.formatWithSystemDefault(n,N):k},v=k=>s?NO(n,k):u({era:k},"era"),S=k=>{switch(k){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return f({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return f({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return f({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return h();case"d":return l?u({day:"numeric"},"day"):this.num(n.day);case"dd":return l?u({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return l?u({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return l?u({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return p("short",!0);case"LLLL":return p("long",!0);case"LLLLL":return p("narrow",!0);case"M":return l?u({month:"numeric"},"month"):this.num(n.month);case"MM":return l?u({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return p("short",!1);case"MMMM":return p("long",!1);case"MMMMM":return p("narrow",!1);case"y":return l?u({year:"numeric"},"year"):this.num(n.year);case"yy":return l?u({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return l?u({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return l?u({year:"numeric"},"year"):this.num(n.year,6);case"G":return v("short");case"GG":return v("long");case"GGGGG":return v("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return b(k)}};return I0(On.parseFormat(r),S)}formatDurationFromString(n,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=b=>{switch(b[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},u=(b,v)=>S=>{const k=l(S);if(k){const N=v.isNegativeDuration&&k!==v.largestUnit?s:1;let G;return this.opts.signMode==="negativeLargestOnly"&&k!==v.largestUnit?G="never":this.opts.signMode==="all"?G="always":G="auto",this.num(b.get(k)*N,S.length,G)}else return S},f=On.parseFormat(r),h=f.reduce((b,{literal:v,val:S})=>v?b:b.concat(S),[]),p=n.shiftTo(...h.map(l).filter(b=>b)),y={isNegativeDuration:p<0,largestUnit:Object.keys(p.values)[0]};return I0(f,u(p,y))}}const Cw=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function vs(...a){const n=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${n}$`)}function bs(...a){return n=>a.reduce(([r,s,l],u)=>{const[f,h,p]=u(n,l);return[{...r,...f},h||s,p]},[{},null,1]).slice(0,2)}function ws(a,...n){if(a==null)return[null,null];for(const[r,s]of n){const l=r.exec(a);if(l)return s(l)}return[null,null]}function Tw(...a){return(n,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Rr(n[r+l]);return[s,null,r+l]}}const Ow=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,_O=`(?:${Ow.source}?(?:\\[(${Cw.source})\\])?)?`,Qh=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Nw=RegExp(`${Qh.source}${_O}`),Jh=RegExp(`(?:[Tt]${Nw.source})?`),DO=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,MO=/(\d{4})-?W(\d\d)(?:-?(\d))?/,RO=/(\d{4})-?(\d{3})/,zO=Tw("weekYear","weekNumber","weekDay"),LO=Tw("year","ordinal"),BO=/(\d{4})-(\d\d)-(\d\d)/,jw=RegExp(`${Qh.source} ?(?:${Ow.source}|(${Cw.source}))?`),UO=RegExp(`(?: ${jw.source})?`);function is(a,n,r){const s=a[n];return Pe(s)?r:Rr(s)}function $O(a,n){return[{year:is(a,n),month:is(a,n+1,1),day:is(a,n+2,1)},null,n+3]}function Ss(a,n){return[{hours:is(a,n,0),minutes:is(a,n+1,0),seconds:is(a,n+2,0),milliseconds:Xh(a[n+3])},null,n+4]}function Lo(a,n){const r=!a[n]&&!a[n+1],s=Yu(a[n+1],a[n+2]),l=r?null:Nn.instance(s);return[{},l,n+3]}function Bo(a,n){const r=a[n]?Ra.create(a[n]):null;return[{},r,n+1]}const IO=RegExp(`^T?${Qh.source}$`),HO=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function VO(a){const[n,r,s,l,u,f,h,p,y]=a,b=n[0]==="-",v=p&&p[0]==="-",S=(k,N=!1)=>k!==void 0&&(N||k&&b)?-k:k;return[{years:S(ai(r)),months:S(ai(s)),weeks:S(ai(l)),days:S(ai(u)),hours:S(ai(f)),minutes:S(ai(h)),seconds:S(ai(p),p==="-0"),milliseconds:S(Xh(y),v)}]}const qO={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Wh(a,n,r,s,l,u,f){const h={year:n.length===2?bh(Rr(n)):Rr(n),month:vw.indexOf(r)+1,day:Rr(s),hour:Rr(l),minute:Rr(u)};return f&&(h.second=Rr(f)),a&&(h.weekday=a.length>3?ww.indexOf(a)+1:Sw.indexOf(a)+1),h}const YO=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function GO(a){const[,n,r,s,l,u,f,h,p,y,b,v]=a,S=Wh(n,l,s,r,u,f,h);let k;return p?k=qO[p]:y?k=0:k=Yu(b,v),[S,new Nn(k)]}function ZO(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const PO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,FO=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,XO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function H0(a){const[,n,r,s,l,u,f,h]=a;return[Wh(n,l,s,r,u,f,h),Nn.utcInstance]}function KO(a){const[,n,r,s,l,u,f,h]=a;return[Wh(n,h,r,s,l,u,f),Nn.utcInstance]}const QO=vs(DO,Jh),JO=vs(MO,Jh),WO=vs(RO,Jh),eN=vs(Nw),Aw=bs($O,Ss,Lo,Bo),tN=bs(zO,Ss,Lo,Bo),nN=bs(LO,Ss,Lo,Bo),aN=bs(Ss,Lo,Bo);function rN(a){return ws(a,[QO,Aw],[JO,tN],[WO,nN],[eN,aN])}function iN(a){return ws(ZO(a),[YO,GO])}function sN(a){return ws(a,[PO,H0],[FO,H0],[XO,KO])}function oN(a){return ws(a,[HO,VO])}const lN=bs(Ss);function uN(a){return ws(a,[IO,lN])}const cN=vs(BO,UO),fN=vs(jw),dN=bs(Ss,Lo,Bo);function hN(a){return ws(a,[cN,Aw],[fN,dN])}const V0="Invalid Duration",_w={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},pN={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},..._w},oa=146097/400,Ki=146097/4800,mN={years:{quarters:4,months:12,weeks:oa/7,days:oa,hours:oa*24,minutes:oa*24*60,seconds:oa*24*60*60,milliseconds:oa*24*60*60*1e3},quarters:{months:3,weeks:oa/28,days:oa/4,hours:oa*24/4,minutes:oa*24*60/4,seconds:oa*24*60*60/4,milliseconds:oa*24*60*60*1e3/4},months:{weeks:Ki/7,days:Ki,hours:Ki*24,minutes:Ki*24*60,seconds:Ki*24*60*60,milliseconds:Ki*24*60*60*1e3},..._w},oi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],yN=oi.slice(0).reverse();function ar(a,n,r=!1){const s={values:r?n.values:{...a.values,...n.values||{}},loc:a.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||a.conversionAccuracy,matrix:n.matrix||a.matrix};return new pt(s)}function Dw(a,n){let r=n.milliseconds??0;for(const s of yN.slice(1))n[s]&&(r+=n[s]*a[s].milliseconds);return r}function q0(a,n){const r=Dw(a,n)<0?-1:1;oi.reduceRight((s,l)=>{if(Pe(n[l]))return s;if(s){const u=n[s]*r,f=a[l][s],h=Math.floor(u/f);n[l]+=h*r,n[s]-=h*f*r}return l},null),oi.reduce((s,l)=>{if(Pe(n[l]))return s;if(s){const u=n[s]%1;n[s]-=u,n[l]+=u*a[s][l]}return l},null)}function Y0(a){const n={};for(const[r,s]of Object.entries(a))s!==0&&(n[r]=s);return n}class pt{constructor(n){const r=n.conversionAccuracy==="longterm"||!1;let s=r?mN:pN;n.matrix&&(s=n.matrix),this.values=n.values,this.loc=n.loc||Et.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(n,r){return pt.fromObject({milliseconds:n},r)}static fromObject(n,r={}){if(n==null||typeof n!="object")throw new Tn(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new pt({values:Du(n,pt.normalizeUnit),loc:Et.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(n){if(Ur(n))return pt.fromMillis(n);if(pt.isDuration(n))return n;if(typeof n=="object")return pt.fromObject(n);throw new Tn(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,r){const[s]=oN(n);return s?pt.fromObject(s,r):pt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,r){const[s]=uN(n);return s?pt.fromObject(s,r):pt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,r=null){if(!n)throw new Tn("need to specify a reason the Duration is invalid");const s=n instanceof wa?n:new wa(n,r);if(Pt.throwOnInvalid)throw new qT(s);return new pt({invalid:s})}static normalizeUnit(n){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!r)throw new $1(n);return r}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?On.create(this.loc,s).formatDurationFromString(this,n):V0}toHuman(n={}){if(!this.isValid)return V0;const r=n.showZeros!==!1,s=oi.map(l=>{const u=this.values[l];return Pe(u)||u===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:l.slice(0,-1)}).format(u)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=Kh(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},Fe.fromMillis(r,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Dw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const r=pt.fromDurationLike(n),s={};for(const l of oi)(ds(r.values,l)||ds(this.values,l))&&(s[l]=r.get(l)+this.get(l));return ar(this,{values:s},!0)}minus(n){if(!this.isValid)return this;const r=pt.fromDurationLike(n);return this.plus(r.negate())}mapUnits(n){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=gw(n(this.values[s],s));return ar(this,{values:r},!0)}get(n){return this[pt.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const r={...this.values,...Du(n,pt.normalizeUnit)};return ar(this,{values:r})}reconfigure({locale:n,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const f={loc:this.loc.clone({locale:n,numberingSystem:r}),matrix:l,conversionAccuracy:s};return ar(this,f)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return q0(this.matrix,n),ar(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=Y0(this.normalize().shiftToAll().toObject());return ar(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(f=>pt.normalizeUnit(f));const r={},s={},l=this.toObject();let u;for(const f of oi)if(n.indexOf(f)>=0){u=f;let h=0;for(const y in s)h+=this.matrix[y][f]*s[y],s[y]=0;Ur(l[f])&&(h+=l[f]);const p=Math.trunc(h);r[f]=p,s[f]=(h*1e3-p*1e3)/1e3}else Ur(l[f])&&(s[f]=l[f]);for(const f in s)s[f]!==0&&(r[u]+=f===u?s[f]:s[f]/this.matrix[u][f]);return q0(this.matrix,r),ar(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=this.values[r]===0?0:-this.values[r];return ar(this,{values:n},!0)}removeZeros(){if(!this.isValid)return this;const n=Y0(this.values);return ar(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of oi)if(!r(this.values[s],n.values[s]))return!1;return!0}}const Qi="Invalid Interval";function gN(a,n){return!a||!a.isValid?Zt.invalid("missing or invalid start"):!n||!n.isValid?Zt.invalid("missing or invalid end"):n<a?Zt.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${n.toISO()}`):null}class Zt{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,r=null){if(!n)throw new Tn("need to specify a reason the Interval is invalid");const s=n instanceof wa?n:new wa(n,r);if(Pt.throwOnInvalid)throw new VT(s);return new Zt({invalid:s})}static fromDateTimes(n,r){const s=go(n),l=go(r),u=gN(s,l);return u??new Zt({start:s,end:l})}static after(n,r){const s=pt.fromDurationLike(r),l=go(n);return Zt.fromDateTimes(l,l.plus(s))}static before(n,r){const s=pt.fromDurationLike(r),l=go(n);return Zt.fromDateTimes(l.minus(s),l)}static fromISO(n,r){const[s,l]=(n||"").split("/",2);if(s&&l){let u,f;try{u=Fe.fromISO(s,r),f=u.isValid}catch{f=!1}let h,p;try{h=Fe.fromISO(l,r),p=h.isValid}catch{p=!1}if(f&&p)return Zt.fromDateTimes(u,h);if(f){const y=pt.fromISO(l,r);if(y.isValid)return Zt.after(u,y)}else if(p){const y=pt.fromISO(s,r);if(y.isValid)return Zt.before(h,y)}}return Zt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(n,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(n,r),Math.floor(l.diff(s,n).get(n))+(l.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:r}={}){return this.isValid?Zt.fromDateTimes(n||this.s,r||this.e):this}splitAt(...n){if(!this.isValid)return[];const r=n.map(go).filter(f=>this.contains(f)).sort((f,h)=>f.toMillis()-h.toMillis()),s=[];let{s:l}=this,u=0;for(;l<this.e;){const f=r[u]||this.e,h=+f>+this.e?this.e:f;s.push(Zt.fromDateTimes(l,h)),l=h,u+=1}return s}splitBy(n){const r=pt.fromDurationLike(n);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,u;const f=[];for(;s<this.e;){const h=this.start.plus(r.mapUnits(p=>p*l));u=+h>+this.e?this.e:h,f.push(Zt.fromDateTimes(s,u)),s=u,l+=1}return f}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const r=this.s>n.s?this.s:n.s,s=this.e<n.e?this.e:n.e;return r>=s?null:Zt.fromDateTimes(r,s)}union(n){if(!this.isValid)return this;const r=this.s<n.s?this.s:n.s,s=this.e>n.e?this.e:n.e;return Zt.fromDateTimes(r,s)}static merge(n){const[r,s]=n.sort((l,u)=>l.s-u.s).reduce(([l,u],f)=>u?u.overlaps(f)||u.abutsStart(f)?[l,u.union(f)]:[l.concat([u]),f]:[l,f],[[],null]);return s&&r.push(s),r}static xor(n){let r=null,s=0;const l=[],u=n.map(p=>[{time:p.s,type:"s"},{time:p.e,type:"e"}]),f=Array.prototype.concat(...u),h=f.sort((p,y)=>p.time-y.time);for(const p of h)s+=p.type==="s"?1:-1,s===1?r=p.time:(r&&+r!=+p.time&&l.push(Zt.fromDateTimes(r,p.time)),r=null);return Zt.merge(l)}difference(...n){return Zt.xor([this].concat(n)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Qi}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=ju,r={}){return this.isValid?On.create(this.s.loc.clone(r),n).formatInterval(this):Qi}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:Qi}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Qi}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:Qi}toFormat(n,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(n)}${r}${this.e.toFormat(n)}`:Qi}toDuration(n,r){return this.isValid?this.e.diff(this.s,n,r):pt.invalid(this.invalidReason)}mapEndpoints(n){return Zt.fromDateTimes(n(this.s),n(this.e))}}class So{static hasDST(n=Pt.defaultZone){const r=Fe.now().setZone(n).set({month:12});return!n.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(n){return Ra.isValidZone(n)}static normalizeZone(n){return zr(n,Pt.defaultZone)}static getStartOfWeek({locale:n=null,locObj:r=null}={}){return(r||Et.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:r=null}={}){return(r||Et.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:r=null}={}){return(r||Et.create(n)).getWeekendDays().slice()}static months(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:u="gregory"}={}){return(l||Et.create(r,s,u)).months(n)}static monthsFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:u="gregory"}={}){return(l||Et.create(r,s,u)).months(n,!0)}static weekdays(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Et.create(r,s,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Et.create(r,s,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return Et.create(n).meridiems()}static eras(n="short",{locale:r=null}={}){return Et.create(r,null,"gregory").eras(n)}static features(){return{relative:pw(),localeWeek:mw()}}}function G0(a,n){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(n)-r(a);return Math.floor(pt.fromMillis(s).as("days"))}function vN(a,n,r){const s=[["years",(p,y)=>y.year-p.year],["quarters",(p,y)=>y.quarter-p.quarter+(y.year-p.year)*4],["months",(p,y)=>y.month-p.month+(y.year-p.year)*12],["weeks",(p,y)=>{const b=G0(p,y);return(b-b%7)/7}],["days",G0]],l={},u=a;let f,h;for(const[p,y]of s)r.indexOf(p)>=0&&(f=p,l[p]=y(a,n),h=u.plus(l),h>n?(l[p]--,a=u.plus(l),a>n&&(h=a,l[p]--,a=u.plus(l))):a=h);return[a,l,h,f]}function bN(a,n,r,s){let[l,u,f,h]=vN(a,n,r);const p=n-l,y=r.filter(v=>["hours","minutes","seconds","milliseconds"].indexOf(v)>=0);y.length===0&&(f<n&&(f=l.plus({[h]:1})),f!==l&&(u[h]=(u[h]||0)+p/(f-l)));const b=pt.fromObject(u,s);return y.length>0?pt.fromMillis(p,s).shiftTo(...y).plus(b):b}const wN="missing Intl.DateTimeFormat.formatToParts support";function St(a,n=r=>r){return{regex:a,deser:([r])=>n(cO(r))}}const SN="",Mw=`[ ${SN}]`,Rw=new RegExp(Mw,"g");function xN(a){return a.replace(/\./g,"\\.?").replace(Rw,Mw)}function Z0(a){return a.replace(/\./g,"").replace(Rw," ").toLowerCase()}function ga(a,n){return a===null?null:{regex:RegExp(a.map(xN).join("|")),deser:([r])=>a.findIndex(s=>Z0(r)===Z0(s))+n}}function P0(a,n){return{regex:a,deser:([,r,s])=>Yu(r,s),groups:n}}function lu(a){return{regex:a,deser:([n])=>n}}function EN(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function kN(a,n){const r=ya(n),s=ya(n,"{2}"),l=ya(n,"{3}"),u=ya(n,"{4}"),f=ya(n,"{6}"),h=ya(n,"{1,2}"),p=ya(n,"{1,3}"),y=ya(n,"{1,6}"),b=ya(n,"{1,9}"),v=ya(n,"{2,4}"),S=ya(n,"{4,6}"),k=U=>({regex:RegExp(EN(U.val)),deser:([P])=>P,literal:!0}),G=(U=>{if(a.literal)return k(U);switch(U.val){case"G":return ga(n.eras("short"),0);case"GG":return ga(n.eras("long"),0);case"y":return St(y);case"yy":return St(v,bh);case"yyyy":return St(u);case"yyyyy":return St(S);case"yyyyyy":return St(f);case"M":return St(h);case"MM":return St(s);case"MMM":return ga(n.months("short",!0),1);case"MMMM":return ga(n.months("long",!0),1);case"L":return St(h);case"LL":return St(s);case"LLL":return ga(n.months("short",!1),1);case"LLLL":return ga(n.months("long",!1),1);case"d":return St(h);case"dd":return St(s);case"o":return St(p);case"ooo":return St(l);case"HH":return St(s);case"H":return St(h);case"hh":return St(s);case"h":return St(h);case"mm":return St(s);case"m":return St(h);case"q":return St(h);case"qq":return St(s);case"s":return St(h);case"ss":return St(s);case"S":return St(p);case"SSS":return St(l);case"u":return lu(b);case"uu":return lu(h);case"uuu":return St(r);case"a":return ga(n.meridiems(),0);case"kkkk":return St(u);case"kk":return St(v,bh);case"W":return St(h);case"WW":return St(s);case"E":case"c":return St(r);case"EEE":return ga(n.weekdays("short",!1),1);case"EEEE":return ga(n.weekdays("long",!1),1);case"ccc":return ga(n.weekdays("short",!0),1);case"cccc":return ga(n.weekdays("long",!0),1);case"Z":case"ZZ":return P0(new RegExp(`([+-]${h.source})(?::(${s.source}))?`),2);case"ZZZ":return P0(new RegExp(`([+-]${h.source})(${s.source})?`),2);case"z":return lu(/[a-z_+-/]{1,256}?/i);case" ":return lu(/[^\S\n\r]/);default:return k(U)}})(a)||{invalidReason:wN};return G.token=a,G}const CN={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function TN(a,n,r){const{type:s,value:l}=a;if(s==="literal"){const p=/^\s+$/.test(l);return{literal:!p,val:p?" ":l}}const u=n[s];let f=s;s==="hour"&&(n.hour12!=null?f=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?f="hour12":f="hour24":f=r.hour12?"hour12":"hour24");let h=CN[f];if(typeof h=="object"&&(h=h[u]),h)return{literal:!1,val:h}}function ON(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function NN(a,n,r){const s=a.match(n);if(s){const l={};let u=1;for(const f in r)if(ds(r,f)){const h=r[f],p=h.groups?h.groups+1:1;!h.literal&&h.token&&(l[h.token.val[0]]=h.deser(s.slice(u,u+p))),u+=p}return[s,l]}else return[s,{}]}function jN(a){const n=u=>{switch(u){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Pe(a.z)||(r=Ra.create(a.z)),Pe(a.Z)||(r||(r=new Nn(a.Z)),s=a.Z),Pe(a.q)||(a.M=(a.q-1)*3+1),Pe(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Pe(a.u)||(a.S=Xh(a.u)),[Object.keys(a).reduce((u,f)=>{const h=n(f);return h&&(u[h]=a[f]),u},{}),r,s]}let Rd=null;function AN(){return Rd||(Rd=Fe.fromMillis(1555555555555)),Rd}function _N(a,n){if(a.literal)return a;const r=On.macroTokenToFormatOpts(a.val),s=Uw(r,n);return s==null||s.includes(void 0)?a:s}function zw(a,n){return Array.prototype.concat(...a.map(r=>_N(r,n)))}class Lw{constructor(n,r){if(this.locale=n,this.format=r,this.tokens=zw(On.parseFormat(r),n),this.units=this.tokens.map(s=>kN(s,n)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=ON(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(n){if(this.isValid){const[r,s]=NN(n,this.regex,this.handlers),[l,u,f]=s?jN(s):[null,null,void 0];if(ds(s,"a")&&ds(s,"H"))throw new ns("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:u,specificOffset:f}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Bw(a,n,r){return new Lw(a,r).explainFromTokens(n)}function DN(a,n,r){const{result:s,zone:l,specificOffset:u,invalidReason:f}=Bw(a,n,r);return[s,l,u,f]}function Uw(a,n){if(!a)return null;const s=On.create(n,a).dtFormatter(AN()),l=s.formatToParts(),u=s.resolvedOptions();return l.map(f=>TN(f,a,u))}const zd="Invalid DateTime",F0=864e13;function xo(a){return new wa("unsupported zone",`the zone "${a.name}" is not supported`)}function Ld(a){return a.weekData===null&&(a.weekData=Au(a.c)),a.weekData}function Bd(a){return a.localWeekData===null&&(a.localWeekData=Au(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function ri(a,n){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Fe({...r,...n,old:r})}function $w(a,n,r){let s=a-n*60*1e3;const l=r.offset(s);if(n===l)return[s,n];s-=(l-n)*60*1e3;const u=r.offset(s);return l===u?[s,l]:[a-Math.min(l,u)*60*1e3,Math.max(l,u)]}function uu(a,n){a+=n*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function wu(a,n,r){return $w(qu(a),n,r)}function X0(a,n){const r=a.o,s=a.c.year+Math.trunc(n.years),l=a.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,u={...a.c,year:s,month:l,day:Math.min(a.c.day,_u(s,l))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},f=pt.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),h=qu(u);let[p,y]=$w(h,r,a.zone);return f!==0&&(p+=f,y=a.zone.offset(p)),{ts:p,o:y}}function Ji(a,n,r,s,l,u){const{setZone:f,zone:h}=r;if(a&&Object.keys(a).length!==0||n){const p=n||h,y=Fe.fromObject(a,{...r,zone:p,specificOffset:u});return f?y:y.setZone(h)}else return Fe.invalid(new wa("unparsable",`the input "${l}" can't be parsed as ${s}`))}function cu(a,n,r=!0){return a.isValid?On.create(Et.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,n):null}function Ud(a,n,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=on(a.c.year,s?6:4),r==="year")return l;if(n){if(l+="-",l+=on(a.c.month),r==="month")return l;l+="-"}else if(l+=on(a.c.month),r==="month")return l;return l+=on(a.c.day),l}function K0(a,n,r,s,l,u,f){let h=!r||a.c.millisecond!==0||a.c.second!==0,p="";switch(f){case"day":case"month":case"year":break;default:if(p+=on(a.c.hour),f==="hour")break;if(n){if(p+=":",p+=on(a.c.minute),f==="minute")break;h&&(p+=":",p+=on(a.c.second))}else{if(p+=on(a.c.minute),f==="minute")break;h&&(p+=on(a.c.second))}if(f==="second")break;h&&(!s||a.c.millisecond!==0)&&(p+=".",p+=on(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!u?p+="Z":a.o<0?(p+="-",p+=on(Math.trunc(-a.o/60)),p+=":",p+=on(Math.trunc(-a.o%60))):(p+="+",p+=on(Math.trunc(a.o/60)),p+=":",p+=on(Math.trunc(a.o%60)))),u&&(p+="["+a.zone.ianaName+"]"),p}const Iw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},MN={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},RN={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Su=["year","month","day","hour","minute","second","millisecond"],zN=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],LN=["year","ordinal","hour","minute","second","millisecond"];function xu(a){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!n)throw new $1(a);return n}function Q0(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return xu(a)}}function BN(a){if(Eo===void 0&&(Eo=Pt.now()),a.type!=="iana")return a.offset(Eo);const n=a.name;let r=wh.get(n);return r===void 0&&(r=a.offset(Eo),wh.set(n,r)),r}function J0(a,n){const r=zr(n.zone,Pt.defaultZone);if(!r.isValid)return Fe.invalid(xo(r));const s=Et.fromObject(n);let l,u;if(Pe(a.year))l=Pt.now();else{for(const p of Su)Pe(a[p])&&(a[p]=Iw[p]);const f=dw(a)||hw(a);if(f)return Fe.invalid(f);const h=BN(r);[l,u]=wu(a,h,r)}return new Fe({ts:l,zone:r,loc:s,o:u})}function W0(a,n,r){const s=Pe(r.round)?!0:r.round,l=Pe(r.rounding)?"trunc":r.rounding,u=(h,p)=>(h=Kh(h,s||r.calendary?0:2,r.calendary?"round":l),n.loc.clone(r).relFormatter(r).format(h,p)),f=h=>r.calendary?n.hasSame(a,h)?0:n.startOf(h).diff(a.startOf(h),h).get(h):n.diff(a,h).get(h);if(r.unit)return u(f(r.unit),r.unit);for(const h of r.units){const p=f(h);if(Math.abs(p)>=1)return u(p,h)}return u(a>n?-0:0,r.units[r.units.length-1])}function eb(a){let n={},r;return a.length>0&&typeof a[a.length-1]=="object"?(n=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[n,r]}let Eo;const wh=new Map;class Fe{constructor(n){const r=n.zone||Pt.defaultZone;let s=n.invalid||(Number.isNaN(n.ts)?new wa("invalid input"):null)||(r.isValid?null:xo(r));this.ts=Pe(n.ts)?Pt.now():n.ts;let l=null,u=null;if(!s)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(r))[l,u]=[n.old.c,n.old.o];else{const h=Ur(n.o)&&!n.old?n.o:r.offset(this.ts);l=uu(this.ts,h),s=Number.isNaN(l.year)?new wa("invalid input"):null,l=s?null:l,u=s?null:h}this._zone=r,this.loc=n.loc||Et.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=u,this.isLuxonDateTime=!0}static now(){return new Fe({})}static local(){const[n,r]=eb(arguments),[s,l,u,f,h,p,y]=r;return J0({year:s,month:l,day:u,hour:f,minute:h,second:p,millisecond:y},n)}static utc(){const[n,r]=eb(arguments),[s,l,u,f,h,p,y]=r;return n.zone=Nn.utcInstance,J0({year:s,month:l,day:u,hour:f,minute:h,second:p,millisecond:y},n)}static fromJSDate(n,r={}){const s=mO(n)?n.valueOf():NaN;if(Number.isNaN(s))return Fe.invalid("invalid input");const l=zr(r.zone,Pt.defaultZone);return l.isValid?new Fe({ts:s,zone:l,loc:Et.fromObject(r)}):Fe.invalid(xo(l))}static fromMillis(n,r={}){if(Ur(n))return n<-F0||n>F0?Fe.invalid("Timestamp out of range"):new Fe({ts:n,zone:zr(r.zone,Pt.defaultZone),loc:Et.fromObject(r)});throw new Tn(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,r={}){if(Ur(n))return new Fe({ts:n*1e3,zone:zr(r.zone,Pt.defaultZone),loc:Et.fromObject(r)});throw new Tn("fromSeconds requires a numerical input")}static fromObject(n,r={}){n=n||{};const s=zr(r.zone,Pt.defaultZone);if(!s.isValid)return Fe.invalid(xo(s));const l=Et.fromObject(r),u=Du(n,Q0),{minDaysInFirstWeek:f,startOfWeek:h}=B0(u,l),p=Pt.now(),y=Pe(r.specificOffset)?s.offset(p):r.specificOffset,b=!Pe(u.ordinal),v=!Pe(u.year),S=!Pe(u.month)||!Pe(u.day),k=v||S,N=u.weekYear||u.weekNumber;if((k||b)&&N)throw new ns("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(S&&b)throw new ns("Can't mix ordinal dates with month/day");const G=N||u.weekday&&!k;let U,P,K=uu(p,y);G?(U=zN,P=MN,K=Au(K,f,h)):b?(U=LN,P=RN,K=Md(K)):(U=Su,P=Iw);let q=!1;for(const F of U){const ue=u[F];Pe(ue)?q?u[F]=P[F]:u[F]=K[F]:q=!0}const Z=G?dO(u,f,h):b?hO(u):dw(u),ce=Z||hw(u);if(ce)return Fe.invalid(ce);const oe=G?z0(u,f,h):b?L0(u):u,[$,re]=wu(oe,y,s),ie=new Fe({ts:$,zone:s,o:re,loc:l});return u.weekday&&k&&n.weekday!==ie.weekday?Fe.invalid("mismatched weekday",`you can't specify both a weekday of ${u.weekday} and a date of ${ie.toISO()}`):ie.isValid?ie:Fe.invalid(ie.invalid)}static fromISO(n,r={}){const[s,l]=rN(n);return Ji(s,l,r,"ISO 8601",n)}static fromRFC2822(n,r={}){const[s,l]=iN(n);return Ji(s,l,r,"RFC 2822",n)}static fromHTTP(n,r={}){const[s,l]=sN(n);return Ji(s,l,r,"HTTP",r)}static fromFormat(n,r,s={}){if(Pe(n)||Pe(r))throw new Tn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:u=null}=s,f=Et.fromOpts({locale:l,numberingSystem:u,defaultToEN:!0}),[h,p,y,b]=DN(f,n,r);return b?Fe.invalid(b):Ji(h,p,s,`format ${r}`,n,y)}static fromString(n,r,s={}){return Fe.fromFormat(n,r,s)}static fromSQL(n,r={}){const[s,l]=hN(n);return Ji(s,l,r,"SQL",n)}static invalid(n,r=null){if(!n)throw new Tn("need to specify a reason the DateTime is invalid");const s=n instanceof wa?n:new wa(n,r);if(Pt.throwOnInvalid)throw new HT(s);return new Fe({invalid:s})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,r={}){const s=Uw(n,Et.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(n,r={}){return zw(On.parseFormat(n),Et.fromObject(r)).map(l=>l.val).join("")}static resetCache(){Eo=void 0,wh.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ld(this).weekYear:NaN}get weekNumber(){return this.isValid?Ld(this).weekNumber:NaN}get weekday(){return this.isValid?Ld(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Bd(this).weekday:NaN}get localWeekNumber(){return this.isValid?Bd(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Bd(this).weekYear:NaN}get ordinal(){return this.isValid?Md(this.c).ordinal:NaN}get monthShort(){return this.isValid?So.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?So.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?So.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?So.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,r=6e4,s=qu(this.c),l=this.zone.offset(s-n),u=this.zone.offset(s+n),f=this.zone.offset(s-l*r),h=this.zone.offset(s-u*r);if(f===h)return[this];const p=s-f*r,y=s-h*r,b=uu(p,f),v=uu(y,h);return b.hour===v.hour&&b.minute===v.minute&&b.second===v.second&&b.millisecond===v.millisecond?[ri(this,{ts:p}),ri(this,{ts:y})]:[this]}get isInLeapYear(){return zo(this.year)}get daysInMonth(){return _u(this.year,this.month)}get daysInYear(){return this.isValid?rs(this.year):NaN}get weeksInWeekYear(){return this.isValid?_o(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?_o(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:r,numberingSystem:s,calendar:l}=On.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(n=0,r={}){return this.setZone(Nn.instance(n),r)}toLocal(){return this.setZone(Pt.defaultZone)}setZone(n,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(n=zr(n,Pt.defaultZone),n.equals(this.zone))return this;if(n.isValid){let l=this.ts;if(r||s){const u=n.offset(this.ts),f=this.toObject();[l]=wu(f,u,n)}return ri(this,{ts:l,zone:n})}else return Fe.invalid(xo(n))}reconfigure({locale:n,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:n,numberingSystem:r,outputCalendar:s});return ri(this,{loc:l})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const r=Du(n,Q0),{minDaysInFirstWeek:s,startOfWeek:l}=B0(r,this.loc),u=!Pe(r.weekYear)||!Pe(r.weekNumber)||!Pe(r.weekday),f=!Pe(r.ordinal),h=!Pe(r.year),p=!Pe(r.month)||!Pe(r.day),y=h||p,b=r.weekYear||r.weekNumber;if((y||f)&&b)throw new ns("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&f)throw new ns("Can't mix ordinal dates with month/day");let v;u?v=z0({...Au(this.c,s,l),...r},s,l):Pe(r.ordinal)?(v={...this.toObject(),...r},Pe(r.day)&&(v.day=Math.min(_u(v.year,v.month),v.day))):v=L0({...Md(this.c),...r});const[S,k]=wu(v,this.o,this.zone);return ri(this,{ts:S,o:k})}plus(n){if(!this.isValid)return this;const r=pt.fromDurationLike(n);return ri(this,X0(this,r))}minus(n){if(!this.isValid)return this;const r=pt.fromDurationLike(n).negate();return ri(this,X0(this,r))}startOf(n,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=pt.normalizeUnit(n);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const u=this.loc.getStartOfWeek(),{weekday:f}=this;f<u&&(s.weekNumber=this.weekNumber-1),s.weekday=u}else s.weekday=1;if(l==="quarters"){const u=Math.ceil(this.month/3);s.month=(u-1)*3+1}return this.set(s)}endOf(n,r){return this.isValid?this.plus({[n]:1}).startOf(n,r).minus(1):this}toFormat(n,r={}){return this.isValid?On.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,n):zd}toLocaleString(n=ju,r={}){return this.isValid?On.create(this.loc.clone(r),n).formatDateTime(this):zd}toLocaleParts(n={}){return this.isValid?On.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:u=!1,precision:f="milliseconds"}={}){if(!this.isValid)return null;f=xu(f);const h=n==="extended";let p=Ud(this,h,f);return Su.indexOf(f)>=3&&(p+="T"),p+=K0(this,h,r,s,l,u,f),p}toISODate({format:n="extended",precision:r="day"}={}){return this.isValid?Ud(this,n==="extended",xu(r)):null}toISOWeekDate(){return cu(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:u=!1,format:f="extended",precision:h="milliseconds"}={}){return this.isValid?(h=xu(h),(l&&Su.indexOf(h)>=3?"T":"")+K0(this,f==="extended",r,n,s,u,h)):null}toRFC2822(){return cu(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return cu(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Ud(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||n)&&(s&&(l+=" "),r?l+="z":n&&(l+="ZZ")),cu(this,l,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():zd}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const r={...this.c};return n.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,r="milliseconds",s={}){if(!this.isValid||!n.isValid)return pt.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},u=yO(r).map(pt.normalizeUnit),f=n.valueOf()>this.valueOf(),h=f?this:n,p=f?n:this,y=bN(h,p,u,l);return f?y.negate():y}diffNow(n="milliseconds",r={}){return this.diff(Fe.now(),n,r)}until(n){return this.isValid?Zt.fromDateTimes(this,n):this}hasSame(n,r,s){if(!this.isValid)return!1;const l=n.valueOf(),u=this.setZone(n.zone,{keepLocalTime:!0});return u.startOf(r,s)<=l&&l<=u.endOf(r,s)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const r=n.base||Fe.fromObject({},{zone:this.zone}),s=n.padding?this<r?-n.padding:n.padding:0;let l=["years","months","days","hours","minutes","seconds"],u=n.unit;return Array.isArray(n.unit)&&(l=n.unit,u=void 0),W0(r,this.plus(s),{...n,numeric:"always",units:l,unit:u})}toRelativeCalendar(n={}){return this.isValid?W0(n.base||Fe.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(Fe.isDateTime))throw new Tn("min requires all arguments be DateTimes");return U0(n,r=>r.valueOf(),Math.min)}static max(...n){if(!n.every(Fe.isDateTime))throw new Tn("max requires all arguments be DateTimes");return U0(n,r=>r.valueOf(),Math.max)}static fromFormatExplain(n,r,s={}){const{locale:l=null,numberingSystem:u=null}=s,f=Et.fromOpts({locale:l,numberingSystem:u,defaultToEN:!0});return Bw(f,n,r)}static fromStringExplain(n,r,s={}){return Fe.fromFormatExplain(n,r,s)}static buildFormatParser(n,r={}){const{locale:s=null,numberingSystem:l=null}=r,u=Et.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new Lw(u,n)}static fromFormatParser(n,r,s={}){if(Pe(n)||Pe(r))throw new Tn("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:u=null}=s,f=Et.fromOpts({locale:l,numberingSystem:u,defaultToEN:!0});if(!f.equals(r.locale))throw new Tn(`fromFormatParser called with a locale of ${f}, but the format parser was created for ${r.locale}`);const{result:h,zone:p,specificOffset:y,invalidReason:b}=r.explainFromTokens(n);return b?Fe.invalid(b):Ji(h,p,s,`format ${r.format}`,n,y)}static get DATE_SHORT(){return ju}static get DATE_MED(){return I1}static get DATE_MED_WITH_WEEKDAY(){return YT}static get DATE_FULL(){return H1}static get DATE_HUGE(){return V1}static get TIME_SIMPLE(){return q1}static get TIME_WITH_SECONDS(){return Y1}static get TIME_WITH_SHORT_OFFSET(){return G1}static get TIME_WITH_LONG_OFFSET(){return Z1}static get TIME_24_SIMPLE(){return P1}static get TIME_24_WITH_SECONDS(){return F1}static get TIME_24_WITH_SHORT_OFFSET(){return X1}static get TIME_24_WITH_LONG_OFFSET(){return K1}static get DATETIME_SHORT(){return Q1}static get DATETIME_SHORT_WITH_SECONDS(){return J1}static get DATETIME_MED(){return W1}static get DATETIME_MED_WITH_SECONDS(){return ew}static get DATETIME_MED_WITH_WEEKDAY(){return GT}static get DATETIME_FULL(){return tw}static get DATETIME_FULL_WITH_SECONDS(){return nw}static get DATETIME_HUGE(){return aw}static get DATETIME_HUGE_WITH_SECONDS(){return rw}}function go(a){if(Fe.isDateTime(a))return a;if(a&&a.valueOf&&Ur(a.valueOf()))return Fe.fromJSDate(a);if(a&&typeof a=="object")return Fe.fromObject(a);throw new Tn(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const UN="3.7.2",$N=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Fe,Duration:pt,FixedOffsetZone:Nn,IANAZone:Ra,Info:So,Interval:Zt,InvalidZone:ow,Settings:Pt,SystemZone:Ro,VERSION:UN,Zone:gs},Symbol.toStringTag,{value:"Module"}));window.Rete=DE;window.React=aE;window.RefComponent=Uh;window.luxon=$N;window.nodeRegistry=Cn;window.sockets=fs;window.socket=Ne;window.apiUrl=di;window.getApiBase=$u;window.apiFetch=async function(a,n={}){const r=di(a);return fetch(r,n)};let ci={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const Sh=new Set;function Hw(a){return Sh.add(a),a({...ci}),()=>Sh.delete(a)}function Wi(a){ci={...ci,...a},Sh.forEach(n=>n({...ci}))}function IN(){return{...ci}}async function HN(){Wi({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(di("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const n=await a.json(),r=n.length;Wi({totalCount:r,status:`Loading ${r} plugins...`});let s=0;for(const u of n){const f=u.split("/").pop().replace(".js","");Wi({status:`Loading ${f}...`});try{await VN(di(u)),s++,Wi({loadedCount:s,progress:Math.round(s/r*100)})}catch(h){console.error(`[PluginLoader] Failed to load ${u}`,h),ci.failedPlugins.push({name:f,error:h.message})}}const l=ci.failedPlugins.length;Wi({isLoading:!1,progress:100,status:l>0?`Loaded ${s} plugins (${l} failed)`:`Loaded ${s} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Wi({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function VN(a){return new Promise((n,r)=>{const s=document.createElement("script");s.src=a,s.onload=n,s.onerror=r,document.body.appendChild(s)})}const Vw=E.createContext(null),tb={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function qN({id:a,type:n,message:r,duration:s,onRemove:l,action:u,actionLabel:f}){const[h,p]=E.useState(!1),y=tb[n]||tb.info;E.useEffect(()=>{if(s>0){const S=setTimeout(()=>{p(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(S)}},[a,s,l]);const b=()=>{p(!0),setTimeout(()=>l(a),300)},v=()=>{u&&u(),b()};return m.jsxs("div",{className:`toast ${y.className} ${h?"toast-exit":""}`,children:[m.jsx("span",{className:"toast-icon",children:y.icon}),m.jsx("span",{className:"toast-message",children:r}),u&&f&&m.jsx("button",{className:"toast-action",onClick:v,children:f}),m.jsx("button",{className:"toast-close",onClick:b,children:""})]})}function YN({children:a}){const[n,r]=E.useState([]);let s=0;const l=E.useCallback((h,p,y={})=>{const b=++s,v=typeof y=="number"?y:y.duration??4e3,S=typeof y=="object"?y.action:null,k=typeof y=="object"?y.actionLabel:null;return r(N=>[...N,{id:b,type:h,message:p,duration:v,action:S,actionLabel:k}]),b},[]),u=E.useCallback(h=>{r(p=>p.filter(y=>y.id!==h))},[]),f={success:(h,p)=>l("success",h,p),error:(h,p)=>l("error",h,typeof p=="number"?p:{duration:6e3,...p}),warning:(h,p)=>l("warning",h,p),info:(h,p)=>l("info",h,p),dismiss:u,dismissAll:()=>r([])};return m.jsxs(Vw.Provider,{value:f,children:[a,m.jsx("div",{className:"toast-container",children:n.map(h=>m.jsx(qN,{id:h.id,type:h.type,message:h.message,duration:h.duration,onRemove:u,action:h.action,actionLabel:h.actionLabel},h.id))})]})}function ep(){const a=E.useContext(Vw);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function GN(){const a=ep();return E.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);function ZN({onSave:a,onLoad:n,onLoadExample:r,onClear:s,onExport:l,onImport:u,hasUnsavedChanges:f,isMerged:h=!1,onToggleMerged:p}){const[y,b]=E.useState(!1),[v,S]=E.useState(!1),[k,N]=E.useState(!1),[G,U]=E.useState(!1),P=ep(),[K,q]=E.useState(()=>{const Ce=localStorage.getItem("dock-position");return Ce?JSON.parse(Ce):{x:20,y:20}}),[Z,ce]=E.useState(!1),[oe,$]=E.useState({x:0,y:0}),[re,ie]=E.useState(!0),[F,ue]=E.useState(!0),[_e,Me]=E.useState(!1),[qe,Ve]=E.useState(new Date),[C,L]=E.useState({backend:Ne.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0},shelly:{connected:!1,deviceCount:0}}),[se,ge]=E.useState({loaded:0,failed:0,total:0});let be;const x=E.useRef(null),M=E.useRef(null);E.useEffect(()=>{be=Hw(Ge=>{let V=0,ne=Ge.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(V=window.nodeRegistry.getAll().length,(!ne||V>ne)&&(ne=V)):V=Ge.loadedCount,ge({loaded:V,failed:Ge.failedPlugins?.length||0,total:ne})});const Ce=Ge=>{Ge.target.tagName==="INPUT"||Ge.target.tagName==="TEXTAREA"||Ge.target.isContentEditable||(Ge.key==="?"||Ge.shiftKey&&Ge.code==="Slash")&&(Ge.preventDefault(),S(!0))};return window.addEventListener("keydown",Ce),()=>window.removeEventListener("keydown",Ce)},[]),E.useEffect(()=>{const Ce=()=>{L(_=>({..._,backend:!0})),Ne.emit("request-hue-status")},Ge=()=>L(_=>({..._,backend:!1})),V=_=>L(ee=>({...ee,ha:{connected:_.connected,wsConnected:_.wsConnected,deviceCount:_.deviceCount||0}})),ne=_=>{_.hue&&L(ee=>({...ee,hue:_.hue})),_.kasa&&L(ee=>({...ee,kasa:_.kasa})),_.shelly&&L(ee=>({...ee,shelly:_.shelly}))},J=_=>{L(ee=>({...ee,hue:{connected:_.connected,deviceCount:_.deviceCount||0,bridgeIp:_.bridgeIp||null}}))};Ne.on("connect",Ce),Ne.on("disconnect",Ge),Ne.on("ha-connection-status",V),Ne.on("device-counts",ne),Ne.on("hue-connection-status",J),L(_=>({..._,backend:Ne.connected})),Ne.connected&&Ne.emit("request-hue-status");const Ee=IN();let ye=0,I=Ee.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(ye=window.nodeRegistry.getAll().length,(!I||ye>I)&&(I=ye)):ye=Ee.loadedCount,ge({loaded:ye,failed:Ee.failedPlugins?.length||0,total:I}),()=>{Ne.off("connect",Ce),Ne.off("disconnect",Ge),Ne.off("ha-connection-status",V),Ne.off("device-counts",ne),Ne.off("hue-connection-status",J),be&&be()}},[]),E.useEffect(()=>{const Ce=setInterval(()=>{Ve(new Date)},1e3);return()=>clearInterval(Ce)},[]);const A=()=>{const Ce={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return qe.toLocaleDateString("en-US",Ce)};E.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(K))},[K]);const X=Ce=>{h||Ce.target.closest(".dock-header")&&(ce(!0),$({x:Ce.clientX-K.x,y:Ce.clientY-K.y}))},me=Ce=>{Z&&q({x:Ce.clientX-oe.x,y:Ce.clientY-oe.y})},je=()=>{ce(!1)};E.useEffect(()=>{if(Z)return window.addEventListener("mousemove",me),window.addEventListener("mouseup",je),()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",je)}},[Z,oe]);const Ie=()=>{M.current?.click()},Be=Ce=>{const Ge=Ce.target.files?.[0];if(Ge){const V=new FileReader;V.onload=ne=>{try{const J=JSON.parse(ne.target.result);u(J)}catch(J){console.error("Failed to parse JSON:",J),alert("Invalid JSON file")}},V.readAsText(Ge)}Ce.target.value=""},Ue=async()=>{if(!k){N(!0);try{const Ce=await ba("/api/update/check?force=true");if(!Ce.ok){const V=await Ce.text();throw new Error(V||`HTTP ${Ce.status}`)}const Ge=await Ce.json();Ge.hasUpdate?P.info(` Update available: ${Ge.currentVersion}  ${Ge.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{Ne.emit("request-show-update-modal",Ge),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:Ge}))}}):P.success(` You're up to date! (v${Ge.currentVersion})`,4e3)}catch(Ce){console.error("Failed to check for updates:",Ce),P.error("Failed to check for updates: "+Ce.message,5e3)}finally{N(!1)}}},kt=async()=>{if(!G){U(!0);try{const Ce=await ba("/api/update/plugins/check");if(!Ce.ok)throw new Error(`HTTP ${Ce.status}`);const Ge=await Ce.json();if(!Ge.hasUpdates){P.success(" Plugins are up to date!",3e3);return}const V=(Ge.newPlugins?.length||0)+(Ge.modifiedPlugins?.length||0);P.info(` ${V} plugin update(s) available. Downloading...`,3e3);const ne=await ba("/api/update/plugins",{method:"POST"});if(!ne.ok)throw new Error(`HTTP ${ne.status}`);const J=await ne.json();J.success&&J.updated?.length>0?P.success(` Updated ${J.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):J.updated?.length===0?P.info("No plugins needed updating",3e3):P.error("Plugin update failed: "+(J.error||"Unknown error"),5e3)}catch(Ce){console.error("Failed to update plugins:",Ce),P.error("Failed to update plugins: "+Ce.message,5e3)}finally{U(!1)}}};return m.jsxs("div",{ref:x,className:`dock-container ${h?"dock-merged":""}`,style:{...h?{cursor:"default"}:{left:`${K.x}px`,top:`${K.y}px`,cursor:Z?"grabbing":"default"}},onMouseDown:X,children:[m.jsxs("div",{className:"dock-header",style:{cursor:h?"default":"grab"},children:[m.jsxs("div",{className:"dock-header-row",children:[m.jsx("span",{className:"dock-title",children:" Control Panel"}),m.jsx("button",{type:"button",className:"dock-btn-small",onClick:Ce=>{Ce.stopPropagation(),p?.()},onMouseDown:Ce=>Ce.stopPropagation(),title:h?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:h?"Pop out":"Merge"})]}),m.jsx("span",{className:"dock-datetime",children:A()})]}),m.jsxs("div",{className:"dock-section",children:[m.jsx("div",{className:"dock-section-header",onClick:()=>ie(!re),children:m.jsxs("span",{children:[re?"":""," Graph Tools ",f&&m.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),re&&m.jsxs("div",{className:"dock-section-content",children:[m.jsxs("button",{onClick:a,className:`dock-btn ${f?"dock-btn-unsaved":""}`,children:[" Save ",f&&"*"]}),m.jsx("button",{onClick:n,className:"dock-btn",children:" Load Last"}),m.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),m.jsx("button",{onClick:Ie,className:"dock-btn",children:" Import File"}),m.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),m.jsx("input",{ref:M,type:"file",accept:".json",style:{display:"none"},onChange:Be})]})]}),m.jsxs("div",{className:"dock-section",children:[m.jsx("div",{className:"dock-section-header",onClick:()=>ue(!F),children:m.jsxs("span",{children:[F?"":""," Connection Status"]})}),F&&m.jsxs("div",{className:"dock-section-content dock-status-grid",children:[m.jsxs("div",{className:`dock-status-item ${C.backend?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Backend"}),m.jsx("span",{className:"dock-status-value",children:C.backend?"Connected":"Offline"})]}),m.jsxs("div",{className:`dock-status-item ${C.ha.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),m.jsx("span",{className:"dock-status-value",children:C.ha.connected?`${C.ha.deviceCount} devices`:"Offline"})]}),m.jsxs("div",{className:`dock-status-item ${C.hue.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),m.jsx("span",{className:"dock-status-value",children:C.hue.connected?`${C.hue.deviceCount||0} lights${C.hue.bridgeIp?` (${C.hue.bridgeIp})`:""}`:"Offline"})]}),C.kasa.deviceCount>0&&m.jsxs("div",{className:`dock-status-item ${C.kasa.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Kasa"}),m.jsxs("span",{className:"dock-status-value",children:[C.kasa.deviceCount," devices"]})]}),m.jsxs("div",{className:"dock-status-item plugins",children:[m.jsx("span",{className:"dock-status-dot",style:{background:se.failed>0?"#f59e0b":"#10b981"}}),m.jsx("span",{className:"dock-status-label",children:"Plugins"}),m.jsx("span",{className:"dock-status-value",children:se.total>0?`${se.loaded} / ${se.total} loaded${se.failed>0?` (${se.failed} failed)`:""}`:`${se.loaded} loaded`})]})]})]}),m.jsx(VC,{isExpanded:_e,onToggle:()=>Me(!_e)}),m.jsx("div",{className:"dock-section",children:m.jsxs("div",{className:"dock-section-content",children:[m.jsx("button",{onClick:()=>b(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),m.jsx("button",{onClick:()=>S(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),m.jsx("button",{onClick:Ue,disabled:k,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:k?" Checking...":" Check for Updates"}),m.jsx("button",{onClick:kt,disabled:G,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:G?" Updating...":" Update Plugins"})]})}),m.jsx($C,{isOpen:y,onClose:()=>b(!1)}),m.jsx(HC,{isOpen:v,onClose:()=>S(!1)})]})}function PN({dockSlotRef:a}){const[n,r]=E.useState(!0),[s,l]=E.useState(!0),[u,f]=E.useState(null),[h,p]=E.useState(null),[y,b]=E.useState(Ne?.connected??!1),[v,S]=E.useState({connected:!1,wsConnected:!1,deviceCount:0}),[k,N]=E.useState(new Map),[G,U]=E.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[P,K]=E.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),q=E.useRef(null);E.useEffect(()=>{if(!Ne)return;const F=()=>{b(!0),Ne.emit("request-ha-status")},ue=()=>{b(!1),S({connected:!1,wsConnected:!1,deviceCount:0})},_e=qe=>{S(qe)};Ne.on("connect",F),Ne.on("disconnect",ue),Ne.on("ha-connection-status",_e),Ne.on("forecast-update",qe=>{f(qe)});const Me=qe=>{const{id:Ve,state:C,on:L,name:se}=qe;if(!Ve)return;const ge=L!==void 0?L:C==="on"||C==="playing"||C==="open",be=se||qe.friendly_name||qe.attributes?.friendly_name||Ve.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(Ve.includes("light.")||Ve.includes("switch.")||Ve.startsWith("kasa_"))&&N(M=>{const A=new Map(M);return ge?A.set(Ve,{name:be,on:!0}):A.delete(Ve),A})};return Ne.on("device-state-update",Me),Ne.emit("request-forecast"),Ne.connected&&(b(!0),Ne.emit("request-ha-status")),()=>{Ne.off("connect",F),Ne.off("disconnect",ue),Ne.off("ha-connection-status",_e),Ne.off("forecast-update"),Ne.off("device-state-update",Me)}},[]);const Z=()=>{Ne?.emit("request-forecast")},ce=F=>{const ue=(F||"").toLowerCase();return ue.includes("clear")||ue.includes("sun")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"5"}),m.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),m.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),m.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),m.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),m.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),m.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),m.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),m.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):ue.includes("rain")||ue.includes("drizzle")||ue.includes("shower")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),m.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),m.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),m.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),m.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),m.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),m.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):ue.includes("partly")||ue.includes("partial")||ue.includes("few")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),m.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),m.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),m.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),m.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),m.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),m.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):ue.includes("snow")||ue.includes("flurr")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),m.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),m.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),m.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),m.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),m.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),m.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):ue.includes("thunder")||ue.includes("storm")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),m.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):ue.includes("fog")||ue.includes("mist")||ue.includes("haze")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),m.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),m.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},oe=F=>{if(!F)return{day:"",date:""};let ue;if(typeof F=="string"&&F.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const qe=F.match(/(\w+),\s*(\w+)\s*(\d+)/);return qe?{day:`${qe[1]}, ${qe[2]}`,date:qe[3]}:{day:F,date:""}}if(ue=new Date(parseInt(F)||F),isNaN(ue.getTime()))return{day:F,date:""};const _e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Me=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${_e[ue.getDay()]}, ${Me[ue.getMonth()]}`,date:`${ue.getDate()}`}},$=()=>{if(!u||!u.length)return m.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(h!==null){const F=u[h],ue=oe(F.date||F.day);return m.jsxs("div",{className:"forecast-detail",children:[m.jsxs("div",{className:"forecast-detail-header",children:[m.jsx("button",{className:"detail-back-btn",onClick:()=>p(null),children:" Back"}),m.jsxs("span",{className:"detail-date",children:[ue.day," ",ue.date]})]}),m.jsxs("div",{className:"detail-main",children:[m.jsx("div",{className:"detail-icon",children:ce(F.conditions||F.condition)}),m.jsxs("div",{className:"detail-temps",children:[m.jsxs("div",{className:"detail-high",children:[F.high,""]}),m.jsxs("div",{className:"detail-low",children:[F.low,""]})]}),m.jsx("div",{className:"detail-condition",children:F.conditions||F.condition||"N/A"})]}),F.description&&m.jsx("div",{className:"detail-description",children:F.description}),m.jsxs("div",{className:"detail-stats",children:[m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Precipitation"}),m.jsx("span",{className:"stat-value",children:F.precipitation||F.precip||"0%"})]}),F.humidity&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Humidity"}),m.jsxs("span",{className:"stat-value",children:[F.humidity,"%"]})]}),F.wind&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Wind"}),m.jsx("span",{className:"stat-value",children:F.wind})]}),(F.sunrise||F.sunset)&&m.jsxs("div",{className:"detail-sun-times",children:[F.sunrise&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:" Sunrise"}),m.jsx("span",{className:"stat-value",children:F.sunrise})]}),F.sunset&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:" Sunset"}),m.jsx("span",{className:"stat-value",children:F.sunset})]})]})]})]})}return u.slice(0,5).map((F,ue)=>{const _e=oe(F.date||F.day);return m.jsxs("div",{className:"forecast-card",onClick:()=>p(ue),children:[m.jsxs("div",{className:"forecast-row-top",children:[m.jsxs("div",{className:"forecast-date",children:[m.jsx("span",{className:"date-day",children:_e.day}),m.jsx("span",{className:"date-num",children:_e.date})]}),m.jsx("div",{className:"forecast-icon",children:ce(F.conditions||F.condition)})]}),m.jsxs("div",{className:"forecast-row-bottom",children:[m.jsxs("span",{className:"temp-low",children:[F.low,""]}),m.jsxs("span",{className:"temp-high",children:[F.high,""]}),m.jsxs("span",{className:"precip-group",children:[m.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),m.jsx("path",{d:"M16 14v4"}),m.jsx("path",{d:"M8 14v4"}),m.jsx("path",{d:"M12 16v4"})]}),m.jsx("span",{className:"precip-value",children:F.precipitation||F.precip||"0%"})]})]})]},ue)})},re=F=>{F.preventDefault();const ue=F.clientX,_e=G,Me=Ve=>{const C=ue-Ve.clientX,L=Math.max(250,Math.min(500,_e+C));U(L),localStorage.setItem("forecastPanelWidth",L)},qe=()=>{document.removeEventListener("mousemove",Me),document.removeEventListener("mouseup",qe)};document.addEventListener("mousemove",Me),document.addEventListener("mouseup",qe)},ie=F=>{F.preventDefault(),F.stopPropagation();const ue=F.clientY,_e=P,Me=Ve=>{const C=ue-Ve.clientY,L=Math.max(100,Math.min(500,_e+C));K(L),localStorage.setItem("devicesOnHeight",L)},qe=()=>{document.removeEventListener("mousemove",Me),document.removeEventListener("mouseup",qe)};document.addEventListener("mousemove",Me),document.addEventListener("mouseup",qe)};return m.jsxs("div",{className:"forecast-panel",style:{width:G},children:[m.jsx("div",{className:"forecast-resize-handle",ref:q,onMouseDown:re,children:m.jsx("div",{className:"forecast-resize-grip"})}),m.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!n),children:[m.jsx("span",{children:"5-Day Forecast"}),m.jsx("button",{onClick:F=>{F.stopPropagation(),Z()},className:"forecast-refresh-btn",children:"Refresh"})]}),n&&m.jsx("div",{className:"forecast-panel-content",children:$()}),m.jsx("div",{className:"forecast-dock-slot",ref:a}),m.jsxs("div",{className:"devices-on-section",style:{height:s?P:"auto"},children:[m.jsx("div",{className:"devices-resize-handle",onMouseDown:ie,children:m.jsx("div",{className:"devices-resize-grip"})}),m.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[m.jsxs("span",{children:["Devices ON (",k.size,")"]}),m.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&m.jsx("div",{className:"devices-on-list",children:k.size===0?m.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(k.values()).sort((F,ue)=>F.name.localeCompare(ue.name)).map((F,ue)=>m.jsxs("div",{className:"device-on-item",children:[m.jsx("span",{className:"device-on-indicator"}),m.jsx("span",{className:"device-on-name",children:F.name})]},ue))})]}),m.jsxs("div",{className:"status-indicators",children:[m.jsx("div",{className:`connection-status ${y?"connected":"disconnected"}`,children:y?"Backend":"Backend X"}),m.jsx("div",{className:`connection-status ${v.connected?"connected":"disconnected"}`,children:v.connected?`HA (${v.deviceCount})`:"HA X"})]})]})}function FN({width:a=180,panelRef:n,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:u,onCreateNode:f}){const h=window.T2Controls?.Tooltip,p=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,y=(s||[]).reduce((v,S)=>v+(S?.labels||[]).length,0),b=v=>{const S=(v||"").toString().trim();S&&u?.(S)};return m.jsxs("div",{ref:n,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:v=>v.stopPropagation(),children:[m.jsx("div",{className:"favorites-header",children:m.jsxs("div",{className:"favorites-header-row",children:[m.jsx("span",{className:"favorites-title",children:" Favorites"}),h?m.jsx(h,{text:p,position:"bottom",children:m.jsx("span",{className:"favorites-help-fallback",children:"?"})}):m.jsx("span",{className:"favorites-help-fallback",title:p,children:"?"})]})}),m.jsx("div",{className:"favorites-list",children:y===0?m.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(v=>{const S=(v?.category||"Other").toString(),k=Array.isArray(v?.labels)?v.labels:[];return k.length===0?null:m.jsxs("div",{className:"favorites-group",children:[m.jsx("div",{className:"favorites-divider",children:m.jsx("span",{className:"favorites-divider-text",children:S})}),k.map(N=>m.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>f?.(N),onContextMenu:G=>{G.preventDefault(),G.stopPropagation(),b(N)},title:"Click: add to canvas  Right-click: remove",children:N},`${S}:${N}`))]},S)})})]})}function XN({visible:a,position:n,items:r,onClose:s,onSelect:l}){const u=E.useRef(null),f=E.useRef(null),[h,p]=E.useState(null),[y,b]=E.useState({x:0,y:0}),[v,S]=E.useState(""),k=E.useRef(null),N=E.useRef(null);E.useEffect(()=>{a&&(S(""),p(null),setTimeout(()=>{f.current?.focus()},50))},[a]);const G=E.useMemo(()=>{if(!v.trim())return r;const $=v.toLowerCase(),re=[];for(const ie of r)if(ie.subitems)for(const F of ie.subitems)F.label&&F.label.toLowerCase().includes($)&&re.push({...F,categoryHint:ie.label});else ie.label&&ie.label.toLowerCase().includes($)&&re.push(ie);return re},[r,v]),U=v.trim().length>0;E.useEffect(()=>{if(!a)return;const $=ie=>{u.current&&!u.current.contains(ie.target)&&s()},re=ie=>{ie.key==="Escape"&&s()};return document.addEventListener("mousedown",$),document.addEventListener("keydown",re),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("keydown",re)}},[a,s]),E.useEffect(()=>()=>{k.current&&clearTimeout(k.current),N.current&&clearTimeout(N.current)},[]);const P=E.useCallback(($,re,ie)=>{N.current&&(clearTimeout(N.current),N.current=null),re.subitems&&re.subitems.length>0?p(ie):p(null)},[]),K=E.useCallback(()=>{N.current=setTimeout(()=>{p(null)},150)},[]),q=E.useCallback(()=>{N.current&&(clearTimeout(N.current),N.current=null)},[]),Z=E.useCallback(()=>{N.current=setTimeout(()=>{p(null)},100)},[]),ce=E.useCallback($=>{$.subitems&&$.subitems.length>0||(l($),s())},[l,s]);if(!a)return null;const oe={...n};if(typeof window<"u"){const re=Math.min(G.length*36+50,400);n.x+220>window.innerWidth&&(oe.x=window.innerWidth-220-10),n.y+re>window.innerHeight&&(oe.y=Math.max(10,window.innerHeight-re-10))}return m.jsxs("div",{ref:u,className:"fast-context-menu",style:{left:oe.x,top:oe.y},children:[m.jsxs("div",{className:"fast-menu-search",children:[m.jsx("input",{ref:f,type:"text",placeholder:"Search nodes...",value:v,onChange:$=>S($.target.value),onClick:$=>$.stopPropagation(),onKeyDown:$=>{if($.key==="Enter"&&G.length===1){const re=G[0];re.subitems||ce(re)}$.stopPropagation()}}),v&&m.jsx("span",{className:"search-clear",onClick:$=>{$.stopPropagation(),S(""),f.current?.focus()},children:""})]}),m.jsx("div",{className:"fast-menu-results",children:G.length===0?m.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):U?G.map(($,re)=>m.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>ce($),children:[m.jsx("span",{className:"menu-label",children:$.label}),$.categoryHint&&m.jsx("span",{className:"category-hint",children:$.categoryHint})]},$.label||re)):G.map(($,re)=>m.jsxs("div",{className:`fast-menu-item ${$.subitems?"has-submenu":""} ${h===re?"active":""}`,onMouseEnter:ie=>P(ie,$,re),onMouseLeave:K,onClick:()=>ce($),children:[$.icon&&m.jsx("span",{className:"menu-icon",children:$.icon}),m.jsx("span",{className:"menu-label",children:$.label}),$.subitems&&m.jsx("span",{className:"submenu-arrow",children:""}),h===re&&$.subitems&&m.jsx("div",{className:"fast-submenu",onMouseEnter:q,onMouseLeave:Z,children:$.subitems.map((ie,F)=>m.jsx("div",{className:"fast-menu-item",title:ie.description||"",onClick:ue=>{ue.stopPropagation(),ce(ie)},children:m.jsx("span",{className:"menu-label",children:ie.label})},ie.label||F))})]},$.label||re))})]})}function nb(a){const n=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))n.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,u)=>{l.id?(s.has(l.id)&&n.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):n.push(`Node at index ${u} is missing "id"`),l.label||n.push(`Node ${l.id||u} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||u} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&n.push(`Node ${l.id||u} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))n.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(u=>u.id)||[]),l=new Set;a.connections.forEach((u,f)=>{u.source?s.has(u.source)||n.push(`Connection ${f} references non-existent source node: ${u.source}`):n.push(`Connection at index ${f} is missing "source"`),u.target?s.has(u.target)||n.push(`Connection ${f} references non-existent target node: ${u.target}`):n.push(`Connection at index ${f} is missing "target"`),u.sourceOutput||r.push(`Connection ${f} is missing "sourceOutput"`),u.targetInput||r.push(`Connection ${f} is missing "targetInput"`);const h=`${u.source}:${u.sourceOutput}->${u.target}:${u.targetInput}`;l.has(h)&&r.push(`Duplicate connection: ${h}`),l.add(h),u.source===u.target&&r.push(`Self-connection detected on node ${u.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:n.length===0,errors:n,warnings:r}}function ab(a){const n=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],n.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],n.push("Created empty connections array"),r=!0);const l=new Set,u=new Set;return s.nodes=s.nodes.filter((f,h)=>{if(!f.id)return n.push(`Removed node at index ${h} (missing ID)`),r=!0,!1;if(u.has(f.id)){const p=`${f.id}_${Date.now()}_${h}`;n.push(`Renamed duplicate node ID ${f.id} to ${p}`),f.id=p,r=!0}return u.add(f.id),l.add(f.id),f.label||(f.label="Unknown Node",n.push(`Set label for node ${f.id} to "Unknown Node"`),r=!0),!f.position||typeof f.position!="object"?(f.position={x:0,y:0},n.push(`Reset position for node ${f.id}`),r=!0):(Number.isFinite(f.position.x)||(f.position.x=0,n.push(`Fixed NaN x position for node ${f.id}`),r=!0),Number.isFinite(f.position.y)||(f.position.y=0,n.push(`Fixed NaN y position for node ${f.id}`),r=!0)),!0}),s.connections=s.connections.filter((f,h)=>l.has(f.source)?l.has(f.target)?!0:(n.push(`Removed connection ${h} (invalid target: ${f.target})`),r=!0,!1):(n.push(`Removed connection ${h} (invalid source: ${f.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,n.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,n.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,n.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:n}}class Sj extends Nt.Control{constructor(n,r){super(),this.label=n,this.onClick=r}}function KN({data:a}){return m.jsx("button",{onPointerDown:n=>n.stopPropagation(),onDoubleClick:n=>n.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.25)",n.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.1)",n.currentTarget.style.boxShadow="none"},children:a.label})}class xj extends Nt.Control{constructor(n,r,s,l){super(),this.label=n,this.values=r,this.value=s,this.onChange=l}setValue(n){this.value=n}}function QN({data:a}){const[,n]=E.useReducer(f=>f+1,0),[r,s]=E.useState(a.value);E.useEffect(()=>{s(a.value)},[a.value]),E.useEffect(()=>{n()},[a]);const l=f=>{const h=f.target.value;s(h),typeof a.setValue=="function"?a.setValue(h):a.value=h,a.onChange&&a.onChange(h)},u=a.values||[];return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("select",{value:r,onChange:l,onPointerDown:f=>f.stopPropagation(),onDoubleClick:f=>f.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:u.map(f=>m.jsx("option",{value:f,style:{background:"#0a0f14",color:"#00f3ff"},children:f},f))})]})}class Ej extends Nt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function JN({data:a}){const[n,r]=E.useState(a.value),s=l=>{const u=l.target.value;r(u),a.value=u,a.onChange&&a.onChange(u)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class kj extends Nt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function WN({data:a}){const[n,r]=E.useState(a.value),s=l=>{const u=l.target.checked;r(u),a.value=u,a.onChange&&a.onChange(u)};return m.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[m.jsx("input",{type:"checkbox",checked:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),m.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Cj extends Nt.Control{constructor(n,r,s,l={}){super(),this.label=n,this.value=r,this.onChange=s,this.options=l}}function ej({data:a}){const[n,r]=E.useState(a.value),s=l=>{const u=Number(l.target.value);r(u),a.value=u,a.onChange&&a.onChange(u)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:"number",value:n,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Tj extends Nt.Control{constructor(n,r,s,l="text"){super(),this.label=n,this.value=r,this.onChange=s,this.type=l}}function tj({data:a}){const[n,r]=E.useState(a.value);E.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let u=l.target.value;a.type==="number"&&(u=Number(u)),r(u),a.value=u,a.onChange&&a.onChange(u)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:a.type||"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Oj extends Nt.Control{constructor(n,r){super(),this.deviceId=n,this.getState=r}}function nj({data:a}){const n=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!n)return m.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:m.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=n.on||n.state==="on",l=n.brightness?Math.round(n.brightness/255*100):0,u=n.hs_color||[0,0],[f,h]=u;let p="#e74c3c";s&&(h===0?p="#f1c40f":p=`hsl(${f}, ${h}%, 50%)`);const y={width:"14px",height:"14px",borderRadius:"50%",background:p,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:p,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${p}`:"none"};return m.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[m.jsx("div",{style:y}),m.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:n.name||a.deviceId})]}),m.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${l}%`:"Off"})]}),s&&m.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:m.jsx("div",{style:{width:`${l}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${p})`,transition:"width 0.3s ease-out"}})})]})}function aj(a){const{state:n,color:r}=a.data.data||{},s=n==="on"||n==="open"||n==="playing",l=r||(s?"#00f3ff":"#333");return m.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:u=>u.stopPropagation(),children:[m.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),m.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function rj(a){const{brightness:n,hs_color:r,entityType:s}=a.data.data||{};let l="#444";r&&r.length===2?l=`hsl(${r[0]}, ${r[1]}%, 50%)`:s==="light"&&(l="#ffaa00");const u=n?n/255*100:0;return m.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:f=>f.stopPropagation(),children:m.jsx("div",{style:{width:`${u}%`,height:"100%",backgroundColor:l,transition:"all 0.3s ease",boxShadow:`0 0 10px ${l}`}})})}function ij(a){const{power:n,energy:r}=a.data.data||{};return n===null&&r===null?m.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):m.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("span",{children:"PWR:"}),m.jsx("span",{style:{color:"#00f3ff"},children:n!==null?`${n} W`:"--"})]}),r!==null&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("span",{children:"NRG:"}),m.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const sj=window.EDITOR_DEBUG,Oe=(...a)=>sj&&console.debug("[Editor]",...a),oj=xa.memo(({data:a,socketKey:n,side:r})=>{let l=a?.name||"any";if(n&&typeof n=="string"){const f=n.toLowerCase();f.includes("hsv")||f.includes("color")?l="hsv_info":f.includes("trigger")||f.includes("enable")||f.includes("active")?l="boolean":(f.includes("light")||f.includes("device"))&&(l="light_info")}const u=`${n||"socket"} (${l})`;return xa.createElement("div",{className:"rete-socket","data-socket-type":l,title:u})});function lj(){const a=E.useRef(null),[n,r]=E.useState(null),[s,l]=E.useState(null),[u,f]=E.useState(null),[h,p]=E.useState(null),[y,b]=E.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),v=E.useRef(null),S=E.useRef(null);E.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(y))}catch{}},[y]);const k=E.useRef(!1),N=E.useRef(new Set),G=E.useRef(null),U=E.useRef(!1),P=E.useRef(null),K=E.useRef(null),q=E.useRef(null),Z=E.useRef({x:0,y:0}),ce=E.useRef(!1),oe=E.useRef([]),[$,re]=E.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),ie=180,F="favoriteNodes",[ue,_e]=E.useState(()=>{try{const V=localStorage.getItem(F),ne=V?JSON.parse(V):null,J=I=>{const _=[];for(const ee of Array.isArray(I)?I:[]){if(typeof ee!="string")continue;const ve=ee.trim();ve&&(_.includes(ve)||_.push(ve))}return _};if(Array.isArray(ne)){const I=J(ne);return I.length?[{category:"Other",labels:I}]:[]}const Ee=Array.isArray(ne?.groups)?ne.groups:Array.isArray(ne?.favoriteGroups)?ne.favoriteGroups:Array.isArray(ne)?ne:null;if(!Ee)return[];const ye=[];for(const I of Ee){const _=(I?.category||"Other").toString().trim()||"Other",ee=J(I?.labels);ee.length!==0&&ye.push({category:_,labels:ee})}return ye}catch{return[]}}),Me=E.useRef(null),[qe,Ve]=E.useState(!1),C=E.useRef(null);E.useEffect(()=>{try{localStorage.setItem(F,JSON.stringify({version:2,groups:ue}))}catch{}},[ue]);const L=E.useCallback(V=>{const ne=(V||"").toString().trim();if(!ne)return;const Ee=(Cn.getByLabel(ne)?.category||"Other").toString().trim()||"Other";_e(ye=>{for(const ee of ye)if(Array.isArray(ee?.labels)&&ee.labels.includes(ne))return ye;const I=ye.map(ee=>({category:ee.category,labels:[...ee.labels]})),_=I.findIndex(ee=>ee.category===Ee);return _===-1?I.push({category:Ee,labels:[ne]}):I[_].labels.push(ne),I})},[]),se=E.useCallback(V=>{const ne=(V||"").toString().trim();ne&&_e(J=>{const Ee=[];for(const ye of J){const I=(ye?.labels||[]).filter(_=>_!==ne);I.length!==0&&Ee.push({category:ye.category,labels:I})}return Ee})},[]),ge=E.useCallback(async V=>{const ne=a.current,J=P.current,Ee=K.current;if(!ne||!J||!Ee)return;const ye=ne.getBoundingClientRect(),I={x:ye.left+ye.width/2,y:ye.top+ye.height/2};try{const ve=window._t2GetMenuItems;if(typeof ve=="function"){const ke=ve();for(const bt of ke||[])for(const xe of bt.subitems||[])if(xe.label===V&&typeof xe.handler=="function"){await xe.handler(I);return}}}catch(ve){console.warn("[Favorites] Failed to create via context handlers:",ve)}const _=Cn.getByLabel(V);if(!_)return;const ee=()=>{try{G.current?.()}catch{}};try{const ve=_.factory(ee);await J.addNode(ve);const ke=Ee.area.transform,bt=(I.x-ke.x)/ke.k,xe=(I.y-ke.y)/ke.k;await Ee.translate(ve.id,{x:bt,y:xe})}catch(ve){console.warn("[Favorites] Fallback create failed:",ve)}},[]);E.useEffect(()=>{try{const V=Cn.getAll();if(V.length===0)return;const ne=new Map;for(const J of V)J?.label&&ne.set(J.label,(J.category||"Other").toString().trim()||"Other");_e(J=>{const Ee=[],ye=new Map,I=(_,ee)=>{ye.has(_)||(ye.set(_,[]),Ee.push(_));const ve=ye.get(_);ve.includes(ee)||ve.push(ee)};for(const _ of J)for(const ee of _?.labels||[]){const ve=ne.get(ee);ve&&I(ve,ee)}return Ee.map(_=>({category:_,labels:ye.get(_)})).filter(_=>_.labels.length>0)})}catch{}},[n]);const be=E.useCallback(async V=>{await new Promise(Q=>{const le=()=>{const he=V.getBoundingClientRect();he.width>0&&he.height>0?Q():requestAnimationFrame(le)};requestAnimationFrame(le)});const ne=new $r,J=new Ob(V),Ee=new b2,ye=new kC({createRoot:sb.createRoot}),I=new zC;ne.use(I);let _=null,ee=!1;const ve=async()=>{ee||(ee=!0,_&&clearTimeout(_),_=setTimeout(async()=>{ee=!1,_=null;const Q=ne.getNodes(),le=ne.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",Q.map(pe=>`${pe.id}:${pe.label}`)),console.log("[Editor] process() - connections:",le.map(pe=>`${pe.source}:${pe.sourceOutput} -> ${pe.target}:${pe.targetInput}`)),window._debugProcess=!1),I.reset();for(const pe of Q)try{await I.fetch(pe.id)}catch{}},16))},ke=async()=>{_&&(clearTimeout(_),_=null),ee=!1,I.reset();for(const Q of ne.getNodes())try{await I.fetch(Q.id)}catch{}},bt=new Set;let xe=null;const We=Q=>{bt.add(Q),xe||(xe=setTimeout(()=>{xe=null,bt.forEach(le=>{J.update("node",le)}),bt.clear(),ve()},16))},Qe=()=>{ve()},Bt=()=>{const Q=Cn.getAll(),le={};Q.forEach(Ae=>{const et=Ae.category||"Other";le[et]||(le[et]=[]),le[et].push({label:Ae.label,order:Ae.order,description:Ae.description,handler:async _t=>{let Vt;const Wt=()=>{Ae.updateStrategy==="dataflow"?Qe():We(Vt.id)};Vt=Ae.factory(Wt),await ne.addNode(Vt);const qt=J.area.transform,yt=(_t.x-qt.x)/qt.k,Mn=(_t.y-qt.y)/qt.k;await J.translate(Vt.id,{x:yt,y:Mn})}})});const he=window.T2Controls?.THEME?.categories||{};return Object.entries(le).map(([Ae,et])=>({label:Ae,icon:he[Ae]?.icon||"",subitems:et.sort((_t,Vt)=>{const Wt=_t.order??999,qt=Vt.order??999;return Wt!==qt?Wt-qt:_t.label.localeCompare(Vt.label)})})).sort((Ae,et)=>Ae.label.localeCompare(et.label))};window._t2GetMenuItems=Bt,window._t2Editor=ne,window._t2Area=J;const De=Dr.selector();ye.addPreset(Td.classic.setup({customize:{node(Q){const le=Cn.getByInstance(Q.payload);return le?le.component:Td.classic.Node},socket(Q){const le=Q.key,he=Q.side;return function({data:Ae}){return xa.createElement(oj,{data:Ae,socketKey:le,side:he})}},control(Q){if(Q.payload instanceof Nt.Control){const he=Q.payload.constructor.name;if(he==="ButtonControl")return KN;if(he==="DropdownControl")return QN;if(he==="TextControl")return JN;if(he==="SwitchControl")return WN;if(he==="NumberControl")return ej;if(he==="InputControl")return tj;if(he==="DeviceStateControl")return nj;if(he==="StatusIndicatorControl")return aj;if(he==="ColorBarControl")return rj;if(he==="PowerStatsControl")return ij}return Td.classic.Control}}})),Ee.addPreset(p2.classic.setup()),ne.use(J),J.use(Ee),J.use(ye),Dr.selectableNodes(J,De,{accumulating:Dr.accumulateOnCtrl()}),Dr.simpleNodesOrder(J),ne.addPipe(Q=>{if(Q.type==="nodecreated"){const le=Q.data,he=Cn.getByInstance(le);he&&he.isBackdrop&&setTimeout(()=>{const pe=J.nodeViews.get(le.id);pe&&pe.element&&(pe.element.style.zIndex="-10",Oe("[Backdrop] Set z-index on creation for:",le.id))},50)}return Q});let rt=!1,ht=!1,pn={x:0,y:0};Ee.addPipe(Q=>(Q.type==="connectionpick"?(rt=!0,Oe(" Connection pick - wire dragging started")):Q.type==="connectiondrop"&&(rt=!1,ht=!1,Oe(" Connection drop - wire dragging ended")),Q));const Ft=Q=>{if(rt)if(Q.ctrlKey||Q.metaKey)if(!ht)ht=!0,pn={x:Q.clientX,y:Q.clientY},V.style.cursor="grab";else{const le=Q.clientX-pn.x,he=Q.clientY-pn.y;if(le!==0||he!==0){const pe=J.area.transform;J.area.translate(pe.x+le,pe.y+he),pn={x:Q.clientX,y:Q.clientY}}}else ht&&(ht=!1,V.style.cursor="")},jt=Q=>{(Q.key==="Control"||Q.key==="Meta")&&ht&&(ht=!1,V.style.cursor="")};window.addEventListener("pointermove",Ft),window.addEventListener("keyup",jt);let Ye=!1,Ze=!1,mt=null,cn=!1,An={x:0,y:0},Sn={x:0,y:0};const D=Q=>{Q.code==="Space"&&Ye&&mt&&(cn=!0,Sn={x:0,y:0},Q.preventDefault())},H=Q=>{if(Q.code==="Space"&&(cn=!1,Ze&&mt)){const le=J.nodeViews.get(mt);if(le){const he=J.area.transform,pe=Sn.x/he.k,Ae=Sn.y/he.k,et={x:le.position.x-pe,y:le.position.y-Ae};k.current=!0,J.translate(mt,et).finally(()=>{k.current=!1})}Ze=!1,V.style.cursor=""}},fe=Q=>{if(!(!Ye||!mt))if(cn)if(!Ze)Ze=!0,An={x:Q.clientX,y:Q.clientY},Sn={x:0,y:0},V.style.cursor="grab";else{const le=Q.clientX-An.x,he=Q.clientY-An.y;if(le!==0||he!==0){const pe=J.area.transform;J.area.translate(pe.x+le,pe.y+he),Sn.x+=le,Sn.y+=he,An={x:Q.clientX,y:Q.clientY}}}else Ze&&(Ze=!1,V.style.cursor="")};window.addEventListener("keydown",D,!0),window.addEventListener("keyup",H,!0),V.addEventListener("pointermove",fe,!0);const de=document.createElement("div");de.classList.add("selection-box"),V.appendChild(de);let Le=!1,Ut={x:0,y:0};const Xt=N.current,Xe=()=>{Le&&(Oe(" Safety reset: clearing stuck lasso selection"),Le=!1,de.style.display="none")},Kt=()=>{Xe(),window.resetEditorDragState&&window.resetEditorDragState()},At=()=>{document.hidden&&(Xe(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",Kt),document.addEventListener("visibilitychange",At);const Ct=Q=>{try{const le=Q.target;le&&(le.tagName==="INPUT"||le.tagName==="TEXTAREA"||le.isContentEditable)||(V.tabIndex=-1,V.focus())}catch{}if((Q.ctrlKey||Q.metaKey)&&Q.button===0){Q.stopPropagation(),Q.preventDefault(),Le=!0;const le=V.getBoundingClientRect();Ut={x:Q.clientX-le.left,y:Q.clientY-le.top},de.style.display="block",de.style.left=`${Ut.x}px`,de.style.top=`${Ut.y}px`,de.style.width="0px",de.style.height="0px",Q.shiftKey||(Xt.forEach(he=>{const pe=J.nodeViews.get(he);pe&&pe.element&&(pe.element.classList.remove("selected"),pe.element.style.outline="")}),Xt.clear(),De&&De.entities&&Array.from(De.entities).forEach(he=>De.remove(he)))}},xs=Q=>{if(!Le)return;const le=V.getBoundingClientRect(),he=Q.clientX-le.left,pe=Q.clientY-le.top,Ae=Math.min(Ut.x,he),et=Math.min(Ut.y,pe),_t=Math.abs(he-Ut.x),Vt=Math.abs(pe-Ut.y);de.style.left=`${Ae}px`,de.style.top=`${et}px`,de.style.width=`${_t}px`,de.style.height=`${Vt}px`},Es=Q=>{if(!Le)return;const le=de.getBoundingClientRect();if(Le=!1,de.style.display="none",le.width<5&&le.height<5)return;const he=[];ne.getNodes().forEach(pe=>{const Ae=J.nodeViews.get(pe.id);if(Ae&&Ae.element){const et=Ae.element.getBoundingClientRect();le.left<=et.left&&le.right>=et.right&&le.top<=et.top&&le.bottom>=et.bottom&&he.push({node:pe,view:Ae})}}),he.forEach(({node:pe,view:Ae})=>{Xt.add(pe.id),De.add({id:pe.id,label:"node",translate(et,_t){},unselect(){Ae.element.classList.remove("selected"),Ae.element.style.outline=""}},!1),Ae.element.classList.add("selected"),Ae.element.style.outline="3px solid #00f3ff"})},ks=()=>{Xt.size>0&&(Xt.forEach(Q=>{const le=J.nodeViews.get(Q);le&&le.element&&(le.element.classList.remove("selected"),le.element.style.outline="")}),Xt.clear()),De&&De.entities&&(De.entities instanceof Map?Array.from(De.entities.values()):Array.from(De.entities)).forEach(le=>{le.unselect&&le.unselect(),De.remove(le)}),ne.getNodes().forEach(Q=>{const le=J.nodeViews.get(Q.id);le&&le.element&&le.element.classList.remove("selected")})},pi=Q=>{if(!Q.ctrlKey&&!Q.metaKey&&!Le){let le=!1;for(const[he,pe]of J.nodeViews)if(pe.element.contains(Q.target)){le=!0;break}if(!le){const he=Q.target;(he===V||he.classList.contains("rete-area")||he.closest('[data-testid="area"]'))&&ks()}}};V.addEventListener("pointerdown",Ct,{capture:!0}),V.addEventListener("click",pi),window.addEventListener("pointermove",xs),window.addEventListener("pointerup",Es),ne.addPipe(Q=>((Q.type==="connectioncreated"||Q.type==="connectionremoved")&&ve(),Q));let da={activeBackdropId:null,isDragging:!1},sr=!1,xn=null;const Gt=Q=>{sr=Q,xn&&(clearTimeout(xn),xn=null),Q&&(xn=setTimeout(()=>{sr&&(Oe(" Safety reset: clearing stuck isGroupMoving"),sr=!1),xn=null},500))},En=()=>{Le&&(Oe(" Resetting stuck lasso selection"),Le=!1,de.style.display="none"),sr&&(Oe(" Resetting stuck group moving"),Gt(!1)),da.isDragging&&(Oe(" Resetting stuck backdrop drag"),da.isDragging=!1,da.activeBackdropId=null)};window.resetEditorDragState=En;function ka(){const Q=ne.getNodes(),le=Q.filter(pe=>{const Ae=Cn.getByInstance(pe);return Ae&&Ae.isBackdrop}),he=Q.filter(pe=>{const Ae=Cn.getByInstance(pe);return!Ae||!Ae.isBackdrop});le.forEach(pe=>{const Ae=J.nodeViews.get(pe.id);if(!Ae)return;Ae.element&&(Ae.element.style.zIndex="-10");const et=Ae.position,_t=[],Vt=pe.properties.width||400,Wt=pe.properties.height||300;he.forEach(yt=>{const Mn=J.nodeViews.get(yt.id);if(!Mn)return;Mn.element&&parseInt(Mn.element.style.zIndex||"0",10)<0&&(Mn.element.style.zIndex="1");const La=Mn.position,Ba=yt.width||180,or=yt.height||100,Uo=La.x+Ba/2,Cs=La.y+or/2;Uo>=et.x&&Uo<=et.x+Vt&&Cs>=et.y&&Cs<=et.y+Wt&&_t.push(yt.id)});const qt=pe.properties.capturedNodes.length;pe.properties.capturedNodes=_t,qt!==_t.length&&pe.changeCallback&&pe.changeCallback()})}return J.updateBackdropCaptures=ka,J.addPipe(Q=>{if(Q.type==="nodepicked"){const le=Q.data.id,he=ne.getNode(le);Ye=!0,mt=le,Ze=!1;try{if(he&&C?.current!==void 0){const Ae=J.nodeViews.get(le)?.position||{x:0,y:0};C.current={nodeId:le,label:he.label,startPos:Ae,active:!1,over:!1}}}catch{}if(he){const Ae=Cn.getByInstance(he);if(Ae&&Ae.isBackdrop&&he.properties.locked)return}!ce.current&&!Xt.has(le)&&(Xt.forEach(Ae=>{const et=J.nodeViews.get(Ae);et&&et.element&&(et.element.classList.remove("selected"),et.element.style.outline="")}),Xt.clear()),Xt.add(le);const pe=J.nodeViews.get(le);pe&&pe.element&&(pe.element.classList.add("selected"),pe.element.style.outline="3px solid #00f3ff")}return Q}),J.addPipe(Q=>{try{if(k.current)return Q;const le=he=>{const pe=Me.current?.getBoundingClientRect();if(!pe)return!1;const et=J.nodeViews.get(he)?.element;if(!et)return!1;const _t=et.getBoundingClientRect(),Vt=_t.left+_t.width/2,Wt=_t.top+_t.height/2;return Vt>=pe.left&&Vt<=pe.right&&Wt>=pe.top&&Wt<=pe.bottom};if(Q.type==="nodetranslate"){const he=C.current;if(!he)return Q;const pe=Q.data?.id;if(!pe||he.nodeId!==pe)return Q;he.active||(he.active=!0,!he.startPos&&Q.data?.previous&&(he.startPos=Q.data.previous));const Ae=le(pe);return Ae!==he.over&&(he.over=Ae,Ve(Ae)),Q}if(Q.type==="nodedragged"){const he=C.current;if(!he)return Q;const pe=Q.data?.id;if(!pe||he.nodeId!==pe)return Q;if(he.active&&le(pe)){L(he.label);const et=he.startPos;et&&setTimeout(()=>{try{J.translate(pe,et)}catch{}},0)}return C.current=null,Ve(!1),Q}}catch{}return Q}),J.addPipe(Q=>{if(Q.type==="render"&&Q.data?.payload){const le=Q.data.payload,he=Cn.getByInstance(le);he&&he.isBackdrop&&setTimeout(()=>{const pe=J.nodeViews.get(le.id);if(pe&&pe.element){pe.element.style.zIndex!=="-10"&&(pe.element.style.zIndex="-10");const Ae=le.properties.locked?"none":"auto";pe.element.style.pointerEvents!==Ae&&(pe.element.style.pointerEvents=Ae)}},0)}if(Q.type==="nodetranslate"){if(k.current||sr)return Q;const le=Q.data.id,he=ne.getNode(le);if(!he)return Q;const pe=Q.data.position,Ae=Q.data.previous,et=pe.x-Ae.x,_t=pe.y-Ae.y;if(et===0&&_t===0)return Q;if(Ze&&mt===le)return{...Q,data:{...Q.data,position:Q.data.previous}};if(Xt.size>1&&Xt.has(le)){Gt(!0);const Wt=[];return Xt.forEach(qt=>{if(qt!==le){const yt=J.nodeViews.get(qt);if(yt){const Mn=yt.position.x+et,La=yt.position.y+_t;Wt.push(J.translate(qt,{x:Mn,y:La}))}}}),Promise.all(Wt).then(()=>{Gt(!1)}),Q}const Vt=Cn.getByInstance(he);if(Vt&&Vt.isBackdrop){if(he.properties.locked)return{...Q,data:{...Q.data,position:Q.data.previous}};if(da.activeBackdropId!==le&&(da.activeBackdropId=le,da.isDragging=!0,ka()),he.properties.capturedNodes.length>0){Gt(!0);const Wt=[];return he.properties.capturedNodes.forEach(qt=>{if(!Xt.has(qt)){const yt=J.nodeViews.get(qt);if(yt){const Mn=yt.position.x+et,La=yt.position.y+_t;Wt.push(J.translate(qt,{x:Mn,y:La}))}}}),Promise.all(Wt).then(()=>{Gt(!1)}),Q}}}if(Q.type==="nodedragged"){if(k.current)return Q;da.isDragging=!1,da.activeBackdropId=null,Ye=!1,mt=null,Ze&&(Ze=!1,V.style.cursor=""),ka()}return Q}),P.current=ne,K.current=J,q.current=De,window.updateBackdropLockState=(Q,le)=>{const he=J.nodeViews.get(Q);he&&he.element&&(he.element.style.pointerEvents=le?"none":"auto",Oe(" Updated backdrop lock state:",Q,"locked:",le))},r(ne),l(J),f(I),{destroy:()=>{V.removeEventListener("pointerdown",Ct,{capture:!0}),V.removeEventListener("click",pi),V.removeEventListener("pointermove",fe,!0),window.removeEventListener("pointermove",xs),window.removeEventListener("pointerup",Es),window.removeEventListener("pointermove",Ft),window.removeEventListener("keyup",jt),window.removeEventListener("keydown",D,!0),window.removeEventListener("keyup",H,!0),window.removeEventListener("blur",Kt),document.removeEventListener("visibilitychange",At),xn&&clearTimeout(xn),de.parentNode&&de.parentNode.removeChild(de),J.destroy()},selector:De,editor:ne,area:J,engine:I,process:ve,processImmediate:ke}},[]);E.useEffect(()=>{const V=a.current;if(!V)return;let ne=null,J=null,Ee=null;const ye=new Map,I=ke=>{try{typeof ke.pointerId=="number"&&ye.set(ke.pointerId,{el:ke.target,pointerType:ke.pointerType||"mouse"})}catch{}},_=ke=>{try{typeof ke.pointerId=="number"&&ye.delete(ke.pointerId)}catch{}},ee=ke=>{try{typeof ke.pointerId=="number"&&ye.delete(ke.pointerId)}catch{}};V.addEventListener("gotpointercapture",I,!0),V.addEventListener("lostpointercapture",_,!0),window.addEventListener("pointerup",ee,!0),window.addEventListener("pointercancel",ee,!0),J=HN().then(()=>(Oe(" External plugins loaded, now creating editor..."),be(V))).then(ke=>{ke.editor,ne=ke.area,ke.engine,ke.selector,r(ke.editor),l(ke.area),f(ke.engine),p(ke.selector),G.current=ke.processImmediate,setTimeout(()=>{if(V){V.tabIndex=-1,V.focus();const xe=V.getBoundingClientRect(),We=xe.left+xe.width/2,Qe=xe.top+xe.height/2,Bt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:We,clientY:Qe,deltaY:0});V.dispatchEvent(Bt),Oe(" Container initialized and focused"),window.resetEditorView=()=>{Oe(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const De=V.getBoundingClientRect(),rt=De.left+De.width/2,ht=De.top+De.height/2;V.tabIndex=-1,V.focus();try{const Ft=Array.from(ye.entries());ye.clear(),Ft.forEach(([jt,Ye])=>{const Ze=Ye?.el,mt=Ye?.pointerType||"mouse";try{const cn=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:jt,pointerType:mt});V.dispatchEvent(cn)}catch{}try{V.releasePointerCapture(jt)}catch{}try{Ze&&typeof Ze.releasePointerCapture=="function"&&Ze.releasePointerCapture(jt)}catch{}})}catch{}try{for(let jt=0;jt<5;jt++)try{V.releasePointerCapture(jt)}catch{}V.querySelectorAll(".node, .connection, [data-drag]").forEach(jt=>{try{jt.releasePointerCapture(1)}catch{}})}catch{}if(ne){const Ft=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});V.dispatchEvent(Ft);const jt=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});V.dispatchEvent(jt)}setTimeout(()=>{const Ft=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:rt,clientY:ht,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),jt=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:rt,clientY:ht,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});V.dispatchEvent(Ft),setTimeout(()=>{V.dispatchEvent(jt);const Ye=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:rt,clientY:ht,deltaY:0});V.dispatchEvent(Ye),Oe(" Reset complete")},50)},50)})}}},100);let bt=!1;return Ee=new ResizeObserver(xe=>{for(const We of xe){const{width:Qe,height:Bt}=We.contentRect;!bt&&Qe>0&&Bt>0&&(bt=!0,Oe(" ResizeObserver: Container now has size",Qe,Bt),setTimeout(()=>{V.focus();const De=V.getBoundingClientRect(),rt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:De.left+De.width/2,clientY:De.top+De.height/2,deltaY:0});V.dispatchEvent(rt)},50))}}),Ee.observe(V),ke});const ve=()=>{Oe(" graphLoadComplete event received - triggering view reset");const ke=()=>{window.resetEditorView&&window.resetEditorView()};ke(),setTimeout(ke,100),setTimeout(ke,500),setTimeout(ke,1e3)};return window.addEventListener("graphLoadComplete",ve),()=>{Ee&&Ee.disconnect(),window.removeEventListener("graphLoadComplete",ve),V.removeEventListener("gotpointercapture",I,!0),V.removeEventListener("lostpointercapture",_,!0),window.removeEventListener("pointerup",ee,!0),window.removeEventListener("pointercancel",ee,!0),J.then(ke=>ke.destroy())}},[be]),E.useEffect(()=>{if(!n||!s||!h)return;const V=async _=>{if(_.target.tagName==="INPUT"||_.target.tagName==="TEXTAREA"||_.target.isContentEditable)return;if(Oe(` KeyDown: ${_.code} (Ctrl: ${_.ctrlKey}, Meta: ${_.metaKey})`),_.code==="F5"||(_.ctrlKey||_.metaKey)&&_.shiftKey&&_.code==="KeyR"){_.preventDefault(),Oe(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(_.code==="KeyF"&&!_.ctrlKey&&!_.metaKey&&!_.altKey){_.preventDefault();const xe=K.current,We=P.current;if(xe&&We){const Qe=We.getNodes();Qe.length>0&&(Oe(" Zoom extents triggered (F key)"),Dr.zoomAt(xe,Qe,{scale:.9}).catch(Bt=>{console.warn("[F key] zoomAt failed:",Bt)}))}return}const ee=P.current,ve=K.current,ke=q.current;if(!ee||!ve){Oe(" No editor/area ref available");return}const bt=()=>{const xe=new Set;if(ke&&ke.entities&&ke.entities instanceof Map)for(const[We,Qe]of ke.entities)ee.getNode(We)&&xe.add(We);for(const We of N.current){const Qe=ee.getNode(We);Oe(` Checking node ${We}: exists=${!!Qe}`),Qe&&xe.add(We)}return Oe(` Found ${xe.size} selected nodes:`,Array.from(xe)),Array.from(xe)};if(_.code==="Delete"||_.code==="Backspace"){Oe(" Delete key pressed. lassoSelectedNodesRef.current size:",N.current.size),Oe(" lassoSelectedNodesRef.current contents:",Array.from(N.current));const xe=bt();if(Oe(` Deleting ${xe.length} nodes:`,xe),xe.length>0){const We=[],Qe=[],Bt=new Set(xe);for(const De of ee.getConnections())(Bt.has(De.source)||Bt.has(De.target))&&Qe.push({source:De.source,target:De.target,sourceOutput:De.sourceOutput,targetInput:De.targetInput});for(const De of xe){const rt=ee.getNode(De);rt&&We.push({id:De,label:rt.label,position:ve.nodeViews.get(De)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(rt.properties||{}))})}oe.current.push({type:"delete",nodes:We,connections:Qe}),Oe(" Saved undo state:",oe.current.length,"items in stack");for(const De of xe){const rt=ee.getConnections().filter(ht=>ht.source===De||ht.target===De);for(const ht of rt)await ee.removeConnection(ht.id);await ee.removeNode(De),N.current.delete(De)}}}if((_.ctrlKey||_.metaKey)&&_.code==="KeyZ"&&!_.shiftKey){if(_.preventDefault(),oe.current.length===0){Oe(" Nothing to undo");return}const xe=oe.current.pop();if(Oe(" Undoing:",xe.type,xe.nodes.length,"nodes"),xe.type==="delete"){const We={};k.current=!0;try{for(const Qe of xe.nodes){const Bt=Cn.getByLabel(Qe.label);if(Bt){let De;const rt=()=>{ve&&ve.update("node",De.id),u&&ee&&(u.reset(),setTimeout(()=>{ee.getNodes().forEach(async pn=>{try{await u.fetch(pn.id)}catch{}})},0))},ht=()=>{Bt.updateStrategy==="dataflow"?(u&&u.reset(),u&&ee&&setTimeout(()=>{ee.getNodes().forEach(async pn=>{try{await u.fetch(pn.id)}catch{}})},0)):rt()};De=Bt.factory(ht),Qe.properties&&Object.assign(De.properties,Qe.properties),await ee.addNode(De),await ve.translate(De.id,Qe.position),We[Qe.id]=De.id}}for(const Qe of xe.connections){const Bt=We[Qe.source]||Qe.source,De=We[Qe.target]||Qe.target,rt=ee.getNode(Bt),ht=ee.getNode(De);if(rt&&ht)try{await ee.addConnection(new Nt.Connection(rt,Qe.sourceOutput,ht,Qe.targetInput))}catch(pn){console.warn("[Editor] Could not restore connection:",pn)}}Oe(" Undo complete - restored",xe.nodes.length,"nodes")}finally{k.current=!1,ve?.updateBackdropCaptures?.()}}}if((_.ctrlKey||_.metaKey)&&_.code==="KeyC")try{const xe=bt();if(xe.length===0){Oe(" Nothing selected to copy");return}Oe(` Copying ${xe.length} nodes`);const We=[],Qe=new Set(xe);for(const rt of xe){const ht=ee.getNode(rt);ht&&We.push({label:ht.label,position:ve.nodeViews.get(ht.id)?.position||{x:0,y:0},data:{id:ht.id,properties:JSON.parse(JSON.stringify(ht.properties||{}))}})}if(We.length===0){Oe(" Nothing selected to copy (no nodes in selection)");return}const Bt=[];for(const rt of ee.getConnections())Qe.has(rt.source)&&Qe.has(rt.target)&&Bt.push({source:rt.source,target:rt.target,sourceOutput:rt.sourceOutput,targetInput:rt.targetInput});const De={nodes:We,connections:Bt};localStorage.setItem("rete-clipboard",JSON.stringify(De)),Oe("Copied to clipboard:",De)}catch(xe){console.error("[Editor] Copy failed:",xe)}if((_.ctrlKey||_.metaKey)&&_.code==="KeyV"){const xe=localStorage.getItem("rete-clipboard");if(!xe){Oe(" Clipboard empty");return}try{const We=JSON.parse(xe),Qe={},De=(K.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},rt=ve.area.transform,ht=(Z.current.x-De.left-rt.x)/rt.k,pn=(Z.current.y-De.top-rt.y)/rt.k;let Ft=1/0,jt=1/0;for(const Ye of We.nodes)Ft=Math.min(Ft,Ye.position.x),jt=Math.min(jt,Ye.position.y);ke&&ke.entities&&Array.from(ke.entities).forEach(Ye=>ke.remove(Ye)),k.current=!0;try{for(const Ye of We.nodes){let Ze;const mt=Cn.getByLabel(Ye.label);if(mt){const cn=()=>{ve&&ve.update("node",Ze.id),u&&ee&&(u.reset(),setTimeout(()=>{ee.getNodes().forEach(async Sn=>{try{await u.fetch(Sn.id)}catch{}})},0))},An=()=>{mt.updateStrategy==="dataflow"?(u&&u.reset(),u&&ee&&setTimeout(()=>{ee.getNodes().forEach(async Sn=>{try{await u.fetch(Sn.id)}catch{}})},0)):cn()};Ze=mt.factory(An)}if(Ze){typeof Ze.restore=="function"&&Ye.data?Ze.restore(Ye.data):Ye.data&&Ye.data.properties&&Ze.properties&&Object.assign(Ze.properties,Ye.data.properties),await ee.addNode(Ze);const cn=Ye.position.x-Ft,An=Ye.position.y-jt,Sn={x:ht+cn,y:pn+An};await ve.translate(Ze.id,Sn),Qe[Ye.data.id]=Ze.id,ke&&ke.add({id:Ze.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{k.current=!1,ve?.updateBackdropCaptures?.()}for(const Ye of We.connections){const Ze=Qe[Ye.source],mt=Qe[Ye.target];if(Ze&&mt){const cn=ee.getNode(Ze),An=ee.getNode(mt);cn&&An&&await ee.addConnection(new Nt.Connection(cn,Ye.sourceOutput,An,Ye.targetInput))}}if(u&&ee){u.reset();for(const Ye of ee.getNodes())try{await u.fetch(Ye.id)}catch{}}Oe("Pasted from clipboard")}catch(We){console.error("[Editor] Paste failed:",We)}}_.code==="Home"&&(_.preventDefault(),ve.area&&(ve.area.zoom(1,0,0),ve.area.translate(0,0),Oe(" Viewport reset via Home key"))),_.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Oe(" Drag state reset via Escape key"))},ne=_=>{Z.current={x:_.clientX,y:_.clientY}},J=_=>{_.key==="Shift"&&(ce.current=!0)},Ee=_=>{_.key==="Shift"&&(ce.current=!1)},ye=()=>{Oe(" Received delete from Electron IPC"),V({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let I=null;return window.api&&window.api.onDeleteKey&&(I=window.api.onDeleteKey(ye)),window.addEventListener("keydown",V),window.addEventListener("keydown",J),window.addEventListener("keyup",Ee),window.addEventListener("mousemove",ne),()=>{window.removeEventListener("keydown",V),window.removeEventListener("keydown",J),window.removeEventListener("keyup",Ee),window.removeEventListener("mousemove",ne),I&&I()}},[n,s,u,h]),E.useEffect(()=>{const V=a.current;if(!V||!n||!s)return;const ne=J=>{const Ee=J.target.closest('[data-testid="node"]');if(Ee){J.preventDefault();const ye=Ee.dataset.nodeId||Array.from(s.nodeViews.entries()).find(([I,_])=>_.element===Ee)?.[0];if(ye){const I=n.getNode(ye);re({visible:!0,position:{x:J.clientX,y:J.clientY},items:[{label:"Delete",handler:async()=>{const _=n.getConnections().filter(ee=>ee.source===ye||ee.target===ye);for(const ee of _)await n.removeConnection(ee.id);await n.removeNode(ye)}}],nodeContext:I})}}else{J.preventDefault();const ye=window._t2GetMenuItems?window._t2GetMenuItems():[];re({visible:!0,position:{x:J.clientX,y:J.clientY},items:ye,nodeContext:null})}};return V.addEventListener("contextmenu",ne),()=>{V.removeEventListener("contextmenu",ne)}},[n,s]);const x=E.useCallback(()=>{re(V=>({...V,visible:!1}))},[]),M=E.useCallback(async V=>{V.handler&&await V.handler($.position)},[$.position]),A=async()=>{if(!(!n||!s))try{const V=n.getNodes().map(ve=>{const ke=typeof ve.toJSON=="function"?ve.toJSON():{...ve};return ve.properties&&(ke.properties=ve.properties),{id:ve.id,label:ve.label,position:s.nodeViews.get(ve.id)?.position||{x:0,y:0},data:ke}}),ne=n.getConnections().map(ve=>({id:ve.id,source:ve.source,target:ve.target,sourceOutput:ve.sourceOutput,targetInput:ve.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},ye=JSON.stringify({nodes:V,connections:ne,viewport:J},null,2);try{ye.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",ye))}catch{console.warn("localStorage skipped")}if(Oe("Graph saved to localStorage"),window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",ye),Oe("[handleSave] Saved temp file for Electron reload")}catch(ve){console.warn("[handleSave] Failed to save temp file via Electron API",ve)}if(window.showSaveFilePicker)try{const ke=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await ke.write(ye),await ke.close(),Oe("Graph saved to file");return}catch(ve){if(ve.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",ve)}const I=new Blob([ye],{type:"application/json"}),_=URL.createObjectURL(I),ee=document.createElement("a");ee.href=_,ee.download=`autotron_graph_${Date.now()}.json`,ee.click(),URL.revokeObjectURL(_),Oe("Graph saved via download")}catch(V){console.error("Failed to save graph:",V)}};E.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!n||!s))try{const V=n.getNodes().map(I=>{const _=typeof I.toJSON=="function"?I.toJSON():{...I};return I.properties&&(_.properties=I.properties),{id:I.id,label:I.label,position:s.nodeViews.get(I.id)?.position||{x:0,y:0},data:_}}),ne=n.getConnections().map(I=>({id:I.id,source:I.source,target:I.target,sourceOutput:I.sourceOutput,targetInput:I.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ee={nodes:V,connections:ne,viewport:J,preUpdateSave:!0,timestamp:Date.now()},ye=JSON.stringify(Ee);ye.length<2e6&&(localStorage.setItem("saved-graph",ye),Oe("[triggerGraphSave] Graph saved before update"))}catch(V){console.warn("[triggerGraphSave] Failed:",V)}},()=>{delete window.triggerGraphSave}),[n,s]);const[X,me]=E.useState(!1),je=E.useRef(null),Ie=E.useRef(Date.now());E.useEffect(()=>{if(!n)return;const V=()=>{me(!0)};n.addPipe(ne=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(ne.type)&&V(),ne))},[n]),E.useEffect(()=>{if(!n||!s)return;const V=async()=>{if(!(window.graphLoading||U.current)&&X)try{const ne=n.getNodes().map(_=>{const ee=typeof _.toJSON=="function"?_.toJSON():{..._};return _.properties&&(ee.properties=_.properties),{id:_.id,label:_.label,position:s.nodeViews.get(_.id)?.position||{x:0,y:0},data:ee}}),J=n.getConnections().map(_=>({id:_.id,source:_.source,target:_.target,sourceOutput:_.sourceOutput,targetInput:_.targetInput})),Ee=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},ye={nodes:ne,connections:J,viewport:Ee,autoSaved:!0,timestamp:Date.now()},I=JSON.stringify(ye);I.length<2e6&&(localStorage.setItem("saved-graph",I),Ie.current=Date.now(),me(!1),window.T2Toast&&window.T2Toast.success("Auto-saved",2e3))}catch(ne){console.warn("[Auto-save] Failed:",ne)}};return je.current=setInterval(V,12e4),()=>{je.current&&clearInterval(je.current)}},[n,s,X]),E.useEffect(()=>{if(!n||!s||!u)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Oe("[AutoLoad] Detected post-update reload, attempting to restore graph...");const ne=setTimeout(async()=>{try{const J=localStorage.getItem("saved-graph");if(J){Oe("[AutoLoad] Found saved graph, loading...");const Ee=JSON.parse(J);Ee.nodes&&Ee.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(J){console.warn("[AutoLoad] Failed to auto-load graph:",J)}},1e3);return()=>clearTimeout(ne)}},[n,s,u]);const Be=async()=>{if(!n||!s||!u){console.error("[handleLoad] Missing instances:",{editor:!!n,area:!!s,engine:!!u});return}try{let V=localStorage.getItem("saved-graph");if(!V&&window.api?.readTempFile)try{const I=await window.api.readTempFile("autotron_graph.json");I?.success&&I.content&&(V=I.content,Oe("[handleLoad] Loaded graph from Electron temp file"))}catch(I){console.warn("[handleLoad] Failed to read Electron temp file",I)}if(!V){alert("No saved graph found");return}const ne=JSON.parse(V);Oe(`[handleLoad] Loading graph with ${ne.nodes?.length} nodes`);const J=nb(ne);if(!J.valid){console.warn("[handleLoad] Graph validation failed:",J.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${J.errors.length} errors`,4e3);const I=ab(ne);I.repaired&&(Oe("[handleLoad] Graph repaired:",I.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${I.fixes.length} fixes applied`,3e3),Object.assign(ne,I.graphData))}J.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",J.warnings),await kt();const Ee=n.getNodes();if(Ee.length>0){console.error("[handleLoad] Clear did not work! Still have",Ee.length,"nodes");for(const I of Ee)try{await n.removeNode(I.id)}catch(_){console.error("[handleLoad] Force remove failed:",_)}}if(k.current=!0,U.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const I of ne.nodes){let _;const ee=Cn.getByLabel(I.label);if(ee){const ve=()=>{if(U.current){s&&s.update("node",I.id);return}s&&s.update("node",I.id),u&&n&&(u.reset(),setTimeout(()=>{n.getNodes().forEach(async ke=>{try{await u.fetch(ke.id)}catch{}})},0))};_=ee.factory(ve)}_&&(_.id=I.id,typeof _.restore=="function"&&I.data?_.restore(I.data):I.data&&I.data.properties&&_.properties&&Object.assign(_.properties,I.data.properties),await n.addNode(_),await s.translate(_.id,I.position))}for(const I of ne.connections){const _=n.getNode(I.source),ee=n.getNode(I.target);_&&ee&&await n.addConnection(new Nt.Connection(_,I.sourceOutput,ee,I.targetInput))}}finally{k.current=!1,s?.updateBackdropCaptures?.()}const ye=n.getNodes();if(ye.length>0&&s){Oe("[handleLoad] Zooming to fit",ye.length,"nodes...");try{await Dr.zoomAt(s,ye,{scale:.9})}catch(I){console.warn("[handleLoad] zoomAt failed:",I)}}G.current&&(Oe("[handleLoad] Processing graph immediately..."),await G.current(),Oe("[handleLoad] Graph processing complete")),U.current=!1,Oe("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Oe("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const I=ne.viewport||{x:0,y:0,k:1},_=I.k||1,ee=I.x||0,ve=I.y||0;Oe("[handleLoad] Restoring viewport:",{savedX:ee,savedY:ve,savedK:_}),Oe("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(_,0,0),s.area.translate(ee,ve)}catch(bt){console.warn("[handleLoad] Viewport restore failed:",bt)}Oe("[handleLoad] Transform after restore:",{...s.area.transform});const ke=s.container;if(ke){ke.tabIndex=-1,ke.focus(),document.activeElement&&document.activeElement!==ke&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const bt=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(bt,100),setTimeout(bt,500),setTimeout(bt,1e3)}n.getNodes().forEach(bt=>{const xe=s.nodeViews.get(bt.id);if(xe?.element)try{for(let We=0;We<10;We++)try{xe.element.releasePointerCapture(We)}catch{}}catch{}})}},300),Oe("Graph loaded")}catch(V){console.error("Failed to load graph:",V),U.current=!1,alert("Failed to load graph")}},Ue=async()=>{if(!n||!s||!u){console.error("[handleLoadExample] Missing instances");return}if(!(n.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const ne=await fetch(di("/api/examples/starter"));if(!ne.ok)throw new Error(`Failed to fetch example: ${ne.status}`);const J=await ne.json();if(!J.success||!J.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(J.graph)),Oe("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await Be(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(ne){console.error("[handleLoadExample] Failed:",ne),alert("Failed to load example graph: "+ne.message)}};E.useEffect(()=>{const V=()=>{Oe("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),Be()};return document.addEventListener("autoLoadGraph",V),()=>document.removeEventListener("autoLoadGraph",V)},[n,s,u]);const kt=async()=>{if(!n){console.warn("[handleClear] No editor instance!");return}try{const V=n.getConnections(),ne=n.getNodes();Oe(`[handleClear] Removing ${V.length} connections and ${ne.length} nodes`);for(const Ee of V)await n.removeConnection(Ee.id);for(const Ee of ne)await n.removeNode(Ee.id);const J=n.getNodes();Oe(`[handleClear] Complete. Remaining nodes: ${J.length}`),J.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",J.map(Ee=>Ee.id))}catch(V){console.error("Failed to clear graph:",V)}},Ce=()=>{if(!(!n||!s))try{const V=n.getNodes().map(ee=>{const ve=typeof ee.toJSON=="function"?ee.toJSON():{...ee};return ee.properties&&(ve.properties=ee.properties),{id:ee.id,label:ee.label,position:s.nodeViews.get(ee.id)?.position||{x:0,y:0},data:ve}}),ne=n.getConnections().map(ee=>({id:ee.id,source:ee.source,target:ee.target,sourceOutput:ee.sourceOutput,targetInput:ee.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ee={nodes:V,connections:ne,viewport:J},ye=new Blob([JSON.stringify(Ee,null,2)],{type:"application/json"}),I=URL.createObjectURL(ye),_=document.createElement("a");_.href=I,_.download=`graph-${Date.now()}.json`,_.click(),URL.revokeObjectURL(I),Oe("Graph exported")}catch(V){console.error("Failed to export graph:",V)}},Ge=async V=>{const ne=nb(V);if(!ne.valid){console.warn("[handleImport] Graph validation failed:",ne.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ne.errors.length} errors`,4e3);const ye=ab(V);if(ye.repaired)Oe("[handleImport] Graph repaired:",ye.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${ye.fixes.length} fixes applied`,3e3),V=ye.graphData;else if(!confirm(`Graph has ${ne.errors.length} errors. Continue anyway?`))return}const J={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let Ee=0;if(console.error=(...ye)=>{Ee++<10&&J.error(...ye)},J.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!n||!s||!u){Object.assign(console,J);return}try{if(await kt(),k.current=!0,U.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const I of V.nodes){let _;const ee=Cn.getByLabel(I.label);if(!ee){console.warn(`[handleImport] No definition found for node label: "${I.label}"`);continue}if(ee){const ve=()=>{if(U.current||window.graphLoading){s&&s.update("node",I.id);return}if(s&&s.update("node",I.id),u&&n){if(window.graphLoading)return;u.reset(),setTimeout(()=>{window.graphLoading||n.getNodes().forEach(async ke=>{try{await u.fetch(ke.id)}catch{}})},0)}};_=ee.factory(ve)}_&&(_.id=I.id,I.label==="Timeline Color"&&J.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof _.restore=="function",hasData:!!I.data,dataKeys:I.data?Object.keys(I.data):"N/A",propertiesKeys:I.data?.properties?Object.keys(I.data.properties):"N/A",previewModeValue:I.data?.properties?.previewMode}),typeof _.restore=="function"&&I.data?_.restore(I.data):I.data&&I.data.properties&&_.properties&&Object.assign(_.properties,I.data.properties),await n.addNode(_),await s.translate(_.id,I.position))}for(const I of V.connections){const _=n.getNode(I.source),ee=n.getNode(I.target);_&&ee?await n.addConnection(new Nt.Connection(_,I.sourceOutput,ee,I.targetInput)):console.warn(`[handleImport] Connection skipped - missing node: source=${I.source} (${!!_}), target=${I.target} (${!!ee})`)}}finally{k.current=!1,s?.updateBackdropCaptures?.()}const ye=n.getNodes();if(ye.length>0&&s)try{await Dr.zoomAt(s,ye,{scale:.9})}catch{}U.current=!1,setTimeout(()=>{window.graphLoading=!1,Oe("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),G.current&&(Oe("[handleImport] Running processImmediate to sync node states"),G.current());const I=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(I,100),setTimeout(I,500)},2e3),Object.assign(console,J),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Oe("Graph imported successfully. Pan/zoom should work now.")}catch(ye){window.graphLoading=!1,typeof J<"u"&&Object.assign(console,J),console.error("Failed to import graph:",ye),U.current=!1,alert("Failed to import graph: "+ye.message)}};return m.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[m.jsx(FN,{width:ie,panelRef:Me,dropActive:qe,favoriteGroups:ue,onAddFavorite:L,onRemoveFavorite:se,onCreateNode:ge}),m.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${ie}px`}}),m.jsx("div",{ref:v}),(()=>{const V=y?S.current:v.current;return V?Lr.createPortal(m.jsx(ZN,{onSave:A,onLoad:Be,onLoadExample:Ue,onClear:kt,onExport:Ce,onImport:Ge,hasUnsavedChanges:X,isMerged:y,onToggleMerged:()=>b(ne=>!ne)}),V):null})(),m.jsx(PN,{dockSlotRef:S}),m.jsx(XN,{visible:$.visible,position:$.position,items:$.items,onClose:x,onSelect:M})]})}class uj extends xa.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",r),this.setState({error:n,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?m.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:m.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),m.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),m.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&m.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[m.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),m.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),m.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[m.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#4a4a6c",onMouseOut:n=>n.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),m.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#339af0",onMouseOut:n=>n.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function cj({isLoading:a,progress:n=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:u=null}){const[f,h]=E.useState(!1),[p,y]=E.useState(a);return E.useEffect(()=>{if(!a&&p){h(!0);const b=setTimeout(()=>{y(!1),h(!1)},500);return()=>clearTimeout(b)}else a&&!p&&y(!0)},[a,p]),p?m.jsxs("div",{className:`loading-overlay ${f?"fade-out":""}`,children:[m.jsx("div",{className:"loading-logo",children:""}),m.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),m.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),m.jsx("div",{className:"loading-progress-container",children:m.jsx("div",{className:"loading-progress-bar",children:m.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,n)}%`}})})}),m.jsx("div",{className:"loading-status",children:r}),l>0&&m.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),u&&m.jsxs("div",{className:"loading-error",children:[" ",u]})]}):null}function fj({updateInfo:a,onClose:n,onApplyUpdate:r}){const[s,l]=E.useState(!1),[u,f]=E.useState("");if(!a||!a.hasUpdate)return null;const h=async()=>{l(!0),f("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),f("Graph saved! Starting update..."))}catch(y){console.warn("Pre-update graph save failed:",y)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const b=await(await ba("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();f(b.message||"Updating... The app will restart shortly."),setTimeout(()=>{f("Update applied! Reloading page..."),setTimeout(()=>{const v=()=>{ba("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(v,2e3))};v()},3e3)},2e3)}catch(y){y.message.includes("fetch")||y.message.includes("network")?(f("Server restarting... Reloading page..."),setTimeout(()=>{const b=()=>{ba("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)):(f(`Update failed: ${y.message}`),l(!1))}},p=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),n()};return m.jsx("div",{className:"update-modal-overlay",children:m.jsxs("div",{className:"update-modal",children:[m.jsxs("div",{className:"update-modal-header",children:[m.jsx("span",{className:"update-icon",children:""}),m.jsx("h2",{children:"Update Available!"})]}),m.jsxs("div",{className:"update-modal-version",children:[m.jsx("span",{className:"version-current",children:a.currentVersion}),m.jsx("span",{className:"version-arrow",children:""}),m.jsx("span",{className:"version-new",children:a.newVersion})]}),m.jsxs("div",{className:"update-modal-content",children:[m.jsx("h3",{children:"What's New:"}),m.jsx("div",{className:"changelog-content",children:m.jsx("pre",{children:a.changelog||"No changelog available."})})]}),u&&m.jsxs("div",{className:"update-status",children:[m.jsx("span",{className:"status-spinner",children:""}),u]}),m.jsx("div",{className:"update-modal-actions",children:s?m.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"update-btn update-btn-primary",onClick:h,children:"Update Now"}),m.jsx("button",{className:"update-btn update-btn-secondary",onClick:p,children:"Later"})]})})]})})}console.log("=== Socket Test ===");console.log("Singleton boolean socket:",fs.boolean);console.log("Singleton object socket:",fs.object);const qw=new Nt.Socket("boolean"),dj=new Nt.Socket("boolean"),hj=Nt.Socket.canConnect(qw,dj);console.log("Can two 'boolean' sockets connect?",hj);const pj=Nt.Socket.canConnect(fs.boolean,fs.boolean);console.log("Can singleton boolean sockets connect?",pj);const mj=new Nt.Socket("object"),yj=Nt.Socket.canConnect(qw,mj);console.log("Can 'boolean' and 'object' sockets connect?",yj);console.log("=== End Socket Test ===");const gj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};gj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Yw=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),u=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${u}`},n={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[u,f]of Object.entries(s)){const h=n[u];h&&(f.accent&&(l.style.setProperty(`--node-${h}-color`,f.accent),l.style.setProperty(`--node-${h}-color-rgb`,a(f.accent))),f.background&&l.style.setProperty(`--node-${h}-bg`,f.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},Gw=()=>{const a=u=>{const f=parseInt(u.slice(1,3),16),h=parseInt(u.slice(3,5),16),p=parseInt(u.slice(5,7),16);return`${f}, ${h}, ${p}`},n=(u,f=15)=>{const h=parseInt(u.slice(1),16),p=Math.max(0,(h>>16)-Math.round(255*f/100)),y=Math.max(0,(h>>8&255)-Math.round(255*f/100)),b=Math.max(0,(h&255)-Math.round(255*f/100));return`#${(16777216|p<<16|y<<8|b).toString(16).slice(1)}`},r=(u,f=20)=>{const h=parseInt(u.slice(1),16),p=Math.min(255,(h>>16)+Math.round(255*f/100)),y=Math.min(255,(h>>8&255)+Math.round(255*f/100)),b=Math.min(255,(h&255)+Math.round(255*f/100));return`#${(16777216|p<<16|y<<8|b).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const u=localStorage.getItem("t2socket-colors"),f=u?JSON.parse(u):{},h=document.documentElement;for(const[p,y]of Object.entries(s)){const b=f[p]?.color||l[p];b&&(h.style.setProperty(`--socket-${y}-color`,b),h.style.setProperty(`--socket-${y}-dark`,n(b)),h.style.setProperty(`--socket-${y}-border`,r(b)),h.style.setProperty(`--socket-${y}-rgb`,a(b)))}}catch(u){console.warn("Failed to apply stored socket colors:",u)}};Yw();Gw();window.applyCategoryColors=Yw;window.applySocketColors=Gw;const $d=new Map,Id=new Map;function vj(){const[a,n]=E.useState(Ne.connected),[r,s]=E.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,u]=E.useState([]),[f,h]=E.useState([]),[p,y]=E.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[b,v]=E.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[S,k]=E.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[N,G]=E.useState(null),[U,P]=E.useState(0),[K,q]=E.useState(()=>localStorage.getItem("eventLogFilter")||"all"),Z=E.useRef(null),ce=E.useRef(null),oe=E.useRef({authenticated:!1,invalidPinNotified:!1}),$=100,re=ep();E.useEffect(()=>{const C=setInterval(()=>{P(L=>L+1)},3e4);return()=>clearInterval(C)},[]),E.useEffect(()=>Hw(L=>{k(L),!L.isLoading&&L.progress===100&&L.failedPlugins?.length>0&&re.warning(`Loaded ${L.loadedCount} plugins (${L.failedPlugins.length} failed)`),L.error&&re.error(`Plugin loading failed: ${L.error}`)}),[re]),E.useEffect(()=>{function C(){n(!0),re.success("Connected to server"),ie("system","Socket connected to server"),Id.clear();const Be=as();Be&&Ne.emit("authenticate",Be),Ne.emit("request-ha-status")}function L(){n(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),oe.current.authenticated=!1,re.warning("Disconnected from server"),ie("system","Socket disconnected from server")}function se(Be){s(Be)}function ge(){oe.current.authenticated||(oe.current.authenticated=!0,oe.current.invalidPinNotified=!1,re.success("Authenticated"))}function be(Be){oe.current.authenticated=!1;const Ue=(Be?.error||"").toString();if(Ue.toLowerCase().includes("invalid pin")){oe.current.invalidPinNotified||(oe.current.invalidPinNotified=!0,re.error("Stored PIN is invalid. Update it in Settings  Security."));return}const kt=Ue?`Authentication failed: ${Ue}`:"Authentication failed";re.error(kt)}function x(){if(!Ne.connected)return;oe.current.invalidPinNotified=!1;const Be=as();Be&&Ne.emit("authenticate",Be)}function M(Be){const{id:Ue,state:kt,on:Ce,name:Ge,vendor:V}=Be;if(!Ue)return;const ne=Id.get(Ue),J=Ce!==void 0?Ce:kt==="on"||kt==="playing"||kt==="open",Ee=Ge||Be.friendly_name||Be.attributes?.friendly_name||Ue.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(ne&&ne.on===J)return;Id.set(Ue,{on:J,state:kt});const ye=$d.get(Ue),I=J?"ON":"OFF";let _=V||"External";V||(Ue.startsWith("ha_")?_="HA":Ue.startsWith("hue_")?_="Hue":Ue.startsWith("kasa_")?_="Kasa":Ue.startsWith("shelly_")&&(_="Shelly")),ye&&Date.now()-ye.timestamp<5e3?(ie("device",`${Ee}  ${I}`,{source:"app",triggeredBy:ye.nodeTitle}),$d.delete(Ue)):ie("trigger",`${Ee}  ${I}`,{source:_})}function A(Be){}function X(Be){const{nodeId:Ue,nodeLabel:kt,result:Ce}=Be;ie("node",`${kt||Ue} executed`,Ce)}function me(Be){Array.isArray(Be)&&h(Be.slice(0,20))}function je(Be){const{type:Ue,name:kt,value:Ce}=Be;ie("trigger",`${Ue}: ${kt}`,Ce)}function Ie(Be){if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==Be.newVersion&&re.info(` Update available: ${Be.currentVersion}  ${Be.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>G(Be)})}return Ne.on("connect",C),Ne.on("disconnect",L),Ne.on("auth-success",ge),Ne.on("auth-failed",be),Ne.on("ha-connection-status",se),Ne.on("device-state-update",M),Ne.on("device_state_change",A),Ne.on("node_executed",X),Ne.on("scheduled_events",me),Ne.on("trigger_event",je),Ne.on("update-available",Ie),window.addEventListener("t2-pin-changed",x),UT(),()=>{Ne.off("connect",C),Ne.off("disconnect",L),Ne.off("auth-success",ge),Ne.off("auth-failed",be),Ne.off("ha-connection-status",se),Ne.off("device-state-update",M),Ne.off("device_state_change",A),Ne.off("node_executed",X),Ne.off("scheduled_events",me),Ne.off("trigger_event",je),Ne.off("update-available",Ie),window.removeEventListener("t2-pin-changed",x),$T()}},[]);const ie=(C,L,se=null)=>{const ge=new Date().toLocaleTimeString();u(be=>[{timestamp:ge,type:C,message:L,details:se},...be].slice(0,$))},F=E.useRef({}),ue=E.useCallback((C,L)=>{const se=L.map(M=>({...M,nodeId:C}));F.current[C]=se;const ge=[];Object.values(F.current).forEach(M=>{Array.isArray(M)&&ge.push(...M)});const be=new Date,x=ge.filter(M=>M.time&&new Date(M.time)>be).sort((M,A)=>new Date(M.time)-new Date(A.time)).slice(0,20);h(x)},[]),_e=E.useCallback(C=>{delete F.current[C],ue(C,[])},[ue]);E.useEffect(()=>(window.addEventLog=ie,window.setUpcomingEvents=h,window.registerScheduledEvents=ue,window.unregisterScheduledEvents=_e,window.T2Toast=re,window.registerPendingCommand=(C,L,se)=>{$d.set(C,{nodeTitle:L,action:se,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[ue,_e,re]);const Me=C=>{if(!C)return"";const L=new Date(C),ge=L-new Date,be=Math.floor(ge/6e4),x=Math.floor(be/60),M=Math.floor(x/24);let A="";return M>0?A=`${M}d ${x%24}h`:x>0?A=`${x}h ${be%60}m`:be>0?A=`${be}m`:A="<1m",`${L.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${A})`},qe=E.useCallback(async C=>{if(!C)return;const L=window._t2Area,se=window._t2Editor;if(!L||!se){console.warn("[focusNode] Editor not ready");return}const ge=se.getNode(C);if(!ge){console.warn("[focusNode] Node not found:",C);return}try{const{AreaExtensions:be}=await Qg(async()=>{const{AreaExtensions:x}=await Promise.resolve().then(()=>Ev);return{AreaExtensions:x}},void 0,import.meta.url);await be.zoomAt(L,[ge],{scale:1})}catch(be){console.warn("[focusNode] Failed to zoom to node:",be)}},[]),Ve=E.useCallback(async()=>{const C=window._t2Area,L=window._t2Editor;if(!C||!L){console.warn("[zoomExtents] Editor not ready");return}const se=L.getNodes();if(se.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:ge}=await Qg(async()=>{const{AreaExtensions:be}=await Promise.resolve().then(()=>Ev);return{AreaExtensions:be}},void 0,import.meta.url);await ge.zoomAt(C,se,{scale:.7})}catch(ge){console.warn("[zoomExtents] Failed to zoom:",ge)}},[]);return m.jsxs("div",{className:"app-container",children:[N&&N.hasUpdate&&m.jsx(fj,{updateInfo:N,onClose:()=>G(null)}),m.jsx(cj,{isLoading:S.isLoading,progress:S.progress,status:S.status,loadedCount:S.loadedCount,totalCount:S.totalCount,error:S.error}),m.jsx("div",{className:"editor-wrapper",children:m.jsx(lj,{})}),m.jsx("div",{className:"resize-handle",ref:ce,onMouseDown:C=>{C.preventDefault();const L=C.clientY,se=p,ge=x=>{const M=L-x.clientY,A=Math.max(80,Math.min(400,se+M));y(A),localStorage.setItem("panelHeight",A)},be=()=>{document.removeEventListener("mousemove",ge),document.removeEventListener("mouseup",be)};document.addEventListener("mousemove",ge),document.addEventListener("mouseup",be)},children:m.jsx("div",{className:"resize-handle-grip"})}),m.jsxs("div",{className:"bottom-panels",style:{height:p,fontSize:b},children:[m.jsxs("div",{className:"panel event-log-panel",children:[m.jsxs("div",{className:"panel-header",children:[m.jsx("span",{className:"panel-title",children:"Event Log"}),m.jsxs("div",{className:"panel-controls",children:[m.jsxs("div",{className:"filter-buttons",children:[m.jsx("button",{className:`filter-btn ${K==="all"?"active":""}`,onClick:()=>{q("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),m.jsx("button",{className:`filter-btn ${K==="app"?"active":""}`,onClick:()=>{q("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),m.jsx("button",{className:`filter-btn ${K==="ha"?"active":""}`,onClick:()=>{q("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),m.jsx("button",{className:"font-size-btn",onClick:()=>{const C=Math.max(8,b-1);v(C),localStorage.setItem("panelFontSize",C)},children:"A-"}),m.jsxs("span",{className:"font-size-label",children:[b,"px"]}),m.jsx("button",{className:"font-size-btn",onClick:()=>{const C=Math.min(16,b+1);v(C),localStorage.setItem("panelFontSize",C)},children:"A+"}),m.jsx("button",{className:"panel-clear-btn",onClick:()=>u([]),children:"Clear"})]})]}),m.jsx("div",{className:"panel-content",ref:Z,children:l.length===0?m.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(C=>K==="all"?!0:K==="app"?C.details?.triggeredBy||C.details?.source==="app":K==="ha"?C.details?.source&&C.details.source!=="app"&&!C.details?.triggeredBy:!0).map((C,L)=>m.jsxs("div",{className:`log-entry log-${C.type}`,title:C.details?.triggeredBy?`Triggered by: ${C.details.triggeredBy}`:C.details?.source&&C.details.source!=="app"?`Triggered externally via ${C.details.source}`:"",children:[m.jsx("span",{className:"log-time",children:C.timestamp}),m.jsx("span",{className:`log-type-badge ${C.type}`,children:C.type==="trigger"?"external":C.type}),m.jsx("span",{className:"log-message",children:C.message}),C.details?.triggeredBy&&m.jsxs("span",{className:"log-source app-source",children:["via ",C.details.triggeredBy]}),C.details?.source&&C.details.source!=="app"&&!C.details?.triggeredBy&&m.jsxs("span",{className:"log-source external-source",children:["via ",C.details.source]})]},L))})]}),m.jsxs("div",{className:"panel upcoming-events-panel",children:[m.jsx("div",{className:"panel-header clickable-header",onClick:Ve,title:"Click to zoom to fit all nodes",children:m.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),m.jsx("div",{className:"panel-content",children:f.length===0?m.jsx("div",{className:"empty-message",children:"No scheduled events..."}):f.map((C,L)=>m.jsxs("div",{className:`event-entry event-${C.action||"unknown"}${C.nodeId?" clickable":""}`,onClick:()=>C.nodeId&&qe(C.nodeId),title:C.nodeId?"Click to jump to this node":"",style:C.nodeId?{cursor:"pointer"}:{},children:[m.jsx("span",{className:"event-time",children:Me(C.time)}),m.jsx("span",{className:`event-action ${C.action}`,children:C.action||"event"}),m.jsx("span",{className:"event-device",children:C.deviceName||C.device||"Unknown"})]},L))})]})]})]})}function bj(){return m.jsx(uj,{children:m.jsxs(YN,{children:[m.jsx(GN,{}),m.jsx(vj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");sb.createRoot(document.getElementById("root")).render(m.jsx(E.StrictMode,{children:m.jsx(bj,{})}));
