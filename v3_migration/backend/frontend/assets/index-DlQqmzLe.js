function ob(a,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function kh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var af={exports:{}},go={};var Hg;function tE(){if(Hg)return go;Hg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return go.Fragment=n,go.jsx=r,go.jsxs=r,go}var Vg;function nE(){return Vg||(Vg=1,af.exports=tE()),af.exports}var p=nE(),rf={exports:{}},Xe={};var qg;function aE(){if(qg)return Xe;qg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function k(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,q={};function Q(S,_,O){this.props=S,this.context=_,this.refs=q,this.updater=O||j}Q.prototype.isReactComponent={},Q.prototype.setState=function(S,_){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,_,"setState")},Q.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function K(){}K.prototype=Q.prototype;function L(S,_,O){this.props=S,this.context=_,this.refs=q,this.updater=O||j}var Y=L.prototype=new K;Y.constructor=L,Z(Y,Q.prototype),Y.isPureReactComponent=!0;var de=Array.isArray;function be(){}var H={H:null,A:null,T:null,S:null},ue=Object.prototype.hasOwnProperty;function re(S,_,O){var z=O.ref;return{$$typeof:a,type:S,key:_,ref:z!==void 0?z:null,props:O}}function pe(S,_){return re(S.type,_,S.props)}function Re(S){return typeof S=="object"&&S!==null&&S.$$typeof===a}function je(S){var _={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(O){return _[O]})}var Je=/\/+/g;function rt(S,_){return typeof S=="object"&&S!==null&&S.key!=null?je(""+S.key):_.toString(36)}function Ke(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(be,be):(S.status="pending",S.then(function(_){S.status==="pending"&&(S.status="fulfilled",S.value=_)},function(_){S.status==="pending"&&(S.status="rejected",S.reason=_)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function N(S,_,O,z,le){var me=typeof S;(me==="undefined"||me==="boolean")&&(S=null);var Oe=!1;if(S===null)Oe=!0;else switch(me){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(S.$$typeof){case a:case n:Oe=!0;break;case v:return Oe=S._init,N(Oe(S._payload),_,O,z,le)}}if(Oe)return le=le(S),Oe=z===""?"."+rt(S,0):z,de(le)?(O="",Oe!=null&&(O=Oe.replace(Je,"$&/")+"/"),N(le,_,O,"",function(We){return We})):le!=null&&(Re(le)&&(le=pe(le,O+(le.key==null||S&&S.key===le.key?"":(""+le.key).replace(Je,"$&/")+"/")+Oe)),_.push(le)),1;Oe=0;var Ze=z===""?".":z+":";if(de(S))for(var Be=0;Be<S.length;Be++)z=S[Be],me=Ze+rt(z,Be),Oe+=N(z,_,O,me,le);else if(Be=k(S),typeof Be=="function")for(S=Be.call(S),Be=0;!(z=S.next()).done;)z=z.value,me=Ze+rt(z,Be++),Oe+=N(z,_,O,me,le);else if(me==="object"){if(typeof S.then=="function")return N(Ke(S),_,O,z,le);throw _=String(S),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function V(S,_,O){if(S==null)return S;var z=[],le=0;return N(S,z,"","",function(me){return _.call(O,me,le++)}),z}function J(S){if(S._status===-1){var _=S._result;_=_(),_.then(function(O){(S._status===0||S._status===-1)&&(S._status=1,S._result=O)},function(O){(S._status===0||S._status===-1)&&(S._status=2,S._result=O)}),S._status===-1&&(S._status=0,S._result=_)}if(S._status===1)return S._result.default;throw S._result}var ve=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},B={map:V,forEach:function(S,_,O){V(S,function(){_.apply(this,arguments)},O)},count:function(S){var _=0;return V(S,function(){_++}),_},toArray:function(S){return V(S,function(_){return _})||[]},only:function(S){if(!Re(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return Xe.Activity=b,Xe.Children=B,Xe.Component=Q,Xe.Fragment=r,Xe.Profiler=l,Xe.PureComponent=L,Xe.StrictMode=s,Xe.Suspense=m,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return H.H.useMemoCache(S)}},Xe.cache=function(S){return function(){return S.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(S,_,O){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var z=Z({},S.props),le=S.key;if(_!=null)for(me in _.key!==void 0&&(le=""+_.key),_)!ue.call(_,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&_.ref===void 0||(z[me]=_[me]);var me=arguments.length-2;if(me===1)z.children=O;else if(1<me){for(var Oe=Array(me),Ze=0;Ze<me;Ze++)Oe[Ze]=arguments[Ze+2];z.children=Oe}return re(S.type,le,z)},Xe.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:c,_context:S},S},Xe.createElement=function(S,_,O){var z,le={},me=null;if(_!=null)for(z in _.key!==void 0&&(me=""+_.key),_)ue.call(_,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(le[z]=_[z]);var Oe=arguments.length-2;if(Oe===1)le.children=O;else if(1<Oe){for(var Ze=Array(Oe),Be=0;Be<Oe;Be++)Ze[Be]=arguments[Be+2];le.children=Ze}if(S&&S.defaultProps)for(z in Oe=S.defaultProps,Oe)le[z]===void 0&&(le[z]=Oe[z]);return re(S,me,le)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(S){return{$$typeof:h,render:S}},Xe.isValidElement=Re,Xe.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:J}},Xe.memo=function(S,_){return{$$typeof:y,type:S,compare:_===void 0?null:_}},Xe.startTransition=function(S){var _=H.T,O={};H.T=O;try{var z=S(),le=H.S;le!==null&&le(O,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(be,ve)}catch(me){ve(me)}finally{_!==null&&O.types!==null&&(_.types=O.types),H.T=_}},Xe.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Xe.use=function(S){return H.H.use(S)},Xe.useActionState=function(S,_,O){return H.H.useActionState(S,_,O)},Xe.useCallback=function(S,_){return H.H.useCallback(S,_)},Xe.useContext=function(S){return H.H.useContext(S)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(S,_){return H.H.useDeferredValue(S,_)},Xe.useEffect=function(S,_){return H.H.useEffect(S,_)},Xe.useEffectEvent=function(S){return H.H.useEffectEvent(S)},Xe.useId=function(){return H.H.useId()},Xe.useImperativeHandle=function(S,_,O){return H.H.useImperativeHandle(S,_,O)},Xe.useInsertionEffect=function(S,_){return H.H.useInsertionEffect(S,_)},Xe.useLayoutEffect=function(S,_){return H.H.useLayoutEffect(S,_)},Xe.useMemo=function(S,_){return H.H.useMemo(S,_)},Xe.useOptimistic=function(S,_){return H.H.useOptimistic(S,_)},Xe.useReducer=function(S,_,O){return H.H.useReducer(S,_,O)},Xe.useRef=function(S){return H.H.useRef(S)},Xe.useState=function(S){return H.H.useState(S)},Xe.useSyncExternalStore=function(S,_,O){return H.H.useSyncExternalStore(S,_,O)},Xe.useTransition=function(){return H.H.useTransition()},Xe.version="19.2.0",Xe}var Gg;function Ch(){return Gg||(Gg=1,rf.exports=aE()),rf.exports}var E=Ch();const Ma=kh(E),rE=ob({__proto__:null,default:Ma},[E]);var sf={exports:{}},vo={},of={exports:{}},lf={};var Yg;function iE(){return Yg||(Yg=1,(function(a){function n(N,V){var J=N.length;N.push(V);e:for(;0<J;){var ve=J-1>>>1,B=N[ve];if(0<l(B,V))N[ve]=V,N[J]=B,J=ve;else break e}}function r(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var V=N[0],J=N.pop();if(J!==V){N[0]=J;e:for(var ve=0,B=N.length,S=B>>>1;ve<S;){var _=2*(ve+1)-1,O=N[_],z=_+1,le=N[z];if(0>l(O,J))z<B&&0>l(le,O)?(N[ve]=le,N[z]=J,ve=z):(N[ve]=O,N[_]=J,ve=_);else if(z<B&&0>l(le,J))N[ve]=le,N[z]=J,ve=z;else break e}}return V}function l(N,V){var J=N.sortIndex-V.sortIndex;return J!==0?J:N.id-V.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();a.unstable_now=function(){return d.now()-h}}var m=[],y=[],v=1,b=null,x=3,k=!1,j=!1,Z=!1,q=!1,Q=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function Y(N){for(var V=r(y);V!==null;){if(V.callback===null)s(y);else if(V.startTime<=N)s(y),V.sortIndex=V.expirationTime,n(m,V);else break;V=r(y)}}function de(N){if(Z=!1,Y(N),!j)if(r(m)!==null)j=!0,be||(be=!0,je());else{var V=r(y);V!==null&&Ke(de,V.startTime-N)}}var be=!1,H=-1,ue=5,re=-1;function pe(){return q?!0:!(a.unstable_now()-re<ue)}function Re(){if(q=!1,be){var N=a.unstable_now();re=N;var V=!0;try{e:{j=!1,Z&&(Z=!1,K(H),H=-1),k=!0;var J=x;try{t:{for(Y(N),b=r(m);b!==null&&!(b.expirationTime>N&&pe());){var ve=b.callback;if(typeof ve=="function"){b.callback=null,x=b.priorityLevel;var B=ve(b.expirationTime<=N);if(N=a.unstable_now(),typeof B=="function"){b.callback=B,Y(N),V=!0;break t}b===r(m)&&s(m),Y(N)}else s(m);b=r(m)}if(b!==null)V=!0;else{var S=r(y);S!==null&&Ke(de,S.startTime-N),V=!1}}break e}finally{b=null,x=J,k=!1}V=void 0}}finally{V?je():be=!1}}}var je;if(typeof L=="function")je=function(){L(Re)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,rt=Je.port2;Je.port1.onmessage=Re,je=function(){rt.postMessage(null)}}else je=function(){Q(Re,0)};function Ke(N,V){H=Q(function(){N(a.unstable_now())},V)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(N){N.callback=null},a.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<N?Math.floor(1e3/N):5},a.unstable_getCurrentPriorityLevel=function(){return x},a.unstable_next=function(N){switch(x){case 1:case 2:case 3:var V=3;break;default:V=x}var J=x;x=V;try{return N()}finally{x=J}},a.unstable_requestPaint=function(){q=!0},a.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var J=x;x=N;try{return V()}finally{x=J}},a.unstable_scheduleCallback=function(N,V,J){var ve=a.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ve+J:ve):J=ve,N){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=J+B,N={id:v++,callback:V,priorityLevel:N,startTime:J,expirationTime:B,sortIndex:-1},J>ve?(N.sortIndex=J,n(y,N),r(m)===null&&N===r(y)&&(Z?(K(H),H=-1):Z=!0,Ke(de,J-ve))):(N.sortIndex=B,n(m,N),j||k||(j=!0,be||(be=!0,je()))),N},a.unstable_shouldYield=pe,a.unstable_wrapCallback=function(N){var V=x;return function(){var J=x;x=V;try{return N.apply(this,arguments)}finally{x=J}}}})(lf)),lf}var Fg;function sE(){return Fg||(Fg=1,of.exports=iE()),of.exports}var cf={exports:{}},Ln={};var Pg;function oE(){if(Pg)return Ln;Pg=1;var a=Ch();function n(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:m,containerInfo:y,implementation:v}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ln.createPortal=function(m,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return c(m,y,null,v)},Ln.flushSync=function(m){var y=d.T,v=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=y,s.p=v,s.d.f()}},Ln.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(m,y))},Ln.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Ln.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:k}):v==="script"&&s.d.X(m,{crossOrigin:b,integrity:x,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ln.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=h(y.as,y.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(m)},Ln.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin);s.d.L(m,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ln.preloadModule=function(m,y){if(typeof m=="string")if(y){var v=h(y.as,y.crossOrigin);s.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(m)},Ln.requestFormReset=function(m){s.d.r(m)},Ln.unstable_batchedUpdates=function(m,y){return m(y)},Ln.useFormState=function(m,y,v){return d.H.useFormState(m,y,v)},Ln.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ln.version="19.2.0",Ln}var Zg;function lb(){if(Zg)return cf.exports;Zg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),cf.exports=oE(),cf.exports}var Xg;function lE(){if(Xg)return vo;Xg=1;var a=sE(),n=Ch(),r=lb();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(s(188))}function y(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,o=t;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return m(u),e;if(f===o)return m(u),t;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=f;else{for(var g=!1,w=u.child;w;){if(w===i){g=!0,i=u,o=f;break}if(w===o){g=!0,o=u,i=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===i){g=!0,i=f,o=u;break}if(w===o){g=!0,o=f,i=u;break}w=w.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),L=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),Re=Symbol.iterator;function je(e){return e===null||typeof e!="object"?null:(e=Re&&e[Re]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Symbol.for("react.client.reference");function rt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Je?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case Q:return"Profiler";case q:return"StrictMode";case de:return"Suspense";case be:return"SuspenseList";case re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case L:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case Y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return t=e.displayName||null,t!==null?t:rt(e.type)||"Memo";case ue:t=e._payload,e=e._init;try{return rt(e(t))}catch{}}return null}var Ke=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ve=[],B=-1;function S(e){return{current:e}}function _(e){0>B||(e.current=ve[B],ve[B]=null,B--)}function O(e,t){B++,ve[B]=e.current,e.current=t}var z=S(null),le=S(null),me=S(null),Oe=S(null);function Ze(e,t){switch(O(me,t),O(le,e),O(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ug(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ug(t),e=dg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}_(z),O(z,e)}function Be(){_(z),_(le),_(me)}function We(e){e.memoizedState!==null&&O(Oe,e);var t=z.current,i=dg(t,e.type);t!==i&&(O(le,e),O(z,i))}function Nt(e){le.current===e&&(_(z),_(le)),Oe.current===e&&(_(Oe),ho._currentValue=J)}var Ot,zn;function vn(e){if(Ot===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ot=t&&t[1]||"",zn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ot+e+zn}var cn=!1;function Nn(e,t){if(!e||cn)return"";cn=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(X){var G=X}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(X){G=X}e.call(ae.prototype)}}else{try{throw Error()}catch(X){G=X}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(X){if(X&&G&&typeof X.stack=="string")return[X.stack,G.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),g=f[0],w=f[1];if(g&&w){var T=g.split(`
`),$=w.split(`
`);for(u=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;u<$.length&&!$[u].includes("DetermineComponentFrameRoot");)u++;if(o===T.length||u===$.length)for(o=T.length-1,u=$.length-1;1<=o&&0<=u&&T[o]!==$[u];)u--;for(;1<=o&&0<=u;o--,u--)if(T[o]!==$[u]){if(o!==1||u!==1)do if(o--,u--,0>u||T[o]!==$[u]){var W=`
`+T[o].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=o&&0<=u);break}}}finally{cn=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?vn(i):""}function Qe(e,t){switch(e.tag){case 26:case 27:case 5:return vn(e.type);case 16:return vn("Lazy");case 13:return e.child!==t&&t!==null?vn("Suspense Fallback"):vn("Suspense");case 19:return vn("SuspenseList");case 0:case 15:return Nn(e.type,!1);case 11:return Nn(e.type.render,!1);case 1:return Nn(e.type,!0);case 31:return vn("Activity");default:return""}}function F(e){try{var t="",i=null;do t+=Qe(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ie=Object.prototype.hasOwnProperty,ee=a.unstable_scheduleCallback,Ae=a.unstable_cancelCallback,Se=a.unstable_shouldYield,se=a.unstable_requestPaint,C=a.unstable_now,D=a.unstable_getCurrentPriorityLevel,oe=a.unstable_ImmediatePriority,fe=a.unstable_UserBlockingPriority,we=a.unstable_NormalPriority,Ce=a.unstable_LowPriority,$e=a.unstable_IdlePriority,Fe=a.log,bt=a.unstable_setDisableYieldValue,Le=null,He=null;function ze(e){if(typeof Fe=="function"&&bt(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Le,e)}catch{}}var it=Math.clz32?Math.clz32:tn,gt=Math.log,It=Math.LN2;function tn(e){return e>>>=0,e===0?32:31-(gt(e)/It|0)|0}var ot=256,vt=262144,nn=4194304;function an(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qt(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?u=an(o):(g&=w,g!==0?u=an(g):i||(i=w&~e,i!==0&&(u=an(i))))):(w=o&~f,w!==0?u=an(w):g!==0?u=an(g):i||(i=o&~e,i!==0&&(u=an(i)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,i=t&-t,f>=i||f===32&&(i&4194048)!==0)?t:u}function Kt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function R(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var e=nn;return nn<<=1,(nn&62914560)===0&&(nn=4194304),e}function ce(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function he(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ue(e,t,i,o,u,f){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,T=e.expirationTimes,$=e.hiddenUpdates;for(i=g&~i;0<i;){var W=31-it(i),ae=1<<W;w[W]=0,T[W]=-1;var G=$[W];if(G!==null)for($[W]=null,W=0;W<G.length;W++){var X=G[W];X!==null&&(X.lane&=-536870913)}i&=~ae}o!==0&&xn(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(g&~t))}function xn(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-it(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function zt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-it(i),u=1<<o;u&t|e[o]&t&&(e[o]|=t),i&=~u}}function Ve(e,t){var i=t&-t;return i=(i&42)!==0?1:Lt(i),(i&(e.suspendedLanes|t))!==0?0:i}function Lt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function st(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function kt(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:Rg(e.type))}function Os(e,t){var i=V.p;try{return V.p=e,t()}finally{V.p=i}}var xa=Math.random().toString(36).slice(2),un="__reactFiber$"+xa,On="__reactProps$"+xa,Pa="__reactContainer$"+xa,Vo="__reactEvents$"+xa,Kc="__reactListeners$"+xa,qo="__reactHandles$"+xa,En="__reactResources$"+xa,Ea="__reactMarker$"+xa;function ka(e){delete e[un],delete e[On],delete e[Vo],delete e[Kc],delete e[qo]}function oa(e){var t=e[un];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Pa]||i[un]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=vg(e);e!==null;){if(i=e[un])return i;e=vg(e)}return t}e=i,i=e.parentNode}return null}function gr(e){if(e=e[un]||e[Pa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Za(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function P(e){var t=e[En];return t||(t=e[En]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ne(e){e[Ea]=!0}var ye=new Set,Ee={};function ke(e,t){Pe(e,t),Pe(e+"Capture",t)}function Pe(e,t){for(Ee[e]=t,e=0;e<t.length;e++)ye.add(t[e])}var Gt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rn={},Qt={};function Jt(e){return ie.call(Qt,e)?!0:ie.call(rn,e)?!1:Gt.test(e)?Qt[e]=!0:(rn[e]=!0,!1)}function bn(e,t,i){if(Jt(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function _t(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Yt(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function kn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function za(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xa(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){i=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Go(e){if(!e._valueTracker){var t=za(e)?"checked":"value";e._valueTracker=Xa(e,t,""+e[t])}}function ap(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=za(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xw=/[\n"\\]/g;function la(e){return e.replace(Xw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Qc(e,t,i,o,u,f,g,w){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+kn(t)):e.value!==""+kn(t)&&(e.value=""+kn(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Jc(e,g,kn(t)):i!=null?Jc(e,g,kn(i)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+kn(w):e.removeAttribute("name")}function rp(e,t,i,o,u,f,g,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Go(e);return}i=i!=null?""+kn(i):"",t=t!=null?""+kn(t):i,w||t===e.value||(e.value=t),e.defaultValue=t}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Go(e)}function Jc(e,t,i){t==="number"&&Yo(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ki(e,t,i,o){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+kn(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function ip(e,t,i){if(t!=null&&(t=""+kn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+kn(i):""}function sp(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(s(92));if(Ke(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=kn(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Go(e)}function Ci(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Kw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function op(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||Kw.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function lp(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in t)o=t[u],t.hasOwnProperty(u)&&i[u]!==o&&op(e,u,o)}else for(var f in t)t.hasOwnProperty(f)&&op(e,f,t[f])}function Wc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(e){return Jw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ka(){}var eu=null;function tu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ti=null,Ni=null;function cp(e){var t=gr(e);if(t&&(e=t.stateNode)){var i=e[On]||null;e:switch(e=t.stateNode,t.type){case"input":if(Qc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+la(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var u=o[On]||null;if(!u)throw Error(s(90));Qc(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&ap(o)}break e;case"textarea":ip(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ki(e,!!i.multiple,t,!1)}}}var nu=!1;function up(e,t,i){if(nu)return e(t,i);nu=!0;try{var o=e(t);return o}finally{if(nu=!1,(Ti!==null||Ni!==null)&&(Ml(),Ti&&(t=Ti,e=Ni,Ni=Ti=null,cp(t),e)))for(t=0;t<e.length;t++)cp(e[t])}}function js(e,t){var i=e.stateNode;if(i===null)return null;var o=i[On]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),au=!1;if(Qa)try{var As={};Object.defineProperty(As,"passive",{get:function(){au=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{au=!1}var vr=null,ru=null,Po=null;function dp(){if(Po)return Po;var e,t=ru,i=t.length,o,u="value"in vr?vr.value:vr.textContent,f=u.length;for(e=0;e<i&&t[e]===u[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===u[f-o];o++);return Po=u.slice(e,1<o?1-o:void 0)}function Zo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xo(){return!0}function fp(){return!1}function Gn(e){function t(i,o,u,f,g){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xo:fp,this.isPropagationStopped=fp,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),t}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=Gn(Wr),_s=b({},Wr,{view:0,detail:0}),Ww=Gn(_s),iu,su,Ds,Qo=b({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(iu=e.screenX-Ds.screenX,su=e.screenY-Ds.screenY):su=iu=0,Ds=e),iu)},movementY:function(e){return"movementY"in e?e.movementY:su}}),hp=Gn(Qo),eS=b({},Qo,{dataTransfer:0}),tS=Gn(eS),nS=b({},_s,{relatedTarget:0}),ou=Gn(nS),aS=b({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),rS=Gn(aS),iS=b({},Wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sS=Gn(iS),oS=b({},Wr,{data:0}),pp=Gn(oS),lS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uS[e])?!!t[e]:!1}function lu(){return dS}var fS=b({},_s,{key:function(e){if(e.key){var t=lS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lu,charCode:function(e){return e.type==="keypress"?Zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hS=Gn(fS),pS=b({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=Gn(pS),mS=b({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lu}),yS=Gn(mS),gS=b({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vS=Gn(gS),bS=b({},Qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wS=Gn(bS),SS=b({},Wr,{newState:0,oldState:0}),xS=Gn(SS),ES=[9,13,27,32],cu=Qa&&"CompositionEvent"in window,Ms=null;Qa&&"documentMode"in document&&(Ms=document.documentMode);var kS=Qa&&"TextEvent"in window&&!Ms,yp=Qa&&(!cu||Ms&&8<Ms&&11>=Ms),gp=" ",vp=!1;function bp(e,t){switch(e){case"keyup":return ES.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oi=!1;function CS(e,t){switch(e){case"compositionend":return wp(t);case"keypress":return t.which!==32?null:(vp=!0,gp);case"textInput":return e=t.data,e===gp&&vp?null:e;default:return null}}function TS(e,t){if(Oi)return e==="compositionend"||!cu&&bp(e,t)?(e=dp(),Po=ru=vr=null,Oi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yp&&t.locale!=="ko"?null:t.data;default:return null}}var NS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!NS[e.type]:t==="textarea"}function xp(e,t,i,o){Ti?Ni?Ni.push(o):Ni=[o]:Ti=o,t=$l(t,"onChange"),0<t.length&&(i=new Ko("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Rs=null,zs=null;function OS(e){rg(e,0)}function Jo(e){var t=Za(e);if(ap(t))return e}function Ep(e,t){if(e==="change")return t}var kp=!1;if(Qa){var uu;if(Qa){var du="oninput"in document;if(!du){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),du=typeof Cp.oninput=="function"}uu=du}else uu=!1;kp=uu&&(!document.documentMode||9<document.documentMode)}function Tp(){Rs&&(Rs.detachEvent("onpropertychange",Np),zs=Rs=null)}function Np(e){if(e.propertyName==="value"&&Jo(zs)){var t=[];xp(t,zs,e,tu(e)),up(OS,t)}}function jS(e,t,i){e==="focusin"?(Tp(),Rs=t,zs=i,Rs.attachEvent("onpropertychange",Np)):e==="focusout"&&Tp()}function AS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(zs)}function _S(e,t){if(e==="click")return Jo(t)}function DS(e,t){if(e==="input"||e==="change")return Jo(t)}function MS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jn=typeof Object.is=="function"?Object.is:MS;function Ls(e,t){if(Jn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!ie.call(t,u)||!Jn(e[u],t[u]))return!1}return!0}function Op(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jp(e,t){var i=Op(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Op(i)}}function Ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _p(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Yo(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Yo(e.document)}return t}function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var RS=Qa&&"documentMode"in document&&11>=document.documentMode,ji=null,hu=null,Bs=null,pu=!1;function Dp(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;pu||ji==null||ji!==Yo(o)||(o=ji,"selectionStart"in o&&fu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Bs&&Ls(Bs,o)||(Bs=o,o=$l(hu,"onSelect"),0<o.length&&(t=new Ko("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=ji)))}function ei(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ai={animationend:ei("Animation","AnimationEnd"),animationiteration:ei("Animation","AnimationIteration"),animationstart:ei("Animation","AnimationStart"),transitionrun:ei("Transition","TransitionRun"),transitionstart:ei("Transition","TransitionStart"),transitioncancel:ei("Transition","TransitionCancel"),transitionend:ei("Transition","TransitionEnd")},mu={},Mp={};Qa&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function ti(e){if(mu[e])return mu[e];if(!Ai[e])return e;var t=Ai[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Mp)return mu[e]=t[i];return e}var Rp=ti("animationend"),zp=ti("animationiteration"),Lp=ti("animationstart"),zS=ti("transitionrun"),LS=ti("transitionstart"),BS=ti("transitioncancel"),Bp=ti("transitionend"),Up=new Map,yu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yu.push("scrollEnd");function Ca(e,t){Up.set(e,t),ke(t,[e])}var Wo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ca=[],_i=0,gu=0;function el(){for(var e=_i,t=gu=_i=0;t<e;){var i=ca[t];ca[t++]=null;var o=ca[t];ca[t++]=null;var u=ca[t];ca[t++]=null;var f=ca[t];if(ca[t++]=null,o!==null&&u!==null){var g=o.pending;g===null?u.next=u:(u.next=g.next,g.next=u),o.pending=u}f!==0&&Ip(i,u,f)}}function tl(e,t,i,o){ca[_i++]=e,ca[_i++]=t,ca[_i++]=i,ca[_i++]=o,gu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function vu(e,t,i,o){return tl(e,t,i,o),nl(e)}function ni(e,t){return tl(e,null,null,t),nl(e)}function Ip(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-it(i),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[t]:o.push(t),t.lane=i|536870912),f):null}function nl(e){if(50<io)throw io=0,Nd=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Di={};function US(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(e,t,i,o){return new US(e,t,i,o)}function bu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ja(e,t){var i=e.alternate;return i===null?(i=Wn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function $p(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function al(e,t,i,o,u,f){var g=0;if(o=e,typeof e=="function")bu(e)&&(g=1);else if(typeof e=="string")g=qx(e,i,z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case re:return e=Wn(31,i,t,u),e.elementType=re,e.lanes=f,e;case Z:return ai(i.children,u,f,t);case q:g=8,u|=24;break;case Q:return e=Wn(12,i,t,u|2),e.elementType=Q,e.lanes=f,e;case de:return e=Wn(13,i,t,u),e.elementType=de,e.lanes=f,e;case be:return e=Wn(19,i,t,u),e.elementType=be,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:g=10;break e;case K:g=9;break e;case Y:g=11;break e;case H:g=14;break e;case ue:g=16,o=null;break e}g=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return t=Wn(g,i,t,u),t.elementType=e,t.type=o,t.lanes=f,t}function ai(e,t,i,o){return e=Wn(7,e,o,t),e.lanes=i,e}function wu(e,t,i){return e=Wn(6,e,null,t),e.lanes=i,e}function Hp(e){var t=Wn(18,null,null,0);return t.stateNode=e,t}function Su(e,t,i){return t=Wn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vp=new WeakMap;function ua(e,t){if(typeof e=="object"&&e!==null){var i=Vp.get(e);return i!==void 0?i:(t={value:e,source:t,stack:F(t)},Vp.set(e,t),t)}return{value:e,source:t,stack:F(t)}}var Mi=[],Ri=0,rl=null,Us=0,da=[],fa=0,br=null,La=1,Ba="";function Wa(e,t){Mi[Ri++]=Us,Mi[Ri++]=rl,rl=e,Us=t}function qp(e,t,i){da[fa++]=La,da[fa++]=Ba,da[fa++]=br,br=e;var o=La;e=Ba;var u=32-it(o)-1;o&=~(1<<u),i+=1;var f=32-it(t)+u;if(30<f){var g=u-u%5;f=(o&(1<<g)-1).toString(32),o>>=g,u-=g,La=1<<32-it(t)+u|i<<u|o,Ba=f+e}else La=1<<f|i<<u|o,Ba=e}function xu(e){e.return!==null&&(Wa(e,1),qp(e,1,0))}function Eu(e){for(;e===rl;)rl=Mi[--Ri],Mi[Ri]=null,Us=Mi[--Ri],Mi[Ri]=null;for(;e===br;)br=da[--fa],da[fa]=null,Ba=da[--fa],da[fa]=null,La=da[--fa],da[fa]=null}function Gp(e,t){da[fa++]=La,da[fa++]=Ba,da[fa++]=br,La=t.id,Ba=t.overflow,br=e}var jn=null,$t=null,pt=!1,wr=null,ha=!1,ku=Error(s(519));function Sr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Is(ua(t,e)),ku}function Yp(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[un]=e,t[On]=o,i){case"dialog":ct("cancel",t),ct("close",t);break;case"iframe":case"object":case"embed":ct("load",t);break;case"video":case"audio":for(i=0;i<oo.length;i++)ct(oo[i],t);break;case"source":ct("error",t);break;case"img":case"image":case"link":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"input":ct("invalid",t),rp(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ct("invalid",t);break;case"textarea":ct("invalid",t),sp(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||lg(t.textContent,i)?(o.popover!=null&&(ct("beforetoggle",t),ct("toggle",t)),o.onScroll!=null&&ct("scroll",t),o.onScrollEnd!=null&&ct("scrollend",t),o.onClick!=null&&(t.onclick=Ka),t=!0):t=!1,t||Sr(e,!0)}function Fp(e){for(jn=e.return;jn;)switch(jn.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:jn=jn.return}}function zi(e){if(e!==jn)return!1;if(!pt)return Fp(e),pt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Vd(e.type,e.memoizedProps)),i=!i),i&&$t&&Sr(e),Fp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=gg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=gg(e)}else t===27?(t=$t,zr(e.type)?(e=Pd,Pd=null,$t=e):$t=t):$t=jn?ma(e.stateNode.nextSibling):null;return!0}function ri(){$t=jn=null,pt=!1}function Cu(){var e=wr;return e!==null&&(Zn===null?Zn=e:Zn.push.apply(Zn,e),wr=null),e}function Is(e){wr===null?wr=[e]:wr.push(e)}var Tu=S(null),ii=null,er=null;function xr(e,t,i){O(Tu,t._currentValue),t._currentValue=i}function tr(e){e._currentValue=Tu.current,_(Tu)}function Nu(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function Ou(e,t,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var g=u.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=u;for(var T=0;T<t.length;T++)if(w.context===t[T]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),Nu(f.return,i,e),o||(g=null);break e}f=w.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(s(341));g.lanes|=i,f=g.alternate,f!==null&&(f.lanes|=i),Nu(g,i,e),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function Li(e,t,i,o){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(s(387));if(g=g.memoizedProps,g!==null){var w=u.type;Jn(u.pendingProps.value,g.value)||(e!==null?e.push(w):e=[w])}}else if(u===Oe.current){if(g=u.alternate,g===null)throw Error(s(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ho):e=[ho])}u=u.return}e!==null&&Ou(t,e,i,o),t.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function si(e){ii=e,er=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function An(e){return Pp(ii,e)}function sl(e,t){return ii===null&&si(e),Pp(e,t)}function Pp(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},er===null){if(e===null)throw Error(s(308));er=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else er=er.next=t;return i}var IS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},$S=a.unstable_scheduleCallback,HS=a.unstable_NormalPriority,dn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ju(){return{controller:new IS,data:new Map,refCount:0}}function $s(e){e.refCount--,e.refCount===0&&$S(HS,function(){e.controller.abort()})}var Hs=null,Au=0,Bi=0,Ui=null;function VS(e,t){if(Hs===null){var i=Hs=[];Au=0,Bi=Md(),Ui={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Au++,t.then(Zp,Zp),t}function Zp(){if(--Au===0&&Hs!==null){Ui!==null&&(Ui.status="fulfilled");var e=Hs;Hs=null,Bi=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function qS(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var u=0;u<i.length;u++)(0,i[u])(t)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Xp=N.S;N.S=function(e,t){Dy=C(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&VS(e,t),Xp!==null&&Xp(e,t)};var oi=S(null);function _u(){var e=oi.current;return e!==null?e:Bt.pooledCache}function ol(e,t){t===null?O(oi,oi.current):O(oi,t.pool)}function Kp(){var e=_u();return e===null?null:{parent:dn._currentValue,pool:e}}var Ii=Error(s(460)),Du=Error(s(474)),ll=Error(s(542)),cl={then:function(){}};function Qp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jp(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Ka,Ka),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,em(e),e;default:if(typeof t.status=="string")t.then(Ka,Ka);else{if(e=Bt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=o}},function(o){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,em(e),e}throw ci=t,Ii}}function li(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ci=i,Ii):i}}var ci=null;function Wp(){if(ci===null)throw Error(s(459));var e=ci;return ci=null,e}function em(e){if(e===Ii||e===ll)throw Error(s(483))}var $i=null,Vs=0;function ul(e){var t=Vs;return Vs+=1,$i===null&&($i=[]),Jp($i,e,t)}function qs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dl(e,t){throw t.$$typeof===x?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function tm(e){function t(M,A){if(e){var I=M.deletions;I===null?(M.deletions=[A],M.flags|=16):I.push(A)}}function i(M,A){if(!e)return null;for(;A!==null;)t(M,A),A=A.sibling;return null}function o(M){for(var A=new Map;M!==null;)M.key!==null?A.set(M.key,M):A.set(M.index,M),M=M.sibling;return A}function u(M,A){return M=Ja(M,A),M.index=0,M.sibling=null,M}function f(M,A,I){return M.index=I,e?(I=M.alternate,I!==null?(I=I.index,I<A?(M.flags|=67108866,A):I):(M.flags|=67108866,A)):(M.flags|=1048576,A)}function g(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function w(M,A,I,te){return A===null||A.tag!==6?(A=wu(I,M.mode,te),A.return=M,A):(A=u(A,I),A.return=M,A)}function T(M,A,I,te){var Ie=I.type;return Ie===Z?W(M,A,I.props.children,te,I.key):A!==null&&(A.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ue&&li(Ie)===A.type)?(A=u(A,I.props),qs(A,I),A.return=M,A):(A=al(I.type,I.key,I.props,null,M.mode,te),qs(A,I),A.return=M,A)}function $(M,A,I,te){return A===null||A.tag!==4||A.stateNode.containerInfo!==I.containerInfo||A.stateNode.implementation!==I.implementation?(A=Su(I,M.mode,te),A.return=M,A):(A=u(A,I.children||[]),A.return=M,A)}function W(M,A,I,te,Ie){return A===null||A.tag!==7?(A=ai(I,M.mode,te,Ie),A.return=M,A):(A=u(A,I),A.return=M,A)}function ae(M,A,I){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=wu(""+A,M.mode,I),A.return=M,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case k:return I=al(A.type,A.key,A.props,null,M.mode,I),qs(I,A),I.return=M,I;case j:return A=Su(A,M.mode,I),A.return=M,A;case ue:return A=li(A),ae(M,A,I)}if(Ke(A)||je(A))return A=ai(A,M.mode,I,null),A.return=M,A;if(typeof A.then=="function")return ae(M,ul(A),I);if(A.$$typeof===L)return ae(M,sl(M,A),I);dl(M,A)}return null}function G(M,A,I,te){var Ie=A!==null?A.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return Ie!==null?null:w(M,A,""+I,te);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case k:return I.key===Ie?T(M,A,I,te):null;case j:return I.key===Ie?$(M,A,I,te):null;case ue:return I=li(I),G(M,A,I,te)}if(Ke(I)||je(I))return Ie!==null?null:W(M,A,I,te,null);if(typeof I.then=="function")return G(M,A,ul(I),te);if(I.$$typeof===L)return G(M,A,sl(M,I),te);dl(M,I)}return null}function X(M,A,I,te,Ie){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return M=M.get(I)||null,w(A,M,""+te,Ie);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case k:return M=M.get(te.key===null?I:te.key)||null,T(A,M,te,Ie);case j:return M=M.get(te.key===null?I:te.key)||null,$(A,M,te,Ie);case ue:return te=li(te),X(M,A,I,te,Ie)}if(Ke(te)||je(te))return M=M.get(I)||null,W(A,M,te,Ie,null);if(typeof te.then=="function")return X(M,A,I,ul(te),Ie);if(te.$$typeof===L)return X(M,A,I,sl(A,te),Ie);dl(A,te)}return null}function _e(M,A,I,te){for(var Ie=null,wt=null,De=A,tt=A=0,dt=null;De!==null&&tt<I.length;tt++){De.index>tt?(dt=De,De=null):dt=De.sibling;var St=G(M,De,I[tt],te);if(St===null){De===null&&(De=dt);break}e&&De&&St.alternate===null&&t(M,De),A=f(St,A,tt),wt===null?Ie=St:wt.sibling=St,wt=St,De=dt}if(tt===I.length)return i(M,De),pt&&Wa(M,tt),Ie;if(De===null){for(;tt<I.length;tt++)De=ae(M,I[tt],te),De!==null&&(A=f(De,A,tt),wt===null?Ie=De:wt.sibling=De,wt=De);return pt&&Wa(M,tt),Ie}for(De=o(De);tt<I.length;tt++)dt=X(De,M,tt,I[tt],te),dt!==null&&(e&&dt.alternate!==null&&De.delete(dt.key===null?tt:dt.key),A=f(dt,A,tt),wt===null?Ie=dt:wt.sibling=dt,wt=dt);return e&&De.forEach(function($r){return t(M,$r)}),pt&&Wa(M,tt),Ie}function qe(M,A,I,te){if(I==null)throw Error(s(151));for(var Ie=null,wt=null,De=A,tt=A=0,dt=null,St=I.next();De!==null&&!St.done;tt++,St=I.next()){De.index>tt?(dt=De,De=null):dt=De.sibling;var $r=G(M,De,St.value,te);if($r===null){De===null&&(De=dt);break}e&&De&&$r.alternate===null&&t(M,De),A=f($r,A,tt),wt===null?Ie=$r:wt.sibling=$r,wt=$r,De=dt}if(St.done)return i(M,De),pt&&Wa(M,tt),Ie;if(De===null){for(;!St.done;tt++,St=I.next())St=ae(M,St.value,te),St!==null&&(A=f(St,A,tt),wt===null?Ie=St:wt.sibling=St,wt=St);return pt&&Wa(M,tt),Ie}for(De=o(De);!St.done;tt++,St=I.next())St=X(De,M,tt,St.value,te),St!==null&&(e&&St.alternate!==null&&De.delete(St.key===null?tt:St.key),A=f(St,A,tt),wt===null?Ie=St:wt.sibling=St,wt=St);return e&&De.forEach(function(eE){return t(M,eE)}),pt&&Wa(M,tt),Ie}function Rt(M,A,I,te){if(typeof I=="object"&&I!==null&&I.type===Z&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case k:e:{for(var Ie=I.key;A!==null;){if(A.key===Ie){if(Ie=I.type,Ie===Z){if(A.tag===7){i(M,A.sibling),te=u(A,I.props.children),te.return=M,M=te;break e}}else if(A.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ue&&li(Ie)===A.type){i(M,A.sibling),te=u(A,I.props),qs(te,I),te.return=M,M=te;break e}i(M,A);break}else t(M,A);A=A.sibling}I.type===Z?(te=ai(I.props.children,M.mode,te,I.key),te.return=M,M=te):(te=al(I.type,I.key,I.props,null,M.mode,te),qs(te,I),te.return=M,M=te)}return g(M);case j:e:{for(Ie=I.key;A!==null;){if(A.key===Ie)if(A.tag===4&&A.stateNode.containerInfo===I.containerInfo&&A.stateNode.implementation===I.implementation){i(M,A.sibling),te=u(A,I.children||[]),te.return=M,M=te;break e}else{i(M,A);break}else t(M,A);A=A.sibling}te=Su(I,M.mode,te),te.return=M,M=te}return g(M);case ue:return I=li(I),Rt(M,A,I,te)}if(Ke(I))return _e(M,A,I,te);if(je(I)){if(Ie=je(I),typeof Ie!="function")throw Error(s(150));return I=Ie.call(I),qe(M,A,I,te)}if(typeof I.then=="function")return Rt(M,A,ul(I),te);if(I.$$typeof===L)return Rt(M,A,sl(M,I),te);dl(M,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,A!==null&&A.tag===6?(i(M,A.sibling),te=u(A,I),te.return=M,M=te):(i(M,A),te=wu(I,M.mode,te),te.return=M,M=te),g(M)):i(M,A)}return function(M,A,I,te){try{Vs=0;var Ie=Rt(M,A,I,te);return $i=null,Ie}catch(De){if(De===Ii||De===ll)throw De;var wt=Wn(29,De,null,M.mode);return wt.lanes=te,wt.return=M,wt}finally{}}}var ui=tm(!0),nm=tm(!1),Er=!1;function Mu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ru(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function kr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(xt&2)!==0){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,t=nl(e),Ip(e,null,i),t}return tl(e,o,t,i),nl(e)}function Gs(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,zt(e,i)}}function zu(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?u=f=t:f=f.next=t}else u=f=t;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Lu=!1;function Ys(){if(Lu){var e=Ui;if(e!==null)throw e}}function Fs(e,t,i,o){Lu=!1;var u=e.updateQueue;Er=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var T=w,$=T.next;T.next=null,g===null?f=$:g.next=$,g=T;var W=e.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==g&&(w===null?W.firstBaseUpdate=$:w.next=$,W.lastBaseUpdate=T))}if(f!==null){var ae=u.baseState;g=0,W=$=T=null,w=f;do{var G=w.lane&-536870913,X=G!==w.lane;if(X?(ut&G)===G:(o&G)===G){G!==0&&G===Bi&&(Lu=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var _e=e,qe=w;G=t;var Rt=i;switch(qe.tag){case 1:if(_e=qe.payload,typeof _e=="function"){ae=_e.call(Rt,ae,G);break e}ae=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=qe.payload,G=typeof _e=="function"?_e.call(Rt,ae,G):_e,G==null)break e;ae=b({},ae,G);break e;case 2:Er=!0}}G=w.callback,G!==null&&(e.flags|=64,X&&(e.flags|=8192),X=u.callbacks,X===null?u.callbacks=[G]:X.push(G))}else X={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?($=W=X,T=ae):W=W.next=X,g|=G;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;X=w,w=X.next,X.next=null,u.lastBaseUpdate=X,u.shared.pending=null}}while(!0);W===null&&(T=ae),u.baseState=T,u.firstBaseUpdate=$,u.lastBaseUpdate=W,f===null&&(u.shared.lanes=0),Ar|=g,e.lanes=g,e.memoizedState=ae}}function am(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function rm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)am(i[e],t)}var Hi=S(null),fl=S(0);function im(e,t){e=ur,O(fl,e),O(Hi,t),ur=e|t.baseLanes}function Bu(){O(fl,ur),O(Hi,Hi.current)}function Uu(){ur=fl.current,_(Hi),_(fl)}var ea=S(null),pa=null;function Tr(e){var t=e.alternate;O(sn,sn.current&1),O(ea,e),pa===null&&(t===null||Hi.current!==null||t.memoizedState!==null)&&(pa=e)}function Iu(e){O(sn,sn.current),O(ea,e),pa===null&&(pa=e)}function sm(e){e.tag===22?(O(sn,sn.current),O(ea,e),pa===null&&(pa=e)):Nr()}function Nr(){O(sn,sn.current),O(ea,ea.current)}function ta(e){_(ea),pa===e&&(pa=null),_(sn)}var sn=S(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Yd(i)||Fd(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var nr=0,et=null,Dt=null,fn=null,pl=!1,Vi=!1,di=!1,ml=0,Ps=0,qi=null,GS=0;function Wt(){throw Error(s(321))}function $u(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Jn(e[i],t[i]))return!1;return!0}function Hu(e,t,i,o,u,f){return nr=f,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?qm:nd,di=!1,f=i(o,u),di=!1,Vi&&(f=lm(t,i,o,u)),om(e),f}function om(e){N.H=Ks;var t=Dt!==null&&Dt.next!==null;if(nr=0,fn=Dt=et=null,pl=!1,Ps=0,qi=null,t)throw Error(s(300));e===null||hn||(e=e.dependencies,e!==null&&il(e)&&(hn=!0))}function lm(e,t,i,o){et=e;var u=0;do{if(Vi&&(qi=null),Ps=0,Vi=!1,25<=u)throw Error(s(301));if(u+=1,fn=Dt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}N.H=Gm,f=t(i,o)}while(Vi);return f}function YS(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?Zs(t):t,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(et.flags|=1024),t}function Vu(){var e=ml!==0;return ml=0,e}function qu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Gu(e){if(pl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pl=!1}nr=0,fn=Dt=et=null,Vi=!1,Ps=ml=0,qi=null}function Vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?et.memoizedState=fn=e:fn=fn.next=e,fn}function on(){if(Dt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=fn===null?et.memoizedState:fn.next;if(t!==null)fn=t,Dt=e;else{if(e===null)throw et.alternate===null?Error(s(467)):Error(s(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},fn===null?et.memoizedState=fn=e:fn=fn.next=e}return fn}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zs(e){var t=Ps;return Ps+=1,qi===null&&(qi=[]),e=Jp(qi,e,t),t=et,(fn===null?t.memoizedState:fn.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?qm:nd),e}function gl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zs(e);if(e.$$typeof===L)return An(e)}throw Error(s(438,String(e)))}function Yu(e){var t=null,i=et.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=et.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=yl(),et.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=pe;return t.index++,i}function ar(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=on();return Fu(t,Dt,e)}function Fu(e,t,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}t.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var w=g=null,T=null,$=t,W=!1;do{var ae=$.lane&-536870913;if(ae!==$.lane?(ut&ae)===ae:(nr&ae)===ae){var G=$.revertLane;if(G===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ae===Bi&&(W=!0);else if((nr&G)===G){$=$.next,G===Bi&&(W=!0);continue}else ae={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},T===null?(w=T=ae,g=f):T=T.next=ae,et.lanes|=G,Ar|=G;ae=$.action,di&&i(f,ae),f=$.hasEagerState?$.eagerState:i(f,ae)}else G={lane:ae,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},T===null?(w=T=G,g=f):T=T.next=G,et.lanes|=ae,Ar|=ae;$=$.next}while($!==null&&$!==t);if(T===null?g=f:T.next=w,!Jn(f,e.memoizedState)&&(hn=!0,W&&(i=Ui,i!==null)))throw i;e.memoizedState=f,e.baseState=g,e.baseQueue=T,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Pu(e){var t=on(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,f=t.memoizedState;if(u!==null){i.pending=null;var g=u=u.next;do f=e(f,g.action),g=g.next;while(g!==u);Jn(f,t.memoizedState)||(hn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,o]}function cm(e,t,i){var o=et,u=on(),f=pt;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=t();var g=!Jn((Dt||u).memoizedState,i);if(g&&(u.memoizedState=i,hn=!0),u=u.queue,Ku(fm.bind(null,o,u,e),[e]),u.getSnapshot!==t||g||fn!==null&&fn.memoizedState.tag&1){if(o.flags|=2048,Gi(9,{destroy:void 0},dm.bind(null,o,u,i,t),null),Bt===null)throw Error(s(349));f||(nr&127)!==0||um(o,t,i)}return i}function um(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=et.updateQueue,t===null?(t=yl(),et.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function dm(e,t,i,o){t.value=i,t.getSnapshot=o,hm(t)&&pm(e)}function fm(e,t,i){return i(function(){hm(t)&&pm(e)})}function hm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Jn(e,i)}catch{return!0}}function pm(e){var t=ni(e,2);t!==null&&Xn(t,e,2)}function Zu(e){var t=Vn();if(typeof e=="function"){var i=e;if(e=i(),di){ze(!0);try{i()}finally{ze(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:e},t}function mm(e,t,i,o){return e.baseState=i,Fu(e,Dt,typeof o=="function"?o:ar)}function FS(e,t,i,o,u){if(Sl(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};N.T!==null?i(!0):f.isTransition=!1,o(f),i=t.pending,i===null?(f.next=t.pending=f,ym(t,f)):(f.next=i.next,t.pending=i.next=f)}}function ym(e,t){var i=t.action,o=t.payload,u=e.state;if(t.isTransition){var f=N.T,g={};N.T=g;try{var w=i(u,o),T=N.S;T!==null&&T(g,w),gm(e,t,w)}catch($){Xu(e,t,$)}finally{f!==null&&g.types!==null&&(f.types=g.types),N.T=f}}else try{f=i(u,o),gm(e,t,f)}catch($){Xu(e,t,$)}}function gm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){vm(e,t,o)},function(o){return Xu(e,t,o)}):vm(e,t,i)}function vm(e,t,i){t.status="fulfilled",t.value=i,bm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,ym(e,i)))}function Xu(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,bm(t),t=t.next;while(t!==o)}e.action=null}function bm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function wm(e,t){return t}function Sm(e,t){if(pt){var i=Bt.formState;if(i!==null){e:{var o=et;if(pt){if($t){t:{for(var u=$t,f=ha;u.nodeType!==8;){if(!f){u=null;break t}if(u=ma(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){$t=ma(u.nextSibling),o=u.data==="F!";break e}}Sr(o)}o=!1}o&&(t=i[0])}}return i=Vn(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wm,lastRenderedState:t},i.queue=o,i=$m.bind(null,et,o),o.dispatch=i,o=Zu(!1),f=td.bind(null,et,!1,o.queue),o=Vn(),u={state:t,dispatch:null,action:e,pending:null},o.queue=u,i=FS.bind(null,et,u,f,i),u.dispatch=i,o.memoizedState=e,[t,i,!1]}function xm(e){var t=on();return Em(t,Dt,e)}function Em(e,t,i){if(t=Fu(e,t,wm)[0],e=vl(ar)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Zs(t)}catch(g){throw g===Ii?ll:g}else o=t;t=on();var u=t.queue,f=u.dispatch;return i!==t.memoizedState&&(et.flags|=2048,Gi(9,{destroy:void 0},PS.bind(null,u,i),null)),[o,f,e]}function PS(e,t){e.action=t}function km(e){var t=on(),i=Dt;if(i!==null)return Em(t,i,e);on(),t=t.memoizedState,i=on();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function Gi(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=et.updateQueue,t===null&&(t=yl(),et.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function Cm(){return on().memoizedState}function bl(e,t,i,o){var u=Vn();et.flags|=e,u.memoizedState=Gi(1|t,{destroy:void 0},i,o===void 0?null:o)}function wl(e,t,i,o){var u=on();o=o===void 0?null:o;var f=u.memoizedState.inst;Dt!==null&&o!==null&&$u(o,Dt.memoizedState.deps)?u.memoizedState=Gi(t,f,i,o):(et.flags|=e,u.memoizedState=Gi(1|t,f,i,o))}function Tm(e,t){bl(8390656,8,e,t)}function Ku(e,t){wl(2048,8,e,t)}function ZS(e){et.flags|=4;var t=et.updateQueue;if(t===null)t=yl(),et.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Nm(e){var t=on().memoizedState;return ZS({ref:t,nextImpl:e}),function(){if((xt&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Om(e,t){return wl(4,2,e,t)}function jm(e,t){return wl(4,4,e,t)}function Am(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _m(e,t,i){i=i!=null?i.concat([e]):null,wl(4,4,Am.bind(null,t,e),i)}function Qu(){}function Dm(e,t){var i=on();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&$u(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Mm(e,t){var i=on();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&$u(t,o[1]))return o[0];if(o=e(),di){ze(!0);try{e()}finally{ze(!1)}}return i.memoizedState=[o,t],o}function Ju(e,t,i){return i===void 0||(nr&1073741824)!==0&&(ut&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Ry(),et.lanes|=e,Ar|=e,i)}function Rm(e,t,i,o){return Jn(i,t)?i:Hi.current!==null?(e=Ju(e,i,o),Jn(e,t)||(hn=!0),e):(nr&42)===0||(nr&1073741824)!==0&&(ut&261930)===0?(hn=!0,e.memoizedState=i):(e=Ry(),et.lanes|=e,Ar|=e,t)}function zm(e,t,i,o,u){var f=V.p;V.p=f!==0&&8>f?f:8;var g=N.T,w={};N.T=w,td(e,!1,t,i);try{var T=u(),$=N.S;if($!==null&&$(w,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var W=qS(T,o);Xs(e,t,W,ra(e))}else Xs(e,t,o,ra(e))}catch(ae){Xs(e,t,{then:function(){},status:"rejected",reason:ae},ra())}finally{V.p=f,g!==null&&w.types!==null&&(g.types=w.types),N.T=g}}function XS(){}function Wu(e,t,i,o){if(e.tag!==5)throw Error(s(476));var u=Lm(e).queue;zm(e,u,t,J,i===null?XS:function(){return Bm(e),i(o)})}function Lm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:J},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Bm(e){var t=Lm(e);t.next===null&&(t=e.alternate.memoizedState),Xs(e,t.next.queue,{},ra())}function ed(){return An(ho)}function Um(){return on().memoizedState}function Im(){return on().memoizedState}function KS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=ra();e=kr(i);var o=Cr(t,e,i);o!==null&&(Xn(o,t,i),Gs(o,t,i)),t={cache:ju()},e.payload=t;return}t=t.return}}function QS(e,t,i){var o=ra();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Sl(e)?Hm(t,i):(i=vu(e,t,i,o),i!==null&&(Xn(i,e,o),Vm(i,t,o)))}function $m(e,t,i){var o=ra();Xs(e,t,i,o)}function Xs(e,t,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Sl(e))Hm(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,w=f(g,i);if(u.hasEagerState=!0,u.eagerState=w,Jn(w,g))return tl(e,t,u,0),Bt===null&&el(),!1}catch{}finally{}if(i=vu(e,t,u,o),i!==null)return Xn(i,e,o),Vm(i,t,o),!0}return!1}function td(e,t,i,o){if(o={lane:2,revertLane:Md(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sl(e)){if(t)throw Error(s(479))}else t=vu(e,i,o,2),t!==null&&Xn(t,e,2)}function Sl(e){var t=e.alternate;return e===et||t!==null&&t===et}function Hm(e,t){Vi=pl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Vm(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,zt(e,i)}}var Ks={readContext:An,use:gl,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt};Ks.useEffectEvent=Wt;var qm={readContext:An,use:gl,useCallback:function(e,t){return Vn().memoizedState=[e,t===void 0?null:t],e},useContext:An,useEffect:Tm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,bl(4194308,4,Am.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bl(4194308,4,e,t)},useInsertionEffect:function(e,t){bl(4,2,e,t)},useMemo:function(e,t){var i=Vn();t=t===void 0?null:t;var o=e();if(di){ze(!0);try{e()}finally{ze(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=Vn();if(i!==void 0){var u=i(t);if(di){ze(!0);try{i(t)}finally{ze(!1)}}}else u=t;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=QS.bind(null,et,e),[o.memoizedState,e]},useRef:function(e){var t=Vn();return e={current:e},t.memoizedState=e},useState:function(e){e=Zu(e);var t=e.queue,i=$m.bind(null,et,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Qu,useDeferredValue:function(e,t){var i=Vn();return Ju(i,e,t)},useTransition:function(){var e=Zu(!1);return e=zm.bind(null,et,e.queue,!0,!1),Vn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=et,u=Vn();if(pt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Bt===null)throw Error(s(349));(ut&127)!==0||um(o,t,i)}u.memoizedState=i;var f={value:i,getSnapshot:t};return u.queue=f,Tm(fm.bind(null,o,f,e),[e]),o.flags|=2048,Gi(9,{destroy:void 0},dm.bind(null,o,f,i,t),null),i},useId:function(){var e=Vn(),t=Bt.identifierPrefix;if(pt){var i=Ba,o=La;i=(o&~(1<<32-it(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=ml++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=GS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ed,useFormState:Sm,useActionState:Sm,useOptimistic:function(e){var t=Vn();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=td.bind(null,et,!0,i),i.dispatch=t,[e,t]},useMemoCache:Yu,useCacheRefresh:function(){return Vn().memoizedState=KS.bind(null,et)},useEffectEvent:function(e){var t=Vn(),i={impl:e};return t.memoizedState=i,function(){if((xt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},nd={readContext:An,use:gl,useCallback:Dm,useContext:An,useEffect:Ku,useImperativeHandle:_m,useInsertionEffect:Om,useLayoutEffect:jm,useMemo:Mm,useReducer:vl,useRef:Cm,useState:function(){return vl(ar)},useDebugValue:Qu,useDeferredValue:function(e,t){var i=on();return Rm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=vl(ar)[0],t=on().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:ed,useFormState:xm,useActionState:xm,useOptimistic:function(e,t){var i=on();return mm(i,Dt,e,t)},useMemoCache:Yu,useCacheRefresh:Im};nd.useEffectEvent=Nm;var Gm={readContext:An,use:gl,useCallback:Dm,useContext:An,useEffect:Ku,useImperativeHandle:_m,useInsertionEffect:Om,useLayoutEffect:jm,useMemo:Mm,useReducer:Pu,useRef:Cm,useState:function(){return Pu(ar)},useDebugValue:Qu,useDeferredValue:function(e,t){var i=on();return Dt===null?Ju(i,e,t):Rm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=Pu(ar)[0],t=on().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:ed,useFormState:km,useActionState:km,useOptimistic:function(e,t){var i=on();return Dt!==null?mm(i,Dt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Yu,useCacheRefresh:Im};Gm.useEffectEvent=Nm;function ad(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:b({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var rd={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=ra(),u=kr(o);u.payload=t,i!=null&&(u.callback=i),t=Cr(e,u,o),t!==null&&(Xn(t,e,o),Gs(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=ra(),u=kr(o);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=Cr(e,u,o),t!==null&&(Xn(t,e,o),Gs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ra(),o=kr(i);o.tag=2,t!=null&&(o.callback=t),t=Cr(e,o,i),t!==null&&(Xn(t,e,i),Gs(t,e,i))}};function Ym(e,t,i,o,u,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):t.prototype&&t.prototype.isPureReactComponent?!Ls(i,o)||!Ls(u,f):!0}function Fm(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&rd.enqueueReplaceState(t,t.state,null)}function fi(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=b({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Pm(e){Wo(e)}function Zm(e){console.error(e)}function Xm(e){Wo(e)}function xl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Km(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function id(e,t,i){return i=kr(i),i.tag=3,i.payload={element:null},i.callback=function(){xl(e,t)},i}function Qm(e){return e=kr(e),e.tag=3,e}function Jm(e,t,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){Km(t,i,o)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Km(t,i,o),typeof u!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function JS(e,t,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Li(t,i,u,!0),i=ea.current,i!==null){switch(i.tag){case 31:case 13:return pa===null?Rl():i.alternate===null&&en===0&&(en=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),Ad(e,o,u)),!1;case 22:return i.flags|=65536,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),Ad(e,o,u)),!1}throw Error(s(435,i.tag))}return Ad(e,o,u),Rl(),!1}if(pt)return t=ea.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,o!==ku&&(e=Error(s(422),{cause:o}),Is(ua(e,i)))):(o!==ku&&(t=Error(s(423),{cause:o}),Is(ua(t,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=ua(o,i),u=id(e.stateNode,o,u),zu(e,u),en!==4&&(en=2)),!1;var f=Error(s(520),{cause:o});if(f=ua(f,i),ro===null?ro=[f]:ro.push(f),en!==4&&(en=2),t===null)return!0;o=ua(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=id(i.stateNode,o,e),zu(i,e),!1;case 1:if(t=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(_r===null||!_r.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Qm(u),Jm(u,e,i,o),zu(i,u),!1}i=i.return}while(i!==null);return!1}var sd=Error(s(461)),hn=!1;function _n(e,t,i,o){t.child=e===null?nm(t,null,i,o):ui(t,e.child,i,o)}function Wm(e,t,i,o,u){i=i.render;var f=t.ref;if("ref"in o){var g={};for(var w in o)w!=="ref"&&(g[w]=o[w])}else g=o;return si(t),o=Hu(e,t,i,g,f,u),w=Vu(),e!==null&&!hn?(qu(e,t,u),rr(e,t,u)):(pt&&w&&xu(t),t.flags|=1,_n(e,t,o,u),t.child)}function ey(e,t,i,o,u){if(e===null){var f=i.type;return typeof f=="function"&&!bu(f)&&f.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=f,ty(e,t,f,o,u)):(e=al(i.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!pd(e,u)){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:Ls,i(g,o)&&e.ref===t.ref)return rr(e,t,u)}return t.flags|=1,e=Ja(f,o),e.ref=t.ref,e.return=t,t.child=e}function ty(e,t,i,o,u){if(e!==null){var f=e.memoizedProps;if(Ls(f,o)&&e.ref===t.ref)if(hn=!1,t.pendingProps=o=f,pd(e,u))(e.flags&131072)!==0&&(hn=!0);else return t.lanes=e.lanes,rr(e,t,u)}return od(e,t,i,o,u)}function ny(e,t,i,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=t.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,t.child=null;return ay(e,t,f,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ol(t,f!==null?f.cachePool:null),f!==null?im(t,f):Bu(),sm(t);else return o=t.lanes=536870912,ay(e,t,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(ol(t,f.cachePool),im(t,f),Nr(),t.memoizedState=null):(e!==null&&ol(t,null),Bu(),Nr());return _n(e,t,u,i),t.child}function Qs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ay(e,t,i,o,u){var f=_u();return f=f===null?null:{parent:dn._currentValue,pool:f},t.memoizedState={baseLanes:i,cachePool:f},e!==null&&ol(t,null),Bu(),sm(t),e!==null&&Li(e,t,o,!0),t.childLanes=u,null}function El(e,t){return t=Cl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ry(e,t,i){return ui(t,e.child,null,i),e=El(t,t.pendingProps),e.flags|=2,ta(t),t.memoizedState=null,e}function WS(e,t,i){var o=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(pt){if(o.mode==="hidden")return e=El(t,o),t.lanes=536870912,Qs(null,e);if(Iu(t),(e=$t)?(e=yg(e,ha),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:br!==null?{id:La,overflow:Ba}:null,retryLane:536870912,hydrationErrors:null},i=Hp(e),i.return=t,t.child=i,jn=t,$t=null)):e=null,e===null)throw Sr(t);return t.lanes=536870912,null}return El(t,o)}var f=e.memoizedState;if(f!==null){var g=f.dehydrated;if(Iu(t),u)if(t.flags&256)t.flags&=-257,t=ry(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(hn||Li(e,t,i,!1),u=(i&e.childLanes)!==0,hn||u){if(o=Bt,o!==null&&(g=Ve(o,i),g!==0&&g!==f.retryLane))throw f.retryLane=g,ni(e,g),Xn(o,e,g),sd;Rl(),t=ry(e,t,i)}else e=f.treeContext,$t=ma(g.nextSibling),jn=t,pt=!0,wr=null,ha=!1,e!==null&&Gp(t,e),t=El(t,o),t.flags|=4096;return t}return e=Ja(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function kl(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function od(e,t,i,o,u){return si(t),i=Hu(e,t,i,o,void 0,u),o=Vu(),e!==null&&!hn?(qu(e,t,u),rr(e,t,u)):(pt&&o&&xu(t),t.flags|=1,_n(e,t,i,u),t.child)}function iy(e,t,i,o,u,f){return si(t),t.updateQueue=null,i=lm(t,o,i,u),om(e),o=Vu(),e!==null&&!hn?(qu(e,t,f),rr(e,t,f)):(pt&&o&&xu(t),t.flags|=1,_n(e,t,i,f),t.child)}function sy(e,t,i,o,u){if(si(t),t.stateNode===null){var f=Di,g=i.contextType;typeof g=="object"&&g!==null&&(f=An(g)),f=new i(o,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=rd,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=o,f.state=t.memoizedState,f.refs={},Mu(t),g=i.contextType,f.context=typeof g=="object"&&g!==null?An(g):Di,f.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ad(t,i,g,o),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&rd.enqueueReplaceState(f,f.state,null),Fs(t,o,f,u),Ys(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){f=t.stateNode;var w=t.memoizedProps,T=fi(i,w);f.props=T;var $=f.context,W=i.contextType;g=Di,typeof W=="object"&&W!==null&&(g=An(W));var ae=i.getDerivedStateFromProps;W=typeof ae=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,W||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||$!==g)&&Fm(t,f,o,g),Er=!1;var G=t.memoizedState;f.state=G,Fs(t,o,f,u),Ys(),$=t.memoizedState,w||G!==$||Er?(typeof ae=="function"&&(ad(t,i,ae,o),$=t.memoizedState),(T=Er||Ym(t,i,T,o,G,$,g))?(W||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=$),f.props=o,f.state=$,f.context=g,o=T):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,Ru(e,t),g=t.memoizedProps,W=fi(i,g),f.props=W,ae=t.pendingProps,G=f.context,$=i.contextType,T=Di,typeof $=="object"&&$!==null&&(T=An($)),w=i.getDerivedStateFromProps,($=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==ae||G!==T)&&Fm(t,f,o,T),Er=!1,G=t.memoizedState,f.state=G,Fs(t,o,f,u),Ys();var X=t.memoizedState;g!==ae||G!==X||Er||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof w=="function"&&(ad(t,i,w,o),X=t.memoizedState),(W=Er||Ym(t,i,W,o,G,X,T)||e!==null&&e.dependencies!==null&&il(e.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,X,T),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,X,T)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=X),f.props=o,f.state=X,f.context=T,o=W):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),o=!1)}return f=o,kl(e,t),o=(t.flags&128)!==0,f||o?(f=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&o?(t.child=ui(t,e.child,null,u),t.child=ui(t,null,i,u)):_n(e,t,i,u),t.memoizedState=f.state,e=t.child):e=rr(e,t,u),e}function oy(e,t,i,o){return ri(),t.flags|=256,_n(e,t,i,o),t.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cd(e){return{baseLanes:e,cachePool:Kp()}}function ud(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=aa),e}function ly(e,t,i){var o=t.pendingProps,u=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(sn.current&2)!==0),g&&(u=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(pt){if(u?Tr(t):Nr(),(e=$t)?(e=yg(e,ha),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:br!==null?{id:La,overflow:Ba}:null,retryLane:536870912,hydrationErrors:null},i=Hp(e),i.return=t,t.child=i,jn=t,$t=null)):e=null,e===null)throw Sr(t);return Fd(e)?t.lanes=32:t.lanes=536870912,null}var w=o.children;return o=o.fallback,u?(Nr(),u=t.mode,w=Cl({mode:"hidden",children:w},u),o=ai(o,u,i,null),w.return=t,o.return=t,w.sibling=o,t.child=w,o=t.child,o.memoizedState=cd(i),o.childLanes=ud(e,g,i),t.memoizedState=ld,Qs(null,o)):(Tr(t),dd(t,w))}var T=e.memoizedState;if(T!==null&&(w=T.dehydrated,w!==null)){if(f)t.flags&256?(Tr(t),t.flags&=-257,t=fd(e,t,i)):t.memoizedState!==null?(Nr(),t.child=e.child,t.flags|=128,t=null):(Nr(),w=o.fallback,u=t.mode,o=Cl({mode:"visible",children:o.children},u),w=ai(w,u,i,null),w.flags|=2,o.return=t,w.return=t,o.sibling=w,t.child=o,ui(t,e.child,null,i),o=t.child,o.memoizedState=cd(i),o.childLanes=ud(e,g,i),t.memoizedState=ld,t=Qs(null,o));else if(Tr(t),Fd(w)){if(g=w.nextSibling&&w.nextSibling.dataset,g)var $=g.dgst;g=$,o=Error(s(419)),o.stack="",o.digest=g,Is({value:o,source:null,stack:null}),t=fd(e,t,i)}else if(hn||Li(e,t,i,!1),g=(i&e.childLanes)!==0,hn||g){if(g=Bt,g!==null&&(o=Ve(g,i),o!==0&&o!==T.retryLane))throw T.retryLane=o,ni(e,o),Xn(g,e,o),sd;Yd(w)||Rl(),t=fd(e,t,i)}else Yd(w)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,$t=ma(w.nextSibling),jn=t,pt=!0,wr=null,ha=!1,e!==null&&Gp(t,e),t=dd(t,o.children),t.flags|=4096);return t}return u?(Nr(),w=o.fallback,u=t.mode,T=e.child,$=T.sibling,o=Ja(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,$!==null?w=Ja($,w):(w=ai(w,u,i,null),w.flags|=2),w.return=t,o.return=t,o.sibling=w,t.child=o,Qs(null,o),o=t.child,w=e.child.memoizedState,w===null?w=cd(i):(u=w.cachePool,u!==null?(T=dn._currentValue,u=u.parent!==T?{parent:T,pool:T}:u):u=Kp(),w={baseLanes:w.baseLanes|i,cachePool:u}),o.memoizedState=w,o.childLanes=ud(e,g,i),t.memoizedState=ld,Qs(e.child,o)):(Tr(t),i=e.child,e=i.sibling,i=Ja(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function dd(e,t){return t=Cl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Cl(e,t){return e=Wn(22,e,null,t),e.lanes=0,e}function fd(e,t,i){return ui(t,e.child,null,i),e=dd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cy(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Nu(e.return,t,i)}function hd(e,t,i,o,u,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:f}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=i,g.tailMode=u,g.treeForkCount=f)}function uy(e,t,i){var o=t.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var g=sn.current,w=(g&2)!==0;if(w?(g=g&1|2,t.flags|=128):g&=1,O(sn,g),_n(e,t,o,i),o=pt?Us:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cy(e,i,t);else if(e.tag===19)cy(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&hl(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),hd(t,!1,u,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&hl(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}hd(t,!0,i,null,f,o);break;case"together":hd(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function rr(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ar|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Li(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Ja(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ja(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function pd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function ex(e,t,i){switch(t.tag){case 3:Ze(t,t.stateNode.containerInfo),xr(t,dn,e.memoizedState.cache),ri();break;case 27:case 5:We(t);break;case 4:Ze(t,t.stateNode.containerInfo);break;case 10:xr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Iu(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(Tr(t),t.flags|=128,null):(i&t.child.childLanes)!==0?ly(e,t,i):(Tr(t),e=rr(e,t,i),e!==null?e.sibling:null);Tr(t);break;case 19:var u=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Li(e,t,i,!1),o=(i&t.childLanes)!==0),u){if(o)return uy(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),O(sn,sn.current),o)break;return null;case 22:return t.lanes=0,ny(e,t,i,t.pendingProps);case 24:xr(t,dn,e.memoizedState.cache)}return rr(e,t,i)}function dy(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)hn=!0;else{if(!pd(e,i)&&(t.flags&128)===0)return hn=!1,ex(e,t,i);hn=(e.flags&131072)!==0}else hn=!1,pt&&(t.flags&1048576)!==0&&qp(t,Us,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=li(t.elementType),t.type=e,typeof e=="function")bu(e)?(o=fi(e,o),t.tag=1,t=sy(null,t,e,o,i)):(t.tag=0,t=od(null,t,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===Y){t.tag=11,t=Wm(null,t,e,o,i);break e}else if(u===H){t.tag=14,t=ey(null,t,e,o,i);break e}}throw t=rt(e)||e,Error(s(306,t,""))}}return t;case 0:return od(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,u=fi(o,t.pendingProps),sy(e,t,o,u,i);case 3:e:{if(Ze(t,t.stateNode.containerInfo),e===null)throw Error(s(387));o=t.pendingProps;var f=t.memoizedState;u=f.element,Ru(e,t),Fs(t,o,null,i);var g=t.memoizedState;if(o=g.cache,xr(t,dn,o),o!==f.cache&&Ou(t,[dn],i,!0),Ys(),o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=oy(e,t,o,i);break e}else if(o!==u){u=ua(Error(s(424)),t),Is(u),t=oy(e,t,o,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=ma(e.firstChild),jn=t,pt=!0,wr=null,ha=!0,i=nm(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ri(),o===u){t=rr(e,t,i);break e}_n(e,t,o,i)}t=t.child}return t;case 26:return kl(e,t),e===null?(i=xg(t.type,null,t.pendingProps,null))?t.memoizedState=i:pt||(i=t.type,e=t.pendingProps,o=Hl(me.current).createElement(i),o[un]=t,o[On]=e,Dn(o,i,e),ne(o),t.stateNode=o):t.memoizedState=xg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return We(t),e===null&&pt&&(o=t.stateNode=bg(t.type,t.pendingProps,me.current),jn=t,ha=!0,u=$t,zr(t.type)?(Pd=u,$t=ma(o.firstChild)):$t=u),_n(e,t,t.pendingProps.children,i),kl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&pt&&((u=o=$t)&&(o=Ax(o,t.type,t.pendingProps,ha),o!==null?(t.stateNode=o,jn=t,$t=ma(o.firstChild),ha=!1,u=!0):u=!1),u||Sr(t)),We(t),u=t.type,f=t.pendingProps,g=e!==null?e.memoizedProps:null,o=f.children,Vd(u,f)?o=null:g!==null&&Vd(u,g)&&(t.flags|=32),t.memoizedState!==null&&(u=Hu(e,t,YS,null,null,i),ho._currentValue=u),kl(e,t),_n(e,t,o,i),t.child;case 6:return e===null&&pt&&((e=i=$t)&&(i=_x(i,t.pendingProps,ha),i!==null?(t.stateNode=i,jn=t,$t=null,e=!0):e=!1),e||Sr(t)),null;case 13:return ly(e,t,i);case 4:return Ze(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=ui(t,null,o,i):_n(e,t,o,i),t.child;case 11:return Wm(e,t,t.type,t.pendingProps,i);case 7:return _n(e,t,t.pendingProps,i),t.child;case 8:return _n(e,t,t.pendingProps.children,i),t.child;case 12:return _n(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,xr(t,t.type,o.value),_n(e,t,o.children,i),t.child;case 9:return u=t.type._context,o=t.pendingProps.children,si(t),u=An(u),o=o(u),t.flags|=1,_n(e,t,o,i),t.child;case 14:return ey(e,t,t.type,t.pendingProps,i);case 15:return ty(e,t,t.type,t.pendingProps,i);case 19:return uy(e,t,i);case 31:return WS(e,t,i);case 22:return ny(e,t,i,t.pendingProps);case 24:return si(t),o=An(dn),e===null?(u=_u(),u===null&&(u=Bt,f=ju(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),t.memoizedState={parent:o,cache:u},Mu(t),xr(t,dn,u)):((e.lanes&i)!==0&&(Ru(e,t),Fs(t,null,null,i),Ys()),u=e.memoizedState,f=t.memoizedState,u.parent!==o?(u={parent:o,cache:o},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),xr(t,dn,o)):(o=f.cache,xr(t,dn,o),o!==u.cache&&Ou(t,[dn],i,!0))),_n(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function ir(e){e.flags|=4}function md(e,t,i,o,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Uy())e.flags|=8192;else throw ci=cl,Du}else e.flags&=-16777217}function fy(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ng(t))if(Uy())e.flags|=8192;else throw ci=cl,Du}function Tl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?U():536870912,e.lanes|=t,Zi|=t)}function Js(e,t){if(!pt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function tx(e,t,i){var o=t.pendingProps;switch(Eu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(t),null;case 1:return Ht(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),tr(dn),Be(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(zi(t)?ir(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Cu())),Ht(t),null;case 26:var u=t.type,f=t.memoizedState;return e===null?(ir(t),f!==null?(Ht(t),fy(t,f)):(Ht(t),md(t,u,null,o,i))):f?f!==e.memoizedState?(ir(t),Ht(t),fy(t,f)):(Ht(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&ir(t),Ht(t),md(t,u,e,o,i)),null;case 27:if(Nt(t),i=me.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ir(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ht(t),null}e=z.current,zi(t)?Yp(t):(e=bg(u,o,i),t.stateNode=e,ir(t))}return Ht(t),null;case 5:if(Nt(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ir(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ht(t),null}if(f=z.current,zi(t))Yp(t);else{var g=Hl(me.current);switch(f){case 1:f=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=g.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?g.createElement(u,{is:o.is}):g.createElement(u)}}f[un]=t,f[On]=o;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)f.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=f;e:switch(Dn(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ir(t)}}return Ht(t),md(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&ir(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(e=me.current,zi(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,u=jn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[un]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||lg(e.nodeValue,i)),e||Sr(t,!0)}else e=Hl(e).createTextNode(o),e[un]=t,t.stateNode=e}return Ht(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=zi(t),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[un]=t}else ri(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ht(t),e=!1}else i=Cu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(ta(t),t):(ta(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Ht(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=zi(t),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[un]=t}else ri(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ht(t),u=!1}else u=Cu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(ta(t),t):(ta(t),null)}return ta(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Tl(t,t.updateQueue),Ht(t),null);case 4:return Be(),e===null&&Bd(t.stateNode.containerInfo),Ht(t),null;case 10:return tr(t.type),Ht(t),null;case 19:if(_(sn),o=t.memoizedState,o===null)return Ht(t),null;if(u=(t.flags&128)!==0,f=o.rendering,f===null)if(u)Js(o,!1);else{if(en!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=hl(e),f!==null){for(t.flags|=128,Js(o,!1),e=f.updateQueue,t.updateQueue=e,Tl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)$p(i,e),i=i.sibling;return O(sn,sn.current&1|2),pt&&Wa(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&C()>_l&&(t.flags|=128,u=!0,Js(o,!1),t.lanes=4194304)}else{if(!u)if(e=hl(f),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Tl(t,e),Js(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!pt)return Ht(t),null}else 2*C()-o.renderingStartTime>_l&&i!==536870912&&(t.flags|=128,u=!0,Js(o,!1),t.lanes=4194304);o.isBackwards?(f.sibling=t.child,t.child=f):(e=o.last,e!==null?e.sibling=f:t.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=C(),e.sibling=null,i=sn.current,O(sn,u?i&1|2:i&1),pt&&Wa(t,o.treeForkCount),e):(Ht(t),null);case 22:case 23:return ta(t),Uu(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(Ht(t),t.subtreeFlags&6&&(t.flags|=8192)):Ht(t),i=t.updateQueue,i!==null&&Tl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&_(oi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),tr(dn),Ht(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function nx(e,t){switch(Eu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return tr(dn),Be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Nt(t),null;case 31:if(t.memoizedState!==null){if(ta(t),t.alternate===null)throw Error(s(340));ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ta(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _(sn),null;case 4:return Be(),null;case 10:return tr(t.type),null;case 22:case 23:return ta(t),Uu(),e!==null&&_(oi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return tr(dn),null;case 25:return null;default:return null}}function hy(e,t){switch(Eu(t),t.tag){case 3:tr(dn),Be();break;case 26:case 27:case 5:Nt(t);break;case 4:Be();break;case 31:t.memoizedState!==null&&ta(t);break;case 13:ta(t);break;case 19:_(sn);break;case 10:tr(t.type);break;case 22:case 23:ta(t),Uu(),e!==null&&_(oi);break;case 24:tr(dn)}}function Ws(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var f=i.create,g=i.inst;o=f(),g.destroy=o}i=i.next}while(i!==u)}}catch(w){At(t,t.return,w)}}function Or(e,t,i){try{var o=t.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var g=o.inst,w=g.destroy;if(w!==void 0){g.destroy=void 0,u=t;var T=i,$=w;try{$()}catch(W){At(u,T,W)}}}o=o.next}while(o!==f)}}catch(W){At(t,t.return,W)}}function py(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{rm(t,i)}catch(o){At(e,e.return,o)}}}function my(e,t,i){i.props=fi(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){At(e,t,o)}}function eo(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){At(e,t,u)}}function Ua(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){At(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){At(e,t,u)}else i.current=null}function yy(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){At(e,e.return,u)}}function yd(e,t,i){try{var o=e.stateNode;kx(o,e.type,i,t),o[On]=t}catch(u){At(e,e.return,u)}}function gy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&zr(e.type)||e.tag===4}function gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&zr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vd(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Ka));else if(o!==4&&(o===27&&zr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(vd(e,t,i),e=e.sibling;e!==null;)vd(e,t,i),e=e.sibling}function Nl(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&zr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Nl(e,t,i),e=e.sibling;e!==null;)Nl(e,t,i),e=e.sibling}function vy(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Dn(t,o,i),t[un]=e,t[On]=i}catch(f){At(e,e.return,f)}}var sr=!1,pn=!1,bd=!1,by=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function ax(e,t){if(e=e.containerInfo,$d=Zl,e=_p(e),fu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,w=-1,T=-1,$=0,W=0,ae=e,G=null;t:for(;;){for(var X;ae!==i||u!==0&&ae.nodeType!==3||(w=g+u),ae!==f||o!==0&&ae.nodeType!==3||(T=g+o),ae.nodeType===3&&(g+=ae.nodeValue.length),(X=ae.firstChild)!==null;)G=ae,ae=X;for(;;){if(ae===e)break t;if(G===i&&++$===u&&(w=g),G===f&&++W===o&&(T=g),(X=ae.nextSibling)!==null)break;ae=G,G=ae.parentNode}ae=X}i=w===-1||T===-1?null:{start:w,end:T}}else i=null}i=i||{start:0,end:0}}else i=null;for(Hd={focusedElem:e,selectionRange:i},Zl=!1,Cn=t;Cn!==null;)if(t=Cn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Cn=e;else for(;Cn!==null;){switch(t=Cn,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=t,u=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var _e=fi(i.type,u);e=o.getSnapshotBeforeUpdate(_e,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(qe){At(i,i.return,qe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Gd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Cn=e;break}Cn=t.return}}function wy(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:lr(e,i),o&4&&Ws(5,i);break;case 1:if(lr(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){At(i,i.return,g)}else{var u=fi(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){At(i,i.return,g)}}o&64&&py(i),o&512&&eo(i,i.return);break;case 3:if(lr(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{rm(e,t)}catch(g){At(i,i.return,g)}}break;case 27:t===null&&o&4&&vy(i);case 26:case 5:lr(e,i),t===null&&o&4&&yy(i),o&512&&eo(i,i.return);break;case 12:lr(e,i);break;case 31:lr(e,i),o&4&&Ey(e,i);break;case 13:lr(e,i),o&4&&ky(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=fx.bind(null,i),Dx(e,i))));break;case 22:if(o=i.memoizedState!==null||sr,!o){t=t!==null&&t.memoizedState!==null||pn,u=sr;var f=pn;sr=o,(pn=t)&&!f?cr(e,i,(i.subtreeFlags&8772)!==0):lr(e,i),sr=u,pn=f}break;case 30:break;default:lr(e,i)}}function Sy(e){var t=e.alternate;t!==null&&(e.alternate=null,Sy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ka(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ft=null,Yn=!1;function or(e,t,i){for(i=i.child;i!==null;)xy(e,t,i),i=i.sibling}function xy(e,t,i){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Le,i)}catch{}switch(i.tag){case 26:pn||Ua(i,t),or(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:pn||Ua(i,t);var o=Ft,u=Yn;zr(i.type)&&(Ft=i.stateNode,Yn=!1),or(e,t,i),co(i.stateNode),Ft=o,Yn=u;break;case 5:pn||Ua(i,t);case 6:if(o=Ft,u=Yn,Ft=null,or(e,t,i),Ft=o,Yn=u,Ft!==null)if(Yn)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(i.stateNode)}catch(f){At(i,t,f)}else try{Ft.removeChild(i.stateNode)}catch(f){At(i,t,f)}break;case 18:Ft!==null&&(Yn?(e=Ft,pg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ns(e)):pg(Ft,i.stateNode));break;case 4:o=Ft,u=Yn,Ft=i.stateNode.containerInfo,Yn=!0,or(e,t,i),Ft=o,Yn=u;break;case 0:case 11:case 14:case 15:Or(2,i,t),pn||Or(4,i,t),or(e,t,i);break;case 1:pn||(Ua(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&my(i,t,o)),or(e,t,i);break;case 21:or(e,t,i);break;case 22:pn=(o=pn)||i.memoizedState!==null,or(e,t,i),pn=o;break;default:or(e,t,i)}}function Ey(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ns(e)}catch(i){At(t,t.return,i)}}}function ky(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ns(e)}catch(i){At(t,t.return,i)}}function rx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new by),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new by),t;default:throw Error(s(435,e.tag))}}function Ol(e,t){var i=rx(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var u=hx.bind(null,e,o);o.then(u,u)}})}function Fn(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],f=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 27:if(zr(w.type)){Ft=w.stateNode,Yn=!1;break e}break;case 5:Ft=w.stateNode,Yn=!1;break e;case 3:case 4:Ft=w.stateNode.containerInfo,Yn=!0;break e}w=w.return}if(Ft===null)throw Error(s(160));xy(f,g,u),Ft=null,Yn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Cy(t,e),t=t.sibling}var Ta=null;function Cy(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Fn(t,e),Pn(e),o&4&&(Or(3,e,e.return),Ws(3,e),Or(5,e,e.return));break;case 1:Fn(t,e),Pn(e),o&512&&(pn||i===null||Ua(i,i.return)),o&64&&sr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Ta;if(Fn(t,e),Pn(e),o&512&&(pn||i===null||Ua(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Ea]||f[un]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),Dn(f,o,i),f[un]=e,ne(f),o=f;break e;case"link":var g=Cg("link","href",u).get(o+(i.href||""));if(g){for(var w=0;w<g.length;w++)if(f=g[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(w,1);break t}}f=u.createElement(o),Dn(f,o,i),u.head.appendChild(f);break;case"meta":if(g=Cg("meta","content",u).get(o+(i.content||""))){for(w=0;w<g.length;w++)if(f=g[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(w,1);break t}}f=u.createElement(o),Dn(f,o,i),u.head.appendChild(f);break;default:throw Error(s(468,o))}f[un]=e,ne(f),o=f}e.stateNode=o}else Tg(u,e.type,e.stateNode);else e.stateNode=kg(u,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?Tg(u,e.type,e.stateNode):kg(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&yd(e,e.memoizedProps,i.memoizedProps)}break;case 27:Fn(t,e),Pn(e),o&512&&(pn||i===null||Ua(i,i.return)),i!==null&&o&4&&yd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Fn(t,e),Pn(e),o&512&&(pn||i===null||Ua(i,i.return)),e.flags&32){u=e.stateNode;try{Ci(u,"")}catch(_e){At(e,e.return,_e)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,yd(e,u,i!==null?i.memoizedProps:u)),o&1024&&(bd=!0);break;case 6:if(Fn(t,e),Pn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(_e){At(e,e.return,_e)}}break;case 3:if(Gl=null,u=Ta,Ta=Vl(t.containerInfo),Fn(t,e),Ta=u,Pn(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ns(t.containerInfo)}catch(_e){At(e,e.return,_e)}bd&&(bd=!1,Ty(e));break;case 4:o=Ta,Ta=Vl(e.stateNode.containerInfo),Fn(t,e),Pn(e),Ta=o;break;case 12:Fn(t,e),Pn(e);break;case 31:Fn(t,e),Pn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 13:Fn(t,e),Pn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Al=C()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 22:u=e.memoizedState!==null;var T=i!==null&&i.memoizedState!==null,$=sr,W=pn;if(sr=$||u,pn=W||T,Fn(t,e),pn=W,sr=$,Pn(e),o&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(i===null||T||sr||pn||hi(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){T=i=t;try{if(f=T.stateNode,u)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{w=T.stateNode;var ae=T.memoizedProps.style,G=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(_e){At(T,T.return,_e)}}}else if(t.tag===6){if(i===null){T=t;try{T.stateNode.nodeValue=u?"":T.memoizedProps}catch(_e){At(T,T.return,_e)}}}else if(t.tag===18){if(i===null){T=t;try{var X=T.stateNode;u?mg(X,!0):mg(T.stateNode,!1)}catch(_e){At(T,T.return,_e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Ol(e,i))));break;case 19:Fn(t,e),Pn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 30:break;case 21:break;default:Fn(t,e),Pn(e)}}function Pn(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(gy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=gd(e);Nl(e,f,u);break;case 5:var g=i.stateNode;i.flags&32&&(Ci(g,""),i.flags&=-33);var w=gd(e);Nl(e,w,g);break;case 3:case 4:var T=i.stateNode.containerInfo,$=gd(e);vd(e,$,T);break;default:throw Error(s(161))}}catch(W){At(e,e.return,W)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ty(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ty(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function lr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wy(e,t.alternate,t),t=t.sibling}function hi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Or(4,t,t.return),hi(t);break;case 1:Ua(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&my(t,t.return,i),hi(t);break;case 27:co(t.stateNode);case 26:case 5:Ua(t,t.return),hi(t);break;case 22:t.memoizedState===null&&hi(t);break;case 30:hi(t);break;default:hi(t)}e=e.sibling}}function cr(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,u=e,f=t,g=f.flags;switch(f.tag){case 0:case 11:case 15:cr(u,f,i),Ws(4,f);break;case 1:if(cr(u,f,i),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch($){At(o,o.return,$)}if(o=f,u=o.updateQueue,u!==null){var w=o.stateNode;try{var T=u.shared.hiddenCallbacks;if(T!==null)for(u.shared.hiddenCallbacks=null,u=0;u<T.length;u++)am(T[u],w)}catch($){At(o,o.return,$)}}i&&g&64&&py(f),eo(f,f.return);break;case 27:vy(f);case 26:case 5:cr(u,f,i),i&&o===null&&g&4&&yy(f),eo(f,f.return);break;case 12:cr(u,f,i);break;case 31:cr(u,f,i),i&&g&4&&Ey(u,f);break;case 13:cr(u,f,i),i&&g&4&&ky(u,f);break;case 22:f.memoizedState===null&&cr(u,f,i),eo(f,f.return);break;case 30:break;default:cr(u,f,i)}t=t.sibling}}function wd(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&$s(i))}function Sd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e))}function Na(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ny(e,t,i,o),t=t.sibling}function Ny(e,t,i,o){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Na(e,t,i,o),u&2048&&Ws(9,t);break;case 1:Na(e,t,i,o);break;case 3:Na(e,t,i,o),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e)));break;case 12:if(u&2048){Na(e,t,i,o),e=t.stateNode;try{var f=t.memoizedProps,g=f.id,w=f.onPostCommit;typeof w=="function"&&w(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){At(t,t.return,T)}}else Na(e,t,i,o);break;case 31:Na(e,t,i,o);break;case 13:Na(e,t,i,o);break;case 23:break;case 22:f=t.stateNode,g=t.alternate,t.memoizedState!==null?f._visibility&2?Na(e,t,i,o):to(e,t):f._visibility&2?Na(e,t,i,o):(f._visibility|=2,Yi(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),u&2048&&wd(g,t);break;case 24:Na(e,t,i,o),u&2048&&Sd(t.alternate,t);break;default:Na(e,t,i,o)}}function Yi(e,t,i,o,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,g=t,w=i,T=o,$=g.flags;switch(g.tag){case 0:case 11:case 15:Yi(f,g,w,T,u),Ws(8,g);break;case 23:break;case 22:var W=g.stateNode;g.memoizedState!==null?W._visibility&2?Yi(f,g,w,T,u):to(f,g):(W._visibility|=2,Yi(f,g,w,T,u)),u&&$&2048&&wd(g.alternate,g);break;case 24:Yi(f,g,w,T,u),u&&$&2048&&Sd(g.alternate,g);break;default:Yi(f,g,w,T,u)}t=t.sibling}}function to(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,u=o.flags;switch(o.tag){case 22:to(i,o),u&2048&&wd(o.alternate,o);break;case 24:to(i,o),u&2048&&Sd(o.alternate,o);break;default:to(i,o)}t=t.sibling}}var no=8192;function Fi(e,t,i){if(e.subtreeFlags&no)for(e=e.child;e!==null;)Oy(e,t,i),e=e.sibling}function Oy(e,t,i){switch(e.tag){case 26:Fi(e,t,i),e.flags&no&&e.memoizedState!==null&&Gx(i,Ta,e.memoizedState,e.memoizedProps);break;case 5:Fi(e,t,i);break;case 3:case 4:var o=Ta;Ta=Vl(e.stateNode.containerInfo),Fi(e,t,i),Ta=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=no,no=16777216,Fi(e,t,i),no=o):Fi(e,t,i));break;default:Fi(e,t,i)}}function jy(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];Cn=o,_y(o,e)}jy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ay(e),e=e.sibling}function Ay(e){switch(e.tag){case 0:case 11:case 15:ao(e),e.flags&2048&&Or(9,e,e.return);break;case 3:ao(e);break;case 12:ao(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,jl(e)):ao(e);break;default:ao(e)}}function jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];Cn=o,_y(o,e)}jy(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Or(8,t,t.return),jl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,jl(t));break;default:jl(t)}e=e.sibling}}function _y(e,t){for(;Cn!==null;){var i=Cn;switch(i.tag){case 0:case 11:case 15:Or(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:$s(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,Cn=o;else e:for(i=e;Cn!==null;){o=Cn;var u=o.sibling,f=o.return;if(Sy(o),o===i){Cn=null;break e}if(u!==null){u.return=f,Cn=u;break e}Cn=f}}}var ix={getCacheForType:function(e){var t=An(dn),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return An(dn).controller.signal}},sx=typeof WeakMap=="function"?WeakMap:Map,xt=0,Bt=null,lt=null,ut=0,jt=0,na=null,jr=!1,Pi=!1,xd=!1,ur=0,en=0,Ar=0,pi=0,Ed=0,aa=0,Zi=0,ro=null,Zn=null,kd=!1,Al=0,Dy=0,_l=1/0,Dl=null,_r=null,wn=0,Dr=null,Xi=null,dr=0,Cd=0,Td=null,My=null,io=0,Nd=null;function ra(){return(xt&2)!==0&&ut!==0?ut&-ut:N.T!==null?Md():kt()}function Ry(){if(aa===0)if((ut&536870912)===0||pt){var e=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),aa=e}else aa=536870912;return e=ea.current,e!==null&&(e.flags|=32),aa}function Xn(e,t,i){(e===Bt&&(jt===2||jt===9)||e.cancelPendingCommit!==null)&&(Ki(e,0),Mr(e,ut,aa,!1)),he(e,i),((xt&2)===0||e!==Bt)&&(e===Bt&&((xt&2)===0&&(pi|=i),en===4&&Mr(e,ut,aa,!1)),Ia(e))}function zy(e,t,i){if((xt&6)!==0)throw Error(s(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Kt(e,t),u=o?cx(e,t):jd(e,t,!0),f=o;do{if(u===0){Pi&&!o&&Mr(e,t,0,!1);break}else{if(i=e.current.alternate,f&&!ox(i)){u=jd(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var w=e;u=ro;var T=w.current.memoizedState.isDehydrated;if(T&&(Ki(w,g).flags|=256),g=jd(w,g,!1),g!==2){if(xd&&!T){w.errorRecoveryDisabledLanes|=f,pi|=f,u=4;break e}f=Zn,Zn=u,f!==null&&(Zn===null?Zn=f:Zn.push.apply(Zn,f))}u=g}if(f=!1,u!==2)continue}}if(u===1){Ki(e,0),Mr(e,t,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Mr(o,t,aa,!jr);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Al+300-C(),10<u)){if(Mr(o,t,aa,!jr),qt(o,0,!0)!==0)break e;dr=t,o.timeoutHandle=fg(Ly.bind(null,o,i,Zn,Dl,kd,t,aa,pi,Zi,jr,f,"Throttled",-0,0),u);break e}Ly(o,i,Zn,Dl,kd,t,aa,pi,Zi,jr,f,null,-0,0)}}break}while(!0);Ia(e)}function Ly(e,t,i,o,u,f,g,w,T,$,W,ae,G,X){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ka},Oy(t,f,ae);var _e=(f&62914560)===f?Al-C():(f&4194048)===f?Dy-C():0;if(_e=Yx(ae,_e),_e!==null){dr=f,e.cancelPendingCommit=_e(Gy.bind(null,e,t,f,i,o,u,g,w,T,W,ae,null,G,X)),Mr(e,f,g,!$);return}}Gy(e,t,f,i,o,u,g,w,T)}function ox(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],f=u.getSnapshot;u=u.value;try{if(!Jn(f(),u))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mr(e,t,i,o){t&=~Ed,t&=~pi,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var u=t;0<u;){var f=31-it(u),g=1<<f;o[f]=-1,u&=~g}i!==0&&xn(e,i,t)}function Ml(){return(xt&6)===0?(so(0),!1):!0}function Od(){if(lt!==null){if(jt===0)var e=lt.return;else e=lt,er=ii=null,Gu(e),$i=null,Vs=0,e=lt;for(;e!==null;)hy(e.alternate,e),e=e.return;lt=null}}function Ki(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Nx(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),dr=0,Od(),Bt=e,lt=i=Ja(e.current,null),ut=t,jt=0,na=null,jr=!1,Pi=Kt(e,t),xd=!1,Zi=aa=Ed=pi=Ar=en=0,Zn=ro=null,kd=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var u=31-it(o),f=1<<u;t|=e[u],o&=~f}return ur=t,el(),i}function By(e,t){et=null,N.H=Ks,t===Ii||t===ll?(t=Wp(),jt=3):t===Du?(t=Wp(),jt=4):jt=t===sd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,na=t,lt===null&&(en=1,xl(e,ua(t,e.current)))}function Uy(){var e=ea.current;return e===null?!0:(ut&4194048)===ut?pa===null:(ut&62914560)===ut||(ut&536870912)!==0?e===pa:!1}function Iy(){var e=N.H;return N.H=Ks,e===null?Ks:e}function $y(){var e=N.A;return N.A=ix,e}function Rl(){en=4,jr||(ut&4194048)!==ut&&ea.current!==null||(Pi=!0),(Ar&134217727)===0&&(pi&134217727)===0||Bt===null||Mr(Bt,ut,aa,!1)}function jd(e,t,i){var o=xt;xt|=2;var u=Iy(),f=$y();(Bt!==e||ut!==t)&&(Dl=null,Ki(e,t)),t=!1;var g=en;e:do try{if(jt!==0&&lt!==null){var w=lt,T=na;switch(jt){case 8:Od(),g=6;break e;case 3:case 2:case 9:case 6:ea.current===null&&(t=!0);var $=jt;if(jt=0,na=null,Qi(e,w,T,$),i&&Pi){g=0;break e}break;default:$=jt,jt=0,na=null,Qi(e,w,T,$)}}lx(),g=en;break}catch(W){By(e,W)}while(!0);return t&&e.shellSuspendCounter++,er=ii=null,xt=o,N.H=u,N.A=f,lt===null&&(Bt=null,ut=0,el()),g}function lx(){for(;lt!==null;)Hy(lt)}function cx(e,t){var i=xt;xt|=2;var o=Iy(),u=$y();Bt!==e||ut!==t?(Dl=null,_l=C()+500,Ki(e,t)):Pi=Kt(e,t);e:do try{if(jt!==0&&lt!==null){t=lt;var f=na;t:switch(jt){case 1:jt=0,na=null,Qi(e,t,f,1);break;case 2:case 9:if(Qp(f)){jt=0,na=null,Vy(t);break}t=function(){jt!==2&&jt!==9||Bt!==e||(jt=7),Ia(e)},f.then(t,t);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:Qp(f)?(jt=0,na=null,Vy(t)):(jt=0,na=null,Qi(e,t,f,7));break;case 5:var g=null;switch(lt.tag){case 26:g=lt.memoizedState;case 5:case 27:var w=lt;if(g?Ng(g):w.stateNode.complete){jt=0,na=null;var T=w.sibling;if(T!==null)lt=T;else{var $=w.return;$!==null?(lt=$,zl($)):lt=null}break t}}jt=0,na=null,Qi(e,t,f,5);break;case 6:jt=0,na=null,Qi(e,t,f,6);break;case 8:Od(),en=6;break e;default:throw Error(s(462))}}ux();break}catch(W){By(e,W)}while(!0);return er=ii=null,N.H=o,N.A=u,xt=i,lt!==null?0:(Bt=null,ut=0,el(),en)}function ux(){for(;lt!==null&&!Se();)Hy(lt)}function Hy(e){var t=dy(e.alternate,e,ur);e.memoizedProps=e.pendingProps,t===null?zl(e):lt=t}function Vy(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=iy(i,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=iy(i,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:Gu(t);default:hy(i,t),t=lt=$p(t,ur),t=dy(i,t,ur)}e.memoizedProps=e.pendingProps,t===null?zl(e):lt=t}function Qi(e,t,i,o){er=ii=null,Gu(t),$i=null,Vs=0;var u=t.return;try{if(JS(e,u,t,i,ut)){en=1,xl(e,ua(i,e.current)),lt=null;return}}catch(f){if(u!==null)throw lt=u,f;en=1,xl(e,ua(i,e.current)),lt=null;return}t.flags&32768?(pt||o===1?e=!0:Pi||(ut&536870912)!==0?e=!1:(jr=e=!0,(o===2||o===9||o===3||o===6)&&(o=ea.current,o!==null&&o.tag===13&&(o.flags|=16384))),qy(t,e)):zl(t)}function zl(e){var t=e;do{if((t.flags&32768)!==0){qy(t,jr);return}e=t.return;var i=tx(t.alternate,t,ur);if(i!==null){lt=i;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);en===0&&(en=5)}function qy(e,t){do{var i=nx(e.alternate,e);if(i!==null){i.flags&=32767,lt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){lt=e;return}lt=e=i}while(e!==null);en=6,lt=null}function Gy(e,t,i,o,u,f,g,w,T){e.cancelPendingCommit=null;do Ll();while(wn!==0);if((xt&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=gu,Ue(e,i,f,g,w,T),e===Bt&&(lt=Bt=null,ut=0),Xi=t,Dr=e,dr=i,Cd=f,Td=u,My=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,px(we,function(){return Xy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=N.T,N.T=null,u=V.p,V.p=2,g=xt,xt|=4;try{ax(e,t,i)}finally{xt=g,V.p=u,N.T=o}}wn=1,Yy(),Fy(),Py()}}function Yy(){if(wn===1){wn=0;var e=Dr,t=Xi,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null;var o=V.p;V.p=2;var u=xt;xt|=4;try{Cy(t,e);var f=Hd,g=_p(e.containerInfo),w=f.focusedElem,T=f.selectionRange;if(g!==w&&w&&w.ownerDocument&&Ap(w.ownerDocument.documentElement,w)){if(T!==null&&fu(w)){var $=T.start,W=T.end;if(W===void 0&&(W=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(W,w.value.length);else{var ae=w.ownerDocument||document,G=ae&&ae.defaultView||window;if(G.getSelection){var X=G.getSelection(),_e=w.textContent.length,qe=Math.min(T.start,_e),Rt=T.end===void 0?qe:Math.min(T.end,_e);!X.extend&&qe>Rt&&(g=Rt,Rt=qe,qe=g);var M=jp(w,qe),A=jp(w,Rt);if(M&&A&&(X.rangeCount!==1||X.anchorNode!==M.node||X.anchorOffset!==M.offset||X.focusNode!==A.node||X.focusOffset!==A.offset)){var I=ae.createRange();I.setStart(M.node,M.offset),X.removeAllRanges(),qe>Rt?(X.addRange(I),X.extend(A.node,A.offset)):(I.setEnd(A.node,A.offset),X.addRange(I))}}}}for(ae=[],X=w;X=X.parentNode;)X.nodeType===1&&ae.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ae.length;w++){var te=ae[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Zl=!!$d,Hd=$d=null}finally{xt=u,V.p=o,N.T=i}}e.current=t,wn=2}}function Fy(){if(wn===2){wn=0;var e=Dr,t=Xi,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=N.T,N.T=null;var o=V.p;V.p=2;var u=xt;xt|=4;try{wy(e,t.alternate,t)}finally{xt=u,V.p=o,N.T=i}}wn=3}}function Py(){if(wn===4||wn===3){wn=0,se();var e=Dr,t=Xi,i=dr,o=My;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?wn=5:(wn=0,Xi=Dr=null,Zy(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(_r=null),st(i),t=t.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Le,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=N.T,u=V.p,V.p=2,N.T=null;try{for(var f=e.onRecoverableError,g=0;g<o.length;g++){var w=o[g];f(w.value,{componentStack:w.stack})}}finally{N.T=t,V.p=u}}(dr&3)!==0&&Ll(),Ia(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===Nd?io++:(io=0,Nd=e):io=0,so(0)}}function Zy(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,$s(t)))}function Ll(){return Yy(),Fy(),Py(),Xy()}function Xy(){if(wn!==5)return!1;var e=Dr,t=Cd;Cd=0;var i=st(dr),o=N.T,u=V.p;try{V.p=32>i?32:i,N.T=null,i=Td,Td=null;var f=Dr,g=dr;if(wn=0,Xi=Dr=null,dr=0,(xt&6)!==0)throw Error(s(331));var w=xt;if(xt|=4,Ay(f.current),Ny(f,f.current,g,i),xt=w,so(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Le,f)}catch{}return!0}finally{V.p=u,N.T=o,Zy(e,t)}}function Ky(e,t,i){t=ua(i,t),t=id(e.stateNode,t,2),e=Cr(e,t,2),e!==null&&(he(e,2),Ia(e))}function At(e,t,i){if(e.tag===3)Ky(e,e,i);else for(;t!==null;){if(t.tag===3){Ky(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(_r===null||!_r.has(o))){e=ua(i,e),i=Qm(2),o=Cr(t,i,2),o!==null&&(Jm(i,o,t,e),he(o,2),Ia(o));break}}t=t.return}}function Ad(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new sx;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(i)||(xd=!0,u.add(i),e=dx.bind(null,e,t,i),t.then(e,e))}function dx(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Bt===e&&(ut&i)===i&&(en===4||en===3&&(ut&62914560)===ut&&300>C()-Al?(xt&2)===0&&Ki(e,0):Ed|=i,Zi===ut&&(Zi=0)),Ia(e)}function Qy(e,t){t===0&&(t=U()),e=ni(e,t),e!==null&&(he(e,t),Ia(e))}function fx(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Qy(e,i)}function hx(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(t),Qy(e,i)}function px(e,t){return ee(e,t)}var Bl=null,Ji=null,_d=!1,Ul=!1,Dd=!1,Rr=0;function Ia(e){e!==Ji&&e.next===null&&(Ji===null?Bl=Ji=e:Ji=Ji.next=e),Ul=!0,_d||(_d=!0,yx())}function so(e,t){if(!Dd&&Ul){Dd=!0;do for(var i=!1,o=Bl;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var g=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-it(42|e)+1)-1,f&=u&~(g&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,tg(o,f))}else f=ut,f=qt(o,o===Bt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Kt(o,f)||(i=!0,tg(o,f));o=o.next}while(i);Dd=!1}}function mx(){Jy()}function Jy(){Ul=_d=!1;var e=0;Rr!==0&&Tx()&&(e=Rr);for(var t=C(),i=null,o=Bl;o!==null;){var u=o.next,f=Wy(o,t);f===0?(o.next=null,i===null?Bl=u:i.next=u,u===null&&(Ji=i)):(i=o,(e!==0||(f&3)!==0)&&(Ul=!0)),o=u}wn!==0&&wn!==5||so(e),Rr!==0&&(Rr=0)}function Wy(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var g=31-it(f),w=1<<g,T=u[g];T===-1?((w&i)===0||(w&o)!==0)&&(u[g]=R(w,t)):T<=t&&(e.expiredLanes|=w),f&=~w}if(t=Bt,i=ut,i=qt(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(jt===2||jt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ae(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Kt(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&Ae(o),st(i)){case 2:case 8:i=fe;break;case 32:i=we;break;case 268435456:i=$e;break;default:i=we}return o=eg.bind(null,e),i=ee(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&Ae(o),e.callbackPriority=2,e.callbackNode=null,2}function eg(e,t){if(wn!==0&&wn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ll()&&e.callbackNode!==i)return null;var o=ut;return o=qt(e,e===Bt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(zy(e,o,t),Wy(e,C()),e.callbackNode!=null&&e.callbackNode===i?eg.bind(null,e):null)}function tg(e,t){if(Ll())return null;zy(e,t,!0)}function yx(){Ox(function(){(xt&6)!==0?ee(oe,mx):Jy()})}function Md(){if(Rr===0){var e=Bi;e===0&&(e=ot,ot<<=1,(ot&261888)===0&&(ot=256)),Rr=e}return Rr}function ng(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fo(""+e)}function ag(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function gx(e,t,i,o,u){if(t==="submit"&&i&&i.stateNode===u){var f=ng((u[On]||null).action),g=o.submitter;g&&(t=(t=g[On]||null)?ng(t.formAction):g.getAttribute("formAction"),t!==null&&(f=t,g=null));var w=new Ko("action","action",null,o,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Rr!==0){var T=g?ag(u,g):new FormData(u);Wu(i,{pending:!0,data:T,method:u.method,action:f},null,T)}}else typeof f=="function"&&(w.preventDefault(),T=g?ag(u,g):new FormData(u),Wu(i,{pending:!0,data:T,method:u.method,action:f},f,T))},currentTarget:u}]})}}for(var Rd=0;Rd<yu.length;Rd++){var zd=yu[Rd],vx=zd.toLowerCase(),bx=zd[0].toUpperCase()+zd.slice(1);Ca(vx,"on"+bx)}Ca(Rp,"onAnimationEnd"),Ca(zp,"onAnimationIteration"),Ca(Lp,"onAnimationStart"),Ca("dblclick","onDoubleClick"),Ca("focusin","onFocus"),Ca("focusout","onBlur"),Ca(zS,"onTransitionRun"),Ca(LS,"onTransitionStart"),Ca(BS,"onTransitionCancel"),Ca(Bp,"onTransitionEnd"),Pe("onMouseEnter",["mouseout","mouseover"]),Pe("onMouseLeave",["mouseout","mouseover"]),Pe("onPointerEnter",["pointerout","pointerover"]),Pe("onPointerLeave",["pointerout","pointerover"]),ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oo));function rg(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var g=o.length-1;0<=g;g--){var w=o[g],T=w.instance,$=w.currentTarget;if(w=w.listener,T!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=$;try{f(u)}catch(W){Wo(W)}u.currentTarget=null,f=T}else for(g=0;g<o.length;g++){if(w=o[g],T=w.instance,$=w.currentTarget,w=w.listener,T!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=$;try{f(u)}catch(W){Wo(W)}u.currentTarget=null,f=T}}}}function ct(e,t){var i=t[Vo];i===void 0&&(i=t[Vo]=new Set);var o=e+"__bubble";i.has(o)||(ig(t,e,2,!1),i.add(o))}function Ld(e,t,i){var o=0;t&&(o|=4),ig(i,e,o,t)}var Il="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[Il]){e[Il]=!0,ye.forEach(function(i){i!=="selectionchange"&&(wx.has(i)||Ld(i,!1,e),Ld(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Il]||(t[Il]=!0,Ld("selectionchange",!1,t))}}function ig(e,t,i,o){switch(Rg(t)){case 2:var u=Zx;break;case 8:u=Xx;break;default:u=Jd}i=u.bind(null,t,i,e),u=void 0,!au||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function Ud(e,t,i,o,u){var f=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var w=o.stateNode.containerInfo;if(w===u)break;if(g===4)for(g=o.return;g!==null;){var T=g.tag;if((T===3||T===4)&&g.stateNode.containerInfo===u)return;g=g.return}for(;w!==null;){if(g=oa(w),g===null)return;if(T=g.tag,T===5||T===6||T===26||T===27){o=f=g;continue e}w=w.parentNode}}o=o.return}up(function(){var $=f,W=tu(i),ae=[];e:{var G=Up.get(e);if(G!==void 0){var X=Ko,_e=e;switch(e){case"keypress":if(Zo(i)===0)break e;case"keydown":case"keyup":X=hS;break;case"focusin":_e="focus",X=ou;break;case"focusout":_e="blur",X=ou;break;case"beforeblur":case"afterblur":X=ou;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=tS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=yS;break;case Rp:case zp:case Lp:X=rS;break;case Bp:X=vS;break;case"scroll":case"scrollend":X=Ww;break;case"wheel":X=wS;break;case"copy":case"cut":case"paste":X=sS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=mp;break;case"toggle":case"beforetoggle":X=xS}var qe=(t&4)!==0,Rt=!qe&&(e==="scroll"||e==="scrollend"),M=qe?G!==null?G+"Capture":null:G;qe=[];for(var A=$,I;A!==null;){var te=A;if(I=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||I===null||M===null||(te=js(A,M),te!=null&&qe.push(lo(A,te,I))),Rt)break;A=A.return}0<qe.length&&(G=new X(G,_e,null,i,W),ae.push({event:G,listeners:qe}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",G&&i!==eu&&(_e=i.relatedTarget||i.fromElement)&&(oa(_e)||_e[Pa]))break e;if((X||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,X?(_e=i.relatedTarget||i.toElement,X=$,_e=_e?oa(_e):null,_e!==null&&(Rt=c(_e),qe=_e.tag,_e!==Rt||qe!==5&&qe!==27&&qe!==6)&&(_e=null)):(X=null,_e=$),X!==_e)){if(qe=hp,te="onMouseLeave",M="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(qe=mp,te="onPointerLeave",M="onPointerEnter",A="pointer"),Rt=X==null?G:Za(X),I=_e==null?G:Za(_e),G=new qe(te,A+"leave",X,i,W),G.target=Rt,G.relatedTarget=I,te=null,oa(W)===$&&(qe=new qe(M,A+"enter",_e,i,W),qe.target=I,qe.relatedTarget=Rt,te=qe),Rt=te,X&&_e)t:{for(qe=Sx,M=X,A=_e,I=0,te=M;te;te=qe(te))I++;te=0;for(var Ie=A;Ie;Ie=qe(Ie))te++;for(;0<I-te;)M=qe(M),I--;for(;0<te-I;)A=qe(A),te--;for(;I--;){if(M===A||A!==null&&M===A.alternate){qe=M;break t}M=qe(M),A=qe(A)}qe=null}else qe=null;X!==null&&sg(ae,G,X,qe,!1),_e!==null&&Rt!==null&&sg(ae,Rt,_e,qe,!0)}}e:{if(G=$?Za($):window,X=G.nodeName&&G.nodeName.toLowerCase(),X==="select"||X==="input"&&G.type==="file")var wt=Ep;else if(Sp(G))if(kp)wt=DS;else{wt=AS;var De=jS}else X=G.nodeName,!X||X.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?$&&Wc($.elementType)&&(wt=Ep):wt=_S;if(wt&&(wt=wt(e,$))){xp(ae,wt,i,W);break e}De&&De(e,G,$),e==="focusout"&&$&&G.type==="number"&&$.memoizedProps.value!=null&&Jc(G,"number",G.value)}switch(De=$?Za($):window,e){case"focusin":(Sp(De)||De.contentEditable==="true")&&(ji=De,hu=$,Bs=null);break;case"focusout":Bs=hu=ji=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,Dp(ae,i,W);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":Dp(ae,i,W)}var tt;if(cu)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Oi?bp(e,i)&&(dt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(dt="onCompositionStart");dt&&(yp&&i.locale!=="ko"&&(Oi||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Oi&&(tt=dp()):(vr=W,ru="value"in vr?vr.value:vr.textContent,Oi=!0)),De=$l($,dt),0<De.length&&(dt=new pp(dt,e,null,i,W),ae.push({event:dt,listeners:De}),tt?dt.data=tt:(tt=wp(i),tt!==null&&(dt.data=tt)))),(tt=kS?CS(e,i):TS(e,i))&&(dt=$l($,"onBeforeInput"),0<dt.length&&(De=new pp("onBeforeInput","beforeinput",null,i,W),ae.push({event:De,listeners:dt}),De.data=tt)),gx(ae,e,$,i,W)}rg(ae,t)})}function lo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function $l(e,t){for(var i=t+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=js(e,i),u!=null&&o.unshift(lo(e,u,f)),u=js(e,t),u!=null&&o.push(lo(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Sx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sg(e,t,i,o,u){for(var f=t._reactName,g=[];i!==null&&i!==o;){var w=i,T=w.alternate,$=w.stateNode;if(w=w.tag,T!==null&&T===o)break;w!==5&&w!==26&&w!==27||$===null||(T=$,u?($=js(i,f),$!=null&&g.unshift(lo(i,$,T))):u||($=js(i,f),$!=null&&g.push(lo(i,$,T)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var xx=/\r\n?/g,Ex=/\u0000|\uFFFD/g;function og(e){return(typeof e=="string"?e:""+e).replace(xx,`
`).replace(Ex,"")}function lg(e,t){return t=og(t),og(e)===t}function Mt(e,t,i,o,u,f){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||Ci(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&Ci(e,""+o);break;case"className":_t(e,"class",o);break;case"tabIndex":_t(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":_t(e,i,o);break;case"style":lp(e,o,f);break;case"data":if(t!=="object"){_t(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Fo(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(t!=="input"&&Mt(e,t,"name",u.name,u,null),Mt(e,t,"formEncType",u.formEncType,u,null),Mt(e,t,"formMethod",u.formMethod,u,null),Mt(e,t,"formTarget",u.formTarget,u,null)):(Mt(e,t,"encType",u.encType,u,null),Mt(e,t,"method",u.method,u,null),Mt(e,t,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Fo(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=Ka);break;case"onScroll":o!=null&&ct("scroll",e);break;case"onScrollEnd":o!=null&&ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Fo(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":ct("beforetoggle",e),ct("toggle",e),bn(e,"popover",o);break;case"xlinkActuate":Yt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Yt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Yt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Yt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Yt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Yt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Yt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Yt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Yt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":bn(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Qw.get(i)||i,bn(e,i,o))}}function Id(e,t,i,o,u,f){switch(i){case"style":lp(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?Ci(e,o):(typeof o=="number"||typeof o=="bigint")&&Ci(e,""+o);break;case"onScroll":o!=null&&ct("scroll",e);break;case"onScrollEnd":o!=null&&ct("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ee.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),t=i.slice(2,u?i.length-7:void 0),f=e[On]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):bn(e,i,o)}}}function Dn(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",e),ct("load",e);var o=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var g=i[f];if(g!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Mt(e,t,f,g,i,null)}}u&&Mt(e,t,"srcSet",i.srcSet,i,null),o&&Mt(e,t,"src",i.src,i,null);return;case"input":ct("invalid",e);var w=f=g=u=null,T=null,$=null;for(o in i)if(i.hasOwnProperty(o)){var W=i[o];if(W!=null)switch(o){case"name":u=W;break;case"type":g=W;break;case"checked":T=W;break;case"defaultChecked":$=W;break;case"value":f=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,t));break;default:Mt(e,t,o,W,i,null)}}rp(e,f,w,T,$,g,u,!1);return;case"select":ct("invalid",e),o=g=f=null;for(u in i)if(i.hasOwnProperty(u)&&(w=i[u],w!=null))switch(u){case"value":f=w;break;case"defaultValue":g=w;break;case"multiple":o=w;default:Mt(e,t,u,w,i,null)}t=f,i=g,e.multiple=!!o,t!=null?ki(e,!!o,t,!1):i!=null&&ki(e,!!o,i,!0);return;case"textarea":ct("invalid",e),f=u=o=null;for(g in i)if(i.hasOwnProperty(g)&&(w=i[g],w!=null))switch(g){case"value":o=w;break;case"defaultValue":u=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Mt(e,t,g,w,i,null)}sp(e,o,u,f);return;case"option":for(T in i)if(i.hasOwnProperty(T)&&(o=i[T],o!=null))switch(T){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Mt(e,t,T,o,i,null)}return;case"dialog":ct("beforetoggle",e),ct("toggle",e),ct("cancel",e),ct("close",e);break;case"iframe":case"object":ct("load",e);break;case"video":case"audio":for(o=0;o<oo.length;o++)ct(oo[o],e);break;case"image":ct("error",e),ct("load",e);break;case"details":ct("toggle",e);break;case"embed":case"source":case"link":ct("error",e),ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in i)if(i.hasOwnProperty($)&&(o=i[$],o!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Mt(e,t,$,o,i,null)}return;default:if(Wc(t)){for(W in i)i.hasOwnProperty(W)&&(o=i[W],o!==void 0&&Id(e,t,W,o,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(o=i[w],o!=null&&Mt(e,t,w,o,i,null))}function kx(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,g=null,w=null,T=null,$=null,W=null;for(X in i){var ae=i[X];if(i.hasOwnProperty(X)&&ae!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":T=ae;default:o.hasOwnProperty(X)||Mt(e,t,X,null,o,ae)}}for(var G in o){var X=o[G];if(ae=i[G],o.hasOwnProperty(G)&&(X!=null||ae!=null))switch(G){case"type":f=X;break;case"name":u=X;break;case"checked":$=X;break;case"defaultChecked":W=X;break;case"value":g=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,t));break;default:X!==ae&&Mt(e,t,G,X,o,ae)}}Qc(e,g,w,T,$,W,f,u);return;case"select":X=g=w=G=null;for(f in i)if(T=i[f],i.hasOwnProperty(f)&&T!=null)switch(f){case"value":break;case"multiple":X=T;default:o.hasOwnProperty(f)||Mt(e,t,f,null,o,T)}for(u in o)if(f=o[u],T=i[u],o.hasOwnProperty(u)&&(f!=null||T!=null))switch(u){case"value":G=f;break;case"defaultValue":w=f;break;case"multiple":g=f;default:f!==T&&Mt(e,t,u,f,o,T)}t=w,i=g,o=X,G!=null?ki(e,!!i,G,!1):!!o!=!!i&&(t!=null?ki(e,!!i,t,!0):ki(e,!!i,i?[]:"",!1));return;case"textarea":X=G=null;for(w in i)if(u=i[w],i.hasOwnProperty(w)&&u!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Mt(e,t,w,null,o,u)}for(g in o)if(u=o[g],f=i[g],o.hasOwnProperty(g)&&(u!=null||f!=null))switch(g){case"value":G=u;break;case"defaultValue":X=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Mt(e,t,g,u,o,f)}ip(e,G,X);return;case"option":for(var _e in i)if(G=i[_e],i.hasOwnProperty(_e)&&G!=null&&!o.hasOwnProperty(_e))switch(_e){case"selected":e.selected=!1;break;default:Mt(e,t,_e,null,o,G)}for(T in o)if(G=o[T],X=i[T],o.hasOwnProperty(T)&&G!==X&&(G!=null||X!=null))switch(T){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Mt(e,t,T,G,o,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in i)G=i[qe],i.hasOwnProperty(qe)&&G!=null&&!o.hasOwnProperty(qe)&&Mt(e,t,qe,null,o,G);for($ in o)if(G=o[$],X=i[$],o.hasOwnProperty($)&&G!==X&&(G!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,t));break;default:Mt(e,t,$,G,o,X)}return;default:if(Wc(t)){for(var Rt in i)G=i[Rt],i.hasOwnProperty(Rt)&&G!==void 0&&!o.hasOwnProperty(Rt)&&Id(e,t,Rt,void 0,o,G);for(W in o)G=o[W],X=i[W],!o.hasOwnProperty(W)||G===X||G===void 0&&X===void 0||Id(e,t,W,G,o,X);return}}for(var M in i)G=i[M],i.hasOwnProperty(M)&&G!=null&&!o.hasOwnProperty(M)&&Mt(e,t,M,null,o,G);for(ae in o)G=o[ae],X=i[ae],!o.hasOwnProperty(ae)||G===X||G==null&&X==null||Mt(e,t,ae,G,o,X)}function cg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],f=u.transferSize,g=u.initiatorType,w=u.duration;if(f&&w&&cg(g)){for(g=0,w=u.responseEnd,o+=1;o<i.length;o++){var T=i[o],$=T.startTime;if($>w)break;var W=T.transferSize,ae=T.initiatorType;W&&cg(ae)&&(T=T.responseEnd,g+=W*(T<w?1:(w-$)/(T-$)))}if(--o,t+=8*(f+g)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $d=null,Hd=null;function Hl(e){return e.nodeType===9?e:e.ownerDocument}function ug(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qd=null;function Tx(){var e=window.event;return e&&e.type==="popstate"?e===qd?!1:(qd=e,!0):(qd=null,!1)}var fg=typeof setTimeout=="function"?setTimeout:void 0,Nx=typeof clearTimeout=="function"?clearTimeout:void 0,hg=typeof Promise=="function"?Promise:void 0,Ox=typeof queueMicrotask=="function"?queueMicrotask:typeof hg<"u"?function(e){return hg.resolve(null).then(e).catch(jx)}:fg;function jx(e){setTimeout(function(){throw e})}function zr(e){return e==="head"}function pg(e,t){var i=t,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),ns(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")co(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,co(i);for(var f=i.firstChild;f;){var g=f.nextSibling,w=f.nodeName;f[Ea]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=g}}else i==="body"&&co(e.ownerDocument.body);i=u}while(i);ns(t)}function mg(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Gd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Gd(i),ka(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Ax(e,t,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ea])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ma(e.nextSibling),e===null)break}return null}function _x(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ma(e.nextSibling),e===null))return null;return e}function yg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ma(e.nextSibling),e===null))return null;return e}function Yd(e){return e.data==="$?"||e.data==="$~"}function Fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Dx(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ma(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Pd=null;function gg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return ma(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function vg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function bg(e,t,i){switch(t=Hl(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function co(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ka(e)}var ya=new Map,wg=new Set;function Vl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fr=V.d;V.d={f:Mx,r:Rx,D:zx,C:Lx,L:Bx,m:Ux,X:$x,S:Ix,M:Hx};function Mx(){var e=fr.f(),t=Ml();return e||t}function Rx(e){var t=gr(e);t!==null&&t.tag===5&&t.type==="form"?Bm(t):fr.r(e)}var Wi=typeof document>"u"?null:document;function Sg(e,t,i){var o=Wi;if(o&&typeof t=="string"&&t){var u=la(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),wg.has(u)||(wg.add(u),e={rel:e,crossOrigin:i,href:t},o.querySelector(u)===null&&(t=o.createElement("link"),Dn(t,"link",e),ne(t),o.head.appendChild(t)))}}function zx(e){fr.D(e),Sg("dns-prefetch",e,null)}function Lx(e,t){fr.C(e,t),Sg("preconnect",e,t)}function Bx(e,t,i){fr.L(e,t,i);var o=Wi;if(o&&e&&t){var u='link[rel="preload"][as="'+la(t)+'"]';t==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+la(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+la(i.imageSizes)+'"]')):u+='[href="'+la(e)+'"]';var f=u;switch(t){case"style":f=es(e);break;case"script":f=ts(e)}ya.has(f)||(e=b({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),ya.set(f,e),o.querySelector(u)!==null||t==="style"&&o.querySelector(uo(f))||t==="script"&&o.querySelector(fo(f))||(t=o.createElement("link"),Dn(t,"link",e),ne(t),o.head.appendChild(t)))}}function Ux(e,t){fr.m(e,t);var i=Wi;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+la(o)+'"][href="'+la(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ts(e)}if(!ya.has(f)&&(e=b({rel:"modulepreload",href:e},t),ya.set(f,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(fo(f)))return}o=i.createElement("link"),Dn(o,"link",e),ne(o),i.head.appendChild(o)}}}function Ix(e,t,i){fr.S(e,t,i);var o=Wi;if(o&&e){var u=P(o).hoistableStyles,f=es(e);t=t||"default";var g=u.get(f);if(!g){var w={loading:0,preload:null};if(g=o.querySelector(uo(f)))w.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},i),(i=ya.get(f))&&Zd(e,i);var T=g=o.createElement("link");ne(T),Dn(T,"link",e),T._p=new Promise(function($,W){T.onload=$,T.onerror=W}),T.addEventListener("load",function(){w.loading|=1}),T.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ql(g,t,o)}g={type:"stylesheet",instance:g,count:1,state:w},u.set(f,g)}}}function $x(e,t){fr.X(e,t);var i=Wi;if(i&&e){var o=P(i).hoistableScripts,u=ts(e),f=o.get(u);f||(f=i.querySelector(fo(u)),f||(e=b({src:e,async:!0},t),(t=ya.get(u))&&Xd(e,t),f=i.createElement("script"),ne(f),Dn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Hx(e,t){fr.M(e,t);var i=Wi;if(i&&e){var o=P(i).hoistableScripts,u=ts(e),f=o.get(u);f||(f=i.querySelector(fo(u)),f||(e=b({src:e,async:!0,type:"module"},t),(t=ya.get(u))&&Xd(e,t),f=i.createElement("script"),ne(f),Dn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function xg(e,t,i,o){var u=(u=me.current)?Vl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=es(i.href),i=P(u).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=es(i.href);var f=P(u).hoistableStyles,g=f.get(e);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,g),(f=u.querySelector(uo(e)))&&!f._p&&(g.instance=f,g.state.loading=5),ya.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ya.set(e,i),f||Vx(u,e,i,g.state))),t&&o===null)throw Error(s(528,""));return g}if(t&&o!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ts(i),i=P(u).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function es(e){return'href="'+la(e)+'"'}function uo(e){return'link[rel="stylesheet"]['+e+"]"}function Eg(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Vx(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Dn(t,"link",i),ne(t),e.head.appendChild(t))}function ts(e){return'[src="'+la(e)+'"]'}function fo(e){return"script[async]"+e}function kg(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+la(i.href)+'"]');if(o)return t.instance=o,ne(o),o;var u=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ne(o),Dn(o,"style",u),ql(o,i.precedence,e),t.instance=o;case"stylesheet":u=es(i.href);var f=e.querySelector(uo(u));if(f)return t.state.loading|=4,t.instance=f,ne(f),f;o=Eg(i),(u=ya.get(u))&&Zd(o,u),f=(e.ownerDocument||e).createElement("link"),ne(f);var g=f;return g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),Dn(f,"link",o),t.state.loading|=4,ql(f,i.precedence,e),t.instance=f;case"script":return f=ts(i.src),(u=e.querySelector(fo(f)))?(t.instance=u,ne(u),u):(o=i,(u=ya.get(f))&&(o=b({},i),Xd(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),ne(u),Dn(u,"link",o),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,ql(o,i.precedence,e));return t.instance}function ql(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,g=0;g<o.length;g++){var w=o[g];if(w.dataset.precedence===t)f=w;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Zd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Xd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Gl=null;function Cg(e,t,i){if(Gl===null){var o=new Map,u=Gl=new Map;u.set(i,o)}else u=Gl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[Ea]||f[un]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(t)||"";g=e+g;var w=o.get(g);w?w.push(f):o.set(g,[f])}}return o}function Tg(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function qx(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ng(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Gx(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=es(o.href),f=t.querySelector(uo(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Yl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=f,ne(f);return}f=t.ownerDocument||t,o=Eg(o),(u=ya.get(u))&&Zd(o,u),f=f.createElement("link"),ne(f);var g=f;g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),Dn(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Yl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Kd=0;function Yx(e,t){return e.stylesheets&&e.count===0&&Pl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Pl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Kd===0&&(Kd=62500*Cx());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Pl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Kd?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Yl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fl=null;function Pl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fl=new Map,t.forEach(Fx,e),Fl=null,Yl.call(e))}function Fx(e,t){if(!(t.state.loading&4)){var i=Fl.get(e);if(i)var o=i.get(null);else{i=new Map,Fl.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var g=u[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),o=g)}o&&i.set(null,o)}u=t.instance,g=u.getAttribute("data-precedence"),f=i.get(g)||o,f===o&&i.set(null,u),i.set(g,u),this.count++,o=Yl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var ho={$$typeof:L,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Px(e,t,i,o,u,f,g,w,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ce(0),this.hiddenUpdates=ce(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Og(e,t,i,o,u,f,g,w,T,$,W,ae){return e=new Px(e,t,i,g,T,$,W,ae,w),t=1,f===!0&&(t|=24),f=Wn(3,null,null,t),e.current=f,f.stateNode=e,t=ju(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:t},Mu(f),e}function jg(e){return e?(e=Di,e):Di}function Ag(e,t,i,o,u,f){u=jg(u),o.context===null?o.context=u:o.pendingContext=u,o=kr(t),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Cr(e,o,t),i!==null&&(Xn(i,e,t),Gs(i,e,t))}function _g(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Qd(e,t){_g(e,t),(e=e.alternate)&&_g(e,t)}function Dg(e){if(e.tag===13||e.tag===31){var t=ni(e,67108864);t!==null&&Xn(t,e,67108864),Qd(e,67108864)}}function Mg(e){if(e.tag===13||e.tag===31){var t=ra();t=Lt(t);var i=ni(e,t);i!==null&&Xn(i,e,t),Qd(e,t)}}var Zl=!0;function Zx(e,t,i,o){var u=N.T;N.T=null;var f=V.p;try{V.p=2,Jd(e,t,i,o)}finally{V.p=f,N.T=u}}function Xx(e,t,i,o){var u=N.T;N.T=null;var f=V.p;try{V.p=8,Jd(e,t,i,o)}finally{V.p=f,N.T=u}}function Jd(e,t,i,o){if(Zl){var u=Wd(o);if(u===null)Ud(e,t,o,Xl,i),zg(e,o);else if(Qx(u,e,t,i,o))o.stopPropagation();else if(zg(e,o),t&4&&-1<Kx.indexOf(e)){for(;u!==null;){var f=gr(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=an(f.pendingLanes);if(g!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;g;){var T=1<<31-it(g);w.entanglements[1]|=T,g&=~T}Ia(f),(xt&6)===0&&(_l=C()+500,so(0))}}break;case 31:case 13:w=ni(f,2),w!==null&&Xn(w,f,2),Ml(),Qd(f,2)}if(f=Wd(o),f===null&&Ud(e,t,o,Xl,i),f===u)break;u=f}u!==null&&o.stopPropagation()}else Ud(e,t,o,null,i)}}function Wd(e){return e=tu(e),ef(e)}var Xl=null;function ef(e){if(Xl=null,e=oa(e),e!==null){var t=c(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xl=e,null}function Rg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(D()){case oe:return 2;case fe:return 8;case we:case Ce:return 32;case $e:return 268435456;default:return 32}default:return 32}}var tf=!1,Lr=null,Br=null,Ur=null,po=new Map,mo=new Map,Ir=[],Kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zg(e,t){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(t.pointerId)}}function yo(e,t,i,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},t!==null&&(t=gr(t),t!==null&&Dg(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Qx(e,t,i,o,u){switch(t){case"focusin":return Lr=yo(Lr,e,t,i,o,u),!0;case"dragenter":return Br=yo(Br,e,t,i,o,u),!0;case"mouseover":return Ur=yo(Ur,e,t,i,o,u),!0;case"pointerover":var f=u.pointerId;return po.set(f,yo(po.get(f)||null,e,t,i,o,u)),!0;case"gotpointercapture":return f=u.pointerId,mo.set(f,yo(mo.get(f)||null,e,t,i,o,u)),!0}return!1}function Lg(e){var t=oa(e.target);if(t!==null){var i=c(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Wd(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);eu=o,i.target.dispatchEvent(o),eu=null}else return t=gr(i),t!==null&&Dg(t),e.blockedOn=i,!1;t.shift()}return!0}function Bg(e,t,i){Kl(e)&&i.delete(t)}function Jx(){tf=!1,Lr!==null&&Kl(Lr)&&(Lr=null),Br!==null&&Kl(Br)&&(Br=null),Ur!==null&&Kl(Ur)&&(Ur=null),po.forEach(Bg),mo.forEach(Bg)}function Ql(e,t){e.blockedOn===t&&(e.blockedOn=null,tf||(tf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Jx)))}var Jl=null;function Ug(e){Jl!==e&&(Jl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jl===e&&(Jl=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],u=e[t+2];if(typeof o!="function"){if(ef(o||i)===null)continue;break}var f=gr(i);f!==null&&(e.splice(t,3),t-=3,Wu(f,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function ns(e){function t(T){return Ql(T,e)}Lr!==null&&Ql(Lr,e),Br!==null&&Ql(Br,e),Ur!==null&&Ql(Ur,e),po.forEach(t),mo.forEach(t);for(var i=0;i<Ir.length;i++){var o=Ir[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ir.length&&(i=Ir[0],i.blockedOn===null);)Lg(i),i.blockedOn===null&&Ir.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],g=u[On]||null;if(typeof f=="function")g||Ug(i);else if(g){var w=null;if(f&&f.hasAttribute("formAction")){if(u=f,g=f[On]||null)w=g.formAction;else if(ef(u)!==null)continue}else w=g.action;typeof w=="function"?i[o+1]=w:(i.splice(o,3),o-=3),Ug(i)}}}function Ig(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(g){return u=g})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function nf(e){this._internalRoot=e}Wl.prototype.render=nf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,o=ra();Ag(i,o,e,t,null,null)},Wl.prototype.unmount=nf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ag(e.current,2,null,e,null,null),Ml(),t[Pa]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ir.length&&t!==0&&t<Ir[i].priority;i++);Ir.splice(i,0,e),i===0&&Lg(e)}};var $g=n.version;if($g!=="19.2.0")throw Error(s(527,$g,"19.2.0"));V.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Wx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{Le=ec.inject(Wx),He=ec}catch{}}return vo.createRoot=function(e,t){if(!l(e))throw Error(s(299));var i=!1,o="",u=Pm,f=Zm,g=Xm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Og(e,1,!1,null,null,i,o,null,u,f,g,Ig),e[Pa]=t.current,Bd(e),new nf(t)},vo.hydrateRoot=function(e,t,i){if(!l(e))throw Error(s(299));var o=!1,u="",f=Pm,g=Zm,w=Xm,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(T=i.formState)),t=Og(e,1,!0,t,i??null,o,u,T,f,g,w,Ig),t.context=jg(null),i=t.current,o=ra(),o=Lt(o),u=kr(o),u.callback=null,Cr(i,u,o),i=o,t.current.lanes=i,he(t,i),Ia(t),e[Pa]=t.current,Bd(e),new Wl(t)},vo.version="19.2.0",vo}var Kg;function cE(){if(Kg)return sf.exports;Kg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),sf.exports=lE(),sf.exports}var cb=cE();const uE="modulepreload",dE=function(a,n){return new URL(a,n).href},Qg={},Jg=function(n,r,s){let l=Promise.resolve();if(r&&r.length>0){let y=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const d=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),m=h?.nonce||h?.getAttribute("nonce");l=y(r.map(v=>{if(v=dE(v,s),v in Qg)return;Qg[v]=!0;const b=v.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(s)for(let j=d.length-1;j>=0;j--){const Z=d[j];if(Z.href===v&&(!b||Z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${x}`))return;const k=document.createElement("link");if(k.rel=b?"stylesheet":uE,b||(k.as="script"),k.crossOrigin="",k.href=v,m&&k.setAttribute("nonce",m),document.head.appendChild(k),b)return new Promise((j,Z)=>{k.addEventListener("load",j),k.addEventListener("error",()=>Z(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return l.then(d=>{for(const h of d||[])h.status==="rejected"&&c(h.reason);return n().catch(c)})};var Pr=lb();const Th=kh(Pr),Wg=ob({__proto__:null,default:Th},[Pr]);function ev(a,n,r,s,l,c,d){try{var h=a[c](d),m=h.value}catch(y){return void r(y)}h.done?n(m):Promise.resolve(m).then(s,l)}function at(a){return function(){var n=this,r=arguments;return new Promise(function(s,l){var c=a.apply(n,r);function d(m){ev(c,s,l,d,h,"next",m)}function h(m){ev(c,s,l,d,h,"throw",m)}d(void 0)})}}function ft(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function Mn(a){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mn(a)}function fE(a,n){if(Mn(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,n);if(Mn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function ub(a){var n=fE(a,"string");return Mn(n)=="symbol"?n:n+""}function hE(a,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,ub(s.key),s)}}function ht(a,n,r){return n&&hE(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function pE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Fa(a,n){if(n&&(Mn(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pE(a)}function Ut(a){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ut(a)}function Do(a,n){return Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Do(a,n)}function Qn(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&Do(a,n)}function Me(a,n,r){return(n=ub(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}var uf={exports:{}},df={exports:{}},tv;function db(){return tv||(tv=1,(function(a){function n(r,s){this.v=r,this.k=s}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(df)),df.exports}var ff={exports:{}},hf={exports:{}},nv;function fb(){return nv||(nv=1,(function(a){function n(r,s,l,c){var d=Object.defineProperty;try{d({},"",{})}catch{d=0}a.exports=n=function(m,y,v,b){function x(k,j){n(m,k,function(Z){return this._invoke(k,j,Z)})}y?d?d(m,y,{value:v,enumerable:!b,configurable:!b,writable:!b}):m[y]=v:(x("next",0),x("throw",1),x("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,n(r,s,l,c)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(hf)),hf.exports}var av;function hb(){return av||(av=1,(function(a){var n=fb();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",h=c.toStringTag||"@@toStringTag";function m(q,Q,K,L){var Y=Q&&Q.prototype instanceof v?Q:v,de=Object.create(Y.prototype);return n(de,"_invoke",(function(be,H,ue){var re,pe,Re,je=0,Je=ue||[],rt=!1,Ke={p:0,n:0,v:s,a:N,f:N.bind(s,4),d:function(J,ve){return re=J,pe=0,Re=s,Ke.n=ve,y}};function N(V,J){for(pe=V,Re=J,l=0;!rt&&je&&!ve&&l<Je.length;l++){var ve,B=Je[l],S=Ke.p,_=B[2];V>3?(ve=_===J)&&(Re=B[(pe=B[4])?5:(pe=3,3)],B[4]=B[5]=s):B[0]<=S&&((ve=V<2&&S<B[1])?(pe=0,Ke.v=J,Ke.n=B[1]):S<_&&(ve=V<3||B[0]>J||J>_)&&(B[4]=V,B[5]=J,Ke.n=_,pe=0))}if(ve||V>1)return y;throw rt=!0,J}return function(V,J,ve){if(je>1)throw TypeError("Generator is already running");for(rt&&J===1&&N(J,ve),pe=J,Re=ve;(l=pe<2?s:Re)||!rt;){re||(pe?pe<3?(pe>1&&(Ke.n=-1),N(pe,Re)):Ke.n=Re:Ke.v=Re);try{if(je=2,re){if(pe||(V="next"),l=re[V]){if(!(l=l.call(re,Re)))throw TypeError("iterator result is not an object");if(!l.done)return l;Re=l.value,pe<2&&(pe=0)}else pe===1&&(l=re.return)&&l.call(re),pe<2&&(Re=TypeError("The iterator does not provide a '"+V+"' method"),pe=1);re=s}else if((l=(rt=Ke.n<0)?Re:be.call(H,Ke))!==y)break}catch(B){re=s,pe=1,Re=B}finally{je=1}}return{value:l,done:rt}}})(q,K,L),!0),de}var y={};function v(){}function b(){}function x(){}l=Object.getPrototypeOf;var k=[][d]?l(l([][d]())):(n(l={},d,function(){return this}),l),j=x.prototype=v.prototype=Object.create(k);function Z(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,x):(q.__proto__=x,n(q,h,"GeneratorFunction")),q.prototype=Object.create(j),q}return b.prototype=x,n(j,"constructor",x),n(x,"constructor",b),b.displayName="GeneratorFunction",n(x,h,"GeneratorFunction"),n(j),n(j,h,"Generator"),n(j,d,function(){return this}),n(j,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:m,m:Z}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(ff)),ff.exports}var pf={exports:{}},mf={exports:{}},yf={exports:{}},rv;function pb(){return rv||(rv=1,(function(a){var n=db(),r=fb();function s(l,c){function d(m,y,v,b){try{var x=l[m](y),k=x.value;return k instanceof n?c.resolve(k.v).then(function(j){d("next",j,v,b)},function(j){d("throw",j,v,b)}):c.resolve(k).then(function(j){x.value=j,v(x)},function(j){return d("throw",j,v,b)})}catch(j){b(j)}}var h;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(m,y,v){function b(){return new c(function(x,k){d(m,v,x,k)})}return h=h?h.then(b,b):b()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(yf)),yf.exports}var iv;function mb(){return iv||(iv=1,(function(a){var n=hb(),r=pb();function s(l,c,d,h,m){return new r(n().w(l,c,d,h),m||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(mf)),mf.exports}var sv;function mE(){return sv||(sv=1,(function(a){var n=mb();function r(s,l,c,d,h){var m=n(s,l,c,d,h);return m.next().then(function(y){return y.done?y.value:m.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(pf)),pf.exports}var gf={exports:{}},ov;function yE(){return ov||(ov=1,(function(a){function n(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function d(){for(;l.length;)if((c=l.pop())in s)return d.value=c,d.done=!1,d;return d.done=!0,d}}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(gf)),gf.exports}var vf={exports:{}},bf={exports:{}},lv;function gE(){return lv||(lv=1,(function(a){function n(r){"@babel/helpers - typeof";return a.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,n(r)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(bf)),bf.exports}var cv;function vE(){return cv||(cv=1,(function(a){var n=gE().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(n(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(vf)),vf.exports}var uv;function bE(){return uv||(uv=1,(function(a){var n=db(),r=hb(),s=mE(),l=mb(),c=pb(),d=yE(),h=vE();function m(){var y=r(),v=y.m(m),b=(Object.getPrototypeOf?Object.getPrototypeOf(v):v.__proto__).constructor;function x(Z){var q=typeof Z=="function"&&Z.constructor;return!!q&&(q===b||(q.displayName||q.name)==="GeneratorFunction")}var k={throw:1,return:2,break:3,continue:3};function j(Z){var q,Q;return function(K){q||(q={stop:function(){return Q(K.a,2)},catch:function(){return K.v},abrupt:function(Y,de){return Q(K.a,k[Y],de)},delegateYield:function(Y,de,be){return q.resultName=de,Q(K.d,h(Y),be)},finish:function(Y){return Q(K.f,Y)}},Q=function(Y,de,be){K.p=q.prev,K.n=q.next;try{return Y(de,be)}finally{q.next=K.n}}),q.resultName&&(q[q.resultName]=K.v,q.resultName=void 0),q.sent=K.v,q.next=K.n;try{return Z.call(this,q)}finally{K.p=q.prev,K.n=q.next}}}return(a.exports=m=function(){return{wrap:function(Q,K,L,Y){return y.w(j(Q),K,L,Y&&Y.reverse())},isGeneratorFunction:x,mark:y.m,awrap:function(Q,K){return new n(Q,K)},AsyncIterator:c,async:function(Q,K,L,Y,de){return(x(K)?l:s)(j(Q),K,L,Y,de)},keys:d,values:h}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=m,a.exports.__esModule=!0,a.exports.default=a.exports})(uf)),uf.exports}var wf,dv;function wE(){if(dv)return wf;dv=1;var a=bE()();wf=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return wf}var SE=wE();const xe=kh(SE);function xE(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=EE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function EE(a,n){if(a){if(typeof a=="string")return fv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fv(a,n):void 0}}function fv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function kE(){return{debug:function(n){}}}var yb=(function(){function a(){ft(this,a),Me(this,"pipes",[])}return ht(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var n=at(xe.mark(function s(l){var c,d,h,m;return xe.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:c=l,d=xE(this.pipes),v.prev=2,d.s();case 4:if((h=d.n()).done){v.next=13;break}return m=h.value,v.next=8,m(c);case 8:if(c=v.sent,!(typeof c>"u")){v.next=11;break}return v.abrupt("return");case 11:v.next=4;break;case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(2),d.e(v.t0);case 18:return v.prev=18,d.f(),v.finish(18);case 21:return v.abrupt("return",c);case 22:case"end":return v.stop()}},s,this,[[2,15,18,21]])}));function r(s){return n.apply(this,arguments)}return r})()}])})(),bs=(function(){function a(n){ft(this,a),Me(this,"signal",new yb),this.name=n}return ht(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),kE()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function hv(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=CE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function CE(a,n){if(a){if(typeof a=="string")return pv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pv(a,n):void 0}}function pv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function TE(a,n,r){return n=Ut(n),Fa(a,gb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function gb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gb=function(){return!!a})()}var Qr=(function(a){function n(){var r;return ft(this,n),r=TE(this,n,["NodeEditor"]),Me(r,"nodes",[]),Me(r,"connections",[]),r}return Qn(n,a),ht(n,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=at(xe.mark(function l(c){return xe.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getNode(c.id)){h.next=2;break}throw new Error("node has already been added");case 2:return h.next=4,this.emit({type:"nodecreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.nodes.push(c),h.next=9,this.emit({type:"nodecreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=at(xe.mark(function l(c){return xe.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getConnection(c.id)){h.next=2;break}throw new Error("connection has already been added");case 2:return h.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.connections.push(c),h.next=9,this.emit({type:"connectioncreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=at(xe.mark(function l(c){var d,h;return xe.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=this.nodes.find(function(v){return v.id===c}),d){y.next=3;break}throw new Error("cannot find node");case 3:return y.next=5,this.emit({type:"noderemove",data:d});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.nodes.indexOf(d),this.nodes.splice(h,1),y.next=11,this.emit({type:"noderemoved",data:d});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=at(xe.mark(function l(c){var d,h;return xe.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=this.connections.find(function(v){return v.id===c}),d){y.next=3;break}throw new Error("cannot find connection");case 3:return y.next=5,this.emit({type:"connectionremove",data:d});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.connections.indexOf(d),this.connections.splice(h,1),y.next=11,this.emit({type:"connectionremoved",data:d});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=at(xe.mark(function l(){var c,d,h,m,y,v;return xe.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.emit({type:"clear"});case 2:if(x.sent){x.next=6;break}return x.next=5,this.emit({type:"clearcancelled"});case 5:return x.abrupt("return",!1);case 6:c=hv(this.connections.slice()),x.prev=7,c.s();case 9:if((d=c.n()).done){x.next=15;break}return h=d.value,x.next=13,this.removeConnection(h.id);case 13:x.next=9;break;case 15:x.next=20;break;case 17:x.prev=17,x.t0=x.catch(7),c.e(x.t0);case 20:return x.prev=20,c.f(),x.finish(20);case 23:m=hv(this.nodes.slice()),x.prev=24,m.s();case 26:if((y=m.n()).done){x.next=32;break}return v=y.value,x.next=30,this.removeNode(v.id);case 30:x.next=26;break;case 32:x.next=37;break;case 34:x.prev=34,x.t1=x.catch(24),m.e(x.t1);case 37:return x.prev=37,m.f(),x.finish(37);case 40:return x.next=42,this.emit({type:"cleared"});case 42:return x.abrupt("return",!0);case 43:case"end":return x.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(bs),Sf=globalThis.crypto;function Jr(){if("randomBytes"in Sf)return Sf.randomBytes(8).toString("hex");var a=Sf.getRandomValues(new Uint8Array(8)),n=Array.from(a),r=n.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Nh(a,n,r){return n=Ut(n),Fa(a,vb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function vb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vb=function(){return!!a})()}var NE=ht(function a(n){ft(this,a),this.name=n}),Oh=ht(function a(n,r,s){ft(this,a),this.socket=n,this.label=r,this.multipleConnections=s,this.id=Jr()}),OE=(function(a){function n(r,s,l){var c;return ft(this,n),c=Nh(this,n,[r,s,l]),Me(c,"control",null),Me(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return Qn(n,a),ht(n,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(Oh),jE=(function(a){function n(r,s,l){return ft(this,n),Nh(this,n,[r,s,l!==!1])}return Qn(n,a),ht(n)})(Oh),bb=ht(function a(){ft(this,a),this.id=Jr()}),AE=(function(a){function n(r,s){var l,c;return ft(this,n),c=Nh(this,n),c.type=r,c.options=s,c.id=Jr(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return Qn(n,a),ht(n,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(bb),_E=(function(){function a(n){ft(this,a),Me(this,"inputs",{}),Me(this,"outputs",{}),Me(this,"controls",{}),this.label=n,this.id=Jr()}return ht(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),DE=ht(function a(n,r,s,l){if(ft(this,a),this.sourceOutput=r,this.targetInput=l,!n.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=Jr(),this.source=n.id,this.target=s.id}),Xt=Object.freeze({__proto__:null,Socket:NE,Port:Oh,Input:OE,Output:jE,Control:bb,InputControl:AE,Node:_E,Connection:DE});const ME=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Xt,NodeEditor:Qr,Scope:bs,Signal:yb,getUID:Jr},Symbol.toStringTag,{value:"Module"}));function qf(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function RE(a){if(Array.isArray(a))return qf(a)}function zE(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function wb(a,n){if(a){if(typeof a=="string")return qf(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qf(a,n):void 0}}function LE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(a){return RE(a)||zE(a)||wb(a)||LE()}var BE=(function(){function a(n){ft(this,a),this.reordered=n,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ht(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,d=r.clientX-l,h=r.clientY-c;return{x:d,y:h}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var n=at(xe.mark(function s(l,c){return xe.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.holder.contains(l)){h.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){h.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),h.next=7,this.reordered(l);case 7:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function Sb(a,n){var r=function(d){n.move(d)},s=function(d){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),n.up(d)},l=function(d){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),n.down(d)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var mv=function(n){return n.length===0?0:Math.min.apply(Math,ws(n))},yv=function(n){return n.length===0?0:Math.max.apply(Math,ws(n))};function xb(a){var n=mv(a.map(function(c){return c.position.x})),r=mv(a.map(function(c){return c.position.y})),s=yv(a.map(function(c){return c.position.x+c.width})),l=yv(a.map(function(c){return c.position.y+c.height}));return{left:n,right:s,top:r,bottom:l,width:Math.abs(n-s),height:Math.abs(r-l),center:{x:(n+s)/2,y:(r+l)/2}}}function gv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function UE(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?gv(Object(r),!0).forEach(function(s){Me(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):gv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var jh=(function(){function a(n){var r=this;ft(this,a),Me(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=UE({},r.config.getCurrentPosition()),r.events.start(s))}),Me(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),d=r.startPosition.x+l.x/c,h=r.startPosition.y+l.y/c;r.events.translate(d,h,s)}}),Me(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=n||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return ht(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=Sb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),Eb=(function(){function a(n){var r=this;ft(this,a),Me(this,"previous",null),Me(this,"pointers",[]),Me(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=s.deltaY<0,m=h?r.intensity:-r.intensity,y=(c-s.clientX)*m,v=(d-s.clientY)*m;r.onzoom(m,y,v,"wheel")}),Me(this,"down",function(s){r.pointers.push(s)}),Me(this,"move",function(s){if(r.pointers=r.pointers.map(function(j){return j.pointerId===s.pointerId?s:j}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=r.getTouches(),m=h.cx,y=h.cy,v=h.distance;if(r.previous!==null&&r.previous.distance>0){var b=v/r.previous.distance-1,x=(c-m)*b,k=(d-y)*b;r.onzoom(b,x-(r.previous.cx-m),k-(r.previous.cy-y),"touch")}r.previous={cx:m,cy:y,distance:v}}}),Me(this,"contextmenu",function(){r.pointers=[]}),Me(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),Me(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=4*r.intensity,m=(c-s.clientX)*h,y=(d-s.clientY)*h;r.onzoom(h,m,y,"dblclick")}),this.intensity=n}return ht(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],d=[r.touches[1].clientX,r.touches[1].clientY],h=d[0],m=d[1],y=Math.sqrt(Math.pow(l-h,2)+Math.pow(c-m,2));return{cx:(l+h)/2,cy:(c+m)/2,distance:y}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),kb=(function(){function a(n,r,s){var l=this;ft(this,a),Me(this,"transform",{k:1,x:0,y:0}),Me(this,"pointer",{x:0,y:0}),Me(this,"zoomHandler",null),Me(this,"dragHandler",null),Me(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),Me(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),Me(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),Me(this,"resize",function(c){l.events.resize(c)}),Me(this,"onTranslate",function(c,d){var h;(h=l.zoomHandler)!==null&&h!==void 0&&h.isTranslating()||l.translate(c,d)}),Me(this,"onZoom",function(c,d,h,m){l.zoom(l.transform.k*(1+c),d,h,m),l.update()}),this.container=n,this.events=r,this.guards=s,this.content=new BE(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new Eb(.1)),this.setDragHandler(new jh),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),n.appendChild(this.content.holder),this.update()}return ht(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,d=this.transform.k;this.pointer={x:l/d,y:c/d}}},{key:"translate",value:(function(){var n=at(xe.mark(function s(l,c){var d,h;return xe.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return d={x:l,y:c},y.next=3,this.guards.translate({previous:this.transform,position:d});case 3:if(h=y.sent,h){y.next=6;break}return y.abrupt("return",!1);case 6:return this.transform.x=h.data.position.x,this.transform.y=h.data.position.y,this.update(),y.next=11,this.events.translated(h.data);case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var n=at(xe.mark(function s(l){var c,d,h,m,y,v,b=arguments;return xe.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return c=b.length>1&&b[1]!==void 0?b[1]:0,d=b.length>2&&b[2]!==void 0?b[2]:0,h=b.length>3?b[3]:void 0,m=this.transform.k,k.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:h});case 6:if(y=k.sent,y){k.next=9;break}return k.abrupt("return",!0);case 9:return v=(m-y.data.zoom)/(m-l||1),this.transform.k=y.data.zoom||1,this.transform.x+=c*v,this.transform.y+=d*v,this.update(),k.next=16,this.events.zoomed(y.data);case 16:return k.abrupt("return",!1);case 17:case"end":return k.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function IE(a,n,r){return n=Ut(n),Fa(a,Cb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function Cb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cb=function(){return!!a})()}var Lo=(function(a){function n(){return ft(this,n),IE(this,n,arguments)}return Qn(n,a),ht(n)})(bs),$E=ht(function a(n){ft(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return n.contextmenu(r)})}),HE=(function(){function a(){ft(this,a),Me(this,"views",new WeakMap),Me(this,"viewsElements",new Map)}return ht(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function vv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function bv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?vv(Object(r),!0).forEach(function(s){Me(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Tb=(function(){function a(n,r,s){var l=this;ft(this,a),Me(this,"translate",(function(){var c=at(xe.mark(function d(h,m){var y,v;return xe.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return y=bv({},l.position),x.next=3,l.guards.translate({previous:y,position:{x:h,y:m}});case 3:if(v=x.sent,v){x.next=6;break}return x.abrupt("return",!1);case 6:return l.position=bv({},v.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),x.next=10,l.events.translated({position:l.position,previous:y});case 10:return x.abrupt("return",!0);case 11:case"end":return x.stop()}},d)}));return function(d,h){return c.apply(this,arguments)}})()),Me(this,"resize",(function(){var c=at(xe.mark(function d(h,m){var y,v;return xe.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return y={width:h,height:m},x.next=3,l.guards.resize({size:y});case 3:if(x.sent){x.next=5;break}return x.abrupt("return",!1);case 5:if(v=l.element.querySelector("*:not(span):not([fragment])"),!(!v||!(v instanceof HTMLElement))){x.next=8;break}return x.abrupt("return",!1);case 8:return v.style.width="".concat(h,"px"),v.style.height="".concat(m,"px"),x.next=12,l.events.resized({size:y});case 12:return x.abrupt("return",!0);case 13:case"end":return x.stop()}},d)}));return function(d,h){return c.apply(this,arguments)}})()),this.getZoom=n,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new jh,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ht(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function Nb(a,n){return a.map(function(r){return{view:n.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,d=l.height;return typeof c<"u"&&typeof d<"u"?{position:s.position,width:c,height:d}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function VE(a,n){var r=a.parentScope(Qr),s=n.map(function(c){return Mn(c)==="object"?c:r.getNode(c)}),l=Nb(s,a.nodeViews);return xb(l)}function qE(a){var n=a;n.addPipe(function(r){if(!r||Mn(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=n.nodeViews.get(r.data.id),l=n.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=n.connectionViews.get(r.data.id),d=n.area.content;c&&d.reorder(c.element,d.holder.firstChild)}return r})}function wv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function hr(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?wv(Object(r),!0).forEach(function(s){Me(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function GE(a,n){var r=n!=null&&n.scaling?n.scaling===!0?{min:.1,max:1}:n.scaling:!1,s=n!=null&&n.translation?n.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:n.translation:!1;function l(d){if(!r)throw new Error("scaling param isnt defined");var h=typeof r=="function"?r():r,m=h.min,y=h.max;return d<m?m:d>y?y:d}function c(d){if(!s)throw new Error("translation param isnt defined");var h=hr({},d),m=typeof s=="function"?s():s,y=m.left,v=m.top,b=m.right,x=m.bottom;return h.x<y&&(h.x=y),h.x>b&&(h.x=b),h.y<v&&(h.y=v),h.y>x&&(h.y=x),h}a.addPipe(function(d){if(!d||Mn(d)!=="object"||!("type"in d))return d;if(r&&d.type==="zoom")return hr(hr({},d),{},{data:hr(hr({},d.data),{},{zoom:l(d.data.zoom)})});if(s&&d.type==="zoomed"){var h=c(a.area.transform);a.area.translate(h.x,h.y)}return s&&d.type==="translate"?hr(hr({},d),{},{data:hr(hr({},d.data),{},{position:c(d.data.position)})}):d})}function YE(){var a=!1;function n(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",n),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}}var Ob=(function(){function a(){ft(this,a),Me(this,"entities",new Map),Me(this,"pickId",null)}return ht(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var n=at(xe.mark(function s(l,c){return xe.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c){h.next=3;break}return h.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var n=at(xe.mark(function s(l){var c,d;return xe.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c="".concat(l.label,"_").concat(l.id),d=this.entities.get(c),!d){m.next=6;break}return this.entities.delete(c),m.next=6,d.unselect();case 6:case"end":return m.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var n=at(xe.mark(function s(){var l=this;return xe.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(ws(Array.from(this.entities.values())).map(function(h){return l.remove(h)}));case 2:case"end":return d.stop()}},s,this)}));function r(){return n.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var n=at(xe.mark(function s(l,c){var d=this;return xe.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all(Array.from(this.entities.values()).map(function(y){return!d.isPicked(y)&&y.translate(l,c)}));case 2:case"end":return m.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function FE(){return new Ob}function PE(a,n,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(Qr))},d=0;function h(k){k.selected||(k.selected=!0,l.update("node",k.id))}function m(k){k.selected&&(k.selected=!1,l.update("node",k.id))}function y(k,j){return v.apply(this,arguments)}function v(){return v=at(xe.mark(function k(j,Z){var q;return xe.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(q=c().getNode(j),q){K.next=3;break}return K.abrupt("return");case 3:return K.next=5,n.add({label:"node",id:q.id,translate:function(Y,de){return at(xe.mark(function be(){var H,ue;return xe.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(H=l.nodeViews.get(q.id),ue=H?.position,!ue){pe.next=5;break}return pe.next=5,H.translate(ue.x+Y,ue.y+de);case 5:case"end":return pe.stop()}},be)}))()},unselect:function(){m(q)}},Z);case 5:h(q);case 6:case"end":return K.stop()}},k)})),v.apply(this,arguments)}function b(k){return x.apply(this,arguments)}function x(){return x=at(xe.mark(function k(j){return xe.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,n.remove({id:j,label:"node"});case 2:case"end":return q.stop()}},k)})),x.apply(this,arguments)}return l.addPipe((function(){var k=at(xe.mark(function j(Z){var q,Q,K,L,Y,de,be,H;return xe.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!(!Z||Mn(Z)!=="object"||!("type"in Z))){re.next=2;break}return re.abrupt("return",Z);case 2:if(Z.type!=="nodepicked"){re.next=11;break}return q=Z.data.id,Q=r.accumulating.active(),n.pick({id:q,label:"node"}),d=null,re.next=9,y(q,Q);case 9:re.next=33;break;case 11:if(Z.type!=="nodetranslated"){re.next=20;break}if(K=Z.data,L=K.id,Y=K.position,de=K.previous,be=Y.x-de.x,H=Y.y-de.y,!n.isPicked({id:L,label:"node"})){re.next=18;break}return re.next=18,n.translate(be,H);case 18:re.next=33;break;case 20:if(Z.type!=="pointerdown"){re.next=24;break}d=0,re.next=33;break;case 24:if(Z.type!=="pointermove"){re.next=28;break}d!==null&&d++,re.next=33;break;case 28:if(Z.type!=="pointerup"){re.next=33;break}if(!(d!==null&&d<4)){re.next=32;break}return re.next=32,n.unselectAll();case 32:d=null;case 33:return re.abrupt("return",Z);case 34:case"end":return re.stop()}},j)}));return function(j){return k.apply(this,arguments)}})()),{select:y,unselect:b}}function ZE(a,n){var r=null,s=function(){return r||(r=a.parentScope(Qr))};function l(c,d){var h=s().getNode(c);if(h){var m=h.inputs[d];if(!m)throw new Error("cannot find input");var y=m.showControl,v=s().getConnections(),b=!!v.find(function(x){return x.target===c&&x.targetInput===d});m.showControl=n?n({hasAnyConnection:b,input:m}):!b,m.showControl!==y&&a.update("node",h.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function Sv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function tc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Sv(Object(r),!0).forEach(function(s){Me(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function XE(a,n){var r=a,s=typeof n?.size>"u"?16:n.size,l=typeof n?.dynamic>"u"?!0:n.dynamic;function c(d){return Math.round(d/s)*s}r.addPipe(function(d){if(!d||Mn(d)!=="object"||!("type"in d))return d;if(l&&d.type==="nodetranslate"){var h=d.data.position,m=c(h.x),y=c(h.y);return tc(tc({},d),{},{data:tc(tc({},d.data),{},{position:{x:m,y}})})}if(!l&&d.type==="nodedragged"){var v=r.nodeViews.get(d.data.id);if(v){var b=v.position,x=b.x,k=b.y;v.translate(c(x),c(k))}}return d})}function KE(a,n,r){return Gf.apply(this,arguments)}function Gf(){return Gf=at(xe.mark(function a(n,r,s){var l,c,d,h,m,y,v,b,x,k,j,Z,q;return xe.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return l=s||{},c=l.scale,d=c===void 0?.9:c,h=n.parentScope(Qr),m=r.map(function(L){return Mn(L)==="object"?L:h.getNode(L)}),y=Nb(m,n.nodeViews),v=xb(y),b=[n.container.clientWidth,n.container.clientHeight],x=b[0],k=b[1],j=x/v.width,Z=k/v.height,q=Math.min(Z*d,j*d,1),n.area.transform.x=x/2-v.center.x*q,n.area.transform.y=k/2-v.center.y*q,K.next=12,n.area.zoom(q,0,0);case 12:case"end":return K.stop()}},a)})),Gf.apply(this,arguments)}var qr=Object.freeze({__proto__:null,getBoundingBox:VE,simpleNodesOrder:qE,restrictor:GE,accumulateOnCtrl:YE,selectableNodes:PE,Selector:Ob,selector:FE,showInputControl:ZE,snapGrid:XE,zoomAt:KE});function xv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Ev(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?xv(Object(r),!0).forEach(function(s){Me(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function QE(a,n,r){return n=Ut(n),Fa(a,jb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function jb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jb=function(){return!!a})()}var Ab=(function(a){function n(r){var s;return ft(this,n),s=QE(this,n,["area"]),Me(s,"nodeViews",new Map),Me(s,"connectionViews",new Map),Me(s,"elements",new HE),Me(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!(Mn(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new kb(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,d){return void s.emit({type:"pointerdown",data:{position:c,event:d}})},pointerMove:function(c,d){return void s.emit({type:"pointermove",data:{position:c,event:d}})},pointerUp:function(c,d){return void s.emit({type:"pointerup",data:{position:c,event:d}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return Qn(n,a),ht(n,[{key:"addNodeView",value:function(s){var l=this,c=s.id,d=new Tb(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(m){return l.emit({type:"nodetranslated",data:Ev({id:c},m)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(m){return void l.emit({type:"contextmenu",data:{event:m,context:s}})},resized:function(m){var y=m.size;return l.emit({type:"noderesized",data:{id:s.id,size:y}})}},{translate:function(m){return l.emit({type:"nodetranslate",data:Ev({id:c},m)})},resize:function(m){var y=m.size;return l.emit({type:"noderesize",data:{id:s.id,size:y}})}});return this.nodeViews.set(c,d),this.area.content.add(d.element),this.emit({type:"render",data:{element:d.element,type:"node",payload:s}}),d}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new $E({contextmenu:function(h){return void l.emit({type:"contextmenu",data:{event:h,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=at(xe.mark(function l(c,d){var h;return xe.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(h=this.elements.get(c,d),!h){y.next=4;break}return y.next=4,this.emit({type:"render",data:h});case 4:case"end":return y.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=at(xe.mark(function l(c,d,h){var m;return xe.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(m=this.nodeViews.get(c),!m){v.next=5;break}return v.next=4,m.resize(d,h);case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}},l,this)}));function s(l,c,d){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=at(xe.mark(function l(c,d){var h,m,y;return xe.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h=d.x,m=d.y,y=this.nodeViews.get(c),!y){b.next=6;break}return b.next=5,y.translate(h,m);case 5:return b.abrupt("return",b.sent);case 6:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(Lo);const kv=Object.freeze(Object.defineProperty({__proto__:null,Area:kb,AreaExtensions:qr,AreaPlugin:Ab,BaseAreaPlugin:Lo,Drag:jh,NodeView:Tb,Zoom:Eb,usePointerListener:Sb},Symbol.toStringTag,{value:"Module"}));function JE(a,n){for(;!{}.hasOwnProperty.call(a,n)&&(a=Ut(a))!==null;);return a}function Mo(){return Mo=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,n,r){var s=JE(a,n);if(s){var l=Object.getOwnPropertyDescriptor(s,n);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Mo.apply(null,arguments)}function WE(a){if(Array.isArray(a))return a}function ek(a,n){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,d,h=[],m=!0,y=!1;try{if(c=(r=r.call(a)).next,n!==0)for(;!(m=(s=c.call(r)).done)&&(h.push(s.value),h.length!==n);m=!0);}catch(v){y=!0,l=v}finally{try{if(!m&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(y)throw l}}return h}}function tk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qn(a,n){return WE(a)||ek(a,n)||wb(a,n)||tk()}function Cv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function xf(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Cv(Object(r),!0).forEach(function(s){Me(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function nk(a){var n=null,r=null;function s(c){r&&c.removeConnectionView(r),n=null,r=null}function l(c){s(c),r="pseudo_".concat(Jr())}return{isMounted:function(){return!!r},mount:l,render:function(d,h,m){var y=h.x,v=h.y,b=m.side==="output",x={x:y+(b?-3:3),y:v};if(!r)throw new Error("pseudo connection id wasn't generated");var k=b?xf({id:r,source:m.nodeId,sourceOutput:m.key,target:"",targetInput:""},a??{}):xf({id:r,target:m.nodeId,targetInput:m.key,source:"",sourceOutput:""},a??{});if(!n){var j=d.addConnectionView(k);n=j.element}n&&d.emit({type:"render",data:xf({element:n,type:"connection",payload:k},b?{end:x}:{start:x})})},unmount:s}}function ak(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=rk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function rk(a,n){if(a){if(typeof a=="string")return Tv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tv(a,n):void 0}}function Tv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function ik(a,n){var r=ak(n),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(d){r.e(d)}finally{r.f()}}function _b(a,n){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,n),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,ws(_b(a,n,c))),l}var Ah=(function(){function a(){ft(this,a)}return ht(a,[{key:"setContext",value:function(r){this.context=r}}])})();function Db(a,n){var r=a.side==="output"&&n.side==="input",s=a.side==="input"&&n.side==="output",l=r?[a,n]:s?[n,a]:[],c=qn(l,2),d=c[0],h=c[1];if(d&&h)return[d,h]}function sk(a,n){return!!Db(a,n)}function ok(a,n,r){var s=Db(a,n)||[null,null],l=qn(s,2),c=l[0],d=l[1];if(c&&d)return r.editor.addConnection({id:Jr(),source:c.nodeId,sourceOutput:c.key,target:d.nodeId,targetInput:d.key}),!0}function lk(a,n){var r=n.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function ck(a,n){var r=a.nodeId,s=a.side,l=a.key;return n.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Yf(a,n){var r=a.map(function(s){var l=lk(s,n),c=l?.multipleConnections;return c?[]:ck(s,n)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var d=c.id;return d})));l.forEach(function(c){return void n.removeConnection(c)})}}}function _h(a,n,r){return n=Ut(n),Fa(a,Mb()?Reflect.construct(n,[],Ut(a).constructor):n.apply(a,r))}function Mb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mb=function(){return!!a})()}var uk=(function(a){function n(r,s){var l;return ft(this,n),l=_h(this,n),l.initial=r,l.params=s,l}return Qn(n,a),ht(n,[{key:"pick",value:(function(){var r=at(xe.mark(function l(c,d){var h,m;return xe.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:h=c.socket,this.params.canMakeConnection(this.initial,h)&&(Yf([this.initial,h],d.editor).commit(),m=this.params.makeConnection(this.initial,h,d),this.drop(d,m?h:null,m));case 2:case"end":return v.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Dh(this.params))}}])})(Ah),dk=(function(a){function n(r,s,l){var c;ft(this,n),c=_h(this,n),c.connection=r,c.params=s;var d=Array.from(l.socketsCache.values()).find(function(h){return h.nodeId===c.connection.source&&h.side==="output"&&h.key===c.connection.sourceOutput});if(!d)throw new Error("cannot find output socket");return c.outputSocket=d,c}return Qn(n,a),ht(n,[{key:"init",value:(function(){var r=at(xe.mark(function l(c){var d=this;return xe.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(y){y?(c.editor.removeConnection(d.connection.id),d.initial=d.outputSocket):d.drop(c)});case 1:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=at(xe.mark(function l(c,d){var h,m,y,v,b,x;return xe.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:h=c.socket,m=c.event,this.initial&&!(h.side==="input"&&this.connection.target===h.nodeId&&this.connection.targetInput===h.key)?this.params.canMakeConnection(this.initial,h)&&(Yf([this.initial,h],d.editor).commit(),y=this.params.makeConnection(this.initial,h,d),v=y?h:null,this.drop(d,v,y)):m==="down"&&this.initial&&(Yf([this.initial,h],d.editor).commit(),b=this.params.makeConnection(this.initial,h,d),x=b?null:h,this.drop(d,x,b));case 2:case"end":return j.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Dh(this.params))}}])})(Ah),Dh=(function(a){function n(r){var s;return ft(this,n),s=_h(this,n),s.params=r,s}return Qn(n,a),ht(n,[{key:"pick",value:(function(){var r=at(xe.mark(function l(c,d){var h,m,y,v;return xe.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(h=c.socket,m=c.event,m==="down"){x.next=3;break}return x.abrupt("return");case 3:if(h.side!=="input"){x.next=11;break}if(y=d.editor.getConnections().find(function(k){return k.target===h.nodeId&&k.targetInput===h.key}),!y){x.next=11;break}return v=new dk(y,this.params,d),x.next=9,v.init(d);case 9:return this.context.switchTo(v),x.abrupt("return");case 11:return x.next=13,d.scope.emit({type:"connectionpick",data:{socket:h}});case 13:if(!x.sent){x.next=17;break}this.context.switchTo(new uk(h,this.params)),x.next=18;break;case 17:this.drop(d);case 18:case"end":return x.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(Ah),fk=(function(){function a(n){ft(this,a);var r=n?.canMakeConnection||sk,s=n?.makeConnection||ok;this.switchTo(new Dh({canMakeConnection:r,makeConnection:s}))}return ht(a,[{key:"pick",value:(function(){var n=at(xe.mark(function s(l,c){return xe.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.currentState.pick(l,c);case 2:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function hk(){return function(){return new fk}}var pk=Object.freeze({__proto__:null,setup:hk}),mk=Object.freeze({__proto__:null,classic:pk});function yk(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=gk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function gk(a,n){if(a){if(typeof a=="string")return Nv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nv(a,n):void 0}}function Nv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function vk(a,n,r){return n=Ut(n),Fa(a,Rb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function Rb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rb=function(){return!!a})()}function bk(a,n,r,s){var l=Mo(Ut(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var wk=(function(a){function n(){var r;return ft(this,n),r=vk(this,n,["connection"]),Me(r,"presets",[]),Me(r,"currentFlow",null),Me(r,"preudoconnection",nk({isPseudo:!0})),Me(r,"socketsCache",new Map),r}return Qn(n,a),ht(n,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=yk(this.presets),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,h=d(s);if(h)return h}}catch(m){l.e(m)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=at(xe.mark(function l(c,d){var h,m,y;return xe.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h={editor:this.editor,scope:this,socketsCache:this.socketsCache},m=_b(c.clientX,c.clientY),y=ik(this.socketsCache,m),!y){b.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(y),!this.currentFlow){b.next=11;break}return b.next=10,this.currentFlow.pick({socket:y,event:d},h);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:b.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(h);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;bk(n,"setParent",this)([s]),this.areaPlugin=this.parentScope(Lo),this.editor=this.areaPlugin.parentScope(Qr);var c=function(h){l.pick(h,"down")};this.addPipe(function(d){if(!d||Mn(d)!=="object"||!("type"in d))return d;if(d.type==="pointermove")l.update();else if(d.type==="pointerup")l.pick(d.data.event,"up");else if(d.type==="render"){if(d.data.type==="socket"){var h=d.data.element;h.addEventListener("pointerdown",c),l.socketsCache.set(h,d.data)}}else if(d.type==="unmount"){var m=d.data.element;m.removeEventListener("pointerdown",c),l.socketsCache.delete(m)}return d})}}])})(bs);function Sk(a,n){var r=qn(a,2),s=r[0],l=s.x,c=s.y,d=r[1],h=d.x,m=d.y,y=Math.abs(c-m),v=l+Math.max(y/2,Math.abs(h-l))*n,b=h-Math.max(y/2,Math.abs(h-l))*n;return"M ".concat(l," ").concat(c," C ").concat(v," ").concat(c," ").concat(b," ").concat(m," ").concat(h," ").concat(m)}function xk(a,n,r){var s=qn(a,2),l=s[0],c=l.x,d=l.y,h=s[1],m=h.x,y=h.y,v=y>d?1:-1,b=r+Math.abs(c-m)/(r/2),x=(c+m)/2,k=d-v*b,j=(y-d)*n;return`
        M `.concat(c," ").concat(d,`
        C `).concat(c+b," ").concat(d,`
        `).concat(c+b," ").concat(k-j,`
        `).concat(x," ").concat(k,`
        C `).concat(m-b," ").concat(k+j,`
        `).concat(m-b," ").concat(y,`
        `).concat(m," ").concat(y,`
    `)}function Ek(a,n){return Ff.apply(this,arguments)}function Ff(){return Ff=at(xe.mark(function a(n,r){var s,l,c,d,h;return xe.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(n.offsetParent){y.next=5;break}return y.next=3,new Promise(function(v){return setTimeout(v,0)});case 3:y.next=0;break;case 5:if(s=n.offsetLeft,l=n.offsetTop,c=n.offsetParent,c){y.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return d=n.offsetWidth,h=n.offsetHeight,y.abrupt("return",{x:s+d/2,y:l+h/2});case 14:case"end":return y.stop()}},a)})),Ff.apply(this,arguments)}var kk=(function(){function a(){ft(this,a),Me(this,"listeners",new Set)}return ht(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),Ck=(function(){function a(){ft(this,a),Me(this,"elements",new Map)}return ht(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),d=c.filter(function(h){return h.side===r.side&&h.nodeId===r.nodeId&&h.key===r.key});return d.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=d.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(ws(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),Tk=(function(){function a(){ft(this,a),Me(this,"sockets",new Ck),Me(this,"emitter",new kk),Me(this,"area",null)}return ht(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(Lo),this.area.addPipe((function(){var l=at(xe.mark(function c(d){var h,m,y,v,b,x,k,j,Z,q,Q;return xe.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!(d.type==="rendered"&&d.data.type==="socket")){L.next=8;break}return h=d.data,m=h.nodeId,y=h.key,v=h.side,b=h.element,L.next=4,s.calculatePosition(m,v,y,b);case 4:x=L.sent,x&&(s.sockets.add({nodeId:m,key:y,side:v,element:b,position:x}),s.emitter.emit({nodeId:m,key:y,side:v})),L.next=24;break;case 8:if(d.type!=="unmount"){L.next=12;break}s.sockets.remove(d.data.element),L.next=24;break;case 12:if(d.type!=="nodetranslated"){L.next=16;break}s.emitter.emit({nodeId:d.data.id}),L.next=24;break;case 16:if(d.type!=="noderesized"){L.next=23;break}return k=d.data.id,L.next=20,Promise.all(s.sockets.snapshot().filter(function(Y){return Y.nodeId===d.data.id&&Y.side==="output"}).map((function(){var Y=at(xe.mark(function de(be){var H,ue,re,pe;return xe.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return H=be.side,ue=be.key,re=be.element,je.next=3,s.calculatePosition(k,H,ue,re);case 3:pe=je.sent,pe&&(be.position=pe);case 5:case"end":return je.stop()}},de)}));return function(de){return Y.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:k}),L.next=24;break;case 23:d.type==="render"&&d.data.type==="connection"&&(j=d.data.payload,Z=j.source,q=j.target,Q=Z||q,s.emitter.emit({nodeId:Q}));case 24:return L.abrupt("return",d);case 25:case"end":return L.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var d=this,h=this.emitter.listen(function(m){if(m.nodeId===r&&(!m.key||m.side===s)&&(!m.side||m.key===l)){var y,v=d.sockets.getPosition({side:s,nodeId:r,key:l});if(!v)return;var b=v.x,x=v.y,k=(y=d.area)===null||y===void 0?void 0:y.nodeViews.get(r);k&&c({x:b+k.position.x,y:x+k.position.y})}});return this.sockets.snapshot().forEach(function(m){m.nodeId===r&&d.emitter.emit(m)}),h}}])})();function Nk(a,n,r){return n=Ut(n),Fa(a,zb()?Reflect.construct(n,[],Ut(a).constructor):n.apply(a,r))}function zb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zb=function(){return!!a})()}var Ok=(function(a){function n(r){var s;return ft(this,n),s=Nk(this,n),s.props=r,s}return Qn(n,a),ht(n,[{key:"calculatePosition",value:(function(){var r=at(xe.mark(function l(c,d,h,m){var y,v,b,x;return xe.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(b=(y=this.area)===null||y===void 0?void 0:y.nodeViews.get(c),b!=null&&b.element){j.next=3;break}return j.abrupt("return",null);case 3:return j.next=5,Ek(m,b.element);case 5:if(x=j.sent,!((v=this.props)!==null&&v!==void 0&&v.offset)){j.next=8;break}return j.abrupt("return",this.props.offset(x,c,d,h));case 8:return j.abrupt("return",{x:x.x+12*(d==="input"?-1:1),y:x.y});case 9:case"end":return j.stop()}},l,this)}));function s(l,c,d,h){return r.apply(this,arguments)}return s})()}])})(Tk);function jk(a){return new Ok(a)}function Rn(a,n){return n||(n=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(n)}}))}var Kn=function(){return Kn=Object.assign||function(n){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(n[c]=r[c])}return n},Kn.apply(this,arguments)};function Nc(a,n,r){if(r||arguments.length===2)for(var s=0,l=n.length,c;s<l;s++)(c||!(s in n))&&(c||(c=Array.prototype.slice.call(n,0,s)),c[s]=n[s]);return a.concat(c||Array.prototype.slice.call(n))}var Vt="-ms-",Oo="-moz-",Ct="-webkit-",Lb="comm",Bc="rule",Mh="decl",Ak="@import",Bb="@keyframes",_k="@layer",Ub=Math.abs,Rh=String.fromCharCode,Pf=Object.assign;function Dk(a,n){return Tn(a,0)^45?(((n<<2^Tn(a,0))<<2^Tn(a,1))<<2^Tn(a,2))<<2^Tn(a,3):0}function Ib(a){return a.trim()}function mr(a,n){return(a=n.exec(a))?a[0]:a}function nt(a,n,r){return a.replace(n,r)}function mc(a,n,r){return a.indexOf(n,r)}function Tn(a,n){return a.charCodeAt(n)|0}function hs(a,n,r){return a.slice(n,r)}function $a(a){return a.length}function $b(a){return a.length}function xo(a,n){return n.push(a),a}function Mk(a,n){return a.map(n).join("")}function Ov(a,n){return a.filter(function(r){return!mr(r,n)})}var Uc=1,ps=1,Hb=0,Sa=0,yn=0,Ss="";function Ic(a,n,r,s,l,c,d,h){return{value:a,root:n,parent:r,type:s,props:l,children:c,line:Uc,column:ps,length:d,return:"",siblings:h}}function Gr(a,n){return Pf(Ic("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},n)}function as(a){for(;a.root;)a=Gr(a.root,{children:[a]});xo(a,a.siblings)}function Rk(){return yn}function zk(){return yn=Sa>0?Tn(Ss,--Sa):0,ps--,yn===10&&(ps=1,Uc--),yn}function Da(){return yn=Sa<Hb?Tn(Ss,Sa++):0,ps++,yn===10&&(ps=1,Uc++),yn}function wi(){return Tn(Ss,Sa)}function yc(){return Sa}function $c(a,n){return hs(Ss,a,n)}function Zf(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Lk(a){return Uc=ps=1,Hb=$a(Ss=a),Sa=0,[]}function Bk(a){return Ss="",a}function Ef(a){return Ib($c(Sa-1,Xf(a===91?a+2:a===40?a+1:a)))}function Uk(a){for(;(yn=wi())&&yn<33;)Da();return Zf(a)>2||Zf(yn)>3?"":" "}function Ik(a,n){for(;--n&&Da()&&!(yn<48||yn>102||yn>57&&yn<65||yn>70&&yn<97););return $c(a,yc()+(n<6&&wi()==32&&Da()==32))}function Xf(a){for(;Da();)switch(yn){case a:return Sa;case 34:case 39:a!==34&&a!==39&&Xf(yn);break;case 40:a===41&&Xf(a);break;case 92:Da();break}return Sa}function $k(a,n){for(;Da()&&a+yn!==57;)if(a+yn===84&&wi()===47)break;return"/*"+$c(n,Sa-1)+"*"+Rh(a===47?a:Da())}function Hk(a){for(;!Zf(wi());)Da();return $c(a,Sa)}function Vk(a){return Bk(gc("",null,null,null,[""],a=Lk(a),0,[0],a))}function gc(a,n,r,s,l,c,d,h,m){for(var y=0,v=0,b=d,x=0,k=0,j=0,Z=1,q=1,Q=1,K=0,L="",Y=l,de=c,be=s,H=L;q;)switch(j=K,K=Da()){case 40:if(j!=108&&Tn(H,b-1)==58){mc(H+=nt(Ef(K),"&","&\f"),"&\f",Ub(y?h[y-1]:0))!=-1&&(Q=-1);break}case 34:case 39:case 91:H+=Ef(K);break;case 9:case 10:case 13:case 32:H+=Uk(j);break;case 92:H+=Ik(yc()-1,7);continue;case 47:switch(wi()){case 42:case 47:xo(qk($k(Da(),yc()),n,r,m),m);break;default:H+="/"}break;case 123*Z:h[y++]=$a(H)*Q;case 125*Z:case 59:case 0:switch(K){case 0:case 125:q=0;case 59+v:Q==-1&&(H=nt(H,/\f/g,"")),k>0&&$a(H)-b&&xo(k>32?Av(H+";",s,r,b-1,m):Av(nt(H," ","")+";",s,r,b-2,m),m);break;case 59:H+=";";default:if(xo(be=jv(H,n,r,y,v,l,h,L,Y=[],de=[],b,c),c),K===123)if(v===0)gc(H,n,be,be,Y,c,b,h,de);else switch(x===99&&Tn(H,3)===110?100:x){case 100:case 108:case 109:case 115:gc(a,be,be,s&&xo(jv(a,be,be,0,0,l,h,L,l,Y=[],b,de),de),l,de,b,h,s?Y:de);break;default:gc(H,be,be,be,[""],de,0,h,de)}}y=v=k=0,Z=Q=1,L=H="",b=d;break;case 58:b=1+$a(H),k=j;default:if(Z<1){if(K==123)--Z;else if(K==125&&Z++==0&&zk()==125)continue}switch(H+=Rh(K),K*Z){case 38:Q=v>0?1:(H+="\f",-1);break;case 44:h[y++]=($a(H)-1)*Q,Q=1;break;case 64:wi()===45&&(H+=Ef(Da())),x=wi(),v=b=$a(L=H+=Hk(yc())),K++;break;case 45:j===45&&$a(H)==2&&(Z=0)}}return c}function jv(a,n,r,s,l,c,d,h,m,y,v,b){for(var x=l-1,k=l===0?c:[""],j=$b(k),Z=0,q=0,Q=0;Z<s;++Z)for(var K=0,L=hs(a,x+1,x=Ub(q=d[Z])),Y=a;K<j;++K)(Y=Ib(q>0?k[K]+" "+L:nt(L,/&\f/g,k[K])))&&(m[Q++]=Y);return Ic(a,n,r,l===0?Bc:h,m,y,v,b)}function qk(a,n,r,s){return Ic(a,n,r,Lb,Rh(Rk()),hs(a,2,-2),0,s)}function Av(a,n,r,s,l){return Ic(a,n,r,Mh,hs(a,0,s),hs(a,s+1,-1),s,l)}function Vb(a,n,r){switch(Dk(a,n)){case 5103:return Ct+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+a+a;case 4789:return Oo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+a+Oo+a+Vt+a+a;case 5936:switch(Tn(a,n+11)){case 114:return Ct+a+Vt+nt(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Ct+a+Vt+nt(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Ct+a+Vt+nt(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return Ct+a+Vt+a+a;case 6165:return Ct+a+Vt+"flex-"+a+a;case 5187:return Ct+a+nt(a,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+Vt+"flex-$1$2")+a;case 5443:return Ct+a+Vt+"flex-item-"+nt(a,/flex-|-self/g,"")+(mr(a,/flex-|baseline/)?"":Vt+"grid-row-"+nt(a,/flex-|-self/g,""))+a;case 4675:return Ct+a+Vt+"flex-line-pack"+nt(a,/align-content|flex-|-self/g,"")+a;case 5548:return Ct+a+Vt+nt(a,"shrink","negative")+a;case 5292:return Ct+a+Vt+nt(a,"basis","preferred-size")+a;case 6060:return Ct+"box-"+nt(a,"-grow","")+Ct+a+Vt+nt(a,"grow","positive")+a;case 4554:return Ct+nt(a,/([^-])(transform)/g,"$1"+Ct+"$2")+a;case 6187:return nt(nt(nt(a,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),a,"")+a;case 5495:case 3959:return nt(a,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return nt(nt(a,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+Vt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+a+a;case 4200:if(!mr(a,/flex-|baseline/))return Vt+"grid-column-align"+hs(a,n)+a;break;case 2592:case 3360:return Vt+nt(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return n=l,mr(s.props,/grid-\w+-end/)})?~mc(a+(r=r[n].value),"span",0)?a:Vt+nt(a,"-start","")+a+Vt+"grid-row-span:"+(~mc(r,"span",0)?mr(r,/\d+/):+mr(r,/\d+/)-+mr(a,/\d+/))+";":Vt+nt(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return mr(s.props,/grid-\w+-start/)})?a:Vt+nt(nt(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return nt(a,/(.+)-inline(.+)/,Ct+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($a(a)-1-n>6)switch(Tn(a,n+1)){case 109:if(Tn(a,n+4)!==45)break;case 102:return nt(a,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+Oo+(Tn(a,n+3)==108?"$3":"$2-$3"))+a;case 115:return~mc(a,"stretch",0)?Vb(nt(a,"stretch","fill-available"),n,r)+a:a}break;case 5152:case 5920:return nt(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,d,h,m,y){return Vt+l+":"+c+y+(d?Vt+l+"-span:"+(h?m:+m-+c)+y:"")+a});case 4949:if(Tn(a,n+6)===121)return nt(a,":",":"+Ct)+a;break;case 6444:switch(Tn(a,Tn(a,14)===45?18:11)){case 120:return nt(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ct+(Tn(a,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+Vt+"$2box$3")+a;case 100:return nt(a,":",":"+Vt)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return nt(a,"scroll-","scroll-snap-")+a}return a}function Oc(a,n){for(var r="",s=0;s<a.length;s++)r+=n(a[s],s,a,n)||"";return r}function Gk(a,n,r,s){switch(a.type){case _k:if(a.children.length)break;case Ak:case Mh:return a.return=a.return||a.value;case Lb:return"";case Bb:return a.return=a.value+"{"+Oc(a.children,s)+"}";case Bc:if(!$a(a.value=a.props.join(",")))return""}return $a(r=Oc(a.children,s))?a.return=a.value+"{"+r+"}":""}function Yk(a){var n=$b(a);return function(r,s,l,c){for(var d="",h=0;h<n;h++)d+=a[h](r,s,l,c)||"";return d}}function Fk(a){return function(n){n.root||(n=n.return)&&a(n)}}function Pk(a,n,r,s){if(a.length>-1&&!a.return)switch(a.type){case Mh:a.return=Vb(a.value,a.length,r);return;case Bb:return Oc([Gr(a,{value:nt(a.value,"@","@"+Ct)})],s);case Bc:if(a.length)return Mk(r=a.props,function(l){switch(mr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":as(Gr(a,{props:[nt(l,/:(read-\w+)/,":"+Oo+"$1")]})),as(Gr(a,{props:[l]})),Pf(a,{props:Ov(r,s)});break;case"::placeholder":as(Gr(a,{props:[nt(l,/:(plac\w+)/,":"+Ct+"input-$1")]})),as(Gr(a,{props:[nt(l,/:(plac\w+)/,":"+Oo+"$1")]})),as(Gr(a,{props:[nt(l,/:(plac\w+)/,Vt+"input-$1")]})),as(Gr(a,{props:[l]})),Pf(a,{props:Ov(r,s)});break}return""})}}var Zk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ia={},ms=typeof process<"u"&&ia!==void 0&&(ia.REACT_APP_SC_ATTR||ia.SC_ATTR)||"data-styled",qb="active",Gb="data-styled-version",Hc="6.1.19",zh=`/*!sc*/
`,jc=typeof window<"u"&&typeof document<"u",Xk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ia!==void 0&&ia.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ia.REACT_APP_SC_DISABLE_SPEEDY!==""?ia.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ia.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ia!==void 0&&ia.SC_DISABLE_SPEEDY!==void 0&&ia.SC_DISABLE_SPEEDY!==""&&ia.SC_DISABLE_SPEEDY!=="false"&&ia.SC_DISABLE_SPEEDY),Vc=Object.freeze([]),ys=Object.freeze({});function Kk(a,n,r){return r===void 0&&(r=ys),a.theme!==r.theme&&a.theme||n||r.theme}var Yb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Qk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Jk=/(^-|-$)/g;function _v(a){return a.replace(Qk,"-").replace(Jk,"")}var Wk=/(a)(d)/gi,nc=52,Dv=function(a){return String.fromCharCode(a+(a>25?39:97))};function Kf(a){var n,r="";for(n=Math.abs(a);n>nc;n=n/nc|0)r=Dv(n%nc)+r;return(Dv(n%nc)+r).replace(Wk,"$1-$2")}var kf,Fb=5381,ls=function(a,n){for(var r=n.length;r;)a=33*a^n.charCodeAt(--r);return a},Pb=function(a){return ls(Fb,a)};function e2(a){return Kf(Pb(a)>>>0)}function t2(a){return a.displayName||a.name||"Component"}function Cf(a){return typeof a=="string"&&!0}var Zb=typeof Symbol=="function"&&Symbol.for,Xb=Zb?Symbol.for("react.memo"):60115,n2=Zb?Symbol.for("react.forward_ref"):60112,a2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r2={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Kb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i2=((kf={})[n2]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kf[Xb]=Kb,kf);function Mv(a){return("type"in(n=a)&&n.type.$$typeof)===Xb?Kb:"$$typeof"in a?i2[a.$$typeof]:a2;var n}var s2=Object.defineProperty,o2=Object.getOwnPropertyNames,Rv=Object.getOwnPropertySymbols,l2=Object.getOwnPropertyDescriptor,c2=Object.getPrototypeOf,zv=Object.prototype;function Qb(a,n,r){if(typeof n!="string"){if(zv){var s=c2(n);s&&s!==zv&&Qb(a,s,r)}var l=o2(n);Rv&&(l=l.concat(Rv(n)));for(var c=Mv(a),d=Mv(n),h=0;h<l.length;++h){var m=l[h];if(!(m in r2||r&&r[m]||d&&m in d||c&&m in c)){var y=l2(n,m);try{s2(a,m,y)}catch{}}}}return a}function gs(a){return typeof a=="function"}function Lh(a){return typeof a=="object"&&"styledComponentId"in a}function gi(a,n){return a&&n?"".concat(a," ").concat(n):a||n||""}function Lv(a,n){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Ro(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function Qf(a,n,r){if(r===void 0&&(r=!1),!r&&!Ro(a)&&!Array.isArray(a))return n;if(Array.isArray(n))for(var s=0;s<n.length;s++)a[s]=Qf(a[s],n[s]);else if(Ro(n))for(var s in n)a[s]=Qf(a[s],n[s]);return a}function Bh(a,n){Object.defineProperty(a,"toString",{value:n})}function Bo(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var u2=(function(){function a(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return a.prototype.indexOfGroup=function(n){for(var r=0,s=0;s<n;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;n>=c;)if((c<<=1)<0)throw Bo(16,"".concat(n));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var d=l;d<c;d++)this.groupSizes[d]=0}for(var h=this.indexOfGroup(n+1),m=(d=0,r.length);d<m;d++)this.tag.insertRule(h,r[d])&&(this.groupSizes[n]++,h++)},a.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],s=this.indexOfGroup(n),l=s+r;this.groupSizes[n]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var s=this.groupSizes[n],l=this.indexOfGroup(n),c=l+s,d=l;d<c;d++)r+="".concat(this.tag.getRule(d)).concat(zh);return r},a})(),vc=new Map,Ac=new Map,bc=1,ac=function(a){if(vc.has(a))return vc.get(a);for(;Ac.has(bc);)bc++;var n=bc++;return vc.set(a,n),Ac.set(n,a),n},d2=function(a,n){bc=n+1,vc.set(a,n),Ac.set(n,a)},f2="style[".concat(ms,"][").concat(Gb,'="').concat(Hc,'"]'),h2=new RegExp("^".concat(ms,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),p2=function(a,n,r){for(var s,l=r.split(","),c=0,d=l.length;c<d;c++)(s=l[c])&&a.registerName(n,s)},m2=function(a,n){for(var r,s=((r=n.textContent)!==null&&r!==void 0?r:"").split(zh),l=[],c=0,d=s.length;c<d;c++){var h=s[c].trim();if(h){var m=h.match(h2);if(m){var y=0|parseInt(m[1],10),v=m[2];y!==0&&(d2(v,y),p2(a,v,m[3]),a.getTag().insertRules(y,l)),l.length=0}else l.push(h)}}},Bv=function(a){for(var n=document.querySelectorAll(f2),r=0,s=n.length;r<s;r++){var l=n[r];l&&l.getAttribute(ms)!==qb&&(m2(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function y2(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Jb=function(a){var n=document.head,r=a||n,s=document.createElement("style"),l=(function(h){var m=Array.from(h.querySelectorAll("style[".concat(ms,"]")));return m[m.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(ms,qb),s.setAttribute(Gb,Hc);var d=y2();return d&&s.setAttribute("nonce",d),r.insertBefore(s,c),s},g2=(function(){function a(n){this.element=Jb(n),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var d=s[l];if(d.ownerNode===r)return d}throw Bo(17)})(this.element),this.length=0}return a.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},a.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},a})(),v2=(function(){function a(n){this.element=Jb(n),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[n]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},a.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},a})(),b2=(function(){function a(n){this.rules=[],this.length=0}return a.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},a.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},a.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},a})(),Uv=jc,w2={isServer:!jc,useCSSOMInjection:!Xk},Wb=(function(){function a(n,r,s){n===void 0&&(n=ys),r===void 0&&(r={});var l=this;this.options=Kn(Kn({},w2),n),this.gs=r,this.names=new Map(s),this.server=!!n.isServer,!this.server&&jc&&Uv&&(Uv=!1,Bv(this)),Bh(this,function(){return(function(c){for(var d=c.getTag(),h=d.length,m="",y=function(b){var x=(function(Q){return Ac.get(Q)})(b);if(x===void 0)return"continue";var k=c.names.get(x),j=d.getGroup(b);if(k===void 0||!k.size||j.length===0)return"continue";var Z="".concat(ms,".g").concat(b,'[id="').concat(x,'"]'),q="";k!==void 0&&k.forEach(function(Q){Q.length>0&&(q+="".concat(Q,","))}),m+="".concat(j).concat(Z,'{content:"').concat(q,'"}').concat(zh)},v=0;v<h;v++)y(v);return m})(l)})}return a.registerId=function(n){return ac(n)},a.prototype.rehydrate=function(){!this.server&&jc&&Bv(this)},a.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new a(Kn(Kn({},this.options),n),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(n=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new b2(l):s?new g2(l):new v2(l)})(this.options),new u2(n)));var n},a.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},a.prototype.registerName=function(n,r){if(ac(n),this.names.has(n))this.names.get(n).add(r);else{var s=new Set;s.add(r),this.names.set(n,s)}},a.prototype.insertRules=function(n,r,s){this.registerName(n,r),this.getTag().insertRules(ac(n),s)},a.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},a.prototype.clearRules=function(n){this.getTag().clearGroup(ac(n)),this.clearNames(n)},a.prototype.clearTag=function(){this.tag=void 0},a})(),S2=/&/g,x2=/^\s*\/\/.*$/gm;function e1(a,n){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(s){return"".concat(n," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=e1(r.children,n)),r})}function E2(a){var n,r,s,l=ys,c=l.options,d=c===void 0?ys:c,h=l.plugins,m=h===void 0?Vc:h,y=function(x,k,j){return j.startsWith(r)&&j.endsWith(r)&&j.replaceAll(r,"").length>0?".".concat(n):x},v=m.slice();v.push(function(x){x.type===Bc&&x.value.includes("&")&&(x.props[0]=x.props[0].replace(S2,r).replace(s,y))}),d.prefix&&v.push(Pk),v.push(Gk);var b=function(x,k,j,Z){k===void 0&&(k=""),j===void 0&&(j=""),Z===void 0&&(Z="&"),n=Z,r=k,s=new RegExp("\\".concat(r,"\\b"),"g");var q=x.replace(x2,""),Q=Vk(j||k?"".concat(j," ").concat(k," { ").concat(q," }"):q);d.namespace&&(Q=e1(Q,d.namespace));var K=[];return Oc(Q,Yk(v.concat(Fk(function(L){return K.push(L)})))),K};return b.hash=m.length?m.reduce(function(x,k){return k.name||Bo(15),ls(x,k.name)},Fb).toString():"",b}var k2=new Wb,Jf=E2(),t1=Ma.createContext({shouldForwardProp:void 0,styleSheet:k2,stylis:Jf});t1.Consumer;Ma.createContext(void 0);function Iv(){return E.useContext(t1)}var C2=(function(){function a(n,r){var s=this;this.inject=function(l,c){c===void 0&&(c=Jf);var d=s.name+c.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,c(s.rules,d,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Bh(this,function(){throw Bo(12,String(s.name))})}return a.prototype.getName=function(n){return n===void 0&&(n=Jf),this.name+n.hash},a})(),T2=function(a){return a>="A"&&a<="Z"};function $v(a){for(var n="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;T2(s)?n+="-"+s.toLowerCase():n+=s}return n.startsWith("ms-")?"-"+n:n}var n1=function(a){return a==null||a===!1||a===""},a1=function(a){var n,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!n1(c)&&(Array.isArray(c)&&c.isCss||gs(c)?s.push("".concat($v(l),":"),c,";"):Ro(c)?s.push.apply(s,Nc(Nc(["".concat(l," {")],a1(c),!1),["}"],!1)):s.push("".concat($v(l),": ").concat((n=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in Zk||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function Si(a,n,r,s){if(n1(a))return[];if(Lh(a))return[".".concat(a.styledComponentId)];if(gs(a)){if(!gs(c=a)||c.prototype&&c.prototype.isReactComponent||!n)return[a];var l=a(n);return Si(l,n,r,s)}var c;return a instanceof C2?r?(a.inject(r,s),[a.getName(s)]):[a]:Ro(a)?a1(a):Array.isArray(a)?Array.prototype.concat.apply(Vc,a.map(function(d){return Si(d,n,r,s)})):[a.toString()]}function N2(a){for(var n=0;n<a.length;n+=1){var r=a[n];if(gs(r)&&!Lh(r))return!1}return!0}var O2=Pb(Hc),j2=(function(){function a(n,r,s){this.rules=n,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&N2(n),this.componentId=r,this.baseHash=ls(O2,r),this.baseStyle=s,Wb.registerId(r)}return a.prototype.generateAndInjectStyles=function(n,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=gi(l,this.staticRulesId);else{var c=Lv(Si(this.rules,n,r,s)),d=Kf(ls(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,d)){var h=s(c,".".concat(d),void 0,this.componentId);r.insertRules(this.componentId,d,h)}l=gi(l,d),this.staticRulesId=d}else{for(var m=ls(this.baseHash,s.hash),y="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")y+=b;else if(b){var x=Lv(Si(b,n,r,s));m=ls(m,x+v),y+=x}}if(y){var k=Kf(m>>>0);r.hasNameForId(this.componentId,k)||r.insertRules(this.componentId,k,s(y,".".concat(k),void 0,this.componentId)),l=gi(l,k)}}return l},a})(),r1=Ma.createContext(void 0);r1.Consumer;var Tf={};function A2(a,n,r){var s=Lh(a),l=a,c=!Cf(a),d=n.attrs,h=d===void 0?Vc:d,m=n.componentId,y=m===void 0?(function(Y,de){var be=typeof Y!="string"?"sc":_v(Y);Tf[be]=(Tf[be]||0)+1;var H="".concat(be,"-").concat(e2(Hc+be+Tf[be]));return de?"".concat(de,"-").concat(H):H})(n.displayName,n.parentComponentId):m,v=n.displayName,b=v===void 0?(function(Y){return Cf(Y)?"styled.".concat(Y):"Styled(".concat(t2(Y),")")})(a):v,x=n.displayName&&n.componentId?"".concat(_v(n.displayName),"-").concat(n.componentId):n.componentId||y,k=s&&l.attrs?l.attrs.concat(h).filter(Boolean):h,j=n.shouldForwardProp;if(s&&l.shouldForwardProp){var Z=l.shouldForwardProp;if(n.shouldForwardProp){var q=n.shouldForwardProp;j=function(Y,de){return Z(Y,de)&&q(Y,de)}}else j=Z}var Q=new j2(r,x,s?l.componentStyle:void 0);function K(Y,de){return(function(be,H,ue){var re=be.attrs,pe=be.componentStyle,Re=be.defaultProps,je=be.foldedComponentIds,Je=be.styledComponentId,rt=be.target,Ke=Ma.useContext(r1),N=Iv(),V=be.shouldForwardProp||N.shouldForwardProp,J=Kk(H,Ke,Re)||ys,ve=(function(le,me,Oe){for(var Ze,Be=Kn(Kn({},me),{className:void 0,theme:Oe}),We=0;We<le.length;We+=1){var Nt=gs(Ze=le[We])?Ze(Be):Ze;for(var Ot in Nt)Be[Ot]=Ot==="className"?gi(Be[Ot],Nt[Ot]):Ot==="style"?Kn(Kn({},Be[Ot]),Nt[Ot]):Nt[Ot]}return me.className&&(Be.className=gi(Be.className,me.className)),Be})(re,H,J),B=ve.as||rt,S={};for(var _ in ve)ve[_]===void 0||_[0]==="$"||_==="as"||_==="theme"&&ve.theme===J||(_==="forwardedAs"?S.as=ve.forwardedAs:V&&!V(_,B)||(S[_]=ve[_]));var O=(function(le,me){var Oe=Iv(),Ze=le.generateAndInjectStyles(me,Oe.styleSheet,Oe.stylis);return Ze})(pe,ve),z=gi(je,Je);return O&&(z+=" "+O),ve.className&&(z+=" "+ve.className),S[Cf(B)&&!Yb.has(B)?"class":"className"]=z,ue&&(S.ref=ue),E.createElement(B,S)})(L,Y,de)}K.displayName=b;var L=Ma.forwardRef(K);return L.attrs=k,L.componentStyle=Q,L.displayName=b,L.shouldForwardProp=j,L.foldedComponentIds=s?gi(l.foldedComponentIds,l.styledComponentId):"",L.styledComponentId=x,L.target=s?l.target:a,Object.defineProperty(L,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Y){this._foldedDefaultProps=s?(function(de){for(var be=[],H=1;H<arguments.length;H++)be[H-1]=arguments[H];for(var ue=0,re=be;ue<re.length;ue++)Qf(de,re[ue],!0);return de})({},l.defaultProps,Y):Y}}),Bh(L,function(){return".".concat(L.styledComponentId)}),c&&Qb(L,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),L}function Hv(a,n){for(var r=[a[0]],s=0,l=n.length;s<l;s+=1)r.push(n[s],a[s+1]);return r}var Vv=function(a){return Object.assign(a,{isCss:!0})};function Uh(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(gs(a)||Ro(a))return Vv(Si(Hv(Vc,Nc([a],n,!0))));var s=a;return n.length===0&&s.length===1&&typeof s[0]=="string"?Si(s):Vv(Si(Hv(s,n)))}function Wf(a,n,r){if(r===void 0&&(r=ys),!n)throw Bo(1,n);var s=function(l){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return a(n,r,Uh.apply(void 0,Nc([l],c,!1)))};return s.attrs=function(l){return Wf(a,n,Kn(Kn({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return Wf(a,n,Kn(Kn({},r),l))},s}var i1=function(a){return Wf(A2,a)},Hn=i1;Yb.forEach(function(a){Hn[a]=i1(a)});function xi(){return xi=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},xi.apply(null,arguments)}function _2(a,n){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(n.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function Ih(a,n){if(a==null)return{};var r,s,l=_2(a,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function D2(a){var n=a?.createRoot,r=new WeakMap;function s(d){var h=r.get(d);if(h)return h;var m=document.createElement("span");return d.appendChild(m),r.set(d,m),m}function l(d){var h=r.get(d);h&&(h.remove(),r.delete(d))}if(n){var c=new WeakMap;return{mount:function(h,m){var y,v=s(m),b=c.get(v);return b||(b=n(v),c.set(v,b)),b.render(h),(y=v.firstElementChild)!==null&&y!==void 0?y:v},unmount:function(h){var m=s(h),y=c.get(m);y&&(y.unmount(),c.delete(m)),l(h)}}}return{mount:function(h,m){var y=s(m);if("render"in Wg&&typeof Pr.render=="function"){var v=Pr.render(h,y);return v||y}throw new Error("ReactDOM.render is not available")},unmount:function(h){var m=s(h);if("unmountComponentAtNode"in Wg&&typeof Pr.unmountComponentAtNode=="function")Pr.unmountComponentAtNode(m);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(h)}}}function M2(a){var n=a.children,r=a.rendered;return E.useEffect(function(){r()}),n}function R2(){var a=E.useRef(!1);return E.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){Pr.flushSync(r)}):r()}}}var s1=E.createContext({start:null,end:null,path:null});function z2(a){var n=a.children,r=E.useState(null),s=qn(r,2),l=s[0],c=s[1],d=E.useState(null),h=qn(d,2),m=h[0],y=h[1],v=E.useState(null),b=qn(v,2),x=b[0],k=b[1],j="x"in a.start?a.start:l,Z="x"in a.end?a.end:m,q=R2();return E.useEffect(function(){var Q=typeof a.start=="function"&&a.start(function(L){q.apply(function(){c(L)})}),K=typeof a.end=="function"&&a.end(function(L){q.apply(function(){y(L)})});return function(){Q&&Q(),K&&K()}},[]),E.useEffect(function(){j&&Z&&a.path(j,Z).then(function(Q){q.apply(function(){k(Q)})})},[j,Z]),E.createElement(s1.Provider,{value:{start:j,end:Z,path:x}},n)}function o1(){return E.useContext(s1)}var qv,Gv,L2=Hn.svg(qv||(qv=Rn([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),B2=Hn.path(Gv||(Gv=Rn([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function l1(a){var n=o1(),r=n.path;return r?E.createElement(L2,{"data-testid":"connection"},E.createElement(B2,{styles:a.styles,d:r})):null}function U2(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=I2(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function I2(a,n){if(a){if(typeof a=="string")return Yv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yv(a,n):void 0}}function Yv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function $2(a){for(var n=new a.constructor(a.type),r=n;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=U2(s),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,h=n[d];typeof h!="function"&&Object.defineProperty(n,d,{value:a[d]})}}catch(m){l.e(m)}finally{l.f()}}return n}var H2="__reactContainer$";function V2(a){for(var n=a;n;){if(n._reactRootContainer||Object.keys(n).some(function(r){return r.startsWith(H2)}))return n;n=n.parentElement}}function Fv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Pv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Fv(Object(r),!0).forEach(function(s){Me(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Fv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function c1(a,n){return{start:function(s){var l=Pv({},n(s));function c(h){var m=Pv({},n(h)),y=m.x-l.x,v=m.y-l.y;l=m,a(y,v)}function d(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d)}}}function q2(a,n){E.useEffect(function(){var r=function(c){if(!n){var d=V2(c.target),h=E.version.startsWith("16")?document:d;h&&(c.stopPropagation(),h.dispatchEvent($2(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,n])}var Zv,G2=Hn.input(Zv||(Zv=Rn([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function eh(a){var n=E.useState(a.data.value),r=qn(n,2),s=r[0],l=r[1],c=E.useRef(null);return q2(c),E.useEffect(function(){l(a.data.value)},[a.data.value]),E.createElement(G2,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(h){var m=a.data.type==="number"?+h.target.value:h.target.value;l(m),a.data.setValue(m)},styles:a.styles})}var th="rgba(110,136,255,0.8)",u1="#ffd92c",Ha=24,yr=6,d1="#96b38a",f1=180,Y2=Object.freeze({__proto__:null,$nodecolor:th,$nodecolorselected:u1,$socketsize:Ha,$socketmargin:yr,$socketcolor:d1,$nodewidth:f1}),F2=["init","unmount"];function $h(a){var n=a.init,r=a.unmount,s=Ih(a,F2),l=E.useRef(null);return E.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),E.useEffect(function(){l.current&&n(l.current)}),E.createElement("span",xi({},s,{ref:l}))}var P2=["name","emit","payload"];function nh(a){var n=a.name,r=a.emit,s=a.payload,l=Ih(a,P2);return E.createElement($h,xi({},l,{className:n,init:function(d){r({type:"render",data:{type:"control",element:d,payload:s}})},unmount:function(d){r({type:"unmount",data:{element:d}})}}))}var Z2=["name","emit","nodeId","side","socketKey","payload"];function ah(a){var n=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,d=a.payload,h=Ih(a,Z2);return E.createElement($h,xi({},h,{className:n,init:function(y){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:y,payload:d}})},unmount:function(y){r({type:"unmount",data:{element:y}})}}))}var Xv,Kv,h1=Hn.div(Xv||(Xv=Rn([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),th,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(f1,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},th,function(a){return a.selected&&Uh(Kv||(Kv=Rn([`
        background: `,`;
        border-color: #e3c000;
    `])),u1)},Ha/2+yr,Ha/2+yr,yr,Ha,Ha+2*yr,yr,Ha/2+yr,function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function Nf(a){a.sort(function(n,r){var s,l,c=((s=n[1])===null||s===void 0?void 0:s.index)||0,d=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-d})}function p1(a){var n=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,d=c.id,h=c.label,m=c.width,y=c.height;return Nf(n),Nf(r),Nf(s),E.createElement(h1,{selected:l,width:m,height:y,styles:a.styles,"data-testid":"node"},E.createElement("div",{className:"title","data-testid":"title"},h),r.map(function(v){var b=qn(v,2),x=b[0],k=b[1];return k&&E.createElement("div",{className:"output",key:x,"data-testid":"output-".concat(x)},E.createElement("div",{className:"output-title","data-testid":"output-title"},k.label),E.createElement(ah,{name:"output-socket",side:"output",socketKey:x,nodeId:d,emit:a.emit,payload:k.socket,"data-testid":"output-socket"}))}),s.map(function(v){var b=qn(v,2),x=b[0],k=b[1];return k?E.createElement(nh,{key:x,name:"control",emit:a.emit,payload:k,"data-testid":"control-".concat(x)}):null}),n.map(function(v){var b=qn(v,2),x=b[0],k=b[1];return k&&E.createElement("div",{className:"input",key:x,"data-testid":"input-".concat(x)},E.createElement(ah,{name:"input-socket",side:"input",socketKey:x,nodeId:d,emit:a.emit,payload:k.socket,"data-testid":"input-socket"}),k&&(!k.control||!k.showControl)&&E.createElement("div",{className:"input-title","data-testid":"input-title"},k.label),k.control&&k.showControl&&E.createElement(nh,{key:x,name:"input-control",emit:a.emit,payload:k.control,"data-testid":"input-control"}))}))}var Qv,Jv,m1=Hn.div(Qv||(Qv=Rn([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),Ha/2,Ha,Ha,d1),X2=Hn.div(Jv||(Jv=Rn([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(Ha+yr*2)/2,yr,m1);function y1(a){return E.createElement(X2,null,E.createElement(m1,{title:a.data.name}))}function K2(a){var n=typeof a?.socketPositionWatcher>"u"?jk():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,d=r.control;return{attach:function(m){n.attach(m)},render:function(m,y){if(m.data.type==="node"){var v=y.parentScope(),b=s?s(m.data):p1;return b&&E.createElement(b,{data:m.data.payload,emit:function(de){return void v.emit(de)}})}else if(m.data.type==="connection"){var x=l?l(m.data):l1,k=m.data.payload,j=k.sourceOutput,Z=k.targetInput,q=k.source,Q=k.target;return x&&E.createElement(z2,{start:m.data.start||function(Y){return n.listen(q,"output",j,Y)},end:m.data.end||function(Y){return n.listen(Q,"input",Z,Y)},path:(function(){var Y=at(xe.mark(function de(be,H){var ue,re,pe,Re,je;return xe.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.next=1,y.emit({type:"connectionpath",data:{payload:k,points:[be,H]}});case 1:if(ue=Je.sent,ue){Je.next=2;break}return Je.abrupt("return","");case 2:if(re=ue.data,pe=re.path,Re=re.points,je=.3,!(!pe&&Re.length!==2)){Je.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(pe){Je.next=4;break}return Je.abrupt("return",k.isLoop?xk(Re,je,120):Sk(Re,je));case 4:return Je.abrupt("return",pe);case 5:case"end":return Je.stop()}},de)}));return function(de,be){return Y.apply(this,arguments)}})()},E.createElement(x,{data:m.data.payload}))}else if(m.data.type==="socket"){var K=c?c(m.data):y1;return K&&m.data.payload&&E.createElement(K,{data:m.data.payload})}else if(m.data.type==="control"){var L=d&&m.data.payload?d(m.data):m.data.payload instanceof Xt.InputControl?eh:null;return L&&E.createElement(L,{data:m.data.payload})}}}}var Q2=Object.freeze({__proto__:null,vars:Y2,setup:K2,Connection:l1,useConnection:o1,Control:eh,InputControl:eh,Node:p1,NodeStyles:h1,RefControl:nh,RefSocket:ah,Socket:y1});function g1(a,n){var r=E.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},n)};return E.useEffect(function(){return s},[]),[l,s]}var J2="rgba(110,136,255,0.8)",W2="rgba(130, 153, 255, 0.8)",eC="rgba(69, 103, 255, 0.8)",rc="5px",rh=120,Wv,Hh=Hn.div(Wv||(Wv=Rn([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),eC,J2,rc,rc,rc,rc,W2),e0,t0,n0,v1=Hn(Hh)(e0||(e0=Rn([`
    `,`
`])),function(a){return a.hasSubitems&&Uh(t0||(t0=Rn([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),b1=Hn.div(n0||(n0=Rn([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),rh);function w1(a){var n,r,s,l,c=E.useState(!1),d=qn(c,2),h=d[0],m=d[1],y=E.useCallback(function(){m(!1)},[m]),v=g1(y,a.delay),b=qn(v,2),x=b[0],k=b[1],j=((n=a.components)===null||n===void 0||(r=n.item)===null||r===void 0?void 0:r.call(n,a.data))||v1,Z=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||b1;return E.createElement(j,{onClick:function(Q){Q.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(Q){Q.stopPropagation()},onPointerOver:function(){k(),m(!0)},onPointerLeave:function(){x&&x()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&h&&E.createElement(Z,null,a.data.subitems.map(function(q){return E.createElement(w1,{key:q.key,data:q,delay:a.delay,hide:a.hide,components:a.components},q.label)})))}var a0,S1=Hn.input(a0||(a0=Rn([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function tC(a){var n=a.component||S1;return E.createElement(n,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var r0,x1=Hn.div(r0||(r0=Rn([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),rh,rh/2);function nC(a){var n,r,s,l,c,d,h=g1(a.onHide,a.delay),m=qn(h,2),y=m[0],v=m[1],b=E.useState(""),x=qn(b,2),k=x[0],j=x[1],Z=new RegExp(k,"i"),q=a.items.filter(function(L){return L.label.match(Z)}),Q=((n=a.components)===null||n===void 0||(r=n.main)===null||r===void 0?void 0:r.call(n))||x1,K=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||Hh;return E.createElement(Q,{onMouseOver:function(){v()},onMouseLeave:function(){y?.()},onWheel:function(Y){Y.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&E.createElement(K,null,E.createElement(tC,{value:k,onChange:j,component:(c=a.components)===null||c===void 0||(d=c.search)===null||d===void 0?void 0:d.call(c)})),q.map(function(L){return E.createElement(w1,{key:L.key,data:L,delay:a.delay,hide:a.onHide,components:a.components},L.label)}))}function aC(a){var n=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return E.createElement(nC,{items:s.data.items,delay:n,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var rC=Object.freeze({__proto__:null,setup:aC,Item:v1,Subitems:b1,Menu:x1,Search:S1,Common:Hh}),ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iC=typeof ic=="object"&&ic&&ic.Object===Object&&ic,sC=typeof self=="object"&&self&&self.Object===Object&&self;iC||sC||Function("return this")();function oC(){const a=E.useRef(!1);return E.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),E.useCallback(()=>a.current,[])}var i0={width:void 0,height:void 0};function lC(a){const{ref:n,box:r="content-box"}=a,[{width:s,height:l},c]=E.useState(i0),d=oC(),h=E.useRef({...i0}),m=E.useRef(void 0);return m.current=a.onResize,E.useEffect(()=>{if(!n.current||typeof window>"u"||!("ResizeObserver"in window))return;const y=new ResizeObserver(([v])=>{const b=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",x=s0(v,b,"inlineSize"),k=s0(v,b,"blockSize");if(h.current.width!==x||h.current.height!==k){const Z={width:x,height:k};h.current.width=x,h.current.height=k,m.current?m.current(Z):d()&&c(Z)}});return y.observe(n.current,{box:r}),()=>{y.disconnect()}},[r,n,d]),{width:s,height:l}}function s0(a,n,r){return a[n]?Array.isArray(a[n])?a[n][0][r]:a[n][r]:n==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function Va(a){return"".concat(a,"px")}var o0,cC=Hn.div(o0||(o0=Rn([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function uC(a){return E.createElement(cC,{style:{left:Va(a.left),top:Va(a.top),width:Va(a.width),height:Va(a.height)},"data-testid":"minimap-node"})}var l0,dC=Hn.div(l0||(l0=Rn([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function fC(a){var n=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=c1(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return E.createElement(dC,{onPointerDown:s.start,style:{left:Va(n(a.left)),top:Va(n(a.top)),width:Va(n(a.width)),height:Va(n(a.height))},"data-testid":"minimap-viewport"})}var c0,hC=Hn.div(c0||(c0=Rn([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function pC(a){var n,r=E.useRef(null),s=lC({ref:r}),l=s.width,c=l===void 0?0:l,d=((n=r.current)===null||n===void 0?void 0:n.clientWidth)||c,h=E.useCallback(function(m){return m*d},[d]);return E.createElement(hC,{size:a.size,style:{width:Va(a.size*a.ratio),height:Va(a.size)},onPointerDown:function(y){y.stopPropagation(),y.preventDefault()},onDoubleClick:function(y){if(y.stopPropagation(),y.preventDefault(),!!r.current){var v=r.current.getBoundingClientRect(),b=(y.clientX-v.left)/(a.size*a.ratio),x=(y.clientY-v.top)/(a.size*a.ratio);a.point(b,x)}},ref:r,"data-testid":"minimap"},d?a.nodes.map(function(m,y){return E.createElement(uC,{key:y,left:h(m.left),top:h(m.top),width:h(m.width),height:h(m.height)})}):null,E.createElement(fC,xi({},a.viewport,{start:a.start,containerWidth:d,translate:a.translate})))}function mC(a){return{render:function(r){if(r.data.type==="minimap")return E.createElement(pC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var yC=Object.freeze({__proto__:null,setup:mC}),u0,jo=20,gC=Hn.div(u0||(u0=Rn([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),jo,jo,function(a){return a.selected?"#ffd92c":"steelblue"},jo);function vC(a){var n=c1(function(c,d){a.translate(c,d)},a.pointer),r=a.position,s=r.x,l=r.y;return E.createElement(gC,{onPointerDown:function(d){d.stopPropagation(),d.preventDefault(),n.start(d),a.pointerdown()},onContextMenu:function(d){d.stopPropagation(),d.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-jo/2,"px"),left:"".concat(s-jo/2,"px")},"data-testid":"pin"})}function bC(a){function n(r,s){return E.createElement(E.Fragment,null,r.pins.map(function(l){return E.createElement(vC,xi({},l,{key:l.id,contextMenu:function(){var d;a==null||(d=a.contextMenu)===null||d===void 0||d.call(a,l.id)},translate:function(d,h){var m;a==null||(m=a.translate)===null||m===void 0||m.call(a,l.id,d,h)},pointerdown:function(){var d;a==null||(d=a.pointerdown)===null||d===void 0||d.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,d=l.parentScope(Lo);if(c.type==="reroute-pins")return n(c.data,function(){return d.area.pointer})}}}var wC=Object.freeze({__proto__:null,setup:bC}),Of=Object.freeze({__proto__:null,classic:Q2,contextMenu:rC,minimap:yC,reroute:wC});function SC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=xC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function xC(a,n){if(a){if(typeof a=="string")return d0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d0(a,n):void 0}}function d0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function f0(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function sc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?f0(Object(r),!0).forEach(function(s){Me(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):f0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function EC(a,n,r){return n=Ut(n),Fa(a,E1()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function E1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E1=function(){return!!a})()}function kC(a,n,r,s){var l=Mo(Ut(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var CC=(function(a){function n(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l[0];return ft(this,n),r=EC(this,n,["react-render"]),Me(r,"presets",[]),r.renderer=D2({createRoot:d?.createRoot}),r.addPipe(function(h){if(!h||Mn(h)!=="object"||!("type"in h))return h;if(h.type==="unmount")r.unmount(h.data.element);else if(h.type==="render"){if("filled"in h.data&&h.data.filled)return h;if(r.mount(h.data.element,h))return sc(sc({},h),{},{data:sc(sc({},h.data),{},{filled:!0})})}return h}),r}return Qn(n,a),ht(n,[{key:"setParent",value:function(s){var l=this;kC(n,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),d=SC(this.presets),h;try{for(d.s();!(h=d.n()).done;){var m=h.value,y=m.render(l,this);if(y){var v=E.createElement(M2,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},y);return this.renderer.mount(v,s),!0}}}catch(b){d.e(b)}finally{d.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(bs);function TC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function k1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k1=function(){return!!a})()}function NC(a,n,r){if(k1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,n);var l=new(a.bind.apply(a,s));return r&&Do(l,r.prototype),l}function ih(a){var n=typeof Map=="function"?new Map:void 0;return ih=function(s){if(s===null||!TC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(s))return n.get(s);n.set(s,l)}function l(){return NC(s,arguments,Ut(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Do(l,s)},ih(a)}function OC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=jC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function jC(a,n){if(a){if(typeof a=="string")return h0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h0(a,n):void 0}}function h0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}var AC=(function(){function a(n){ft(this,a),Me(this,"setups",new Map),this.editor=n}return ht(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var n=at(xe.mark(function s(l){var c=this,d,h,m,y,v,b,x,k,j,Z,q,Q;return xe.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(d=this.setups.get(l),d){L.next=3;break}throw new Error("node is not initialized");case 3:return h=d.inputs(),m=this.editor.getConnections().filter(function(Y){return Y.target===l&&h.includes(Y.targetInput)}),y={},L.next=8,Promise.all(m.map((function(){var Y=at(xe.mark(function de(be){return xe.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.t0=be,ue.next=3,c.fetch(be.source);case 3:return ue.t1=ue.sent,ue.abrupt("return",{c:ue.t0,sourceData:ue.t1});case 5:case"end":return ue.stop()}},de)}));return function(de){return Y.apply(this,arguments)}})()));case 8:v=L.sent,b=OC(v);try{for(b.s();!(x=b.n()).done;)k=x.value,j=k.c,Z=k.sourceData,q=y[j.targetInput]?y[j.targetInput]:[],Q=y,Q[j.targetInput]=[].concat(ws(q),[Z[j.sourceOutput]])}catch(Y){b.e(Y)}finally{b.f()}return L.abrupt("return",y);case 12:case"end":return L.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var n=at(xe.mark(function s(l){var c=this,d,h,m,y;return xe.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=this.setups.get(l),d){b.next=3;break}throw new Error("node is not initialized");case 3:return h=d.outputs(),b.next=6,d.data(function(){return c.fetchInputs(l)});case 6:if(m=b.sent,y=Object.keys(m),h.every(function(x){return y.includes(x)})){b.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(h.join('", "'),'". Got "').concat(y.join('", "'),'"'));case 10:return b.abrupt("return",m);case 11:case"end":return b.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()}])})(),_C=(function(){function a(n){ft(this,a),Me(this,"cache",new Map),this.onDelete=n}return ht(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function DC(a,n,r){return n=Ut(n),Fa(a,C1()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function C1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C1=function(){return!!a})()}var p0=(function(a){function n(){return ft(this,n),DC(this,n,["cancelled"])}return Qn(n,a),ht(n)})(ih(Error));function MC(){var a=!1;function n(m){if(a)throw new p0;return m}for(var r,s=new Promise(function(m,y){r=y,m()}),l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=c.reduce(function(m,y){var v=m.then(y).then(n);return v},s);return h.cancel=function(){a||r(new p0),a=!0},h}function RC(a,n,r){return n=Ut(n),Fa(a,T1()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function T1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T1=function(){return!!a})()}function zC(a,n,r,s){var l=Mo(Ut(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var LC=(function(a){function n(r){var s;return ft(this,n),s=RC(this,n,["dataflow-engine"]),Me(s,"cache",new _C(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return Qn(n,a),ht(n,[{key:"setParent",value:function(s){zC(n,"setParent",this)([s]),this.editor=this.parentScope(Qr),this.dataflow=new AC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var d=at(xe.mark(function m(y){var v,b;return xe.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(v=l.cache.get(s.id),!v){k.next=3;break}return k.abrupt("return",v);case 3:return b=MC(function(){return y()},function(j){return s.data(j)}),l.cache.add(s.id,b),k.abrupt("return",b);case 6:case"end":return k.stop()}},m)}));function h(m){return d.apply(this,arguments)}return h})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var d=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(h){return h.source===s&&d.includes(h.sourceOutput)}).forEach(function(h){l.reset(h.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=at(xe.mark(function l(c){var d;return xe.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=Mn(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetchInputs(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=at(xe.mark(function l(c){var d;return xe.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=Mn(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetch(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(bs);const BC=!1,Vh=(...a)=>BC,m0=Xt.Socket.canConnect;Xt.Socket.canConnect=function(a,n){return Vh(`[Socket Check] ${a.name} <-> ${n.name}`),m0&&m0(a,n)||a.name==="any"||n.name==="any"?!0:a.name===n.name};Xt.Socket.prototype.canConnectTo=function(a){return Vh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Xt.Socket.canConnect(this,a)};const N1={boolean:new Xt.Socket("boolean"),number:new Xt.Socket("number"),object:new Xt.Socket("object"),lightInfo:new Xt.Socket("light_info"),any:new Xt.Socket("any")};Object.values(N1).forEach(a=>{a.canConnectTo=function(n){return Vh(`[Socket Instance Direct] ${this.name} -> ${n.name}`),this.name===n.name||this.name==="any"||n.name==="any"}});let bo=null;function qc(){if(bo!==null)return bo;const n=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return n?bo=n[1]:bo="",bo}function Sn(a){const n=qc(),r=a.startsWith("/")?a:"/"+a;return n+r}qc();const vi="t2app-pin",_c="t2app-pin-remember",O1=(a,n)=>{try{return a.getItem(n)}catch{return null}},oc=(a,n,r)=>{try{return a.setItem(n,r),!0}catch{return!1}},Ao=(a,n)=>{try{return a.removeItem(n),!0}catch{return!1}},Dc=()=>O1(localStorage,_c)==="true",us=()=>{const n=Dc()?localStorage:sessionStorage;return(O1(n,vi)||"").trim()||null},j1=()=>{Ao(sessionStorage,vi),Ao(localStorage,vi),Ao(localStorage,_c),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},y0=(a,{remember:n}={})=>{const r=(a||"").toString().trim(),s=typeof n=="boolean"?n:Dc();if(!r){j1(),typeof n=="boolean"&&oc(localStorage,_c,n?"true":"false");return}oc(localStorage,_c,s?"true":"false"),s?(oc(localStorage,vi,r),Ao(sessionStorage,vi)):(oc(sessionStorage,vi,r),Ao(localStorage,vi)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},os=async(a,n={})=>{const r=typeof a=="string"?Sn(a):a;return fetch(r,n)},ln=async(a,n={})=>{const r=us(),s=typeof a=="string"?Sn(a):a;if(!r)return fetch(s,n);const l=new Headers(n.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...n,headers:l})},g0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function UC(){const[a,n]=E.useState([]),[r,s]=E.useState(!1),[l,c]=E.useState(null),[d,h]=E.useState(null),[m,y]=E.useState(5e3),[v,b]=E.useState(null),x=E.useCallback(async()=>{s(!0),c(null);try{const Q=await os("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:m})});if(!Q.ok){const L=await Q.json();throw new Error(L.error||`Scan failed (${Q.status})`)}const K=await Q.json();n(K.devices||[]),h(new Date)}catch(Q){console.error("[Discovery] Scan error:",Q),c(Q.message)}finally{s(!1)}},[m]),k=Q=>g0[Q]||g0.generic,j=Q=>Q?new Date(Q).toLocaleTimeString():"",q=(Q=>{const K={};for(const L of Q){const Y=L.type||"generic";K[Y]||(K[Y]=[]),K[Y].push(L)}return K})(a);return p.jsxs("div",{className:"discovery-panel",children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),p.jsxs("select",{value:m,onChange:Q=>y(Number(Q.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[p.jsx("option",{value:3e3,children:"3 seconds"}),p.jsx("option",{value:5e3,children:"5 seconds"}),p.jsx("option",{value:1e4,children:"10 seconds"}),p.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),p.jsx("button",{onClick:x,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):p.jsx(p.Fragment,{children:" Scan Network"})})]}),l&&p.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),d&&p.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",d.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&d&&p.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[p.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),p.jsx("div",{children:"No devices found on your network."}),p.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(q).map(([Q,K])=>{const L=k(Q);return p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[p.jsx("span",{style:{fontSize:"16px"},children:L.icon}),p.jsx("span",{style:{color:L.color,fontSize:"13px",fontWeight:500},children:L.label}),p.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:K.length})]}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:K.map(Y=>p.jsxs("div",{style:{background:v===Y.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>b(v===Y.id?null:Y.id),children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:Y.name}),p.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[Y.ip,":",Y.port]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Y.configured?p.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):p.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),p.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:v===Y.id?"":""})]})]}),v===Y.id&&p.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[p.jsx("span",{children:"Host:"}),p.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:Y.host||"N/A"}),p.jsx("span",{children:"Source:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:Y.source==="mdns"?"mDNS/Bonjour":Y.source==="udp"?"UDP Broadcast":Y.source}),p.jsx("span",{children:"Discovered:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:j(Y.discoveredAt)}),Y.capabilities&&Y.capabilities.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Capabilities:"}),p.jsx("span",{style:{color:"#5fb3b3"},children:Y.capabilities.join(", ")})]}),Y.model&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Model:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:Y.model})]})]}),p.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[p.jsx("button",{onClick:de=>{de.stopPropagation(),window.open(`http://${Y.ip}:${Y.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),p.jsx("button",{onClick:de=>{de.stopPropagation(),navigator.clipboard.writeText(Y.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},Y.id))})]},Q)}),p.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const lc=[{key:"primary",label:"Primary Accent Color",type:"color",default:"#5fb3b3"},{key:"background",label:"Node Background",type:"color",default:"#1e2428"},{key:"surface",label:"Node Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text Color",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"},{key:"success",label:"Success Color",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning Color",type:"color",default:"#d4a054"},{key:"error",label:"Error Color",type:"color",default:"#c75f5f"},{key:"borderOpacity",label:"Border Opacity (%)",type:"range",min:0,max:100,default:25}],IC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",testable:"ambient",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Forecast Panel",icon:"",description:"Configure HA sensors to display live weather data on the forecast panel (optional)",settings:[{key:"FORECAST_TEMP_SENSOR",label:"Temperature Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for current temperature"},{key:"FORECAST_WIND_SENSOR",label:"Wind Speed Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind speed"},{key:"FORECAST_WIND_DIR_SENSOR",label:"Wind Direction Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind direction"},{key:"FORECAST_RAIN_SENSOR",label:"Rain Rate Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for rain rate"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],v0=a=>{try{const n=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},b0=a=>{try{const n=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function $C({isOpen:a,onClose:n}){const[r,s]=E.useState({}),[l,c]=E.useState(!0),[d,h]=E.useState(!1),[m,y]=E.useState(null),[v,b]=E.useState(null),[x,k]=E.useState({}),[j,Z]=E.useState({}),[q,Q]=E.useState({}),[K,L]=E.useState({}),[Y,de]=E.useState([]),[be,H]=E.useState(!1),ue=E.useRef(!1),re=E.useRef(null),[pe,Re]=E.useState(""),[je,Je]=E.useState(()=>Dc()),[rt,Ke]=E.useState(()=>!!us()),[N,V]=E.useState(!1),[J,ve]=E.useState(()=>{try{const R=localStorage.getItem("t2theme-overrides"),U=R?JSON.parse(R):{},ce={};return lc.forEach(he=>{ce[he.key]=he.default}),{...ce,...U}}catch{const R={};return lc.forEach(U=>{R[U.key]=U.default}),R}}),[B,S]=E.useState(!1),_={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[O,z]=E.useState(()=>{try{const R=localStorage.getItem("t2category-overrides"),U=R?JSON.parse(R):{},ce={};for(const[he,Ue]of Object.entries(_))ce[he]={...Ue,...U[he]||{}};return ce}catch{return{..._}}}),[le,me]=E.useState(!1),Oe={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},Ze={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[Be,We]=E.useState(()=>{try{const R=localStorage.getItem("t2socket-colors"),U=R?JSON.parse(R):{},ce={};for(const[he,Ue]of Object.entries(Oe))ce[he]={...Ue,...U[he]||{}};return ce}catch{return{...Oe}}}),[Nt,Ot]=E.useState(!1),[zn,vn]=E.useState(!1),[cn,Nn]=E.useState(null),[Qe,F]=E.useState(!1),[ie,ee]=E.useState(!1);E.useEffect(()=>{a?(Se(),Z({Security:!0,"Home Assistant":!0}),Q({}),Je(Dc()),Ke(!!us()),Re(""),ue.current||(ue.current=!0,(async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),H(!0);try{const R=await ln("/api/lights/ha/");if(console.log("[SettingsModal] Response status:",R.status),!R.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",R.status),H(!1);return}const U=await R.json();if(console.log("[SettingsModal] HA devices received:",U?.length),!U||!Array.isArray(U)){console.warn("[SettingsModal] No devices array received"),H(!1);return}const ce=U.filter(he=>(he.id||he.entity_id||"").includes("sensor.")).map(he=>({id:(he.id||he.entity_id||"").replace("ha_",""),name:he.name||he.friendly_name||he.id||he.entity_id})).sort((he,Ue)=>he.name.localeCompare(Ue.name));console.log("[SettingsModal] Filtered sensors:",ce.length),de(ce),H(!1)}catch(R){console.warn("[SettingsModal] Error fetching HA sensors:",R),H(!1)}})())):ue.current=!1},[a]);const Ae=async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),H(!0);try{const R=await ln("/api/lights/ha/");if(!R.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",R.status),H(!1);return}const U=await R.json();if(console.log("[SettingsModal] HA devices received:",U?.length),!U||!Array.isArray(U)){console.warn("[SettingsModal] No devices array received"),H(!1);return}const ce=U.filter(he=>(he.id||he.entity_id||"").includes("sensor.")).map(he=>({id:(he.id||he.entity_id||"").replace("ha_",""),name:he.name||he.friendly_name||he.id||he.entity_id})).sort((he,Ue)=>he.name.localeCompare(Ue.name));console.log("[SettingsModal] Filtered sensors:",ce.length),de(ce),H(!1)}catch(R){console.warn("[SettingsModal] Error fetching HA sensors:",R),H(!1)}},Se=async()=>{c(!0),y(null);try{const R=await ln("/api/settings");if(!R.ok)throw new Error("Failed to fetch settings");const ce=(await R.json()).settings||{};s(ce);try{const he=await ln("/api/config");if(he.ok){const Ue=await he.json();if(Ue.success){F(Ue.isAddon||!1),ee(!0);const xn=!ce.LOCATION_CITY,zt=!ce.LOCATION_LATITUDE,Ve=!ce.LOCATION_LONGITUDE,Lt=!ce.LOCATION_TIMEZONE;(xn||zt||Ve||Lt)&&(s(st=>({...st,...xn&&Ue.locationName?{LOCATION_CITY:Ue.locationName}:{},...zt&&Ue.latitude?{LOCATION_LATITUDE:String(Ue.latitude)}:{},...Ve&&Ue.longitude?{LOCATION_LONGITUDE:String(Ue.longitude)}:{},...Lt&&Ue.timezone?{LOCATION_TIMEZONE:Ue.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(he){console.log("[Settings] Could not fetch HA config for location auto-fill:",he.message)}}catch(R){y("Failed to load settings: "+R.message)}finally{c(!1)}},se=async()=>{h(!0),y(null),b(null);try{const R=await ln("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!R.ok){const U=await R.json();throw new Error(U.error||"Failed to save settings")}b("Settings saved! Some changes may require a server restart."),setTimeout(()=>b(null),5e3)}catch(R){y("Failed to save: "+R.message)}finally{h(!1)}},C=(R,U)=>{s(ce=>({...ce,[R]:U}))},D=async()=>{const R=r.LOCATION_CITY;if(!R||R.trim().length<2){Nn("Please enter a city name first");return}vn(!0),Nn(null);try{const U=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(R)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!U.ok)throw new Error("Geocoding service unavailable");const ce=await U.json();if(ce.length===0){Nn(`Could not find "${R}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const he=ce[0],Ue=parseFloat(he.lat).toFixed(4),xn=parseFloat(he.lon).toFixed(4),zt=he.address?[he.address.city||he.address.town||he.address.village||he.name,he.address.state,he.address.country].filter(Boolean).join(", "):he.display_name.split(",").slice(0,3).join(",");let Ve="UTC";const Lt=he.address?.state?.toLowerCase()||"",st=he.address?.country?.toLowerCase()||"";if(st.includes("portugal"))Ve="Europe/Lisbon";else if(st.includes("spain"))Ve="Europe/Madrid";else if(st.includes("france"))Ve="Europe/Paris";else if(st.includes("germany"))Ve="Europe/Berlin";else if(st.includes("italy"))Ve="Europe/Rome";else if(st.includes("united kingdom")||st.includes("ireland"))Ve="Europe/London";else if(st.includes("netherlands"))Ve="Europe/Amsterdam";else if(st.includes("belgium"))Ve="Europe/Brussels";else if(st.includes("australia"))Ve="Australia/Sydney";else if(st.includes("japan"))Ve="Asia/Tokyo";else if(st.includes("china"))Ve="Asia/Shanghai";else if(st.includes("india"))Ve="Asia/Kolkata";else if(st.includes("brazil"))Ve="America/Sao_Paulo";else if(st.includes("canada"))Lt.includes("british columbia")?Ve="America/Vancouver":Lt.includes("alberta")?Ve="America/Edmonton":Lt.includes("saskatchewan")?Ve="America/Regina":Lt.includes("manitoba")?Ve="America/Winnipeg":Lt.includes("ontario")?Ve="America/Toronto":Lt.includes("quebec")?Ve="America/Montreal":Ve="America/Toronto";else if(st.includes("united states")||st.includes("usa"))Lt.includes("hawaii")?Ve="Pacific/Honolulu":Lt.includes("alaska")?Ve="America/Anchorage":["california","nevada","oregon","washington"].some(kt=>Lt.includes(kt))?Ve="America/Los_Angeles":["arizona"].some(kt=>Lt.includes(kt))?Ve="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(kt=>Lt.includes(kt))?Ve="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(kt=>Lt.includes(kt))?Ve="America/Chicago":Ve="America/New_York";else{const kt=parseFloat(xn);kt>=-125&&kt<-115?Ve="America/Los_Angeles":kt>=-115&&kt<-102?Ve="America/Denver":kt>=-102&&kt<-87?Ve="America/Chicago":kt>=-87&&kt<-67?Ve="America/New_York":kt>=-10&&kt<3?Ve="Europe/London":kt>=3&&kt<15?Ve="Europe/Paris":kt>=15&&kt<30&&(Ve="Europe/Berlin")}s(kt=>({...kt,LOCATION_CITY:zt,LOCATION_LATITUDE:Ue,LOCATION_LONGITUDE:xn,LOCATION_TIMEZONE:Ve})),b(`Found: ${zt} (${Ue}, ${xn})`),setTimeout(()=>b(null),5e3)}catch(U){Nn("Search failed: "+U.message)}finally{vn(!1)}},oe=(R,U)=>{ve(ce=>({...ce,[R]:U})),S(!0)},fe=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(J)),b("Theme saved! Refresh the page to apply changes."),S(!1),setTimeout(()=>b(null),5e3)}catch(R){y("Failed to save theme: "+R.message)}},we=()=>{const R={};lc.forEach(U=>{R[U.key]=U.default}),ve(R),localStorage.removeItem("t2theme-overrides"),b("Theme reset to defaults! Refresh the page to apply."),S(!1),setTimeout(()=>b(null),5e3)},Ce=(R,U,ce)=>{z(he=>({...he,[R]:{...he[R],[U]:ce}})),me(!0)},$e=R=>{const U=parseInt(R.slice(1,3),16),ce=parseInt(R.slice(3,5),16),he=parseInt(R.slice(5,7),16);return`${U}, ${ce}, ${he}`},Fe={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},bt=R=>{const U=document.documentElement;for(const[ce,he]of Object.entries(R)){const Ue=Fe[ce];Ue&&(U.style.setProperty(`--node-${Ue}-color`,he.accent),U.style.setProperty(`--node-${Ue}-color-rgb`,$e(he.accent)),he.background&&U.style.setProperty(`--node-${Ue}-bg`,he.background))}},Le=()=>{try{const R={};for(const[U,ce]of Object.entries(O)){const he=_[U],Ue={};ce.accent!==he.accent&&(Ue.accent=ce.accent),ce.background!==he.background&&(Ue.background=ce.background),Object.keys(Ue).length>0&&(R[U]=Ue)}Object.keys(R).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(R)):localStorage.removeItem("t2category-overrides"),bt(O),b("Category colors applied!"),me(!1),setTimeout(()=>b(null),3e3)}catch(R){y("Failed to save category colors: "+R.message)}},He=()=>{z({..._}),localStorage.removeItem("t2category-overrides"),bt(_),b("Category colors reset to defaults!"),me(!1),setTimeout(()=>b(null),3e3)},ze=(R,U)=>{We(ce=>({...ce,[R]:{...ce[R],color:U}})),Ot(!0)},it=(R,U=20)=>{const ce=parseInt(R.slice(1),16),he=Math.max(0,(ce>>16)-Math.round(255*U/100)),Ue=Math.max(0,(ce>>8&255)-Math.round(255*U/100)),xn=Math.max(0,(ce&255)-Math.round(255*U/100));return`#${(1<<24|he<<16|Ue<<8|xn).toString(16).slice(1)}`},gt=(R,U=20)=>{const ce=parseInt(R.slice(1),16),he=Math.min(255,(ce>>16)+Math.round(255*U/100)),Ue=Math.min(255,(ce>>8&255)+Math.round(255*U/100)),xn=Math.min(255,(ce&255)+Math.round(255*U/100));return`#${(1<<24|he<<16|Ue<<8|xn).toString(16).slice(1)}`},It=R=>{const U=document.documentElement;for(const[ce,he]of Object.entries(R)){const Ue=Ze[ce];Ue&&(U.style.setProperty(`--socket-${Ue}-color`,he.color),U.style.setProperty(`--socket-${Ue}-dark`,it(he.color,15)),U.style.setProperty(`--socket-${Ue}-border`,gt(he.color,20)),U.style.setProperty(`--socket-${Ue}-rgb`,$e(he.color)))}},tn=()=>{try{const R={};for(const[U,ce]of Object.entries(Be)){const he=Oe[U];ce.color!==he.color&&(R[U]={color:ce.color})}Object.keys(R).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(R)):localStorage.removeItem("t2socket-colors"),It(Be),b("Socket colors applied!"),Ot(!1),setTimeout(()=>b(null),3e3)}catch(R){y("Failed to save socket colors: "+R.message)}},ot=()=>{We({...Oe}),localStorage.removeItem("t2socket-colors"),It(Oe),b("Socket colors reset to defaults!"),Ot(!1),setTimeout(()=>b(null),3e3)},vt=R=>{Z(U=>({...U,[R]:!U[R]})),R==="Forecast Panel"&&!j[R]&&Y.length===0&&Ae()},nn=R=>{k(U=>({...U,[R]:!U[R]}))},an=async R=>{L(U=>({...U,[R]:!0})),Q(U=>({...U,[R]:null}));try{const ce=await(await ln("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:R,settings:r})})).json();Q(he=>({...he,[R]:{success:ce.success,message:ce.message||(ce.success?"Connection successful!":"Connection failed"),details:ce.details}}))}catch(U){Q(ce=>({...ce,[R]:{success:!1,message:"Test failed: "+U.message}}))}finally{L(U=>({...U,[R]:!1}))}},qt=()=>{const R={version:"1.0",timestamp:new Date().toISOString(),settings:r},U=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),ce=URL.createObjectURL(U),he=document.createElement("a");he.href=ce,he.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(ce),b("Settings exported successfully!"),setTimeout(()=>b(null),3e3)},Kt=R=>{const U=R.target.files?.[0];if(!U)return;const ce=new FileReader;ce.onload=he=>{try{const Ue=JSON.parse(he.target.result);if(!Ue.settings||typeof Ue.settings!="object")throw new Error("Invalid backup file format");s(xn=>({...xn,...Ue.settings})),b(`Imported ${Object.keys(Ue.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>b(null),5e3)}catch(Ue){y("Failed to import backup: "+Ue.message)}},ce.readAsText(U),R.target.value=""};return a?Th.createPortal(p.jsx("div",{className:"settings-modal-overlay",onClick:n,children:p.jsxs("div",{className:"settings-modal",onClick:R=>R.stopPropagation(),children:[p.jsxs("div",{className:"settings-header",children:[p.jsx("h2",{children:" Settings & API Keys"}),p.jsx("button",{className:"settings-close-btn",onClick:n,children:""})]}),p.jsx("div",{className:"settings-content",children:l?p.jsx("div",{className:"settings-loading",children:"Loading settings..."}):p.jsxs(p.Fragment,{children:[m&&p.jsx("div",{className:"settings-error",children:m}),v&&p.jsx("div",{className:"settings-success",children:v}),p.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>vt("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[p.jsxs("span",{children:[j.Security?"":""," Security (This Device)"]}),rt&&p.jsxs("span",{style:{fontSize:"10px",color:je?"#00c896":"#ffaa00"},children:[" ",je?"REMEMBERED":"SESSION"]})]}),j.Security&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),p.jsxs("div",{className:"settings-field",children:[p.jsxs("label",{className:"settings-label",children:["App PIN",p.jsx("button",{className:"settings-show-btn",onClick:()=>V(R=>!R),type:"button",children:N?" Hide":" Show"})]}),p.jsx("input",{type:N?"text":"password",className:"settings-input",value:pe,onChange:R=>Re(R.target.value),placeholder:rt?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[p.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[p.jsx("input",{type:"checkbox",checked:je,onChange:R=>{const U=R.target.checked;Je(U);const ce=us();ce&&y0(ce,{remember:U})}}),"Remember PIN on this device"]}),p.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[p.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const R=pe.trim();R&&(y0(R,{remember:je}),Ke(!0),Re(""),(async()=>{try{const U=await ln("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:R}})});if(!U.ok){const ce=await U.text();throw new Error(ce||`HTTP ${U.status}`)}b("PIN saved (server + this device)."),setTimeout(()=>b(null),3e3)}catch{b("PIN saved on this device. Server PIN update failed."),setTimeout(()=>b(null),4e3)}finally{Se()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!pe.trim(),children:" Save PIN"}),p.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{j1(),Ke(!1),Re(""),Je(!1),b("PIN cleared."),setTimeout(()=>b(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!rt,children:"Clear"})]})]}),p.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:rt?`PIN is saved (${je?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),p.jsxs("div",{className:"settings-backup-section",children:[p.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),p.jsxs("div",{className:"settings-backup-buttons",children:[p.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:qt,children:" Export Backup"}),p.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>re.current?.click(),children:" Import Backup"}),p.jsx("input",{ref:re,type:"file",accept:".json",style:{display:"none"},onChange:Kt})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>vt("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[p.jsxs("span",{children:[j.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&p.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),j.Performance&&p.jsxs("div",{className:"settings-category-content",children:[p.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",p.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),p.jsx("br",{}),p.jsx("br",{}),"Performance Mode disables:",p.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[p.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),p.jsx("li",{children:"Complex glow shadows"}),p.jsx("li",{children:"Infinite pulse/glow animations"}),p.jsx("li",{children:"Transition effects on nodes"})]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),p.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),p.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[p.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:R=>{window.setPerformanceMode?.(R.target.checked),Z(U=>({...U}))},style:{opacity:0,width:0,height:0}}),p.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:p.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),p.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsx("div",{className:"settings-category-header",onClick:()=>vt("Discovery"),children:p.jsxs("span",{children:[j.Discovery?"":""," Network Device Discovery"]})}),j.Discovery&&p.jsx("div",{className:"settings-category-content",children:p.jsx(UC,{})})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>vt("Theme"),children:[p.jsxs("span",{children:[j.Theme?"":""," Node Theme Settings"]}),B&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),j.Theme&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Theme settings are stored locally. Refresh the page after saving to apply changes."}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:lc.map(R=>p.jsxs("div",{className:"settings-field",style:{marginBottom:"8px"},children:[p.jsx("label",{className:"settings-label",style:{fontSize:"10px"},children:R.label}),R.type==="color"?p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("input",{type:"color",value:J[R.key]||R.default,onChange:U=>oe(R.key,U.target.value),style:{width:"40px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("input",{type:"text",value:J[R.key]||R.default,onChange:U=>oe(R.key,U.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"11px"}})]}):R.type==="range"?p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("input",{type:"range",min:R.min,max:R.max,value:J[R.key]||R.default,onChange:U=>oe(R.key,parseInt(U.target.value)),style:{flex:1}}),p.jsxs("span",{style:{minWidth:"35px",textAlign:"right",color:"#c5cdd3",fontSize:"12px"},children:[J[R.key]||R.default,"%"]})]}):null]},R.key))}),p.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:J.background,borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(J.borderOpacity||25)/100})`},children:[p.jsx("div",{style:{fontSize:"10px",color:J.textMuted,marginBottom:"8px"},children:"PREVIEW"}),p.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[p.jsx("div",{style:{padding:"8px 12px",background:J.surface,color:J.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),p.jsx("div",{style:{padding:"8px 12px",background:J.surfaceLight,color:J.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),p.jsx("span",{style:{color:J.primary},children:"Primary"}),p.jsx("span",{style:{color:J.success},children:"Success"}),p.jsx("span",{style:{color:J.warning},children:"Warning"}),p.jsx("span",{style:{color:J.error},children:"Error"})]})]}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:we,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:fe,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Theme"})]})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>vt("CategoryColors"),children:[p.jsxs("span",{children:[j.CategoryColors?"":""," Category Accent Colors"]}),le&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),j.CategoryColors&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(O).map(([R,U])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:U.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${U.accent}55`},children:[p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[p.jsx("input",{type:"color",value:U.accent,onChange:ce=>Ce(R,"accent",ce.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[p.jsx("input",{type:"color",value:U.background||"#0a0f14",onChange:ce=>Ce(R,"background",ce.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),p.jsx("div",{style:{flex:1,minWidth:0},children:p.jsxs("div",{style:{fontSize:"11px",color:U.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[U.icon," ",R]})})]},R))}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:He,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:Le,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>vt("SocketColors"),children:[p.jsxs("span",{children:[j.SocketColors?"":""," Socket Colors"]}),Nt&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),j.SocketColors&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),p.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[p.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[p.jsx("span",{children:""})," Preview Node"]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(Be).slice(0,3).map(([R,U])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${U.color}, ${v0(U.color)})`,border:`2px solid ${b0(U.color)}`,boxShadow:`0 0 8px ${U.color}80`}}),p.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:R})]},R))}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(Be).slice(3).map(([R,U])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:R}),p.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${U.color}, ${v0(U.color)})`,border:`2px solid ${b0(U.color)}`,boxShadow:`0 0 8px ${U.color}80`}})]},R))})]})]}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(Be).map(([R,U])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${U.color}55`},children:[p.jsx("input",{type:"color",value:U.color,onChange:ce=>ze(R,ce.target.value),title:`${R} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),p.jsxs("div",{style:{flex:1,minWidth:0},children:[p.jsxs("div",{style:{fontSize:"12px",color:U.color,fontWeight:"600"},children:[U.icon," ",R]}),p.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:U.description})]})]},R))}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:ot,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:tn,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),IC.map(R=>p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>vt(R.category),children:[p.jsxs("span",{children:[j[R.category]?"":"",R.icon," ",R.category]}),R.testable&&j[R.category]&&p.jsx("button",{className:`settings-test-btn ${q[R.testable]?.success?"success":q[R.testable]?.success===!1?"error":""}`,onClick:U=>{U.stopPropagation(),an(R.testable)},disabled:K[R.testable],children:K[R.testable]?" Testing...":" Test Connection"})]}),j[R.category]&&p.jsxs("div",{className:"settings-category-content",children:[q[R.testable]&&p.jsxs("div",{className:`settings-test-result ${q[R.testable].success?"success":"error"}`,children:[q[R.testable].success?"":""," ",q[R.testable].message,q[R.testable].details&&p.jsx("div",{className:"settings-test-details",children:q[R.testable].details})]}),R.category==="Location"&&p.jsxs("div",{className:"settings-location-search",children:[ie&&Qe&&p.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),p.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),p.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:U=>C("LOCATION_CITY",U.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:U=>{U.key==="Enter"&&D()}}),p.jsx("button",{className:"settings-test-btn",onClick:D,disabled:zn,style:{whiteSpace:"nowrap"},children:zn?" Searching...":" Search City"})]}),cn&&p.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",cn]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[p.jsxs("div",{className:"settings-field",children:[p.jsx("label",{className:"settings-label",children:"Latitude"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:U=>C("LOCATION_LATITUDE",U.target.value),placeholder:"32.7767"})]}),p.jsxs("div",{className:"settings-field",children:[p.jsx("label",{className:"settings-label",children:"Longitude"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:U=>C("LOCATION_LONGITUDE",U.target.value),placeholder:"-96.7970"})]})]}),p.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[p.jsx("label",{className:"settings-label",children:"Timezone"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:U=>C("LOCATION_TIMEZONE",U.target.value),placeholder:"America/Chicago"}),p.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),R.category!=="Location"&&R.settings.map(U=>p.jsxs("div",{className:"settings-field",children:[p.jsxs("label",{className:"settings-label",children:[U.label,U.isSecret&&p.jsx("button",{className:"settings-show-btn",onClick:()=>nn(U.key),type:"button",children:x[U.key]?" Hide":" Show"})]}),U.type==="select"?p.jsxs("select",{className:"settings-input",value:r[U.key]||"",onChange:ce=>C(U.key,ce.target.value),children:[p.jsx("option",{value:"",children:"Select..."}),U.options.map(ce=>p.jsx("option",{value:ce,children:ce},ce))]}):U.type==="sensor-select"?p.jsxs("select",{className:"settings-input",value:r[U.key]||"",onChange:ce=>C(U.key,ce.target.value),disabled:be,children:[p.jsx("option",{value:"",children:be?"Loading sensors...":"None (disabled)"}),Y.map(ce=>p.jsx("option",{value:ce.id,children:ce.name},ce.id))]}):p.jsx("input",{type:U.isSecret&&!x[U.key]?"password":"text",className:"settings-input",value:r[U.key]||"",onChange:ce=>C(U.key,ce.target.value),placeholder:U.placeholder}),p.jsx("span",{className:"settings-key-hint",children:U.key})]},U.key))]})]},R.category))]})}),p.jsxs("div",{className:"settings-footer",children:[p.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:n,children:"Cancel"}),p.jsx("button",{className:"settings-btn settings-btn-primary",onClick:se,disabled:d||l,children:d?"Saving...":" Save Settings"})]})]})}),document.body):null}const HC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function VC({isOpen:a,onClose:n}){if(E.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,n]),!a)return null;const r=s=>{s.target===s.currentTarget&&n()};return Th.createPortal(p.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:p.jsxs("div",{className:"shortcuts-modal",children:[p.jsxs("div",{className:"shortcuts-modal-header",children:[p.jsx("h2",{children:" Keyboard Shortcuts"}),p.jsx("button",{className:"shortcuts-close-btn",onClick:n,children:" Close"})]}),p.jsx("div",{className:"shortcuts-modal-body",children:HC.map((s,l)=>p.jsxs("div",{className:"shortcuts-section",children:[p.jsx("h3",{children:s.category}),p.jsx("div",{className:"shortcuts-list",children:s.items.map((c,d)=>p.jsxs("div",{className:"shortcut-row",children:[p.jsx("div",{className:"shortcut-keys",children:c.keys.map((h,m)=>p.jsxs(Ma.Fragment,{children:[p.jsx("kbd",{children:h}),m<c.keys.length-1&&p.jsx("span",{className:"key-separator",children:"+"})]},m))}),p.jsx("div",{className:"shortcut-action",children:c.action})]},d))})]},l))}),p.jsx("div",{className:"shortcuts-modal-footer",children:p.jsxs("p",{children:["Press ",p.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function qC({isExpanded:a,onToggle:n}){const[r,s]=E.useState([]),[l,c]=E.useState([]),[d,h]=E.useState(!0),[m,y]=E.useState(!1),[v,b]=E.useState(null),[x,k]=E.useState(!1),[j,Z]=E.useState(null),[q,Q]=E.useState(null),[K,L]=E.useState({username:"",password:"",name:""}),[Y,de]=E.useState({username:"",password:""}),[be,H]=E.useState(""),[ue,re]=E.useState(5e3),[pe,Re]=E.useState(null),je=E.useRef(null),[Je,rt]=E.useState({});E.useEffect(()=>(Ke(),()=>{je.current&&clearInterval(je.current)}),[]),E.useEffect(()=>(je.current&&clearInterval(je.current),a&&r.length>0&&ue>0&&(je.current=setInterval(()=>{rt(O=>{const z={...O};return r.forEach(le=>{z[le.ip]=Date.now()}),z})},ue)),()=>{je.current&&clearInterval(je.current)}),[a,r,ue]);const Ke=async()=>{try{h(!0);const O=await os("/api/cameras");if(O.ok){const z=await O.json();s(z.cameras||[]),z.defaultCredentials&&de(le=>({...le,username:z.defaultCredentials.username||""}))}}catch{b("Failed to load cameras")}finally{h(!1)}},N=async()=>{y(!0),b(null);try{const O=await os("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(O.ok){const z=await O.json();if(z.found&&z.found.length>0){const le=r.map(Oe=>Oe.ip),me=z.found.filter(Oe=>!le.includes(Oe.ip));c(me),window.T2Toast&&(me.length>0?window.T2Toast.success(`Found ${me.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${z.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{b("Discovery failed")}finally{y(!1)}},V=async()=>{try{await os("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{b("Failed to save credentials")}},J=async(O,z,le)=>{try{await os("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:O,name:z||`Camera ${O.split(".").pop()}`,username:le?.username||Y.username,password:le?.password||Y.password})}),c(me=>me.filter(Oe=>Oe.ip!==O)),Z(null),H(""),await Ke(),window.T2Toast&&window.T2Toast.success(`Camera ${O} added!`)}catch{b("Failed to add camera")}},ve=async O=>{try{await fetch(`/api/cameras/${O}`,{method:"DELETE"}),await Ke(),pe===O&&Re(null)}catch{b("Failed to remove camera")}},B=async()=>{if(q)try{await os("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:q,name:K.name,username:K.username,password:K.password})}),Q(null),rt(O=>({...O,[q]:Date.now()})),await Ke(),window.T2Toast&&window.T2Toast.success(`Camera ${q} updated!`)}catch{b("Failed to update camera")}},S={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},_=O=>{const z=Je[O]||Date.now();return`/api/cameras/snapshot/${O}?t=${z}`};return p.jsxs("div",{style:S.container,children:[p.jsxs("div",{style:S.header,onClick:n,children:[p.jsxs("div",{style:S.title,children:[p.jsx("span",{style:S.icon,children:""}),p.jsx("span",{children:"Cameras"}),r.length>0&&p.jsx("span",{style:S.badge,children:r.length})]}),p.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&p.jsxs("div",{style:S.content,children:[p.jsxs("div",{style:S.toolbar,children:[p.jsx("button",{style:{...S.btn,...m?S.btnActive:{}},onClick:N,disabled:m,children:m?" Scanning...":" Discover"}),p.jsx("button",{style:{...S.btn,...x?S.btnActive:{}},onClick:()=>k(!x),children:" Settings"}),p.jsxs("select",{style:S.refreshSelect,value:ue,onChange:O=>re(Number(O.target.value)),title:"Refresh interval",children:[p.jsx("option",{value:0,children:"Manual"}),p.jsx("option",{value:2e3,children:"2s"}),p.jsx("option",{value:5e3,children:"5s"}),p.jsx("option",{value:1e4,children:"10s"}),p.jsx("option",{value:3e4,children:"30s"})]})]}),x&&p.jsxs("div",{style:S.settings,children:[p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Select Camera to Configure"}),p.jsxs("select",{style:{...S.input,cursor:"pointer"},value:q||"",onChange:O=>{const z=O.target.value;if(!z){Q(null),L({username:"",password:"",name:""});return}const le=r.find(me=>me.ip===z);le?(Q(z),L({name:le.name||"",username:le.username||"",password:""})):(Q(z),L({name:`Camera ${z.split(".").pop()}`,username:Y.username||"",password:Y.password||""}))},children:[p.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&p.jsx("optgroup",{label:" Configured Cameras",children:r.map(O=>p.jsxs("option",{value:O.ip,children:[O.name," (",O.ip,")"]},O.ip))}),l.length>0&&p.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(O=>p.jsxs("option",{value:O.ip,children:[O.ip," (Ports: ",O.ports.join(", "),")"]},O.ip))})]})]}),q&&p.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Camera Name"}),p.jsx("input",{type:"text",style:S.input,value:K.name,onChange:O=>L(z=>({...z,name:O.target.value})),placeholder:"Front Door"})]}),p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Username"}),p.jsx("input",{type:"text",style:S.input,value:K.username,onChange:O=>L(z=>({...z,username:O.target.value})),placeholder:"admin"})]}),p.jsxs("div",{style:S.inputGroup,children:[p.jsxs("label",{style:S.label,children:["Password ",r.find(O=>O.ip===q)?"(leave blank to keep current)":""]}),p.jsx("input",{type:"password",style:S.input,value:K.password,onChange:O=>L(z=>({...z,password:O.target.value})),placeholder:""})]}),p.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:p.jsx("button",{style:{...S.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(z=>z.ip===q)?J(q,K.name,K):B()},children:r.find(O=>O.ip===q)?" Save Changes":" Add Camera"})})]}),p.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[p.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("input",{type:"text",style:{...S.input,flex:1},value:Y.username,onChange:O=>de(z=>({...z,username:O.target.value})),placeholder:"Username"}),p.jsx("input",{type:"password",style:{...S.input,flex:1},value:Y.password,onChange:O=>de(z=>({...z,password:O.target.value})),placeholder:"Password"}),p.jsx("button",{style:S.btn,onClick:V,title:"Save as default",children:""})]})]}),p.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[p.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("input",{type:"text",id:"addCameraIp",style:{...S.input,flex:1},placeholder:"192.168.1.100",onKeyDown:O=>{if(O.key==="Enter"&&O.target.value){const z=O.target.value;!l.find(le=>le.ip===z)&&!r.find(le=>le.ip===z)&&c(le=>[...le,{ip:z,ports:["manual"]}]),Q(z),L({name:`Camera ${z.split(".").pop()}`,username:Y.username||"",password:Y.password||""}),O.target.value=""}}}),p.jsx("button",{style:S.btn,onClick:()=>{const O=document.getElementById("addCameraIp"),z=O?.value;z&&(!l.find(le=>le.ip===z)&&!r.find(le=>le.ip===z)&&c(le=>[...le,{ip:z,ports:["manual"]}]),Q(z),L({name:`Camera ${z.split(".").pop()}`,username:Y.username||"",password:Y.password||""}),O.value="")},children:"Configure"})]})]})]}),v&&p.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",v]}),d?p.jsx("div",{style:S.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?p.jsxs("div",{style:S.emptyState,children:[p.jsx("p",{children:"No cameras configured"}),p.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):p.jsx("div",{style:S.grid,children:r.map(O=>p.jsxs("div",{style:{...S.cameraCard,...pe===O.ip?S.cameraCardSelected:{}},onClick:()=>Re(O.ip),children:[p.jsx("img",{src:_(O.ip),alt:O.name,style:S.cameraImage,onError:z=>{z.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),p.jsxs("div",{style:S.cameraInfo,children:[p.jsx("span",{style:S.cameraName,title:O.ip,children:O.name}),p.jsxs("div",{style:{display:"flex",gap:"4px"},children:[p.jsx("button",{style:{...S.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:z=>{z.stopPropagation(),k(!0),Q(O.ip),L({name:O.name||"",username:O.username||"",password:""})},title:"Edit credentials",children:""}),p.jsx("button",{style:S.deleteBtn,onClick:z=>{z.stopPropagation(),ve(O.ip)},title:"Remove camera",children:""})]})]})]},O.ip))})]}),pe&&p.jsxs("div",{style:S.fullView,onClick:()=>Re(null),children:[p.jsx("img",{src:_(pe),alt:"Camera feed",style:S.fullImage}),p.jsx("button",{style:S.closeBtn,onClick:()=>Re(null),children:" Close"}),p.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(O=>O.ip===pe)?.name||pe})]})]})}const Ga=Object.create(null);Ga.open="0";Ga.close="1";Ga.ping="2";Ga.pong="3";Ga.message="4";Ga.upgrade="5";Ga.noop="6";const wc=Object.create(null);Object.keys(Ga).forEach(a=>{wc[Ga[a]]=a});const sh={type:"error",data:"parser error"},A1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_1=typeof ArrayBuffer=="function",D1=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,qh=({type:a,data:n},r,s)=>A1&&n instanceof Blob?r?s(n):w0(n,s):_1&&(n instanceof ArrayBuffer||D1(n))?r?s(n):w0(new Blob([n]),s):s(Ga[a]+(n||"")),w0=(a,n)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];n("b"+(s||""))},r.readAsDataURL(a)};function S0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let jf;function GC(a,n){if(A1&&a.data instanceof Blob)return a.data.arrayBuffer().then(S0).then(n);if(_1&&(a.data instanceof ArrayBuffer||D1(a.data)))return n(S0(a.data));qh(a,!1,r=>{jf||(jf=new TextEncoder),n(jf.encode(r))})}const x0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Eo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<x0.length;a++)Eo[x0.charCodeAt(a)]=a;const YC=a=>{let n=a.length*.75,r=a.length,s,l=0,c,d,h,m;a[a.length-1]==="="&&(n--,a[a.length-2]==="="&&n--);const y=new ArrayBuffer(n),v=new Uint8Array(y);for(s=0;s<r;s+=4)c=Eo[a.charCodeAt(s)],d=Eo[a.charCodeAt(s+1)],h=Eo[a.charCodeAt(s+2)],m=Eo[a.charCodeAt(s+3)],v[l++]=c<<2|d>>4,v[l++]=(d&15)<<4|h>>2,v[l++]=(h&3)<<6|m&63;return y},FC=typeof ArrayBuffer=="function",Gh=(a,n)=>{if(typeof a!="string")return{type:"message",data:M1(a,n)};const r=a.charAt(0);return r==="b"?{type:"message",data:PC(a.substring(1),n)}:wc[r]?a.length>1?{type:wc[r],data:a.substring(1)}:{type:wc[r]}:sh},PC=(a,n)=>{if(FC){const r=YC(a);return M1(r,n)}else return{base64:!0,data:a}},M1=(a,n)=>{switch(n){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},R1="",ZC=(a,n)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,d)=>{qh(c,!1,h=>{s[d]=h,++l===r&&n(s.join(R1))})})},XC=(a,n)=>{const r=a.split(R1),s=[];for(let l=0;l<r.length;l++){const c=Gh(r[l],n);if(s.push(c),c.type==="error")break}return s};function KC(){return new TransformStream({transform(a,n){GC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),n.enqueue(l),n.enqueue(r)})}})}let Af;function cc(a){return a.reduce((n,r)=>n+r.length,0)}function uc(a,n){if(a[0].length===n)return a.shift();const r=new Uint8Array(n);let s=0;for(let l=0;l<n;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function QC(a,n){Af||(Af=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(d,h){for(r.push(d);;){if(s===0){if(cc(r)<1)break;const m=uc(r,1);c=(m[0]&128)===128,l=m[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(cc(r)<2)break;const m=uc(r,2);l=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),s=3}else if(s===2){if(cc(r)<8)break;const m=uc(r,8),y=new DataView(m.buffer,m.byteOffset,m.length),v=y.getUint32(0);if(v>Math.pow(2,21)-1){h.enqueue(sh);break}l=v*Math.pow(2,32)+y.getUint32(4),s=3}else{if(cc(r)<l)break;const m=uc(r,l);h.enqueue(Gh(c?m:Af.decode(m),n)),s=0}if(l===0||l>a){h.enqueue(sh);break}}}})}const z1=4;function gn(a){if(a)return JC(a)}function JC(a){for(var n in gn.prototype)a[n]=gn.prototype[n];return a}gn.prototype.on=gn.prototype.addEventListener=function(a,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(n),this};gn.prototype.once=function(a,n){function r(){this.off(a,r),n.apply(this,arguments)}return r.fn=n,this.on(a,r),this};gn.prototype.off=gn.prototype.removeListener=gn.prototype.removeAllListeners=gn.prototype.removeEventListener=function(a,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===n||s.fn===n){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};gn.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,n)}return this};gn.prototype.emitReserved=gn.prototype.emit;gn.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};gn.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Gc=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),va=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),WC="arraybuffer";function L1(a,...n){return n.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const eT=va.setTimeout,tT=va.clearTimeout;function Yc(a,n){n.useNativeTimers?(a.setTimeoutFn=eT.bind(va),a.clearTimeoutFn=tT.bind(va)):(a.setTimeoutFn=va.setTimeout.bind(va),a.clearTimeoutFn=va.clearTimeout.bind(va))}const nT=1.33;function aT(a){return typeof a=="string"?rT(a):Math.ceil((a.byteLength||a.size)*nT)}function rT(a){let n=0,r=0;for(let s=0,l=a.length;s<l;s++)n=a.charCodeAt(s),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(s++,r+=4);return r}function B1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function iT(a){let n="";for(let r in a)a.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return n}function sT(a){let n={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");n[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return n}class oT extends Error{constructor(n,r,s){super(n),this.description=r,this.context=s,this.type="TransportError"}}class Yh extends gn{constructor(n){super(),this.writable=!1,Yc(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,s){return super.emitReserved("error",new oT(n,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=Gh(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=iT(n);return r.length?"?"+r:""}}class lT extends Yh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};XC(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,ZC(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=B1()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let U1=!1;try{U1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const cT=U1;function uT(){}class dT extends lT{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||s!==n.port}}doWrite(n,r){const s=this.request({method:"POST",data:n});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=n}}class qa extends gn{constructor(n,r,s){super(),this.createRequest=n,Yc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var n;const r=L1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=qa.requestsCount++,qa.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=uT,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete qa.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}qa.requestsCount=0;qa.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",E0);else if(typeof addEventListener=="function"){const a="onpagehide"in va?"pagehide":"unload";addEventListener(a,E0,!1)}}function E0(){for(let a in qa.requests)qa.requests.hasOwnProperty(a)&&qa.requests[a].abort()}const fT=(function(){const a=I1({xdomain:!1});return a&&a.responseType!==null})();class hT extends dT{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=fT&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new qa(I1,this.uri(),n)}}function I1(a){const n=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||cT))return new XMLHttpRequest}catch{}if(!n)try{return new va[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pT extends Yh{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,s=$1?{}:L1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;qh(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Gc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=B1()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const _f=va.WebSocket||va.MozWebSocket;class mT extends pT{createSocket(n,r,s){return $1?new _f(n,r,s):r?new _f(n,r):new _f(n)}doWrite(n,r){this.ws.send(r)}}class yT extends Yh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=QC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=n.readable.pipeThrough(r).getReader(),l=KC();l.readable.pipeTo(n.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:h,value:m})=>{h||(this.onPacket(m),c())}).catch(h=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;this._writer.write(s).then(()=>{l&&Gc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const gT={websocket:mT,webtransport:yT,polling:hT},vT=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function oh(a){if(a.length>8e3)throw"URI too long";const n=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=vT.exec(a||""),c={},d=14;for(;d--;)c[bT[d]]=l[d]||"";return r!=-1&&s!=-1&&(c.source=n,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=wT(c,c.path),c.queryKey=ST(c,c.query),c}function wT(a,n){const r=/\/{2,9}/g,s=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&s.splice(0,1),n.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ST(a,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const lh=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sc=[];lh&&addEventListener("offline",()=>{Sc.forEach(a=>a())},!1);class Zr extends gn{constructor(n,r){if(super(),this.binaryType=WC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const s=oh(n);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=oh(r.host).host);Yc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=sT(this.opts.query)),lh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=z1,r.transport=n,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Zr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Zr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=aT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,Gc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,s){return this._sendPacket("message",n,r,s),this}send(n,r,s){return this._sendPacket("message",n,r,s),this}_sendPacket(n,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:n,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}_onError(n){if(Zr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),lh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Sc.indexOf(this._offlineEventListener);s!==-1&&Sc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Zr.protocol=z1;class xT extends Zr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),s=!1;Zr.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!s)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Zr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=r.name,this.emitReserved("upgradeError",x)}}))};function c(){s||(s=!0,v(),r.close(),r=null)}const d=b=>{const x=new Error("probe error: "+b);x.transport=r.name,c(),this.emitReserved("upgradeError",x)};function h(){d("transport closed")}function m(){d("socket closed")}function y(b){r&&b.name!==r.name&&c()}const v=()=>{r.removeListener("open",l),r.removeListener("error",d),r.removeListener("close",h),this.off("close",m),this.off("upgrading",y)};r.once("open",l),r.once("error",d),r.once("close",h),this.once("close",m),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let s=0;s<n.length;s++)~this.transports.indexOf(n[s])&&r.push(n[s]);return r}}let ET=class extends xT{constructor(n,r={}){const s=typeof n=="object"?n:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>gT[l]).filter(l=>!!l)),super(n,s)}};function kT(a,n="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=oh(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+n,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const CT=typeof ArrayBuffer=="function",TT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,H1=Object.prototype.toString,NT=typeof Blob=="function"||typeof Blob<"u"&&H1.call(Blob)==="[object BlobConstructor]",OT=typeof File=="function"||typeof File<"u"&&H1.call(File)==="[object FileConstructor]";function Fh(a){return CT&&(a instanceof ArrayBuffer||TT(a))||NT&&a instanceof Blob||OT&&a instanceof File}function xc(a,n){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(xc(a[r]))return!0;return!1}if(Fh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return xc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&xc(a[r]))return!0;return!1}function jT(a){const n=[],r=a.data,s=a;return s.data=ch(r,n),s.attachments=n.length,{packet:s,buffers:n}}function ch(a,n){if(!a)return a;if(Fh(a)){const r={_placeholder:!0,num:n.length};return n.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=ch(a[s],n);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=ch(a[s],n));return r}return a}function AT(a,n){return a.data=uh(a.data,n),delete a.attachments,a}function uh(a,n){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<n.length)return n[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=uh(a[r],n);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=uh(a[r],n));return a}const _T=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],DT=5;var mt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(mt||(mt={}));class MT{constructor(n){this.replacer=n}encode(n){return(n.type===mt.EVENT||n.type===mt.ACK)&&xc(n)?this.encodeAsBinary({type:n.type===mt.EVENT?mt.BINARY_EVENT:mt.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===mt.BINARY_EVENT||n.type===mt.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=jT(n),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function k0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Ph extends gn{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const s=r.type===mt.BINARY_EVENT;s||r.type===mt.BINARY_ACK?(r.type=s?mt.EVENT:mt.ACK,this.reconstructor=new RT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Fh(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const s={type:Number(n.charAt(0))};if(mt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===mt.BINARY_EVENT||s.type===mt.BINARY_ACK){const c=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const d=n.substring(c,r);if(d!=Number(d)||n.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(n.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););s.nsp=n.substring(c,r)}else s.nsp="/";const l=n.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const d=n.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===n.length)break}s.id=Number(n.substring(c,r+1))}if(n.charAt(++r)){const c=this.tryParse(n.substr(r));if(Ph.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case mt.CONNECT:return k0(r);case mt.DISCONNECT:return r===void 0;case mt.CONNECT_ERROR:return typeof r=="string"||k0(r);case mt.EVENT:case mt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&_T.indexOf(r[0])===-1);case mt.ACK:case mt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class RT{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=AT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const zT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ph,Encoder:MT,get PacketType(){return mt},protocol:DT},Symbol.toStringTag,{value:"Module"}));function Aa(a,n,r){return a.on(n,r),function(){a.off(n,r)}}const LT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class V1 extends gn{constructor(n,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Aa(n,"open",this.onopen.bind(this)),Aa(n,"packet",this.onpacket.bind(this)),Aa(n,"error",this.onerror.bind(this)),Aa(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var s,l,c;if(LT.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:mt.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,b=r.pop();this._registerAckCallback(v,b),d.id=v}const h=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,m=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!h||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(n,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[n]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===n&&this.sendBuffer.splice(h,1);r.call(this,new Error("operation has timed out"))},l),d=(...h)=>{this.io.clearTimeoutFn(c),r.apply(this,h)};d.withError=!0,this.acks[n]=d}emitWithAck(n,...r){return new Promise((s,l)=>{const c=(d,h)=>d?l(d):s(h);c.withError=!0,r.push(c),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:mt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(s=>String(s.id)===n)){const s=this.acks[n];delete this.acks[n],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case mt.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mt.EVENT:case mt.BINARY_EVENT:this.onevent(n);break;case mt.ACK:case mt.BINARY_ACK:this.onack(n);break;case mt.DISCONNECT:this.ondisconnect();break;case mt.CONNECT_ERROR:this.destroy();const s=new Error(n.data.message);s.data=n.data.data,this.emitReserved("connect_error",s);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:mt.ACK,id:n,data:l}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,n.data)}}}function xs(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}xs.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*a);a=(Math.floor(n*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};xs.prototype.reset=function(){this.attempts=0};xs.prototype.setMin=function(a){this.ms=a};xs.prototype.setMax=function(a){this.max=a};xs.prototype.setJitter=function(a){this.jitter=a};class dh extends gn{constructor(n,r){var s;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Yc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new xs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const l=r.parser||zT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new ET(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=Aa(r,"open",function(){s.onopen(),n&&n()}),c=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),n?n(h):this.maybeReconnectOnOpen()},d=Aa(r,"error",c);if(this._timeout!==!1){const h=this._timeout,m=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},h);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(l),this.subs.push(d),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Aa(n,"ping",this.onping.bind(this)),Aa(n,"data",this.ondata.bind(this)),Aa(n,"error",this.onerror.bind(this)),Aa(n,"close",this.onclose.bind(this)),Aa(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){Gc(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let s=this.nsps[n];return s?this._autoConnect&&!s.active&&s.connect():(s=new V1(this,n,r),this.nsps[n]=s),s}_destroy(n){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let s=0;s<r.length;s++)this.engine.write(r[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(l=>{l?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",l)):n.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const wo={};function Ec(a,n){typeof a=="object"&&(n=a,a=void 0),n=n||{};const r=kT(a,n.path||"/socket.io"),s=r.source,l=r.id,c=r.path,d=wo[l]&&c in wo[l].nsps,h=n.forceNew||n["force new connection"]||n.multiplex===!1||d;let m;return h?m=new dh(s,n):(wo[l]||(wo[l]=new dh(s,n)),m=wo[l]),r.query&&!n.query&&(n.query=r.queryKey),m.socket(r.path,n)}Object.assign(Ec,{Manager:dh,Socket:V1,io:Ec,connect:Ec});const BT=typeof window<"u"?window.location.origin:"http://localhost:3000",C0=qc(),UT=C0?`${C0}/socket.io`:"/socket.io",ge=Ec(BT,{path:UT,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]}),IT=()=>{ge.connected||ge.connect()},$T=()=>{ge.connected&&ge.disconnect()};class HT{constructor(){this.nodes=new Map}register(n,r){typeof n=="object"&&r===void 0&&(r=n,n=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(n,r)}get(n){return this.nodes.get(n)}getAll(){return Array.from(this.nodes.values()).filter(n=>n)}getByLabel(n){for(const r of this.nodes.values())if(r.label===n)return r;return null}getByInstance(n){for(const r of this.nodes.values())if(r.nodeClass&&n instanceof r.nodeClass)return r;return null}}const Bn=new HT;class Ei extends Error{}class VT extends Ei{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class qT extends Ei{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class GT extends Ei{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class cs extends Ei{}class q1 extends Ei{constructor(n){super(`Invalid unit ${n}`)}}class Un extends Ei{}class Hr extends Ei{constructor(){super("Zone is an abstract class")}}const Ne="numeric",Ra="short",sa="long",Mc={year:Ne,month:Ne,day:Ne},G1={year:Ne,month:Ra,day:Ne},YT={year:Ne,month:Ra,day:Ne,weekday:Ra},Y1={year:Ne,month:sa,day:Ne},F1={year:Ne,month:sa,day:Ne,weekday:sa},P1={hour:Ne,minute:Ne},Z1={hour:Ne,minute:Ne,second:Ne},X1={hour:Ne,minute:Ne,second:Ne,timeZoneName:Ra},K1={hour:Ne,minute:Ne,second:Ne,timeZoneName:sa},Q1={hour:Ne,minute:Ne,hourCycle:"h23"},J1={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23"},W1={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23",timeZoneName:Ra},ew={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23",timeZoneName:sa},tw={year:Ne,month:Ne,day:Ne,hour:Ne,minute:Ne},nw={year:Ne,month:Ne,day:Ne,hour:Ne,minute:Ne,second:Ne},aw={year:Ne,month:Ra,day:Ne,hour:Ne,minute:Ne},rw={year:Ne,month:Ra,day:Ne,hour:Ne,minute:Ne,second:Ne},FT={year:Ne,month:Ra,day:Ne,weekday:Ra,hour:Ne,minute:Ne},iw={year:Ne,month:sa,day:Ne,hour:Ne,minute:Ne,timeZoneName:Ra},sw={year:Ne,month:sa,day:Ne,hour:Ne,minute:Ne,second:Ne,timeZoneName:Ra},ow={year:Ne,month:sa,day:Ne,weekday:sa,hour:Ne,minute:Ne,timeZoneName:sa},lw={year:Ne,month:sa,day:Ne,weekday:sa,hour:Ne,minute:Ne,second:Ne,timeZoneName:sa};class Es{get type(){throw new Hr}get name(){throw new Hr}get ianaName(){return this.name}get isUniversal(){throw new Hr}offsetName(n,r){throw new Hr}formatOffset(n,r){throw new Hr}offset(n){throw new Hr}equals(n){throw new Hr}get isValid(){throw new Hr}}let Df=null;class Uo extends Es{static get instance(){return Df===null&&(Df=new Uo),Df}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return ww(n,r,s)}formatOffset(n,r){return _o(this.offset(n),r)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const fh=new Map;function PT(a){let n=fh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),fh.set(a,n)),n}const ZT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function XT(a,n){const r=a.format(n).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,d,h,m,y,v]=s;return[d,l,c,h,m,y,v]}function KT(a,n){const r=a.formatToParts(n),s=[];for(let l=0;l<r.length;l++){const{type:c,value:d}=r[l],h=ZT[c];c==="era"?s[h]=d:Ge(h)||(s[h]=parseInt(d,10))}return s}const Mf=new Map;class Ya extends Es{static create(n){let r=Mf.get(n);return r===void 0&&Mf.set(n,r=new Ya(n)),r}static resetCache(){Mf.clear(),fh.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=Ya.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return ww(n,r,s,this.name)}formatOffset(n,r){return _o(this.offset(n),r)}offset(n){if(!this.valid)return NaN;const r=new Date(n);if(isNaN(r))return NaN;const s=PT(this.name);let[l,c,d,h,m,y,v]=s.formatToParts?KT(s,r):XT(s,r);h==="BC"&&(l=-Math.abs(l)+1);const x=Pc({year:l,month:c,day:d,hour:m===24?0:m,minute:y,second:v,millisecond:0});let k=+r;const j=k%1e3;return k-=j>=0?j:1e3+j,(x-k)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let T0={};function QT(a,n={}){const r=JSON.stringify([a,n]);let s=T0[r];return s||(s=new Intl.ListFormat(a,n),T0[r]=s),s}const hh=new Map;function ph(a,n={}){const r=JSON.stringify([a,n]);let s=hh.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,n),hh.set(r,s)),s}const mh=new Map;function JT(a,n={}){const r=JSON.stringify([a,n]);let s=mh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,n),mh.set(r,s)),s}const yh=new Map;function WT(a,n={}){const{base:r,...s}=n,l=JSON.stringify([a,s]);let c=yh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,n),yh.set(l,c)),c}let ko=null;function eN(){return ko||(ko=new Intl.DateTimeFormat().resolvedOptions().locale,ko)}const gh=new Map;function cw(a){let n=gh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat(a).resolvedOptions(),gh.set(a,n)),n}const vh=new Map;function tN(a){let n=vh.get(a);if(!n){const r=new Intl.Locale(a);n="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in n||(n={...uw,...n}),vh.set(a,n)}return n}function nN(a){const n=a.indexOf("-x-");n!==-1&&(a=a.substring(0,n));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=ph(a).resolvedOptions(),l=a}catch{const m=a.substring(0,r);s=ph(m).resolvedOptions(),l=m}const{numberingSystem:c,calendar:d}=s;return[l,c,d]}}function aN(a,n,r){return(r||n)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),n&&(a+=`-nu-${n}`)),a}function rN(a){const n=[];for(let r=1;r<=12;r++){const s=Ye.utc(2009,r,1);n.push(a(s))}return n}function iN(a){const n=[];for(let r=1;r<=7;r++){const s=Ye.utc(2016,11,13+r);n.push(a(s))}return n}function dc(a,n,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(n):s(n)}function sN(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||cw(a.locale).numberingSystem==="latn"}class oN{constructor(n,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...d}=s;if(!r||Object.keys(d).length>0){const h={useGrouping:!1,...s};s.padTo>0&&(h.minimumIntegerDigits=s.padTo),this.inf=JT(n,h)}}format(n){if(this.inf){const r=this.floor?Math.floor(n):n;return this.inf.format(r)}else{const r=this.floor?Math.floor(n):Jh(n,3);return mn(r,this.padTo)}}}class lN{constructor(n,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const d=-1*(n.offset/60),h=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;n.offset!==0&&Ya.create(h).valid?(l=h,this.dt=n):(l="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,l=n.zone.name):(l="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=ph(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class cN{constructor(n,r,s){this.opts={style:"long",...s},!r&&vw()&&(this.rtf=WT(n,s))}format(n,r){return this.rtf?this.rtf.format(n,r):AN(r,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,r){return this.rtf?this.rtf.formatToParts(n,r):[]}}const uw={firstDay:1,minimalDays:4,weekend:[6,7]};class Tt{static fromOpts(n){return Tt.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,r,s,l,c=!1){const d=n||Zt.defaultLocale,h=d||(c?"en-US":eN()),m=r||Zt.defaultNumberingSystem,y=s||Zt.defaultOutputCalendar,v=wh(l)||Zt.defaultWeekSettings;return new Tt(h,m,y,v,d)}static resetCache(){ko=null,hh.clear(),mh.clear(),yh.clear(),gh.clear(),vh.clear()}static fromObject({locale:n,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return Tt.create(n,r,s,l)}constructor(n,r,s,l,c){const[d,h,m]=nN(n);this.locale=d,this.numberingSystem=r||h||null,this.outputCalendar=s||m||null,this.weekSettings=l,this.intl=aN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=sN(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&r?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:Tt.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,wh(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,r=!1){return dc(this,n,Ew,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:n,day:"numeric"}:{month:n},c=r?"format":"standalone";if(!this.monthsCache[c][n]){const d=s?h=>this.dtFormatter(h,l).format():h=>this.extract(h,l,"month");this.monthsCache[c][n]=rN(d)}return this.monthsCache[c][n]})}weekdays(n,r=!1){return dc(this,n,Tw,()=>{const s=r?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},l=r?"format":"standalone";return this.weekdaysCache[l][n]||(this.weekdaysCache[l][n]=iN(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][n]})}meridiems(){return dc(this,void 0,()=>Nw,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ye.utc(2016,11,13,9),Ye.utc(2016,11,13,19)].map(r=>this.extract(r,n,"dayperiod"))}return this.meridiemCache})}eras(n){return dc(this,n,Ow,()=>{const r={era:n};return this.eraCache[n]||(this.eraCache[n]=[Ye.utc(-40,1,1),Ye.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[n]})}extract(n,r,s){const l=this.dtFormatter(n,r),c=l.formatToParts(),d=c.find(h=>h.type.toLowerCase()===s);return d?d.value:null}numberFormatter(n={}){return new oN(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,r={}){return new lN(n,this.intl,r)}relFormatter(n={}){return new cN(this.intl,this.isEnglish(),n)}listFormatter(n={}){return QT(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||cw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:bw()?tN(this.locale):uw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Rf=null;class $n extends Es{static get utcInstance(){return Rf===null&&(Rf=new $n(0)),Rf}static instance(n){return n===0?$n.utcInstance:new $n(n)}static parseSpecifier(n){if(n){const r=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new $n(Zc(r[1],r[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${_o(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${_o(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,r){return _o(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class dw extends Es{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Fr(a,n){if(Ge(a)||a===null)return n;if(a instanceof Es)return a;if(mN(a)){const r=a.toLowerCase();return r==="default"?n:r==="local"||r==="system"?Uo.instance:r==="utc"||r==="gmt"?$n.utcInstance:$n.parseSpecifier(r)||Ya.create(a)}else return Xr(a)?$n.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new dw(a)}const Zh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},N0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},uN=Zh.hanidec.replace(/[\[|\]]/g,"").split("");function dN(a){let n=parseInt(a,10);if(isNaN(n)){n="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Zh.hanidec)!==-1)n+=uN.indexOf(a[r]);else for(const l in N0){const[c,d]=N0[l];s>=c&&s<=d&&(n+=s-c)}}return parseInt(n,10)}else return n}const bh=new Map;function fN(){bh.clear()}function Oa({numberingSystem:a},n=""){const r=a||"latn";let s=bh.get(r);s===void 0&&(s=new Map,bh.set(r,s));let l=s.get(n);return l===void 0&&(l=new RegExp(`${Zh[r]}${n}`),s.set(n,l)),l}let O0=()=>Date.now(),j0="system",A0=null,_0=null,D0=null,M0=60,R0,z0=null;class Zt{static get now(){return O0}static set now(n){O0=n}static set defaultZone(n){j0=n}static get defaultZone(){return Fr(j0,Uo.instance)}static get defaultLocale(){return A0}static set defaultLocale(n){A0=n}static get defaultNumberingSystem(){return _0}static set defaultNumberingSystem(n){_0=n}static get defaultOutputCalendar(){return D0}static set defaultOutputCalendar(n){D0=n}static get defaultWeekSettings(){return z0}static set defaultWeekSettings(n){z0=wh(n)}static get twoDigitCutoffYear(){return M0}static set twoDigitCutoffYear(n){M0=n%100}static get throwOnInvalid(){return R0}static set throwOnInvalid(n){R0=n}static resetCaches(){Tt.resetCache(),Ya.resetCache(),Ye.resetCache(),fN()}}class _a{constructor(n,r){this.reason=n,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const fw=[0,31,59,90,120,151,181,212,243,273,304,334],hw=[0,31,60,91,121,152,182,213,244,274,305,335];function ba(a,n){return new _a("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${a}, which is invalid`)}function Xh(a,n,r){const s=new Date(Date.UTC(a,n-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function pw(a,n,r){return r+(Io(a)?hw:fw)[n-1]}function mw(a,n){const r=Io(a)?hw:fw,s=r.findIndex(c=>c<n),l=n-r[s];return{month:s+1,day:l}}function Kh(a,n){return(a-n+7)%7+1}function Rc(a,n=4,r=1){const{year:s,month:l,day:c}=a,d=pw(s,l,c),h=Kh(Xh(s,l,c),r);let m=Math.floor((d-h+14-n)/7),y;return m<1?(y=s-1,m=zo(y,n,r)):m>zo(s,n,r)?(y=s+1,m=1):y=s,{weekYear:y,weekNumber:m,weekday:h,...Xc(a)}}function L0(a,n=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,d=Kh(Xh(s,1,n),r),h=ds(s);let m=l*7+c-d-7+n,y;m<1?(y=s-1,m+=ds(y)):m>h?(y=s+1,m-=ds(s)):y=s;const{month:v,day:b}=mw(y,m);return{year:y,month:v,day:b,...Xc(a)}}function zf(a){const{year:n,month:r,day:s}=a,l=pw(n,r,s);return{year:n,ordinal:l,...Xc(a)}}function B0(a){const{year:n,ordinal:r}=a,{month:s,day:l}=mw(n,r);return{year:n,month:s,day:l,...Xc(a)}}function U0(a,n){if(!Ge(a.localWeekday)||!Ge(a.localWeekNumber)||!Ge(a.localWeekYear)){if(!Ge(a.weekday)||!Ge(a.weekNumber)||!Ge(a.weekYear))throw new cs("Cannot mix locale-based week fields with ISO-based week fields");return Ge(a.localWeekday)||(a.weekday=a.localWeekday),Ge(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ge(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function hN(a,n=4,r=1){const s=Fc(a.weekYear),l=wa(a.weekNumber,1,zo(a.weekYear,n,r)),c=wa(a.weekday,1,7);return s?l?c?!1:ba("weekday",a.weekday):ba("week",a.weekNumber):ba("weekYear",a.weekYear)}function pN(a){const n=Fc(a.year),r=wa(a.ordinal,1,ds(a.year));return n?r?!1:ba("ordinal",a.ordinal):ba("year",a.year)}function yw(a){const n=Fc(a.year),r=wa(a.month,1,12),s=wa(a.day,1,zc(a.year,a.month));return n?r?s?!1:ba("day",a.day):ba("month",a.month):ba("year",a.year)}function gw(a){const{hour:n,minute:r,second:s,millisecond:l}=a,c=wa(n,0,23)||n===24&&r===0&&s===0&&l===0,d=wa(r,0,59),h=wa(s,0,59),m=wa(l,0,999);return c?d?h?m?!1:ba("millisecond",l):ba("second",s):ba("minute",r):ba("hour",n)}function Ge(a){return typeof a>"u"}function Xr(a){return typeof a=="number"}function Fc(a){return typeof a=="number"&&a%1===0}function mN(a){return typeof a=="string"}function yN(a){return Object.prototype.toString.call(a)==="[object Date]"}function vw(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function bw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function gN(a){return Array.isArray(a)?a:[a]}function I0(a,n,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[n(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function vN(a,n){return n.reduce((r,s)=>(r[s]=a[s],r),{})}function vs(a,n){return Object.prototype.hasOwnProperty.call(a,n)}function wh(a){if(a==null)return null;if(typeof a!="object")throw new Un("Week settings must be an object");if(!wa(a.firstDay,1,7)||!wa(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(n=>!wa(n,1,7)))throw new Un("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function wa(a,n,r){return Fc(a)&&a>=n&&a<=r}function bN(a,n){return a-n*Math.floor(a/n)}function mn(a,n=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(n,"0"):s=(""+a).padStart(n,"0"),s}function Yr(a){if(!(Ge(a)||a===null||a===""))return parseInt(a,10)}function mi(a){if(!(Ge(a)||a===null||a===""))return parseFloat(a)}function Qh(a){if(!(Ge(a)||a===null||a==="")){const n=parseFloat("0."+a)*1e3;return Math.floor(n)}}function Jh(a,n,r="round"){const s=10**n;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Io(a){return a%4===0&&(a%100!==0||a%400===0)}function ds(a){return Io(a)?366:365}function zc(a,n){const r=bN(n-1,12)+1,s=a+(n-r)/12;return r===2?Io(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Pc(a){let n=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(n=new Date(n),n.setUTCFullYear(a.year,a.month-1,a.day)),+n}function $0(a,n,r){return-Kh(Xh(a,1,n),r)+n-1}function zo(a,n=4,r=1){const s=$0(a,n,r),l=$0(a+1,n,r);return(ds(a)-s+l)/7}function Sh(a){return a>99?a:a>Zt.twoDigitCutoffYear?1900+a:2e3+a}function ww(a,n,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const d={timeZoneName:n,...c},h=new Intl.DateTimeFormat(r,d).formatToParts(l).find(m=>m.type.toLowerCase()==="timezonename");return h?h.value:null}function Zc(a,n){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(n,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function Sw(a){const n=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(n))throw new Un(`Invalid unit value ${a}`);return n}function Lc(a,n){const r={};for(const s in a)if(vs(a,s)){const l=a[s];if(l==null)continue;r[n(s)]=Sw(l)}return r}function _o(a,n){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(n){case"short":return`${l}${mn(r,2)}:${mn(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${mn(r,2)}${mn(s,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Xc(a){return vN(a,["hour","minute","second","millisecond"])}const wN=["January","February","March","April","May","June","July","August","September","October","November","December"],xw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],SN=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ew(a){switch(a){case"narrow":return[...SN];case"short":return[...xw];case"long":return[...wN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const kw=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Cw=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],xN=["M","T","W","T","F","S","S"];function Tw(a){switch(a){case"narrow":return[...xN];case"short":return[...Cw];case"long":return[...kw];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Nw=["AM","PM"],EN=["Before Christ","Anno Domini"],kN=["BC","AD"],CN=["B","A"];function Ow(a){switch(a){case"narrow":return[...CN];case"short":return[...kN];case"long":return[...EN];default:return null}}function TN(a){return Nw[a.hour<12?0:1]}function NN(a,n){return Tw(n)[a.weekday-1]}function ON(a,n){return Ew(n)[a.month-1]}function jN(a,n){return Ow(n)[a.year<0?0:1]}function AN(a,n,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const b=a==="days";switch(n){case 1:return b?"tomorrow":`next ${l[a][0]}`;case-1:return b?"yesterday":`last ${l[a][0]}`;case 0:return b?"today":`this ${l[a][0]}`}}const d=Object.is(n,-0)||n<0,h=Math.abs(n),m=h===1,y=l[a],v=s?m?y[1]:y[2]||y[1]:m?l[a][0]:a;return d?`${h} ${v} ago`:`in ${h} ${v}`}function H0(a,n){let r="";for(const s of a)s.literal?r+=s.val:r+=n(s.val);return r}const _N={D:Mc,DD:G1,DDD:Y1,DDDD:F1,t:P1,tt:Z1,ttt:X1,tttt:K1,T:Q1,TT:J1,TTT:W1,TTTT:ew,f:tw,ff:aw,fff:iw,ffff:ow,F:nw,FF:rw,FFF:sw,FFFF:lw};class In{static create(n,r={}){return new In(n,r)}static parseFormat(n){let r=null,s="",l=!1;const c=[];for(let d=0;d<n.length;d++){const h=n.charAt(d);h==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||h===r?s+=h:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=h,r=h)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(n){return _N[n]}constructor(n,r){this.opts=r,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...r}).format()}dtFormatter(n,r={}){return this.loc.dtFormatter(n,{...this.opts,...r})}formatDateTime(n,r){return this.dtFormatter(n,r).format()}formatDateTimeParts(n,r){return this.dtFormatter(n,r).formatToParts()}formatInterval(n,r){return this.dtFormatter(n.start,r).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,r){return this.dtFormatter(n,r).resolvedOptions()}num(n,r=0,s=void 0){if(this.opts.forceSimple)return mn(n,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(n)}formatDateTimeFromString(n,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(k,j)=>this.loc.extract(n,k,j),d=k=>n.isOffsetFixed&&n.offset===0&&k.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,k.format):"",h=()=>s?TN(n):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(k,j)=>s?ON(n,k):c(j?{month:k}:{month:k,day:"numeric"},"month"),y=(k,j)=>s?NN(n,k):c(j?{weekday:k}:{weekday:k,month:"long",day:"numeric"},"weekday"),v=k=>{const j=In.macroTokenToFormatOpts(k);return j?this.formatWithSystemDefault(n,j):k},b=k=>s?jN(n,k):c({era:k},"era"),x=k=>{switch(k){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return h();case"d":return l?c({day:"numeric"},"day"):this.num(n.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(n.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(n.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(n.year,6);case"G":return b("short");case"GG":return b("long");case"GGGGG":return b("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return v(k)}};return H0(In.parseFormat(r),x)}formatDurationFromString(n,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=v=>{switch(v[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(v,b)=>x=>{const k=l(x);if(k){const j=b.isNegativeDuration&&k!==b.largestUnit?s:1;let Z;return this.opts.signMode==="negativeLargestOnly"&&k!==b.largestUnit?Z="never":this.opts.signMode==="all"?Z="always":Z="auto",this.num(v.get(k)*j,x.length,Z)}else return x},d=In.parseFormat(r),h=d.reduce((v,{literal:b,val:x})=>b?v:v.concat(x),[]),m=n.shiftTo(...h.map(l).filter(v=>v)),y={isNegativeDuration:m<0,largestUnit:Object.keys(m.values)[0]};return H0(d,c(m,y))}}const jw=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ks(...a){const n=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${n}$`)}function Cs(...a){return n=>a.reduce(([r,s,l],c)=>{const[d,h,m]=c(n,l);return[{...r,...d},h||s,m]},[{},null,1]).slice(0,2)}function Ts(a,...n){if(a==null)return[null,null];for(const[r,s]of n){const l=r.exec(a);if(l)return s(l)}return[null,null]}function Aw(...a){return(n,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Yr(n[r+l]);return[s,null,r+l]}}const _w=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,DN=`(?:${_w.source}?(?:\\[(${jw.source})\\])?)?`,Wh=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Dw=RegExp(`${Wh.source}${DN}`),ep=RegExp(`(?:[Tt]${Dw.source})?`),MN=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,RN=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zN=/(\d{4})-?(\d{3})/,LN=Aw("weekYear","weekNumber","weekDay"),BN=Aw("year","ordinal"),UN=/(\d{4})-(\d\d)-(\d\d)/,Mw=RegExp(`${Wh.source} ?(?:${_w.source}|(${jw.source}))?`),IN=RegExp(`(?: ${Mw.source})?`);function fs(a,n,r){const s=a[n];return Ge(s)?r:Yr(s)}function $N(a,n){return[{year:fs(a,n),month:fs(a,n+1,1),day:fs(a,n+2,1)},null,n+3]}function Ns(a,n){return[{hours:fs(a,n,0),minutes:fs(a,n+1,0),seconds:fs(a,n+2,0),milliseconds:Qh(a[n+3])},null,n+4]}function $o(a,n){const r=!a[n]&&!a[n+1],s=Zc(a[n+1],a[n+2]),l=r?null:$n.instance(s);return[{},l,n+3]}function Ho(a,n){const r=a[n]?Ya.create(a[n]):null;return[{},r,n+1]}const HN=RegExp(`^T?${Wh.source}$`),VN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function qN(a){const[n,r,s,l,c,d,h,m,y]=a,v=n[0]==="-",b=m&&m[0]==="-",x=(k,j=!1)=>k!==void 0&&(j||k&&v)?-k:k;return[{years:x(mi(r)),months:x(mi(s)),weeks:x(mi(l)),days:x(mi(c)),hours:x(mi(d)),minutes:x(mi(h)),seconds:x(mi(m),m==="-0"),milliseconds:x(Qh(y),b)}]}const GN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function tp(a,n,r,s,l,c,d){const h={year:n.length===2?Sh(Yr(n)):Yr(n),month:xw.indexOf(r)+1,day:Yr(s),hour:Yr(l),minute:Yr(c)};return d&&(h.second=Yr(d)),a&&(h.weekday=a.length>3?kw.indexOf(a)+1:Cw.indexOf(a)+1),h}const YN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function FN(a){const[,n,r,s,l,c,d,h,m,y,v,b]=a,x=tp(n,l,s,r,c,d,h);let k;return m?k=GN[m]:y?k=0:k=Zc(v,b),[x,new $n(k)]}function PN(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ZN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,XN=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,KN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function V0(a){const[,n,r,s,l,c,d,h]=a;return[tp(n,l,s,r,c,d,h),$n.utcInstance]}function QN(a){const[,n,r,s,l,c,d,h]=a;return[tp(n,h,r,s,l,c,d),$n.utcInstance]}const JN=ks(MN,ep),WN=ks(RN,ep),eO=ks(zN,ep),tO=ks(Dw),Rw=Cs($N,Ns,$o,Ho),nO=Cs(LN,Ns,$o,Ho),aO=Cs(BN,Ns,$o,Ho),rO=Cs(Ns,$o,Ho);function iO(a){return Ts(a,[JN,Rw],[WN,nO],[eO,aO],[tO,rO])}function sO(a){return Ts(PN(a),[YN,FN])}function oO(a){return Ts(a,[ZN,V0],[XN,V0],[KN,QN])}function lO(a){return Ts(a,[VN,qN])}const cO=Cs(Ns);function uO(a){return Ts(a,[HN,cO])}const dO=ks(UN,IN),fO=ks(Mw),hO=Cs(Ns,$o,Ho);function pO(a){return Ts(a,[dO,Rw],[fO,hO])}const q0="Invalid Duration",zw={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},mO={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...zw},ga=146097/400,rs=146097/4800,yO={years:{quarters:4,months:12,weeks:ga/7,days:ga,hours:ga*24,minutes:ga*24*60,seconds:ga*24*60*60,milliseconds:ga*24*60*60*1e3},quarters:{months:3,weeks:ga/28,days:ga/4,hours:ga*24/4,minutes:ga*24*60/4,seconds:ga*24*60*60/4,milliseconds:ga*24*60*60*1e3/4},months:{weeks:rs/7,days:rs,hours:rs*24,minutes:rs*24*60,seconds:rs*24*60*60,milliseconds:rs*24*60*60*1e3},...zw},bi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],gO=bi.slice(0).reverse();function pr(a,n,r=!1){const s={values:r?n.values:{...a.values,...n.values||{}},loc:a.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||a.conversionAccuracy,matrix:n.matrix||a.matrix};return new yt(s)}function Lw(a,n){let r=n.milliseconds??0;for(const s of gO.slice(1))n[s]&&(r+=n[s]*a[s].milliseconds);return r}function G0(a,n){const r=Lw(a,n)<0?-1:1;bi.reduceRight((s,l)=>{if(Ge(n[l]))return s;if(s){const c=n[s]*r,d=a[l][s],h=Math.floor(c/d);n[l]+=h*r,n[s]-=h*d*r}return l},null),bi.reduce((s,l)=>{if(Ge(n[l]))return s;if(s){const c=n[s]%1;n[s]-=c,n[l]+=c*a[s][l]}return l},null)}function Y0(a){const n={};for(const[r,s]of Object.entries(a))s!==0&&(n[r]=s);return n}class yt{constructor(n){const r=n.conversionAccuracy==="longterm"||!1;let s=r?yO:mO;n.matrix&&(s=n.matrix),this.values=n.values,this.loc=n.loc||Tt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(n,r){return yt.fromObject({milliseconds:n},r)}static fromObject(n,r={}){if(n==null||typeof n!="object")throw new Un(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new yt({values:Lc(n,yt.normalizeUnit),loc:Tt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(n){if(Xr(n))return yt.fromMillis(n);if(yt.isDuration(n))return n;if(typeof n=="object")return yt.fromObject(n);throw new Un(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,r){const[s]=lO(n);return s?yt.fromObject(s,r):yt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,r){const[s]=uO(n);return s?yt.fromObject(s,r):yt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,r=null){if(!n)throw new Un("need to specify a reason the Duration is invalid");const s=n instanceof _a?n:new _a(n,r);if(Zt.throwOnInvalid)throw new GT(s);return new yt({invalid:s})}static normalizeUnit(n){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!r)throw new q1(n);return r}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?In.create(this.loc,s).formatDurationFromString(this,n):q0}toHuman(n={}){if(!this.isValid)return q0;const r=n.showZeros!==!1,s=bi.map(l=>{const c=this.values[l];return Ge(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=Jh(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},Ye.fromMillis(r,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Lw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const r=yt.fromDurationLike(n),s={};for(const l of bi)(vs(r.values,l)||vs(this.values,l))&&(s[l]=r.get(l)+this.get(l));return pr(this,{values:s},!0)}minus(n){if(!this.isValid)return this;const r=yt.fromDurationLike(n);return this.plus(r.negate())}mapUnits(n){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=Sw(n(this.values[s],s));return pr(this,{values:r},!0)}get(n){return this[yt.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const r={...this.values,...Lc(n,yt.normalizeUnit)};return pr(this,{values:r})}reconfigure({locale:n,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const d={loc:this.loc.clone({locale:n,numberingSystem:r}),matrix:l,conversionAccuracy:s};return pr(this,d)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return G0(this.matrix,n),pr(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=Y0(this.normalize().shiftToAll().toObject());return pr(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(d=>yt.normalizeUnit(d));const r={},s={},l=this.toObject();let c;for(const d of bi)if(n.indexOf(d)>=0){c=d;let h=0;for(const y in s)h+=this.matrix[y][d]*s[y],s[y]=0;Xr(l[d])&&(h+=l[d]);const m=Math.trunc(h);r[d]=m,s[d]=(h*1e3-m*1e3)/1e3}else Xr(l[d])&&(s[d]=l[d]);for(const d in s)s[d]!==0&&(r[c]+=d===c?s[d]:s[d]/this.matrix[c][d]);return G0(this.matrix,r),pr(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=this.values[r]===0?0:-this.values[r];return pr(this,{values:n},!0)}removeZeros(){if(!this.isValid)return this;const n=Y0(this.values);return pr(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of bi)if(!r(this.values[s],n.values[s]))return!1;return!0}}const is="Invalid Interval";function vO(a,n){return!a||!a.isValid?Pt.invalid("missing or invalid start"):!n||!n.isValid?Pt.invalid("missing or invalid end"):n<a?Pt.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${n.toISO()}`):null}class Pt{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,r=null){if(!n)throw new Un("need to specify a reason the Interval is invalid");const s=n instanceof _a?n:new _a(n,r);if(Zt.throwOnInvalid)throw new qT(s);return new Pt({invalid:s})}static fromDateTimes(n,r){const s=So(n),l=So(r),c=vO(s,l);return c??new Pt({start:s,end:l})}static after(n,r){const s=yt.fromDurationLike(r),l=So(n);return Pt.fromDateTimes(l,l.plus(s))}static before(n,r){const s=yt.fromDurationLike(r),l=So(n);return Pt.fromDateTimes(l.minus(s),l)}static fromISO(n,r){const[s,l]=(n||"").split("/",2);if(s&&l){let c,d;try{c=Ye.fromISO(s,r),d=c.isValid}catch{d=!1}let h,m;try{h=Ye.fromISO(l,r),m=h.isValid}catch{m=!1}if(d&&m)return Pt.fromDateTimes(c,h);if(d){const y=yt.fromISO(l,r);if(y.isValid)return Pt.after(c,y)}else if(m){const y=yt.fromISO(s,r);if(y.isValid)return Pt.before(h,y)}}return Pt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(n,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(n,r),Math.floor(l.diff(s,n).get(n))+(l.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:r}={}){return this.isValid?Pt.fromDateTimes(n||this.s,r||this.e):this}splitAt(...n){if(!this.isValid)return[];const r=n.map(So).filter(d=>this.contains(d)).sort((d,h)=>d.toMillis()-h.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const d=r[c]||this.e,h=+d>+this.e?this.e:d;s.push(Pt.fromDateTimes(l,h)),l=h,c+=1}return s}splitBy(n){const r=yt.fromDurationLike(n);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const d=[];for(;s<this.e;){const h=this.start.plus(r.mapUnits(m=>m*l));c=+h>+this.e?this.e:h,d.push(Pt.fromDateTimes(s,c)),s=c,l+=1}return d}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const r=this.s>n.s?this.s:n.s,s=this.e<n.e?this.e:n.e;return r>=s?null:Pt.fromDateTimes(r,s)}union(n){if(!this.isValid)return this;const r=this.s<n.s?this.s:n.s,s=this.e>n.e?this.e:n.e;return Pt.fromDateTimes(r,s)}static merge(n){const[r,s]=n.sort((l,c)=>l.s-c.s).reduce(([l,c],d)=>c?c.overlaps(d)||c.abutsStart(d)?[l,c.union(d)]:[l.concat([c]),d]:[l,d],[[],null]);return s&&r.push(s),r}static xor(n){let r=null,s=0;const l=[],c=n.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),d=Array.prototype.concat(...c),h=d.sort((m,y)=>m.time-y.time);for(const m of h)s+=m.type==="s"?1:-1,s===1?r=m.time:(r&&+r!=+m.time&&l.push(Pt.fromDateTimes(r,m.time)),r=null);return Pt.merge(l)}difference(...n){return Pt.xor([this].concat(n)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:is}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=Mc,r={}){return this.isValid?In.create(this.s.loc.clone(r),n).formatInterval(this):is}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:is}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:is}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:is}toFormat(n,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(n)}${r}${this.e.toFormat(n)}`:is}toDuration(n,r){return this.isValid?this.e.diff(this.s,n,r):yt.invalid(this.invalidReason)}mapEndpoints(n){return Pt.fromDateTimes(n(this.s),n(this.e))}}class Co{static hasDST(n=Zt.defaultZone){const r=Ye.now().setZone(n).set({month:12});return!n.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(n){return Ya.isValidZone(n)}static normalizeZone(n){return Fr(n,Zt.defaultZone)}static getStartOfWeek({locale:n=null,locObj:r=null}={}){return(r||Tt.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:r=null}={}){return(r||Tt.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:r=null}={}){return(r||Tt.create(n)).getWeekendDays().slice()}static months(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Tt.create(r,s,c)).months(n)}static monthsFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Tt.create(r,s,c)).months(n,!0)}static weekdays(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Tt.create(r,s,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Tt.create(r,s,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return Tt.create(n).meridiems()}static eras(n="short",{locale:r=null}={}){return Tt.create(r,null,"gregory").eras(n)}static features(){return{relative:vw(),localeWeek:bw()}}}function F0(a,n){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(n)-r(a);return Math.floor(yt.fromMillis(s).as("days"))}function bO(a,n,r){const s=[["years",(m,y)=>y.year-m.year],["quarters",(m,y)=>y.quarter-m.quarter+(y.year-m.year)*4],["months",(m,y)=>y.month-m.month+(y.year-m.year)*12],["weeks",(m,y)=>{const v=F0(m,y);return(v-v%7)/7}],["days",F0]],l={},c=a;let d,h;for(const[m,y]of s)r.indexOf(m)>=0&&(d=m,l[m]=y(a,n),h=c.plus(l),h>n?(l[m]--,a=c.plus(l),a>n&&(h=a,l[m]--,a=c.plus(l))):a=h);return[a,l,h,d]}function wO(a,n,r,s){let[l,c,d,h]=bO(a,n,r);const m=n-l,y=r.filter(b=>["hours","minutes","seconds","milliseconds"].indexOf(b)>=0);y.length===0&&(d<n&&(d=l.plus({[h]:1})),d!==l&&(c[h]=(c[h]||0)+m/(d-l)));const v=yt.fromObject(c,s);return y.length>0?yt.fromMillis(m,s).shiftTo(...y).plus(v):v}const SO="missing Intl.DateTimeFormat.formatToParts support";function Et(a,n=r=>r){return{regex:a,deser:([r])=>n(dN(r))}}const xO="",Bw=`[ ${xO}]`,Uw=new RegExp(Bw,"g");function EO(a){return a.replace(/\./g,"\\.?").replace(Uw,Bw)}function P0(a){return a.replace(/\./g,"").replace(Uw," ").toLowerCase()}function ja(a,n){return a===null?null:{regex:RegExp(a.map(EO).join("|")),deser:([r])=>a.findIndex(s=>P0(r)===P0(s))+n}}function Z0(a,n){return{regex:a,deser:([,r,s])=>Zc(r,s),groups:n}}function fc(a){return{regex:a,deser:([n])=>n}}function kO(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function CO(a,n){const r=Oa(n),s=Oa(n,"{2}"),l=Oa(n,"{3}"),c=Oa(n,"{4}"),d=Oa(n,"{6}"),h=Oa(n,"{1,2}"),m=Oa(n,"{1,3}"),y=Oa(n,"{1,6}"),v=Oa(n,"{1,9}"),b=Oa(n,"{2,4}"),x=Oa(n,"{4,6}"),k=q=>({regex:RegExp(kO(q.val)),deser:([Q])=>Q,literal:!0}),Z=(q=>{if(a.literal)return k(q);switch(q.val){case"G":return ja(n.eras("short"),0);case"GG":return ja(n.eras("long"),0);case"y":return Et(y);case"yy":return Et(b,Sh);case"yyyy":return Et(c);case"yyyyy":return Et(x);case"yyyyyy":return Et(d);case"M":return Et(h);case"MM":return Et(s);case"MMM":return ja(n.months("short",!0),1);case"MMMM":return ja(n.months("long",!0),1);case"L":return Et(h);case"LL":return Et(s);case"LLL":return ja(n.months("short",!1),1);case"LLLL":return ja(n.months("long",!1),1);case"d":return Et(h);case"dd":return Et(s);case"o":return Et(m);case"ooo":return Et(l);case"HH":return Et(s);case"H":return Et(h);case"hh":return Et(s);case"h":return Et(h);case"mm":return Et(s);case"m":return Et(h);case"q":return Et(h);case"qq":return Et(s);case"s":return Et(h);case"ss":return Et(s);case"S":return Et(m);case"SSS":return Et(l);case"u":return fc(v);case"uu":return fc(h);case"uuu":return Et(r);case"a":return ja(n.meridiems(),0);case"kkkk":return Et(c);case"kk":return Et(b,Sh);case"W":return Et(h);case"WW":return Et(s);case"E":case"c":return Et(r);case"EEE":return ja(n.weekdays("short",!1),1);case"EEEE":return ja(n.weekdays("long",!1),1);case"ccc":return ja(n.weekdays("short",!0),1);case"cccc":return ja(n.weekdays("long",!0),1);case"Z":case"ZZ":return Z0(new RegExp(`([+-]${h.source})(?::(${s.source}))?`),2);case"ZZZ":return Z0(new RegExp(`([+-]${h.source})(${s.source})?`),2);case"z":return fc(/[a-z_+-/]{1,256}?/i);case" ":return fc(/[^\S\n\r]/);default:return k(q)}})(a)||{invalidReason:SO};return Z.token=a,Z}const TO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function NO(a,n,r){const{type:s,value:l}=a;if(s==="literal"){const m=/^\s+$/.test(l);return{literal:!m,val:m?" ":l}}const c=n[s];let d=s;s==="hour"&&(n.hour12!=null?d=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?d="hour12":d="hour24":d=r.hour12?"hour12":"hour24");let h=TO[d];if(typeof h=="object"&&(h=h[c]),h)return{literal:!1,val:h}}function OO(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function jO(a,n,r){const s=a.match(n);if(s){const l={};let c=1;for(const d in r)if(vs(r,d)){const h=r[d],m=h.groups?h.groups+1:1;!h.literal&&h.token&&(l[h.token.val[0]]=h.deser(s.slice(c,c+m))),c+=m}return[s,l]}else return[s,{}]}function AO(a){const n=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Ge(a.z)||(r=Ya.create(a.z)),Ge(a.Z)||(r||(r=new $n(a.Z)),s=a.Z),Ge(a.q)||(a.M=(a.q-1)*3+1),Ge(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ge(a.u)||(a.S=Qh(a.u)),[Object.keys(a).reduce((c,d)=>{const h=n(d);return h&&(c[h]=a[d]),c},{}),r,s]}let Lf=null;function _O(){return Lf||(Lf=Ye.fromMillis(1555555555555)),Lf}function DO(a,n){if(a.literal)return a;const r=In.macroTokenToFormatOpts(a.val),s=Vw(r,n);return s==null||s.includes(void 0)?a:s}function Iw(a,n){return Array.prototype.concat(...a.map(r=>DO(r,n)))}class $w{constructor(n,r){if(this.locale=n,this.format=r,this.tokens=Iw(In.parseFormat(r),n),this.units=this.tokens.map(s=>CO(s,n)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=OO(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(n){if(this.isValid){const[r,s]=jO(n,this.regex,this.handlers),[l,c,d]=s?AO(s):[null,null,void 0];if(vs(s,"a")&&vs(s,"H"))throw new cs("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:d}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Hw(a,n,r){return new $w(a,r).explainFromTokens(n)}function MO(a,n,r){const{result:s,zone:l,specificOffset:c,invalidReason:d}=Hw(a,n,r);return[s,l,c,d]}function Vw(a,n){if(!a)return null;const s=In.create(n,a).dtFormatter(_O()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(d=>NO(d,a,c))}const Bf="Invalid DateTime",X0=864e13;function To(a){return new _a("unsupported zone",`the zone "${a.name}" is not supported`)}function Uf(a){return a.weekData===null&&(a.weekData=Rc(a.c)),a.weekData}function If(a){return a.localWeekData===null&&(a.localWeekData=Rc(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function yi(a,n){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Ye({...r,...n,old:r})}function qw(a,n,r){let s=a-n*60*1e3;const l=r.offset(s);if(n===l)return[s,n];s-=(l-n)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function hc(a,n){a+=n*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function kc(a,n,r){return qw(Pc(a),n,r)}function K0(a,n){const r=a.o,s=a.c.year+Math.trunc(n.years),l=a.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,zc(s,l))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},d=yt.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),h=Pc(c);let[m,y]=qw(h,r,a.zone);return d!==0&&(m+=d,y=a.zone.offset(m)),{ts:m,o:y}}function ss(a,n,r,s,l,c){const{setZone:d,zone:h}=r;if(a&&Object.keys(a).length!==0||n){const m=n||h,y=Ye.fromObject(a,{...r,zone:m,specificOffset:c});return d?y:y.setZone(h)}else return Ye.invalid(new _a("unparsable",`the input "${l}" can't be parsed as ${s}`))}function pc(a,n,r=!0){return a.isValid?In.create(Tt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,n):null}function $f(a,n,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=mn(a.c.year,s?6:4),r==="year")return l;if(n){if(l+="-",l+=mn(a.c.month),r==="month")return l;l+="-"}else if(l+=mn(a.c.month),r==="month")return l;return l+=mn(a.c.day),l}function Q0(a,n,r,s,l,c,d){let h=!r||a.c.millisecond!==0||a.c.second!==0,m="";switch(d){case"day":case"month":case"year":break;default:if(m+=mn(a.c.hour),d==="hour")break;if(n){if(m+=":",m+=mn(a.c.minute),d==="minute")break;h&&(m+=":",m+=mn(a.c.second))}else{if(m+=mn(a.c.minute),d==="minute")break;h&&(m+=mn(a.c.second))}if(d==="second")break;h&&(!s||a.c.millisecond!==0)&&(m+=".",m+=mn(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?m+="Z":a.o<0?(m+="-",m+=mn(Math.trunc(-a.o/60)),m+=":",m+=mn(Math.trunc(-a.o%60))):(m+="+",m+=mn(Math.trunc(a.o/60)),m+=":",m+=mn(Math.trunc(a.o%60)))),c&&(m+="["+a.zone.ianaName+"]"),m}const Gw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},RO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Cc=["year","month","day","hour","minute","second","millisecond"],LO=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],BO=["year","ordinal","hour","minute","second","millisecond"];function Tc(a){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!n)throw new q1(a);return n}function J0(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Tc(a)}}function UO(a){if(No===void 0&&(No=Zt.now()),a.type!=="iana")return a.offset(No);const n=a.name;let r=xh.get(n);return r===void 0&&(r=a.offset(No),xh.set(n,r)),r}function W0(a,n){const r=Fr(n.zone,Zt.defaultZone);if(!r.isValid)return Ye.invalid(To(r));const s=Tt.fromObject(n);let l,c;if(Ge(a.year))l=Zt.now();else{for(const m of Cc)Ge(a[m])&&(a[m]=Gw[m]);const d=yw(a)||gw(a);if(d)return Ye.invalid(d);const h=UO(r);[l,c]=kc(a,h,r)}return new Ye({ts:l,zone:r,loc:s,o:c})}function eb(a,n,r){const s=Ge(r.round)?!0:r.round,l=Ge(r.rounding)?"trunc":r.rounding,c=(h,m)=>(h=Jh(h,s||r.calendary?0:2,r.calendary?"round":l),n.loc.clone(r).relFormatter(r).format(h,m)),d=h=>r.calendary?n.hasSame(a,h)?0:n.startOf(h).diff(a.startOf(h),h).get(h):n.diff(a,h).get(h);if(r.unit)return c(d(r.unit),r.unit);for(const h of r.units){const m=d(h);if(Math.abs(m)>=1)return c(m,h)}return c(a>n?-0:0,r.units[r.units.length-1])}function tb(a){let n={},r;return a.length>0&&typeof a[a.length-1]=="object"?(n=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[n,r]}let No;const xh=new Map;class Ye{constructor(n){const r=n.zone||Zt.defaultZone;let s=n.invalid||(Number.isNaN(n.ts)?new _a("invalid input"):null)||(r.isValid?null:To(r));this.ts=Ge(n.ts)?Zt.now():n.ts;let l=null,c=null;if(!s)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(r))[l,c]=[n.old.c,n.old.o];else{const h=Xr(n.o)&&!n.old?n.o:r.offset(this.ts);l=hc(this.ts,h),s=Number.isNaN(l.year)?new _a("invalid input"):null,l=s?null:l,c=s?null:h}this._zone=r,this.loc=n.loc||Tt.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Ye({})}static local(){const[n,r]=tb(arguments),[s,l,c,d,h,m,y]=r;return W0({year:s,month:l,day:c,hour:d,minute:h,second:m,millisecond:y},n)}static utc(){const[n,r]=tb(arguments),[s,l,c,d,h,m,y]=r;return n.zone=$n.utcInstance,W0({year:s,month:l,day:c,hour:d,minute:h,second:m,millisecond:y},n)}static fromJSDate(n,r={}){const s=yN(n)?n.valueOf():NaN;if(Number.isNaN(s))return Ye.invalid("invalid input");const l=Fr(r.zone,Zt.defaultZone);return l.isValid?new Ye({ts:s,zone:l,loc:Tt.fromObject(r)}):Ye.invalid(To(l))}static fromMillis(n,r={}){if(Xr(n))return n<-X0||n>X0?Ye.invalid("Timestamp out of range"):new Ye({ts:n,zone:Fr(r.zone,Zt.defaultZone),loc:Tt.fromObject(r)});throw new Un(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,r={}){if(Xr(n))return new Ye({ts:n*1e3,zone:Fr(r.zone,Zt.defaultZone),loc:Tt.fromObject(r)});throw new Un("fromSeconds requires a numerical input")}static fromObject(n,r={}){n=n||{};const s=Fr(r.zone,Zt.defaultZone);if(!s.isValid)return Ye.invalid(To(s));const l=Tt.fromObject(r),c=Lc(n,J0),{minDaysInFirstWeek:d,startOfWeek:h}=U0(c,l),m=Zt.now(),y=Ge(r.specificOffset)?s.offset(m):r.specificOffset,v=!Ge(c.ordinal),b=!Ge(c.year),x=!Ge(c.month)||!Ge(c.day),k=b||x,j=c.weekYear||c.weekNumber;if((k||v)&&j)throw new cs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&v)throw new cs("Can't mix ordinal dates with month/day");const Z=j||c.weekday&&!k;let q,Q,K=hc(m,y);Z?(q=LO,Q=RO,K=Rc(K,d,h)):v?(q=BO,Q=zO,K=zf(K)):(q=Cc,Q=Gw);let L=!1;for(const pe of q){const Re=c[pe];Ge(Re)?L?c[pe]=Q[pe]:c[pe]=K[pe]:L=!0}const Y=Z?hN(c,d,h):v?pN(c):yw(c),de=Y||gw(c);if(de)return Ye.invalid(de);const be=Z?L0(c,d,h):v?B0(c):c,[H,ue]=kc(be,y,s),re=new Ye({ts:H,zone:s,o:ue,loc:l});return c.weekday&&k&&n.weekday!==re.weekday?Ye.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${re.toISO()}`):re.isValid?re:Ye.invalid(re.invalid)}static fromISO(n,r={}){const[s,l]=iO(n);return ss(s,l,r,"ISO 8601",n)}static fromRFC2822(n,r={}){const[s,l]=sO(n);return ss(s,l,r,"RFC 2822",n)}static fromHTTP(n,r={}){const[s,l]=oO(n);return ss(s,l,r,"HTTP",r)}static fromFormat(n,r,s={}){if(Ge(n)||Ge(r))throw new Un("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[h,m,y,v]=MO(d,n,r);return v?Ye.invalid(v):ss(h,m,s,`format ${r}`,n,y)}static fromString(n,r,s={}){return Ye.fromFormat(n,r,s)}static fromSQL(n,r={}){const[s,l]=pO(n);return ss(s,l,r,"SQL",n)}static invalid(n,r=null){if(!n)throw new Un("need to specify a reason the DateTime is invalid");const s=n instanceof _a?n:new _a(n,r);if(Zt.throwOnInvalid)throw new VT(s);return new Ye({invalid:s})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,r={}){const s=Vw(n,Tt.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(n,r={}){return Iw(In.parseFormat(n),Tt.fromObject(r)).map(l=>l.val).join("")}static resetCache(){No=void 0,xh.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Uf(this).weekYear:NaN}get weekNumber(){return this.isValid?Uf(this).weekNumber:NaN}get weekday(){return this.isValid?Uf(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?If(this).weekday:NaN}get localWeekNumber(){return this.isValid?If(this).weekNumber:NaN}get localWeekYear(){return this.isValid?If(this).weekYear:NaN}get ordinal(){return this.isValid?zf(this.c).ordinal:NaN}get monthShort(){return this.isValid?Co.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Co.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Co.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Co.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,r=6e4,s=Pc(this.c),l=this.zone.offset(s-n),c=this.zone.offset(s+n),d=this.zone.offset(s-l*r),h=this.zone.offset(s-c*r);if(d===h)return[this];const m=s-d*r,y=s-h*r,v=hc(m,d),b=hc(y,h);return v.hour===b.hour&&v.minute===b.minute&&v.second===b.second&&v.millisecond===b.millisecond?[yi(this,{ts:m}),yi(this,{ts:y})]:[this]}get isInLeapYear(){return Io(this.year)}get daysInMonth(){return zc(this.year,this.month)}get daysInYear(){return this.isValid?ds(this.year):NaN}get weeksInWeekYear(){return this.isValid?zo(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?zo(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:r,numberingSystem:s,calendar:l}=In.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(n=0,r={}){return this.setZone($n.instance(n),r)}toLocal(){return this.setZone(Zt.defaultZone)}setZone(n,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(n=Fr(n,Zt.defaultZone),n.equals(this.zone))return this;if(n.isValid){let l=this.ts;if(r||s){const c=n.offset(this.ts),d=this.toObject();[l]=kc(d,c,n)}return yi(this,{ts:l,zone:n})}else return Ye.invalid(To(n))}reconfigure({locale:n,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:n,numberingSystem:r,outputCalendar:s});return yi(this,{loc:l})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const r=Lc(n,J0),{minDaysInFirstWeek:s,startOfWeek:l}=U0(r,this.loc),c=!Ge(r.weekYear)||!Ge(r.weekNumber)||!Ge(r.weekday),d=!Ge(r.ordinal),h=!Ge(r.year),m=!Ge(r.month)||!Ge(r.day),y=h||m,v=r.weekYear||r.weekNumber;if((y||d)&&v)throw new cs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new cs("Can't mix ordinal dates with month/day");let b;c?b=L0({...Rc(this.c,s,l),...r},s,l):Ge(r.ordinal)?(b={...this.toObject(),...r},Ge(r.day)&&(b.day=Math.min(zc(b.year,b.month),b.day))):b=B0({...zf(this.c),...r});const[x,k]=kc(b,this.o,this.zone);return yi(this,{ts:x,o:k})}plus(n){if(!this.isValid)return this;const r=yt.fromDurationLike(n);return yi(this,K0(this,r))}minus(n){if(!this.isValid)return this;const r=yt.fromDurationLike(n).negate();return yi(this,K0(this,r))}startOf(n,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=yt.normalizeUnit(n);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:d}=this;d<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(n,r){return this.isValid?this.plus({[n]:1}).startOf(n,r).minus(1):this}toFormat(n,r={}){return this.isValid?In.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,n):Bf}toLocaleString(n=Mc,r={}){return this.isValid?In.create(this.loc.clone(r),n).formatDateTime(this):Bf}toLocaleParts(n={}){return this.isValid?In.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:d="milliseconds"}={}){if(!this.isValid)return null;d=Tc(d);const h=n==="extended";let m=$f(this,h,d);return Cc.indexOf(d)>=3&&(m+="T"),m+=Q0(this,h,r,s,l,c,d),m}toISODate({format:n="extended",precision:r="day"}={}){return this.isValid?$f(this,n==="extended",Tc(r)):null}toISOWeekDate(){return pc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:d="extended",precision:h="milliseconds"}={}){return this.isValid?(h=Tc(h),(l&&Cc.indexOf(h)>=3?"T":"")+Q0(this,d==="extended",r,n,s,c,h)):null}toRFC2822(){return pc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return pc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?$f(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||n)&&(s&&(l+=" "),r?l+="z":n&&(l+="ZZ")),pc(this,l,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():Bf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const r={...this.c};return n.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,r="milliseconds",s={}){if(!this.isValid||!n.isValid)return yt.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=gN(r).map(yt.normalizeUnit),d=n.valueOf()>this.valueOf(),h=d?this:n,m=d?n:this,y=wO(h,m,c,l);return d?y.negate():y}diffNow(n="milliseconds",r={}){return this.diff(Ye.now(),n,r)}until(n){return this.isValid?Pt.fromDateTimes(this,n):this}hasSame(n,r,s){if(!this.isValid)return!1;const l=n.valueOf(),c=this.setZone(n.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const r=n.base||Ye.fromObject({},{zone:this.zone}),s=n.padding?this<r?-n.padding:n.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=n.unit;return Array.isArray(n.unit)&&(l=n.unit,c=void 0),eb(r,this.plus(s),{...n,numeric:"always",units:l,unit:c})}toRelativeCalendar(n={}){return this.isValid?eb(n.base||Ye.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(Ye.isDateTime))throw new Un("min requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.min)}static max(...n){if(!n.every(Ye.isDateTime))throw new Un("max requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.max)}static fromFormatExplain(n,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return Hw(d,n,r)}static fromStringExplain(n,r,s={}){return Ye.fromFormatExplain(n,r,s)}static buildFormatParser(n,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=Tt.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new $w(c,n)}static fromFormatParser(n,r,s={}){if(Ge(n)||Ge(r))throw new Un("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!d.equals(r.locale))throw new Un(`fromFormatParser called with a locale of ${d}, but the format parser was created for ${r.locale}`);const{result:h,zone:m,specificOffset:y,invalidReason:v}=r.explainFromTokens(n);return v?Ye.invalid(v):ss(h,m,s,`format ${r.format}`,n,y)}static get DATE_SHORT(){return Mc}static get DATE_MED(){return G1}static get DATE_MED_WITH_WEEKDAY(){return YT}static get DATE_FULL(){return Y1}static get DATE_HUGE(){return F1}static get TIME_SIMPLE(){return P1}static get TIME_WITH_SECONDS(){return Z1}static get TIME_WITH_SHORT_OFFSET(){return X1}static get TIME_WITH_LONG_OFFSET(){return K1}static get TIME_24_SIMPLE(){return Q1}static get TIME_24_WITH_SECONDS(){return J1}static get TIME_24_WITH_SHORT_OFFSET(){return W1}static get TIME_24_WITH_LONG_OFFSET(){return ew}static get DATETIME_SHORT(){return tw}static get DATETIME_SHORT_WITH_SECONDS(){return nw}static get DATETIME_MED(){return aw}static get DATETIME_MED_WITH_SECONDS(){return rw}static get DATETIME_MED_WITH_WEEKDAY(){return FT}static get DATETIME_FULL(){return iw}static get DATETIME_FULL_WITH_SECONDS(){return sw}static get DATETIME_HUGE(){return ow}static get DATETIME_HUGE_WITH_SECONDS(){return lw}}function So(a){if(Ye.isDateTime(a))return a;if(a&&a.valueOf&&Xr(a.valueOf()))return Ye.fromJSDate(a);if(a&&typeof a=="object")return Ye.fromObject(a);throw new Un(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const IO="3.7.2",$O=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Ye,Duration:yt,FixedOffsetZone:$n,IANAZone:Ya,Info:Co,Interval:Pt,InvalidZone:dw,Settings:Zt,SystemZone:Uo,VERSION:IO,Zone:Es},Symbol.toStringTag,{value:"Module"}));window.Rete=ME;window.React=rE;window.RefComponent=$h;window.luxon=$O;window.nodeRegistry=Bn;window.sockets=N1;window.socket=ge;window.apiUrl=Sn;window.getApiBase=qc;window.apiFetch=async function(a,n={}){const r=Sn(a);return fetch(r,n)};let Kr={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const Eh=new Set;function Yw(a){return Eh.add(a),a({...Kr}),()=>Eh.delete(a)}function Vr(a){Kr={...Kr,...a},Eh.forEach(n=>n({...Kr}))}function HO(){return{...Kr}}async function VO(){Vr({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(Sn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const n=await a.json(),r=n.length,s=n.filter(m=>m.includes("/00_")),l=n.filter(m=>!m.includes("/00_"));Vr({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const m of s){const y=m.split("/").pop().replace(".js","");Vr({status:`Loading ${y}...`});try{await nb(Sn(m)),c++,Vr({loadedCount:c,progress:Math.round(c/r*100)})}catch(v){console.error(`[PluginLoader] Failed to load infrastructure ${m}`,v),Kr.failedPlugins.push({name:y,error:v.message})}}Vr({status:`Loading ${l.length} node plugins in parallel...`});const d=await Promise.allSettled(l.map(async m=>{const y=m.split("/").pop().replace(".js","");try{return await nb(Sn(m)),c++,Vr({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:y}}catch(v){return console.error(`[PluginLoader] Failed to load ${m}`,v),Kr.failedPlugins.push({name:y,error:v.message}),{success:!1,name:y,error:v.message}}})),h=Kr.failedPlugins.length;Vr({isLoading:!1,progress:100,status:h>0?`Loaded ${c} plugins (${h} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Vr({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function nb(a){return new Promise((n,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=n,s.onerror=r,document.body.appendChild(s)})}const Fw=E.createContext(null),ab={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function qO({id:a,type:n,message:r,duration:s,onRemove:l,action:c,actionLabel:d}){const[h,m]=E.useState(!1),y=ab[n]||ab.info;E.useEffect(()=>{if(s>0){const x=setTimeout(()=>{m(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(x)}},[a,s,l]);const v=()=>{m(!0),setTimeout(()=>l(a),300)},b=()=>{c&&c(),v()};return p.jsxs("div",{className:`toast ${y.className} ${h?"toast-exit":""}`,children:[p.jsx("span",{className:"toast-icon",children:y.icon}),p.jsx("span",{className:"toast-message",children:r}),c&&d&&p.jsx("button",{className:"toast-action",onClick:b,children:d}),p.jsx("button",{className:"toast-close",onClick:v,children:""})]})}function GO({children:a}){const[n,r]=E.useState([]);let s=0;const l=E.useCallback((h,m,y={})=>{const v=++s,b=typeof y=="number"?y:y.duration??4e3,x=typeof y=="object"?y.action:null,k=typeof y=="object"?y.actionLabel:null;return r(j=>[...j,{id:v,type:h,message:m,duration:b,action:x,actionLabel:k}]),v},[]),c=E.useCallback(h=>{r(m=>m.filter(y=>y.id!==h))},[]),d={success:(h,m)=>l("success",h,m),error:(h,m)=>l("error",h,typeof m=="number"?m:{duration:6e3,...m}),warning:(h,m)=>l("warning",h,m),info:(h,m)=>l("info",h,m),dismiss:c,dismissAll:()=>r([])};return p.jsxs(Fw.Provider,{value:d,children:[a,p.jsx("div",{className:"toast-container",children:n.map(h=>p.jsx(qO,{id:h.id,type:h.type,message:h.message,duration:h.duration,onRemove:c,action:h.action,actionLabel:h.actionLabel},h.id))})]})}function np(){const a=E.useContext(Fw);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function YO(){const a=np();return E.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const rb=window.location.pathname.includes("/api/hassio/ingress/");function FO({onSave:a,onLoad:n,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:d,isMerged:h=!1,onToggleMerged:m}){const[y,v]=E.useState(!1),[b,x]=E.useState(!1),[k,j]=E.useState(!1),[Z,q]=E.useState([]),[Q,K]=E.useState(!1),[L,Y]=E.useState(!1),[de,be]=E.useState(!1),[H,ue]=E.useState(null),re=np(),[pe,Re]=E.useState(()=>{const C=localStorage.getItem("dock-position");return C?JSON.parse(C):{x:20,y:20}}),[je,Je]=E.useState(!1),[rt,Ke]=E.useState({x:0,y:0}),[N,V]=E.useState(!0),[J,ve]=E.useState(!0),[B,S]=E.useState(!1),[_,O]=E.useState(new Date),[z,le]=E.useState({backend:ge.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[me,Oe]=E.useState({loaded:0,failed:0,total:0}),[Ze,Be]=E.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let We;const Nt=E.useRef(null),Ot=E.useRef(null);E.useEffect(()=>{(async()=>{try{const D=await fetch("/api/version");if(D.ok){const oe=await D.json();ue(oe.version)}}catch{}})()},[]),E.useEffect(()=>{We=Yw(D=>{let oe=0,fe=D.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(oe=window.nodeRegistry.getAll().length,(!fe||oe>fe)&&(fe=oe)):oe=D.loadedCount,Oe({loaded:oe,failed:D.failedPlugins?.length||0,total:fe})});const C=D=>{D.target.tagName==="INPUT"||D.target.tagName==="TEXTAREA"||D.target.isContentEditable||(D.key==="?"||D.shiftKey&&D.code==="Slash")&&(D.preventDefault(),x(!0))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[]),E.useEffect(()=>{const C=()=>{le(ze=>({...ze,backend:!0})),ge.emit("request-hue-status")},D=()=>le(ze=>({...ze,backend:!1})),oe=ze=>le(it=>({...it,ha:{connected:ze.connected,wsConnected:ze.wsConnected,deviceCount:ze.deviceCount||0}})),fe=ze=>{ze.hue&&le(it=>({...it,hue:ze.hue})),ze.kasa&&le(it=>({...it,kasa:ze.kasa}))},we=ze=>{le(it=>({...it,hue:{connected:ze.connected,deviceCount:ze.deviceCount||0,bridgeIp:ze.bridgeIp||null}}))};ge.on("connect",C),ge.on("disconnect",D),ge.on("ha-connection-status",oe),ge.on("device-counts",fe),ge.on("hue-connection-status",we);const Ce=ze=>Be(ze),$e=ze=>Be(it=>({...it,...ze,running:!0})),Fe=ze=>Be(it=>({...it,...ze,running:!1}));ge.on("engine-status",Ce),ge.on("engine-started",$e),ge.on("engine-stopped",Fe),le(ze=>({...ze,backend:ge.connected})),ge.connected&&(ge.emit("request-hue-status"),ge.emit("request-engine-status"));const bt=HO();let Le=0,He=bt.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(Le=window.nodeRegistry.getAll().length,(!He||Le>He)&&(He=Le)):Le=bt.loadedCount,Oe({loaded:Le,failed:bt.failedPlugins?.length||0,total:He}),()=>{ge.off("connect",C),ge.off("disconnect",D),ge.off("ha-connection-status",oe),ge.off("device-counts",fe),ge.off("hue-connection-status",we),ge.off("engine-status",Ce),ge.off("engine-started",$e),ge.off("engine-stopped",Fe),We&&We()}},[]),E.useEffect(()=>{const C=setInterval(()=>{O(new Date)},1e3);return()=>clearInterval(C)},[]);const zn=()=>{const C={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return _.toLocaleDateString("en-US",C)};E.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(pe))},[pe]);const vn=C=>{h||C.target.closest(".dock-header")&&(Je(!0),Ke({x:C.clientX-pe.x,y:C.clientY-pe.y}))},cn=C=>{je&&Re({x:C.clientX-rt.x,y:C.clientY-rt.y})},Nn=()=>{Je(!1)};E.useEffect(()=>{if(je)return window.addEventListener("mousemove",cn),window.addEventListener("mouseup",Nn),()=>{window.removeEventListener("mousemove",cn),window.removeEventListener("mouseup",Nn)}},[je,rt]);const Qe=()=>{Ot.current?.click()},F=C=>{const D=C.target.files?.[0];if(D){const oe=new FileReader;oe.onload=fe=>{try{const we=JSON.parse(fe.target.result);c(we)}catch(we){console.error("Failed to parse JSON:",we),alert("Invalid JSON file")}},oe.readAsText(D)}C.target.value=""},ie=async()=>{j(!0),K(!0);try{const C=await ln("/api/engine/graphs");if(C.ok){const D=await C.json();q(D.graphs||[])}else re.error("Failed to load graphs list"),q([])}catch(C){console.error("Failed to fetch server graphs:",C),re.error("Failed to connect to server"),q([])}finally{K(!1)}},ee=async C=>{try{const D=await ln(`/api/engine/graphs/${encodeURIComponent(C)}`);if(D.ok){const oe=await D.json();oe.graph&&(c(oe.graph),j(!1),re.success(`Loaded: ${C.replace(".json","")}`))}else re.error("Failed to load graph")}catch(D){console.error("Failed to load graph:",D),re.error("Failed to load graph")}},Ae=async(C,D)=>{D.stopPropagation();try{const oe=await ln(`/api/engine/graphs/${encodeURIComponent(C)}`);if(oe.ok){const fe=await oe.json();if(fe.graph){const we=new Blob([JSON.stringify(fe.graph,null,2)],{type:"application/json"}),Ce=URL.createObjectURL(we),$e=document.createElement("a");$e.href=Ce,$e.download=C.endsWith(".json")?C:`${C}.json`,$e.click(),URL.revokeObjectURL(Ce),re.success(`Downloaded: ${C.replace(".json","")}`)}}else re.error("Failed to download graph")}catch(oe){console.error("Failed to download graph:",oe),re.error("Failed to download graph")}},Se=async()=>{if(!L){Y(!0);try{const C=await ln("/api/update/check?force=true");if(!C.ok){const oe=await C.text();throw new Error(oe||`HTTP ${C.status}`)}const D=await C.json();if(D.isAddon){D.hasUpdate?re.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):re.success(` You're up to date! (v${D.currentVersion})`,4e3);return}D.hasUpdate?re.info(` Update available: ${D.currentVersion}  ${D.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{ge.emit("request-show-update-modal",D),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:D}))}}):re.success(` You're up to date! (v${D.currentVersion})`,4e3)}catch(C){console.error("Failed to check for updates:",C),re.error("Failed to check for updates: "+C.message,5e3)}finally{Y(!1)}}},se=async()=>{if(!de){be(!0);try{const C=await ln("/api/update/plugins/check");if(!C.ok)throw new Error(`HTTP ${C.status}`);const D=await C.json();if(!D.hasUpdates){re.success(" Plugins are up to date!",3e3);return}const oe=(D.newPlugins?.length||0)+(D.modifiedPlugins?.length||0);re.info(` ${oe} plugin update(s) available. Downloading...`,3e3);const fe=await ln("/api/update/plugins",{method:"POST"});if(!fe.ok)throw new Error(`HTTP ${fe.status}`);const we=await fe.json();we.success&&we.updated?.length>0?re.success(` Updated ${we.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):we.updated?.length===0?re.info("No plugins needed updating",3e3):re.error("Plugin update failed: "+(we.error||"Unknown error"),5e3)}catch(C){console.error("Failed to update plugins:",C),re.error("Failed to update plugins: "+C.message,5e3)}finally{be(!1)}}};return p.jsxs("div",{ref:Nt,className:`dock-container ${h?"dock-merged":""}`,style:{...h?{cursor:"default"}:{left:`${pe.x}px`,top:`${pe.y}px`,cursor:je?"grabbing":"default"}},onMouseDown:vn,children:[p.jsxs("div",{className:"dock-header",style:{cursor:h?"default":"grab"},children:[p.jsxs("div",{className:"dock-header-row",children:[p.jsx("span",{className:"dock-title",children:" Control Panel"}),p.jsx("button",{type:"button",className:"dock-btn-small",onClick:C=>{C.stopPropagation(),m?.()},onMouseDown:C=>C.stopPropagation(),title:h?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:h?"Pop out":"Merge"})]}),p.jsx("span",{className:"dock-datetime",children:zn()})]}),p.jsxs("div",{className:"dock-section",children:[p.jsx("div",{className:"dock-section-header",onClick:()=>V(!N),children:p.jsxs("span",{children:[N?"":""," Graph Tools ",d&&p.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),N&&p.jsxs("div",{className:"dock-section-content",children:[p.jsxs("button",{onClick:a,className:`dock-btn ${d?"dock-btn-unsaved":""}`,children:[" Save ",d&&"*"]}),p.jsx("button",{onClick:n,className:"dock-btn",children:" Load Last"}),p.jsx("button",{onClick:ie,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),p.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),p.jsx("button",{onClick:Qe,className:"dock-btn",children:" Import File"}),p.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),p.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),p.jsx("button",{onClick:()=>ge.emit(Ze.running?"stop-engine":"start-engine"),className:`dock-btn ${Ze.running?"dock-btn-active":""}`,title:Ze.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:Ze.running?" Stop Engine":" Start Engine"}),p.jsx("input",{ref:Ot,type:"file",accept:".json",style:{display:"none"},onChange:F})]})]}),p.jsxs("div",{className:"dock-section",children:[p.jsx("div",{className:"dock-section-header",onClick:()=>ve(!J),children:p.jsxs("span",{children:[J?"":""," Connection Status"]})}),J&&p.jsxs("div",{className:"dock-section-content dock-status-grid",children:[p.jsxs("div",{className:`dock-status-item ${z.backend?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Backend"}),p.jsx("span",{className:"dock-status-value",children:z.backend?"Connected":"Offline"})]}),p.jsxs("div",{className:`dock-status-item ${z.ha.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),p.jsx("span",{className:"dock-status-value",children:z.ha.connected?`${z.ha.deviceCount} devices`:"Offline"})]}),p.jsxs("div",{className:`dock-status-item ${z.hue.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),p.jsx("span",{className:"dock-status-value",children:z.hue.connected?`${z.hue.deviceCount||0} lights${z.hue.bridgeIp?` (${z.hue.bridgeIp})`:""}`:"Offline"})]}),z.kasa.deviceCount>0&&p.jsxs("div",{className:`dock-status-item ${z.kasa.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Kasa"}),p.jsxs("span",{className:"dock-status-value",children:[z.kasa.deviceCount," devices"]})]}),p.jsxs("div",{className:"dock-status-item plugins",children:[p.jsx("span",{className:"dock-status-dot",style:{background:me.failed>0?"#f59e0b":"#10b981"}}),p.jsx("span",{className:"dock-status-label",children:"Plugins"}),p.jsx("span",{className:"dock-status-value",children:me.total>0?`${me.loaded} / ${me.total} loaded${me.failed>0?` (${me.failed} failed)`:""}`:`${me.loaded} loaded`})]}),p.jsxs("div",{className:`dock-status-item ${Ze.running?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot",style:{background:Ze.running?"#10b981":"#6b7280"}}),p.jsx("span",{className:"dock-status-label",children:"Engine"}),p.jsx("span",{className:"dock-status-value",children:Ze.running?`Running (${Ze.nodeCount} nodes)`:"Stopped"})]})]})]}),p.jsx(qC,{isExpanded:B,onToggle:()=>S(!B)}),p.jsxs("div",{className:"dock-section",children:[p.jsxs("div",{className:"dock-section-content",children:[p.jsx("button",{onClick:()=>v(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),p.jsx("button",{onClick:()=>x(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),p.jsx("button",{onClick:async()=>{let C=H||"unknown";try{const we=await fetch("/api/version");we.ok&&(C=(await we.json()).version||C)}catch{}const D={version:C,userAgent:navigator.userAgent,isAddon:rb,backend:z.backend,ha:z.ha.connected,engine:Ze.running,plugins:me.loaded},oe=Object.entries(D).map(([we,Ce])=>`- **${we}**: ${Ce}`).join(`
`),fe=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");fe.searchParams.set("template","bug_report.md"),fe.searchParams.set("title","[Bug]: "),fe.searchParams.set("body",`##  Environment (auto-filled)
${oe}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(fe.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),p.jsx("button",{onClick:()=>{const C=`${window.location.origin}/tools/debug_dashboard.html`;window.open(C,"_blank")},className:"dock-btn",title:"Open Debug Dashboard in new tab",children:" Debug Dashboard"}),rb?p.jsx("button",{onClick:()=>re.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):p.jsx("button",{onClick:Se,disabled:L,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:L?" Checking...":" Check for Updates"}),p.jsx("button",{onClick:se,disabled:de,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:de?" Updating...":" Update Plugins"})]}),H&&p.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",H]})]}),p.jsx($C,{isOpen:y,onClose:()=>v(!1)}),p.jsx(VC,{isOpen:b,onClose:()=>x(!1)}),k&&p.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:p.jsxs("div",{className:"modal server-graphs-modal",onClick:C=>C.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:" Saved Graphs"}),p.jsx("button",{className:"modal-close",onClick:()=>j(!1),children:""})]}),p.jsx("div",{className:"modal-body",children:Q?p.jsx("div",{className:"loading-message",children:"Loading graphs..."}):Z.length===0?p.jsxs("div",{className:"empty-message",children:[p.jsx("p",{children:"No saved graphs found."}),p.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):p.jsx("div",{className:"graphs-list",children:Z.map((C,D)=>p.jsxs("div",{className:"graph-item",children:[p.jsxs("div",{className:"graph-info",onClick:()=>ee(C.name),title:"Click to load this graph",children:[p.jsx("span",{className:"graph-name",children:C.displayName}),p.jsx("span",{className:"graph-date",children:new Date(C.modified).toLocaleDateString()})]}),p.jsx("button",{className:"graph-download-btn",onClick:oe=>Ae(C.name,oe),title:"Download this graph to your computer",children:""})]},D))})})]})})]})}function PO({dockSlotRef:a}){const[n,r]=E.useState(!0),[s,l]=E.useState(!0),[c,d]=E.useState(null),[h,m]=E.useState(null),[y,v]=E.useState(ge?.connected??!1),[b,x]=E.useState({connected:!1,wsConnected:!1,deviceCount:0}),[k,j]=E.useState(new Map),[Z,q]=E.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[Q,K]=E.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),[L,Y]=E.useState(null),[de,be]=E.useState(null),H=E.useRef(null);E.useEffect(()=>{(async()=>{try{const V=await ln(Sn("/api/settings"));if(V.ok){const J=await V.json(),ve={tempSensor:J.FORECAST_TEMP_SENSOR||null,windSensor:J.FORECAST_WIND_SENSOR||null,windDirSensor:J.FORECAST_WIND_DIR_SENSOR||null,rainSensor:J.FORECAST_RAIN_SENSOR||null};(ve.tempSensor||ve.windSensor||ve.windDirSensor||ve.rainSensor)&&(be(ve),ue(ve))}}catch(V){console.warn("Could not fetch forecast sensor config:",V)}})()},[]);const ue=async N=>{if(!N)return;const V={source:"ha-sensors"};try{if(N.tempSensor){const J=await ln(Sn(`/api/lights/ha/${N.tempSensor}/state`));if(J.ok){const ve=await J.json();V.temp=parseFloat(ve.state)}}if(N.windSensor){const J=await ln(Sn(`/api/lights/ha/${N.windSensor}/state`));if(J.ok){const ve=await J.json();V.windSpeed=parseFloat(ve.state)}}if(N.windDirSensor){const J=await ln(Sn(`/api/lights/ha/${N.windDirSensor}/state`));if(J.ok){const ve=await J.json();V.windDir=parseFloat(ve.state)}}if(N.rainSensor){const J=await ln(Sn(`/api/lights/ha/${N.rainSensor}/state`));if(J.ok){const ve=await J.json();V.rainRate=parseFloat(ve.state)}}V.temp!==void 0&&Y(J=>({...J,...V}))}catch(J){console.warn("Error fetching sensor values:",J)}};E.useEffect(()=>{if(!ge)return;const N=()=>{v(!0),ge.emit("request-ha-status")},V=()=>{v(!1),x({connected:!1,wsConnected:!1,deviceCount:0})},J=S=>{x(S)};ge.on("connect",N),ge.on("disconnect",V),ge.on("ha-connection-status",J),ge.on("forecast-update",S=>{d(S)});const ve=S=>{Y(_=>_?.source==="ha-sensors"||de?.tempSensor?_:{temp:S.tempf,humidity:S.humidity,windSpeed:S.windspeedmph,windDir:S.winddir,rainRate:S.hourlyrainin,dailyRain:S.dailyrainin,source:S._source||"ambient"})};ge.on("weather-update",ve),de?.tempSensor||ge.emit("request-weather-update");const B=S=>{const{id:_,state:O,on:z,name:le}=S;if(!_)return;if(de){const Be=_.replace("ha_","");if(Be===de.tempSensor){const We=parseFloat(O);isNaN(We)||Y(Nt=>({...Nt,temp:We,source:"ha-sensors"}))}else if(Be===de.windSensor){const We=parseFloat(O);isNaN(We)||Y(Nt=>({...Nt,windSpeed:We}))}else if(Be===de.windDirSensor){const We=parseFloat(O);isNaN(We)||Y(Nt=>({...Nt,windDir:We}))}else if(Be===de.rainSensor){const We=parseFloat(O);isNaN(We)||Y(Nt=>({...Nt,rainRate:We}))}}const me=z!==void 0?z:O==="on"||O==="playing"||O==="open",Oe=le||S.friendly_name||S.attributes?.friendly_name||_.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(_.includes("light.")||_.includes("switch.")||_.startsWith("kasa_"))&&j(Be=>{const We=new Map(Be);return me?We.set(_,{name:Oe,on:!0}):We.delete(_),We})};return ge.on("device-state-update",B),ge.emit("request-forecast"),ge.connected&&(v(!0),ge.emit("request-ha-status")),()=>{ge.off("connect",N),ge.off("disconnect",V),ge.off("ha-connection-status",J),ge.off("forecast-update"),ge.off("weather-update",ve),ge.off("device-state-update",B)}},[de]);const re=()=>{ge?.emit("request-forecast"),de?.tempSensor?ue(de):ge?.emit("request-weather-update")},pe=N=>{if(N==null)return"";const V=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],J=Math.round(N/22.5)%16;return V[J]},Re=N=>{const V=(N||"").toLowerCase();return V.includes("clear")||V.includes("sun")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"5"}),p.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),p.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),p.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),p.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),p.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),p.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),p.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):V.includes("rain")||V.includes("drizzle")||V.includes("shower")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),p.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),p.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),p.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),p.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),p.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):V.includes("partly")||V.includes("partial")||V.includes("few")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),p.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),p.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),p.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),p.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),p.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),p.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):V.includes("snow")||V.includes("flurr")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),p.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),p.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),p.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),p.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),p.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),p.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):V.includes("thunder")||V.includes("storm")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),p.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):V.includes("fog")||V.includes("mist")||V.includes("haze")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),p.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),p.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},je=N=>{if(!N)return{day:"",date:""};let V;if(typeof N=="string"&&N.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const B=N.match(/(\w+),\s*(\w+)\s*(\d+)/);return B?{day:`${B[1]}, ${B[2]}`,date:B[3]}:{day:N,date:""}}if(V=new Date(parseInt(N)||N),isNaN(V.getTime()))return{day:N,date:""};const J=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${J[V.getUTCDay()]}, ${ve[V.getUTCMonth()]}`,date:`${V.getUTCDate()}`}},Je=()=>{if(!c||!c.length)return p.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(h!==null){const N=c[h],V=je(N.date||N.day);return p.jsxs("div",{className:"forecast-detail",children:[p.jsxs("div",{className:"forecast-detail-header",children:[p.jsx("button",{className:"detail-back-btn",onClick:()=>m(null),children:" Back"}),p.jsxs("span",{className:"detail-date",children:[V.day," ",V.date]})]}),p.jsxs("div",{className:"detail-main",children:[p.jsx("div",{className:"detail-icon",children:Re(N.conditions||N.condition)}),p.jsxs("div",{className:"detail-temps",children:[p.jsxs("div",{className:"detail-high",children:[N.high,""]}),p.jsxs("div",{className:"detail-low",children:[N.low,""]})]}),p.jsx("div",{className:"detail-condition",children:N.conditions||N.condition||"N/A"})]}),N.description&&p.jsx("div",{className:"detail-description",children:N.description}),p.jsxs("div",{className:"detail-stats",children:[p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Precipitation"}),p.jsx("span",{className:"stat-value",children:N.precipitation||N.precip||"0%"})]}),N.humidity&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Humidity"}),p.jsxs("span",{className:"stat-value",children:[N.humidity,"%"]})]}),N.wind&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Wind"}),p.jsx("span",{className:"stat-value",children:N.wind})]}),(N.sunrise||N.sunset)&&p.jsxs("div",{className:"detail-sun-times",children:[N.sunrise&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:" Sunrise"}),p.jsx("span",{className:"stat-value",children:N.sunrise})]}),N.sunset&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:" Sunset"}),p.jsx("span",{className:"stat-value",children:N.sunset})]})]})]})]})}return c.slice(0,5).map((N,V)=>{const J=je(N.date||N.day),ve=V===0;return p.jsxs("div",{className:`forecast-card ${ve&&L?"forecast-card-today":""}`,onClick:()=>m(V),children:[p.jsxs("div",{className:"forecast-row-top",children:[p.jsxs("div",{className:"forecast-date",children:[p.jsx("span",{className:"date-day",children:J.day}),p.jsx("span",{className:"date-num",children:J.date})]}),p.jsx("div",{className:"forecast-icon",children:Re(N.conditions||N.condition)})]}),ve&&L&&p.jsxs("div",{className:"station-data",children:[p.jsxs("div",{className:"station-current-temp",children:[Math.round(L.temp),"",p.jsx("span",{className:"station-label",children:"now"})]}),p.jsxs("div",{className:"station-details",children:[p.jsxs("span",{className:"station-detail",title:"Wind",children:[" ",Math.round(L.windSpeed||0)," mph ",pe(L.windDir)]}),L.rainRate>0&&p.jsxs("span",{className:"station-detail station-rain",title:"Rain Rate",children:[" ",L.rainRate.toFixed(2),'"/hr']})]})]}),p.jsxs("div",{className:"forecast-row-bottom",children:[p.jsxs("span",{className:"temp-low",children:[N.low,""]}),p.jsxs("span",{className:"temp-high",children:[N.high,""]}),p.jsxs("span",{className:"precip-group",children:[p.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),p.jsx("path",{d:"M16 14v4"}),p.jsx("path",{d:"M8 14v4"}),p.jsx("path",{d:"M12 16v4"})]}),p.jsx("span",{className:"precip-value",children:N.precipitation||N.precip||"0%"})]})]})]},V)})},rt=N=>{N.preventDefault();const V=N.clientX,J=Z,ve=S=>{const _=V-S.clientX,O=Math.max(250,Math.min(500,J+_));q(O),localStorage.setItem("forecastPanelWidth",O)},B=()=>{document.removeEventListener("mousemove",ve),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",ve),document.addEventListener("mouseup",B)},Ke=N=>{N.preventDefault(),N.stopPropagation();const V=N.clientY,J=Q,ve=S=>{const _=V-S.clientY,O=Math.max(100,Math.min(500,J+_));K(O),localStorage.setItem("devicesOnHeight",O)},B=()=>{document.removeEventListener("mousemove",ve),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",ve),document.addEventListener("mouseup",B)};return p.jsxs("div",{className:"forecast-panel",style:{width:Z},children:[p.jsx("div",{className:"forecast-resize-handle",ref:H,onMouseDown:rt,children:p.jsx("div",{className:"forecast-resize-grip"})}),p.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!n),children:[p.jsx("span",{children:"5-Day Forecast"}),p.jsx("button",{onClick:N=>{N.stopPropagation(),re()},className:"forecast-refresh-btn",children:"Refresh"})]}),n&&p.jsx("div",{className:"forecast-panel-content",children:Je()}),p.jsx("div",{className:"forecast-dock-slot",ref:a}),p.jsxs("div",{className:"devices-on-section",style:{height:s?Q:"auto"},children:[p.jsx("div",{className:"devices-resize-handle",onMouseDown:Ke,children:p.jsx("div",{className:"devices-resize-grip"})}),p.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[p.jsxs("span",{children:["Devices ON (",k.size,")"]}),p.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&p.jsx("div",{className:"devices-on-list",children:k.size===0?p.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(k.values()).sort((N,V)=>N.name.localeCompare(V.name)).map((N,V)=>p.jsxs("div",{className:"device-on-item",children:[p.jsx("span",{className:"device-on-indicator"}),p.jsx("span",{className:"device-on-name",children:N.name})]},V))})]}),p.jsxs("div",{className:"status-indicators",children:[p.jsx("div",{className:`connection-status ${y?"connected":"disconnected"}`,children:y?"Backend":"Backend X"}),p.jsx("div",{className:`connection-status ${b.connected?"connected":"disconnected"}`,children:b.connected?`HA (${b.deviceCount})`:"HA X"})]})]})}function ZO({width:a=180,panelRef:n,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:d}){const h=window.T2Controls?.Tooltip,m=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,y=(s||[]).reduce((b,x)=>b+(x?.labels||[]).length,0),v=b=>{const x=(b||"").toString().trim();x&&c?.(x)};return p.jsxs("div",{ref:n,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:b=>b.stopPropagation(),children:[p.jsx("div",{className:"favorites-header",children:p.jsxs("div",{className:"favorites-header-row",children:[p.jsx("span",{className:"favorites-title",children:" Favorites"}),h?p.jsx(h,{text:m,position:"bottom",children:p.jsx("span",{className:"favorites-help-fallback",children:"?"})}):p.jsx("span",{className:"favorites-help-fallback",title:m,children:"?"})]})}),p.jsx("div",{className:"favorites-list",children:y===0?p.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(b=>{const x=(b?.category||"Other").toString(),k=Array.isArray(b?.labels)?b.labels:[];return k.length===0?null:p.jsxs("div",{className:"favorites-group",children:[p.jsx("div",{className:"favorites-divider",children:p.jsx("span",{className:"favorites-divider-text",children:x})}),k.map(j=>p.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>d?.(j),onContextMenu:Z=>{Z.preventDefault(),Z.stopPropagation(),v(j)},title:"Click: add to canvas  Right-click: remove",children:j},`${x}:${j}`))]},x)})})]})}function XO({isOpen:a,onClose:n,onSave:r,currentGraphData:s}){const[l,c]=E.useState(""),[d,h]=E.useState([]),[m,y]=E.useState(!1),[v,b]=E.useState(!1),[x,k]=E.useState(null),j=E.useRef(null);E.useEffect(()=>{a&&(Z(),setTimeout(()=>j.current?.focus(),100))},[a]);const Z=async()=>{y(!0),k(null);try{const Y=await(await fetch(Sn("/api/engine/graphs"))).json();Y.success?h(Y.graphs||[]):k("Failed to load existing graphs")}catch(L){console.error("[SaveModal] Error fetching graphs:",L),k("Failed to connect to server")}finally{y(!1)}},q=async()=>{if(!l.trim()){k("Please enter a filename");return}b(!0),k(null);try{const Y=await(await fetch(Sn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();Y.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${Y.filename}"`,3e3),r?.(Y.filename),n()):k(Y.error||"Failed to save graph")}catch(L){console.error("[SaveModal] Error saving:",L),k("Failed to save graph")}finally{b(!1)}},Q=L=>{L.key==="Enter"&&!v?q():L.key==="Escape"&&n()},K=L=>{const Y=L.replace(".json","");c(Y),j.current?.focus()};return a?p.jsx("div",{className:"save-modal-overlay",onClick:n,children:p.jsxs("div",{className:"save-modal",onClick:L=>L.stopPropagation(),children:[p.jsxs("div",{className:"save-modal-header",children:[p.jsx("h2",{children:" Save Graph"}),p.jsx("button",{className:"save-modal-close",onClick:n,children:""})]}),p.jsxs("div",{className:"save-modal-content",children:[p.jsxs("div",{className:"save-modal-input-section",children:[p.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),p.jsxs("div",{className:"save-modal-input-row",children:[p.jsx("input",{ref:j,id:"graph-filename",type:"text",value:l,onChange:L=>c(L.target.value),onKeyDown:Q,placeholder:"my_automation_graph",disabled:v}),p.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),x&&p.jsxs("div",{className:"save-modal-error",children:[" ",x]}),p.jsxs("div",{className:"save-modal-existing",children:[p.jsxs("h3",{children:["Existing Graphs ",m&&p.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),d.length===0&&!m?p.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):p.jsx("ul",{className:"save-modal-list",children:d.map(L=>p.jsxs("li",{onClick:()=>K(L.name),className:l===L.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(L.modified).toLocaleString()}`,children:[p.jsx("span",{className:"graph-name",children:L.displayName}),p.jsx("span",{className:"graph-date",children:new Date(L.modified).toLocaleDateString()})]},L.name))})]})]}),p.jsxs("div",{className:"save-modal-footer",children:[p.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:n,disabled:v,children:"Cancel"}),p.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:q,disabled:v||!l.trim(),children:v?"Saving...":" Save"})]})]})}):null}function KO({visible:a,position:n,items:r,onClose:s,onSelect:l}){const c=E.useRef(null),d=E.useRef(null),[h,m]=E.useState(null),[y,v]=E.useState({x:0,y:0}),[b,x]=E.useState(""),k=E.useRef(null),j=E.useRef(null);E.useEffect(()=>{a&&(x(""),m(null),setTimeout(()=>{d.current?.focus()},50))},[a]);const Z=E.useMemo(()=>{if(!b.trim())return r;const H=b.toLowerCase(),ue=[];for(const re of r)if(re.subitems)for(const pe of re.subitems)pe.label&&pe.label.toLowerCase().includes(H)&&ue.push({...pe,categoryHint:re.label});else re.label&&re.label.toLowerCase().includes(H)&&ue.push(re);return ue},[r,b]),q=b.trim().length>0;E.useEffect(()=>{if(!a)return;const H=re=>{c.current&&!c.current.contains(re.target)&&s()},ue=re=>{re.key==="Escape"&&s()};return document.addEventListener("mousedown",H),document.addEventListener("keydown",ue),()=>{document.removeEventListener("mousedown",H),document.removeEventListener("keydown",ue)}},[a,s]),E.useEffect(()=>()=>{k.current&&clearTimeout(k.current),j.current&&clearTimeout(j.current)},[]);const Q=E.useCallback((H,ue,re)=>{j.current&&(clearTimeout(j.current),j.current=null),ue.subitems&&ue.subitems.length>0?m(re):m(null)},[]),K=E.useCallback(()=>{j.current=setTimeout(()=>{m(null)},150)},[]),L=E.useCallback(()=>{j.current&&(clearTimeout(j.current),j.current=null)},[]),Y=E.useCallback(()=>{j.current=setTimeout(()=>{m(null)},100)},[]),de=E.useCallback(H=>{H.subitems&&H.subitems.length>0||(l(H),s())},[l,s]);if(!a)return null;const be={...n};if(typeof window<"u"){const ue=Math.min(Z.length*36+50,400);n.x+220>window.innerWidth&&(be.x=window.innerWidth-220-10),n.y+ue>window.innerHeight&&(be.y=Math.max(10,window.innerHeight-ue-10))}return p.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:be.x,top:be.y},children:[p.jsxs("div",{className:"fast-menu-search",children:[p.jsx("input",{ref:d,type:"text",placeholder:"Search nodes...",value:b,onChange:H=>x(H.target.value),onClick:H=>H.stopPropagation(),onKeyDown:H=>{if(H.key==="Enter"&&Z.length===1){const ue=Z[0];ue.subitems||de(ue)}H.stopPropagation()}}),b&&p.jsx("span",{className:"search-clear",onClick:H=>{H.stopPropagation(),x(""),d.current?.focus()},children:""})]}),p.jsx("div",{className:"fast-menu-results",children:Z.length===0?p.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):q?Z.map((H,ue)=>p.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>de(H),children:[p.jsx("span",{className:"menu-label",children:H.label}),H.categoryHint&&p.jsx("span",{className:"category-hint",children:H.categoryHint})]},H.label||ue)):Z.map((H,ue)=>p.jsxs("div",{className:`fast-menu-item ${H.subitems?"has-submenu":""} ${h===ue?"active":""}`,onMouseEnter:re=>Q(re,H,ue),onMouseLeave:K,onClick:()=>de(H),children:[H.icon&&p.jsx("span",{className:"menu-icon",children:H.icon}),p.jsx("span",{className:"menu-label",children:H.label}),H.subitems&&p.jsx("span",{className:"submenu-arrow",children:""}),h===ue&&H.subitems&&p.jsx("div",{className:"fast-submenu",onMouseEnter:L,onMouseLeave:Y,children:H.subitems.map((re,pe)=>p.jsx("div",{className:"fast-menu-item",title:re.description||"",onClick:Re=>{Re.stopPropagation(),de(re)},children:p.jsx("span",{className:"menu-label",children:re.label})},re.label||pe))})]},H.label||ue))})]})}function ib(a){const n=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))n.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&n.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):n.push(`Node at index ${c} is missing "id"`),l.label||n.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&n.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))n.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,d)=>{c.source?s.has(c.source)||n.push(`Connection ${d} references non-existent source node: ${c.source}`):n.push(`Connection at index ${d} is missing "source"`),c.target?s.has(c.target)||n.push(`Connection ${d} references non-existent target node: ${c.target}`):n.push(`Connection at index ${d} is missing "target"`),c.sourceOutput||r.push(`Connection ${d} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${d} is missing "targetInput"`);const h=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(h)&&r.push(`Duplicate connection: ${h}`),l.add(h),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:n.length===0,errors:n,warnings:r}}function sb(a){const n=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],n.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],n.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((d,h)=>{if(!d.id)return n.push(`Removed node at index ${h} (missing ID)`),r=!0,!1;if(c.has(d.id)){const m=`${d.id}_${Date.now()}_${h}`;n.push(`Renamed duplicate node ID ${d.id} to ${m}`),d.id=m,r=!0}return c.add(d.id),l.add(d.id),d.label||(d.label="Unknown Node",n.push(`Set label for node ${d.id} to "Unknown Node"`),r=!0),!d.position||typeof d.position!="object"?(d.position={x:0,y:0},n.push(`Reset position for node ${d.id}`),r=!0):(Number.isFinite(d.position.x)||(d.position.x=0,n.push(`Fixed NaN x position for node ${d.id}`),r=!0),Number.isFinite(d.position.y)||(d.position.y=0,n.push(`Fixed NaN y position for node ${d.id}`),r=!0)),!0}),s.connections=s.connections.filter((d,h)=>l.has(d.source)?l.has(d.target)?!0:(n.push(`Removed connection ${h} (invalid target: ${d.target})`),r=!0,!1):(n.push(`Removed connection ${h} (invalid source: ${d.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,n.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,n.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,n.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:n}}class gj extends Xt.Control{constructor(n,r){super(),this.label=n,this.onClick=r}}function QO({data:a}){return p.jsx("button",{onPointerDown:n=>n.stopPropagation(),onDoubleClick:n=>n.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.25)",n.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.1)",n.currentTarget.style.boxShadow="none"},children:a.label})}class vj extends Xt.Control{constructor(n,r,s,l){super(),this.label=n,this.values=r,this.value=s,this.onChange=l}setValue(n){this.value=n}}function JO({data:a}){const[,n]=E.useReducer(d=>d+1,0),[r,s]=E.useState(a.value);E.useEffect(()=>{s(a.value)},[a.value]),E.useEffect(()=>{n()},[a]);const l=d=>{const h=d.target.value;s(h),typeof a.setValue=="function"?a.setValue(h):a.value=h,a.onChange&&a.onChange(h)},c=a.values||[];return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("select",{value:r,onChange:l,onPointerDown:d=>d.stopPropagation(),onDoubleClick:d=>d.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((d,h)=>p.jsx("option",{value:d,style:{background:"#0a0f14",color:"#00f3ff"},children:d},`${h}-${d}`))})]})}class bj extends Xt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function WO({data:a}){const[n,r]=E.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class wj extends Xt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function ej({data:a}){const[n,r]=E.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[p.jsx("input",{type:"checkbox",checked:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),p.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Sj extends Xt.Control{constructor(n,r,s,l={}){super(),this.label=n,this.value=r,this.onChange=s,this.options=l}}function tj({data:a}){const[n,r]=E.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:"number",value:n,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class xj extends Xt.Control{constructor(n,r,s,l="text"){super(),this.label=n,this.value=r,this.onChange=s,this.type=l}}function nj({data:a}){const[n,r]=E.useState(a.value);E.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:a.type||"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Ej extends Xt.Control{constructor(n,r){super(),this.deviceId=n,this.getState=r}}function aj({data:a}){const n=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!n)return p.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:p.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=n.on||n.state==="on",l=n.attributes&&typeof n.attributes.brightness=="number"?Number(n.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof n.brightness=="number"&&Number.isFinite(n.brightness)?c=n.brightness>100?Math.round(n.brightness/255*100):Math.round(n.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c));const d=n.hs_color||[0,0],[h,m]=d;let y="#e74c3c";s&&(m===0?y="#f1c40f":y=`hsl(${h}, ${m}%, 50%)`);const v={width:"14px",height:"14px",borderRadius:"50%",background:y,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:y,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${y}`:"none"};return p.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[p.jsx("div",{style:v}),p.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:n.name||a.deviceId})]}),p.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&p.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:p.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${y})`,transition:"width 0.3s ease-out"}})})]})}function rj(a){const{state:n,color:r}=a.data.data||{},s=n==="on"||n==="open"||n==="playing",l=r||(s?"#00f3ff":"#333");return p.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[p.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),p.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function ij(a){const[,n]=E.useState(0);E.useEffect(()=>{let b=JSON.stringify(a.data.data||{});const x=setInterval(()=>{const k=JSON.stringify(a.data.data||{});k!==b&&(b=k,n(j=>j+1))},100);return()=>clearInterval(x)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:d}=a.data.data||{};let h="#444";s&&s.length===2?h=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(h="#ffaa00");const m=c==="on"||d===!0;let y=typeof r=="number"&&Number.isFinite(r)?r:0;y>100&&(y=y/255*100),y=Math.max(0,Math.min(100,y));const v=m?y:0;return p.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:b=>b.stopPropagation(),children:p.jsx("div",{style:{width:`${v}%`,height:"100%",backgroundColor:h,transition:"all 0.3s ease",boxShadow:v>0?`0 0 10px ${h}`:"none"}})})}function sj(a){const{power:n,energy:r}=a.data.data||{};return n===null&&r===null?p.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):p.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("span",{children:"PWR:"}),p.jsx("span",{style:{color:"#00f3ff"},children:n!==null?`${n} W`:"--"})]}),r!==null&&p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("span",{children:"NRG:"}),p.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const oj=window.EDITOR_DEBUG,Te=(...a)=>oj&&console.debug("[Editor]",...a),lj=Ma.memo(({data:a,socketKey:n,side:r})=>{let l=a?.name||"any";if(n&&typeof n=="string"){const d=n.toLowerCase();d.includes("hsv")||d.includes("color")?l="hsv_info":d.includes("trigger")||d.includes("enable")||d.includes("active")?l="boolean":(d.includes("light")||d.includes("device"))&&(l="light_info")}const c=`${n||"socket"} (${l})`;return Ma.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function cj(){const a=E.useRef(null),[n,r]=E.useState(null),[s,l]=E.useState(null),[c,d]=E.useState(null),[h,m]=E.useState(null),[y,v]=E.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),b=E.useRef(null),x=E.useRef(null);E.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(y))}catch{}},[y]);const k=E.useRef(!1),j=E.useRef(new Set),Z=E.useRef(null),q=E.useRef(!1),Q=E.useRef(null),K=E.useRef(null),L=E.useRef(null),Y=E.useRef({x:0,y:0}),de=E.useRef(!1),be=E.useRef([]),[H,ue]=E.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),re=180,pe="favoriteNodes",[Re,je]=E.useState(()=>{try{const F=localStorage.getItem(pe),ie=F?JSON.parse(F):null,ee=se=>{const C=[];for(const D of Array.isArray(se)?se:[]){if(typeof D!="string")continue;const oe=D.trim();oe&&(C.includes(oe)||C.push(oe))}return C};if(Array.isArray(ie)){const se=ee(ie);return se.length?[{category:"Other",labels:se}]:[]}const Ae=Array.isArray(ie?.groups)?ie.groups:Array.isArray(ie?.favoriteGroups)?ie.favoriteGroups:Array.isArray(ie)?ie:null;if(!Ae)return[];const Se=[];for(const se of Ae){const C=(se?.category||"Other").toString().trim()||"Other",D=ee(se?.labels);D.length!==0&&Se.push({category:C,labels:D})}return Se}catch{return[]}}),Je=E.useRef(null),[rt,Ke]=E.useState(!1),N=E.useRef(null),[V,J]=E.useState(!1),[ve,B]=E.useState(null);E.useEffect(()=>{try{localStorage.setItem(pe,JSON.stringify({version:2,groups:Re}))}catch{}},[Re]);const S=E.useCallback(F=>{const ie=(F||"").toString().trim();if(!ie)return;const Ae=(Bn.getByLabel(ie)?.category||"Other").toString().trim()||"Other";je(Se=>{for(const D of Se)if(Array.isArray(D?.labels)&&D.labels.includes(ie))return Se;const se=Se.map(D=>({category:D.category,labels:[...D.labels]})),C=se.findIndex(D=>D.category===Ae);return C===-1?se.push({category:Ae,labels:[ie]}):se[C].labels.push(ie),se})},[]),_=E.useCallback(F=>{const ie=(F||"").toString().trim();ie&&je(ee=>{const Ae=[];for(const Se of ee){const se=(Se?.labels||[]).filter(C=>C!==ie);se.length!==0&&Ae.push({category:Se.category,labels:se})}return Ae})},[]),O=E.useCallback(async F=>{const ie=a.current,ee=Q.current,Ae=K.current;if(!ie||!ee||!Ae)return;const Se=ie.getBoundingClientRect(),se={x:Se.left+Se.width/2,y:Se.top+Se.height/2};try{const oe=window._t2GetMenuItems;if(typeof oe=="function"){const fe=oe();for(const we of fe||[])for(const Ce of we.subitems||[])if(Ce.label===F&&typeof Ce.handler=="function"){await Ce.handler(se);return}}}catch(oe){console.warn("[Favorites] Failed to create via context handlers:",oe)}const C=Bn.getByLabel(F);if(!C)return;const D=()=>{try{Z.current?.()}catch{}};try{const oe=C.factory(D);await ee.addNode(oe);const fe=Ae.area.transform,we=(se.x-fe.x)/fe.k,Ce=(se.y-fe.y)/fe.k;await Ae.translate(oe.id,{x:we,y:Ce}),F==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}catch(oe){console.warn("[Favorites] Fallback create failed:",oe)}},[]);E.useEffect(()=>{try{const F=Bn.getAll();if(F.length===0)return;const ie=new Map;for(const ee of F)ee?.label&&ie.set(ee.label,(ee.category||"Other").toString().trim()||"Other");je(ee=>{const Ae=[],Se=new Map,se=(C,D)=>{Se.has(C)||(Se.set(C,[]),Ae.push(C));const oe=Se.get(C);oe.includes(D)||oe.push(D)};for(const C of ee)for(const D of C?.labels||[]){const oe=ie.get(D);oe&&se(oe,D)}return Ae.map(C=>({category:C,labels:Se.get(C)})).filter(C=>C.labels.length>0)})}catch{}},[n]);const z=E.useCallback(async F=>{await new Promise(P=>{const ne=()=>{const ye=F.getBoundingClientRect();ye.width>0&&ye.height>0?P():requestAnimationFrame(ne)};requestAnimationFrame(ne)});const ie=new Qr,ee=new Ab(F),Ae=new wk,Se=new CC({createRoot:cb.createRoot}),se=new LC;ie.use(se);let C=0,D=0,oe=Date.now();window._t2PerfStats=()=>{const P=(Date.now()-oe)/1e3;return console.log(`[Perf] In ${P.toFixed(1)}s: ${C} process calls, ${D} skipped (${(C/P).toFixed(1)}/sec)`),{calls:C,skipped:D,perSecond:C/P}},window._t2PerfReset=()=>{C=0,D=0,oe=Date.now(),console.log("[Perf] Stats reset")};let fe=null;const we=()=>{const P=ie?.getNodes?.()?.length||0;return P<50?16:P<100?32:P<150?50:100};let Ce=!1;const $e=async()=>{if(Ce){D++;return}if(fe)return;C++;const P=we();fe=setTimeout(async()=>{fe=null,Ce=!0;try{const ne=ie.getNodes(),ye=ie.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",ne.map(ke=>`${ke.id}:${ke.label}`)),console.log("[Editor] process() - connections:",ye.map(ke=>`${ke.source}:${ke.sourceOutput} -> ${ke.target}:${ke.targetInput}`)),window._debugProcess=!1),se.reset();for(const ke of ne)try{await se.fetch(ke.id)}catch{}}finally{Ce=!1}},P)},Fe=async()=>{if(!Ce){fe&&(clearTimeout(fe),fe=null),Ce=!0;try{se.reset();for(const P of ie.getNodes())try{await se.fetch(P.id)}catch{}}finally{Ce=!1}}},bt=new Set;let Le=null;const He=P=>{bt.add(P),Le||(Le=setTimeout(()=>{Le=null,bt.forEach(ne=>{ee.update("node",ne)}),bt.clear(),$e()},16))},ze=()=>{$e()},it=()=>{const P=Bn.getAll(),ne={};P.forEach(ke=>{const Pe=ke.category||"Other";ne[Pe]||(ne[Pe]=[]),ne[Pe].push({label:ke.label,order:ke.order,description:ke.description,handler:async Gt=>{let rn;const Qt=()=>{ke.updateStrategy==="dataflow"?ze():He(rn.id)};rn=ke.factory(Qt),await ie.addNode(rn);const Jt=ee.area.transform,bn=(Gt.x-Jt.x)/Jt.k,_t=(Gt.y-Jt.y)/Jt.k;await ee.translate(rn.id,{x:bn,y:_t}),ke.label==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}})});const ye=window.T2Controls?.THEME?.categories||{};return Object.entries(ne).map(([ke,Pe])=>({label:ke,icon:ye[ke]?.icon||"",subitems:Pe.sort((Gt,rn)=>{const Qt=Gt.order??999,Jt=rn.order??999;return Qt!==Jt?Qt-Jt:Gt.label.localeCompare(rn.label)})})).sort((ke,Pe)=>ke.label.localeCompare(Pe.label))};window._t2GetMenuItems=it,window._t2Editor=ie,window._t2Area=ee,window._t2Process=$e,window._t2ProcessImmediate=Fe,window._t2Engine=se;const gt=qr.selector();Se.addPreset(Of.classic.setup({customize:{node(P){const ne=Bn.getByInstance(P.payload);return ne?ne.component:Of.classic.Node},socket(P){const ne=P.key,ye=P.side;return function({data:ke}){return Ma.createElement(lj,{data:ke,socketKey:ne,side:ye})}},control(P){if(P.payload instanceof Xt.Control){const ye=P.payload.constructor.name;if(ye==="ButtonControl")return QO;if(ye==="DropdownControl")return JO;if(ye==="TextControl")return WO;if(ye==="SwitchControl")return ej;if(ye==="NumberControl")return tj;if(ye==="InputControl")return nj;if(ye==="DeviceStateControl")return aj;if(ye==="StatusIndicatorControl")return rj;if(ye==="ColorBarControl")return ij;if(ye==="PowerStatsControl")return sj}return Of.classic.Control}}})),Ae.addPreset(mk.classic.setup()),ie.use(ee),ee.use(Ae),ee.use(Se),qr.selectableNodes(ee,gt,{accumulating:qr.accumulateOnCtrl()}),qr.simpleNodesOrder(ee),ie.addPipe(P=>{if(P.type==="nodecreated"){const ne=P.data,ye=Bn.getByInstance(ne);ye&&ye.isBackdrop&&setTimeout(()=>{const Ee=ee.nodeViews.get(ne.id);Ee&&Ee.element&&(Ee.element.style.zIndex="-10",Te("[Backdrop] Set z-index on creation for:",ne.id))},50)}return P});let It=!1,tn=!1,ot={x:0,y:0};Ae.addPipe(P=>(P.type==="connectionpick"?(It=!0,Te(" Connection pick - wire dragging started")):P.type==="connectiondrop"&&(It=!1,tn=!1,Te(" Connection drop - wire dragging ended")),P));const vt=P=>{if(It)if(P.ctrlKey||P.metaKey)if(!tn)tn=!0,ot={x:P.clientX,y:P.clientY},F.style.cursor="grab";else{const ne=P.clientX-ot.x,ye=P.clientY-ot.y;if(ne!==0||ye!==0){const Ee=ee.area.transform;ee.area.translate(Ee.x+ne,Ee.y+ye),ot={x:P.clientX,y:P.clientY}}}else tn&&(tn=!1,F.style.cursor="")},nn=P=>{(P.key==="Control"||P.key==="Meta")&&tn&&(tn=!1,F.style.cursor="")};window.addEventListener("pointermove",vt),window.addEventListener("keyup",nn);let an=!1,qt=!1,Kt=null,R=!1,U={x:0,y:0},ce={x:0,y:0};const he=P=>{P.code==="Space"&&an&&Kt&&(R=!0,ce={x:0,y:0},P.preventDefault())},Ue=P=>{if(P.code==="Space"&&(R=!1,qt&&Kt)){const ne=ee.nodeViews.get(Kt);if(ne){const ye=ee.area.transform,Ee=ce.x/ye.k,ke=ce.y/ye.k,Pe={x:ne.position.x-Ee,y:ne.position.y-ke};k.current=!0,ee.translate(Kt,Pe).finally(()=>{k.current=!1})}qt=!1,F.style.cursor=""}},xn=P=>{if(!(!an||!Kt))if(R)if(!qt)qt=!0,U={x:P.clientX,y:P.clientY},ce={x:0,y:0},F.style.cursor="grab";else{const ne=P.clientX-U.x,ye=P.clientY-U.y;if(ne!==0||ye!==0){const Ee=ee.area.transform;ee.area.translate(Ee.x+ne,Ee.y+ye),ce.x+=ne,ce.y+=ye,U={x:P.clientX,y:P.clientY}}}else qt&&(qt=!1,F.style.cursor="")};window.addEventListener("keydown",he,!0),window.addEventListener("keyup",Ue,!0),F.addEventListener("pointermove",xn,!0);const zt=document.createElement("div");zt.classList.add("selection-box"),F.appendChild(zt);let Ve=!1,Lt={x:0,y:0};const st=j.current,kt=()=>{Ve&&(Te(" Safety reset: clearing stuck lasso selection"),Ve=!1,zt.style.display="none")},Os=()=>{kt(),window.resetEditorDragState&&window.resetEditorDragState()},xa=()=>{document.hidden&&(kt(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",Os),document.addEventListener("visibilitychange",xa);const un=P=>{try{const ne=P.target;ne&&(ne.tagName==="INPUT"||ne.tagName==="TEXTAREA"||ne.isContentEditable)||(F.tabIndex=-1,F.focus())}catch{}if((P.ctrlKey||P.metaKey)&&P.button===0){P.stopPropagation(),P.preventDefault(),Ve=!0;const ne=F.getBoundingClientRect();Lt={x:P.clientX-ne.left,y:P.clientY-ne.top},zt.style.display="block",zt.style.left=`${Lt.x}px`,zt.style.top=`${Lt.y}px`,zt.style.width="0px",zt.style.height="0px",P.shiftKey||(st.forEach(ye=>{const Ee=ee.nodeViews.get(ye);Ee&&Ee.element&&(Ee.element.classList.remove("selected"),Ee.element.style.outline="")}),st.clear(),gt&&gt.entities&&Array.from(gt.entities).forEach(ye=>gt.remove(ye)))}},On=P=>{if(!Ve)return;const ne=F.getBoundingClientRect(),ye=P.clientX-ne.left,Ee=P.clientY-ne.top,ke=Math.min(Lt.x,ye),Pe=Math.min(Lt.y,Ee),Gt=Math.abs(ye-Lt.x),rn=Math.abs(Ee-Lt.y);zt.style.left=`${ke}px`,zt.style.top=`${Pe}px`,zt.style.width=`${Gt}px`,zt.style.height=`${rn}px`},Pa=P=>{if(!Ve)return;const ne=zt.getBoundingClientRect();if(Ve=!1,zt.style.display="none",ne.width<5&&ne.height<5)return;const ye=[];ie.getNodes().forEach(Ee=>{const ke=ee.nodeViews.get(Ee.id);if(ke&&ke.element){const Pe=ke.element.getBoundingClientRect();ne.left<=Pe.left&&ne.right>=Pe.right&&ne.top<=Pe.top&&ne.bottom>=Pe.bottom&&ye.push({node:Ee,view:ke})}}),ye.forEach(({node:Ee,view:ke})=>{st.add(Ee.id),gt.add({id:Ee.id,label:"node",translate(Pe,Gt){},unselect(){ke.element.classList.remove("selected"),ke.element.style.outline=""}},!1),ke.element.classList.add("selected"),ke.element.style.outline="3px solid #00f3ff"})},Kc=()=>{st.size>0&&(st.forEach(P=>{const ne=ee.nodeViews.get(P);ne&&ne.element&&(ne.element.classList.remove("selected"),ne.element.style.outline="")}),st.clear()),gt&&gt.entities&&(gt.entities instanceof Map?Array.from(gt.entities.values()):Array.from(gt.entities)).forEach(ne=>{ne.unselect&&ne.unselect(),gt.remove(ne)}),ie.getNodes().forEach(P=>{const ne=ee.nodeViews.get(P.id);ne&&ne.element&&ne.element.classList.remove("selected")})},qo=P=>{if(!P.ctrlKey&&!P.metaKey&&!Ve){let ne=!1;for(const[ye,Ee]of ee.nodeViews)if(Ee.element.contains(P.target)){ne=!0;break}if(!ne){const ye=P.target;(ye===F||ye.classList.contains("rete-area")||ye.closest('[data-testid="area"]'))&&Kc()}}};F.addEventListener("pointerdown",un,{capture:!0}),F.addEventListener("click",qo),window.addEventListener("pointermove",On),window.addEventListener("pointerup",Pa),ie.addPipe(P=>((P.type==="connectioncreated"||P.type==="connectionremoved")&&$e(),P));let En={activeBackdropId:null,isDragging:!1,nodesBeingMoved:new Set},Ea=!1,ka=null;const oa=P=>{Ea=P,ka&&(clearTimeout(ka),ka=null),P&&(ka=setTimeout(()=>{Ea&&(Te(" Safety reset: clearing stuck isGroupMoving"),Ea=!1),ka=null},500))},gr=()=>{Ve&&(Te(" Resetting stuck lasso selection"),Ve=!1,zt.style.display="none"),Ea&&(Te(" Resetting stuck group moving"),oa(!1)),En.isDragging&&(Te(" Resetting stuck backdrop drag"),En.isDragging=!1,En.activeBackdropId=null,En.nodesBeingMoved.clear())};window.resetEditorDragState=gr;function Za(){const P=ie.getNodes(),ne=P.filter(Ee=>{const ke=Bn.getByInstance(Ee);return ke&&ke.isBackdrop}),ye=P.filter(Ee=>{const ke=Bn.getByInstance(Ee);return!ke||!ke.isBackdrop});ne.forEach(Ee=>{const ke=ee.nodeViews.get(Ee.id);if(!ke)return;ke.element&&(ke.element.style.zIndex="-10");const Pe=ke.position,Gt=[],rn=Ee.properties.width||400,Qt=Ee.properties.height||300,Jt=(_t,Yt,kn)=>{const za=_t.x+Yt/2,Xa=_t.y+kn/2;return za>=Pe.x&&za<=Pe.x+rn&&Xa>=Pe.y&&Xa<=Pe.y+Qt};ye.forEach(_t=>{const Yt=ee.nodeViews.get(_t.id);if(!Yt)return;Yt.element&&parseInt(Yt.element.style.zIndex||"0",10)<0&&(Yt.element.style.zIndex="1");const kn=Yt.position,za=_t.width||180,Xa=_t.height||100;Jt(kn,za,Xa)&&Gt.push(_t.id)}),ne.forEach(_t=>{if(_t.id===Ee.id)return;const Yt=ee.nodeViews.get(_t.id);if(!Yt)return;const kn=Yt.position,za=_t.properties.width||400,Xa=_t.properties.height||300;za>=rn||Xa>=Qt||Jt(kn,za,Xa)&&Gt.push(_t.id)});const bn=Ee.properties.capturedNodes.length;Ee.properties.capturedNodes=Gt,bn!==Gt.length&&Ee.changeCallback&&Ee.changeCallback()})}return ee.updateBackdropCaptures=Za,ee.addPipe(P=>{if(P.type==="nodepicked"){const ne=P.data.id,ye=ie.getNode(ne);an=!0,Kt=ne,qt=!1;try{if(ye&&N?.current!==void 0){const ke=ee.nodeViews.get(ne)?.position||{x:0,y:0};N.current={nodeId:ne,label:ye.label,startPos:ke,active:!1,over:!1}}}catch{}if(ye){const ke=Bn.getByInstance(ye);if(ke&&ke.isBackdrop&&ye.properties.locked)return}!de.current&&!st.has(ne)&&(st.forEach(ke=>{const Pe=ee.nodeViews.get(ke);Pe&&Pe.element&&(Pe.element.classList.remove("selected"),Pe.element.style.outline="")}),st.clear()),st.add(ne);const Ee=ee.nodeViews.get(ne);Ee&&Ee.element&&(Ee.element.classList.add("selected"),Ee.element.style.outline="3px solid #00f3ff")}return P}),ee.addPipe(P=>{try{if(k.current)return P;const ne=ye=>{const Ee=Je.current?.getBoundingClientRect();if(!Ee)return!1;const Pe=ee.nodeViews.get(ye)?.element;if(!Pe)return!1;const Gt=Pe.getBoundingClientRect(),rn=Gt.left+Gt.width/2,Qt=Gt.top+Gt.height/2;return rn>=Ee.left&&rn<=Ee.right&&Qt>=Ee.top&&Qt<=Ee.bottom};if(P.type==="nodetranslate"){const ye=N.current;if(!ye)return P;const Ee=P.data?.id;if(!Ee||ye.nodeId!==Ee)return P;ye.active||(ye.active=!0,!ye.startPos&&P.data?.previous&&(ye.startPos=P.data.previous));const ke=ne(Ee);return ke!==ye.over&&(ye.over=ke,Ke(ke)),P}if(P.type==="nodedragged"){const ye=N.current;if(!ye)return P;const Ee=P.data?.id;if(!Ee||ye.nodeId!==Ee)return P;if(ye.active&&ne(Ee)){S(ye.label);const Pe=ye.startPos;Pe&&setTimeout(()=>{try{ee.translate(Ee,Pe)}catch{}},0)}return N.current=null,Ke(!1),P}}catch{}return P}),ee.addPipe(P=>{if(P.type==="render"&&P.data?.payload){const ne=P.data.payload,ye=Bn.getByInstance(ne);ye&&ye.isBackdrop&&setTimeout(()=>{const Ee=ee.nodeViews.get(ne.id);if(Ee&&Ee.element){Ee.element.style.zIndex!=="-10"&&(Ee.element.style.zIndex="-10");const ke=ne.properties.locked?"none":"auto";Ee.element.style.pointerEvents!==ke&&(Ee.element.style.pointerEvents=ke)}},0)}if(P.type==="nodetranslate"){if(k.current||Ea)return P;const ne=P.data.id,ye=ie.getNode(ne);if(!ye)return P;const Ee=P.data.position,ke=P.data.previous,Pe=Ee.x-ke.x,Gt=Ee.y-ke.y;if(Pe===0&&Gt===0)return P;if(qt&&Kt===ne)return{...P,data:{...P.data,position:P.data.previous}};if(st.size>1&&st.has(ne)){oa(!0);const Qt=[];return st.forEach(Jt=>{if(Jt!==ne){const bn=ee.nodeViews.get(Jt);if(bn){const _t=bn.position.x+Pe,Yt=bn.position.y+Gt;Qt.push(ee.translate(Jt,{x:_t,y:Yt}))}}}),Promise.all(Qt).then(()=>{oa(!1)}),P}const rn=Bn.getByInstance(ye);if(rn&&rn.isBackdrop){if(ye.properties.locked)return{...P,data:{...P.data,position:P.data.previous}};if(En.isDragging&&En.nodesBeingMoved.has(ne)&&En.activeBackdropId!==ne)return P;if(En.activeBackdropId!==ne){En.activeBackdropId=ne,En.isDragging=!0,En.nodesBeingMoved.clear(),Za();const Qt=Jt=>{Jt.forEach(bn=>{En.nodesBeingMoved.add(bn);const _t=ie.getNode(bn);_t&&_t.properties.capturedNodes&&Qt(_t.properties.capturedNodes)})};Qt(ye.properties.capturedNodes)}if(ye.properties.capturedNodes.length>0){oa(!0);const Qt=[];return ye.properties.capturedNodes.forEach(Jt=>{if(!st.has(Jt)){const bn=ee.nodeViews.get(Jt);if(bn){const _t=bn.position.x+Pe,Yt=bn.position.y+Gt;Qt.push(ee.translate(Jt,{x:_t,y:Yt}))}}}),Promise.all(Qt).then(()=>{oa(!1)}),P}}}if(P.type==="nodedragged"){if(k.current)return P;En.isDragging=!1,En.activeBackdropId=null,En.nodesBeingMoved.clear(),an=!1,Kt=null,qt&&(qt=!1,F.style.cursor=""),Za()}return P}),Q.current=ie,K.current=ee,L.current=gt,window.updateBackdropLockState=(P,ne)=>{const ye=ee.nodeViews.get(P);ye&&ye.element&&(ye.element.style.pointerEvents=ne?"none":"auto",Te(" Updated backdrop lock state:",P,"locked:",ne))},r(ie),l(ee),d(se),{destroy:()=>{F.removeEventListener("pointerdown",un,{capture:!0}),F.removeEventListener("click",qo),F.removeEventListener("pointermove",xn,!0),window.removeEventListener("pointermove",On),window.removeEventListener("pointerup",Pa),window.removeEventListener("pointermove",vt),window.removeEventListener("keyup",nn),window.removeEventListener("keydown",he,!0),window.removeEventListener("keyup",Ue,!0),window.removeEventListener("blur",Os),document.removeEventListener("visibilitychange",xa),ka&&clearTimeout(ka),zt.parentNode&&zt.parentNode.removeChild(zt),ee.destroy()},selector:gt,editor:ie,area:ee,engine:se,process:$e,processImmediate:Fe}},[]);E.useEffect(()=>{const F=a.current;if(!F)return;let ie=null,ee=null,Ae=null;const Se=new Map,se=fe=>{try{typeof fe.pointerId=="number"&&Se.set(fe.pointerId,{el:fe.target,pointerType:fe.pointerType||"mouse"})}catch{}},C=fe=>{try{typeof fe.pointerId=="number"&&Se.delete(fe.pointerId)}catch{}},D=fe=>{try{typeof fe.pointerId=="number"&&Se.delete(fe.pointerId)}catch{}};F.addEventListener("gotpointercapture",se,!0),F.addEventListener("lostpointercapture",C,!0),window.addEventListener("pointerup",D,!0),window.addEventListener("pointercancel",D,!0),ee=VO().then(()=>(Te(" External plugins loaded, now creating editor..."),z(F))).then(fe=>{fe.editor,ie=fe.area,fe.engine,fe.selector,r(fe.editor),l(fe.area),d(fe.engine),m(fe.selector),Z.current=fe.processImmediate,setTimeout(()=>{if(F){F.tabIndex=-1,F.focus();const Ce=F.getBoundingClientRect(),$e=Ce.left+Ce.width/2,Fe=Ce.top+Ce.height/2,bt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:$e,clientY:Fe,deltaY:0});F.dispatchEvent(bt),Te(" Container initialized and focused"),window.resetEditorView=()=>{Te(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const Le=F.getBoundingClientRect(),He=Le.left+Le.width/2,ze=Le.top+Le.height/2;F.tabIndex=-1,F.focus();try{const gt=Array.from(Se.entries());Se.clear(),gt.forEach(([It,tn])=>{const ot=tn?.el,vt=tn?.pointerType||"mouse";try{const nn=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:It,pointerType:vt});F.dispatchEvent(nn)}catch{}try{F.releasePointerCapture(It)}catch{}try{ot&&typeof ot.releasePointerCapture=="function"&&ot.releasePointerCapture(It)}catch{}})}catch{}try{for(let It=0;It<5;It++)try{F.releasePointerCapture(It)}catch{}F.querySelectorAll(".node, .connection, [data-drag]").forEach(It=>{try{It.releasePointerCapture(1)}catch{}})}catch{}if(ie){const gt=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});F.dispatchEvent(gt);const It=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});F.dispatchEvent(It)}setTimeout(()=>{const gt=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:He,clientY:ze,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),It=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:He,clientY:ze,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});F.dispatchEvent(gt),setTimeout(()=>{F.dispatchEvent(It);const tn=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:He,clientY:ze,deltaY:0});F.dispatchEvent(tn),Te(" Reset complete")},50)},50)})}}},100);let we=!1;return Ae=new ResizeObserver(Ce=>{for(const $e of Ce){const{width:Fe,height:bt}=$e.contentRect;!we&&Fe>0&&bt>0&&(we=!0,Te(" ResizeObserver: Container now has size",Fe,bt),setTimeout(()=>{F.focus();const Le=F.getBoundingClientRect(),He=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Le.left+Le.width/2,clientY:Le.top+Le.height/2,deltaY:0});F.dispatchEvent(He)},50))}}),Ae.observe(F),fe});const oe=()=>{Te(" graphLoadComplete event received - triggering view reset");const fe=()=>{window.resetEditorView&&window.resetEditorView()};fe(),setTimeout(fe,100),setTimeout(fe,500),setTimeout(fe,1e3)};return window.addEventListener("graphLoadComplete",oe),()=>{Ae&&Ae.disconnect(),window.removeEventListener("graphLoadComplete",oe),F.removeEventListener("gotpointercapture",se,!0),F.removeEventListener("lostpointercapture",C,!0),window.removeEventListener("pointerup",D,!0),window.removeEventListener("pointercancel",D,!0),ee.then(fe=>fe.destroy())}},[z]),E.useEffect(()=>{if(!n||!s||!h)return;const F=async C=>{if(C.target.tagName==="INPUT"||C.target.tagName==="TEXTAREA"||C.target.isContentEditable)return;if(Te(` KeyDown: ${C.code} (Ctrl: ${C.ctrlKey}, Meta: ${C.metaKey})`),C.code==="F5"||(C.ctrlKey||C.metaKey)&&C.shiftKey&&C.code==="KeyR"){C.preventDefault(),Te(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(C.code==="KeyF"&&!C.ctrlKey&&!C.metaKey&&!C.altKey){C.preventDefault();const Ce=K.current,$e=Q.current;if(Ce&&$e){const Fe=$e.getNodes();Fe.length>0&&(Te(" Zoom extents triggered (F key)"),qr.zoomAt(Ce,Fe,{scale:.9}).catch(bt=>{console.warn("[F key] zoomAt failed:",bt)}))}return}const D=Q.current,oe=K.current,fe=L.current;if(!D||!oe){Te(" No editor/area ref available");return}const we=()=>{const Ce=new Set;if(fe&&fe.entities&&fe.entities instanceof Map)for(const[$e,Fe]of fe.entities)D.getNode($e)&&Ce.add($e);for(const $e of j.current){const Fe=D.getNode($e);Te(` Checking node ${$e}: exists=${!!Fe}`),Fe&&Ce.add($e)}return Te(` Found ${Ce.size} selected nodes:`,Array.from(Ce)),Array.from(Ce)};if(C.code==="Delete"||C.code==="Backspace"){Te(" Delete key pressed. lassoSelectedNodesRef.current size:",j.current.size),Te(" lassoSelectedNodesRef.current contents:",Array.from(j.current));const Ce=we();if(Te(` Deleting ${Ce.length} nodes:`,Ce),Ce.length>0){const $e=[],Fe=[],bt=new Set(Ce);for(const Le of D.getConnections())(bt.has(Le.source)||bt.has(Le.target))&&Fe.push({source:Le.source,target:Le.target,sourceOutput:Le.sourceOutput,targetInput:Le.targetInput});for(const Le of Ce){const He=D.getNode(Le);He&&$e.push({id:Le,label:He.label,position:oe.nodeViews.get(Le)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(He.properties||{}))})}be.current.push({type:"delete",nodes:$e,connections:Fe}),Te(" Saved undo state:",be.current.length,"items in stack");for(const Le of Ce){const He=D.getConnections().filter(ze=>ze.source===Le||ze.target===Le);for(const ze of He)await D.removeConnection(ze.id);await D.removeNode(Le),j.current.delete(Le)}window.refreshBackdropGroups&&window.refreshBackdropGroups()}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyZ"&&!C.shiftKey){if(C.preventDefault(),be.current.length===0){Te(" Nothing to undo");return}const Ce=be.current.pop();if(Te(" Undoing:",Ce.type,Ce.nodes.length,"nodes"),Ce.type==="delete"){const $e={};k.current=!0;try{for(const Fe of Ce.nodes){const bt=Bn.getByLabel(Fe.label);if(bt){let Le;const He=()=>{oe&&oe.update("node",Le.id),c&&D&&(c.reset(),setTimeout(()=>{D.getNodes().forEach(async it=>{try{await c.fetch(it.id)}catch{}})},0))},ze=()=>{bt.updateStrategy==="dataflow"?(c&&c.reset(),c&&D&&setTimeout(()=>{D.getNodes().forEach(async it=>{try{await c.fetch(it.id)}catch{}})},0)):He()};Le=bt.factory(ze),Fe.properties&&Object.assign(Le.properties,Fe.properties),await D.addNode(Le),await oe.translate(Le.id,Fe.position),$e[Fe.id]=Le.id}}for(const Fe of Ce.connections){const bt=$e[Fe.source]||Fe.source,Le=$e[Fe.target]||Fe.target,He=D.getNode(bt),ze=D.getNode(Le);if(He&&ze)try{await D.addConnection(new Xt.Connection(He,Fe.sourceOutput,ze,Fe.targetInput))}catch(it){console.warn("[Editor] Could not restore connection:",it)}}Te(" Undo complete - restored",Ce.nodes.length,"nodes"),window.refreshBackdropGroups&&window.refreshBackdropGroups()}finally{k.current=!1,oe?.updateBackdropCaptures?.()}}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyC")try{const Ce=we();if(Ce.length===0){Te(" Nothing selected to copy");return}Te(` Copying ${Ce.length} nodes`);const $e=[],Fe=new Set(Ce);for(const He of Ce){const ze=D.getNode(He);ze&&$e.push({label:ze.label,position:oe.nodeViews.get(ze.id)?.position||{x:0,y:0},data:{id:ze.id,properties:JSON.parse(JSON.stringify(ze.properties||{}))}})}if($e.length===0){Te(" Nothing selected to copy (no nodes in selection)");return}const bt=[];for(const He of D.getConnections())Fe.has(He.source)&&Fe.has(He.target)&&bt.push({source:He.source,target:He.target,sourceOutput:He.sourceOutput,targetInput:He.targetInput});const Le={nodes:$e,connections:bt};localStorage.setItem("rete-clipboard",JSON.stringify(Le)),Te("Copied to clipboard:",Le)}catch(Ce){console.error("[Editor] Copy failed:",Ce)}if((C.ctrlKey||C.metaKey)&&C.code==="KeyV"){const Ce=localStorage.getItem("rete-clipboard");if(!Ce){Te(" Clipboard empty");return}try{const $e=JSON.parse(Ce),Fe={},Le=(K.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},He=oe.area.transform,ze=(Y.current.x-Le.left-He.x)/He.k,it=(Y.current.y-Le.top-He.y)/He.k;let gt=1/0,It=1/0;for(const ot of $e.nodes)gt=Math.min(gt,ot.position.x),It=Math.min(It,ot.position.y);fe&&fe.entities&&Array.from(fe.entities).forEach(ot=>fe.remove(ot)),k.current=!0;try{for(const ot of $e.nodes){let vt;const nn=Bn.getByLabel(ot.label);if(nn){const an=()=>{oe&&oe.update("node",vt.id),c&&D&&(c.reset(),setTimeout(()=>{D.getNodes().forEach(async Kt=>{try{await c.fetch(Kt.id)}catch{}})},0))},qt=()=>{nn.updateStrategy==="dataflow"?(c&&c.reset(),c&&D&&setTimeout(()=>{D.getNodes().forEach(async Kt=>{try{await c.fetch(Kt.id)}catch{}})},0)):an()};vt=nn.factory(qt)}if(vt){typeof vt.restore=="function"&&ot.data?vt.restore(ot.data):ot.data&&ot.data.properties&&vt.properties&&Object.assign(vt.properties,ot.data.properties),await D.addNode(vt);const an=ot.position.x-gt,qt=ot.position.y-It,Kt={x:ze+an,y:it+qt};await oe.translate(vt.id,Kt),Fe[ot.data.id]=vt.id,fe&&fe.add({id:vt.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{k.current=!1,oe?.updateBackdropCaptures?.()}const tn=[];for(const ot of $e.connections){const vt=Fe[ot.source],nn=Fe[ot.target];if(vt&&nn){const an=D.getNode(vt),qt=D.getNode(nn);an&&qt&&tn.push(D.addConnection(new Xt.Connection(an,ot.sourceOutput,qt,ot.targetInput)))}}if(await Promise.all(tn),c&&D){c.reset();for(const ot of D.getNodes())try{await c.fetch(ot.id)}catch{}}Te("Pasted from clipboard")}catch($e){console.error("[Editor] Paste failed:",$e)}}C.code==="Home"&&(C.preventDefault(),oe.area&&(oe.area.zoom(1,0,0),oe.area.translate(0,0),Te(" Viewport reset via Home key"))),C.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Te(" Drag state reset via Escape key"))},ie=C=>{Y.current={x:C.clientX,y:C.clientY}},ee=C=>{C.key==="Shift"&&(de.current=!0)},Ae=C=>{C.key==="Shift"&&(de.current=!1)},Se=()=>{Te(" Received delete from Electron IPC"),F({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let se=null;return window.api&&window.api.onDeleteKey&&(se=window.api.onDeleteKey(Se)),window.addEventListener("keydown",F),window.addEventListener("keydown",ee),window.addEventListener("keyup",Ae),window.addEventListener("mousemove",ie),()=>{window.removeEventListener("keydown",F),window.removeEventListener("keydown",ee),window.removeEventListener("keyup",Ae),window.removeEventListener("mousemove",ie),se&&se()}},[n,s,c,h]),E.useEffect(()=>{const F=a.current;if(!F||!n||!s)return;const ie=ee=>{const Ae=ee.target.closest('[data-testid="node"]');if(Ae){ee.preventDefault();const Se=Ae.dataset.nodeId||Array.from(s.nodeViews.entries()).find(([se,C])=>C.element===Ae)?.[0];if(Se){const se=n.getNode(Se);ue({visible:!0,position:{x:ee.clientX,y:ee.clientY},items:[{label:"Delete",handler:async()=>{const C=n.getConnections().filter(D=>D.source===Se||D.target===Se);for(const D of C)await n.removeConnection(D.id);await n.removeNode(Se)}}],nodeContext:se})}}else{ee.preventDefault();const Se=window._t2GetMenuItems?window._t2GetMenuItems():[];ue({visible:!0,position:{x:ee.clientX,y:ee.clientY},items:Se,nodeContext:null})}};return F.addEventListener("contextmenu",ie),()=>{F.removeEventListener("contextmenu",ie)}},[n,s]);const le=E.useCallback(()=>{ue(F=>({...F,visible:!1}))},[]),me=E.useCallback(async F=>{F.handler&&await F.handler(H.position)},[H.position]),Oe=async()=>{if(!(!n||!s))try{const F=n.getNodes().map(we=>{const Ce=typeof we.toJSON=="function"?we.toJSON():{...we};return we.properties&&(Ce.properties=we.properties),{id:we.id,label:we.label,position:s.nodeViews.get(we.id)?.position||{x:0,y:0},data:Ce}}),ie=n.getConnections().map(we=>({id:we.id,source:we.source,target:we.target,sourceOutput:we.sourceOutput,targetInput:we.targetInput})),ee=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ae={nodes:F,connections:ie,viewport:ee},Se=JSON.stringify(Ae,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Te("Running in HA ingress - showing save dialog"),B(Ae),J(!0);return}try{Se.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",Se))}catch{console.warn("localStorage skipped")}Te("Graph saved to localStorage");try{const we=await fetch(Sn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:Se});we.ok?Te("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",we.status)}catch(we){console.warn("[handleSave] Failed to save to server:",we)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",Se),Te("[handleSave] Saved temp file for Electron reload")}catch(we){console.warn("[handleSave] Failed to save temp file via Electron API",we)}if(window.showSaveFilePicker)try{const Ce=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await Ce.write(Se),await Ce.close(),Te("Graph saved to file");return}catch(we){if(we.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",we)}const D=new Blob([Se],{type:"application/json"}),oe=URL.createObjectURL(D),fe=document.createElement("a");fe.href=oe,fe.download=`autotron_graph_${Date.now()}.json`,fe.click(),URL.revokeObjectURL(oe),Te("Graph saved via download")}catch(F){console.error("Failed to save graph:",F)}};E.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!n||!s))try{const F=n.getNodes().map(se=>{const C=typeof se.toJSON=="function"?se.toJSON():{...se};return se.properties&&(C.properties=se.properties),{id:se.id,label:se.label,position:s.nodeViews.get(se.id)?.position||{x:0,y:0},data:C}}),ie=n.getConnections().map(se=>({id:se.id,source:se.source,target:se.target,sourceOutput:se.sourceOutput,targetInput:se.targetInput})),ee=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ae={nodes:F,connections:ie,viewport:ee,preUpdateSave:!0,timestamp:Date.now()},Se=JSON.stringify(Ae);Se.length<2e6&&(localStorage.setItem("saved-graph",Se),Te("[triggerGraphSave] Graph saved before update"))}catch(F){console.warn("[triggerGraphSave] Failed:",F)}},()=>{delete window.triggerGraphSave}),[n,s]);const[Ze,Be]=E.useState(!1),We=E.useRef(null),Nt=E.useRef(Date.now());E.useEffect(()=>{if(!n)return;const F=()=>{Be(!0)};n.addPipe(ie=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(ie.type)&&F(),ie))},[n]),E.useEffect(()=>{if(!n||!s)return;const F=async()=>{if(!(window.graphLoading||q.current)&&Ze)try{const ie=n.getNodes().map(C=>{const D=typeof C.toJSON=="function"?C.toJSON():{...C};return C.properties&&(D.properties=C.properties),{id:C.id,label:C.label,position:s.nodeViews.get(C.id)?.position||{x:0,y:0},data:D}}),ee=n.getConnections().map(C=>({id:C.id,source:C.source,target:C.target,sourceOutput:C.sourceOutput,targetInput:C.targetInput})),Ae=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Se={nodes:ie,connections:ee,viewport:Ae,autoSaved:!0,timestamp:Date.now()},se=JSON.stringify(Se);if(se.length<2e6){localStorage.setItem("saved-graph",se),Nt.current=Date.now(),Be(!1);try{await fetch(Sn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:se})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(ie){console.warn("[Auto-save] Failed:",ie)}};return We.current=setInterval(F,12e4),()=>{We.current&&clearInterval(We.current)}},[n,s,Ze]),E.useEffect(()=>{if(!n||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Te("[AutoLoad] Detected post-update reload, attempting to restore graph...");const ie=setTimeout(async()=>{try{const ee=localStorage.getItem("saved-graph");if(ee){Te("[AutoLoad] Found saved graph, loading...");const Ae=JSON.parse(ee);Ae.nodes&&Ae.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(ee){console.warn("[AutoLoad] Failed to auto-load graph:",ee)}},1e3);return()=>clearTimeout(ie)}},[n,s,c]);const Ot=E.useRef(!1);E.useEffect(()=>{if(!n||!s||!c||Ot.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Te("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),Ot.current=!0;return}const ee=localStorage.getItem("saved-graph"),Ae=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(ee||Ae){Te("[ServerAutoLoad] Skipping - desktop mode with local graph");return}Ot.current=!0;const se=setTimeout(async()=>{try{Te("[ServerAutoLoad] Fetching last active graph from server...");const D=await(await fetch(Sn("/api/engine/last-active"))).json();D.success&&D.graph?(Te("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(D.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):Te("[ServerAutoLoad] No last active graph on server")}catch(C){console.warn("[ServerAutoLoad] Failed to fetch from server:",C)}},1500);return()=>clearTimeout(se)},[n,s,c]);const zn=async()=>{if(!n||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!n,area:!!s,engine:!!c});return}try{let F=localStorage.getItem("saved-graph");if(!F&&window.api?.readTempFile)try{const se=await window.api.readTempFile("autotron_graph.json");se?.success&&se.content&&(F=se.content,Te("[handleLoad] Loaded graph from Electron temp file"))}catch(se){console.warn("[handleLoad] Failed to read Electron temp file",se)}if(!F){alert("No saved graph found");return}const ie=JSON.parse(F);Te(`[handleLoad] Loading graph with ${ie.nodes?.length} nodes`);const ee=ib(ie);if(!ee.valid){console.warn("[handleLoad] Graph validation failed:",ee.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ee.errors.length} errors`,4e3);const se=sb(ie);se.repaired&&(Te("[handleLoad] Graph repaired:",se.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${se.fixes.length} fixes applied`,3e3),Object.assign(ie,se.graphData))}ee.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",ee.warnings),await cn();const Ae=n.getNodes();if(Ae.length>0){console.error("[handleLoad] Clear did not work! Still have",Ae.length,"nodes");for(const se of Ae)try{await n.removeNode(se.id)}catch(C){console.error("[handleLoad] Force remove failed:",C)}}if(k.current=!0,q.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of ie.nodes){let D;const oe=Bn.getByLabel(C.label);if(oe){const fe=()=>{if(q.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};D=oe.factory(fe)}D&&(D.id=C.id,typeof D.restore=="function"&&C.data?D.restore(C.data):C.data&&C.data.properties&&D.properties&&Object.assign(D.properties,C.data.properties),await n.addNode(D),await s.translate(D.id,C.position))}const se=[];for(const C of ie.connections){const D=n.getNode(C.source),oe=n.getNode(C.target);D&&oe&&se.push(n.addConnection(new Xt.Connection(D,C.sourceOutput,oe,C.targetInput)))}await Promise.all(se)}finally{k.current=!1,s?.updateBackdropCaptures?.()}const Se=n.getNodes();if(Se.length>0&&s){Te("[handleLoad] Zooming to fit",Se.length,"nodes...");try{await qr.zoomAt(s,Se,{scale:.9})}catch(se){console.warn("[handleLoad] zoomAt failed:",se)}}Z.current&&(Te("[handleLoad] Processing graph immediately..."),await Z.current(),Te("[handleLoad] Graph processing complete")),q.current=!1,Te("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Te("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const se=ie.viewport||{x:0,y:0,k:1},C=se.k||1,D=se.x||0,oe=se.y||0;Te("[handleLoad] Restoring viewport:",{savedX:D,savedY:oe,savedK:C}),Te("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(C,0,0),s.area.translate(D,oe)}catch(we){console.warn("[handleLoad] Viewport restore failed:",we)}Te("[handleLoad] Transform after restore:",{...s.area.transform});const fe=s.container;if(fe){fe.tabIndex=-1,fe.focus(),document.activeElement&&document.activeElement!==fe&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const we=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(we,100),setTimeout(we,500),setTimeout(we,1e3)}n.getNodes().forEach(we=>{const Ce=s.nodeViews.get(we.id);if(Ce?.element)try{for(let $e=0;$e<10;$e++)try{Ce.element.releasePointerCapture($e)}catch{}}catch{}})}},300),Te("Graph loaded")}catch(F){console.error("Failed to load graph:",F),q.current=!1,alert("Failed to load graph")}},vn=async()=>{if(!n||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(n.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const ie=await fetch(Sn("/api/examples/starter"));if(!ie.ok)throw new Error(`Failed to fetch example: ${ie.status}`);const ee=await ie.json();if(!ee.success||!ee.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(ee.graph)),Te("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await zn(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(ie){console.error("[handleLoadExample] Failed:",ie),alert("Failed to load example graph: "+ie.message)}};E.useEffect(()=>{const F=()=>{Te("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),zn()};return document.addEventListener("autoLoadGraph",F),()=>document.removeEventListener("autoLoadGraph",F)},[n,s,c]);const cn=async()=>{if(!n){console.warn("[handleClear] No editor instance!");return}try{const F=n.getConnections(),ie=n.getNodes();Te(`[handleClear] Removing ${F.length} connections and ${ie.length} nodes`);for(const Ae of F)await n.removeConnection(Ae.id);for(const Ae of ie)await n.removeNode(Ae.id);const ee=n.getNodes();Te(`[handleClear] Complete. Remaining nodes: ${ee.length}`),ee.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",ee.map(Ae=>Ae.id))}catch(F){console.error("Failed to clear graph:",F)}},Nn=()=>{if(!(!n||!s))try{const F=n.getNodes().map(D=>{const oe=typeof D.toJSON=="function"?D.toJSON():{...D};return D.properties&&(oe.properties=D.properties),{id:D.id,label:D.label,position:s.nodeViews.get(D.id)?.position||{x:0,y:0},data:oe}}),ie=n.getConnections().map(D=>({id:D.id,source:D.source,target:D.target,sourceOutput:D.sourceOutput,targetInput:D.targetInput})),ee=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ae={nodes:F,connections:ie,viewport:ee},Se=new Blob([JSON.stringify(Ae,null,2)],{type:"application/json"}),se=URL.createObjectURL(Se),C=document.createElement("a");C.href=se,C.download=`graph-${Date.now()}.json`,C.click(),URL.revokeObjectURL(se),Te("Graph exported")}catch(F){console.error("Failed to export graph:",F)}},Qe=async F=>{const ie=ib(F);if(!ie.valid){console.warn("[handleImport] Graph validation failed:",ie.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ie.errors.length} errors`,4e3);const Se=sb(F);if(Se.repaired)Te("[handleImport] Graph repaired:",Se.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${Se.fixes.length} fixes applied`,3e3),F=Se.graphData;else if(!confirm(`Graph has ${ie.errors.length} errors. Continue anyway?`))return}const ee={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let Ae=0;if(console.error=(...Se)=>{Ae++<10&&ee.error(...Se)},ee.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!n||!s||!c){Object.assign(console,ee);return}try{if(await cn(),k.current=!0,q.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of F.nodes){let D;const oe=Bn.getByLabel(C.label);if(!oe){console.warn(`[handleImport] No definition found for node label: "${C.label}"`);continue}if(oe){const fe=()=>{if(q.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};D=oe.factory(fe)}D&&(D.id=C.id,C.label==="Timeline Color"&&ee.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof D.restore=="function",hasData:!!C.data,dataKeys:C.data?Object.keys(C.data):"N/A",propertiesKeys:C.data?.properties?Object.keys(C.data.properties):"N/A",previewModeValue:C.data?.properties?.previewMode}),typeof D.restore=="function"&&C.data?D.restore(C.data):C.data&&C.data.properties&&D.properties&&Object.assign(D.properties,C.data.properties),await n.addNode(D),await s.translate(D.id,C.position))}const se=[];for(const C of F.connections){const D=n.getNode(C.source),oe=n.getNode(C.target);D&&oe?se.push(n.addConnection(new Xt.Connection(D,C.sourceOutput,oe,C.targetInput))):console.warn(`[handleImport] Connection skipped - missing node: source=${C.source} (${!!D}), target=${C.target} (${!!oe})`)}await Promise.all(se)}finally{k.current=!1,s?.updateBackdropCaptures?.()}const Se=n.getNodes();if(Se.length>0&&s)try{await qr.zoomAt(s,Se,{scale:.9})}catch{}q.current=!1,setTimeout(async()=>{window.graphLoading=!1,Te("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{Z.current&&(Te("[handleImport] Running processImmediate to sync node states"),Z.current()),setTimeout(()=>{Z.current&&(Te("[handleImport] Running second processImmediate for late-loading data"),Z.current())},1500)},500);try{const C=JSON.stringify(F,null,2);C.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",C),Te("[handleImport] Graph saved to localStorage")),(await fetch(Sn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:C})).ok&&Te("[handleImport] Graph saved to server as last active")}catch(C){console.warn("[handleImport] Failed to save imported graph:",C)}const se=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(se,100),setTimeout(se,500)},2e3),Object.assign(console,ee),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Te("Graph imported successfully. Pan/zoom should work now.")}catch(Se){window.graphLoading=!1,typeof ee<"u"&&Object.assign(console,ee),console.error("Failed to import graph:",Se),q.current=!1,alert("Failed to import graph: "+Se.message)}};return p.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[p.jsx(ZO,{width:re,panelRef:Je,dropActive:rt,favoriteGroups:Re,onAddFavorite:S,onRemoveFavorite:_,onCreateNode:O}),p.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${re}px`}}),p.jsx("div",{ref:b}),(()=>{const F=y?x.current:b.current;return F?Pr.createPortal(p.jsx(FO,{onSave:Oe,onLoad:zn,onLoadExample:vn,onClear:cn,onExport:Nn,onImport:Qe,hasUnsavedChanges:Ze,isMerged:y,onToggleMerged:()=>v(ie=>!ie)}),F):null})(),p.jsx(PO,{dockSlotRef:x}),p.jsx(KO,{visible:H.visible,position:H.position,items:H.items,onClose:le,onSelect:me}),p.jsx(XO,{isOpen:V,onClose:()=>J(!1),onSave:()=>{Be(!1),J(!1)},currentGraphData:ve})]})}class uj extends Ma.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",r),this.setState({error:n,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?p.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:p.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[p.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),p.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),p.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&p.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[p.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),p.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[p.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#4a4a6c",onMouseOut:n=>n.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),p.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#339af0",onMouseOut:n=>n.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function dj({isLoading:a,progress:n=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[d,h]=E.useState(!1),[m,y]=E.useState(a);return E.useEffect(()=>{if(!a&&m){h(!0);const v=setTimeout(()=>{y(!1),h(!1)},500);return()=>clearTimeout(v)}else a&&!m&&y(!0)},[a,m]),m?p.jsxs("div",{className:`loading-overlay ${d?"fade-out":""}`,children:[p.jsx("div",{className:"loading-logo",children:""}),p.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),p.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),p.jsx("div",{className:"loading-progress-container",children:p.jsx("div",{className:"loading-progress-bar",children:p.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,n)}%`}})})}),p.jsx("div",{className:"loading-status",children:r}),l>0&&p.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&p.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function fj({updateInfo:a,onClose:n,onApplyUpdate:r}){const[s,l]=E.useState(!1),[c,d]=E.useState("");if(!a||!a.hasUpdate)return null;const h=async()=>{l(!0),d("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),d("Graph saved! Starting update..."))}catch(y){console.warn("Pre-update graph save failed:",y)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const v=await(await ln("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d(v.message||"Updating... The app will restart shortly."),setTimeout(()=>{d("Update applied! Reloading page..."),setTimeout(()=>{const b=()=>{ln("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)},2e3)}catch(y){y.message.includes("fetch")||y.message.includes("network")?(d("Server restarting... Reloading page..."),setTimeout(()=>{const v=()=>{ln("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(v,2e3))};v()},3e3)):(d(`Update failed: ${y.message}`),l(!1))}},m=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),n()};return p.jsx("div",{className:"update-modal-overlay",children:p.jsxs("div",{className:"update-modal",children:[p.jsxs("div",{className:"update-modal-header",children:[p.jsx("span",{className:"update-icon",children:""}),p.jsx("h2",{children:"Update Available!"})]}),p.jsxs("div",{className:"update-modal-version",children:[p.jsx("span",{className:"version-current",children:a.currentVersion}),p.jsx("span",{className:"version-arrow",children:""}),p.jsx("span",{className:"version-new",children:a.newVersion})]}),p.jsxs("div",{className:"update-modal-content",children:[p.jsx("h3",{children:"What's New:"}),p.jsx("div",{className:"changelog-content",children:p.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&p.jsxs("div",{className:"update-status",children:[p.jsx("span",{className:"status-spinner",children:""}),c]}),p.jsx("div",{className:"update-modal-actions",children:s?p.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"update-btn update-btn-primary",onClick:h,children:"Update Now"}),p.jsx("button",{className:"update-btn update-btn-secondary",onClick:m,children:"Later"})]})})]})})}const hj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};hj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Pw=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},n={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,d]of Object.entries(s)){const h=n[c];h&&(d.accent&&(l.style.setProperty(`--node-${h}-color`,d.accent),l.style.setProperty(`--node-${h}-color-rgb`,a(d.accent))),d.background&&l.style.setProperty(`--node-${h}-bg`,d.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},Zw=()=>{const a=c=>{const d=parseInt(c.slice(1,3),16),h=parseInt(c.slice(3,5),16),m=parseInt(c.slice(5,7),16);return`${d}, ${h}, ${m}`},n=(c,d=15)=>{const h=parseInt(c.slice(1),16),m=Math.max(0,(h>>16)-Math.round(255*d/100)),y=Math.max(0,(h>>8&255)-Math.round(255*d/100)),v=Math.max(0,(h&255)-Math.round(255*d/100));return`#${(16777216|m<<16|y<<8|v).toString(16).slice(1)}`},r=(c,d=20)=>{const h=parseInt(c.slice(1),16),m=Math.min(255,(h>>16)+Math.round(255*d/100)),y=Math.min(255,(h>>8&255)+Math.round(255*d/100)),v=Math.min(255,(h&255)+Math.round(255*d/100));return`#${(16777216|m<<16|y<<8|v).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),d=c?JSON.parse(c):{},h=document.documentElement;for(const[m,y]of Object.entries(s)){const v=d[m]?.color||l[m];v&&(h.style.setProperty(`--socket-${y}-color`,v),h.style.setProperty(`--socket-${y}-dark`,n(v)),h.style.setProperty(`--socket-${y}-border`,r(v)),h.style.setProperty(`--socket-${y}-rgb`,a(v)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};Pw();Zw();window.applyCategoryColors=Pw;window.applySocketColors=Zw;const Hf=new Map,Vf=new Map;function pj(){const[a,n]=E.useState(ge.connected),[r,s]=E.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=E.useState([]),[d,h]=E.useState([]),[m,y]=E.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[v,b]=E.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[x,k]=E.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[j,Z]=E.useState(null),[q,Q]=E.useState(0),[K,L]=E.useState(()=>localStorage.getItem("eventLogFilter")||"all"),[Y,de]=E.useState([]),be=E.useRef(null),H=E.useRef(null),ue=E.useRef({authenticated:!1,invalidPinNotified:!1}),re=100,pe=np();E.useEffect(()=>{const B=setInterval(()=>{Q(S=>S+1)},3e4);return()=>clearInterval(B)},[]);const Re=E.useCallback(()=>{const B=window._t2Editor;if(!B)return;const _=B.getNodes().filter(O=>O.label==="Backdrop"||O.constructor?.name==="BackdropNode"||O.properties?.width!==void 0&&O.properties?.height!==void 0&&O.properties?.title!==void 0).map(O=>({id:O.id,title:O.properties?.title||"Group",color:O.properties?.customColor||window.BackdropColorPalette?.[O.properties?.colorIndex]?.border||"#888"})).sort((O,z)=>O.title.localeCompare(z.title));de(_)},[]);E.useEffect(()=>{const B=()=>{setTimeout(Re,200)};window.addEventListener("graphLoadComplete",B),window.refreshBackdropGroups=Re;const S=setTimeout(Re,500);return()=>{window.removeEventListener("graphLoadComplete",B),delete window.refreshBackdropGroups,clearTimeout(S)}},[Re]),E.useEffect(()=>Yw(S=>{k(S),!S.isLoading&&S.progress===100&&S.failedPlugins?.length>0&&pe.warning(`Loaded ${S.loadedCount} plugins (${S.failedPlugins.length} failed)`),S.error&&pe.error(`Plugin loading failed: ${S.error}`)}),[pe]),E.useEffect(()=>{function B(){n(!0),pe.success("Connected to server"),je("system","Socket connected to server"),Vf.clear();const Qe=us();Qe&&ge.emit("authenticate",Qe),ge.emit("editor-active"),ge.emit("request-ha-status")}function S(){n(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),ue.current.authenticated=!1,pe.warning("Disconnected from server - reconnecting..."),je("system","Socket disconnected from server")}function _(Qe){je("system",`Socket reconnected after ${Qe} attempt(s)`)}function O(Qe){Qe%5===0&&je("system",`Reconnection attempt ${Qe}...`)}function z(Qe){je("system","Reconnection failed, retrying...")}function le(Qe){s(Qe)}function me(){ue.current.authenticated||(ue.current.authenticated=!0,ue.current.invalidPinNotified=!1,pe.success("Authenticated"))}function Oe(Qe){ue.current.authenticated=!1;const F=(Qe?.error||"").toString();if(F.toLowerCase().includes("invalid pin")){ue.current.invalidPinNotified||(ue.current.invalidPinNotified=!0,pe.error("Stored PIN is invalid. Update it in Settings  Security."));return}const ie=F?`Authentication failed: ${F}`:"Authentication failed";pe.error(ie)}function Ze(){if(!ge.connected)return;ue.current.invalidPinNotified=!1;const Qe=us();Qe&&ge.emit("authenticate",Qe)}function Be(Qe){const{id:F,state:ie,on:ee,name:Ae,vendor:Se}=Qe;if(!F)return;const se=Vf.get(F),C=ee!==void 0?ee:ie==="on"||ie==="playing"||ie==="open",D=Ae||Qe.friendly_name||Qe.attributes?.friendly_name||F.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(se&&se.on===C)return;Vf.set(F,{on:C,state:ie});const oe=Hf.get(F),fe=C?"ON":"OFF";let we=Se||"External";Se||(F.startsWith("ha_")?we="HA":F.startsWith("hue_")?we="Hue":F.startsWith("kasa_")&&(we="Kasa")),oe&&Date.now()-oe.timestamp<5e3?(je("device",`${D}  ${fe}`,{source:"app",triggeredBy:oe.nodeTitle,nodeId:oe.nodeId}),Hf.delete(F)):je("trigger",`${D}  ${fe}`,{source:we})}function We(Qe){}function Nt(Qe){const{nodeId:F,nodeLabel:ie,result:ee}=Qe;je("node",`${ie||F} executed`,{...ee,nodeId:F})}function Ot(Qe){Array.isArray(Qe)&&h(Qe.slice(0,20))}function zn(Qe){const{type:F,name:ie,value:ee}=Qe;je("trigger",`${F}: ${ie}`,ee)}function vn(Qe){if(Qe.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==Qe.newVersion&&pe.info(` Update available: ${Qe.currentVersion}  ${Qe.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>Z(Qe)})}ge.on("connect",B),ge.on("disconnect",S),ge.on("reconnect",_),ge.on("reconnect_attempt",O),ge.on("reconnect_error",z),ge.on("auth-success",me),ge.on("auth-failed",Oe),ge.on("ha-connection-status",le),ge.on("device-state-update",Be),ge.on("device_state_change",We),ge.on("node_executed",Nt),ge.on("scheduled_events",Ot),ge.on("trigger_event",zn),ge.on("update-available",vn),window.addEventListener("t2-pin-changed",Ze);const cn=()=>{ge.connected&&ge.emit("editor-inactive")};window.addEventListener("beforeunload",cn),IT();const Nn=setInterval(()=>{ge.connected&&ge.emit("editor-heartbeat")},3e4);return()=>{ge.connected&&ge.emit("editor-inactive"),clearInterval(Nn),ge.off("connect",B),ge.off("disconnect",S),ge.off("reconnect",_),ge.off("reconnect_attempt",O),ge.off("reconnect_error",z),ge.off("auth-success",me),ge.off("auth-failed",Oe),ge.off("ha-connection-status",le),ge.off("device-state-update",Be),ge.off("device_state_change",We),ge.off("node_executed",Nt),ge.off("scheduled_events",Ot),ge.off("trigger_event",zn),ge.off("update-available",vn),window.removeEventListener("t2-pin-changed",Ze),window.removeEventListener("beforeunload",cn),$T()}},[]);const je=(B,S,_=null)=>{const O=new Date().toLocaleTimeString();c(z=>[{timestamp:O,type:B,message:S,details:_},...z].slice(0,re))},Je=E.useRef({}),rt=E.useCallback((B,S)=>{const _=S.map(me=>({...me,nodeId:B}));Je.current[B]=_;const O=[];Object.values(Je.current).forEach(me=>{Array.isArray(me)&&O.push(...me)});const z=new Date,le=O.filter(me=>me.time&&new Date(me.time)>z).sort((me,Oe)=>new Date(me.time)-new Date(Oe.time)).slice(0,20);h(le)},[]),Ke=E.useCallback(B=>{delete Je.current[B],rt(B,[])},[rt]);E.useEffect(()=>(window.addEventLog=je,window.setUpcomingEvents=h,window.registerScheduledEvents=rt,window.unregisterScheduledEvents=Ke,window.T2Toast=pe,window.registerPendingCommand=(B,S,_,O)=>{Hf.set(B,{nodeTitle:S,action:_,nodeId:O,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[rt,Ke,pe]);const N=B=>{if(!B)return"";const S=new Date(B),O=S-new Date,z=Math.floor(O/6e4),le=Math.floor(z/60),me=Math.floor(le/24);let Oe="";return me>0?Oe=`${me}d ${le%24}h`:le>0?Oe=`${le}h ${z%60}m`:z>0?Oe=`${z}m`:Oe="<1m",`${S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${Oe})`},V=E.useCallback(async B=>{if(!B)return;const S=window._t2Area,_=window._t2Editor;if(!S||!_){console.warn("[focusNode] Editor not ready");return}const O=_.getNode(B);if(!O){console.warn("[focusNode] Node not found:",B);return}try{const{AreaExtensions:z}=await Jg(async()=>{const{AreaExtensions:le}=await Promise.resolve().then(()=>kv);return{AreaExtensions:le}},void 0,import.meta.url);await z.zoomAt(S,[O],{scale:1})}catch(z){console.warn("[focusNode] Failed to zoom to node:",z)}},[]),J=E.useCallback(async B=>{if(!B)return;const S=window._t2Area,_=window._t2Editor;if(!S||!_){console.warn("[focusBackdrop] Editor not ready");return}const O=_.getNode(B);if(!O){console.warn("[focusBackdrop] Backdrop not found:",B);return}try{const z=S.nodeViews.get(B);if(!z){console.warn("[focusBackdrop] Node view not found");return}const le=z.position,me=O.properties?.width||O.width||400,Oe=O.properties?.height||O.height||300,Ze=le.x+me/2,Be=le.y+Oe/2,We=S.container,Nt=We.clientWidth,Ot=We.clientHeight,zn=Nt*.85/me,vn=Ot*.85/Oe,cn=Math.min(zn,vn,1.5),Nn=Nt/2-Ze*cn,Qe=Ot/2-Be*cn;await S.area.zoom(cn,0,0),await S.area.translate(Nn,Qe)}catch(z){console.warn("[focusBackdrop] Failed to zoom to backdrop:",z)}},[]),ve=E.useCallback(async()=>{const B=window._t2Area,S=window._t2Editor;if(!B||!S){console.warn("[zoomExtents] Editor not ready");return}const _=S.getNodes();if(_.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:O}=await Jg(async()=>{const{AreaExtensions:z}=await Promise.resolve().then(()=>kv);return{AreaExtensions:z}},void 0,import.meta.url);await O.zoomAt(B,_,{scale:.7})}catch(O){console.warn("[zoomExtents] Failed to zoom:",O)}},[]);return p.jsxs("div",{className:"app-container",children:[j&&j.hasUpdate&&p.jsx(fj,{updateInfo:j,onClose:()=>Z(null)}),p.jsx(dj,{isLoading:x.isLoading,progress:x.progress,status:x.status,loadedCount:x.loadedCount,totalCount:x.totalCount,error:x.error}),p.jsx("div",{className:"editor-wrapper",children:p.jsx(cj,{})}),p.jsx("div",{className:"resize-handle",ref:H,onMouseDown:B=>{B.preventDefault();const S=B.clientY,_=m,O=le=>{const me=S-le.clientY,Oe=Math.max(80,Math.min(400,_+me));y(Oe),localStorage.setItem("panelHeight",Oe)},z=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",z)},children:p.jsx("div",{className:"resize-handle-grip"})}),p.jsxs("div",{className:"bottom-panels",style:{height:m,fontSize:v},children:[p.jsxs("div",{className:"panel event-log-panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("span",{className:"panel-title",children:"Event Log"}),p.jsxs("div",{className:"group-nav-buttons",children:[p.jsx("button",{className:"group-nav-btn group-nav-all",onClick:ve,title:"Zoom to fit all nodes (F key)",children:" All"}),Y.map(B=>p.jsx("button",{className:"group-nav-btn",style:{borderColor:B.color},onClick:()=>J(B.id),title:`Zoom to "${B.title}" group`,children:B.title},B.id))]}),p.jsxs("div",{className:"panel-controls",children:[p.jsxs("div",{className:"filter-buttons",children:[p.jsx("button",{className:`filter-btn ${K==="all"?"active":""}`,onClick:()=>{L("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),p.jsx("button",{className:`filter-btn ${K==="app"?"active":""}`,onClick:()=>{L("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),p.jsx("button",{className:`filter-btn ${K==="ha"?"active":""}`,onClick:()=>{L("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),p.jsx("button",{className:"font-size-btn",onClick:()=>{const B=Math.max(8,v-1);b(B),localStorage.setItem("panelFontSize",B)},children:"A-"}),p.jsxs("span",{className:"font-size-label",children:[v,"px"]}),p.jsx("button",{className:"font-size-btn",onClick:()=>{const B=Math.min(16,v+1);b(B),localStorage.setItem("panelFontSize",B)},children:"A+"}),p.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),p.jsx("div",{className:"panel-content",ref:be,children:l.length===0?p.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(B=>K==="all"?!0:K==="app"?B.details?.triggeredBy||B.details?.source==="app"||B.type==="node"||B.type==="device"||B.type==="system":K==="ha"?B.type==="trigger"||B.details?.source&&B.details.source!=="app"&&!B.details?.triggeredBy:!0).map((B,S)=>p.jsxs("div",{className:`log-entry log-${B.type}${B.details?.nodeId?" clickable":""}`,title:B.details?.nodeId?"Click to jump to this node":B.details?.triggeredBy?`Triggered by: ${B.details.triggeredBy}`:B.details?.source&&B.details.source!=="app"?`Triggered externally via ${B.details.source}`:"",onClick:()=>B.details?.nodeId&&V(B.details.nodeId),style:B.details?.nodeId?{cursor:"pointer"}:{},children:[p.jsx("span",{className:"log-time",children:B.timestamp}),p.jsx("span",{className:`log-type-badge ${B.type}`,children:B.type==="trigger"?"external":B.type}),p.jsx("span",{className:"log-message",children:B.message}),B.details?.triggeredBy&&p.jsxs("span",{className:"log-source app-source",children:["via ",B.details.triggeredBy]}),B.details?.source&&B.details.source!=="app"&&!B.details?.triggeredBy&&p.jsxs("span",{className:"log-source external-source",children:["via ",B.details.source]})]},S))})]}),p.jsxs("div",{className:"panel upcoming-events-panel",children:[p.jsx("div",{className:"panel-header",children:p.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),p.jsx("div",{className:"panel-content",children:d.length===0?p.jsx("div",{className:"empty-message",children:"No scheduled events..."}):d.map((B,S)=>p.jsxs("div",{className:`event-entry event-${B.action||"unknown"}${B.nodeId?" clickable":""}`,onClick:()=>B.nodeId&&V(B.nodeId),title:B.nodeId?"Click to jump to this node":"",style:B.nodeId?{cursor:"pointer"}:{},children:[p.jsx("span",{className:"event-time",children:N(B.time)}),p.jsx("span",{className:`event-action ${B.action}`,children:B.action||"event"}),p.jsx("span",{className:"event-device",children:B.deviceName||B.device||"Unknown"})]},S))})]})]})]})}function mj(){return p.jsx(uj,{children:p.jsxs(GO,{children:[p.jsx(YO,{}),p.jsx(pj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");cb.createRoot(document.getElementById("root")).render(p.jsx(E.StrictMode,{children:p.jsx(mj,{})}));
