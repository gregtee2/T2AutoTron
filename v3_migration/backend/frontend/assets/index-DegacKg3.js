function ob(a,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Ch(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var rf={exports:{}},yo={};var Hg;function tk(){if(Hg)return yo;Hg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return yo.Fragment=n,yo.jsx=r,yo.jsxs=r,yo}var Vg;function nk(){return Vg||(Vg=1,rf.exports=tk()),rf.exports}var m=nk(),sf={exports:{}},Je={};var qg;function ak(){if(qg)return Je;qg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function E(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,$={};function Q(x,L,N){this.props=x,this.context=L,this.refs=$,this.updater=N||O}Q.prototype.isReactComponent={},Q.prototype.setState=function(x,L){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,L,"setState")},Q.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function K(){}K.prototype=Q.prototype;function z(x,L,N){this.props=x,this.context=L,this.refs=$,this.updater=N||O}var P=z.prototype=new K;P.constructor=z,Z(P,Q.prototype),P.isPureReactComponent=!0;var he=Array.isArray;function pe(){}var G={H:null,A:null,T:null,S:null},ue=Object.prototype.hasOwnProperty;function te(x,L,N){var M=N.ref;return{$$typeof:a,type:x,key:L,ref:M!==void 0?M:null,props:N}}function Y(x,L){return te(x.type,L,x.props)}function fe(x){return typeof x=="object"&&x!==null&&x.$$typeof===a}function Ne(x){var L={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(N){return L[N]})}var Re=/\/+/g;function $e(x,L){return typeof x=="object"&&x!==null&&x.key!=null?Ne(""+x.key):L.toString(36)}function qe(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(pe,pe):(x.status="pending",x.then(function(L){x.status==="pending"&&(x.status="fulfilled",x.value=L)},function(L){x.status==="pending"&&(x.status="rejected",x.reason=L)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function I(x,L,N,M,le){var ye=typeof x;(ye==="undefined"||ye==="boolean")&&(x=null);var je=!1;if(x===null)je=!0;else switch(ye){case"bigint":case"string":case"number":je=!0;break;case"object":switch(x.$$typeof){case a:case n:je=!0;break;case v:return je=x._init,I(je(x._payload),L,N,M,le)}}if(je)return le=le(x),je=M===""?"."+$e(x,0):M,he(le)?(N="",je!=null&&(N=je.replace(Re,"$&/")+"/"),I(le,L,N,"",function(Mt){return Mt})):le!=null&&(fe(le)&&(le=Y(le,N+(le.key==null||x&&x.key===le.key?"":(""+le.key).replace(Re,"$&/")+"/")+je)),L.push(le)),1;je=0;var Qe=M===""?".":M+":";if(he(x))for(var Ze=0;Ze<x.length;Ze++)M=x[Ze],ye=Qe+$e(M,Ze),je+=I(M,L,N,ye,le);else if(Ze=E(x),typeof Ze=="function")for(x=Ze.call(x),Ze=0;!(M=x.next()).done;)M=M.value,ye=Qe+$e(M,Ze++),je+=I(M,L,N,ye,le);else if(ye==="object"){if(typeof x.then=="function")return I(qe(x),L,N,M,le);throw L=String(x),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return je}function re(x,L,N){if(x==null)return x;var M=[],le=0;return I(x,M,"","",function(ye){return L.call(N,ye,le++)}),M}function ve(x){if(x._status===-1){var L=x._result;L=L(),L.then(function(N){(x._status===0||x._status===-1)&&(x._status=1,x._result=N)},function(N){(x._status===0||x._status===-1)&&(x._status=2,x._result=N)}),x._status===-1&&(x._status=0,x._result=L)}if(x._status===1)return x._result.default;throw x._result}var ze=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},H={map:re,forEach:function(x,L,N){re(x,function(){L.apply(this,arguments)},N)},count:function(x){var L=0;return re(x,function(){L++}),L},toArray:function(x){return re(x,function(L){return L})||[]},only:function(x){if(!fe(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return Je.Activity=b,Je.Children=H,Je.Component=Q,Je.Fragment=r,Je.Profiler=l,Je.PureComponent=z,Je.StrictMode=s,Je.Suspense=p,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Je.__COMPILER_RUNTIME={__proto__:null,c:function(x){return G.H.useMemoCache(x)}},Je.cache=function(x){return function(){return x.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(x,L,N){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var M=Z({},x.props),le=x.key;if(L!=null)for(ye in L.key!==void 0&&(le=""+L.key),L)!ue.call(L,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&L.ref===void 0||(M[ye]=L[ye]);var ye=arguments.length-2;if(ye===1)M.children=N;else if(1<ye){for(var je=Array(ye),Qe=0;Qe<ye;Qe++)je[Qe]=arguments[Qe+2];M.children=je}return te(x.type,le,M)},Je.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:c,_context:x},x},Je.createElement=function(x,L,N){var M,le={},ye=null;if(L!=null)for(M in L.key!==void 0&&(ye=""+L.key),L)ue.call(L,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(le[M]=L[M]);var je=arguments.length-2;if(je===1)le.children=N;else if(1<je){for(var Qe=Array(je),Ze=0;Ze<je;Ze++)Qe[Ze]=arguments[Ze+2];le.children=Qe}if(x&&x.defaultProps)for(M in je=x.defaultProps,je)le[M]===void 0&&(le[M]=je[M]);return te(x,ye,le)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(x){return{$$typeof:h,render:x}},Je.isValidElement=fe,Je.lazy=function(x){return{$$typeof:v,_payload:{_status:-1,_result:x},_init:ve}},Je.memo=function(x,L){return{$$typeof:y,type:x,compare:L===void 0?null:L}},Je.startTransition=function(x){var L=G.T,N={};G.T=N;try{var M=x(),le=G.S;le!==null&&le(N,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(pe,ze)}catch(ye){ze(ye)}finally{L!==null&&N.types!==null&&(L.types=N.types),G.T=L}},Je.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Je.use=function(x){return G.H.use(x)},Je.useActionState=function(x,L,N){return G.H.useActionState(x,L,N)},Je.useCallback=function(x,L){return G.H.useCallback(x,L)},Je.useContext=function(x){return G.H.useContext(x)},Je.useDebugValue=function(){},Je.useDeferredValue=function(x,L){return G.H.useDeferredValue(x,L)},Je.useEffect=function(x,L){return G.H.useEffect(x,L)},Je.useEffectEvent=function(x){return G.H.useEffectEvent(x)},Je.useId=function(){return G.H.useId()},Je.useImperativeHandle=function(x,L,N){return G.H.useImperativeHandle(x,L,N)},Je.useInsertionEffect=function(x,L){return G.H.useInsertionEffect(x,L)},Je.useLayoutEffect=function(x,L){return G.H.useLayoutEffect(x,L)},Je.useMemo=function(x,L){return G.H.useMemo(x,L)},Je.useOptimistic=function(x,L){return G.H.useOptimistic(x,L)},Je.useReducer=function(x,L,N){return G.H.useReducer(x,L,N)},Je.useRef=function(x){return G.H.useRef(x)},Je.useState=function(x){return G.H.useState(x)},Je.useSyncExternalStore=function(x,L,N){return G.H.useSyncExternalStore(x,L,N)},Je.useTransition=function(){return G.H.useTransition()},Je.version="19.2.0",Je}var Gg;function Th(){return Gg||(Gg=1,sf.exports=ak()),sf.exports}var k=Th();const _a=Ch(k),rk=ob({__proto__:null,default:_a},[k]);var of={exports:{}},go={},lf={exports:{}},cf={};var Yg;function ik(){return Yg||(Yg=1,(function(a){function n(I,re){var ve=I.length;I.push(re);e:for(;0<ve;){var ze=ve-1>>>1,H=I[ze];if(0<l(H,re))I[ze]=re,I[ve]=H,ve=ze;else break e}}function r(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var re=I[0],ve=I.pop();if(ve!==re){I[0]=ve;e:for(var ze=0,H=I.length,x=H>>>1;ze<x;){var L=2*(ze+1)-1,N=I[L],M=L+1,le=I[M];if(0>l(N,ve))M<H&&0>l(le,N)?(I[ze]=le,I[M]=ve,ze=M):(I[ze]=N,I[L]=ve,ze=L);else if(M<H&&0>l(le,ve))I[ze]=le,I[M]=ve,ze=M;else break e}}return re}function l(I,re){var ve=I.sortIndex-re.sortIndex;return ve!==0?ve:I.id-re.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();a.unstable_now=function(){return d.now()-h}}var p=[],y=[],v=1,b=null,S=3,E=!1,O=!1,Z=!1,$=!1,Q=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function P(I){for(var re=r(y);re!==null;){if(re.callback===null)s(y);else if(re.startTime<=I)s(y),re.sortIndex=re.expirationTime,n(p,re);else break;re=r(y)}}function he(I){if(Z=!1,P(I),!O)if(r(p)!==null)O=!0,pe||(pe=!0,Ne());else{var re=r(y);re!==null&&qe(he,re.startTime-I)}}var pe=!1,G=-1,ue=5,te=-1;function Y(){return $?!0:!(a.unstable_now()-te<ue)}function fe(){if($=!1,pe){var I=a.unstable_now();te=I;var re=!0;try{e:{O=!1,Z&&(Z=!1,K(G),G=-1),E=!0;var ve=S;try{t:{for(P(I),b=r(p);b!==null&&!(b.expirationTime>I&&Y());){var ze=b.callback;if(typeof ze=="function"){b.callback=null,S=b.priorityLevel;var H=ze(b.expirationTime<=I);if(I=a.unstable_now(),typeof H=="function"){b.callback=H,P(I),re=!0;break t}b===r(p)&&s(p),P(I)}else s(p);b=r(p)}if(b!==null)re=!0;else{var x=r(y);x!==null&&qe(he,x.startTime-I),re=!1}}break e}finally{b=null,S=ve,E=!1}re=void 0}}finally{re?Ne():pe=!1}}}var Ne;if(typeof z=="function")Ne=function(){z(fe)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,$e=Re.port2;Re.port1.onmessage=fe,Ne=function(){$e.postMessage(null)}}else Ne=function(){Q(fe,0)};function qe(I,re){G=Q(function(){I(a.unstable_now())},re)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(I){I.callback=null},a.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<I?Math.floor(1e3/I):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(I){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var ve=S;S=re;try{return I()}finally{S=ve}},a.unstable_requestPaint=function(){$=!0},a.unstable_runWithPriority=function(I,re){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var ve=S;S=I;try{return re()}finally{S=ve}},a.unstable_scheduleCallback=function(I,re,ve){var ze=a.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ze+ve:ze):ve=ze,I){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ve+H,I={id:v++,callback:re,priorityLevel:I,startTime:ve,expirationTime:H,sortIndex:-1},ve>ze?(I.sortIndex=ve,n(y,I),r(p)===null&&I===r(y)&&(Z?(K(G),G=-1):Z=!0,qe(he,ve-ze))):(I.sortIndex=H,n(p,I),O||E||(O=!0,pe||(pe=!0,Ne()))),I},a.unstable_shouldYield=Y,a.unstable_wrapCallback=function(I){var re=S;return function(){var ve=S;S=re;try{return I.apply(this,arguments)}finally{S=ve}}}})(cf)),cf}var Pg;function sk(){return Pg||(Pg=1,lf.exports=ik()),lf.exports}var uf={exports:{}},Cn={};var Fg;function ok(){if(Fg)return Cn;Fg=1;var a=Th();function n(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:p,containerInfo:y,implementation:v}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Cn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return c(p,y,null,v)},Cn.flushSync=function(p){var y=d.T,v=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=v,s.d.f()}},Cn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Cn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Cn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,E=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:E}):v==="script"&&s.d.X(p,{crossOrigin:b,integrity:S,fetchPriority:E,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Cn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=h(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Cn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin);s.d.L(p,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Cn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=h(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Cn.requestFormReset=function(p){s.d.r(p)},Cn.unstable_batchedUpdates=function(p,y){return p(y)},Cn.useFormState=function(p,y,v){return d.H.useFormState(p,y,v)},Cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Cn.version="19.2.0",Cn}var Zg;function lb(){if(Zg)return uf.exports;Zg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),uf.exports=ok(),uf.exports}var Xg;function lk(){if(Xg)return go;Xg=1;var a=sk(),n=Th(),r=lb();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function y(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,o=t;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return p(u),e;if(f===o)return p(u),t;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=f;else{for(var g=!1,w=u.child;w;){if(w===i){g=!0,i=u,o=f;break}if(w===o){g=!0,o=u,i=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===i){g=!0,i=f,o=u;break}if(w===o){g=!0,o=f,i=u;break}w=w.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),z=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function Ne(e){return e===null||typeof e!="object"?null:(e=fe&&e[fe]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Symbol.for("react.client.reference");function $e(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case Q:return"Profiler";case $:return"StrictMode";case he:return"Suspense";case pe:return"SuspenseList";case te:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case O:return"Portal";case z:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case P:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:$e(e.type)||"Memo";case ue:t=e._payload,e=e._init;try{return $e(e(t))}catch{}}return null}var qe=Array.isArray,I=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},ze=[],H=-1;function x(e){return{current:e}}function L(e){0>H||(e.current=ze[H],ze[H]=null,H--)}function N(e,t){H++,ze[H]=e.current,e.current=t}var M=x(null),le=x(null),ye=x(null),je=x(null);function Qe(e,t){switch(N(ye,t),N(le,e),N(M,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ug(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ug(t),e=dg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(M),N(M,e)}function Ze(){L(M),L(le),L(ye)}function Mt(e){e.memoizedState!==null&&N(je,e);var t=M.current,i=dg(t,e.type);t!==i&&(N(le,e),N(M,i))}function It(e){le.current===e&&(L(M),L(le)),je.current===e&&(L(je),fo._currentValue=ve)}var At,_n;function dn(e){if(At===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);At=t&&t[1]||"",_n=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+e+_n}var on=!1;function Dn(e,t){if(!e||on)return"";on=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(X){var q=X}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(X){q=X}e.call(ae.prototype)}}else{try{throw Error()}catch(X){q=X}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(X){if(X&&q&&typeof X.stack=="string")return[X.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),g=f[0],w=f[1];if(g&&w){var T=g.split(`
`),U=w.split(`
`);for(u=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;if(o===T.length||u===U.length)for(o=T.length-1,u=U.length-1;1<=o&&0<=u&&T[o]!==U[u];)u--;for(;1<=o&&0<=u;o--,u--)if(T[o]!==U[u]){if(o!==1||u!==1)do if(o--,u--,0>u||T[o]!==U[u]){var W=`
`+T[o].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=o&&0<=u);break}}}finally{on=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?dn(i):""}function We(e,t){switch(e.tag){case 26:case 27:case 5:return dn(e.type);case 16:return dn("Lazy");case 13:return e.child!==t&&t!==null?dn("Suspense Fallback"):dn("Suspense");case 19:return dn("SuspenseList");case 0:case 15:return Dn(e.type,!1);case 11:return Dn(e.type.render,!1);case 1:return Dn(e.type,!0);case 31:return dn("Activity");default:return""}}function V(e){try{var t="",i=null;do t+=We(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ie=Object.prototype.hasOwnProperty,J=a.unstable_scheduleCallback,Ae=a.unstable_cancelCallback,xe=a.unstable_shouldYield,se=a.unstable_requestPaint,C=a.unstable_now,D=a.unstable_getCurrentPriorityLevel,oe=a.unstable_ImmediatePriority,de=a.unstable_UserBlockingPriority,be=a.unstable_NormalPriority,Oe=a.unstable_LowPriority,He=a.unstable_IdlePriority,Xe=a.log,yt=a.unstable_setDisableYieldValue,Ue=null,Ve=null;function De(e){if(typeof Xe=="function"&&yt(e),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(Ue,e)}catch{}}var rt=Math.clz32?Math.clz32:Ft,pt=Math.log,zt=Math.LN2;function Ft(e){return e>>>=0,e===0?32:31-(pt(e)/zt|0)|0}var A=256,R=262144,ce=4194304;function we(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?u=we(o):(g&=w,g!==0?u=we(g):i||(i=w&~e,i!==0&&(u=we(i))))):(w=o&~f,w!==0?u=we(w):g!==0?u=we(g):i||(i=o&~e,i!==0&&(u=we(i)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,i=t&-t,f>=i||f===32&&(i&4194048)!==0)?t:u}function mt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Pn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var e=ce;return ce<<=1,(ce&62914560)===0&&(ce=4194304),e}function Rt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Tt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kt(e,t,i,o,u,f){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,T=e.expirationTimes,U=e.hiddenUpdates;for(i=g&~i;0<i;){var W=31-rt(i),ae=1<<W;w[W]=0,T[W]=-1;var q=U[W];if(q!==null)for(U[W]=null,W=0;W<q.length;W++){var X=q[W];X!==null&&(X.lane&=-536870913)}i&=~ae}o!==0&&Cs(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(g&~t))}function Cs(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-rt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Zt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-rt(i),u=1<<o;u&t|e[o]&t&&(e[o]|=t),i&=~u}}function na(e,t){var i=t&-t;return i=(i&42)!==0?1:va(i),(i&(e.suspendedLanes|t))!==0?0:i}function va(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function fn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ts(){var e=re.p;return e!==0?e:(e=window.event,e===void 0?32:Rg(e.type))}function Os(e,t){var i=re.p;try{return re.p=e,t()}finally{re.p=i}}var ba=Math.random().toString(36).slice(2),Qt="__reactFiber$"+ba,yn="__reactProps$"+ba,Ga="__reactContainer$"+ba,Ho="__reactEvents$"+ba,Kc="__reactListeners$"+ba,Vo="__reactHandles$"+ba,wa="__reactResources$"+ba,Sa="__reactMarker$"+ba;function xa(e){delete e[Qt],delete e[yn],delete e[Ho],delete e[Kc],delete e[Vo]}function aa(e){var t=e[Qt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ga]||i[Qt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=vg(e);e!==null;){if(i=e[Qt])return i;e=vg(e)}return t}e=i,i=e.parentNode}return null}function hr(e){if(e=e[Qt]||e[Ga]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ya(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function F(e){var t=e[wa];return t||(t=e[wa]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ne(e){e[Sa]=!0}var me=new Set,ke={};function Ee(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(ke[e]=t,e=0;e<t.length;e++)me.add(t[e])}var Ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jt={},hn={};function ln(e){return ie.call(hn,e)?!0:ie.call(Jt,e)?!1:Ht.test(e)?hn[e]=!0:(Jt[e]=!0,!1)}function cn(e,t,i){if(ln(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function kn(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function En(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function zn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Go(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){i=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wi(e){if(!e._valueTracker){var t=qo(e)?"checked":"value";e._valueTracker=Go(e,t,""+e[t])}}function Qc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=qo(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xw=/[\n"\\]/g;function ra(e){return e.replace(Xw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Jc(e,t,i,o,u,f,g,w){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+zn(t)):e.value!==""+zn(t)&&(e.value=""+zn(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Wc(e,g,zn(t)):i!=null?Wc(e,g,zn(i)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+zn(w):e.removeAttribute("name")}function rp(e,t,i,o,u,f,g,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){wi(e);return}i=i!=null?""+zn(i):"",t=t!=null?""+zn(t):i,w||t===e.value||(e.value=t),e.defaultValue=t}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),wi(e)}function Wc(e,t,i){t==="number"&&Yo(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Si(e,t,i,o){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+zn(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function ip(e,t,i){if(t!=null&&(t=""+zn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+zn(i):""}function sp(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(s(92));if(qe(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=zn(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),wi(e)}function xi(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Kw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function op(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||Kw.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function lp(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in t)o=t[u],t.hasOwnProperty(u)&&i[u]!==o&&op(e,u,o)}else for(var f in t)t.hasOwnProperty(f)&&op(e,f,t[f])}function eu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Po(e){return Jw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pa(){}var tu=null;function nu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ki=null,Ei=null;function cp(e){var t=hr(e);if(t&&(e=t.stateNode)){var i=e[yn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Jc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ra(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var u=o[yn]||null;if(!u)throw Error(s(90));Jc(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&Qc(o)}break e;case"textarea":ip(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Si(e,!!i.multiple,t,!1)}}}var au=!1;function up(e,t,i){if(au)return e(t,i);au=!0;try{var o=e(t);return o}finally{if(au=!1,(ki!==null||Ei!==null)&&(Ml(),ki&&(t=ki,e=Ei,Ei=ki=null,cp(t),e)))for(t=0;t<e.length;t++)cp(e[t])}}function Ns(e,t){var i=e.stateNode;if(i===null)return null;var o=i[yn]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ru=!1;if(Fa)try{var js={};Object.defineProperty(js,"passive",{get:function(){ru=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{ru=!1}var pr=null,iu=null,Fo=null;function dp(){if(Fo)return Fo;var e,t=iu,i=t.length,o,u="value"in pr?pr.value:pr.textContent,f=u.length;for(e=0;e<i&&t[e]===u[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===u[f-o];o++);return Fo=u.slice(e,1<o?1-o:void 0)}function Zo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xo(){return!0}function fp(){return!1}function Ln(e){function t(i,o,u,f,g){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xo:fp,this.isPropagationStopped=fp,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=Ln(Xr),As=b({},Xr,{view:0,detail:0}),Ww=Ln(As),su,ou,_s,Qo=b({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_s&&(_s&&e.type==="mousemove"?(su=e.screenX-_s.screenX,ou=e.screenY-_s.screenY):ou=su=0,_s=e),su)},movementY:function(e){return"movementY"in e?e.movementY:ou}}),hp=Ln(Qo),eS=b({},Qo,{dataTransfer:0}),tS=Ln(eS),nS=b({},As,{relatedTarget:0}),lu=Ln(nS),aS=b({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),rS=Ln(aS),iS=b({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sS=Ln(iS),oS=b({},Xr,{data:0}),pp=Ln(oS),lS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uS[e])?!!t[e]:!1}function cu(){return dS}var fS=b({},As,{key:function(e){if(e.key){var t=lS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(e){return e.type==="keypress"?Zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hS=Ln(fS),pS=b({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=Ln(pS),mS=b({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),yS=Ln(mS),gS=b({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vS=Ln(gS),bS=b({},Qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wS=Ln(bS),SS=b({},Xr,{newState:0,oldState:0}),xS=Ln(SS),kS=[9,13,27,32],uu=Fa&&"CompositionEvent"in window,Ds=null;Fa&&"documentMode"in document&&(Ds=document.documentMode);var ES=Fa&&"TextEvent"in window&&!Ds,yp=Fa&&(!uu||Ds&&8<Ds&&11>=Ds),gp=" ",vp=!1;function bp(e,t){switch(e){case"keyup":return kS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ci=!1;function CS(e,t){switch(e){case"compositionend":return wp(t);case"keypress":return t.which!==32?null:(vp=!0,gp);case"textInput":return e=t.data,e===gp&&vp?null:e;default:return null}}function TS(e,t){if(Ci)return e==="compositionend"||!uu&&bp(e,t)?(e=dp(),Fo=iu=pr=null,Ci=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yp&&t.locale!=="ko"?null:t.data;default:return null}}var OS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OS[e.type]:t==="textarea"}function xp(e,t,i,o){ki?Ei?Ei.push(o):Ei=[o]:ki=o,t=$l(t,"onChange"),0<t.length&&(i=new Ko("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Ms=null,Rs=null;function NS(e){rg(e,0)}function Jo(e){var t=Ya(e);if(Qc(t))return e}function kp(e,t){if(e==="change")return t}var Ep=!1;if(Fa){var du;if(Fa){var fu="oninput"in document;if(!fu){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),fu=typeof Cp.oninput=="function"}du=fu}else du=!1;Ep=du&&(!document.documentMode||9<document.documentMode)}function Tp(){Ms&&(Ms.detachEvent("onpropertychange",Op),Rs=Ms=null)}function Op(e){if(e.propertyName==="value"&&Jo(Rs)){var t=[];xp(t,Rs,e,nu(e)),up(NS,t)}}function jS(e,t,i){e==="focusin"?(Tp(),Ms=t,Rs=i,Ms.attachEvent("onpropertychange",Op)):e==="focusout"&&Tp()}function AS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(Rs)}function _S(e,t){if(e==="click")return Jo(t)}function DS(e,t){if(e==="input"||e==="change")return Jo(t)}function MS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fn=typeof Object.is=="function"?Object.is:MS;function zs(e,t){if(Fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!ie.call(t,u)||!Fn(e[u],t[u]))return!1}return!0}function Np(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jp(e,t){var i=Np(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Np(i)}}function Ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _p(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Yo(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Yo(e.document)}return t}function hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var RS=Fa&&"documentMode"in document&&11>=document.documentMode,Ti=null,pu=null,Ls=null,mu=!1;function Dp(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;mu||Ti==null||Ti!==Yo(o)||(o=Ti,"selectionStart"in o&&hu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ls&&zs(Ls,o)||(Ls=o,o=$l(pu,"onSelect"),0<o.length&&(t=new Ko("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=Ti)))}function Kr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Oi={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},yu={},Mp={};Fa&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function Qr(e){if(yu[e])return yu[e];if(!Oi[e])return e;var t=Oi[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Mp)return yu[e]=t[i];return e}var Rp=Qr("animationend"),zp=Qr("animationiteration"),Lp=Qr("animationstart"),zS=Qr("transitionrun"),LS=Qr("transitionstart"),BS=Qr("transitioncancel"),Bp=Qr("transitionend"),Up=new Map,gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gu.push("scrollEnd");function ka(e,t){Up.set(e,t),Ee(t,[e])}var Wo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ia=[],Ni=0,vu=0;function el(){for(var e=Ni,t=vu=Ni=0;t<e;){var i=ia[t];ia[t++]=null;var o=ia[t];ia[t++]=null;var u=ia[t];ia[t++]=null;var f=ia[t];if(ia[t++]=null,o!==null&&u!==null){var g=o.pending;g===null?u.next=u:(u.next=g.next,g.next=u),o.pending=u}f!==0&&Ip(i,u,f)}}function tl(e,t,i,o){ia[Ni++]=e,ia[Ni++]=t,ia[Ni++]=i,ia[Ni++]=o,vu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function bu(e,t,i,o){return tl(e,t,i,o),nl(e)}function Jr(e,t){return tl(e,null,null,t),nl(e)}function Ip(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-rt(i),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[t]:o.push(t),t.lane=i|536870912),f):null}function nl(e){if(50<ro)throw ro=0,Nd=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ji={};function US(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(e,t,i,o){return new US(e,t,i,o)}function wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Za(e,t){var i=e.alternate;return i===null?(i=Zn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function $p(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function al(e,t,i,o,u,f){var g=0;if(o=e,typeof e=="function")wu(e)&&(g=1);else if(typeof e=="string")g=qx(e,i,M.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case te:return e=Zn(31,i,t,u),e.elementType=te,e.lanes=f,e;case Z:return Wr(i.children,u,f,t);case $:g=8,u|=24;break;case Q:return e=Zn(12,i,t,u|2),e.elementType=Q,e.lanes=f,e;case he:return e=Zn(13,i,t,u),e.elementType=he,e.lanes=f,e;case pe:return e=Zn(19,i,t,u),e.elementType=pe,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:g=10;break e;case K:g=9;break e;case P:g=11;break e;case G:g=14;break e;case ue:g=16,o=null;break e}g=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return t=Zn(g,i,t,u),t.elementType=e,t.type=o,t.lanes=f,t}function Wr(e,t,i,o){return e=Zn(7,e,o,t),e.lanes=i,e}function Su(e,t,i){return e=Zn(6,e,null,t),e.lanes=i,e}function Hp(e){var t=Zn(18,null,null,0);return t.stateNode=e,t}function xu(e,t,i){return t=Zn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vp=new WeakMap;function sa(e,t){if(typeof e=="object"&&e!==null){var i=Vp.get(e);return i!==void 0?i:(t={value:e,source:t,stack:V(t)},Vp.set(e,t),t)}return{value:e,source:t,stack:V(t)}}var Ai=[],_i=0,rl=null,Bs=0,oa=[],la=0,mr=null,Ma=1,Ra="";function Xa(e,t){Ai[_i++]=Bs,Ai[_i++]=rl,rl=e,Bs=t}function qp(e,t,i){oa[la++]=Ma,oa[la++]=Ra,oa[la++]=mr,mr=e;var o=Ma;e=Ra;var u=32-rt(o)-1;o&=~(1<<u),i+=1;var f=32-rt(t)+u;if(30<f){var g=u-u%5;f=(o&(1<<g)-1).toString(32),o>>=g,u-=g,Ma=1<<32-rt(t)+u|i<<u|o,Ra=f+e}else Ma=1<<f|i<<u|o,Ra=e}function ku(e){e.return!==null&&(Xa(e,1),qp(e,1,0))}function Eu(e){for(;e===rl;)rl=Ai[--_i],Ai[_i]=null,Bs=Ai[--_i],Ai[_i]=null;for(;e===mr;)mr=oa[--la],oa[la]=null,Ra=oa[--la],oa[la]=null,Ma=oa[--la],oa[la]=null}function Gp(e,t){oa[la++]=Ma,oa[la++]=Ra,oa[la++]=mr,Ma=t.id,Ra=t.overflow,mr=e}var gn=null,Lt=null,dt=!1,yr=null,ca=!1,Cu=Error(s(519));function gr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Us(sa(t,e)),Cu}function Yp(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[Qt]=e,t[yn]=o,i){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(i=0;i<so.length;i++)st(so[i],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),rp(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),sp(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||lg(t.textContent,i)?(o.popover!=null&&(st("beforetoggle",t),st("toggle",t)),o.onScroll!=null&&st("scroll",t),o.onScrollEnd!=null&&st("scrollend",t),o.onClick!=null&&(t.onclick=Pa),t=!0):t=!1,t||gr(e,!0)}function Pp(e){for(gn=e.return;gn;)switch(gn.tag){case 5:case 31:case 13:ca=!1;return;case 27:case 3:ca=!0;return;default:gn=gn.return}}function Di(e){if(e!==gn)return!1;if(!dt)return Pp(e),dt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||qd(e.type,e.memoizedProps)),i=!i),i&&Lt&&gr(e),Pp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Lt=gg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Lt=gg(e)}else t===27?(t=Lt,_r(e.type)?(e=Zd,Zd=null,Lt=e):Lt=t):Lt=gn?da(e.stateNode.nextSibling):null;return!0}function ei(){Lt=gn=null,dt=!1}function Tu(){var e=yr;return e!==null&&($n===null?$n=e:$n.push.apply($n,e),yr=null),e}function Us(e){yr===null?yr=[e]:yr.push(e)}var Ou=x(null),ti=null,Ka=null;function vr(e,t,i){N(Ou,t._currentValue),t._currentValue=i}function Qa(e){e._currentValue=Ou.current,L(Ou)}function Nu(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function ju(e,t,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var g=u.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=u;for(var T=0;T<t.length;T++)if(w.context===t[T]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),Nu(f.return,i,e),o||(g=null);break e}f=w.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(s(341));g.lanes|=i,f=g.alternate,f!==null&&(f.lanes|=i),Nu(g,i,e),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function Mi(e,t,i,o){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(s(387));if(g=g.memoizedProps,g!==null){var w=u.type;Fn(u.pendingProps.value,g.value)||(e!==null?e.push(w):e=[w])}}else if(u===je.current){if(g=u.alternate,g===null)throw Error(s(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(fo):e=[fo])}u=u.return}e!==null&&ju(t,e,i,o),t.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!Fn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ni(e){ti=e,Ka=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function vn(e){return Fp(ti,e)}function sl(e,t){return ti===null&&ni(e),Fp(e,t)}function Fp(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ka===null){if(e===null)throw Error(s(308));Ka=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ka=Ka.next=t;return i}var IS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},$S=a.unstable_scheduleCallback,HS=a.unstable_NormalPriority,Wt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Au(){return{controller:new IS,data:new Map,refCount:0}}function Is(e){e.refCount--,e.refCount===0&&$S(HS,function(){e.controller.abort()})}var $s=null,_u=0,Ri=0,zi=null;function VS(e,t){if($s===null){var i=$s=[];_u=0,Ri=Rd(),zi={status:"pending",value:void 0,then:function(o){i.push(o)}}}return _u++,t.then(Zp,Zp),t}function Zp(){if(--_u===0&&$s!==null){zi!==null&&(zi.status="fulfilled");var e=$s;$s=null,Ri=0,zi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function qS(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var u=0;u<i.length;u++)(0,i[u])(t)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Xp=I.S;I.S=function(e,t){Dy=C(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&VS(e,t),Xp!==null&&Xp(e,t)};var ai=x(null);function Du(){var e=ai.current;return e!==null?e:_t.pooledCache}function ol(e,t){t===null?N(ai,ai.current):N(ai,t.pool)}function Kp(){var e=Du();return e===null?null:{parent:Wt._currentValue,pool:e}}var Li=Error(s(460)),Mu=Error(s(474)),ll=Error(s(542)),cl={then:function(){}};function Qp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jp(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Pa,Pa),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,em(e),e;default:if(typeof t.status=="string")t.then(Pa,Pa);else{if(e=_t,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=o}},function(o){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,em(e),e}throw ii=t,Li}}function ri(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ii=i,Li):i}}var ii=null;function Wp(){if(ii===null)throw Error(s(459));var e=ii;return ii=null,e}function em(e){if(e===Li||e===ll)throw Error(s(483))}var Bi=null,Hs=0;function ul(e){var t=Hs;return Hs+=1,Bi===null&&(Bi=[]),Jp(Bi,e,t)}function Vs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dl(e,t){throw t.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function tm(e){function t(_,j){if(e){var B=_.deletions;B===null?(_.deletions=[j],_.flags|=16):B.push(j)}}function i(_,j){if(!e)return null;for(;j!==null;)t(_,j),j=j.sibling;return null}function o(_){for(var j=new Map;_!==null;)_.key!==null?j.set(_.key,_):j.set(_.index,_),_=_.sibling;return j}function u(_,j){return _=Za(_,j),_.index=0,_.sibling=null,_}function f(_,j,B){return _.index=B,e?(B=_.alternate,B!==null?(B=B.index,B<j?(_.flags|=67108866,j):B):(_.flags|=67108866,j)):(_.flags|=1048576,j)}function g(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function w(_,j,B,ee){return j===null||j.tag!==6?(j=Su(B,_.mode,ee),j.return=_,j):(j=u(j,B),j.return=_,j)}function T(_,j,B,ee){var Ie=B.type;return Ie===Z?W(_,j,B.props.children,ee,B.key):j!==null&&(j.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ue&&ri(Ie)===j.type)?(j=u(j,B.props),Vs(j,B),j.return=_,j):(j=al(B.type,B.key,B.props,null,_.mode,ee),Vs(j,B),j.return=_,j)}function U(_,j,B,ee){return j===null||j.tag!==4||j.stateNode.containerInfo!==B.containerInfo||j.stateNode.implementation!==B.implementation?(j=xu(B,_.mode,ee),j.return=_,j):(j=u(j,B.children||[]),j.return=_,j)}function W(_,j,B,ee,Ie){return j===null||j.tag!==7?(j=Wr(B,_.mode,ee,Ie),j.return=_,j):(j=u(j,B),j.return=_,j)}function ae(_,j,B){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Su(""+j,_.mode,B),j.return=_,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case E:return B=al(j.type,j.key,j.props,null,_.mode,B),Vs(B,j),B.return=_,B;case O:return j=xu(j,_.mode,B),j.return=_,j;case ue:return j=ri(j),ae(_,j,B)}if(qe(j)||Ne(j))return j=Wr(j,_.mode,B,null),j.return=_,j;if(typeof j.then=="function")return ae(_,ul(j),B);if(j.$$typeof===z)return ae(_,sl(_,j),B);dl(_,j)}return null}function q(_,j,B,ee){var Ie=j!==null?j.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Ie!==null?null:w(_,j,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case E:return B.key===Ie?T(_,j,B,ee):null;case O:return B.key===Ie?U(_,j,B,ee):null;case ue:return B=ri(B),q(_,j,B,ee)}if(qe(B)||Ne(B))return Ie!==null?null:W(_,j,B,ee,null);if(typeof B.then=="function")return q(_,j,ul(B),ee);if(B.$$typeof===z)return q(_,j,sl(_,B),ee);dl(_,B)}return null}function X(_,j,B,ee,Ie){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return _=_.get(B)||null,w(j,_,""+ee,Ie);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case E:return _=_.get(ee.key===null?B:ee.key)||null,T(j,_,ee,Ie);case O:return _=_.get(ee.key===null?B:ee.key)||null,U(j,_,ee,Ie);case ue:return ee=ri(ee),X(_,j,B,ee,Ie)}if(qe(ee)||Ne(ee))return _=_.get(B)||null,W(j,_,ee,Ie,null);if(typeof ee.then=="function")return X(_,j,B,ul(ee),Ie);if(ee.$$typeof===z)return X(_,j,B,sl(j,ee),Ie);dl(j,ee)}return null}function Me(_,j,B,ee){for(var Ie=null,gt=null,Le=j,tt=j=0,lt=null;Le!==null&&tt<B.length;tt++){Le.index>tt?(lt=Le,Le=null):lt=Le.sibling;var vt=q(_,Le,B[tt],ee);if(vt===null){Le===null&&(Le=lt);break}e&&Le&&vt.alternate===null&&t(_,Le),j=f(vt,j,tt),gt===null?Ie=vt:gt.sibling=vt,gt=vt,Le=lt}if(tt===B.length)return i(_,Le),dt&&Xa(_,tt),Ie;if(Le===null){for(;tt<B.length;tt++)Le=ae(_,B[tt],ee),Le!==null&&(j=f(Le,j,tt),gt===null?Ie=Le:gt.sibling=Le,gt=Le);return dt&&Xa(_,tt),Ie}for(Le=o(Le);tt<B.length;tt++)lt=X(Le,_,tt,B[tt],ee),lt!==null&&(e&&lt.alternate!==null&&Le.delete(lt.key===null?tt:lt.key),j=f(lt,j,tt),gt===null?Ie=lt:gt.sibling=lt,gt=lt);return e&&Le.forEach(function(Lr){return t(_,Lr)}),dt&&Xa(_,tt),Ie}function Ge(_,j,B,ee){if(B==null)throw Error(s(151));for(var Ie=null,gt=null,Le=j,tt=j=0,lt=null,vt=B.next();Le!==null&&!vt.done;tt++,vt=B.next()){Le.index>tt?(lt=Le,Le=null):lt=Le.sibling;var Lr=q(_,Le,vt.value,ee);if(Lr===null){Le===null&&(Le=lt);break}e&&Le&&Lr.alternate===null&&t(_,Le),j=f(Lr,j,tt),gt===null?Ie=Lr:gt.sibling=Lr,gt=Lr,Le=lt}if(vt.done)return i(_,Le),dt&&Xa(_,tt),Ie;if(Le===null){for(;!vt.done;tt++,vt=B.next())vt=ae(_,vt.value,ee),vt!==null&&(j=f(vt,j,tt),gt===null?Ie=vt:gt.sibling=vt,gt=vt);return dt&&Xa(_,tt),Ie}for(Le=o(Le);!vt.done;tt++,vt=B.next())vt=X(Le,_,tt,vt.value,ee),vt!==null&&(e&&vt.alternate!==null&&Le.delete(vt.key===null?tt:vt.key),j=f(vt,j,tt),gt===null?Ie=vt:gt.sibling=vt,gt=vt);return e&&Le.forEach(function(ek){return t(_,ek)}),dt&&Xa(_,tt),Ie}function jt(_,j,B,ee){if(typeof B=="object"&&B!==null&&B.type===Z&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case E:e:{for(var Ie=B.key;j!==null;){if(j.key===Ie){if(Ie=B.type,Ie===Z){if(j.tag===7){i(_,j.sibling),ee=u(j,B.props.children),ee.return=_,_=ee;break e}}else if(j.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ue&&ri(Ie)===j.type){i(_,j.sibling),ee=u(j,B.props),Vs(ee,B),ee.return=_,_=ee;break e}i(_,j);break}else t(_,j);j=j.sibling}B.type===Z?(ee=Wr(B.props.children,_.mode,ee,B.key),ee.return=_,_=ee):(ee=al(B.type,B.key,B.props,null,_.mode,ee),Vs(ee,B),ee.return=_,_=ee)}return g(_);case O:e:{for(Ie=B.key;j!==null;){if(j.key===Ie)if(j.tag===4&&j.stateNode.containerInfo===B.containerInfo&&j.stateNode.implementation===B.implementation){i(_,j.sibling),ee=u(j,B.children||[]),ee.return=_,_=ee;break e}else{i(_,j);break}else t(_,j);j=j.sibling}ee=xu(B,_.mode,ee),ee.return=_,_=ee}return g(_);case ue:return B=ri(B),jt(_,j,B,ee)}if(qe(B))return Me(_,j,B,ee);if(Ne(B)){if(Ie=Ne(B),typeof Ie!="function")throw Error(s(150));return B=Ie.call(B),Ge(_,j,B,ee)}if(typeof B.then=="function")return jt(_,j,ul(B),ee);if(B.$$typeof===z)return jt(_,j,sl(_,B),ee);dl(_,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,j!==null&&j.tag===6?(i(_,j.sibling),ee=u(j,B),ee.return=_,_=ee):(i(_,j),ee=Su(B,_.mode,ee),ee.return=_,_=ee),g(_)):i(_,j)}return function(_,j,B,ee){try{Hs=0;var Ie=jt(_,j,B,ee);return Bi=null,Ie}catch(Le){if(Le===Li||Le===ll)throw Le;var gt=Zn(29,Le,null,_.mode);return gt.lanes=ee,gt.return=_,gt}finally{}}}var si=tm(!0),nm=tm(!1),br=!1;function Ru(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(bt&2)!==0){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,t=nl(e),Ip(e,null,i),t}return tl(e,o,t,i),nl(e)}function qs(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Zt(e,i)}}function Lu(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?u=f=t:f=f.next=t}else u=f=t;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Bu=!1;function Gs(){if(Bu){var e=zi;if(e!==null)throw e}}function Ys(e,t,i,o){Bu=!1;var u=e.updateQueue;br=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var T=w,U=T.next;T.next=null,g===null?f=U:g.next=U,g=T;var W=e.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==g&&(w===null?W.firstBaseUpdate=U:w.next=U,W.lastBaseUpdate=T))}if(f!==null){var ae=u.baseState;g=0,W=U=T=null,w=f;do{var q=w.lane&-536870913,X=q!==w.lane;if(X?(ot&q)===q:(o&q)===q){q!==0&&q===Ri&&(Bu=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Me=e,Ge=w;q=t;var jt=i;switch(Ge.tag){case 1:if(Me=Ge.payload,typeof Me=="function"){ae=Me.call(jt,ae,q);break e}ae=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ge.payload,q=typeof Me=="function"?Me.call(jt,ae,q):Me,q==null)break e;ae=b({},ae,q);break e;case 2:br=!0}}q=w.callback,q!==null&&(e.flags|=64,X&&(e.flags|=8192),X=u.callbacks,X===null?u.callbacks=[q]:X.push(q))}else X={lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(U=W=X,T=ae):W=W.next=X,g|=q;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;X=w,w=X.next,X.next=null,u.lastBaseUpdate=X,u.shared.pending=null}}while(!0);W===null&&(T=ae),u.baseState=T,u.firstBaseUpdate=U,u.lastBaseUpdate=W,f===null&&(u.shared.lanes=0),Tr|=g,e.lanes=g,e.memoizedState=ae}}function am(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function rm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)am(i[e],t)}var Ui=x(null),fl=x(0);function im(e,t){e=sr,N(fl,e),N(Ui,t),sr=e|t.baseLanes}function Uu(){N(fl,sr),N(Ui,Ui.current)}function Iu(){sr=fl.current,L(Ui),L(fl)}var Xn=x(null),ua=null;function xr(e){var t=e.alternate;N(Xt,Xt.current&1),N(Xn,e),ua===null&&(t===null||Ui.current!==null||t.memoizedState!==null)&&(ua=e)}function $u(e){N(Xt,Xt.current),N(Xn,e),ua===null&&(ua=e)}function sm(e){e.tag===22?(N(Xt,Xt.current),N(Xn,e),ua===null&&(ua=e)):kr()}function kr(){N(Xt,Xt.current),N(Xn,Xn.current)}function Kn(e){L(Xn),ua===e&&(ua=null),L(Xt)}var Xt=x(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Pd(i)||Fd(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ja=0,et=null,Ot=null,en=null,pl=!1,Ii=!1,oi=!1,ml=0,Ps=0,$i=null,GS=0;function Yt(){throw Error(s(321))}function Hu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Fn(e[i],t[i]))return!1;return!0}function Vu(e,t,i,o,u,f){return Ja=f,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?qm:ad,oi=!1,f=i(o,u),oi=!1,Ii&&(f=lm(t,i,o,u)),om(e),f}function om(e){I.H=Xs;var t=Ot!==null&&Ot.next!==null;if(Ja=0,en=Ot=et=null,pl=!1,Ps=0,$i=null,t)throw Error(s(300));e===null||tn||(e=e.dependencies,e!==null&&il(e)&&(tn=!0))}function lm(e,t,i,o){et=e;var u=0;do{if(Ii&&($i=null),Ps=0,Ii=!1,25<=u)throw Error(s(301));if(u+=1,en=Ot=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}I.H=Gm,f=t(i,o)}while(Ii);return f}function YS(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?Fs(t):t,e=e.useState()[0],(Ot!==null?Ot.memoizedState:null)!==e&&(et.flags|=1024),t}function qu(){var e=ml!==0;return ml=0,e}function Gu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Yu(e){if(pl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pl=!1}Ja=0,en=Ot=et=null,Ii=!1,Ps=ml=0,$i=null}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?et.memoizedState=en=e:en=en.next=e,en}function Kt(){if(Ot===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=en===null?et.memoizedState:en.next;if(t!==null)en=t,Ot=e;else{if(e===null)throw et.alternate===null?Error(s(467)):Error(s(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},en===null?et.memoizedState=en=e:en=en.next=e}return en}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fs(e){var t=Ps;return Ps+=1,$i===null&&($i=[]),e=Jp($i,e,t),t=et,(en===null?t.memoizedState:en.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?qm:ad),e}function gl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fs(e);if(e.$$typeof===z)return vn(e)}throw Error(s(438,String(e)))}function Pu(e){var t=null,i=et.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=et.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=yl(),et.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=Y;return t.index++,i}function Wa(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=Kt();return Fu(t,Ot,e)}function Fu(e,t,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}t.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var w=g=null,T=null,U=t,W=!1;do{var ae=U.lane&-536870913;if(ae!==U.lane?(ot&ae)===ae:(Ja&ae)===ae){var q=U.revertLane;if(q===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),ae===Ri&&(W=!0);else if((Ja&q)===q){U=U.next,q===Ri&&(W=!0);continue}else ae={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},T===null?(w=T=ae,g=f):T=T.next=ae,et.lanes|=q,Tr|=q;ae=U.action,oi&&i(f,ae),f=U.hasEagerState?U.eagerState:i(f,ae)}else q={lane:ae,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},T===null?(w=T=q,g=f):T=T.next=q,et.lanes|=ae,Tr|=ae;U=U.next}while(U!==null&&U!==t);if(T===null?g=f:T.next=w,!Fn(f,e.memoizedState)&&(tn=!0,W&&(i=zi,i!==null)))throw i;e.memoizedState=f,e.baseState=g,e.baseQueue=T,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Zu(e){var t=Kt(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,f=t.memoizedState;if(u!==null){i.pending=null;var g=u=u.next;do f=e(f,g.action),g=g.next;while(g!==u);Fn(f,t.memoizedState)||(tn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,o]}function cm(e,t,i){var o=et,u=Kt(),f=dt;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=t();var g=!Fn((Ot||u).memoizedState,i);if(g&&(u.memoizedState=i,tn=!0),u=u.queue,Qu(fm.bind(null,o,u,e),[e]),u.getSnapshot!==t||g||en!==null&&en.memoizedState.tag&1){if(o.flags|=2048,Hi(9,{destroy:void 0},dm.bind(null,o,u,i,t),null),_t===null)throw Error(s(349));f||(Ja&127)!==0||um(o,t,i)}return i}function um(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=et.updateQueue,t===null?(t=yl(),et.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function dm(e,t,i,o){t.value=i,t.getSnapshot=o,hm(t)&&pm(e)}function fm(e,t,i){return i(function(){hm(t)&&pm(e)})}function hm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Fn(e,i)}catch{return!0}}function pm(e){var t=Jr(e,2);t!==null&&Hn(t,e,2)}function Xu(e){var t=Mn();if(typeof e=="function"){var i=e;if(e=i(),oi){De(!0);try{i()}finally{De(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:e},t}function mm(e,t,i,o){return e.baseState=i,Fu(e,Ot,typeof o=="function"?o:Wa)}function PS(e,t,i,o,u){if(Sl(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};I.T!==null?i(!0):f.isTransition=!1,o(f),i=t.pending,i===null?(f.next=t.pending=f,ym(t,f)):(f.next=i.next,t.pending=i.next=f)}}function ym(e,t){var i=t.action,o=t.payload,u=e.state;if(t.isTransition){var f=I.T,g={};I.T=g;try{var w=i(u,o),T=I.S;T!==null&&T(g,w),gm(e,t,w)}catch(U){Ku(e,t,U)}finally{f!==null&&g.types!==null&&(f.types=g.types),I.T=f}}else try{f=i(u,o),gm(e,t,f)}catch(U){Ku(e,t,U)}}function gm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){vm(e,t,o)},function(o){return Ku(e,t,o)}):vm(e,t,i)}function vm(e,t,i){t.status="fulfilled",t.value=i,bm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,ym(e,i)))}function Ku(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,bm(t),t=t.next;while(t!==o)}e.action=null}function bm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function wm(e,t){return t}function Sm(e,t){if(dt){var i=_t.formState;if(i!==null){e:{var o=et;if(dt){if(Lt){t:{for(var u=Lt,f=ca;u.nodeType!==8;){if(!f){u=null;break t}if(u=da(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Lt=da(u.nextSibling),o=u.data==="F!";break e}}gr(o)}o=!1}o&&(t=i[0])}}return i=Mn(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wm,lastRenderedState:t},i.queue=o,i=$m.bind(null,et,o),o.dispatch=i,o=Xu(!1),f=nd.bind(null,et,!1,o.queue),o=Mn(),u={state:t,dispatch:null,action:e,pending:null},o.queue=u,i=PS.bind(null,et,u,f,i),u.dispatch=i,o.memoizedState=e,[t,i,!1]}function xm(e){var t=Kt();return km(t,Ot,e)}function km(e,t,i){if(t=Fu(e,t,wm)[0],e=vl(Wa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Fs(t)}catch(g){throw g===Li?ll:g}else o=t;t=Kt();var u=t.queue,f=u.dispatch;return i!==t.memoizedState&&(et.flags|=2048,Hi(9,{destroy:void 0},FS.bind(null,u,i),null)),[o,f,e]}function FS(e,t){e.action=t}function Em(e){var t=Kt(),i=Ot;if(i!==null)return km(t,i,e);Kt(),t=t.memoizedState,i=Kt();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function Hi(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=et.updateQueue,t===null&&(t=yl(),et.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function Cm(){return Kt().memoizedState}function bl(e,t,i,o){var u=Mn();et.flags|=e,u.memoizedState=Hi(1|t,{destroy:void 0},i,o===void 0?null:o)}function wl(e,t,i,o){var u=Kt();o=o===void 0?null:o;var f=u.memoizedState.inst;Ot!==null&&o!==null&&Hu(o,Ot.memoizedState.deps)?u.memoizedState=Hi(t,f,i,o):(et.flags|=e,u.memoizedState=Hi(1|t,f,i,o))}function Tm(e,t){bl(8390656,8,e,t)}function Qu(e,t){wl(2048,8,e,t)}function ZS(e){et.flags|=4;var t=et.updateQueue;if(t===null)t=yl(),et.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Om(e){var t=Kt().memoizedState;return ZS({ref:t,nextImpl:e}),function(){if((bt&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Nm(e,t){return wl(4,2,e,t)}function jm(e,t){return wl(4,4,e,t)}function Am(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _m(e,t,i){i=i!=null?i.concat([e]):null,wl(4,4,Am.bind(null,t,e),i)}function Ju(){}function Dm(e,t){var i=Kt();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&Hu(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Mm(e,t){var i=Kt();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&Hu(t,o[1]))return o[0];if(o=e(),oi){De(!0);try{e()}finally{De(!1)}}return i.memoizedState=[o,t],o}function Wu(e,t,i){return i===void 0||(Ja&1073741824)!==0&&(ot&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Ry(),et.lanes|=e,Tr|=e,i)}function Rm(e,t,i,o){return Fn(i,t)?i:Ui.current!==null?(e=Wu(e,i,o),Fn(e,t)||(tn=!0),e):(Ja&42)===0||(Ja&1073741824)!==0&&(ot&261930)===0?(tn=!0,e.memoizedState=i):(e=Ry(),et.lanes|=e,Tr|=e,t)}function zm(e,t,i,o,u){var f=re.p;re.p=f!==0&&8>f?f:8;var g=I.T,w={};I.T=w,nd(e,!1,t,i);try{var T=u(),U=I.S;if(U!==null&&U(w,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var W=qS(T,o);Zs(e,t,W,Wn(e))}else Zs(e,t,o,Wn(e))}catch(ae){Zs(e,t,{then:function(){},status:"rejected",reason:ae},Wn())}finally{re.p=f,g!==null&&w.types!==null&&(g.types=w.types),I.T=g}}function XS(){}function ed(e,t,i,o){if(e.tag!==5)throw Error(s(476));var u=Lm(e).queue;zm(e,u,t,ve,i===null?XS:function(){return Bm(e),i(o)})}function Lm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:ve},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Bm(e){var t=Lm(e);t.next===null&&(t=e.alternate.memoizedState),Zs(e,t.next.queue,{},Wn())}function td(){return vn(fo)}function Um(){return Kt().memoizedState}function Im(){return Kt().memoizedState}function KS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Wn();e=wr(i);var o=Sr(t,e,i);o!==null&&(Hn(o,t,i),qs(o,t,i)),t={cache:Au()},e.payload=t;return}t=t.return}}function QS(e,t,i){var o=Wn();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Sl(e)?Hm(t,i):(i=bu(e,t,i,o),i!==null&&(Hn(i,e,o),Vm(i,t,o)))}function $m(e,t,i){var o=Wn();Zs(e,t,i,o)}function Zs(e,t,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Sl(e))Hm(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,w=f(g,i);if(u.hasEagerState=!0,u.eagerState=w,Fn(w,g))return tl(e,t,u,0),_t===null&&el(),!1}catch{}finally{}if(i=bu(e,t,u,o),i!==null)return Hn(i,e,o),Vm(i,t,o),!0}return!1}function nd(e,t,i,o){if(o={lane:2,revertLane:Rd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sl(e)){if(t)throw Error(s(479))}else t=bu(e,i,o,2),t!==null&&Hn(t,e,2)}function Sl(e){var t=e.alternate;return e===et||t!==null&&t===et}function Hm(e,t){Ii=pl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Vm(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Zt(e,i)}}var Xs={readContext:vn,use:gl,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt};Xs.useEffectEvent=Yt;var qm={readContext:vn,use:gl,useCallback:function(e,t){return Mn().memoizedState=[e,t===void 0?null:t],e},useContext:vn,useEffect:Tm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,bl(4194308,4,Am.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bl(4194308,4,e,t)},useInsertionEffect:function(e,t){bl(4,2,e,t)},useMemo:function(e,t){var i=Mn();t=t===void 0?null:t;var o=e();if(oi){De(!0);try{e()}finally{De(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=Mn();if(i!==void 0){var u=i(t);if(oi){De(!0);try{i(t)}finally{De(!1)}}}else u=t;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=QS.bind(null,et,e),[o.memoizedState,e]},useRef:function(e){var t=Mn();return e={current:e},t.memoizedState=e},useState:function(e){e=Xu(e);var t=e.queue,i=$m.bind(null,et,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Ju,useDeferredValue:function(e,t){var i=Mn();return Wu(i,e,t)},useTransition:function(){var e=Xu(!1);return e=zm.bind(null,et,e.queue,!0,!1),Mn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=et,u=Mn();if(dt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),_t===null)throw Error(s(349));(ot&127)!==0||um(o,t,i)}u.memoizedState=i;var f={value:i,getSnapshot:t};return u.queue=f,Tm(fm.bind(null,o,f,e),[e]),o.flags|=2048,Hi(9,{destroy:void 0},dm.bind(null,o,f,i,t),null),i},useId:function(){var e=Mn(),t=_t.identifierPrefix;if(dt){var i=Ra,o=Ma;i=(o&~(1<<32-rt(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=ml++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=GS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:td,useFormState:Sm,useActionState:Sm,useOptimistic:function(e){var t=Mn();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=nd.bind(null,et,!0,i),i.dispatch=t,[e,t]},useMemoCache:Pu,useCacheRefresh:function(){return Mn().memoizedState=KS.bind(null,et)},useEffectEvent:function(e){var t=Mn(),i={impl:e};return t.memoizedState=i,function(){if((bt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},ad={readContext:vn,use:gl,useCallback:Dm,useContext:vn,useEffect:Qu,useImperativeHandle:_m,useInsertionEffect:Nm,useLayoutEffect:jm,useMemo:Mm,useReducer:vl,useRef:Cm,useState:function(){return vl(Wa)},useDebugValue:Ju,useDeferredValue:function(e,t){var i=Kt();return Rm(i,Ot.memoizedState,e,t)},useTransition:function(){var e=vl(Wa)[0],t=Kt().memoizedState;return[typeof e=="boolean"?e:Fs(e),t]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:td,useFormState:xm,useActionState:xm,useOptimistic:function(e,t){var i=Kt();return mm(i,Ot,e,t)},useMemoCache:Pu,useCacheRefresh:Im};ad.useEffectEvent=Om;var Gm={readContext:vn,use:gl,useCallback:Dm,useContext:vn,useEffect:Qu,useImperativeHandle:_m,useInsertionEffect:Nm,useLayoutEffect:jm,useMemo:Mm,useReducer:Zu,useRef:Cm,useState:function(){return Zu(Wa)},useDebugValue:Ju,useDeferredValue:function(e,t){var i=Kt();return Ot===null?Wu(i,e,t):Rm(i,Ot.memoizedState,e,t)},useTransition:function(){var e=Zu(Wa)[0],t=Kt().memoizedState;return[typeof e=="boolean"?e:Fs(e),t]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:td,useFormState:Em,useActionState:Em,useOptimistic:function(e,t){var i=Kt();return Ot!==null?mm(i,Ot,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Pu,useCacheRefresh:Im};Gm.useEffectEvent=Om;function rd(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:b({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var id={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Wn(),u=wr(o);u.payload=t,i!=null&&(u.callback=i),t=Sr(e,u,o),t!==null&&(Hn(t,e,o),qs(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Wn(),u=wr(o);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=Sr(e,u,o),t!==null&&(Hn(t,e,o),qs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Wn(),o=wr(i);o.tag=2,t!=null&&(o.callback=t),t=Sr(e,o,i),t!==null&&(Hn(t,e,i),qs(t,e,i))}};function Ym(e,t,i,o,u,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):t.prototype&&t.prototype.isPureReactComponent?!zs(i,o)||!zs(u,f):!0}function Pm(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&id.enqueueReplaceState(t,t.state,null)}function li(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=b({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Fm(e){Wo(e)}function Zm(e){console.error(e)}function Xm(e){Wo(e)}function xl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Km(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function sd(e,t,i){return i=wr(i),i.tag=3,i.payload={element:null},i.callback=function(){xl(e,t)},i}function Qm(e){return e=wr(e),e.tag=3,e}function Jm(e,t,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){Km(t,i,o)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Km(t,i,o),typeof u!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function JS(e,t,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Mi(t,i,u,!0),i=Xn.current,i!==null){switch(i.tag){case 31:case 13:return ua===null?Rl():i.alternate===null&&Pt===0&&(Pt=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),_d(e,o,u)),!1;case 22:return i.flags|=65536,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),_d(e,o,u)),!1}throw Error(s(435,i.tag))}return _d(e,o,u),Rl(),!1}if(dt)return t=Xn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,o!==Cu&&(e=Error(s(422),{cause:o}),Us(sa(e,i)))):(o!==Cu&&(t=Error(s(423),{cause:o}),Us(sa(t,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=sa(o,i),u=sd(e.stateNode,o,u),Lu(e,u),Pt!==4&&(Pt=2)),!1;var f=Error(s(520),{cause:o});if(f=sa(f,i),ao===null?ao=[f]:ao.push(f),Pt!==4&&(Pt=2),t===null)return!0;o=sa(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=sd(i.stateNode,o,e),Lu(i,e),!1;case 1:if(t=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Or===null||!Or.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Qm(u),Jm(u,e,i,o),Lu(i,u),!1}i=i.return}while(i!==null);return!1}var od=Error(s(461)),tn=!1;function bn(e,t,i,o){t.child=e===null?nm(t,null,i,o):si(t,e.child,i,o)}function Wm(e,t,i,o,u){i=i.render;var f=t.ref;if("ref"in o){var g={};for(var w in o)w!=="ref"&&(g[w]=o[w])}else g=o;return ni(t),o=Vu(e,t,i,g,f,u),w=qu(),e!==null&&!tn?(Gu(e,t,u),er(e,t,u)):(dt&&w&&ku(t),t.flags|=1,bn(e,t,o,u),t.child)}function ey(e,t,i,o,u){if(e===null){var f=i.type;return typeof f=="function"&&!wu(f)&&f.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=f,ty(e,t,f,o,u)):(e=al(i.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!md(e,u)){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:zs,i(g,o)&&e.ref===t.ref)return er(e,t,u)}return t.flags|=1,e=Za(f,o),e.ref=t.ref,e.return=t,t.child=e}function ty(e,t,i,o,u){if(e!==null){var f=e.memoizedProps;if(zs(f,o)&&e.ref===t.ref)if(tn=!1,t.pendingProps=o=f,md(e,u))(e.flags&131072)!==0&&(tn=!0);else return t.lanes=e.lanes,er(e,t,u)}return ld(e,t,i,o,u)}function ny(e,t,i,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=t.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,t.child=null;return ay(e,t,f,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ol(t,f!==null?f.cachePool:null),f!==null?im(t,f):Uu(),sm(t);else return o=t.lanes=536870912,ay(e,t,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(ol(t,f.cachePool),im(t,f),kr(),t.memoizedState=null):(e!==null&&ol(t,null),Uu(),kr());return bn(e,t,u,i),t.child}function Ks(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ay(e,t,i,o,u){var f=Du();return f=f===null?null:{parent:Wt._currentValue,pool:f},t.memoizedState={baseLanes:i,cachePool:f},e!==null&&ol(t,null),Uu(),sm(t),e!==null&&Mi(e,t,o,!0),t.childLanes=u,null}function kl(e,t){return t=Cl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ry(e,t,i){return si(t,e.child,null,i),e=kl(t,t.pendingProps),e.flags|=2,Kn(t),t.memoizedState=null,e}function WS(e,t,i){var o=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(dt){if(o.mode==="hidden")return e=kl(t,o),t.lanes=536870912,Ks(null,e);if($u(t),(e=Lt)?(e=yg(e,ca),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:mr!==null?{id:Ma,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Hp(e),i.return=t,t.child=i,gn=t,Lt=null)):e=null,e===null)throw gr(t);return t.lanes=536870912,null}return kl(t,o)}var f=e.memoizedState;if(f!==null){var g=f.dehydrated;if($u(t),u)if(t.flags&256)t.flags&=-257,t=ry(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(tn||Mi(e,t,i,!1),u=(i&e.childLanes)!==0,tn||u){if(o=_t,o!==null&&(g=na(o,i),g!==0&&g!==f.retryLane))throw f.retryLane=g,Jr(e,g),Hn(o,e,g),od;Rl(),t=ry(e,t,i)}else e=f.treeContext,Lt=da(g.nextSibling),gn=t,dt=!0,yr=null,ca=!1,e!==null&&Gp(t,e),t=kl(t,o),t.flags|=4096;return t}return e=Za(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function El(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function ld(e,t,i,o,u){return ni(t),i=Vu(e,t,i,o,void 0,u),o=qu(),e!==null&&!tn?(Gu(e,t,u),er(e,t,u)):(dt&&o&&ku(t),t.flags|=1,bn(e,t,i,u),t.child)}function iy(e,t,i,o,u,f){return ni(t),t.updateQueue=null,i=lm(t,o,i,u),om(e),o=qu(),e!==null&&!tn?(Gu(e,t,f),er(e,t,f)):(dt&&o&&ku(t),t.flags|=1,bn(e,t,i,f),t.child)}function sy(e,t,i,o,u){if(ni(t),t.stateNode===null){var f=ji,g=i.contextType;typeof g=="object"&&g!==null&&(f=vn(g)),f=new i(o,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=id,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=o,f.state=t.memoizedState,f.refs={},Ru(t),g=i.contextType,f.context=typeof g=="object"&&g!==null?vn(g):ji,f.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(rd(t,i,g,o),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&id.enqueueReplaceState(f,f.state,null),Ys(t,o,f,u),Gs(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){f=t.stateNode;var w=t.memoizedProps,T=li(i,w);f.props=T;var U=f.context,W=i.contextType;g=ji,typeof W=="object"&&W!==null&&(g=vn(W));var ae=i.getDerivedStateFromProps;W=typeof ae=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,W||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||U!==g)&&Pm(t,f,o,g),br=!1;var q=t.memoizedState;f.state=q,Ys(t,o,f,u),Gs(),U=t.memoizedState,w||q!==U||br?(typeof ae=="function"&&(rd(t,i,ae,o),U=t.memoizedState),(T=br||Ym(t,i,T,o,q,U,g))?(W||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=U),f.props=o,f.state=U,f.context=g,o=T):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,zu(e,t),g=t.memoizedProps,W=li(i,g),f.props=W,ae=t.pendingProps,q=f.context,U=i.contextType,T=ji,typeof U=="object"&&U!==null&&(T=vn(U)),w=i.getDerivedStateFromProps,(U=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==ae||q!==T)&&Pm(t,f,o,T),br=!1,q=t.memoizedState,f.state=q,Ys(t,o,f,u),Gs();var X=t.memoizedState;g!==ae||q!==X||br||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof w=="function"&&(rd(t,i,w,o),X=t.memoizedState),(W=br||Ym(t,i,W,o,q,X,T)||e!==null&&e.dependencies!==null&&il(e.dependencies))?(U||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,X,T),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,X,T)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=X),f.props=o,f.state=X,f.context=T,o=W):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),o=!1)}return f=o,El(e,t),o=(t.flags&128)!==0,f||o?(f=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&o?(t.child=si(t,e.child,null,u),t.child=si(t,null,i,u)):bn(e,t,i,u),t.memoizedState=f.state,e=t.child):e=er(e,t,u),e}function oy(e,t,i,o){return ei(),t.flags|=256,bn(e,t,i,o),t.child}var cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ud(e){return{baseLanes:e,cachePool:Kp()}}function dd(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Jn),e}function ly(e,t,i){var o=t.pendingProps,u=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(Xt.current&2)!==0),g&&(u=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(dt){if(u?xr(t):kr(),(e=Lt)?(e=yg(e,ca),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:mr!==null?{id:Ma,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},i=Hp(e),i.return=t,t.child=i,gn=t,Lt=null)):e=null,e===null)throw gr(t);return Fd(e)?t.lanes=32:t.lanes=536870912,null}var w=o.children;return o=o.fallback,u?(kr(),u=t.mode,w=Cl({mode:"hidden",children:w},u),o=Wr(o,u,i,null),w.return=t,o.return=t,w.sibling=o,t.child=w,o=t.child,o.memoizedState=ud(i),o.childLanes=dd(e,g,i),t.memoizedState=cd,Ks(null,o)):(xr(t),fd(t,w))}var T=e.memoizedState;if(T!==null&&(w=T.dehydrated,w!==null)){if(f)t.flags&256?(xr(t),t.flags&=-257,t=hd(e,t,i)):t.memoizedState!==null?(kr(),t.child=e.child,t.flags|=128,t=null):(kr(),w=o.fallback,u=t.mode,o=Cl({mode:"visible",children:o.children},u),w=Wr(w,u,i,null),w.flags|=2,o.return=t,w.return=t,o.sibling=w,t.child=o,si(t,e.child,null,i),o=t.child,o.memoizedState=ud(i),o.childLanes=dd(e,g,i),t.memoizedState=cd,t=Ks(null,o));else if(xr(t),Fd(w)){if(g=w.nextSibling&&w.nextSibling.dataset,g)var U=g.dgst;g=U,o=Error(s(419)),o.stack="",o.digest=g,Us({value:o,source:null,stack:null}),t=hd(e,t,i)}else if(tn||Mi(e,t,i,!1),g=(i&e.childLanes)!==0,tn||g){if(g=_t,g!==null&&(o=na(g,i),o!==0&&o!==T.retryLane))throw T.retryLane=o,Jr(e,o),Hn(g,e,o),od;Pd(w)||Rl(),t=hd(e,t,i)}else Pd(w)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,Lt=da(w.nextSibling),gn=t,dt=!0,yr=null,ca=!1,e!==null&&Gp(t,e),t=fd(t,o.children),t.flags|=4096);return t}return u?(kr(),w=o.fallback,u=t.mode,T=e.child,U=T.sibling,o=Za(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,U!==null?w=Za(U,w):(w=Wr(w,u,i,null),w.flags|=2),w.return=t,o.return=t,o.sibling=w,t.child=o,Ks(null,o),o=t.child,w=e.child.memoizedState,w===null?w=ud(i):(u=w.cachePool,u!==null?(T=Wt._currentValue,u=u.parent!==T?{parent:T,pool:T}:u):u=Kp(),w={baseLanes:w.baseLanes|i,cachePool:u}),o.memoizedState=w,o.childLanes=dd(e,g,i),t.memoizedState=cd,Ks(e.child,o)):(xr(t),i=e.child,e=i.sibling,i=Za(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function fd(e,t){return t=Cl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Cl(e,t){return e=Zn(22,e,null,t),e.lanes=0,e}function hd(e,t,i){return si(t,e.child,null,i),e=fd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cy(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Nu(e.return,t,i)}function pd(e,t,i,o,u,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:f}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=i,g.tailMode=u,g.treeForkCount=f)}function uy(e,t,i){var o=t.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var g=Xt.current,w=(g&2)!==0;if(w?(g=g&1|2,t.flags|=128):g&=1,N(Xt,g),bn(e,t,o,i),o=dt?Bs:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cy(e,i,t);else if(e.tag===19)cy(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&hl(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),pd(t,!1,u,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&hl(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}pd(t,!0,i,null,f,o);break;case"together":pd(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function er(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Tr|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Mi(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Za(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Za(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function md(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function ex(e,t,i){switch(t.tag){case 3:Qe(t,t.stateNode.containerInfo),vr(t,Wt,e.memoizedState.cache),ei();break;case 27:case 5:Mt(t);break;case 4:Qe(t,t.stateNode.containerInfo);break;case 10:vr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,$u(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(xr(t),t.flags|=128,null):(i&t.child.childLanes)!==0?ly(e,t,i):(xr(t),e=er(e,t,i),e!==null?e.sibling:null);xr(t);break;case 19:var u=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Mi(e,t,i,!1),o=(i&t.childLanes)!==0),u){if(o)return uy(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),N(Xt,Xt.current),o)break;return null;case 22:return t.lanes=0,ny(e,t,i,t.pendingProps);case 24:vr(t,Wt,e.memoizedState.cache)}return er(e,t,i)}function dy(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)tn=!0;else{if(!md(e,i)&&(t.flags&128)===0)return tn=!1,ex(e,t,i);tn=(e.flags&131072)!==0}else tn=!1,dt&&(t.flags&1048576)!==0&&qp(t,Bs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=ri(t.elementType),t.type=e,typeof e=="function")wu(e)?(o=li(e,o),t.tag=1,t=sy(null,t,e,o,i)):(t.tag=0,t=ld(null,t,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===P){t.tag=11,t=Wm(null,t,e,o,i);break e}else if(u===G){t.tag=14,t=ey(null,t,e,o,i);break e}}throw t=$e(e)||e,Error(s(306,t,""))}}return t;case 0:return ld(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,u=li(o,t.pendingProps),sy(e,t,o,u,i);case 3:e:{if(Qe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));o=t.pendingProps;var f=t.memoizedState;u=f.element,zu(e,t),Ys(t,o,null,i);var g=t.memoizedState;if(o=g.cache,vr(t,Wt,o),o!==f.cache&&ju(t,[Wt],i,!0),Gs(),o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=oy(e,t,o,i);break e}else if(o!==u){u=sa(Error(s(424)),t),Us(u),t=oy(e,t,o,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Lt=da(e.firstChild),gn=t,dt=!0,yr=null,ca=!0,i=nm(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ei(),o===u){t=er(e,t,i);break e}bn(e,t,o,i)}t=t.child}return t;case 26:return El(e,t),e===null?(i=xg(t.type,null,t.pendingProps,null))?t.memoizedState=i:dt||(i=t.type,e=t.pendingProps,o=Hl(ye.current).createElement(i),o[Qt]=t,o[yn]=e,wn(o,i,e),ne(o),t.stateNode=o):t.memoizedState=xg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Mt(t),e===null&&dt&&(o=t.stateNode=bg(t.type,t.pendingProps,ye.current),gn=t,ca=!0,u=Lt,_r(t.type)?(Zd=u,Lt=da(o.firstChild)):Lt=u),bn(e,t,t.pendingProps.children,i),El(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&dt&&((u=o=Lt)&&(o=Ax(o,t.type,t.pendingProps,ca),o!==null?(t.stateNode=o,gn=t,Lt=da(o.firstChild),ca=!1,u=!0):u=!1),u||gr(t)),Mt(t),u=t.type,f=t.pendingProps,g=e!==null?e.memoizedProps:null,o=f.children,qd(u,f)?o=null:g!==null&&qd(u,g)&&(t.flags|=32),t.memoizedState!==null&&(u=Vu(e,t,YS,null,null,i),fo._currentValue=u),El(e,t),bn(e,t,o,i),t.child;case 6:return e===null&&dt&&((e=i=Lt)&&(i=_x(i,t.pendingProps,ca),i!==null?(t.stateNode=i,gn=t,Lt=null,e=!0):e=!1),e||gr(t)),null;case 13:return ly(e,t,i);case 4:return Qe(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=si(t,null,o,i):bn(e,t,o,i),t.child;case 11:return Wm(e,t,t.type,t.pendingProps,i);case 7:return bn(e,t,t.pendingProps,i),t.child;case 8:return bn(e,t,t.pendingProps.children,i),t.child;case 12:return bn(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,vr(t,t.type,o.value),bn(e,t,o.children,i),t.child;case 9:return u=t.type._context,o=t.pendingProps.children,ni(t),u=vn(u),o=o(u),t.flags|=1,bn(e,t,o,i),t.child;case 14:return ey(e,t,t.type,t.pendingProps,i);case 15:return ty(e,t,t.type,t.pendingProps,i);case 19:return uy(e,t,i);case 31:return WS(e,t,i);case 22:return ny(e,t,i,t.pendingProps);case 24:return ni(t),o=vn(Wt),e===null?(u=Du(),u===null&&(u=_t,f=Au(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),t.memoizedState={parent:o,cache:u},Ru(t),vr(t,Wt,u)):((e.lanes&i)!==0&&(zu(e,t),Ys(t,null,null,i),Gs()),u=e.memoizedState,f=t.memoizedState,u.parent!==o?(u={parent:o,cache:o},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),vr(t,Wt,o)):(o=f.cache,vr(t,Wt,o),o!==u.cache&&ju(t,[Wt],i,!0))),bn(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function tr(e){e.flags|=4}function yd(e,t,i,o,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Uy())e.flags|=8192;else throw ii=cl,Mu}else e.flags&=-16777217}function fy(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Og(t))if(Uy())e.flags|=8192;else throw ii=cl,Mu}function Tl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Pe():536870912,e.lanes|=t,Yi|=t)}function Qs(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function tx(e,t,i){var o=t.pendingProps;switch(Eu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return Bt(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Qa(Wt),Ze(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Di(t)?tr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tu())),Bt(t),null;case 26:var u=t.type,f=t.memoizedState;return e===null?(tr(t),f!==null?(Bt(t),fy(t,f)):(Bt(t),yd(t,u,null,o,i))):f?f!==e.memoizedState?(tr(t),Bt(t),fy(t,f)):(Bt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&tr(t),Bt(t),yd(t,u,e,o,i)),null;case 27:if(It(t),i=ye.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&tr(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Bt(t),null}e=M.current,Di(t)?Yp(t):(e=bg(u,o,i),t.stateNode=e,tr(t))}return Bt(t),null;case 5:if(It(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&tr(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Bt(t),null}if(f=M.current,Di(t))Yp(t);else{var g=Hl(ye.current);switch(f){case 1:f=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=g.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?g.createElement(u,{is:o.is}):g.createElement(u)}}f[Qt]=t,f[yn]=o;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)f.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=f;e:switch(wn(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&tr(t)}}return Bt(t),yd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&tr(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(e=ye.current,Di(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,u=gn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[Qt]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||lg(e.nodeValue,i)),e||gr(t,!0)}else e=Hl(e).createTextNode(o),e[Qt]=t,t.stateNode=e}return Bt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=Di(t),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Qt]=t}else ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Bt(t),e=!1}else i=Tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Kn(t),t):(Kn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Bt(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Di(t),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[Qt]=t}else ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Bt(t),u=!1}else u=Tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Kn(t),t):(Kn(t),null)}return Kn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Tl(t,t.updateQueue),Bt(t),null);case 4:return Ze(),e===null&&Ud(t.stateNode.containerInfo),Bt(t),null;case 10:return Qa(t.type),Bt(t),null;case 19:if(L(Xt),o=t.memoizedState,o===null)return Bt(t),null;if(u=(t.flags&128)!==0,f=o.rendering,f===null)if(u)Qs(o,!1);else{if(Pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=hl(e),f!==null){for(t.flags|=128,Qs(o,!1),e=f.updateQueue,t.updateQueue=e,Tl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)$p(i,e),i=i.sibling;return N(Xt,Xt.current&1|2),dt&&Xa(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&C()>_l&&(t.flags|=128,u=!0,Qs(o,!1),t.lanes=4194304)}else{if(!u)if(e=hl(f),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Tl(t,e),Qs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!dt)return Bt(t),null}else 2*C()-o.renderingStartTime>_l&&i!==536870912&&(t.flags|=128,u=!0,Qs(o,!1),t.lanes=4194304);o.isBackwards?(f.sibling=t.child,t.child=f):(e=o.last,e!==null?e.sibling=f:t.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=C(),e.sibling=null,i=Xt.current,N(Xt,u?i&1|2:i&1),dt&&Xa(t,o.treeForkCount),e):(Bt(t),null);case 22:case 23:return Kn(t),Iu(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),i=t.updateQueue,i!==null&&Tl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&L(ai),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Qa(Wt),Bt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function nx(e,t){switch(Eu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qa(Wt),Ze(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return It(t),null;case 31:if(t.memoizedState!==null){if(Kn(t),t.alternate===null)throw Error(s(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(Xt),null;case 4:return Ze(),null;case 10:return Qa(t.type),null;case 22:case 23:return Kn(t),Iu(),e!==null&&L(ai),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Qa(Wt),null;case 25:return null;default:return null}}function hy(e,t){switch(Eu(t),t.tag){case 3:Qa(Wt),Ze();break;case 26:case 27:case 5:It(t);break;case 4:Ze();break;case 31:t.memoizedState!==null&&Kn(t);break;case 13:Kn(t);break;case 19:L(Xt);break;case 10:Qa(t.type);break;case 22:case 23:Kn(t),Iu(),e!==null&&L(ai);break;case 24:Qa(Wt)}}function Js(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var f=i.create,g=i.inst;o=f(),g.destroy=o}i=i.next}while(i!==u)}}catch(w){Ct(t,t.return,w)}}function Er(e,t,i){try{var o=t.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var g=o.inst,w=g.destroy;if(w!==void 0){g.destroy=void 0,u=t;var T=i,U=w;try{U()}catch(W){Ct(u,T,W)}}}o=o.next}while(o!==f)}}catch(W){Ct(t,t.return,W)}}function py(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{rm(t,i)}catch(o){Ct(e,e.return,o)}}}function my(e,t,i){i.props=li(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Ct(e,t,o)}}function Ws(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){Ct(e,t,u)}}function za(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){Ct(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){Ct(e,t,u)}else i.current=null}function yy(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){Ct(e,e.return,u)}}function gd(e,t,i){try{var o=e.stateNode;Ex(o,e.type,i,t),o[yn]=t}catch(u){Ct(e,e.return,u)}}function gy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_r(e.type)||e.tag===4}function vd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_r(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bd(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Pa));else if(o!==4&&(o===27&&_r(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(bd(e,t,i),e=e.sibling;e!==null;)bd(e,t,i),e=e.sibling}function Ol(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&_r(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Ol(e,t,i),e=e.sibling;e!==null;)Ol(e,t,i),e=e.sibling}function vy(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);wn(t,o,i),t[Qt]=e,t[yn]=i}catch(f){Ct(e,e.return,f)}}var nr=!1,nn=!1,wd=!1,by=typeof WeakSet=="function"?WeakSet:Set,pn=null;function ax(e,t){if(e=e.containerInfo,Hd=Zl,e=_p(e),hu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,w=-1,T=-1,U=0,W=0,ae=e,q=null;t:for(;;){for(var X;ae!==i||u!==0&&ae.nodeType!==3||(w=g+u),ae!==f||o!==0&&ae.nodeType!==3||(T=g+o),ae.nodeType===3&&(g+=ae.nodeValue.length),(X=ae.firstChild)!==null;)q=ae,ae=X;for(;;){if(ae===e)break t;if(q===i&&++U===u&&(w=g),q===f&&++W===o&&(T=g),(X=ae.nextSibling)!==null)break;ae=q,q=ae.parentNode}ae=X}i=w===-1||T===-1?null:{start:w,end:T}}else i=null}i=i||{start:0,end:0}}else i=null;for(Vd={focusedElem:e,selectionRange:i},Zl=!1,pn=t;pn!==null;)if(t=pn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pn=e;else for(;pn!==null;){switch(t=pn,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=t,u=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var Me=li(i.type,u);e=o.getSnapshotBeforeUpdate(Me,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Ge){Ct(i,i.return,Ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Yd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Yd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,pn=e;break}pn=t.return}}function wy(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:rr(e,i),o&4&&Js(5,i);break;case 1:if(rr(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){Ct(i,i.return,g)}else{var u=li(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ct(i,i.return,g)}}o&64&&py(i),o&512&&Ws(i,i.return);break;case 3:if(rr(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{rm(e,t)}catch(g){Ct(i,i.return,g)}}break;case 27:t===null&&o&4&&vy(i);case 26:case 5:rr(e,i),t===null&&o&4&&yy(i),o&512&&Ws(i,i.return);break;case 12:rr(e,i);break;case 31:rr(e,i),o&4&&ky(e,i);break;case 13:rr(e,i),o&4&&Ey(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=fx.bind(null,i),Dx(e,i))));break;case 22:if(o=i.memoizedState!==null||nr,!o){t=t!==null&&t.memoizedState!==null||nn,u=nr;var f=nn;nr=o,(nn=t)&&!f?ir(e,i,(i.subtreeFlags&8772)!==0):rr(e,i),nr=u,nn=f}break;case 30:break;default:rr(e,i)}}function Sy(e){var t=e.alternate;t!==null&&(e.alternate=null,Sy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&xa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var $t=null,Bn=!1;function ar(e,t,i){for(i=i.child;i!==null;)xy(e,t,i),i=i.sibling}function xy(e,t,i){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(Ue,i)}catch{}switch(i.tag){case 26:nn||za(i,t),ar(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:nn||za(i,t);var o=$t,u=Bn;_r(i.type)&&($t=i.stateNode,Bn=!1),ar(e,t,i),lo(i.stateNode),$t=o,Bn=u;break;case 5:nn||za(i,t);case 6:if(o=$t,u=Bn,$t=null,ar(e,t,i),$t=o,Bn=u,$t!==null)if(Bn)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(i.stateNode)}catch(f){Ct(i,t,f)}else try{$t.removeChild(i.stateNode)}catch(f){Ct(i,t,f)}break;case 18:$t!==null&&(Bn?(e=$t,pg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Wi(e)):pg($t,i.stateNode));break;case 4:o=$t,u=Bn,$t=i.stateNode.containerInfo,Bn=!0,ar(e,t,i),$t=o,Bn=u;break;case 0:case 11:case 14:case 15:Er(2,i,t),nn||Er(4,i,t),ar(e,t,i);break;case 1:nn||(za(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&my(i,t,o)),ar(e,t,i);break;case 21:ar(e,t,i);break;case 22:nn=(o=nn)||i.memoizedState!==null,ar(e,t,i),nn=o;break;default:ar(e,t,i)}}function ky(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Wi(e)}catch(i){Ct(t,t.return,i)}}}function Ey(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wi(e)}catch(i){Ct(t,t.return,i)}}function rx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new by),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new by),t;default:throw Error(s(435,e.tag))}}function Nl(e,t){var i=rx(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var u=hx.bind(null,e,o);o.then(u,u)}})}function Un(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],f=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 27:if(_r(w.type)){$t=w.stateNode,Bn=!1;break e}break;case 5:$t=w.stateNode,Bn=!1;break e;case 3:case 4:$t=w.stateNode.containerInfo,Bn=!0;break e}w=w.return}if($t===null)throw Error(s(160));xy(f,g,u),$t=null,Bn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Cy(t,e),t=t.sibling}var Ea=null;function Cy(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Un(t,e),In(e),o&4&&(Er(3,e,e.return),Js(3,e),Er(5,e,e.return));break;case 1:Un(t,e),In(e),o&512&&(nn||i===null||za(i,i.return)),o&64&&nr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Ea;if(Un(t,e),In(e),o&512&&(nn||i===null||za(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Sa]||f[Qt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),wn(f,o,i),f[Qt]=e,ne(f),o=f;break e;case"link":var g=Cg("link","href",u).get(o+(i.href||""));if(g){for(var w=0;w<g.length;w++)if(f=g[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(w,1);break t}}f=u.createElement(o),wn(f,o,i),u.head.appendChild(f);break;case"meta":if(g=Cg("meta","content",u).get(o+(i.content||""))){for(w=0;w<g.length;w++)if(f=g[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(w,1);break t}}f=u.createElement(o),wn(f,o,i),u.head.appendChild(f);break;default:throw Error(s(468,o))}f[Qt]=e,ne(f),o=f}e.stateNode=o}else Tg(u,e.type,e.stateNode);else e.stateNode=Eg(u,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?Tg(u,e.type,e.stateNode):Eg(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&gd(e,e.memoizedProps,i.memoizedProps)}break;case 27:Un(t,e),In(e),o&512&&(nn||i===null||za(i,i.return)),i!==null&&o&4&&gd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Un(t,e),In(e),o&512&&(nn||i===null||za(i,i.return)),e.flags&32){u=e.stateNode;try{xi(u,"")}catch(Me){Ct(e,e.return,Me)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,gd(e,u,i!==null?i.memoizedProps:u)),o&1024&&(wd=!0);break;case 6:if(Un(t,e),In(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Me){Ct(e,e.return,Me)}}break;case 3:if(Gl=null,u=Ea,Ea=Vl(t.containerInfo),Un(t,e),Ea=u,In(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Wi(t.containerInfo)}catch(Me){Ct(e,e.return,Me)}wd&&(wd=!1,Ty(e));break;case 4:o=Ea,Ea=Vl(e.stateNode.containerInfo),Un(t,e),In(e),Ea=o;break;case 12:Un(t,e),In(e);break;case 31:Un(t,e),In(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nl(e,o)));break;case 13:Un(t,e),In(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Al=C()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nl(e,o)));break;case 22:u=e.memoizedState!==null;var T=i!==null&&i.memoizedState!==null,U=nr,W=nn;if(nr=U||u,nn=W||T,Un(t,e),nn=W,nr=U,In(e),o&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(i===null||T||nr||nn||ci(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){T=i=t;try{if(f=T.stateNode,u)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{w=T.stateNode;var ae=T.memoizedProps.style,q=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;w.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(Me){Ct(T,T.return,Me)}}}else if(t.tag===6){if(i===null){T=t;try{T.stateNode.nodeValue=u?"":T.memoizedProps}catch(Me){Ct(T,T.return,Me)}}}else if(t.tag===18){if(i===null){T=t;try{var X=T.stateNode;u?mg(X,!0):mg(T.stateNode,!1)}catch(Me){Ct(T,T.return,Me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Nl(e,i))));break;case 19:Un(t,e),In(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nl(e,o)));break;case 30:break;case 21:break;default:Un(t,e),In(e)}}function In(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(gy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=vd(e);Ol(e,f,u);break;case 5:var g=i.stateNode;i.flags&32&&(xi(g,""),i.flags&=-33);var w=vd(e);Ol(e,w,g);break;case 3:case 4:var T=i.stateNode.containerInfo,U=vd(e);bd(e,U,T);break;default:throw Error(s(161))}}catch(W){Ct(e,e.return,W)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ty(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ty(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function rr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wy(e,t.alternate,t),t=t.sibling}function ci(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Er(4,t,t.return),ci(t);break;case 1:za(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&my(t,t.return,i),ci(t);break;case 27:lo(t.stateNode);case 26:case 5:za(t,t.return),ci(t);break;case 22:t.memoizedState===null&&ci(t);break;case 30:ci(t);break;default:ci(t)}e=e.sibling}}function ir(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,u=e,f=t,g=f.flags;switch(f.tag){case 0:case 11:case 15:ir(u,f,i),Js(4,f);break;case 1:if(ir(u,f,i),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(U){Ct(o,o.return,U)}if(o=f,u=o.updateQueue,u!==null){var w=o.stateNode;try{var T=u.shared.hiddenCallbacks;if(T!==null)for(u.shared.hiddenCallbacks=null,u=0;u<T.length;u++)am(T[u],w)}catch(U){Ct(o,o.return,U)}}i&&g&64&&py(f),Ws(f,f.return);break;case 27:vy(f);case 26:case 5:ir(u,f,i),i&&o===null&&g&4&&yy(f),Ws(f,f.return);break;case 12:ir(u,f,i);break;case 31:ir(u,f,i),i&&g&4&&ky(u,f);break;case 13:ir(u,f,i),i&&g&4&&Ey(u,f);break;case 22:f.memoizedState===null&&ir(u,f,i),Ws(f,f.return);break;case 30:break;default:ir(u,f,i)}t=t.sibling}}function Sd(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Is(i))}function xd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Is(e))}function Ca(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Oy(e,t,i,o),t=t.sibling}function Oy(e,t,i,o){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Ca(e,t,i,o),u&2048&&Js(9,t);break;case 1:Ca(e,t,i,o);break;case 3:Ca(e,t,i,o),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Is(e)));break;case 12:if(u&2048){Ca(e,t,i,o),e=t.stateNode;try{var f=t.memoizedProps,g=f.id,w=f.onPostCommit;typeof w=="function"&&w(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Ct(t,t.return,T)}}else Ca(e,t,i,o);break;case 31:Ca(e,t,i,o);break;case 13:Ca(e,t,i,o);break;case 23:break;case 22:f=t.stateNode,g=t.alternate,t.memoizedState!==null?f._visibility&2?Ca(e,t,i,o):eo(e,t):f._visibility&2?Ca(e,t,i,o):(f._visibility|=2,Vi(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),u&2048&&Sd(g,t);break;case 24:Ca(e,t,i,o),u&2048&&xd(t.alternate,t);break;default:Ca(e,t,i,o)}}function Vi(e,t,i,o,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,g=t,w=i,T=o,U=g.flags;switch(g.tag){case 0:case 11:case 15:Vi(f,g,w,T,u),Js(8,g);break;case 23:break;case 22:var W=g.stateNode;g.memoizedState!==null?W._visibility&2?Vi(f,g,w,T,u):eo(f,g):(W._visibility|=2,Vi(f,g,w,T,u)),u&&U&2048&&Sd(g.alternate,g);break;case 24:Vi(f,g,w,T,u),u&&U&2048&&xd(g.alternate,g);break;default:Vi(f,g,w,T,u)}t=t.sibling}}function eo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,u=o.flags;switch(o.tag){case 22:eo(i,o),u&2048&&Sd(o.alternate,o);break;case 24:eo(i,o),u&2048&&xd(o.alternate,o);break;default:eo(i,o)}t=t.sibling}}var to=8192;function qi(e,t,i){if(e.subtreeFlags&to)for(e=e.child;e!==null;)Ny(e,t,i),e=e.sibling}function Ny(e,t,i){switch(e.tag){case 26:qi(e,t,i),e.flags&to&&e.memoizedState!==null&&Gx(i,Ea,e.memoizedState,e.memoizedProps);break;case 5:qi(e,t,i);break;case 3:case 4:var o=Ea;Ea=Vl(e.stateNode.containerInfo),qi(e,t,i),Ea=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=to,to=16777216,qi(e,t,i),to=o):qi(e,t,i));break;default:qi(e,t,i)}}function jy(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function no(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];pn=o,_y(o,e)}jy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ay(e),e=e.sibling}function Ay(e){switch(e.tag){case 0:case 11:case 15:no(e),e.flags&2048&&Er(9,e,e.return);break;case 3:no(e);break;case 12:no(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,jl(e)):no(e);break;default:no(e)}}function jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];pn=o,_y(o,e)}jy(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Er(8,t,t.return),jl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,jl(t));break;default:jl(t)}e=e.sibling}}function _y(e,t){for(;pn!==null;){var i=pn;switch(i.tag){case 0:case 11:case 15:Er(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Is(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,pn=o;else e:for(i=e;pn!==null;){o=pn;var u=o.sibling,f=o.return;if(Sy(o),o===i){pn=null;break e}if(u!==null){u.return=f,pn=u;break e}pn=f}}}var ix={getCacheForType:function(e){var t=vn(Wt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return vn(Wt).controller.signal}},sx=typeof WeakMap=="function"?WeakMap:Map,bt=0,_t=null,it=null,ot=0,Et=0,Qn=null,Cr=!1,Gi=!1,kd=!1,sr=0,Pt=0,Tr=0,ui=0,Ed=0,Jn=0,Yi=0,ao=null,$n=null,Cd=!1,Al=0,Dy=0,_l=1/0,Dl=null,Or=null,un=0,Nr=null,Pi=null,or=0,Td=0,Od=null,My=null,ro=0,Nd=null;function Wn(){return(bt&2)!==0&&ot!==0?ot&-ot:I.T!==null?Rd():Ts()}function Ry(){if(Jn===0)if((ot&536870912)===0||dt){var e=R;R<<=1,(R&3932160)===0&&(R=262144),Jn=e}else Jn=536870912;return e=Xn.current,e!==null&&(e.flags|=32),Jn}function Hn(e,t,i){(e===_t&&(Et===2||Et===9)||e.cancelPendingCommit!==null)&&(Fi(e,0),jr(e,ot,Jn,!1)),Tt(e,i),((bt&2)===0||e!==_t)&&(e===_t&&((bt&2)===0&&(ui|=i),Pt===4&&jr(e,ot,Jn,!1)),La(e))}function zy(e,t,i){if((bt&6)!==0)throw Error(s(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||mt(e,t),u=o?cx(e,t):Ad(e,t,!0),f=o;do{if(u===0){Gi&&!o&&jr(e,t,0,!1);break}else{if(i=e.current.alternate,f&&!ox(i)){u=Ad(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var w=e;u=ao;var T=w.current.memoizedState.isDehydrated;if(T&&(Fi(w,g).flags|=256),g=Ad(w,g,!1),g!==2){if(kd&&!T){w.errorRecoveryDisabledLanes|=f,ui|=f,u=4;break e}f=$n,$n=u,f!==null&&($n===null?$n=f:$n.push.apply($n,f))}u=g}if(f=!1,u!==2)continue}}if(u===1){Fi(e,0),jr(e,t,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:jr(o,t,Jn,!Cr);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Al+300-C(),10<u)){if(jr(o,t,Jn,!Cr),_e(o,0,!0)!==0)break e;or=t,o.timeoutHandle=fg(Ly.bind(null,o,i,$n,Dl,Cd,t,Jn,ui,Yi,Cr,f,"Throttled",-0,0),u);break e}Ly(o,i,$n,Dl,Cd,t,Jn,ui,Yi,Cr,f,null,-0,0)}}break}while(!0);La(e)}function Ly(e,t,i,o,u,f,g,w,T,U,W,ae,q,X){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pa},Ny(t,f,ae);var Me=(f&62914560)===f?Al-C():(f&4194048)===f?Dy-C():0;if(Me=Yx(ae,Me),Me!==null){or=f,e.cancelPendingCommit=Me(Gy.bind(null,e,t,f,i,o,u,g,w,T,W,ae,null,q,X)),jr(e,f,g,!U);return}}Gy(e,t,f,i,o,u,g,w,T)}function ox(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],f=u.getSnapshot;u=u.value;try{if(!Fn(f(),u))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jr(e,t,i,o){t&=~Ed,t&=~ui,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var u=t;0<u;){var f=31-rt(u),g=1<<f;o[f]=-1,u&=~g}i!==0&&Cs(e,i,t)}function Ml(){return(bt&6)===0?(io(0),!1):!0}function jd(){if(it!==null){if(Et===0)var e=it.return;else e=it,Ka=ti=null,Yu(e),Bi=null,Hs=0,e=it;for(;e!==null;)hy(e.alternate,e),e=e.return;it=null}}function Fi(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Ox(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),or=0,jd(),_t=e,it=i=Za(e.current,null),ot=t,Et=0,Qn=null,Cr=!1,Gi=mt(e,t),kd=!1,Yi=Jn=Ed=ui=Tr=Pt=0,$n=ao=null,Cd=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var u=31-rt(o),f=1<<u;t|=e[u],o&=~f}return sr=t,el(),i}function By(e,t){et=null,I.H=Xs,t===Li||t===ll?(t=Wp(),Et=3):t===Mu?(t=Wp(),Et=4):Et=t===od?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Qn=t,it===null&&(Pt=1,xl(e,sa(t,e.current)))}function Uy(){var e=Xn.current;return e===null?!0:(ot&4194048)===ot?ua===null:(ot&62914560)===ot||(ot&536870912)!==0?e===ua:!1}function Iy(){var e=I.H;return I.H=Xs,e===null?Xs:e}function $y(){var e=I.A;return I.A=ix,e}function Rl(){Pt=4,Cr||(ot&4194048)!==ot&&Xn.current!==null||(Gi=!0),(Tr&134217727)===0&&(ui&134217727)===0||_t===null||jr(_t,ot,Jn,!1)}function Ad(e,t,i){var o=bt;bt|=2;var u=Iy(),f=$y();(_t!==e||ot!==t)&&(Dl=null,Fi(e,t)),t=!1;var g=Pt;e:do try{if(Et!==0&&it!==null){var w=it,T=Qn;switch(Et){case 8:jd(),g=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(t=!0);var U=Et;if(Et=0,Qn=null,Zi(e,w,T,U),i&&Gi){g=0;break e}break;default:U=Et,Et=0,Qn=null,Zi(e,w,T,U)}}lx(),g=Pt;break}catch(W){By(e,W)}while(!0);return t&&e.shellSuspendCounter++,Ka=ti=null,bt=o,I.H=u,I.A=f,it===null&&(_t=null,ot=0,el()),g}function lx(){for(;it!==null;)Hy(it)}function cx(e,t){var i=bt;bt|=2;var o=Iy(),u=$y();_t!==e||ot!==t?(Dl=null,_l=C()+500,Fi(e,t)):Gi=mt(e,t);e:do try{if(Et!==0&&it!==null){t=it;var f=Qn;t:switch(Et){case 1:Et=0,Qn=null,Zi(e,t,f,1);break;case 2:case 9:if(Qp(f)){Et=0,Qn=null,Vy(t);break}t=function(){Et!==2&&Et!==9||_t!==e||(Et=7),La(e)},f.then(t,t);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:Qp(f)?(Et=0,Qn=null,Vy(t)):(Et=0,Qn=null,Zi(e,t,f,7));break;case 5:var g=null;switch(it.tag){case 26:g=it.memoizedState;case 5:case 27:var w=it;if(g?Og(g):w.stateNode.complete){Et=0,Qn=null;var T=w.sibling;if(T!==null)it=T;else{var U=w.return;U!==null?(it=U,zl(U)):it=null}break t}}Et=0,Qn=null,Zi(e,t,f,5);break;case 6:Et=0,Qn=null,Zi(e,t,f,6);break;case 8:jd(),Pt=6;break e;default:throw Error(s(462))}}ux();break}catch(W){By(e,W)}while(!0);return Ka=ti=null,I.H=o,I.A=u,bt=i,it!==null?0:(_t=null,ot=0,el(),Pt)}function ux(){for(;it!==null&&!xe();)Hy(it)}function Hy(e){var t=dy(e.alternate,e,sr);e.memoizedProps=e.pendingProps,t===null?zl(e):it=t}function Vy(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=iy(i,t,t.pendingProps,t.type,void 0,ot);break;case 11:t=iy(i,t,t.pendingProps,t.type.render,t.ref,ot);break;case 5:Yu(t);default:hy(i,t),t=it=$p(t,sr),t=dy(i,t,sr)}e.memoizedProps=e.pendingProps,t===null?zl(e):it=t}function Zi(e,t,i,o){Ka=ti=null,Yu(t),Bi=null,Hs=0;var u=t.return;try{if(JS(e,u,t,i,ot)){Pt=1,xl(e,sa(i,e.current)),it=null;return}}catch(f){if(u!==null)throw it=u,f;Pt=1,xl(e,sa(i,e.current)),it=null;return}t.flags&32768?(dt||o===1?e=!0:Gi||(ot&536870912)!==0?e=!1:(Cr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Xn.current,o!==null&&o.tag===13&&(o.flags|=16384))),qy(t,e)):zl(t)}function zl(e){var t=e;do{if((t.flags&32768)!==0){qy(t,Cr);return}e=t.return;var i=tx(t.alternate,t,sr);if(i!==null){it=i;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);Pt===0&&(Pt=5)}function qy(e,t){do{var i=nx(e.alternate,e);if(i!==null){i.flags&=32767,it=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=i}while(e!==null);Pt=6,it=null}function Gy(e,t,i,o,u,f,g,w,T){e.cancelPendingCommit=null;do Ll();while(un!==0);if((bt&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=vu,kt(e,i,f,g,w,T),e===_t&&(it=_t=null,ot=0),Pi=t,Nr=e,or=i,Td=f,Od=u,My=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,px(be,function(){return Xy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=I.T,I.T=null,u=re.p,re.p=2,g=bt,bt|=4;try{ax(e,t,i)}finally{bt=g,re.p=u,I.T=o}}un=1,Yy(),Py(),Fy()}}function Yy(){if(un===1){un=0;var e=Nr,t=Pi,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=I.T,I.T=null;var o=re.p;re.p=2;var u=bt;bt|=4;try{Cy(t,e);var f=Vd,g=_p(e.containerInfo),w=f.focusedElem,T=f.selectionRange;if(g!==w&&w&&w.ownerDocument&&Ap(w.ownerDocument.documentElement,w)){if(T!==null&&hu(w)){var U=T.start,W=T.end;if(W===void 0&&(W=U),"selectionStart"in w)w.selectionStart=U,w.selectionEnd=Math.min(W,w.value.length);else{var ae=w.ownerDocument||document,q=ae&&ae.defaultView||window;if(q.getSelection){var X=q.getSelection(),Me=w.textContent.length,Ge=Math.min(T.start,Me),jt=T.end===void 0?Ge:Math.min(T.end,Me);!X.extend&&Ge>jt&&(g=jt,jt=Ge,Ge=g);var _=jp(w,Ge),j=jp(w,jt);if(_&&j&&(X.rangeCount!==1||X.anchorNode!==_.node||X.anchorOffset!==_.offset||X.focusNode!==j.node||X.focusOffset!==j.offset)){var B=ae.createRange();B.setStart(_.node,_.offset),X.removeAllRanges(),Ge>jt?(X.addRange(B),X.extend(j.node,j.offset)):(B.setEnd(j.node,j.offset),X.addRange(B))}}}}for(ae=[],X=w;X=X.parentNode;)X.nodeType===1&&ae.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ae.length;w++){var ee=ae[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Zl=!!Hd,Vd=Hd=null}finally{bt=u,re.p=o,I.T=i}}e.current=t,un=2}}function Py(){if(un===2){un=0;var e=Nr,t=Pi,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=I.T,I.T=null;var o=re.p;re.p=2;var u=bt;bt|=4;try{wy(e,t.alternate,t)}finally{bt=u,re.p=o,I.T=i}}un=3}}function Fy(){if(un===4||un===3){un=0,se();var e=Nr,t=Pi,i=or,o=My;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?un=5:(un=0,Pi=Nr=null,Zy(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Or=null),fn(i),t=t.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(Ue,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=I.T,u=re.p,re.p=2,I.T=null;try{for(var f=e.onRecoverableError,g=0;g<o.length;g++){var w=o[g];f(w.value,{componentStack:w.stack})}}finally{I.T=t,re.p=u}}(or&3)!==0&&Ll(),La(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===Nd?ro++:(ro=0,Nd=e):ro=0,io(0)}}function Zy(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Is(t)))}function Ll(){return Yy(),Py(),Fy(),Xy()}function Xy(){if(un!==5)return!1;var e=Nr,t=Td;Td=0;var i=fn(or),o=I.T,u=re.p;try{re.p=32>i?32:i,I.T=null,i=Od,Od=null;var f=Nr,g=or;if(un=0,Pi=Nr=null,or=0,(bt&6)!==0)throw Error(s(331));var w=bt;if(bt|=4,Ay(f.current),Oy(f,f.current,g,i),bt=w,io(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(Ue,f)}catch{}return!0}finally{re.p=u,I.T=o,Zy(e,t)}}function Ky(e,t,i){t=sa(i,t),t=sd(e.stateNode,t,2),e=Sr(e,t,2),e!==null&&(Tt(e,2),La(e))}function Ct(e,t,i){if(e.tag===3)Ky(e,e,i);else for(;t!==null;){if(t.tag===3){Ky(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Or===null||!Or.has(o))){e=sa(i,e),i=Qm(2),o=Sr(t,i,2),o!==null&&(Jm(i,o,t,e),Tt(o,2),La(o));break}}t=t.return}}function _d(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new sx;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(i)||(kd=!0,u.add(i),e=dx.bind(null,e,t,i),t.then(e,e))}function dx(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,_t===e&&(ot&i)===i&&(Pt===4||Pt===3&&(ot&62914560)===ot&&300>C()-Al?(bt&2)===0&&Fi(e,0):Ed|=i,Yi===ot&&(Yi=0)),La(e)}function Qy(e,t){t===0&&(t=Pe()),e=Jr(e,t),e!==null&&(Tt(e,t),La(e))}function fx(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Qy(e,i)}function hx(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(t),Qy(e,i)}function px(e,t){return J(e,t)}var Bl=null,Xi=null,Dd=!1,Ul=!1,Md=!1,Ar=0;function La(e){e!==Xi&&e.next===null&&(Xi===null?Bl=Xi=e:Xi=Xi.next=e),Ul=!0,Dd||(Dd=!0,yx())}function io(e,t){if(!Md&&Ul){Md=!0;do for(var i=!1,o=Bl;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var g=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-rt(42|e)+1)-1,f&=u&~(g&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,tg(o,f))}else f=ot,f=_e(o,o===_t?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||mt(o,f)||(i=!0,tg(o,f));o=o.next}while(i);Md=!1}}function mx(){Jy()}function Jy(){Ul=Dd=!1;var e=0;Ar!==0&&Tx()&&(e=Ar);for(var t=C(),i=null,o=Bl;o!==null;){var u=o.next,f=Wy(o,t);f===0?(o.next=null,i===null?Bl=u:i.next=u,u===null&&(Xi=i)):(i=o,(e!==0||(f&3)!==0)&&(Ul=!0)),o=u}un!==0&&un!==5||io(e),Ar!==0&&(Ar=0)}function Wy(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var g=31-rt(f),w=1<<g,T=u[g];T===-1?((w&i)===0||(w&o)!==0)&&(u[g]=Pn(w,t)):T<=t&&(e.expiredLanes|=w),f&=~w}if(t=_t,i=ot,i=_e(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Et===2||Et===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ae(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||mt(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&Ae(o),fn(i)){case 2:case 8:i=de;break;case 32:i=be;break;case 268435456:i=He;break;default:i=be}return o=eg.bind(null,e),i=J(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&Ae(o),e.callbackPriority=2,e.callbackNode=null,2}function eg(e,t){if(un!==0&&un!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ll()&&e.callbackNode!==i)return null;var o=ot;return o=_e(e,e===_t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(zy(e,o,t),Wy(e,C()),e.callbackNode!=null&&e.callbackNode===i?eg.bind(null,e):null)}function tg(e,t){if(Ll())return null;zy(e,t,!0)}function yx(){Nx(function(){(bt&6)!==0?J(oe,mx):Jy()})}function Rd(){if(Ar===0){var e=Ri;e===0&&(e=A,A<<=1,(A&261888)===0&&(A=256)),Ar=e}return Ar}function ng(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Po(""+e)}function ag(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function gx(e,t,i,o,u){if(t==="submit"&&i&&i.stateNode===u){var f=ng((u[yn]||null).action),g=o.submitter;g&&(t=(t=g[yn]||null)?ng(t.formAction):g.getAttribute("formAction"),t!==null&&(f=t,g=null));var w=new Ko("action","action",null,o,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ar!==0){var T=g?ag(u,g):new FormData(u);ed(i,{pending:!0,data:T,method:u.method,action:f},null,T)}}else typeof f=="function"&&(w.preventDefault(),T=g?ag(u,g):new FormData(u),ed(i,{pending:!0,data:T,method:u.method,action:f},f,T))},currentTarget:u}]})}}for(var zd=0;zd<gu.length;zd++){var Ld=gu[zd],vx=Ld.toLowerCase(),bx=Ld[0].toUpperCase()+Ld.slice(1);ka(vx,"on"+bx)}ka(Rp,"onAnimationEnd"),ka(zp,"onAnimationIteration"),ka(Lp,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(zS,"onTransitionRun"),ka(LS,"onTransitionStart"),ka(BS,"onTransitionCancel"),ka(Bp,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Ee("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ee("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ee("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ee("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var so="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(so));function rg(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var g=o.length-1;0<=g;g--){var w=o[g],T=w.instance,U=w.currentTarget;if(w=w.listener,T!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=U;try{f(u)}catch(W){Wo(W)}u.currentTarget=null,f=T}else for(g=0;g<o.length;g++){if(w=o[g],T=w.instance,U=w.currentTarget,w=w.listener,T!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=U;try{f(u)}catch(W){Wo(W)}u.currentTarget=null,f=T}}}}function st(e,t){var i=t[Ho];i===void 0&&(i=t[Ho]=new Set);var o=e+"__bubble";i.has(o)||(ig(t,e,2,!1),i.add(o))}function Bd(e,t,i){var o=0;t&&(o|=4),ig(i,e,o,t)}var Il="_reactListening"+Math.random().toString(36).slice(2);function Ud(e){if(!e[Il]){e[Il]=!0,me.forEach(function(i){i!=="selectionchange"&&(wx.has(i)||Bd(i,!1,e),Bd(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Il]||(t[Il]=!0,Bd("selectionchange",!1,t))}}function ig(e,t,i,o){switch(Rg(t)){case 2:var u=Zx;break;case 8:u=Xx;break;default:u=Wd}i=u.bind(null,t,i,e),u=void 0,!ru||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function Id(e,t,i,o,u){var f=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var w=o.stateNode.containerInfo;if(w===u)break;if(g===4)for(g=o.return;g!==null;){var T=g.tag;if((T===3||T===4)&&g.stateNode.containerInfo===u)return;g=g.return}for(;w!==null;){if(g=aa(w),g===null)return;if(T=g.tag,T===5||T===6||T===26||T===27){o=f=g;continue e}w=w.parentNode}}o=o.return}up(function(){var U=f,W=nu(i),ae=[];e:{var q=Up.get(e);if(q!==void 0){var X=Ko,Me=e;switch(e){case"keypress":if(Zo(i)===0)break e;case"keydown":case"keyup":X=hS;break;case"focusin":Me="focus",X=lu;break;case"focusout":Me="blur",X=lu;break;case"beforeblur":case"afterblur":X=lu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=tS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=yS;break;case Rp:case zp:case Lp:X=rS;break;case Bp:X=vS;break;case"scroll":case"scrollend":X=Ww;break;case"wheel":X=wS;break;case"copy":case"cut":case"paste":X=sS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=mp;break;case"toggle":case"beforetoggle":X=xS}var Ge=(t&4)!==0,jt=!Ge&&(e==="scroll"||e==="scrollend"),_=Ge?q!==null?q+"Capture":null:q;Ge=[];for(var j=U,B;j!==null;){var ee=j;if(B=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||B===null||_===null||(ee=Ns(j,_),ee!=null&&Ge.push(oo(j,ee,B))),jt)break;j=j.return}0<Ge.length&&(q=new X(q,Me,null,i,W),ae.push({event:q,listeners:Ge}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",q&&i!==tu&&(Me=i.relatedTarget||i.fromElement)&&(aa(Me)||Me[Ga]))break e;if((X||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,X?(Me=i.relatedTarget||i.toElement,X=U,Me=Me?aa(Me):null,Me!==null&&(jt=c(Me),Ge=Me.tag,Me!==jt||Ge!==5&&Ge!==27&&Ge!==6)&&(Me=null)):(X=null,Me=U),X!==Me)){if(Ge=hp,ee="onMouseLeave",_="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(Ge=mp,ee="onPointerLeave",_="onPointerEnter",j="pointer"),jt=X==null?q:Ya(X),B=Me==null?q:Ya(Me),q=new Ge(ee,j+"leave",X,i,W),q.target=jt,q.relatedTarget=B,ee=null,aa(W)===U&&(Ge=new Ge(_,j+"enter",Me,i,W),Ge.target=B,Ge.relatedTarget=jt,ee=Ge),jt=ee,X&&Me)t:{for(Ge=Sx,_=X,j=Me,B=0,ee=_;ee;ee=Ge(ee))B++;ee=0;for(var Ie=j;Ie;Ie=Ge(Ie))ee++;for(;0<B-ee;)_=Ge(_),B--;for(;0<ee-B;)j=Ge(j),ee--;for(;B--;){if(_===j||j!==null&&_===j.alternate){Ge=_;break t}_=Ge(_),j=Ge(j)}Ge=null}else Ge=null;X!==null&&sg(ae,q,X,Ge,!1),Me!==null&&jt!==null&&sg(ae,jt,Me,Ge,!0)}}e:{if(q=U?Ya(U):window,X=q.nodeName&&q.nodeName.toLowerCase(),X==="select"||X==="input"&&q.type==="file")var gt=kp;else if(Sp(q))if(Ep)gt=DS;else{gt=AS;var Le=jS}else X=q.nodeName,!X||X.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?U&&eu(U.elementType)&&(gt=kp):gt=_S;if(gt&&(gt=gt(e,U))){xp(ae,gt,i,W);break e}Le&&Le(e,q,U),e==="focusout"&&U&&q.type==="number"&&U.memoizedProps.value!=null&&Wc(q,"number",q.value)}switch(Le=U?Ya(U):window,e){case"focusin":(Sp(Le)||Le.contentEditable==="true")&&(Ti=Le,pu=U,Ls=null);break;case"focusout":Ls=pu=Ti=null;break;case"mousedown":mu=!0;break;case"contextmenu":case"mouseup":case"dragend":mu=!1,Dp(ae,i,W);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":Dp(ae,i,W)}var tt;if(uu)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Ci?bp(e,i)&&(lt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(lt="onCompositionStart");lt&&(yp&&i.locale!=="ko"&&(Ci||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Ci&&(tt=dp()):(pr=W,iu="value"in pr?pr.value:pr.textContent,Ci=!0)),Le=$l(U,lt),0<Le.length&&(lt=new pp(lt,e,null,i,W),ae.push({event:lt,listeners:Le}),tt?lt.data=tt:(tt=wp(i),tt!==null&&(lt.data=tt)))),(tt=ES?CS(e,i):TS(e,i))&&(lt=$l(U,"onBeforeInput"),0<lt.length&&(Le=new pp("onBeforeInput","beforeinput",null,i,W),ae.push({event:Le,listeners:lt}),Le.data=tt)),gx(ae,e,U,i,W)}rg(ae,t)})}function oo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function $l(e,t){for(var i=t+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Ns(e,i),u!=null&&o.unshift(oo(e,u,f)),u=Ns(e,t),u!=null&&o.push(oo(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Sx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sg(e,t,i,o,u){for(var f=t._reactName,g=[];i!==null&&i!==o;){var w=i,T=w.alternate,U=w.stateNode;if(w=w.tag,T!==null&&T===o)break;w!==5&&w!==26&&w!==27||U===null||(T=U,u?(U=Ns(i,f),U!=null&&g.unshift(oo(i,U,T))):u||(U=Ns(i,f),U!=null&&g.push(oo(i,U,T)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var xx=/\r\n?/g,kx=/\u0000|\uFFFD/g;function og(e){return(typeof e=="string"?e:""+e).replace(xx,`
`).replace(kx,"")}function lg(e,t){return t=og(t),og(e)===t}function Nt(e,t,i,o,u,f){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||xi(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&xi(e,""+o);break;case"className":kn(e,"class",o);break;case"tabIndex":kn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(e,i,o);break;case"style":lp(e,o,f);break;case"data":if(t!=="object"){kn(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Po(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(t!=="input"&&Nt(e,t,"name",u.name,u,null),Nt(e,t,"formEncType",u.formEncType,u,null),Nt(e,t,"formMethod",u.formMethod,u,null),Nt(e,t,"formTarget",u.formTarget,u,null)):(Nt(e,t,"encType",u.encType,u,null),Nt(e,t,"method",u.method,u,null),Nt(e,t,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Po(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=Pa);break;case"onScroll":o!=null&&st("scroll",e);break;case"onScrollEnd":o!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Po(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":st("beforetoggle",e),st("toggle",e),cn(e,"popover",o);break;case"xlinkActuate":En(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":En(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":En(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":En(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":En(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":En(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":En(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":En(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":En(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":cn(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Qw.get(i)||i,cn(e,i,o))}}function $d(e,t,i,o,u,f){switch(i){case"style":lp(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?xi(e,o):(typeof o=="number"||typeof o=="bigint")&&xi(e,""+o);break;case"onScroll":o!=null&&st("scroll",e);break;case"onScrollEnd":o!=null&&st("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ke.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),t=i.slice(2,u?i.length-7:void 0),f=e[yn]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):cn(e,i,o)}}}function wn(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var o=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var g=i[f];if(g!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Nt(e,t,f,g,i,null)}}u&&Nt(e,t,"srcSet",i.srcSet,i,null),o&&Nt(e,t,"src",i.src,i,null);return;case"input":st("invalid",e);var w=f=g=u=null,T=null,U=null;for(o in i)if(i.hasOwnProperty(o)){var W=i[o];if(W!=null)switch(o){case"name":u=W;break;case"type":g=W;break;case"checked":T=W;break;case"defaultChecked":U=W;break;case"value":f=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,t));break;default:Nt(e,t,o,W,i,null)}}rp(e,f,w,T,U,g,u,!1);return;case"select":st("invalid",e),o=g=f=null;for(u in i)if(i.hasOwnProperty(u)&&(w=i[u],w!=null))switch(u){case"value":f=w;break;case"defaultValue":g=w;break;case"multiple":o=w;default:Nt(e,t,u,w,i,null)}t=f,i=g,e.multiple=!!o,t!=null?Si(e,!!o,t,!1):i!=null&&Si(e,!!o,i,!0);return;case"textarea":st("invalid",e),f=u=o=null;for(g in i)if(i.hasOwnProperty(g)&&(w=i[g],w!=null))switch(g){case"value":o=w;break;case"defaultValue":u=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Nt(e,t,g,w,i,null)}sp(e,o,u,f);return;case"option":for(T in i)if(i.hasOwnProperty(T)&&(o=i[T],o!=null))switch(T){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Nt(e,t,T,o,i,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(o=0;o<so.length;o++)st(so[o],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in i)if(i.hasOwnProperty(U)&&(o=i[U],o!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Nt(e,t,U,o,i,null)}return;default:if(eu(t)){for(W in i)i.hasOwnProperty(W)&&(o=i[W],o!==void 0&&$d(e,t,W,o,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(o=i[w],o!=null&&Nt(e,t,w,o,i,null))}function Ex(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,g=null,w=null,T=null,U=null,W=null;for(X in i){var ae=i[X];if(i.hasOwnProperty(X)&&ae!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":T=ae;default:o.hasOwnProperty(X)||Nt(e,t,X,null,o,ae)}}for(var q in o){var X=o[q];if(ae=i[q],o.hasOwnProperty(q)&&(X!=null||ae!=null))switch(q){case"type":f=X;break;case"name":u=X;break;case"checked":U=X;break;case"defaultChecked":W=X;break;case"value":g=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,t));break;default:X!==ae&&Nt(e,t,q,X,o,ae)}}Jc(e,g,w,T,U,W,f,u);return;case"select":X=g=w=q=null;for(f in i)if(T=i[f],i.hasOwnProperty(f)&&T!=null)switch(f){case"value":break;case"multiple":X=T;default:o.hasOwnProperty(f)||Nt(e,t,f,null,o,T)}for(u in o)if(f=o[u],T=i[u],o.hasOwnProperty(u)&&(f!=null||T!=null))switch(u){case"value":q=f;break;case"defaultValue":w=f;break;case"multiple":g=f;default:f!==T&&Nt(e,t,u,f,o,T)}t=w,i=g,o=X,q!=null?Si(e,!!i,q,!1):!!o!=!!i&&(t!=null?Si(e,!!i,t,!0):Si(e,!!i,i?[]:"",!1));return;case"textarea":X=q=null;for(w in i)if(u=i[w],i.hasOwnProperty(w)&&u!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Nt(e,t,w,null,o,u)}for(g in o)if(u=o[g],f=i[g],o.hasOwnProperty(g)&&(u!=null||f!=null))switch(g){case"value":q=u;break;case"defaultValue":X=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Nt(e,t,g,u,o,f)}ip(e,q,X);return;case"option":for(var Me in i)if(q=i[Me],i.hasOwnProperty(Me)&&q!=null&&!o.hasOwnProperty(Me))switch(Me){case"selected":e.selected=!1;break;default:Nt(e,t,Me,null,o,q)}for(T in o)if(q=o[T],X=i[T],o.hasOwnProperty(T)&&q!==X&&(q!=null||X!=null))switch(T){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Nt(e,t,T,q,o,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in i)q=i[Ge],i.hasOwnProperty(Ge)&&q!=null&&!o.hasOwnProperty(Ge)&&Nt(e,t,Ge,null,o,q);for(U in o)if(q=o[U],X=i[U],o.hasOwnProperty(U)&&q!==X&&(q!=null||X!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,t));break;default:Nt(e,t,U,q,o,X)}return;default:if(eu(t)){for(var jt in i)q=i[jt],i.hasOwnProperty(jt)&&q!==void 0&&!o.hasOwnProperty(jt)&&$d(e,t,jt,void 0,o,q);for(W in o)q=o[W],X=i[W],!o.hasOwnProperty(W)||q===X||q===void 0&&X===void 0||$d(e,t,W,q,o,X);return}}for(var _ in i)q=i[_],i.hasOwnProperty(_)&&q!=null&&!o.hasOwnProperty(_)&&Nt(e,t,_,null,o,q);for(ae in o)q=o[ae],X=i[ae],!o.hasOwnProperty(ae)||q===X||q==null&&X==null||Nt(e,t,ae,q,o,X)}function cg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],f=u.transferSize,g=u.initiatorType,w=u.duration;if(f&&w&&cg(g)){for(g=0,w=u.responseEnd,o+=1;o<i.length;o++){var T=i[o],U=T.startTime;if(U>w)break;var W=T.transferSize,ae=T.initiatorType;W&&cg(ae)&&(T=T.responseEnd,g+=W*(T<w?1:(w-U)/(T-U)))}if(--o,t+=8*(f+g)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Hd=null,Vd=null;function Hl(e){return e.nodeType===9?e:e.ownerDocument}function ug(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function qd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gd=null;function Tx(){var e=window.event;return e&&e.type==="popstate"?e===Gd?!1:(Gd=e,!0):(Gd=null,!1)}var fg=typeof setTimeout=="function"?setTimeout:void 0,Ox=typeof clearTimeout=="function"?clearTimeout:void 0,hg=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof hg<"u"?function(e){return hg.resolve(null).then(e).catch(jx)}:fg;function jx(e){setTimeout(function(){throw e})}function _r(e){return e==="head"}function pg(e,t){var i=t,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),Wi(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")lo(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,lo(i);for(var f=i.firstChild;f;){var g=f.nextSibling,w=f.nodeName;f[Sa]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=g}}else i==="body"&&lo(e.ownerDocument.body);i=u}while(i);Wi(t)}function mg(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Yd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Yd(i),xa(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Ax(e,t,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Sa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=da(e.nextSibling),e===null)break}return null}function _x(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=da(e.nextSibling),e===null))return null;return e}function yg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=da(e.nextSibling),e===null))return null;return e}function Pd(e){return e.data==="$?"||e.data==="$~"}function Fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Dx(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function da(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Zd=null;function gg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return da(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function vg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function bg(e,t,i){switch(t=Hl(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function lo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);xa(e)}var fa=new Map,wg=new Set;function Vl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var lr=re.d;re.d={f:Mx,r:Rx,D:zx,C:Lx,L:Bx,m:Ux,X:$x,S:Ix,M:Hx};function Mx(){var e=lr.f(),t=Ml();return e||t}function Rx(e){var t=hr(e);t!==null&&t.tag===5&&t.type==="form"?Bm(t):lr.r(e)}var Ki=typeof document>"u"?null:document;function Sg(e,t,i){var o=Ki;if(o&&typeof t=="string"&&t){var u=ra(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),wg.has(u)||(wg.add(u),e={rel:e,crossOrigin:i,href:t},o.querySelector(u)===null&&(t=o.createElement("link"),wn(t,"link",e),ne(t),o.head.appendChild(t)))}}function zx(e){lr.D(e),Sg("dns-prefetch",e,null)}function Lx(e,t){lr.C(e,t),Sg("preconnect",e,t)}function Bx(e,t,i){lr.L(e,t,i);var o=Ki;if(o&&e&&t){var u='link[rel="preload"][as="'+ra(t)+'"]';t==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+ra(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+ra(i.imageSizes)+'"]')):u+='[href="'+ra(e)+'"]';var f=u;switch(t){case"style":f=Qi(e);break;case"script":f=Ji(e)}fa.has(f)||(e=b({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),fa.set(f,e),o.querySelector(u)!==null||t==="style"&&o.querySelector(co(f))||t==="script"&&o.querySelector(uo(f))||(t=o.createElement("link"),wn(t,"link",e),ne(t),o.head.appendChild(t)))}}function Ux(e,t){lr.m(e,t);var i=Ki;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+ra(o)+'"][href="'+ra(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ji(e)}if(!fa.has(f)&&(e=b({rel:"modulepreload",href:e},t),fa.set(f,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(uo(f)))return}o=i.createElement("link"),wn(o,"link",e),ne(o),i.head.appendChild(o)}}}function Ix(e,t,i){lr.S(e,t,i);var o=Ki;if(o&&e){var u=F(o).hoistableStyles,f=Qi(e);t=t||"default";var g=u.get(f);if(!g){var w={loading:0,preload:null};if(g=o.querySelector(co(f)))w.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},i),(i=fa.get(f))&&Xd(e,i);var T=g=o.createElement("link");ne(T),wn(T,"link",e),T._p=new Promise(function(U,W){T.onload=U,T.onerror=W}),T.addEventListener("load",function(){w.loading|=1}),T.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ql(g,t,o)}g={type:"stylesheet",instance:g,count:1,state:w},u.set(f,g)}}}function $x(e,t){lr.X(e,t);var i=Ki;if(i&&e){var o=F(i).hoistableScripts,u=Ji(e),f=o.get(u);f||(f=i.querySelector(uo(u)),f||(e=b({src:e,async:!0},t),(t=fa.get(u))&&Kd(e,t),f=i.createElement("script"),ne(f),wn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Hx(e,t){lr.M(e,t);var i=Ki;if(i&&e){var o=F(i).hoistableScripts,u=Ji(e),f=o.get(u);f||(f=i.querySelector(uo(u)),f||(e=b({src:e,async:!0,type:"module"},t),(t=fa.get(u))&&Kd(e,t),f=i.createElement("script"),ne(f),wn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function xg(e,t,i,o){var u=(u=ye.current)?Vl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Qi(i.href),i=F(u).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Qi(i.href);var f=F(u).hoistableStyles,g=f.get(e);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,g),(f=u.querySelector(co(e)))&&!f._p&&(g.instance=f,g.state.loading=5),fa.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},fa.set(e,i),f||Vx(u,e,i,g.state))),t&&o===null)throw Error(s(528,""));return g}if(t&&o!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ji(i),i=F(u).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Qi(e){return'href="'+ra(e)+'"'}function co(e){return'link[rel="stylesheet"]['+e+"]"}function kg(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Vx(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),wn(t,"link",i),ne(t),e.head.appendChild(t))}function Ji(e){return'[src="'+ra(e)+'"]'}function uo(e){return"script[async]"+e}function Eg(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+ra(i.href)+'"]');if(o)return t.instance=o,ne(o),o;var u=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ne(o),wn(o,"style",u),ql(o,i.precedence,e),t.instance=o;case"stylesheet":u=Qi(i.href);var f=e.querySelector(co(u));if(f)return t.state.loading|=4,t.instance=f,ne(f),f;o=kg(i),(u=fa.get(u))&&Xd(o,u),f=(e.ownerDocument||e).createElement("link"),ne(f);var g=f;return g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),wn(f,"link",o),t.state.loading|=4,ql(f,i.precedence,e),t.instance=f;case"script":return f=Ji(i.src),(u=e.querySelector(uo(f)))?(t.instance=u,ne(u),u):(o=i,(u=fa.get(f))&&(o=b({},i),Kd(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),ne(u),wn(u,"link",o),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,ql(o,i.precedence,e));return t.instance}function ql(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,g=0;g<o.length;g++){var w=o[g];if(w.dataset.precedence===t)f=w;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Xd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Kd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Gl=null;function Cg(e,t,i){if(Gl===null){var o=new Map,u=Gl=new Map;u.set(i,o)}else u=Gl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[Sa]||f[Qt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(t)||"";g=e+g;var w=o.get(g);w?w.push(f):o.set(g,[f])}}return o}function Tg(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function qx(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Og(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Gx(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=Qi(o.href),f=t.querySelector(co(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Yl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=f,ne(f);return}f=t.ownerDocument||t,o=kg(o),(u=fa.get(u))&&Xd(o,u),f=f.createElement("link"),ne(f);var g=f;g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),wn(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Yl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Qd=0;function Yx(e,t){return e.stylesheets&&e.count===0&&Fl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Fl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Qd===0&&(Qd=62500*Cx());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Qd?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Yl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pl=null;function Fl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pl=new Map,t.forEach(Px,e),Pl=null,Yl.call(e))}function Px(e,t){if(!(t.state.loading&4)){var i=Pl.get(e);if(i)var o=i.get(null);else{i=new Map,Pl.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var g=u[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),o=g)}o&&i.set(null,o)}u=t.instance,g=u.getAttribute("data-precedence"),f=i.get(g)||o,f===o&&i.set(null,u),i.set(g,u),this.count++,o=Yl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var fo={$$typeof:z,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function Fx(e,t,i,o,u,f,g,w,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.hiddenUpdates=Rt(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Ng(e,t,i,o,u,f,g,w,T,U,W,ae){return e=new Fx(e,t,i,g,T,U,W,ae,w),t=1,f===!0&&(t|=24),f=Zn(3,null,null,t),e.current=f,f.stateNode=e,t=Au(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:t},Ru(f),e}function jg(e){return e?(e=ji,e):ji}function Ag(e,t,i,o,u,f){u=jg(u),o.context===null?o.context=u:o.pendingContext=u,o=wr(t),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Sr(e,o,t),i!==null&&(Hn(i,e,t),qs(i,e,t))}function _g(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Jd(e,t){_g(e,t),(e=e.alternate)&&_g(e,t)}function Dg(e){if(e.tag===13||e.tag===31){var t=Jr(e,67108864);t!==null&&Hn(t,e,67108864),Jd(e,67108864)}}function Mg(e){if(e.tag===13||e.tag===31){var t=Wn();t=va(t);var i=Jr(e,t);i!==null&&Hn(i,e,t),Jd(e,t)}}var Zl=!0;function Zx(e,t,i,o){var u=I.T;I.T=null;var f=re.p;try{re.p=2,Wd(e,t,i,o)}finally{re.p=f,I.T=u}}function Xx(e,t,i,o){var u=I.T;I.T=null;var f=re.p;try{re.p=8,Wd(e,t,i,o)}finally{re.p=f,I.T=u}}function Wd(e,t,i,o){if(Zl){var u=ef(o);if(u===null)Id(e,t,o,Xl,i),zg(e,o);else if(Qx(u,e,t,i,o))o.stopPropagation();else if(zg(e,o),t&4&&-1<Kx.indexOf(e)){for(;u!==null;){var f=hr(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=we(f.pendingLanes);if(g!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;g;){var T=1<<31-rt(g);w.entanglements[1]|=T,g&=~T}La(f),(bt&6)===0&&(_l=C()+500,io(0))}}break;case 31:case 13:w=Jr(f,2),w!==null&&Hn(w,f,2),Ml(),Jd(f,2)}if(f=ef(o),f===null&&Id(e,t,o,Xl,i),f===u)break;u=f}u!==null&&o.stopPropagation()}else Id(e,t,o,null,i)}}function ef(e){return e=nu(e),tf(e)}var Xl=null;function tf(e){if(Xl=null,e=aa(e),e!==null){var t=c(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xl=e,null}function Rg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(D()){case oe:return 2;case de:return 8;case be:case Oe:return 32;case He:return 268435456;default:return 32}default:return 32}}var nf=!1,Dr=null,Mr=null,Rr=null,ho=new Map,po=new Map,zr=[],Kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zg(e,t){switch(e){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":ho.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(t.pointerId)}}function mo(e,t,i,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},t!==null&&(t=hr(t),t!==null&&Dg(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Qx(e,t,i,o,u){switch(t){case"focusin":return Dr=mo(Dr,e,t,i,o,u),!0;case"dragenter":return Mr=mo(Mr,e,t,i,o,u),!0;case"mouseover":return Rr=mo(Rr,e,t,i,o,u),!0;case"pointerover":var f=u.pointerId;return ho.set(f,mo(ho.get(f)||null,e,t,i,o,u)),!0;case"gotpointercapture":return f=u.pointerId,po.set(f,mo(po.get(f)||null,e,t,i,o,u)),!0}return!1}function Lg(e){var t=aa(e.target);if(t!==null){var i=c(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=ef(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);tu=o,i.target.dispatchEvent(o),tu=null}else return t=hr(i),t!==null&&Dg(t),e.blockedOn=i,!1;t.shift()}return!0}function Bg(e,t,i){Kl(e)&&i.delete(t)}function Jx(){nf=!1,Dr!==null&&Kl(Dr)&&(Dr=null),Mr!==null&&Kl(Mr)&&(Mr=null),Rr!==null&&Kl(Rr)&&(Rr=null),ho.forEach(Bg),po.forEach(Bg)}function Ql(e,t){e.blockedOn===t&&(e.blockedOn=null,nf||(nf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Jx)))}var Jl=null;function Ug(e){Jl!==e&&(Jl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jl===e&&(Jl=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],u=e[t+2];if(typeof o!="function"){if(tf(o||i)===null)continue;break}var f=hr(i);f!==null&&(e.splice(t,3),t-=3,ed(f,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function Wi(e){function t(T){return Ql(T,e)}Dr!==null&&Ql(Dr,e),Mr!==null&&Ql(Mr,e),Rr!==null&&Ql(Rr,e),ho.forEach(t),po.forEach(t);for(var i=0;i<zr.length;i++){var o=zr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<zr.length&&(i=zr[0],i.blockedOn===null);)Lg(i),i.blockedOn===null&&zr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],g=u[yn]||null;if(typeof f=="function")g||Ug(i);else if(g){var w=null;if(f&&f.hasAttribute("formAction")){if(u=f,g=f[yn]||null)w=g.formAction;else if(tf(u)!==null)continue}else w=g.action;typeof w=="function"?i[o+1]=w:(i.splice(o,3),o-=3),Ug(i)}}}function Ig(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(g){return u=g})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function af(e){this._internalRoot=e}Wl.prototype.render=af.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,o=Wn();Ag(i,o,e,t,null,null)},Wl.prototype.unmount=af.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ag(e.current,2,null,e,null,null),Ml(),t[Ga]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ts();e={blockedOn:null,target:e,priority:t};for(var i=0;i<zr.length&&t!==0&&t<zr[i].priority;i++);zr.splice(i,0,e),i===0&&Lg(e)}};var $g=n.version;if($g!=="19.2.0")throw Error(s(527,$g,"19.2.0"));re.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Wx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{Ue=ec.inject(Wx),Ve=ec}catch{}}return go.createRoot=function(e,t){if(!l(e))throw Error(s(299));var i=!1,o="",u=Fm,f=Zm,g=Xm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Ng(e,1,!1,null,null,i,o,null,u,f,g,Ig),e[Ga]=t.current,Ud(e),new af(t)},go.hydrateRoot=function(e,t,i){if(!l(e))throw Error(s(299));var o=!1,u="",f=Fm,g=Zm,w=Xm,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(T=i.formState)),t=Ng(e,1,!0,t,i??null,o,u,T,f,g,w,Ig),t.context=jg(null),i=t.current,o=Wn(),o=va(o),u=wr(o),u.callback=null,Sr(i,u,o),i=o,t.current.lanes=i,Tt(t,i),La(t),e[Ga]=t.current,Ud(e),new Wl(t)},go.version="19.2.0",go}var Kg;function ck(){if(Kg)return of.exports;Kg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),of.exports=lk(),of.exports}var cb=ck();const uk="modulepreload",dk=function(a,n){return new URL(a,n).href},Qg={},Jg=function(n,r,s){let l=Promise.resolve();if(r&&r.length>0){let y=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const d=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=y(r.map(v=>{if(v=dk(v,s),v in Qg)return;Qg[v]=!0;const b=v.endsWith(".css"),S=b?'[rel="stylesheet"]':"";if(s)for(let O=d.length-1;O>=0;O--){const Z=d[O];if(Z.href===v&&(!b||Z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${S}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":uk,b||(E.as="script"),E.crossOrigin="",E.href=v,p&&E.setAttribute("nonce",p),document.head.appendChild(E),b)return new Promise((O,Z)=>{E.addEventListener("load",O),E.addEventListener("error",()=>Z(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return l.then(d=>{for(const h of d||[])h.status==="rejected"&&c(h.reason);return n().catch(c)})};var qr=lb();const Oh=Ch(qr),Wg=ob({__proto__:null,default:Oh},[qr]);function ev(a,n,r,s,l,c,d){try{var h=a[c](d),p=h.value}catch(y){return void r(y)}h.done?n(p):Promise.resolve(p).then(s,l)}function at(a){return function(){var n=this,r=arguments;return new Promise(function(s,l){var c=a.apply(n,r);function d(p){ev(c,s,l,d,h,"next",p)}function h(p){ev(c,s,l,d,h,"throw",p)}d(void 0)})}}function ct(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function Sn(a){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sn(a)}function fk(a,n){if(Sn(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,n);if(Sn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function ub(a){var n=fk(a,"string");return Sn(n)=="symbol"?n:n+""}function hk(a,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,ub(s.key),s)}}function ut(a,n,r){return n&&hk(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function pk(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function qa(a,n){if(n&&(Sn(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pk(a)}function Dt(a){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dt(a)}function _o(a,n){return _o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_o(a,n)}function Yn(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&_o(a,n)}function Be(a,n,r){return(n=ub(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}var df={exports:{}},ff={exports:{}},tv;function db(){return tv||(tv=1,(function(a){function n(r,s){this.v=r,this.k=s}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(ff)),ff.exports}var hf={exports:{}},pf={exports:{}},nv;function fb(){return nv||(nv=1,(function(a){function n(r,s,l,c){var d=Object.defineProperty;try{d({},"",{})}catch{d=0}a.exports=n=function(p,y,v,b){function S(E,O){n(p,E,function(Z){return this._invoke(E,O,Z)})}y?d?d(p,y,{value:v,enumerable:!b,configurable:!b,writable:!b}):p[y]=v:(S("next",0),S("throw",1),S("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,n(r,s,l,c)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(pf)),pf.exports}var av;function hb(){return av||(av=1,(function(a){var n=fb();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",h=c.toStringTag||"@@toStringTag";function p($,Q,K,z){var P=Q&&Q.prototype instanceof v?Q:v,he=Object.create(P.prototype);return n(he,"_invoke",(function(pe,G,ue){var te,Y,fe,Ne=0,Re=ue||[],$e=!1,qe={p:0,n:0,v:s,a:I,f:I.bind(s,4),d:function(ve,ze){return te=ve,Y=0,fe=s,qe.n=ze,y}};function I(re,ve){for(Y=re,fe=ve,l=0;!$e&&Ne&&!ze&&l<Re.length;l++){var ze,H=Re[l],x=qe.p,L=H[2];re>3?(ze=L===ve)&&(fe=H[(Y=H[4])?5:(Y=3,3)],H[4]=H[5]=s):H[0]<=x&&((ze=re<2&&x<H[1])?(Y=0,qe.v=ve,qe.n=H[1]):x<L&&(ze=re<3||H[0]>ve||ve>L)&&(H[4]=re,H[5]=ve,qe.n=L,Y=0))}if(ze||re>1)return y;throw $e=!0,ve}return function(re,ve,ze){if(Ne>1)throw TypeError("Generator is already running");for($e&&ve===1&&I(ve,ze),Y=ve,fe=ze;(l=Y<2?s:fe)||!$e;){te||(Y?Y<3?(Y>1&&(qe.n=-1),I(Y,fe)):qe.n=fe:qe.v=fe);try{if(Ne=2,te){if(Y||(re="next"),l=te[re]){if(!(l=l.call(te,fe)))throw TypeError("iterator result is not an object");if(!l.done)return l;fe=l.value,Y<2&&(Y=0)}else Y===1&&(l=te.return)&&l.call(te),Y<2&&(fe=TypeError("The iterator does not provide a '"+re+"' method"),Y=1);te=s}else if((l=($e=qe.n<0)?fe:pe.call(G,qe))!==y)break}catch(H){te=s,Y=1,fe=H}finally{Ne=1}}return{value:l,done:$e}}})($,K,z),!0),he}var y={};function v(){}function b(){}function S(){}l=Object.getPrototypeOf;var E=[][d]?l(l([][d]())):(n(l={},d,function(){return this}),l),O=S.prototype=v.prototype=Object.create(E);function Z($){return Object.setPrototypeOf?Object.setPrototypeOf($,S):($.__proto__=S,n($,h,"GeneratorFunction")),$.prototype=Object.create(O),$}return b.prototype=S,n(O,"constructor",S),n(S,"constructor",b),b.displayName="GeneratorFunction",n(S,h,"GeneratorFunction"),n(O),n(O,h,"Generator"),n(O,d,function(){return this}),n(O,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:p,m:Z}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(hf)),hf.exports}var mf={exports:{}},yf={exports:{}},gf={exports:{}},rv;function pb(){return rv||(rv=1,(function(a){var n=db(),r=fb();function s(l,c){function d(p,y,v,b){try{var S=l[p](y),E=S.value;return E instanceof n?c.resolve(E.v).then(function(O){d("next",O,v,b)},function(O){d("throw",O,v,b)}):c.resolve(E).then(function(O){S.value=O,v(S)},function(O){return d("throw",O,v,b)})}catch(O){b(O)}}var h;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(p,y,v){function b(){return new c(function(S,E){d(p,v,S,E)})}return h=h?h.then(b,b):b()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(gf)),gf.exports}var iv;function mb(){return iv||(iv=1,(function(a){var n=hb(),r=pb();function s(l,c,d,h,p){return new r(n().w(l,c,d,h),p||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(yf)),yf.exports}var sv;function mk(){return sv||(sv=1,(function(a){var n=mb();function r(s,l,c,d,h){var p=n(s,l,c,d,h);return p.next().then(function(y){return y.done?y.value:p.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(mf)),mf.exports}var vf={exports:{}},ov;function yk(){return ov||(ov=1,(function(a){function n(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function d(){for(;l.length;)if((c=l.pop())in s)return d.value=c,d.done=!1,d;return d.done=!0,d}}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(vf)),vf.exports}var bf={exports:{}},wf={exports:{}},lv;function gk(){return lv||(lv=1,(function(a){function n(r){"@babel/helpers - typeof";return a.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,n(r)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(wf)),wf.exports}var cv;function vk(){return cv||(cv=1,(function(a){var n=gk().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(n(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(bf)),bf.exports}var uv;function bk(){return uv||(uv=1,(function(a){var n=db(),r=hb(),s=mk(),l=mb(),c=pb(),d=yk(),h=vk();function p(){var y=r(),v=y.m(p),b=(Object.getPrototypeOf?Object.getPrototypeOf(v):v.__proto__).constructor;function S(Z){var $=typeof Z=="function"&&Z.constructor;return!!$&&($===b||($.displayName||$.name)==="GeneratorFunction")}var E={throw:1,return:2,break:3,continue:3};function O(Z){var $,Q;return function(K){$||($={stop:function(){return Q(K.a,2)},catch:function(){return K.v},abrupt:function(P,he){return Q(K.a,E[P],he)},delegateYield:function(P,he,pe){return $.resultName=he,Q(K.d,h(P),pe)},finish:function(P){return Q(K.f,P)}},Q=function(P,he,pe){K.p=$.prev,K.n=$.next;try{return P(he,pe)}finally{$.next=K.n}}),$.resultName&&($[$.resultName]=K.v,$.resultName=void 0),$.sent=K.v,$.next=K.n;try{return Z.call(this,$)}finally{K.p=$.prev,K.n=$.next}}}return(a.exports=p=function(){return{wrap:function(Q,K,z,P){return y.w(O(Q),K,z,P&&P.reverse())},isGeneratorFunction:S,mark:y.m,awrap:function(Q,K){return new n(Q,K)},AsyncIterator:c,async:function(Q,K,z,P,he){return(S(K)?l:s)(O(Q),K,z,P,he)},keys:d,values:h}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=p,a.exports.__esModule=!0,a.exports.default=a.exports})(df)),df.exports}var Sf,dv;function wk(){if(dv)return Sf;dv=1;var a=bk()();Sf=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return Sf}var Sk=wk();const Se=Ch(Sk);function xk(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=kk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function kk(a,n){if(a){if(typeof a=="string")return fv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fv(a,n):void 0}}function fv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function Ek(){return{debug:function(n){}}}var yb=(function(){function a(){ct(this,a),Be(this,"pipes",[])}return ut(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var n=at(Se.mark(function s(l){var c,d,h,p;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:c=l,d=xk(this.pipes),v.prev=2,d.s();case 4:if((h=d.n()).done){v.next=13;break}return p=h.value,v.next=8,p(c);case 8:if(c=v.sent,!(typeof c>"u")){v.next=11;break}return v.abrupt("return");case 11:v.next=4;break;case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(2),d.e(v.t0);case 18:return v.prev=18,d.f(),v.finish(18);case 21:return v.abrupt("return",c);case 22:case"end":return v.stop()}},s,this,[[2,15,18,21]])}));function r(s){return n.apply(this,arguments)}return r})()}])})(),ys=(function(){function a(n){ct(this,a),Be(this,"signal",new yb),this.name=n}return ut(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),Ek()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function hv(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Ck(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function Ck(a,n){if(a){if(typeof a=="string")return pv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pv(a,n):void 0}}function pv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function Tk(a,n,r){return n=Dt(n),qa(a,gb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function gb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gb=function(){return!!a})()}var Fr=(function(a){function n(){var r;return ct(this,n),r=Tk(this,n,["NodeEditor"]),Be(r,"nodes",[]),Be(r,"connections",[]),r}return Yn(n,a),ut(n,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=at(Se.mark(function l(c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getNode(c.id)){h.next=2;break}throw new Error("node has already been added");case 2:return h.next=4,this.emit({type:"nodecreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.nodes.push(c),h.next=9,this.emit({type:"nodecreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=at(Se.mark(function l(c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getConnection(c.id)){h.next=2;break}throw new Error("connection has already been added");case 2:return h.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.connections.push(c),h.next=9,this.emit({type:"connectioncreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=at(Se.mark(function l(c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=this.nodes.find(function(v){return v.id===c}),d){y.next=3;break}throw new Error("cannot find node");case 3:return y.next=5,this.emit({type:"noderemove",data:d});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.nodes.indexOf(d),this.nodes.splice(h,1),y.next=11,this.emit({type:"noderemoved",data:d});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=at(Se.mark(function l(c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=this.connections.find(function(v){return v.id===c}),d){y.next=3;break}throw new Error("cannot find connection");case 3:return y.next=5,this.emit({type:"connectionremove",data:d});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.connections.indexOf(d),this.connections.splice(h,1),y.next=11,this.emit({type:"connectionremoved",data:d});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=at(Se.mark(function l(){var c,d,h,p,y,v;return Se.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.emit({type:"clear"});case 2:if(S.sent){S.next=6;break}return S.next=5,this.emit({type:"clearcancelled"});case 5:return S.abrupt("return",!1);case 6:c=hv(this.connections.slice()),S.prev=7,c.s();case 9:if((d=c.n()).done){S.next=15;break}return h=d.value,S.next=13,this.removeConnection(h.id);case 13:S.next=9;break;case 15:S.next=20;break;case 17:S.prev=17,S.t0=S.catch(7),c.e(S.t0);case 20:return S.prev=20,c.f(),S.finish(20);case 23:p=hv(this.nodes.slice()),S.prev=24,p.s();case 26:if((y=p.n()).done){S.next=32;break}return v=y.value,S.next=30,this.removeNode(v.id);case 30:S.next=26;break;case 32:S.next=37;break;case 34:S.prev=34,S.t1=S.catch(24),p.e(S.t1);case 37:return S.prev=37,p.f(),S.finish(37);case 40:return S.next=42,this.emit({type:"cleared"});case 42:return S.abrupt("return",!0);case 43:case"end":return S.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(ys),xf=globalThis.crypto;function Zr(){if("randomBytes"in xf)return xf.randomBytes(8).toString("hex");var a=xf.getRandomValues(new Uint8Array(8)),n=Array.from(a),r=n.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Nh(a,n,r){return n=Dt(n),qa(a,vb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function vb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vb=function(){return!!a})()}var Ok=ut(function a(n){ct(this,a),this.name=n}),jh=ut(function a(n,r,s){ct(this,a),this.socket=n,this.label=r,this.multipleConnections=s,this.id=Zr()}),Nk=(function(a){function n(r,s,l){var c;return ct(this,n),c=Nh(this,n,[r,s,l]),Be(c,"control",null),Be(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return Yn(n,a),ut(n,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(jh),jk=(function(a){function n(r,s,l){return ct(this,n),Nh(this,n,[r,s,l!==!1])}return Yn(n,a),ut(n)})(jh),bb=ut(function a(){ct(this,a),this.id=Zr()}),Ak=(function(a){function n(r,s){var l,c;return ct(this,n),c=Nh(this,n),c.type=r,c.options=s,c.id=Zr(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return Yn(n,a),ut(n,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(bb),_k=(function(){function a(n){ct(this,a),Be(this,"inputs",{}),Be(this,"outputs",{}),Be(this,"controls",{}),this.label=n,this.id=Zr()}return ut(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),Dk=ut(function a(n,r,s,l){if(ct(this,a),this.sourceOutput=r,this.targetInput=l,!n.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=Zr(),this.source=n.id,this.target=s.id}),Gt=Object.freeze({__proto__:null,Socket:Ok,Port:jh,Input:Nk,Output:jk,Control:bb,InputControl:Ak,Node:_k,Connection:Dk});const Mk=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Gt,NodeEditor:Fr,Scope:ys,Signal:yb,getUID:Zr},Symbol.toStringTag,{value:"Module"}));function Gf(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function Rk(a){if(Array.isArray(a))return Gf(a)}function zk(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function wb(a,n){if(a){if(typeof a=="string")return Gf(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gf(a,n):void 0}}function Lk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(a){return Rk(a)||zk(a)||wb(a)||Lk()}var Bk=(function(){function a(n){ct(this,a),this.reordered=n,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ut(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,d=r.clientX-l,h=r.clientY-c;return{x:d,y:h}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var n=at(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.holder.contains(l)){h.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){h.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),h.next=7,this.reordered(l);case 7:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function Sb(a,n){var r=function(d){n.move(d)},s=function(d){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),n.up(d)},l=function(d){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),n.down(d)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var mv=function(n){return n.length===0?0:Math.min.apply(Math,gs(n))},yv=function(n){return n.length===0?0:Math.max.apply(Math,gs(n))};function xb(a){var n=mv(a.map(function(c){return c.position.x})),r=mv(a.map(function(c){return c.position.y})),s=yv(a.map(function(c){return c.position.x+c.width})),l=yv(a.map(function(c){return c.position.y+c.height}));return{left:n,right:s,top:r,bottom:l,width:Math.abs(n-s),height:Math.abs(r-l),center:{x:(n+s)/2,y:(r+l)/2}}}function gv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Uk(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?gv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):gv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Ah=(function(){function a(n){var r=this;ct(this,a),Be(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=Uk({},r.config.getCurrentPosition()),r.events.start(s))}),Be(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),d=r.startPosition.x+l.x/c,h=r.startPosition.y+l.y/c;r.events.translate(d,h,s)}}),Be(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=n||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return ut(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=Sb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),kb=(function(){function a(n){var r=this;ct(this,a),Be(this,"previous",null),Be(this,"pointers",[]),Be(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=s.deltaY<0,p=h?r.intensity:-r.intensity,y=(c-s.clientX)*p,v=(d-s.clientY)*p;r.onzoom(p,y,v,"wheel")}),Be(this,"down",function(s){r.pointers.push(s)}),Be(this,"move",function(s){if(r.pointers=r.pointers.map(function(O){return O.pointerId===s.pointerId?s:O}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=r.getTouches(),p=h.cx,y=h.cy,v=h.distance;if(r.previous!==null&&r.previous.distance>0){var b=v/r.previous.distance-1,S=(c-p)*b,E=(d-y)*b;r.onzoom(b,S-(r.previous.cx-p),E-(r.previous.cy-y),"touch")}r.previous={cx:p,cy:y,distance:v}}}),Be(this,"contextmenu",function(){r.pointers=[]}),Be(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),Be(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=4*r.intensity,p=(c-s.clientX)*h,y=(d-s.clientY)*h;r.onzoom(h,p,y,"dblclick")}),this.intensity=n}return ut(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],d=[r.touches[1].clientX,r.touches[1].clientY],h=d[0],p=d[1],y=Math.sqrt(Math.pow(l-h,2)+Math.pow(c-p,2));return{cx:(l+h)/2,cy:(c+p)/2,distance:y}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),Eb=(function(){function a(n,r,s){var l=this;ct(this,a),Be(this,"transform",{k:1,x:0,y:0}),Be(this,"pointer",{x:0,y:0}),Be(this,"zoomHandler",null),Be(this,"dragHandler",null),Be(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),Be(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),Be(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),Be(this,"resize",function(c){l.events.resize(c)}),Be(this,"onTranslate",function(c,d){var h;(h=l.zoomHandler)!==null&&h!==void 0&&h.isTranslating()||l.translate(c,d)}),Be(this,"onZoom",function(c,d,h,p){l.zoom(l.transform.k*(1+c),d,h,p),l.update()}),this.container=n,this.events=r,this.guards=s,this.content=new Bk(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new kb(.1)),this.setDragHandler(new Ah),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),n.appendChild(this.content.holder),this.update()}return ut(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,d=this.transform.k;this.pointer={x:l/d,y:c/d}}},{key:"translate",value:(function(){var n=at(Se.mark(function s(l,c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return d={x:l,y:c},y.next=3,this.guards.translate({previous:this.transform,position:d});case 3:if(h=y.sent,h){y.next=6;break}return y.abrupt("return",!1);case 6:return this.transform.x=h.data.position.x,this.transform.y=h.data.position.y,this.update(),y.next=11,this.events.translated(h.data);case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var n=at(Se.mark(function s(l){var c,d,h,p,y,v,b=arguments;return Se.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return c=b.length>1&&b[1]!==void 0?b[1]:0,d=b.length>2&&b[2]!==void 0?b[2]:0,h=b.length>3?b[3]:void 0,p=this.transform.k,E.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:h});case 6:if(y=E.sent,y){E.next=9;break}return E.abrupt("return",!0);case 9:return v=(p-y.data.zoom)/(p-l||1),this.transform.k=y.data.zoom||1,this.transform.x+=c*v,this.transform.y+=d*v,this.update(),E.next=16,this.events.zoomed(y.data);case 16:return E.abrupt("return",!1);case 17:case"end":return E.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function Ik(a,n,r){return n=Dt(n),qa(a,Cb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function Cb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cb=function(){return!!a})()}var zo=(function(a){function n(){return ct(this,n),Ik(this,n,arguments)}return Yn(n,a),ut(n)})(ys),$k=ut(function a(n){ct(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return n.contextmenu(r)})}),Hk=(function(){function a(){ct(this,a),Be(this,"views",new WeakMap),Be(this,"viewsElements",new Map)}return ut(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function vv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function bv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?vv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Tb=(function(){function a(n,r,s){var l=this;ct(this,a),Be(this,"translate",(function(){var c=at(Se.mark(function d(h,p){var y,v;return Se.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return y=bv({},l.position),S.next=3,l.guards.translate({previous:y,position:{x:h,y:p}});case 3:if(v=S.sent,v){S.next=6;break}return S.abrupt("return",!1);case 6:return l.position=bv({},v.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),S.next=10,l.events.translated({position:l.position,previous:y});case 10:return S.abrupt("return",!0);case 11:case"end":return S.stop()}},d)}));return function(d,h){return c.apply(this,arguments)}})()),Be(this,"resize",(function(){var c=at(Se.mark(function d(h,p){var y,v;return Se.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return y={width:h,height:p},S.next=3,l.guards.resize({size:y});case 3:if(S.sent){S.next=5;break}return S.abrupt("return",!1);case 5:if(v=l.element.querySelector("*:not(span):not([fragment])"),!(!v||!(v instanceof HTMLElement))){S.next=8;break}return S.abrupt("return",!1);case 8:return v.style.width="".concat(h,"px"),v.style.height="".concat(p,"px"),S.next=12,l.events.resized({size:y});case 12:return S.abrupt("return",!0);case 13:case"end":return S.stop()}},d)}));return function(d,h){return c.apply(this,arguments)}})()),this.getZoom=n,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new Ah,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ut(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function Ob(a,n){return a.map(function(r){return{view:n.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,d=l.height;return typeof c<"u"&&typeof d<"u"?{position:s.position,width:c,height:d}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function Vk(a,n){var r=a.parentScope(Fr),s=n.map(function(c){return Sn(c)==="object"?c:r.getNode(c)}),l=Ob(s,a.nodeViews);return xb(l)}function qk(a){var n=a;n.addPipe(function(r){if(!r||Sn(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=n.nodeViews.get(r.data.id),l=n.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=n.connectionViews.get(r.data.id),d=n.area.content;c&&d.reorder(c.element,d.holder.firstChild)}return r})}function wv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function cr(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?wv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Gk(a,n){var r=n!=null&&n.scaling?n.scaling===!0?{min:.1,max:1}:n.scaling:!1,s=n!=null&&n.translation?n.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:n.translation:!1;function l(d){if(!r)throw new Error("scaling param isnt defined");var h=typeof r=="function"?r():r,p=h.min,y=h.max;return d<p?p:d>y?y:d}function c(d){if(!s)throw new Error("translation param isnt defined");var h=cr({},d),p=typeof s=="function"?s():s,y=p.left,v=p.top,b=p.right,S=p.bottom;return h.x<y&&(h.x=y),h.x>b&&(h.x=b),h.y<v&&(h.y=v),h.y>S&&(h.y=S),h}a.addPipe(function(d){if(!d||Sn(d)!=="object"||!("type"in d))return d;if(r&&d.type==="zoom")return cr(cr({},d),{},{data:cr(cr({},d.data),{},{zoom:l(d.data.zoom)})});if(s&&d.type==="zoomed"){var h=c(a.area.transform);a.area.translate(h.x,h.y)}return s&&d.type==="translate"?cr(cr({},d),{},{data:cr(cr({},d.data),{},{position:c(d.data.position)})}):d})}function Yk(){var a=!1;function n(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",n),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}}var Nb=(function(){function a(){ct(this,a),Be(this,"entities",new Map),Be(this,"pickId",null)}return ut(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var n=at(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c){h.next=3;break}return h.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var n=at(Se.mark(function s(l){var c,d;return Se.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c="".concat(l.label,"_").concat(l.id),d=this.entities.get(c),!d){p.next=6;break}return this.entities.delete(c),p.next=6,d.unselect();case 6:case"end":return p.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var n=at(Se.mark(function s(){var l=this;return Se.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(gs(Array.from(this.entities.values())).map(function(h){return l.remove(h)}));case 2:case"end":return d.stop()}},s,this)}));function r(){return n.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var n=at(Se.mark(function s(l,c){var d=this;return Se.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Promise.all(Array.from(this.entities.values()).map(function(y){return!d.isPicked(y)&&y.translate(l,c)}));case 2:case"end":return p.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function Pk(){return new Nb}function Fk(a,n,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(Fr))},d=0;function h(E){E.selected||(E.selected=!0,l.update("node",E.id))}function p(E){E.selected&&(E.selected=!1,l.update("node",E.id))}function y(E,O){return v.apply(this,arguments)}function v(){return v=at(Se.mark(function E(O,Z){var $;return Se.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if($=c().getNode(O),$){K.next=3;break}return K.abrupt("return");case 3:return K.next=5,n.add({label:"node",id:$.id,translate:function(P,he){return at(Se.mark(function pe(){var G,ue;return Se.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(G=l.nodeViews.get($.id),ue=G?.position,!ue){Y.next=5;break}return Y.next=5,G.translate(ue.x+P,ue.y+he);case 5:case"end":return Y.stop()}},pe)}))()},unselect:function(){p($)}},Z);case 5:h($);case 6:case"end":return K.stop()}},E)})),v.apply(this,arguments)}function b(E){return S.apply(this,arguments)}function S(){return S=at(Se.mark(function E(O){return Se.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,n.remove({id:O,label:"node"});case 2:case"end":return $.stop()}},E)})),S.apply(this,arguments)}return l.addPipe((function(){var E=at(Se.mark(function O(Z){var $,Q,K,z,P,he,pe,G;return Se.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(!(!Z||Sn(Z)!=="object"||!("type"in Z))){te.next=2;break}return te.abrupt("return",Z);case 2:if(Z.type!=="nodepicked"){te.next=11;break}return $=Z.data.id,Q=r.accumulating.active(),n.pick({id:$,label:"node"}),d=null,te.next=9,y($,Q);case 9:te.next=33;break;case 11:if(Z.type!=="nodetranslated"){te.next=20;break}if(K=Z.data,z=K.id,P=K.position,he=K.previous,pe=P.x-he.x,G=P.y-he.y,!n.isPicked({id:z,label:"node"})){te.next=18;break}return te.next=18,n.translate(pe,G);case 18:te.next=33;break;case 20:if(Z.type!=="pointerdown"){te.next=24;break}d=0,te.next=33;break;case 24:if(Z.type!=="pointermove"){te.next=28;break}d!==null&&d++,te.next=33;break;case 28:if(Z.type!=="pointerup"){te.next=33;break}if(!(d!==null&&d<4)){te.next=32;break}return te.next=32,n.unselectAll();case 32:d=null;case 33:return te.abrupt("return",Z);case 34:case"end":return te.stop()}},O)}));return function(O){return E.apply(this,arguments)}})()),{select:y,unselect:b}}function Zk(a,n){var r=null,s=function(){return r||(r=a.parentScope(Fr))};function l(c,d){var h=s().getNode(c);if(h){var p=h.inputs[d];if(!p)throw new Error("cannot find input");var y=p.showControl,v=s().getConnections(),b=!!v.find(function(S){return S.target===c&&S.targetInput===d});p.showControl=n?n({hasAnyConnection:b,input:p}):!b,p.showControl!==y&&a.update("node",h.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function Sv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function tc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Sv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Xk(a,n){var r=a,s=typeof n?.size>"u"?16:n.size,l=typeof n?.dynamic>"u"?!0:n.dynamic;function c(d){return Math.round(d/s)*s}r.addPipe(function(d){if(!d||Sn(d)!=="object"||!("type"in d))return d;if(l&&d.type==="nodetranslate"){var h=d.data.position,p=c(h.x),y=c(h.y);return tc(tc({},d),{},{data:tc(tc({},d.data),{},{position:{x:p,y}})})}if(!l&&d.type==="nodedragged"){var v=r.nodeViews.get(d.data.id);if(v){var b=v.position,S=b.x,E=b.y;v.translate(c(S),c(E))}}return d})}function Kk(a,n,r){return Yf.apply(this,arguments)}function Yf(){return Yf=at(Se.mark(function a(n,r,s){var l,c,d,h,p,y,v,b,S,E,O,Z,$;return Se.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return l=s||{},c=l.scale,d=c===void 0?.9:c,h=n.parentScope(Fr),p=r.map(function(z){return Sn(z)==="object"?z:h.getNode(z)}),y=Ob(p,n.nodeViews),v=xb(y),b=[n.container.clientWidth,n.container.clientHeight],S=b[0],E=b[1],O=S/v.width,Z=E/v.height,$=Math.min(Z*d,O*d,1),n.area.transform.x=S/2-v.center.x*$,n.area.transform.y=E/2-v.center.y*$,K.next=12,n.area.zoom($,0,0);case 12:case"end":return K.stop()}},a)})),Yf.apply(this,arguments)}var Ir=Object.freeze({__proto__:null,getBoundingBox:Vk,simpleNodesOrder:qk,restrictor:Gk,accumulateOnCtrl:Yk,selectableNodes:Fk,Selector:Nb,selector:Pk,showInputControl:Zk,snapGrid:Xk,zoomAt:Kk});function xv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function kv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?xv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Qk(a,n,r){return n=Dt(n),qa(a,jb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function jb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jb=function(){return!!a})()}var Ab=(function(a){function n(r){var s;return ct(this,n),s=Qk(this,n,["area"]),Be(s,"nodeViews",new Map),Be(s,"connectionViews",new Map),Be(s,"elements",new Hk),Be(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!(Sn(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new Eb(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,d){return void s.emit({type:"pointerdown",data:{position:c,event:d}})},pointerMove:function(c,d){return void s.emit({type:"pointermove",data:{position:c,event:d}})},pointerUp:function(c,d){return void s.emit({type:"pointerup",data:{position:c,event:d}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return Yn(n,a),ut(n,[{key:"addNodeView",value:function(s){var l=this,c=s.id,d=new Tb(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(p){return l.emit({type:"nodetranslated",data:kv({id:c},p)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(p){return void l.emit({type:"contextmenu",data:{event:p,context:s}})},resized:function(p){var y=p.size;return l.emit({type:"noderesized",data:{id:s.id,size:y}})}},{translate:function(p){return l.emit({type:"nodetranslate",data:kv({id:c},p)})},resize:function(p){var y=p.size;return l.emit({type:"noderesize",data:{id:s.id,size:y}})}});return this.nodeViews.set(c,d),this.area.content.add(d.element),this.emit({type:"render",data:{element:d.element,type:"node",payload:s}}),d}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new $k({contextmenu:function(h){return void l.emit({type:"contextmenu",data:{event:h,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=at(Se.mark(function l(c,d){var h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(h=this.elements.get(c,d),!h){y.next=4;break}return y.next=4,this.emit({type:"render",data:h});case 4:case"end":return y.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=at(Se.mark(function l(c,d,h){var p;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(p=this.nodeViews.get(c),!p){v.next=5;break}return v.next=4,p.resize(d,h);case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}},l,this)}));function s(l,c,d){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=at(Se.mark(function l(c,d){var h,p,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h=d.x,p=d.y,y=this.nodeViews.get(c),!y){b.next=6;break}return b.next=5,y.translate(h,p);case 5:return b.abrupt("return",b.sent);case 6:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(zo);const Ev=Object.freeze(Object.defineProperty({__proto__:null,Area:Eb,AreaExtensions:Ir,AreaPlugin:Ab,BaseAreaPlugin:zo,Drag:Ah,NodeView:Tb,Zoom:kb,usePointerListener:Sb},Symbol.toStringTag,{value:"Module"}));function Jk(a,n){for(;!{}.hasOwnProperty.call(a,n)&&(a=Dt(a))!==null;);return a}function Do(){return Do=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,n,r){var s=Jk(a,n);if(s){var l=Object.getOwnPropertyDescriptor(s,n);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Do.apply(null,arguments)}function Wk(a){if(Array.isArray(a))return a}function eE(a,n){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,d,h=[],p=!0,y=!1;try{if(c=(r=r.call(a)).next,n!==0)for(;!(p=(s=c.call(r)).done)&&(h.push(s.value),h.length!==n);p=!0);}catch(v){y=!0,l=v}finally{try{if(!p&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(y)throw l}}return h}}function tE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rn(a,n){return Wk(a)||eE(a,n)||wb(a,n)||tE()}function Cv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function kf(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Cv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function nE(a){var n=null,r=null;function s(c){r&&c.removeConnectionView(r),n=null,r=null}function l(c){s(c),r="pseudo_".concat(Zr())}return{isMounted:function(){return!!r},mount:l,render:function(d,h,p){var y=h.x,v=h.y,b=p.side==="output",S={x:y+(b?-3:3),y:v};if(!r)throw new Error("pseudo connection id wasn't generated");var E=b?kf({id:r,source:p.nodeId,sourceOutput:p.key,target:"",targetInput:""},a??{}):kf({id:r,target:p.nodeId,targetInput:p.key,source:"",sourceOutput:""},a??{});if(!n){var O=d.addConnectionView(E);n=O.element}n&&d.emit({type:"render",data:kf({element:n,type:"connection",payload:E},b?{end:S}:{start:S})})},unmount:s}}function aE(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=rE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function rE(a,n){if(a){if(typeof a=="string")return Tv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tv(a,n):void 0}}function Tv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function iE(a,n){var r=aE(n),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(d){r.e(d)}finally{r.f()}}function _b(a,n){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,n),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,gs(_b(a,n,c))),l}var _h=(function(){function a(){ct(this,a)}return ut(a,[{key:"setContext",value:function(r){this.context=r}}])})();function Db(a,n){var r=a.side==="output"&&n.side==="input",s=a.side==="input"&&n.side==="output",l=r?[a,n]:s?[n,a]:[],c=Rn(l,2),d=c[0],h=c[1];if(d&&h)return[d,h]}function sE(a,n){return!!Db(a,n)}function oE(a,n,r){var s=Db(a,n)||[null,null],l=Rn(s,2),c=l[0],d=l[1];if(c&&d)return r.editor.addConnection({id:Zr(),source:c.nodeId,sourceOutput:c.key,target:d.nodeId,targetInput:d.key}),!0}function lE(a,n){var r=n.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function cE(a,n){var r=a.nodeId,s=a.side,l=a.key;return n.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Pf(a,n){var r=a.map(function(s){var l=lE(s,n),c=l?.multipleConnections;return c?[]:cE(s,n)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var d=c.id;return d})));l.forEach(function(c){return void n.removeConnection(c)})}}}function Dh(a,n,r){return n=Dt(n),qa(a,Mb()?Reflect.construct(n,[],Dt(a).constructor):n.apply(a,r))}function Mb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mb=function(){return!!a})()}var uE=(function(a){function n(r,s){var l;return ct(this,n),l=Dh(this,n),l.initial=r,l.params=s,l}return Yn(n,a),ut(n,[{key:"pick",value:(function(){var r=at(Se.mark(function l(c,d){var h,p;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:h=c.socket,this.params.canMakeConnection(this.initial,h)&&(Pf([this.initial,h],d.editor).commit(),p=this.params.makeConnection(this.initial,h,d),this.drop(d,p?h:null,p));case 2:case"end":return v.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Mh(this.params))}}])})(_h),dE=(function(a){function n(r,s,l){var c;ct(this,n),c=Dh(this,n),c.connection=r,c.params=s;var d=Array.from(l.socketsCache.values()).find(function(h){return h.nodeId===c.connection.source&&h.side==="output"&&h.key===c.connection.sourceOutput});if(!d)throw new Error("cannot find output socket");return c.outputSocket=d,c}return Yn(n,a),ut(n,[{key:"init",value:(function(){var r=at(Se.mark(function l(c){var d=this;return Se.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(y){y?(c.editor.removeConnection(d.connection.id),d.initial=d.outputSocket):d.drop(c)});case 1:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=at(Se.mark(function l(c,d){var h,p,y,v,b,S;return Se.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:h=c.socket,p=c.event,this.initial&&!(h.side==="input"&&this.connection.target===h.nodeId&&this.connection.targetInput===h.key)?this.params.canMakeConnection(this.initial,h)&&(Pf([this.initial,h],d.editor).commit(),y=this.params.makeConnection(this.initial,h,d),v=y?h:null,this.drop(d,v,y)):p==="down"&&this.initial&&(Pf([this.initial,h],d.editor).commit(),b=this.params.makeConnection(this.initial,h,d),S=b?null:h,this.drop(d,S,b));case 2:case"end":return O.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Mh(this.params))}}])})(_h),Mh=(function(a){function n(r){var s;return ct(this,n),s=Dh(this,n),s.params=r,s}return Yn(n,a),ut(n,[{key:"pick",value:(function(){var r=at(Se.mark(function l(c,d){var h,p,y,v;return Se.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(h=c.socket,p=c.event,p==="down"){S.next=3;break}return S.abrupt("return");case 3:if(h.side!=="input"){S.next=11;break}if(y=d.editor.getConnections().find(function(E){return E.target===h.nodeId&&E.targetInput===h.key}),!y){S.next=11;break}return v=new dE(y,this.params,d),S.next=9,v.init(d);case 9:return this.context.switchTo(v),S.abrupt("return");case 11:return S.next=13,d.scope.emit({type:"connectionpick",data:{socket:h}});case 13:if(!S.sent){S.next=17;break}this.context.switchTo(new uE(h,this.params)),S.next=18;break;case 17:this.drop(d);case 18:case"end":return S.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(_h),fE=(function(){function a(n){ct(this,a);var r=n?.canMakeConnection||sE,s=n?.makeConnection||oE;this.switchTo(new Mh({canMakeConnection:r,makeConnection:s}))}return ut(a,[{key:"pick",value:(function(){var n=at(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.currentState.pick(l,c);case 2:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function hE(){return function(){return new fE}}var pE=Object.freeze({__proto__:null,setup:hE}),mE=Object.freeze({__proto__:null,classic:pE});function yE(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=gE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function gE(a,n){if(a){if(typeof a=="string")return Ov(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ov(a,n):void 0}}function Ov(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function vE(a,n,r){return n=Dt(n),qa(a,Rb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function Rb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rb=function(){return!!a})()}function bE(a,n,r,s){var l=Do(Dt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var wE=(function(a){function n(){var r;return ct(this,n),r=vE(this,n,["connection"]),Be(r,"presets",[]),Be(r,"currentFlow",null),Be(r,"preudoconnection",nE({isPseudo:!0})),Be(r,"socketsCache",new Map),r}return Yn(n,a),ut(n,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=yE(this.presets),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,h=d(s);if(h)return h}}catch(p){l.e(p)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=at(Se.mark(function l(c,d){var h,p,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h={editor:this.editor,scope:this,socketsCache:this.socketsCache},p=_b(c.clientX,c.clientY),y=iE(this.socketsCache,p),!y){b.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(y),!this.currentFlow){b.next=11;break}return b.next=10,this.currentFlow.pick({socket:y,event:d},h);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:b.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(h);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;bE(n,"setParent",this)([s]),this.areaPlugin=this.parentScope(zo),this.editor=this.areaPlugin.parentScope(Fr);var c=function(h){l.pick(h,"down")};this.addPipe(function(d){if(!d||Sn(d)!=="object"||!("type"in d))return d;if(d.type==="pointermove")l.update();else if(d.type==="pointerup")l.pick(d.data.event,"up");else if(d.type==="render"){if(d.data.type==="socket"){var h=d.data.element;h.addEventListener("pointerdown",c),l.socketsCache.set(h,d.data)}}else if(d.type==="unmount"){var p=d.data.element;p.removeEventListener("pointerdown",c),l.socketsCache.delete(p)}return d})}}])})(ys);function SE(a,n){var r=Rn(a,2),s=r[0],l=s.x,c=s.y,d=r[1],h=d.x,p=d.y,y=Math.abs(c-p),v=l+Math.max(y/2,Math.abs(h-l))*n,b=h-Math.max(y/2,Math.abs(h-l))*n;return"M ".concat(l," ").concat(c," C ").concat(v," ").concat(c," ").concat(b," ").concat(p," ").concat(h," ").concat(p)}function xE(a,n,r){var s=Rn(a,2),l=s[0],c=l.x,d=l.y,h=s[1],p=h.x,y=h.y,v=y>d?1:-1,b=r+Math.abs(c-p)/(r/2),S=(c+p)/2,E=d-v*b,O=(y-d)*n;return`
        M `.concat(c," ").concat(d,`
        C `).concat(c+b," ").concat(d,`
        `).concat(c+b," ").concat(E-O,`
        `).concat(S," ").concat(E,`
        C `).concat(p-b," ").concat(E+O,`
        `).concat(p-b," ").concat(y,`
        `).concat(p," ").concat(y,`
    `)}function kE(a,n){return Ff.apply(this,arguments)}function Ff(){return Ff=at(Se.mark(function a(n,r){var s,l,c,d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(n.offsetParent){y.next=5;break}return y.next=3,new Promise(function(v){return setTimeout(v,0)});case 3:y.next=0;break;case 5:if(s=n.offsetLeft,l=n.offsetTop,c=n.offsetParent,c){y.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return d=n.offsetWidth,h=n.offsetHeight,y.abrupt("return",{x:s+d/2,y:l+h/2});case 14:case"end":return y.stop()}},a)})),Ff.apply(this,arguments)}var EE=(function(){function a(){ct(this,a),Be(this,"listeners",new Set)}return ut(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),CE=(function(){function a(){ct(this,a),Be(this,"elements",new Map)}return ut(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),d=c.filter(function(h){return h.side===r.side&&h.nodeId===r.nodeId&&h.key===r.key});return d.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=d.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(gs(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),TE=(function(){function a(){ct(this,a),Be(this,"sockets",new CE),Be(this,"emitter",new EE),Be(this,"area",null)}return ut(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(zo),this.area.addPipe((function(){var l=at(Se.mark(function c(d){var h,p,y,v,b,S,E,O,Z,$,Q;return Se.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(d.type==="rendered"&&d.data.type==="socket")){z.next=8;break}return h=d.data,p=h.nodeId,y=h.key,v=h.side,b=h.element,z.next=4,s.calculatePosition(p,v,y,b);case 4:S=z.sent,S&&(s.sockets.add({nodeId:p,key:y,side:v,element:b,position:S}),s.emitter.emit({nodeId:p,key:y,side:v})),z.next=24;break;case 8:if(d.type!=="unmount"){z.next=12;break}s.sockets.remove(d.data.element),z.next=24;break;case 12:if(d.type!=="nodetranslated"){z.next=16;break}s.emitter.emit({nodeId:d.data.id}),z.next=24;break;case 16:if(d.type!=="noderesized"){z.next=23;break}return E=d.data.id,z.next=20,Promise.all(s.sockets.snapshot().filter(function(P){return P.nodeId===d.data.id&&P.side==="output"}).map((function(){var P=at(Se.mark(function he(pe){var G,ue,te,Y;return Se.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return G=pe.side,ue=pe.key,te=pe.element,Ne.next=3,s.calculatePosition(E,G,ue,te);case 3:Y=Ne.sent,Y&&(pe.position=Y);case 5:case"end":return Ne.stop()}},he)}));return function(he){return P.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:E}),z.next=24;break;case 23:d.type==="render"&&d.data.type==="connection"&&(O=d.data.payload,Z=O.source,$=O.target,Q=Z||$,s.emitter.emit({nodeId:Q}));case 24:return z.abrupt("return",d);case 25:case"end":return z.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var d=this,h=this.emitter.listen(function(p){if(p.nodeId===r&&(!p.key||p.side===s)&&(!p.side||p.key===l)){var y,v=d.sockets.getPosition({side:s,nodeId:r,key:l});if(!v)return;var b=v.x,S=v.y,E=(y=d.area)===null||y===void 0?void 0:y.nodeViews.get(r);E&&c({x:b+E.position.x,y:S+E.position.y})}});return this.sockets.snapshot().forEach(function(p){p.nodeId===r&&d.emitter.emit(p)}),h}}])})();function OE(a,n,r){return n=Dt(n),qa(a,zb()?Reflect.construct(n,[],Dt(a).constructor):n.apply(a,r))}function zb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zb=function(){return!!a})()}var NE=(function(a){function n(r){var s;return ct(this,n),s=OE(this,n),s.props=r,s}return Yn(n,a),ut(n,[{key:"calculatePosition",value:(function(){var r=at(Se.mark(function l(c,d,h,p){var y,v,b,S;return Se.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(b=(y=this.area)===null||y===void 0?void 0:y.nodeViews.get(c),b!=null&&b.element){O.next=3;break}return O.abrupt("return",null);case 3:return O.next=5,kE(p,b.element);case 5:if(S=O.sent,!((v=this.props)!==null&&v!==void 0&&v.offset)){O.next=8;break}return O.abrupt("return",this.props.offset(S,c,d,h));case 8:return O.abrupt("return",{x:S.x+12*(d==="input"?-1:1),y:S.y});case 9:case"end":return O.stop()}},l,this)}));function s(l,c,d,h){return r.apply(this,arguments)}return s})()}])})(TE);function jE(a){return new NE(a)}function xn(a,n){return n||(n=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(n)}}))}var Gn=function(){return Gn=Object.assign||function(n){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(n[c]=r[c])}return n},Gn.apply(this,arguments)};function Oc(a,n,r){if(r||arguments.length===2)for(var s=0,l=n.length,c;s<l;s++)(c||!(s in n))&&(c||(c=Array.prototype.slice.call(n,0,s)),c[s]=n[s]);return a.concat(c||Array.prototype.slice.call(n))}var Ut="-ms-",Oo="-moz-",St="-webkit-",Lb="comm",Bc="rule",Rh="decl",AE="@import",Bb="@keyframes",_E="@layer",Ub=Math.abs,zh=String.fromCharCode,Zf=Object.assign;function DE(a,n){return mn(a,0)^45?(((n<<2^mn(a,0))<<2^mn(a,1))<<2^mn(a,2))<<2^mn(a,3):0}function Ib(a){return a.trim()}function dr(a,n){return(a=n.exec(a))?a[0]:a}function nt(a,n,r){return a.replace(n,r)}function mc(a,n,r){return a.indexOf(n,r)}function mn(a,n){return a.charCodeAt(n)|0}function us(a,n,r){return a.slice(n,r)}function Ba(a){return a.length}function $b(a){return a.length}function So(a,n){return n.push(a),a}function ME(a,n){return a.map(n).join("")}function Nv(a,n){return a.filter(function(r){return!dr(r,n)})}var Uc=1,ds=1,Hb=0,ga=0,rn=0,vs="";function Ic(a,n,r,s,l,c,d,h){return{value:a,root:n,parent:r,type:s,props:l,children:c,line:Uc,column:ds,length:d,return:"",siblings:h}}function $r(a,n){return Zf(Ic("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},n)}function es(a){for(;a.root;)a=$r(a.root,{children:[a]});So(a,a.siblings)}function RE(){return rn}function zE(){return rn=ga>0?mn(vs,--ga):0,ds--,rn===10&&(ds=1,Uc--),rn}function Aa(){return rn=ga<Hb?mn(vs,ga++):0,ds++,rn===10&&(ds=1,Uc++),rn}function yi(){return mn(vs,ga)}function yc(){return ga}function $c(a,n){return us(vs,a,n)}function Xf(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function LE(a){return Uc=ds=1,Hb=Ba(vs=a),ga=0,[]}function BE(a){return vs="",a}function Ef(a){return Ib($c(ga-1,Kf(a===91?a+2:a===40?a+1:a)))}function UE(a){for(;(rn=yi())&&rn<33;)Aa();return Xf(a)>2||Xf(rn)>3?"":" "}function IE(a,n){for(;--n&&Aa()&&!(rn<48||rn>102||rn>57&&rn<65||rn>70&&rn<97););return $c(a,yc()+(n<6&&yi()==32&&Aa()==32))}function Kf(a){for(;Aa();)switch(rn){case a:return ga;case 34:case 39:a!==34&&a!==39&&Kf(rn);break;case 40:a===41&&Kf(a);break;case 92:Aa();break}return ga}function $E(a,n){for(;Aa()&&a+rn!==57;)if(a+rn===84&&yi()===47)break;return"/*"+$c(n,ga-1)+"*"+zh(a===47?a:Aa())}function HE(a){for(;!Xf(yi());)Aa();return $c(a,ga)}function VE(a){return BE(gc("",null,null,null,[""],a=LE(a),0,[0],a))}function gc(a,n,r,s,l,c,d,h,p){for(var y=0,v=0,b=d,S=0,E=0,O=0,Z=1,$=1,Q=1,K=0,z="",P=l,he=c,pe=s,G=z;$;)switch(O=K,K=Aa()){case 40:if(O!=108&&mn(G,b-1)==58){mc(G+=nt(Ef(K),"&","&\f"),"&\f",Ub(y?h[y-1]:0))!=-1&&(Q=-1);break}case 34:case 39:case 91:G+=Ef(K);break;case 9:case 10:case 13:case 32:G+=UE(O);break;case 92:G+=IE(yc()-1,7);continue;case 47:switch(yi()){case 42:case 47:So(qE($E(Aa(),yc()),n,r,p),p);break;default:G+="/"}break;case 123*Z:h[y++]=Ba(G)*Q;case 125*Z:case 59:case 0:switch(K){case 0:case 125:$=0;case 59+v:Q==-1&&(G=nt(G,/\f/g,"")),E>0&&Ba(G)-b&&So(E>32?Av(G+";",s,r,b-1,p):Av(nt(G," ","")+";",s,r,b-2,p),p);break;case 59:G+=";";default:if(So(pe=jv(G,n,r,y,v,l,h,z,P=[],he=[],b,c),c),K===123)if(v===0)gc(G,n,pe,pe,P,c,b,h,he);else switch(S===99&&mn(G,3)===110?100:S){case 100:case 108:case 109:case 115:gc(a,pe,pe,s&&So(jv(a,pe,pe,0,0,l,h,z,l,P=[],b,he),he),l,he,b,h,s?P:he);break;default:gc(G,pe,pe,pe,[""],he,0,h,he)}}y=v=E=0,Z=Q=1,z=G="",b=d;break;case 58:b=1+Ba(G),E=O;default:if(Z<1){if(K==123)--Z;else if(K==125&&Z++==0&&zE()==125)continue}switch(G+=zh(K),K*Z){case 38:Q=v>0?1:(G+="\f",-1);break;case 44:h[y++]=(Ba(G)-1)*Q,Q=1;break;case 64:yi()===45&&(G+=Ef(Aa())),S=yi(),v=b=Ba(z=G+=HE(yc())),K++;break;case 45:O===45&&Ba(G)==2&&(Z=0)}}return c}function jv(a,n,r,s,l,c,d,h,p,y,v,b){for(var S=l-1,E=l===0?c:[""],O=$b(E),Z=0,$=0,Q=0;Z<s;++Z)for(var K=0,z=us(a,S+1,S=Ub($=d[Z])),P=a;K<O;++K)(P=Ib($>0?E[K]+" "+z:nt(z,/&\f/g,E[K])))&&(p[Q++]=P);return Ic(a,n,r,l===0?Bc:h,p,y,v,b)}function qE(a,n,r,s){return Ic(a,n,r,Lb,zh(RE()),us(a,2,-2),0,s)}function Av(a,n,r,s,l){return Ic(a,n,r,Rh,us(a,0,s),us(a,s+1,-1),s,l)}function Vb(a,n,r){switch(DE(a,n)){case 5103:return St+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return St+a+a;case 4789:return Oo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return St+a+Oo+a+Ut+a+a;case 5936:switch(mn(a,n+11)){case 114:return St+a+Ut+nt(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return St+a+Ut+nt(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return St+a+Ut+nt(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return St+a+Ut+a+a;case 6165:return St+a+Ut+"flex-"+a+a;case 5187:return St+a+nt(a,/(\w+).+(:[^]+)/,St+"box-$1$2"+Ut+"flex-$1$2")+a;case 5443:return St+a+Ut+"flex-item-"+nt(a,/flex-|-self/g,"")+(dr(a,/flex-|baseline/)?"":Ut+"grid-row-"+nt(a,/flex-|-self/g,""))+a;case 4675:return St+a+Ut+"flex-line-pack"+nt(a,/align-content|flex-|-self/g,"")+a;case 5548:return St+a+Ut+nt(a,"shrink","negative")+a;case 5292:return St+a+Ut+nt(a,"basis","preferred-size")+a;case 6060:return St+"box-"+nt(a,"-grow","")+St+a+Ut+nt(a,"grow","positive")+a;case 4554:return St+nt(a,/([^-])(transform)/g,"$1"+St+"$2")+a;case 6187:return nt(nt(nt(a,/(zoom-|grab)/,St+"$1"),/(image-set)/,St+"$1"),a,"")+a;case 5495:case 3959:return nt(a,/(image-set\([^]*)/,St+"$1$`$1");case 4968:return nt(nt(a,/(.+:)(flex-)?(.*)/,St+"box-pack:$3"+Ut+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+St+a+a;case 4200:if(!dr(a,/flex-|baseline/))return Ut+"grid-column-align"+us(a,n)+a;break;case 2592:case 3360:return Ut+nt(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return n=l,dr(s.props,/grid-\w+-end/)})?~mc(a+(r=r[n].value),"span",0)?a:Ut+nt(a,"-start","")+a+Ut+"grid-row-span:"+(~mc(r,"span",0)?dr(r,/\d+/):+dr(r,/\d+/)-+dr(a,/\d+/))+";":Ut+nt(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return dr(s.props,/grid-\w+-start/)})?a:Ut+nt(nt(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return nt(a,/(.+)-inline(.+)/,St+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ba(a)-1-n>6)switch(mn(a,n+1)){case 109:if(mn(a,n+4)!==45)break;case 102:return nt(a,/(.+:)(.+)-([^]+)/,"$1"+St+"$2-$3$1"+Oo+(mn(a,n+3)==108?"$3":"$2-$3"))+a;case 115:return~mc(a,"stretch",0)?Vb(nt(a,"stretch","fill-available"),n,r)+a:a}break;case 5152:case 5920:return nt(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,d,h,p,y){return Ut+l+":"+c+y+(d?Ut+l+"-span:"+(h?p:+p-+c)+y:"")+a});case 4949:if(mn(a,n+6)===121)return nt(a,":",":"+St)+a;break;case 6444:switch(mn(a,mn(a,14)===45?18:11)){case 120:return nt(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+St+(mn(a,14)===45?"inline-":"")+"box$3$1"+St+"$2$3$1"+Ut+"$2box$3")+a;case 100:return nt(a,":",":"+Ut)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return nt(a,"scroll-","scroll-snap-")+a}return a}function Nc(a,n){for(var r="",s=0;s<a.length;s++)r+=n(a[s],s,a,n)||"";return r}function GE(a,n,r,s){switch(a.type){case _E:if(a.children.length)break;case AE:case Rh:return a.return=a.return||a.value;case Lb:return"";case Bb:return a.return=a.value+"{"+Nc(a.children,s)+"}";case Bc:if(!Ba(a.value=a.props.join(",")))return""}return Ba(r=Nc(a.children,s))?a.return=a.value+"{"+r+"}":""}function YE(a){var n=$b(a);return function(r,s,l,c){for(var d="",h=0;h<n;h++)d+=a[h](r,s,l,c)||"";return d}}function PE(a){return function(n){n.root||(n=n.return)&&a(n)}}function FE(a,n,r,s){if(a.length>-1&&!a.return)switch(a.type){case Rh:a.return=Vb(a.value,a.length,r);return;case Bb:return Nc([$r(a,{value:nt(a.value,"@","@"+St)})],s);case Bc:if(a.length)return ME(r=a.props,function(l){switch(dr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":es($r(a,{props:[nt(l,/:(read-\w+)/,":"+Oo+"$1")]})),es($r(a,{props:[l]})),Zf(a,{props:Nv(r,s)});break;case"::placeholder":es($r(a,{props:[nt(l,/:(plac\w+)/,":"+St+"input-$1")]})),es($r(a,{props:[nt(l,/:(plac\w+)/,":"+Oo+"$1")]})),es($r(a,{props:[nt(l,/:(plac\w+)/,Ut+"input-$1")]})),es($r(a,{props:[l]})),Zf(a,{props:Nv(r,s)});break}return""})}}var ZE={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ea={},fs=typeof process<"u"&&ea!==void 0&&(ea.REACT_APP_SC_ATTR||ea.SC_ATTR)||"data-styled",qb="active",Gb="data-styled-version",Hc="6.1.19",Lh=`/*!sc*/
`,jc=typeof window<"u"&&typeof document<"u",XE=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ea!==void 0&&ea.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ea.REACT_APP_SC_DISABLE_SPEEDY!==""?ea.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ea.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ea!==void 0&&ea.SC_DISABLE_SPEEDY!==void 0&&ea.SC_DISABLE_SPEEDY!==""&&ea.SC_DISABLE_SPEEDY!=="false"&&ea.SC_DISABLE_SPEEDY),Vc=Object.freeze([]),hs=Object.freeze({});function KE(a,n,r){return r===void 0&&(r=hs),a.theme!==r.theme&&a.theme||n||r.theme}var Yb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),QE=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,JE=/(^-|-$)/g;function _v(a){return a.replace(QE,"-").replace(JE,"")}var WE=/(a)(d)/gi,nc=52,Dv=function(a){return String.fromCharCode(a+(a>25?39:97))};function Qf(a){var n,r="";for(n=Math.abs(a);n>nc;n=n/nc|0)r=Dv(n%nc)+r;return(Dv(n%nc)+r).replace(WE,"$1-$2")}var Cf,Pb=5381,is=function(a,n){for(var r=n.length;r;)a=33*a^n.charCodeAt(--r);return a},Fb=function(a){return is(Pb,a)};function e2(a){return Qf(Fb(a)>>>0)}function t2(a){return a.displayName||a.name||"Component"}function Tf(a){return typeof a=="string"&&!0}var Zb=typeof Symbol=="function"&&Symbol.for,Xb=Zb?Symbol.for("react.memo"):60115,n2=Zb?Symbol.for("react.forward_ref"):60112,a2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r2={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Kb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i2=((Cf={})[n2]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Cf[Xb]=Kb,Cf);function Mv(a){return("type"in(n=a)&&n.type.$$typeof)===Xb?Kb:"$$typeof"in a?i2[a.$$typeof]:a2;var n}var s2=Object.defineProperty,o2=Object.getOwnPropertyNames,Rv=Object.getOwnPropertySymbols,l2=Object.getOwnPropertyDescriptor,c2=Object.getPrototypeOf,zv=Object.prototype;function Qb(a,n,r){if(typeof n!="string"){if(zv){var s=c2(n);s&&s!==zv&&Qb(a,s,r)}var l=o2(n);Rv&&(l=l.concat(Rv(n)));for(var c=Mv(a),d=Mv(n),h=0;h<l.length;++h){var p=l[h];if(!(p in r2||r&&r[p]||d&&p in d||c&&p in c)){var y=l2(n,p);try{s2(a,p,y)}catch{}}}}return a}function ps(a){return typeof a=="function"}function Bh(a){return typeof a=="object"&&"styledComponentId"in a}function hi(a,n){return a&&n?"".concat(a," ").concat(n):a||n||""}function Lv(a,n){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Mo(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function Jf(a,n,r){if(r===void 0&&(r=!1),!r&&!Mo(a)&&!Array.isArray(a))return n;if(Array.isArray(n))for(var s=0;s<n.length;s++)a[s]=Jf(a[s],n[s]);else if(Mo(n))for(var s in n)a[s]=Jf(a[s],n[s]);return a}function Uh(a,n){Object.defineProperty(a,"toString",{value:n})}function Lo(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var u2=(function(){function a(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return a.prototype.indexOfGroup=function(n){for(var r=0,s=0;s<n;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;n>=c;)if((c<<=1)<0)throw Lo(16,"".concat(n));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var d=l;d<c;d++)this.groupSizes[d]=0}for(var h=this.indexOfGroup(n+1),p=(d=0,r.length);d<p;d++)this.tag.insertRule(h,r[d])&&(this.groupSizes[n]++,h++)},a.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],s=this.indexOfGroup(n),l=s+r;this.groupSizes[n]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var s=this.groupSizes[n],l=this.indexOfGroup(n),c=l+s,d=l;d<c;d++)r+="".concat(this.tag.getRule(d)).concat(Lh);return r},a})(),vc=new Map,Ac=new Map,bc=1,ac=function(a){if(vc.has(a))return vc.get(a);for(;Ac.has(bc);)bc++;var n=bc++;return vc.set(a,n),Ac.set(n,a),n},d2=function(a,n){bc=n+1,vc.set(a,n),Ac.set(n,a)},f2="style[".concat(fs,"][").concat(Gb,'="').concat(Hc,'"]'),h2=new RegExp("^".concat(fs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),p2=function(a,n,r){for(var s,l=r.split(","),c=0,d=l.length;c<d;c++)(s=l[c])&&a.registerName(n,s)},m2=function(a,n){for(var r,s=((r=n.textContent)!==null&&r!==void 0?r:"").split(Lh),l=[],c=0,d=s.length;c<d;c++){var h=s[c].trim();if(h){var p=h.match(h2);if(p){var y=0|parseInt(p[1],10),v=p[2];y!==0&&(d2(v,y),p2(a,v,p[3]),a.getTag().insertRules(y,l)),l.length=0}else l.push(h)}}},Bv=function(a){for(var n=document.querySelectorAll(f2),r=0,s=n.length;r<s;r++){var l=n[r];l&&l.getAttribute(fs)!==qb&&(m2(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function y2(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Jb=function(a){var n=document.head,r=a||n,s=document.createElement("style"),l=(function(h){var p=Array.from(h.querySelectorAll("style[".concat(fs,"]")));return p[p.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(fs,qb),s.setAttribute(Gb,Hc);var d=y2();return d&&s.setAttribute("nonce",d),r.insertBefore(s,c),s},g2=(function(){function a(n){this.element=Jb(n),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var d=s[l];if(d.ownerNode===r)return d}throw Lo(17)})(this.element),this.length=0}return a.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},a.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},a})(),v2=(function(){function a(n){this.element=Jb(n),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[n]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},a.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},a})(),b2=(function(){function a(n){this.rules=[],this.length=0}return a.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},a.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},a.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},a})(),Uv=jc,w2={isServer:!jc,useCSSOMInjection:!XE},Wb=(function(){function a(n,r,s){n===void 0&&(n=hs),r===void 0&&(r={});var l=this;this.options=Gn(Gn({},w2),n),this.gs=r,this.names=new Map(s),this.server=!!n.isServer,!this.server&&jc&&Uv&&(Uv=!1,Bv(this)),Uh(this,function(){return(function(c){for(var d=c.getTag(),h=d.length,p="",y=function(b){var S=(function(Q){return Ac.get(Q)})(b);if(S===void 0)return"continue";var E=c.names.get(S),O=d.getGroup(b);if(E===void 0||!E.size||O.length===0)return"continue";var Z="".concat(fs,".g").concat(b,'[id="').concat(S,'"]'),$="";E!==void 0&&E.forEach(function(Q){Q.length>0&&($+="".concat(Q,","))}),p+="".concat(O).concat(Z,'{content:"').concat($,'"}').concat(Lh)},v=0;v<h;v++)y(v);return p})(l)})}return a.registerId=function(n){return ac(n)},a.prototype.rehydrate=function(){!this.server&&jc&&Bv(this)},a.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new a(Gn(Gn({},this.options),n),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(n=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new b2(l):s?new g2(l):new v2(l)})(this.options),new u2(n)));var n},a.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},a.prototype.registerName=function(n,r){if(ac(n),this.names.has(n))this.names.get(n).add(r);else{var s=new Set;s.add(r),this.names.set(n,s)}},a.prototype.insertRules=function(n,r,s){this.registerName(n,r),this.getTag().insertRules(ac(n),s)},a.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},a.prototype.clearRules=function(n){this.getTag().clearGroup(ac(n)),this.clearNames(n)},a.prototype.clearTag=function(){this.tag=void 0},a})(),S2=/&/g,x2=/^\s*\/\/.*$/gm;function e1(a,n){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(s){return"".concat(n," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=e1(r.children,n)),r})}function k2(a){var n,r,s,l=hs,c=l.options,d=c===void 0?hs:c,h=l.plugins,p=h===void 0?Vc:h,y=function(S,E,O){return O.startsWith(r)&&O.endsWith(r)&&O.replaceAll(r,"").length>0?".".concat(n):S},v=p.slice();v.push(function(S){S.type===Bc&&S.value.includes("&")&&(S.props[0]=S.props[0].replace(S2,r).replace(s,y))}),d.prefix&&v.push(FE),v.push(GE);var b=function(S,E,O,Z){E===void 0&&(E=""),O===void 0&&(O=""),Z===void 0&&(Z="&"),n=Z,r=E,s=new RegExp("\\".concat(r,"\\b"),"g");var $=S.replace(x2,""),Q=VE(O||E?"".concat(O," ").concat(E," { ").concat($," }"):$);d.namespace&&(Q=e1(Q,d.namespace));var K=[];return Nc(Q,YE(v.concat(PE(function(z){return K.push(z)})))),K};return b.hash=p.length?p.reduce(function(S,E){return E.name||Lo(15),is(S,E.name)},Pb).toString():"",b}var E2=new Wb,Wf=k2(),t1=_a.createContext({shouldForwardProp:void 0,styleSheet:E2,stylis:Wf});t1.Consumer;_a.createContext(void 0);function Iv(){return k.useContext(t1)}var C2=(function(){function a(n,r){var s=this;this.inject=function(l,c){c===void 0&&(c=Wf);var d=s.name+c.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,c(s.rules,d,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Uh(this,function(){throw Lo(12,String(s.name))})}return a.prototype.getName=function(n){return n===void 0&&(n=Wf),this.name+n.hash},a})(),T2=function(a){return a>="A"&&a<="Z"};function $v(a){for(var n="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;T2(s)?n+="-"+s.toLowerCase():n+=s}return n.startsWith("ms-")?"-"+n:n}var n1=function(a){return a==null||a===!1||a===""},a1=function(a){var n,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!n1(c)&&(Array.isArray(c)&&c.isCss||ps(c)?s.push("".concat($v(l),":"),c,";"):Mo(c)?s.push.apply(s,Oc(Oc(["".concat(l," {")],a1(c),!1),["}"],!1)):s.push("".concat($v(l),": ").concat((n=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in ZE||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function gi(a,n,r,s){if(n1(a))return[];if(Bh(a))return[".".concat(a.styledComponentId)];if(ps(a)){if(!ps(c=a)||c.prototype&&c.prototype.isReactComponent||!n)return[a];var l=a(n);return gi(l,n,r,s)}var c;return a instanceof C2?r?(a.inject(r,s),[a.getName(s)]):[a]:Mo(a)?a1(a):Array.isArray(a)?Array.prototype.concat.apply(Vc,a.map(function(d){return gi(d,n,r,s)})):[a.toString()]}function O2(a){for(var n=0;n<a.length;n+=1){var r=a[n];if(ps(r)&&!Bh(r))return!1}return!0}var N2=Fb(Hc),j2=(function(){function a(n,r,s){this.rules=n,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&O2(n),this.componentId=r,this.baseHash=is(N2,r),this.baseStyle=s,Wb.registerId(r)}return a.prototype.generateAndInjectStyles=function(n,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=hi(l,this.staticRulesId);else{var c=Lv(gi(this.rules,n,r,s)),d=Qf(is(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,d)){var h=s(c,".".concat(d),void 0,this.componentId);r.insertRules(this.componentId,d,h)}l=hi(l,d),this.staticRulesId=d}else{for(var p=is(this.baseHash,s.hash),y="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")y+=b;else if(b){var S=Lv(gi(b,n,r,s));p=is(p,S+v),y+=S}}if(y){var E=Qf(p>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,s(y,".".concat(E),void 0,this.componentId)),l=hi(l,E)}}return l},a})(),r1=_a.createContext(void 0);r1.Consumer;var Of={};function A2(a,n,r){var s=Bh(a),l=a,c=!Tf(a),d=n.attrs,h=d===void 0?Vc:d,p=n.componentId,y=p===void 0?(function(P,he){var pe=typeof P!="string"?"sc":_v(P);Of[pe]=(Of[pe]||0)+1;var G="".concat(pe,"-").concat(e2(Hc+pe+Of[pe]));return he?"".concat(he,"-").concat(G):G})(n.displayName,n.parentComponentId):p,v=n.displayName,b=v===void 0?(function(P){return Tf(P)?"styled.".concat(P):"Styled(".concat(t2(P),")")})(a):v,S=n.displayName&&n.componentId?"".concat(_v(n.displayName),"-").concat(n.componentId):n.componentId||y,E=s&&l.attrs?l.attrs.concat(h).filter(Boolean):h,O=n.shouldForwardProp;if(s&&l.shouldForwardProp){var Z=l.shouldForwardProp;if(n.shouldForwardProp){var $=n.shouldForwardProp;O=function(P,he){return Z(P,he)&&$(P,he)}}else O=Z}var Q=new j2(r,S,s?l.componentStyle:void 0);function K(P,he){return(function(pe,G,ue){var te=pe.attrs,Y=pe.componentStyle,fe=pe.defaultProps,Ne=pe.foldedComponentIds,Re=pe.styledComponentId,$e=pe.target,qe=_a.useContext(r1),I=Iv(),re=pe.shouldForwardProp||I.shouldForwardProp,ve=KE(G,qe,fe)||hs,ze=(function(le,ye,je){for(var Qe,Ze=Gn(Gn({},ye),{className:void 0,theme:je}),Mt=0;Mt<le.length;Mt+=1){var It=ps(Qe=le[Mt])?Qe(Ze):Qe;for(var At in It)Ze[At]=At==="className"?hi(Ze[At],It[At]):At==="style"?Gn(Gn({},Ze[At]),It[At]):It[At]}return ye.className&&(Ze.className=hi(Ze.className,ye.className)),Ze})(te,G,ve),H=ze.as||$e,x={};for(var L in ze)ze[L]===void 0||L[0]==="$"||L==="as"||L==="theme"&&ze.theme===ve||(L==="forwardedAs"?x.as=ze.forwardedAs:re&&!re(L,H)||(x[L]=ze[L]));var N=(function(le,ye){var je=Iv(),Qe=le.generateAndInjectStyles(ye,je.styleSheet,je.stylis);return Qe})(Y,ze),M=hi(Ne,Re);return N&&(M+=" "+N),ze.className&&(M+=" "+ze.className),x[Tf(H)&&!Yb.has(H)?"class":"className"]=M,ue&&(x.ref=ue),k.createElement(H,x)})(z,P,he)}K.displayName=b;var z=_a.forwardRef(K);return z.attrs=E,z.componentStyle=Q,z.displayName=b,z.shouldForwardProp=O,z.foldedComponentIds=s?hi(l.foldedComponentIds,l.styledComponentId):"",z.styledComponentId=S,z.target=s?l.target:a,Object.defineProperty(z,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(P){this._foldedDefaultProps=s?(function(he){for(var pe=[],G=1;G<arguments.length;G++)pe[G-1]=arguments[G];for(var ue=0,te=pe;ue<te.length;ue++)Jf(he,te[ue],!0);return he})({},l.defaultProps,P):P}}),Uh(z,function(){return".".concat(z.styledComponentId)}),c&&Qb(z,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),z}function Hv(a,n){for(var r=[a[0]],s=0,l=n.length;s<l;s+=1)r.push(n[s],a[s+1]);return r}var Vv=function(a){return Object.assign(a,{isCss:!0})};function Ih(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(ps(a)||Mo(a))return Vv(gi(Hv(Vc,Oc([a],n,!0))));var s=a;return n.length===0&&s.length===1&&typeof s[0]=="string"?gi(s):Vv(gi(Hv(s,n)))}function eh(a,n,r){if(r===void 0&&(r=hs),!n)throw Lo(1,n);var s=function(l){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return a(n,r,Ih.apply(void 0,Oc([l],c,!1)))};return s.attrs=function(l){return eh(a,n,Gn(Gn({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return eh(a,n,Gn(Gn({},r),l))},s}var i1=function(a){return eh(A2,a)},An=i1;Yb.forEach(function(a){An[a]=i1(a)});function vi(){return vi=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},vi.apply(null,arguments)}function _2(a,n){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(n.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function $h(a,n){if(a==null)return{};var r,s,l=_2(a,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function D2(a){var n=a?.createRoot,r=new WeakMap;function s(d){var h=r.get(d);if(h)return h;var p=document.createElement("span");return d.appendChild(p),r.set(d,p),p}function l(d){var h=r.get(d);h&&(h.remove(),r.delete(d))}if(n){var c=new WeakMap;return{mount:function(h,p){var y,v=s(p),b=c.get(v);return b||(b=n(v),c.set(v,b)),b.render(h),(y=v.firstElementChild)!==null&&y!==void 0?y:v},unmount:function(h){var p=s(h),y=c.get(p);y&&(y.unmount(),c.delete(p)),l(h)}}}return{mount:function(h,p){var y=s(p);if("render"in Wg&&typeof qr.render=="function"){var v=qr.render(h,y);return v||y}throw new Error("ReactDOM.render is not available")},unmount:function(h){var p=s(h);if("unmountComponentAtNode"in Wg&&typeof qr.unmountComponentAtNode=="function")qr.unmountComponentAtNode(p);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(h)}}}function M2(a){var n=a.children,r=a.rendered;return k.useEffect(function(){r()}),n}function R2(){var a=k.useRef(!1);return k.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){qr.flushSync(r)}):r()}}}var s1=k.createContext({start:null,end:null,path:null});function z2(a){var n=a.children,r=k.useState(null),s=Rn(r,2),l=s[0],c=s[1],d=k.useState(null),h=Rn(d,2),p=h[0],y=h[1],v=k.useState(null),b=Rn(v,2),S=b[0],E=b[1],O="x"in a.start?a.start:l,Z="x"in a.end?a.end:p,$=R2();return k.useEffect(function(){var Q=typeof a.start=="function"&&a.start(function(z){$.apply(function(){c(z)})}),K=typeof a.end=="function"&&a.end(function(z){$.apply(function(){y(z)})});return function(){Q&&Q(),K&&K()}},[]),k.useEffect(function(){O&&Z&&a.path(O,Z).then(function(Q){$.apply(function(){E(Q)})})},[O,Z]),k.createElement(s1.Provider,{value:{start:O,end:Z,path:S}},n)}function o1(){return k.useContext(s1)}var qv,Gv,L2=An.svg(qv||(qv=xn([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),B2=An.path(Gv||(Gv=xn([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function l1(a){var n=o1(),r=n.path;return r?k.createElement(L2,{"data-testid":"connection"},k.createElement(B2,{styles:a.styles,d:r})):null}function U2(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=I2(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function I2(a,n){if(a){if(typeof a=="string")return Yv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yv(a,n):void 0}}function Yv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function $2(a){for(var n=new a.constructor(a.type),r=n;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=U2(s),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,h=n[d];typeof h!="function"&&Object.defineProperty(n,d,{value:a[d]})}}catch(p){l.e(p)}finally{l.f()}}return n}var H2="__reactContainer$";function V2(a){for(var n=a;n;){if(n._reactRootContainer||Object.keys(n).some(function(r){return r.startsWith(H2)}))return n;n=n.parentElement}}function Pv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Fv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Pv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Pv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function c1(a,n){return{start:function(s){var l=Fv({},n(s));function c(h){var p=Fv({},n(h)),y=p.x-l.x,v=p.y-l.y;l=p,a(y,v)}function d(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d)}}}function q2(a,n){k.useEffect(function(){var r=function(c){if(!n){var d=V2(c.target),h=k.version.startsWith("16")?document:d;h&&(c.stopPropagation(),h.dispatchEvent($2(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,n])}var Zv,G2=An.input(Zv||(Zv=xn([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function th(a){var n=k.useState(a.data.value),r=Rn(n,2),s=r[0],l=r[1],c=k.useRef(null);return q2(c),k.useEffect(function(){l(a.data.value)},[a.data.value]),k.createElement(G2,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(h){var p=a.data.type==="number"?+h.target.value:h.target.value;l(p),a.data.setValue(p)},styles:a.styles})}var nh="rgba(110,136,255,0.8)",u1="#ffd92c",Ua=24,fr=6,d1="#96b38a",f1=180,Y2=Object.freeze({__proto__:null,$nodecolor:nh,$nodecolorselected:u1,$socketsize:Ua,$socketmargin:fr,$socketcolor:d1,$nodewidth:f1}),P2=["init","unmount"];function Hh(a){var n=a.init,r=a.unmount,s=$h(a,P2),l=k.useRef(null);return k.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),k.useEffect(function(){l.current&&n(l.current)}),k.createElement("span",vi({},s,{ref:l}))}var F2=["name","emit","payload"];function ah(a){var n=a.name,r=a.emit,s=a.payload,l=$h(a,F2);return k.createElement(Hh,vi({},l,{className:n,init:function(d){r({type:"render",data:{type:"control",element:d,payload:s}})},unmount:function(d){r({type:"unmount",data:{element:d}})}}))}var Z2=["name","emit","nodeId","side","socketKey","payload"];function rh(a){var n=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,d=a.payload,h=$h(a,Z2);return k.createElement(Hh,vi({},h,{className:n,init:function(y){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:y,payload:d}})},unmount:function(y){r({type:"unmount",data:{element:y}})}}))}var Xv,Kv,h1=An.div(Xv||(Xv=xn([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),nh,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(f1,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},nh,function(a){return a.selected&&Ih(Kv||(Kv=xn([`
        background: `,`;
        border-color: #e3c000;
    `])),u1)},Ua/2+fr,Ua/2+fr,fr,Ua,Ua+2*fr,fr,Ua/2+fr,function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function Nf(a){a.sort(function(n,r){var s,l,c=((s=n[1])===null||s===void 0?void 0:s.index)||0,d=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-d})}function p1(a){var n=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,d=c.id,h=c.label,p=c.width,y=c.height;return Nf(n),Nf(r),Nf(s),k.createElement(h1,{selected:l,width:p,height:y,styles:a.styles,"data-testid":"node"},k.createElement("div",{className:"title","data-testid":"title"},h),r.map(function(v){var b=Rn(v,2),S=b[0],E=b[1];return E&&k.createElement("div",{className:"output",key:S,"data-testid":"output-".concat(S)},k.createElement("div",{className:"output-title","data-testid":"output-title"},E.label),k.createElement(rh,{name:"output-socket",side:"output",socketKey:S,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"output-socket"}))}),s.map(function(v){var b=Rn(v,2),S=b[0],E=b[1];return E?k.createElement(ah,{key:S,name:"control",emit:a.emit,payload:E,"data-testid":"control-".concat(S)}):null}),n.map(function(v){var b=Rn(v,2),S=b[0],E=b[1];return E&&k.createElement("div",{className:"input",key:S,"data-testid":"input-".concat(S)},k.createElement(rh,{name:"input-socket",side:"input",socketKey:S,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"input-socket"}),E&&(!E.control||!E.showControl)&&k.createElement("div",{className:"input-title","data-testid":"input-title"},E.label),E.control&&E.showControl&&k.createElement(ah,{key:S,name:"input-control",emit:a.emit,payload:E.control,"data-testid":"input-control"}))}))}var Qv,Jv,m1=An.div(Qv||(Qv=xn([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),Ua/2,Ua,Ua,d1),X2=An.div(Jv||(Jv=xn([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(Ua+fr*2)/2,fr,m1);function y1(a){return k.createElement(X2,null,k.createElement(m1,{title:a.data.name}))}function K2(a){var n=typeof a?.socketPositionWatcher>"u"?jE():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,d=r.control;return{attach:function(p){n.attach(p)},render:function(p,y){if(p.data.type==="node"){var v=y.parentScope(),b=s?s(p.data):p1;return b&&k.createElement(b,{data:p.data.payload,emit:function(he){return void v.emit(he)}})}else if(p.data.type==="connection"){var S=l?l(p.data):l1,E=p.data.payload,O=E.sourceOutput,Z=E.targetInput,$=E.source,Q=E.target;return S&&k.createElement(z2,{start:p.data.start||function(P){return n.listen($,"output",O,P)},end:p.data.end||function(P){return n.listen(Q,"input",Z,P)},path:(function(){var P=at(Se.mark(function he(pe,G){var ue,te,Y,fe,Ne;return Se.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=1,y.emit({type:"connectionpath",data:{payload:E,points:[pe,G]}});case 1:if(ue=Re.sent,ue){Re.next=2;break}return Re.abrupt("return","");case 2:if(te=ue.data,Y=te.path,fe=te.points,Ne=.3,!(!Y&&fe.length!==2)){Re.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(Y){Re.next=4;break}return Re.abrupt("return",E.isLoop?xE(fe,Ne,120):SE(fe,Ne));case 4:return Re.abrupt("return",Y);case 5:case"end":return Re.stop()}},he)}));return function(he,pe){return P.apply(this,arguments)}})()},k.createElement(S,{data:p.data.payload}))}else if(p.data.type==="socket"){var K=c?c(p.data):y1;return K&&p.data.payload&&k.createElement(K,{data:p.data.payload})}else if(p.data.type==="control"){var z=d&&p.data.payload?d(p.data):p.data.payload instanceof Gt.InputControl?th:null;return z&&k.createElement(z,{data:p.data.payload})}}}}var Q2=Object.freeze({__proto__:null,vars:Y2,setup:K2,Connection:l1,useConnection:o1,Control:th,InputControl:th,Node:p1,NodeStyles:h1,RefControl:ah,RefSocket:rh,Socket:y1});function g1(a,n){var r=k.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},n)};return k.useEffect(function(){return s},[]),[l,s]}var J2="rgba(110,136,255,0.8)",W2="rgba(130, 153, 255, 0.8)",eC="rgba(69, 103, 255, 0.8)",rc="5px",ih=120,Wv,Vh=An.div(Wv||(Wv=xn([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),eC,J2,rc,rc,rc,rc,W2),e0,t0,n0,v1=An(Vh)(e0||(e0=xn([`
    `,`
`])),function(a){return a.hasSubitems&&Ih(t0||(t0=xn([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),b1=An.div(n0||(n0=xn([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),ih);function w1(a){var n,r,s,l,c=k.useState(!1),d=Rn(c,2),h=d[0],p=d[1],y=k.useCallback(function(){p(!1)},[p]),v=g1(y,a.delay),b=Rn(v,2),S=b[0],E=b[1],O=((n=a.components)===null||n===void 0||(r=n.item)===null||r===void 0?void 0:r.call(n,a.data))||v1,Z=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||b1;return k.createElement(O,{onClick:function(Q){Q.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(Q){Q.stopPropagation()},onPointerOver:function(){E(),p(!0)},onPointerLeave:function(){S&&S()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&h&&k.createElement(Z,null,a.data.subitems.map(function($){return k.createElement(w1,{key:$.key,data:$,delay:a.delay,hide:a.hide,components:a.components},$.label)})))}var a0,S1=An.input(a0||(a0=xn([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function tC(a){var n=a.component||S1;return k.createElement(n,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var r0,x1=An.div(r0||(r0=xn([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),ih,ih/2);function nC(a){var n,r,s,l,c,d,h=g1(a.onHide,a.delay),p=Rn(h,2),y=p[0],v=p[1],b=k.useState(""),S=Rn(b,2),E=S[0],O=S[1],Z=new RegExp(E,"i"),$=a.items.filter(function(z){return z.label.match(Z)}),Q=((n=a.components)===null||n===void 0||(r=n.main)===null||r===void 0?void 0:r.call(n))||x1,K=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||Vh;return k.createElement(Q,{onMouseOver:function(){v()},onMouseLeave:function(){y?.()},onWheel:function(P){P.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&k.createElement(K,null,k.createElement(tC,{value:E,onChange:O,component:(c=a.components)===null||c===void 0||(d=c.search)===null||d===void 0?void 0:d.call(c)})),$.map(function(z){return k.createElement(w1,{key:z.key,data:z,delay:a.delay,hide:a.onHide,components:a.components},z.label)}))}function aC(a){var n=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return k.createElement(nC,{items:s.data.items,delay:n,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var rC=Object.freeze({__proto__:null,setup:aC,Item:v1,Subitems:b1,Menu:x1,Search:S1,Common:Vh}),ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iC=typeof ic=="object"&&ic&&ic.Object===Object&&ic,sC=typeof self=="object"&&self&&self.Object===Object&&self;iC||sC||Function("return this")();function oC(){const a=k.useRef(!1);return k.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),k.useCallback(()=>a.current,[])}var i0={width:void 0,height:void 0};function lC(a){const{ref:n,box:r="content-box"}=a,[{width:s,height:l},c]=k.useState(i0),d=oC(),h=k.useRef({...i0}),p=k.useRef(void 0);return p.current=a.onResize,k.useEffect(()=>{if(!n.current||typeof window>"u"||!("ResizeObserver"in window))return;const y=new ResizeObserver(([v])=>{const b=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",S=s0(v,b,"inlineSize"),E=s0(v,b,"blockSize");if(h.current.width!==S||h.current.height!==E){const Z={width:S,height:E};h.current.width=S,h.current.height=E,p.current?p.current(Z):d()&&c(Z)}});return y.observe(n.current,{box:r}),()=>{y.disconnect()}},[r,n,d]),{width:s,height:l}}function s0(a,n,r){return a[n]?Array.isArray(a[n])?a[n][0][r]:a[n][r]:n==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function Ia(a){return"".concat(a,"px")}var o0,cC=An.div(o0||(o0=xn([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function uC(a){return k.createElement(cC,{style:{left:Ia(a.left),top:Ia(a.top),width:Ia(a.width),height:Ia(a.height)},"data-testid":"minimap-node"})}var l0,dC=An.div(l0||(l0=xn([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function fC(a){var n=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=c1(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return k.createElement(dC,{onPointerDown:s.start,style:{left:Ia(n(a.left)),top:Ia(n(a.top)),width:Ia(n(a.width)),height:Ia(n(a.height))},"data-testid":"minimap-viewport"})}var c0,hC=An.div(c0||(c0=xn([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function pC(a){var n,r=k.useRef(null),s=lC({ref:r}),l=s.width,c=l===void 0?0:l,d=((n=r.current)===null||n===void 0?void 0:n.clientWidth)||c,h=k.useCallback(function(p){return p*d},[d]);return k.createElement(hC,{size:a.size,style:{width:Ia(a.size*a.ratio),height:Ia(a.size)},onPointerDown:function(y){y.stopPropagation(),y.preventDefault()},onDoubleClick:function(y){if(y.stopPropagation(),y.preventDefault(),!!r.current){var v=r.current.getBoundingClientRect(),b=(y.clientX-v.left)/(a.size*a.ratio),S=(y.clientY-v.top)/(a.size*a.ratio);a.point(b,S)}},ref:r,"data-testid":"minimap"},d?a.nodes.map(function(p,y){return k.createElement(uC,{key:y,left:h(p.left),top:h(p.top),width:h(p.width),height:h(p.height)})}):null,k.createElement(fC,vi({},a.viewport,{start:a.start,containerWidth:d,translate:a.translate})))}function mC(a){return{render:function(r){if(r.data.type==="minimap")return k.createElement(pC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var yC=Object.freeze({__proto__:null,setup:mC}),u0,No=20,gC=An.div(u0||(u0=xn([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),No,No,function(a){return a.selected?"#ffd92c":"steelblue"},No);function vC(a){var n=c1(function(c,d){a.translate(c,d)},a.pointer),r=a.position,s=r.x,l=r.y;return k.createElement(gC,{onPointerDown:function(d){d.stopPropagation(),d.preventDefault(),n.start(d),a.pointerdown()},onContextMenu:function(d){d.stopPropagation(),d.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-No/2,"px"),left:"".concat(s-No/2,"px")},"data-testid":"pin"})}function bC(a){function n(r,s){return k.createElement(k.Fragment,null,r.pins.map(function(l){return k.createElement(vC,vi({},l,{key:l.id,contextMenu:function(){var d;a==null||(d=a.contextMenu)===null||d===void 0||d.call(a,l.id)},translate:function(d,h){var p;a==null||(p=a.translate)===null||p===void 0||p.call(a,l.id,d,h)},pointerdown:function(){var d;a==null||(d=a.pointerdown)===null||d===void 0||d.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,d=l.parentScope(zo);if(c.type==="reroute-pins")return n(c.data,function(){return d.area.pointer})}}}var wC=Object.freeze({__proto__:null,setup:bC}),jf=Object.freeze({__proto__:null,classic:Q2,contextMenu:rC,minimap:yC,reroute:wC});function SC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=xC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function xC(a,n){if(a){if(typeof a=="string")return d0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d0(a,n):void 0}}function d0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function f0(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function sc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?f0(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):f0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function kC(a,n,r){return n=Dt(n),qa(a,k1()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function k1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k1=function(){return!!a})()}function EC(a,n,r,s){var l=Do(Dt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var CC=(function(a){function n(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l[0];return ct(this,n),r=kC(this,n,["react-render"]),Be(r,"presets",[]),r.renderer=D2({createRoot:d?.createRoot}),r.addPipe(function(h){if(!h||Sn(h)!=="object"||!("type"in h))return h;if(h.type==="unmount")r.unmount(h.data.element);else if(h.type==="render"){if("filled"in h.data&&h.data.filled)return h;if(r.mount(h.data.element,h))return sc(sc({},h),{},{data:sc(sc({},h.data),{},{filled:!0})})}return h}),r}return Yn(n,a),ut(n,[{key:"setParent",value:function(s){var l=this;EC(n,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),d=SC(this.presets),h;try{for(d.s();!(h=d.n()).done;){var p=h.value,y=p.render(l,this);if(y){var v=k.createElement(M2,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},y);return this.renderer.mount(v,s),!0}}}catch(b){d.e(b)}finally{d.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(ys);function TC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function E1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E1=function(){return!!a})()}function OC(a,n,r){if(E1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,n);var l=new(a.bind.apply(a,s));return r&&_o(l,r.prototype),l}function sh(a){var n=typeof Map=="function"?new Map:void 0;return sh=function(s){if(s===null||!TC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(s))return n.get(s);n.set(s,l)}function l(){return OC(s,arguments,Dt(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),_o(l,s)},sh(a)}function NC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=jC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function jC(a,n){if(a){if(typeof a=="string")return h0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h0(a,n):void 0}}function h0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}var AC=(function(){function a(n){ct(this,a),Be(this,"setups",new Map),this.editor=n}return ut(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var n=at(Se.mark(function s(l){var c=this,d,h,p,y,v,b,S,E,O,Z,$,Q;return Se.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(d=this.setups.get(l),d){z.next=3;break}throw new Error("node is not initialized");case 3:return h=d.inputs(),p=this.editor.getConnections().filter(function(P){return P.target===l&&h.includes(P.targetInput)}),y={},z.next=8,Promise.all(p.map((function(){var P=at(Se.mark(function he(pe){return Se.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.t0=pe,ue.next=3,c.fetch(pe.source);case 3:return ue.t1=ue.sent,ue.abrupt("return",{c:ue.t0,sourceData:ue.t1});case 5:case"end":return ue.stop()}},he)}));return function(he){return P.apply(this,arguments)}})()));case 8:v=z.sent,b=NC(v);try{for(b.s();!(S=b.n()).done;)E=S.value,O=E.c,Z=E.sourceData,$=y[O.targetInput]?y[O.targetInput]:[],Q=y,Q[O.targetInput]=[].concat(gs($),[Z[O.sourceOutput]])}catch(P){b.e(P)}finally{b.f()}return z.abrupt("return",y);case 12:case"end":return z.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var n=at(Se.mark(function s(l){var c=this,d,h,p,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=this.setups.get(l),d){b.next=3;break}throw new Error("node is not initialized");case 3:return h=d.outputs(),b.next=6,d.data(function(){return c.fetchInputs(l)});case 6:if(p=b.sent,y=Object.keys(p),h.every(function(S){return y.includes(S)})){b.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(h.join('", "'),'". Got "').concat(y.join('", "'),'"'));case 10:return b.abrupt("return",p);case 11:case"end":return b.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()}])})(),_C=(function(){function a(n){ct(this,a),Be(this,"cache",new Map),this.onDelete=n}return ut(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function DC(a,n,r){return n=Dt(n),qa(a,C1()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function C1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C1=function(){return!!a})()}var p0=(function(a){function n(){return ct(this,n),DC(this,n,["cancelled"])}return Yn(n,a),ut(n)})(sh(Error));function MC(){var a=!1;function n(p){if(a)throw new p0;return p}for(var r,s=new Promise(function(p,y){r=y,p()}),l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=c.reduce(function(p,y){var v=p.then(y).then(n);return v},s);return h.cancel=function(){a||r(new p0),a=!0},h}function RC(a,n,r){return n=Dt(n),qa(a,T1()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function T1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T1=function(){return!!a})()}function zC(a,n,r,s){var l=Do(Dt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var LC=(function(a){function n(r){var s;return ct(this,n),s=RC(this,n,["dataflow-engine"]),Be(s,"cache",new _C(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return Yn(n,a),ut(n,[{key:"setParent",value:function(s){zC(n,"setParent",this)([s]),this.editor=this.parentScope(Fr),this.dataflow=new AC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var d=at(Se.mark(function p(y){var v,b;return Se.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(v=l.cache.get(s.id),!v){E.next=3;break}return E.abrupt("return",v);case 3:return b=MC(function(){return y()},function(O){return s.data(O)}),l.cache.add(s.id,b),E.abrupt("return",b);case 6:case"end":return E.stop()}},p)}));function h(p){return d.apply(this,arguments)}return h})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var d=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(h){return h.source===s&&d.includes(h.sourceOutput)}).forEach(function(h){l.reset(h.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=at(Se.mark(function l(c){var d;return Se.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=Sn(c)==="object"?c.id:c,p.abrupt("return",this.getDataflow().fetchInputs(d));case 2:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=at(Se.mark(function l(c){var d;return Se.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=Sn(c)==="object"?c.id:c,p.abrupt("return",this.getDataflow().fetch(d));case 2:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(ys);const BC=!1,qh=(...a)=>BC,m0=Gt.Socket.canConnect;Gt.Socket.canConnect=function(a,n){return qh(`[Socket Check] ${a.name} <-> ${n.name}`),m0&&m0(a,n)||a.name==="any"||n.name==="any"?!0:a.name===n.name};Gt.Socket.prototype.canConnectTo=function(a){return qh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Gt.Socket.canConnect(this,a)};const O1={boolean:new Gt.Socket("boolean"),number:new Gt.Socket("number"),object:new Gt.Socket("object"),lightInfo:new Gt.Socket("light_info"),any:new Gt.Socket("any")};Object.values(O1).forEach(a=>{a.canConnectTo=function(n){return qh(`[Socket Instance Direct] ${this.name} -> ${n.name}`),this.name===n.name||this.name==="any"||n.name==="any"}});let vo=null;function qc(){if(vo!==null)return vo;const n=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return n?vo=n[1]:vo="",vo}function qn(a){const n=qc(),r=a.startsWith("/")?a:"/"+a;return n+r}qc();const pi="t2app-pin",_c="t2app-pin-remember",N1=(a,n)=>{try{return a.getItem(n)}catch{return null}},oc=(a,n,r)=>{try{return a.setItem(n,r),!0}catch{return!1}},jo=(a,n)=>{try{return a.removeItem(n),!0}catch{return!1}},Dc=()=>N1(localStorage,_c)==="true",os=()=>{const n=Dc()?localStorage:sessionStorage;return(N1(n,pi)||"").trim()||null},j1=()=>{jo(sessionStorage,pi),jo(localStorage,pi),jo(localStorage,_c),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},y0=(a,{remember:n}={})=>{const r=(a||"").toString().trim(),s=typeof n=="boolean"?n:Dc();if(!r){j1(),typeof n=="boolean"&&oc(localStorage,_c,n?"true":"false");return}oc(localStorage,_c,s?"true":"false"),s?(oc(localStorage,pi,r),jo(sessionStorage,pi)):(oc(sessionStorage,pi,r),jo(localStorage,pi)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},rs=async(a,n={})=>{const r=typeof a=="string"?qn(a):a;return fetch(r,n)},Vn=async(a,n={})=>{const r=os(),s=typeof a=="string"?qn(a):a;if(!r)return fetch(s,n);const l=new Headers(n.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...n,headers:l})},g0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function UC(){const[a,n]=k.useState([]),[r,s]=k.useState(!1),[l,c]=k.useState(null),[d,h]=k.useState(null),[p,y]=k.useState(5e3),[v,b]=k.useState(null),S=k.useCallback(async()=>{s(!0),c(null);try{const Q=await rs("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:p})});if(!Q.ok){const z=await Q.json();throw new Error(z.error||`Scan failed (${Q.status})`)}const K=await Q.json();n(K.devices||[]),h(new Date)}catch(Q){console.error("[Discovery] Scan error:",Q),c(Q.message)}finally{s(!1)}},[p]),E=Q=>g0[Q]||g0.generic,O=Q=>Q?new Date(Q).toLocaleTimeString():"",$=(Q=>{const K={};for(const z of Q){const P=z.type||"generic";K[P]||(K[P]=[]),K[P].push(z)}return K})(a);return m.jsxs("div",{className:"discovery-panel",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),m.jsxs("select",{value:p,onChange:Q=>y(Number(Q.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[m.jsx("option",{value:3e3,children:"3 seconds"}),m.jsx("option",{value:5e3,children:"5 seconds"}),m.jsx("option",{value:1e4,children:"10 seconds"}),m.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),m.jsx("button",{onClick:S,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):m.jsx(m.Fragment,{children:" Scan Network"})})]}),l&&m.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),d&&m.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",d.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&d&&m.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[m.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),m.jsx("div",{children:"No devices found on your network."}),m.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries($).map(([Q,K])=>{const z=E(Q);return m.jsxs("div",{style:{marginBottom:"16px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[m.jsx("span",{style:{fontSize:"16px"},children:z.icon}),m.jsx("span",{style:{color:z.color,fontSize:"13px",fontWeight:500},children:z.label}),m.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:K.length})]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:K.map(P=>m.jsxs("div",{style:{background:v===P.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>b(v===P.id?null:P.id),children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:P.name}),m.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[P.ip,":",P.port]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[P.configured?m.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):m.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),m.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:v===P.id?"":""})]})]}),v===P.id&&m.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[m.jsx("span",{children:"Host:"}),m.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:P.host||"N/A"}),m.jsx("span",{children:"Source:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:P.source==="mdns"?"mDNS/Bonjour":P.source==="udp"?"UDP Broadcast":P.source}),m.jsx("span",{children:"Discovered:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:O(P.discoveredAt)}),P.capabilities&&P.capabilities.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:"Capabilities:"}),m.jsx("span",{style:{color:"#5fb3b3"},children:P.capabilities.join(", ")})]}),P.model&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:"Model:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:P.model})]})]}),m.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[m.jsx("button",{onClick:he=>{he.stopPropagation(),window.open(`http://${P.ip}:${P.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),m.jsx("button",{onClick:he=>{he.stopPropagation(),navigator.clipboard.writeText(P.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},P.id))})]},Q)}),m.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const lc=[{key:"primary",label:"Primary Accent Color",type:"color",default:"#5fb3b3"},{key:"background",label:"Node Background",type:"color",default:"#1e2428"},{key:"surface",label:"Node Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text Color",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"},{key:"success",label:"Success Color",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning Color",type:"color",default:"#d4a054"},{key:"error",label:"Error Color",type:"color",default:"#c75f5f"},{key:"borderOpacity",label:"Border Opacity (%)",type:"range",min:0,max:100,default:25}],IC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],v0=a=>{try{const n=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},b0=a=>{try{const n=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function $C({isOpen:a,onClose:n}){const[r,s]=k.useState({}),[l,c]=k.useState(!0),[d,h]=k.useState(!1),[p,y]=k.useState(null),[v,b]=k.useState(null),[S,E]=k.useState({}),[O,Z]=k.useState({}),[$,Q]=k.useState({}),[K,z]=k.useState({}),P=k.useRef(null),[he,pe]=k.useState(""),[G,ue]=k.useState(()=>Dc()),[te,Y]=k.useState(()=>!!os()),[fe,Ne]=k.useState(!1),[Re,$e]=k.useState(()=>{try{const A=localStorage.getItem("t2theme-overrides"),R=A?JSON.parse(A):{},ce={};return lc.forEach(we=>{ce[we.key]=we.default}),{...ce,...R}}catch{const A={};return lc.forEach(R=>{A[R.key]=R.default}),A}}),[qe,I]=k.useState(!1),re={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[ve,ze]=k.useState(()=>{try{const A=localStorage.getItem("t2category-overrides"),R=A?JSON.parse(A):{},ce={};for(const[we,_e]of Object.entries(re))ce[we]={..._e,...R[we]||{}};return ce}catch{return{...re}}}),[H,x]=k.useState(!1),L={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},N={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[M,le]=k.useState(()=>{try{const A=localStorage.getItem("t2socket-colors"),R=A?JSON.parse(A):{},ce={};for(const[we,_e]of Object.entries(L))ce[we]={..._e,...R[we]||{}};return ce}catch{return{...L}}}),[ye,je]=k.useState(!1),[Qe,Ze]=k.useState(!1),[Mt,It]=k.useState(null),[At,_n]=k.useState(!1),[dn,on]=k.useState(!1);k.useEffect(()=>{a&&(Dn(),Z({Security:!0,"Home Assistant":!0}),Q({}),ue(Dc()),Y(!!os()),pe(""))},[a]);const Dn=async()=>{c(!0),y(null);try{const A=await Vn("/api/settings");if(!A.ok)throw new Error("Failed to fetch settings");const ce=(await A.json()).settings||{};s(ce);try{const we=await Vn("/api/config");if(we.ok){const _e=await we.json();if(_e.success){_n(_e.isAddon||!1),on(!0);const mt=!ce.LOCATION_CITY,Pn=!ce.LOCATION_LATITUDE,Pe=!ce.LOCATION_LONGITUDE,Rt=!ce.LOCATION_TIMEZONE;(mt||Pn||Pe||Rt)&&(s(Tt=>({...Tt,...mt&&_e.locationName?{LOCATION_CITY:_e.locationName}:{},...Pn&&_e.latitude?{LOCATION_LATITUDE:String(_e.latitude)}:{},...Pe&&_e.longitude?{LOCATION_LONGITUDE:String(_e.longitude)}:{},...Rt&&_e.timezone?{LOCATION_TIMEZONE:_e.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(we){console.log("[Settings] Could not fetch HA config for location auto-fill:",we.message)}}catch(A){y("Failed to load settings: "+A.message)}finally{c(!1)}},We=async()=>{h(!0),y(null),b(null);try{const A=await Vn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!A.ok){const R=await A.json();throw new Error(R.error||"Failed to save settings")}b("Settings saved! Some changes may require a server restart."),setTimeout(()=>b(null),5e3)}catch(A){y("Failed to save: "+A.message)}finally{h(!1)}},V=(A,R)=>{s(ce=>({...ce,[A]:R}))},ie=async()=>{const A=r.LOCATION_CITY;if(!A||A.trim().length<2){It("Please enter a city name first");return}Ze(!0),It(null);try{const R=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(A)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!R.ok)throw new Error("Geocoding service unavailable");const ce=await R.json();if(ce.length===0){It(`Could not find "${A}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const we=ce[0],_e=parseFloat(we.lat).toFixed(4),mt=parseFloat(we.lon).toFixed(4),Pn=we.address?[we.address.city||we.address.town||we.address.village||we.name,we.address.state,we.address.country].filter(Boolean).join(", "):we.display_name.split(",").slice(0,3).join(",");let Pe="UTC";const Rt=we.address?.state?.toLowerCase()||"",Tt=we.address?.country?.toLowerCase()||"";if(Tt.includes("portugal"))Pe="Europe/Lisbon";else if(Tt.includes("spain"))Pe="Europe/Madrid";else if(Tt.includes("france"))Pe="Europe/Paris";else if(Tt.includes("germany"))Pe="Europe/Berlin";else if(Tt.includes("italy"))Pe="Europe/Rome";else if(Tt.includes("united kingdom")||Tt.includes("ireland"))Pe="Europe/London";else if(Tt.includes("netherlands"))Pe="Europe/Amsterdam";else if(Tt.includes("belgium"))Pe="Europe/Brussels";else if(Tt.includes("australia"))Pe="Australia/Sydney";else if(Tt.includes("japan"))Pe="Asia/Tokyo";else if(Tt.includes("china"))Pe="Asia/Shanghai";else if(Tt.includes("india"))Pe="Asia/Kolkata";else if(Tt.includes("brazil"))Pe="America/Sao_Paulo";else if(Tt.includes("canada"))Rt.includes("british columbia")?Pe="America/Vancouver":Rt.includes("alberta")?Pe="America/Edmonton":Rt.includes("saskatchewan")?Pe="America/Regina":Rt.includes("manitoba")?Pe="America/Winnipeg":Rt.includes("ontario")?Pe="America/Toronto":Rt.includes("quebec")?Pe="America/Montreal":Pe="America/Toronto";else if(Tt.includes("united states")||Tt.includes("usa"))Rt.includes("hawaii")?Pe="Pacific/Honolulu":Rt.includes("alaska")?Pe="America/Anchorage":["california","nevada","oregon","washington"].some(kt=>Rt.includes(kt))?Pe="America/Los_Angeles":["arizona"].some(kt=>Rt.includes(kt))?Pe="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(kt=>Rt.includes(kt))?Pe="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(kt=>Rt.includes(kt))?Pe="America/Chicago":Pe="America/New_York";else{const kt=parseFloat(mt);kt>=-125&&kt<-115?Pe="America/Los_Angeles":kt>=-115&&kt<-102?Pe="America/Denver":kt>=-102&&kt<-87?Pe="America/Chicago":kt>=-87&&kt<-67?Pe="America/New_York":kt>=-10&&kt<3?Pe="Europe/London":kt>=3&&kt<15?Pe="Europe/Paris":kt>=15&&kt<30&&(Pe="Europe/Berlin")}s(kt=>({...kt,LOCATION_CITY:Pn,LOCATION_LATITUDE:_e,LOCATION_LONGITUDE:mt,LOCATION_TIMEZONE:Pe})),b(`Found: ${Pn} (${_e}, ${mt})`),setTimeout(()=>b(null),5e3)}catch(R){It("Search failed: "+R.message)}finally{Ze(!1)}},J=(A,R)=>{$e(ce=>({...ce,[A]:R})),I(!0)},Ae=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(Re)),b("Theme saved! Refresh the page to apply changes."),I(!1),setTimeout(()=>b(null),5e3)}catch(A){y("Failed to save theme: "+A.message)}},xe=()=>{const A={};lc.forEach(R=>{A[R.key]=R.default}),$e(A),localStorage.removeItem("t2theme-overrides"),b("Theme reset to defaults! Refresh the page to apply."),I(!1),setTimeout(()=>b(null),5e3)},se=(A,R,ce)=>{ze(we=>({...we,[A]:{...we[A],[R]:ce}})),x(!0)},C=A=>{const R=parseInt(A.slice(1,3),16),ce=parseInt(A.slice(3,5),16),we=parseInt(A.slice(5,7),16);return`${R}, ${ce}, ${we}`},D={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},oe=A=>{const R=document.documentElement;for(const[ce,we]of Object.entries(A)){const _e=D[ce];_e&&(R.style.setProperty(`--node-${_e}-color`,we.accent),R.style.setProperty(`--node-${_e}-color-rgb`,C(we.accent)),we.background&&R.style.setProperty(`--node-${_e}-bg`,we.background))}},de=()=>{try{const A={};for(const[R,ce]of Object.entries(ve)){const we=re[R],_e={};ce.accent!==we.accent&&(_e.accent=ce.accent),ce.background!==we.background&&(_e.background=ce.background),Object.keys(_e).length>0&&(A[R]=_e)}Object.keys(A).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(A)):localStorage.removeItem("t2category-overrides"),oe(ve),b("Category colors applied!"),x(!1),setTimeout(()=>b(null),3e3)}catch(A){y("Failed to save category colors: "+A.message)}},be=()=>{ze({...re}),localStorage.removeItem("t2category-overrides"),oe(re),b("Category colors reset to defaults!"),x(!1),setTimeout(()=>b(null),3e3)},Oe=(A,R)=>{le(ce=>({...ce,[A]:{...ce[A],color:R}})),je(!0)},He=(A,R=20)=>{const ce=parseInt(A.slice(1),16),we=Math.max(0,(ce>>16)-Math.round(255*R/100)),_e=Math.max(0,(ce>>8&255)-Math.round(255*R/100)),mt=Math.max(0,(ce&255)-Math.round(255*R/100));return`#${(1<<24|we<<16|_e<<8|mt).toString(16).slice(1)}`},Xe=(A,R=20)=>{const ce=parseInt(A.slice(1),16),we=Math.min(255,(ce>>16)+Math.round(255*R/100)),_e=Math.min(255,(ce>>8&255)+Math.round(255*R/100)),mt=Math.min(255,(ce&255)+Math.round(255*R/100));return`#${(1<<24|we<<16|_e<<8|mt).toString(16).slice(1)}`},yt=A=>{const R=document.documentElement;for(const[ce,we]of Object.entries(A)){const _e=N[ce];_e&&(R.style.setProperty(`--socket-${_e}-color`,we.color),R.style.setProperty(`--socket-${_e}-dark`,He(we.color,15)),R.style.setProperty(`--socket-${_e}-border`,Xe(we.color,20)),R.style.setProperty(`--socket-${_e}-rgb`,C(we.color)))}},Ue=()=>{try{const A={};for(const[R,ce]of Object.entries(M)){const we=L[R];ce.color!==we.color&&(A[R]={color:ce.color})}Object.keys(A).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(A)):localStorage.removeItem("t2socket-colors"),yt(M),b("Socket colors applied!"),je(!1),setTimeout(()=>b(null),3e3)}catch(A){y("Failed to save socket colors: "+A.message)}},Ve=()=>{le({...L}),localStorage.removeItem("t2socket-colors"),yt(L),b("Socket colors reset to defaults!"),je(!1),setTimeout(()=>b(null),3e3)},De=A=>{Z(R=>({...R,[A]:!R[A]}))},rt=A=>{E(R=>({...R,[A]:!R[A]}))},pt=async A=>{z(R=>({...R,[A]:!0})),Q(R=>({...R,[A]:null}));try{const ce=await(await Vn("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:A,settings:r})})).json();Q(we=>({...we,[A]:{success:ce.success,message:ce.message||(ce.success?"Connection successful!":"Connection failed"),details:ce.details}}))}catch(R){Q(ce=>({...ce,[A]:{success:!1,message:"Test failed: "+R.message}}))}finally{z(R=>({...R,[A]:!1}))}},zt=()=>{const A={version:"1.0",timestamp:new Date().toISOString(),settings:r},R=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),ce=URL.createObjectURL(R),we=document.createElement("a");we.href=ce,we.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(ce),b("Settings exported successfully!"),setTimeout(()=>b(null),3e3)},Ft=A=>{const R=A.target.files?.[0];if(!R)return;const ce=new FileReader;ce.onload=we=>{try{const _e=JSON.parse(we.target.result);if(!_e.settings||typeof _e.settings!="object")throw new Error("Invalid backup file format");s(mt=>({...mt,..._e.settings})),b(`Imported ${Object.keys(_e.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>b(null),5e3)}catch(_e){y("Failed to import backup: "+_e.message)}},ce.readAsText(R),A.target.value=""};return a?Oh.createPortal(m.jsx("div",{className:"settings-modal-overlay",onClick:n,children:m.jsxs("div",{className:"settings-modal",onClick:A=>A.stopPropagation(),children:[m.jsxs("div",{className:"settings-header",children:[m.jsx("h2",{children:" Settings & API Keys"}),m.jsx("button",{className:"settings-close-btn",onClick:n,children:""})]}),m.jsx("div",{className:"settings-content",children:l?m.jsx("div",{className:"settings-loading",children:"Loading settings..."}):m.jsxs(m.Fragment,{children:[p&&m.jsx("div",{className:"settings-error",children:p}),v&&m.jsx("div",{className:"settings-success",children:v}),m.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[m.jsxs("span",{children:[O.Security?"":""," Security (This Device)"]}),te&&m.jsxs("span",{style:{fontSize:"10px",color:G?"#00c896":"#ffaa00"},children:[" ",G?"REMEMBERED":"SESSION"]})]}),O.Security&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),m.jsxs("div",{className:"settings-field",children:[m.jsxs("label",{className:"settings-label",children:["App PIN",m.jsx("button",{className:"settings-show-btn",onClick:()=>Ne(A=>!A),type:"button",children:fe?" Hide":" Show"})]}),m.jsx("input",{type:fe?"text":"password",className:"settings-input",value:he,onChange:A=>pe(A.target.value),placeholder:te?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[m.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[m.jsx("input",{type:"checkbox",checked:G,onChange:A=>{const R=A.target.checked;ue(R);const ce=os();ce&&y0(ce,{remember:R})}}),"Remember PIN on this device"]}),m.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[m.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const A=he.trim();A&&(y0(A,{remember:G}),Y(!0),pe(""),(async()=>{try{const R=await Vn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:A}})});if(!R.ok){const ce=await R.text();throw new Error(ce||`HTTP ${R.status}`)}b("PIN saved (server + this device)."),setTimeout(()=>b(null),3e3)}catch{b("PIN saved on this device. Server PIN update failed."),setTimeout(()=>b(null),4e3)}finally{Dn()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!he.trim(),children:" Save PIN"}),m.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{j1(),Y(!1),pe(""),ue(!1),b("PIN cleared."),setTimeout(()=>b(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!te,children:"Clear"})]})]}),m.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:te?`PIN is saved (${G?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),m.jsxs("div",{className:"settings-backup-section",children:[m.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),m.jsxs("div",{className:"settings-backup-buttons",children:[m.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:zt,children:" Export Backup"}),m.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>P.current?.click(),children:" Import Backup"}),m.jsx("input",{ref:P,type:"file",accept:".json",style:{display:"none"},onChange:Ft})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[m.jsxs("span",{children:[O.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&m.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),O.Performance&&m.jsxs("div",{className:"settings-category-content",children:[m.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",m.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),m.jsx("br",{}),m.jsx("br",{}),"Performance Mode disables:",m.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[m.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),m.jsx("li",{children:"Complex glow shadows"}),m.jsx("li",{children:"Infinite pulse/glow animations"}),m.jsx("li",{children:"Transition effects on nodes"})]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),m.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),m.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[m.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:A=>{window.setPerformanceMode?.(A.target.checked),Z(R=>({...R}))},style:{opacity:0,width:0,height:0}}),m.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:m.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),m.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsx("div",{className:"settings-category-header",onClick:()=>De("Discovery"),children:m.jsxs("span",{children:[O.Discovery?"":""," Network Device Discovery"]})}),O.Discovery&&m.jsx("div",{className:"settings-category-content",children:m.jsx(UC,{})})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("Theme"),children:[m.jsxs("span",{children:[O.Theme?"":""," Node Theme Settings"]}),qe&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),O.Theme&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Theme settings are stored locally. Refresh the page after saving to apply changes."}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:lc.map(A=>m.jsxs("div",{className:"settings-field",style:{marginBottom:"8px"},children:[m.jsx("label",{className:"settings-label",style:{fontSize:"10px"},children:A.label}),A.type==="color"?m.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("input",{type:"color",value:Re[A.key]||A.default,onChange:R=>J(A.key,R.target.value),style:{width:"40px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("input",{type:"text",value:Re[A.key]||A.default,onChange:R=>J(A.key,R.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"11px"}})]}):A.type==="range"?m.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("input",{type:"range",min:A.min,max:A.max,value:Re[A.key]||A.default,onChange:R=>J(A.key,parseInt(R.target.value)),style:{flex:1}}),m.jsxs("span",{style:{minWidth:"35px",textAlign:"right",color:"#c5cdd3",fontSize:"12px"},children:[Re[A.key]||A.default,"%"]})]}):null]},A.key))}),m.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:Re.background,borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(Re.borderOpacity||25)/100})`},children:[m.jsx("div",{style:{fontSize:"10px",color:Re.textMuted,marginBottom:"8px"},children:"PREVIEW"}),m.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[m.jsx("div",{style:{padding:"8px 12px",background:Re.surface,color:Re.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),m.jsx("div",{style:{padding:"8px 12px",background:Re.surfaceLight,color:Re.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),m.jsx("span",{style:{color:Re.primary},children:"Primary"}),m.jsx("span",{style:{color:Re.success},children:"Success"}),m.jsx("span",{style:{color:Re.warning},children:"Warning"}),m.jsx("span",{style:{color:Re.error},children:"Error"})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:xe,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:Ae,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Theme"})]})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("CategoryColors"),children:[m.jsxs("span",{children:[O.CategoryColors?"":""," Category Accent Colors"]}),H&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),O.CategoryColors&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(ve).map(([A,R])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:R.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${R.accent}55`},children:[m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[m.jsx("input",{type:"color",value:R.accent,onChange:ce=>se(A,"accent",ce.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[m.jsx("input",{type:"color",value:R.background||"#0a0f14",onChange:ce=>se(A,"background",ce.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),m.jsx("div",{style:{flex:1,minWidth:0},children:m.jsxs("div",{style:{fontSize:"11px",color:R.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[R.icon," ",A]})})]},A))}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:be,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:de,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("SocketColors"),children:[m.jsxs("span",{children:[O.SocketColors?"":""," Socket Colors"]}),ye&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),O.SocketColors&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),m.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[m.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx("span",{children:""})," Preview Node"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(M).slice(0,3).map(([A,R])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${R.color}, ${v0(R.color)})`,border:`2px solid ${b0(R.color)}`,boxShadow:`0 0 8px ${R.color}80`}}),m.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:A})]},A))}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(M).slice(3).map(([A,R])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:A}),m.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${R.color}, ${v0(R.color)})`,border:`2px solid ${b0(R.color)}`,boxShadow:`0 0 8px ${R.color}80`}})]},A))})]})]}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(M).map(([A,R])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${R.color}55`},children:[m.jsx("input",{type:"color",value:R.color,onChange:ce=>Oe(A,ce.target.value),title:`${A} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsxs("div",{style:{fontSize:"12px",color:R.color,fontWeight:"600"},children:[R.icon," ",A]}),m.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:R.description})]})]},A))}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:Ve,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:Ue,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),IC.map(A=>m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De(A.category),children:[m.jsxs("span",{children:[O[A.category]?"":"",A.icon," ",A.category]}),A.testable&&O[A.category]&&m.jsx("button",{className:`settings-test-btn ${$[A.testable]?.success?"success":$[A.testable]?.success===!1?"error":""}`,onClick:R=>{R.stopPropagation(),pt(A.testable)},disabled:K[A.testable],children:K[A.testable]?" Testing...":" Test Connection"})]}),O[A.category]&&m.jsxs("div",{className:"settings-category-content",children:[$[A.testable]&&m.jsxs("div",{className:`settings-test-result ${$[A.testable].success?"success":"error"}`,children:[$[A.testable].success?"":""," ",$[A.testable].message,$[A.testable].details&&m.jsx("div",{className:"settings-test-details",children:$[A.testable].details})]}),A.category==="Location"&&m.jsxs("div",{className:"settings-location-search",children:[dn&&At&&m.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),m.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),m.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:R=>V("LOCATION_CITY",R.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:R=>{R.key==="Enter"&&ie()}}),m.jsx("button",{className:"settings-test-btn",onClick:ie,disabled:Qe,style:{whiteSpace:"nowrap"},children:Qe?" Searching...":" Search City"})]}),Mt&&m.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",Mt]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[m.jsxs("div",{className:"settings-field",children:[m.jsx("label",{className:"settings-label",children:"Latitude"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:R=>V("LOCATION_LATITUDE",R.target.value),placeholder:"32.7767"})]}),m.jsxs("div",{className:"settings-field",children:[m.jsx("label",{className:"settings-label",children:"Longitude"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:R=>V("LOCATION_LONGITUDE",R.target.value),placeholder:"-96.7970"})]})]}),m.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[m.jsx("label",{className:"settings-label",children:"Timezone"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:R=>V("LOCATION_TIMEZONE",R.target.value),placeholder:"America/Chicago"}),m.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),A.category!=="Location"&&A.settings.map(R=>m.jsxs("div",{className:"settings-field",children:[m.jsxs("label",{className:"settings-label",children:[R.label,R.isSecret&&m.jsx("button",{className:"settings-show-btn",onClick:()=>rt(R.key),type:"button",children:S[R.key]?" Hide":" Show"})]}),R.type==="select"?m.jsxs("select",{className:"settings-input",value:r[R.key]||"",onChange:ce=>V(R.key,ce.target.value),children:[m.jsx("option",{value:"",children:"Select..."}),R.options.map(ce=>m.jsx("option",{value:ce,children:ce},ce))]}):m.jsx("input",{type:R.isSecret&&!S[R.key]?"password":"text",className:"settings-input",value:r[R.key]||"",onChange:ce=>V(R.key,ce.target.value),placeholder:R.placeholder}),m.jsx("span",{className:"settings-key-hint",children:R.key})]},R.key))]})]},A.category))]})}),m.jsxs("div",{className:"settings-footer",children:[m.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:n,children:"Cancel"}),m.jsx("button",{className:"settings-btn settings-btn-primary",onClick:We,disabled:d||l,children:d?"Saving...":" Save Settings"})]})]})}),document.body):null}const HC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function VC({isOpen:a,onClose:n}){if(k.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,n]),!a)return null;const r=s=>{s.target===s.currentTarget&&n()};return Oh.createPortal(m.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:m.jsxs("div",{className:"shortcuts-modal",children:[m.jsxs("div",{className:"shortcuts-modal-header",children:[m.jsx("h2",{children:" Keyboard Shortcuts"}),m.jsx("button",{className:"shortcuts-close-btn",onClick:n,children:" Close"})]}),m.jsx("div",{className:"shortcuts-modal-body",children:HC.map((s,l)=>m.jsxs("div",{className:"shortcuts-section",children:[m.jsx("h3",{children:s.category}),m.jsx("div",{className:"shortcuts-list",children:s.items.map((c,d)=>m.jsxs("div",{className:"shortcut-row",children:[m.jsx("div",{className:"shortcut-keys",children:c.keys.map((h,p)=>m.jsxs(_a.Fragment,{children:[m.jsx("kbd",{children:h}),p<c.keys.length-1&&m.jsx("span",{className:"key-separator",children:"+"})]},p))}),m.jsx("div",{className:"shortcut-action",children:c.action})]},d))})]},l))}),m.jsx("div",{className:"shortcuts-modal-footer",children:m.jsxs("p",{children:["Press ",m.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function qC({isExpanded:a,onToggle:n}){const[r,s]=k.useState([]),[l,c]=k.useState([]),[d,h]=k.useState(!0),[p,y]=k.useState(!1),[v,b]=k.useState(null),[S,E]=k.useState(!1),[O,Z]=k.useState(null),[$,Q]=k.useState(null),[K,z]=k.useState({username:"",password:"",name:""}),[P,he]=k.useState({username:"",password:""}),[pe,G]=k.useState(""),[ue,te]=k.useState(5e3),[Y,fe]=k.useState(null),Ne=k.useRef(null),[Re,$e]=k.useState({});k.useEffect(()=>(qe(),()=>{Ne.current&&clearInterval(Ne.current)}),[]),k.useEffect(()=>(Ne.current&&clearInterval(Ne.current),a&&r.length>0&&ue>0&&(Ne.current=setInterval(()=>{$e(N=>{const M={...N};return r.forEach(le=>{M[le.ip]=Date.now()}),M})},ue)),()=>{Ne.current&&clearInterval(Ne.current)}),[a,r,ue]);const qe=async()=>{try{h(!0);const N=await rs("/api/cameras");if(N.ok){const M=await N.json();s(M.cameras||[]),M.defaultCredentials&&he(le=>({...le,username:M.defaultCredentials.username||""}))}}catch{b("Failed to load cameras")}finally{h(!1)}},I=async()=>{y(!0),b(null);try{const N=await rs("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(N.ok){const M=await N.json();if(M.found&&M.found.length>0){const le=r.map(je=>je.ip),ye=M.found.filter(je=>!le.includes(je.ip));c(ye),window.T2Toast&&(ye.length>0?window.T2Toast.success(`Found ${ye.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${M.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{b("Discovery failed")}finally{y(!1)}},re=async()=>{try{await rs("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{b("Failed to save credentials")}},ve=async(N,M,le)=>{try{await rs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:N,name:M||`Camera ${N.split(".").pop()}`,username:le?.username||P.username,password:le?.password||P.password})}),c(ye=>ye.filter(je=>je.ip!==N)),Z(null),G(""),await qe(),window.T2Toast&&window.T2Toast.success(`Camera ${N} added!`)}catch{b("Failed to add camera")}},ze=async N=>{try{await fetch(`/api/cameras/${N}`,{method:"DELETE"}),await qe(),Y===N&&fe(null)}catch{b("Failed to remove camera")}},H=async()=>{if($)try{await rs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:$,name:K.name,username:K.username,password:K.password})}),Q(null),$e(N=>({...N,[$]:Date.now()})),await qe(),window.T2Toast&&window.T2Toast.success(`Camera ${$} updated!`)}catch{b("Failed to update camera")}},x={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},L=N=>{const M=Re[N]||Date.now();return`/api/cameras/snapshot/${N}?t=${M}`};return m.jsxs("div",{style:x.container,children:[m.jsxs("div",{style:x.header,onClick:n,children:[m.jsxs("div",{style:x.title,children:[m.jsx("span",{style:x.icon,children:""}),m.jsx("span",{children:"Cameras"}),r.length>0&&m.jsx("span",{style:x.badge,children:r.length})]}),m.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&m.jsxs("div",{style:x.content,children:[m.jsxs("div",{style:x.toolbar,children:[m.jsx("button",{style:{...x.btn,...p?x.btnActive:{}},onClick:I,disabled:p,children:p?" Scanning...":" Discover"}),m.jsx("button",{style:{...x.btn,...S?x.btnActive:{}},onClick:()=>E(!S),children:" Settings"}),m.jsxs("select",{style:x.refreshSelect,value:ue,onChange:N=>te(Number(N.target.value)),title:"Refresh interval",children:[m.jsx("option",{value:0,children:"Manual"}),m.jsx("option",{value:2e3,children:"2s"}),m.jsx("option",{value:5e3,children:"5s"}),m.jsx("option",{value:1e4,children:"10s"}),m.jsx("option",{value:3e4,children:"30s"})]})]}),S&&m.jsxs("div",{style:x.settings,children:[m.jsxs("div",{style:x.inputGroup,children:[m.jsx("label",{style:x.label,children:"Select Camera to Configure"}),m.jsxs("select",{style:{...x.input,cursor:"pointer"},value:$||"",onChange:N=>{const M=N.target.value;if(!M){Q(null),z({username:"",password:"",name:""});return}const le=r.find(ye=>ye.ip===M);le?(Q(M),z({name:le.name||"",username:le.username||"",password:""})):(Q(M),z({name:`Camera ${M.split(".").pop()}`,username:P.username||"",password:P.password||""}))},children:[m.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&m.jsx("optgroup",{label:" Configured Cameras",children:r.map(N=>m.jsxs("option",{value:N.ip,children:[N.name," (",N.ip,")"]},N.ip))}),l.length>0&&m.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(N=>m.jsxs("option",{value:N.ip,children:[N.ip," (Ports: ",N.ports.join(", "),")"]},N.ip))})]})]}),$&&m.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[m.jsxs("div",{style:x.inputGroup,children:[m.jsx("label",{style:x.label,children:"Camera Name"}),m.jsx("input",{type:"text",style:x.input,value:K.name,onChange:N=>z(M=>({...M,name:N.target.value})),placeholder:"Front Door"})]}),m.jsxs("div",{style:x.inputGroup,children:[m.jsx("label",{style:x.label,children:"Username"}),m.jsx("input",{type:"text",style:x.input,value:K.username,onChange:N=>z(M=>({...M,username:N.target.value})),placeholder:"admin"})]}),m.jsxs("div",{style:x.inputGroup,children:[m.jsxs("label",{style:x.label,children:["Password ",r.find(N=>N.ip===$)?"(leave blank to keep current)":""]}),m.jsx("input",{type:"password",style:x.input,value:K.password,onChange:N=>z(M=>({...M,password:N.target.value})),placeholder:""})]}),m.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:m.jsx("button",{style:{...x.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(M=>M.ip===$)?ve($,K.name,K):H()},children:r.find(N=>N.ip===$)?" Save Changes":" Add Camera"})})]}),m.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[m.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("input",{type:"text",style:{...x.input,flex:1},value:P.username,onChange:N=>he(M=>({...M,username:N.target.value})),placeholder:"Username"}),m.jsx("input",{type:"password",style:{...x.input,flex:1},value:P.password,onChange:N=>he(M=>({...M,password:N.target.value})),placeholder:"Password"}),m.jsx("button",{style:x.btn,onClick:re,title:"Save as default",children:""})]})]}),m.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[m.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("input",{type:"text",id:"addCameraIp",style:{...x.input,flex:1},placeholder:"192.168.1.100",onKeyDown:N=>{if(N.key==="Enter"&&N.target.value){const M=N.target.value;!l.find(le=>le.ip===M)&&!r.find(le=>le.ip===M)&&c(le=>[...le,{ip:M,ports:["manual"]}]),Q(M),z({name:`Camera ${M.split(".").pop()}`,username:P.username||"",password:P.password||""}),N.target.value=""}}}),m.jsx("button",{style:x.btn,onClick:()=>{const N=document.getElementById("addCameraIp"),M=N?.value;M&&(!l.find(le=>le.ip===M)&&!r.find(le=>le.ip===M)&&c(le=>[...le,{ip:M,ports:["manual"]}]),Q(M),z({name:`Camera ${M.split(".").pop()}`,username:P.username||"",password:P.password||""}),N.value="")},children:"Configure"})]})]})]}),v&&m.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",v]}),d?m.jsx("div",{style:x.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?m.jsxs("div",{style:x.emptyState,children:[m.jsx("p",{children:"No cameras configured"}),m.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):m.jsx("div",{style:x.grid,children:r.map(N=>m.jsxs("div",{style:{...x.cameraCard,...Y===N.ip?x.cameraCardSelected:{}},onClick:()=>fe(N.ip),children:[m.jsx("img",{src:L(N.ip),alt:N.name,style:x.cameraImage,onError:M=>{M.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),m.jsxs("div",{style:x.cameraInfo,children:[m.jsx("span",{style:x.cameraName,title:N.ip,children:N.name}),m.jsxs("div",{style:{display:"flex",gap:"4px"},children:[m.jsx("button",{style:{...x.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:M=>{M.stopPropagation(),E(!0),Q(N.ip),z({name:N.name||"",username:N.username||"",password:""})},title:"Edit credentials",children:""}),m.jsx("button",{style:x.deleteBtn,onClick:M=>{M.stopPropagation(),ze(N.ip)},title:"Remove camera",children:""})]})]})]},N.ip))})]}),Y&&m.jsxs("div",{style:x.fullView,onClick:()=>fe(null),children:[m.jsx("img",{src:L(Y),alt:"Camera feed",style:x.fullImage}),m.jsx("button",{style:x.closeBtn,onClick:()=>fe(null),children:" Close"}),m.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(N=>N.ip===Y)?.name||Y})]})]})}const Ha=Object.create(null);Ha.open="0";Ha.close="1";Ha.ping="2";Ha.pong="3";Ha.message="4";Ha.upgrade="5";Ha.noop="6";const wc=Object.create(null);Object.keys(Ha).forEach(a=>{wc[Ha[a]]=a});const oh={type:"error",data:"parser error"},A1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_1=typeof ArrayBuffer=="function",D1=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Gh=({type:a,data:n},r,s)=>A1&&n instanceof Blob?r?s(n):w0(n,s):_1&&(n instanceof ArrayBuffer||D1(n))?r?s(n):w0(new Blob([n]),s):s(Ha[a]+(n||"")),w0=(a,n)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];n("b"+(s||""))},r.readAsDataURL(a)};function S0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let Af;function GC(a,n){if(A1&&a.data instanceof Blob)return a.data.arrayBuffer().then(S0).then(n);if(_1&&(a.data instanceof ArrayBuffer||D1(a.data)))return n(S0(a.data));Gh(a,!1,r=>{Af||(Af=new TextEncoder),n(Af.encode(r))})}const x0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<x0.length;a++)xo[x0.charCodeAt(a)]=a;const YC=a=>{let n=a.length*.75,r=a.length,s,l=0,c,d,h,p;a[a.length-1]==="="&&(n--,a[a.length-2]==="="&&n--);const y=new ArrayBuffer(n),v=new Uint8Array(y);for(s=0;s<r;s+=4)c=xo[a.charCodeAt(s)],d=xo[a.charCodeAt(s+1)],h=xo[a.charCodeAt(s+2)],p=xo[a.charCodeAt(s+3)],v[l++]=c<<2|d>>4,v[l++]=(d&15)<<4|h>>2,v[l++]=(h&3)<<6|p&63;return y},PC=typeof ArrayBuffer=="function",Yh=(a,n)=>{if(typeof a!="string")return{type:"message",data:M1(a,n)};const r=a.charAt(0);return r==="b"?{type:"message",data:FC(a.substring(1),n)}:wc[r]?a.length>1?{type:wc[r],data:a.substring(1)}:{type:wc[r]}:oh},FC=(a,n)=>{if(PC){const r=YC(a);return M1(r,n)}else return{base64:!0,data:a}},M1=(a,n)=>{switch(n){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},R1="",ZC=(a,n)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,d)=>{Gh(c,!1,h=>{s[d]=h,++l===r&&n(s.join(R1))})})},XC=(a,n)=>{const r=a.split(R1),s=[];for(let l=0;l<r.length;l++){const c=Yh(r[l],n);if(s.push(c),c.type==="error")break}return s};function KC(){return new TransformStream({transform(a,n){GC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),n.enqueue(l),n.enqueue(r)})}})}let _f;function cc(a){return a.reduce((n,r)=>n+r.length,0)}function uc(a,n){if(a[0].length===n)return a.shift();const r=new Uint8Array(n);let s=0;for(let l=0;l<n;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function QC(a,n){_f||(_f=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(d,h){for(r.push(d);;){if(s===0){if(cc(r)<1)break;const p=uc(r,1);c=(p[0]&128)===128,l=p[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(cc(r)<2)break;const p=uc(r,2);l=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),s=3}else if(s===2){if(cc(r)<8)break;const p=uc(r,8),y=new DataView(p.buffer,p.byteOffset,p.length),v=y.getUint32(0);if(v>Math.pow(2,21)-1){h.enqueue(oh);break}l=v*Math.pow(2,32)+y.getUint32(4),s=3}else{if(cc(r)<l)break;const p=uc(r,l);h.enqueue(Yh(c?p:_f.decode(p),n)),s=0}if(l===0||l>a){h.enqueue(oh);break}}}})}const z1=4;function sn(a){if(a)return JC(a)}function JC(a){for(var n in sn.prototype)a[n]=sn.prototype[n];return a}sn.prototype.on=sn.prototype.addEventListener=function(a,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(n),this};sn.prototype.once=function(a,n){function r(){this.off(a,r),n.apply(this,arguments)}return r.fn=n,this.on(a,r),this};sn.prototype.off=sn.prototype.removeListener=sn.prototype.removeAllListeners=sn.prototype.removeEventListener=function(a,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===n||s.fn===n){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};sn.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,n)}return this};sn.prototype.emitReserved=sn.prototype.emit;sn.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};sn.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Gc=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),pa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),WC="arraybuffer";function L1(a,...n){return n.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const eT=pa.setTimeout,tT=pa.clearTimeout;function Yc(a,n){n.useNativeTimers?(a.setTimeoutFn=eT.bind(pa),a.clearTimeoutFn=tT.bind(pa)):(a.setTimeoutFn=pa.setTimeout.bind(pa),a.clearTimeoutFn=pa.clearTimeout.bind(pa))}const nT=1.33;function aT(a){return typeof a=="string"?rT(a):Math.ceil((a.byteLength||a.size)*nT)}function rT(a){let n=0,r=0;for(let s=0,l=a.length;s<l;s++)n=a.charCodeAt(s),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(s++,r+=4);return r}function B1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function iT(a){let n="";for(let r in a)a.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return n}function sT(a){let n={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");n[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return n}class oT extends Error{constructor(n,r,s){super(n),this.description=r,this.context=s,this.type="TransportError"}}class Ph extends sn{constructor(n){super(),this.writable=!1,Yc(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,s){return super.emitReserved("error",new oT(n,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=Yh(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=iT(n);return r.length?"?"+r:""}}class lT extends Ph{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};XC(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,ZC(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=B1()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let U1=!1;try{U1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const cT=U1;function uT(){}class dT extends lT{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||s!==n.port}}doWrite(n,r){const s=this.request({method:"POST",data:n});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=n}}class $a extends sn{constructor(n,r,s){super(),this.createRequest=n,Yc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var n;const r=L1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=$a.requestsCount++,$a.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=uT,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete $a.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}$a.requestsCount=0;$a.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",k0);else if(typeof addEventListener=="function"){const a="onpagehide"in pa?"pagehide":"unload";addEventListener(a,k0,!1)}}function k0(){for(let a in $a.requests)$a.requests.hasOwnProperty(a)&&$a.requests[a].abort()}const fT=(function(){const a=I1({xdomain:!1});return a&&a.responseType!==null})();class hT extends dT{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=fT&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new $a(I1,this.uri(),n)}}function I1(a){const n=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||cT))return new XMLHttpRequest}catch{}if(!n)try{return new pa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pT extends Ph{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,s=$1?{}:L1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;Gh(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Gc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=B1()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const Df=pa.WebSocket||pa.MozWebSocket;class mT extends pT{createSocket(n,r,s){return $1?new Df(n,r,s):r?new Df(n,r):new Df(n)}doWrite(n,r){this.ws.send(r)}}class yT extends Ph{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=QC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=n.readable.pipeThrough(r).getReader(),l=KC();l.readable.pipeTo(n.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:h,value:p})=>{h||(this.onPacket(p),c())}).catch(h=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;this._writer.write(s).then(()=>{l&&Gc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const gT={websocket:mT,webtransport:yT,polling:hT},vT=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lh(a){if(a.length>8e3)throw"URI too long";const n=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=vT.exec(a||""),c={},d=14;for(;d--;)c[bT[d]]=l[d]||"";return r!=-1&&s!=-1&&(c.source=n,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=wT(c,c.path),c.queryKey=ST(c,c.query),c}function wT(a,n){const r=/\/{2,9}/g,s=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&s.splice(0,1),n.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ST(a,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const ch=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sc=[];ch&&addEventListener("offline",()=>{Sc.forEach(a=>a())},!1);class Gr extends sn{constructor(n,r){if(super(),this.binaryType=WC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const s=lh(n);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=lh(r.host).host);Yc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=sT(this.opts.query)),ch&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=z1,r.transport=n,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Gr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Gr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=aT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,Gc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,s){return this._sendPacket("message",n,r,s),this}send(n,r,s){return this._sendPacket("message",n,r,s),this}_sendPacket(n,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:n,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}_onError(n){if(Gr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ch&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Sc.indexOf(this._offlineEventListener);s!==-1&&Sc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Gr.protocol=z1;class xT extends Gr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),s=!1;Gr.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!s)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Gr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const S=new Error("probe error");S.transport=r.name,this.emitReserved("upgradeError",S)}}))};function c(){s||(s=!0,v(),r.close(),r=null)}const d=b=>{const S=new Error("probe error: "+b);S.transport=r.name,c(),this.emitReserved("upgradeError",S)};function h(){d("transport closed")}function p(){d("socket closed")}function y(b){r&&b.name!==r.name&&c()}const v=()=>{r.removeListener("open",l),r.removeListener("error",d),r.removeListener("close",h),this.off("close",p),this.off("upgrading",y)};r.once("open",l),r.once("error",d),r.once("close",h),this.once("close",p),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let s=0;s<n.length;s++)~this.transports.indexOf(n[s])&&r.push(n[s]);return r}}let kT=class extends xT{constructor(n,r={}){const s=typeof n=="object"?n:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>gT[l]).filter(l=>!!l)),super(n,s)}};function ET(a,n="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=lh(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+n,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const CT=typeof ArrayBuffer=="function",TT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,H1=Object.prototype.toString,OT=typeof Blob=="function"||typeof Blob<"u"&&H1.call(Blob)==="[object BlobConstructor]",NT=typeof File=="function"||typeof File<"u"&&H1.call(File)==="[object FileConstructor]";function Fh(a){return CT&&(a instanceof ArrayBuffer||TT(a))||OT&&a instanceof Blob||NT&&a instanceof File}function xc(a,n){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(xc(a[r]))return!0;return!1}if(Fh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return xc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&xc(a[r]))return!0;return!1}function jT(a){const n=[],r=a.data,s=a;return s.data=uh(r,n),s.attachments=n.length,{packet:s,buffers:n}}function uh(a,n){if(!a)return a;if(Fh(a)){const r={_placeholder:!0,num:n.length};return n.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=uh(a[s],n);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=uh(a[s],n));return r}return a}function AT(a,n){return a.data=dh(a.data,n),delete a.attachments,a}function dh(a,n){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<n.length)return n[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=dh(a[r],n);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=dh(a[r],n));return a}const _T=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],DT=5;var ft;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(ft||(ft={}));class MT{constructor(n){this.replacer=n}encode(n){return(n.type===ft.EVENT||n.type===ft.ACK)&&xc(n)?this.encodeAsBinary({type:n.type===ft.EVENT?ft.BINARY_EVENT:ft.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===ft.BINARY_EVENT||n.type===ft.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=jT(n),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function E0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Zh extends sn{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const s=r.type===ft.BINARY_EVENT;s||r.type===ft.BINARY_ACK?(r.type=s?ft.EVENT:ft.ACK,this.reconstructor=new RT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Fh(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const s={type:Number(n.charAt(0))};if(ft[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===ft.BINARY_EVENT||s.type===ft.BINARY_ACK){const c=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const d=n.substring(c,r);if(d!=Number(d)||n.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(n.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););s.nsp=n.substring(c,r)}else s.nsp="/";const l=n.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const d=n.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===n.length)break}s.id=Number(n.substring(c,r+1))}if(n.charAt(++r)){const c=this.tryParse(n.substr(r));if(Zh.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case ft.CONNECT:return E0(r);case ft.DISCONNECT:return r===void 0;case ft.CONNECT_ERROR:return typeof r=="string"||E0(r);case ft.EVENT:case ft.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&_T.indexOf(r[0])===-1);case ft.ACK:case ft.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class RT{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=AT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const zT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Zh,Encoder:MT,get PacketType(){return ft},protocol:DT},Symbol.toStringTag,{value:"Module"}));function Na(a,n,r){return a.on(n,r),function(){a.off(n,r)}}const LT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class V1 extends sn{constructor(n,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Na(n,"open",this.onopen.bind(this)),Na(n,"packet",this.onpacket.bind(this)),Na(n,"error",this.onerror.bind(this)),Na(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var s,l,c;if(LT.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:ft.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,b=r.pop();this._registerAckCallback(v,b),d.id=v}const h=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,p=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!h||(p?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(n,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[n]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===n&&this.sendBuffer.splice(h,1);r.call(this,new Error("operation has timed out"))},l),d=(...h)=>{this.io.clearTimeoutFn(c),r.apply(this,h)};d.withError=!0,this.acks[n]=d}emitWithAck(n,...r){return new Promise((s,l)=>{const c=(d,h)=>d?l(d):s(h);c.withError=!0,r.push(c),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:ft.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(s=>String(s.id)===n)){const s=this.acks[n];delete this.acks[n],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case ft.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ft.EVENT:case ft.BINARY_EVENT:this.onevent(n);break;case ft.ACK:case ft.BINARY_ACK:this.onack(n);break;case ft.DISCONNECT:this.ondisconnect();break;case ft.CONNECT_ERROR:this.destroy();const s=new Error(n.data.message);s.data=n.data.data,this.emitReserved("connect_error",s);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:ft.ACK,id:n,data:l}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ft.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,n.data)}}}function bs(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}bs.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*a);a=(Math.floor(n*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};bs.prototype.reset=function(){this.attempts=0};bs.prototype.setMin=function(a){this.ms=a};bs.prototype.setMax=function(a){this.max=a};bs.prototype.setJitter=function(a){this.jitter=a};class fh extends sn{constructor(n,r){var s;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Yc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new bs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const l=r.parser||zT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new kT(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=Na(r,"open",function(){s.onopen(),n&&n()}),c=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),n?n(h):this.maybeReconnectOnOpen()},d=Na(r,"error",c);if(this._timeout!==!1){const h=this._timeout,p=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},h);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(l),this.subs.push(d),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Na(n,"ping",this.onping.bind(this)),Na(n,"data",this.ondata.bind(this)),Na(n,"error",this.onerror.bind(this)),Na(n,"close",this.onclose.bind(this)),Na(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){Gc(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let s=this.nsps[n];return s?this._autoConnect&&!s.active&&s.connect():(s=new V1(this,n,r),this.nsps[n]=s),s}_destroy(n){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let s=0;s<r.length;s++)this.engine.write(r[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(l=>{l?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",l)):n.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const bo={};function kc(a,n){typeof a=="object"&&(n=a,a=void 0),n=n||{};const r=ET(a,n.path||"/socket.io"),s=r.source,l=r.id,c=r.path,d=bo[l]&&c in bo[l].nsps,h=n.forceNew||n["force new connection"]||n.multiplex===!1||d;let p;return h?p=new fh(s,n):(bo[l]||(bo[l]=new fh(s,n)),p=bo[l]),r.query&&!n.query&&(n.query=r.queryKey),p.socket(r.path,n)}Object.assign(kc,{Manager:fh,Socket:V1,io:kc,connect:kc});const BT=typeof window<"u"?window.location.origin:"http://localhost:3000",C0=qc(),UT=C0?`${C0}/socket.io`:"/socket.io",ge=kc(BT,{path:UT,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]}),IT=()=>{ge.connected||ge.connect()},$T=()=>{ge.connected&&ge.disconnect()};class HT{constructor(){this.nodes=new Map}register(n,r){typeof n=="object"&&r===void 0&&(r=n,n=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(n,r)}get(n){return this.nodes.get(n)}getAll(){return Array.from(this.nodes.values()).filter(n=>n)}getByLabel(n){for(const r of this.nodes.values())if(r.label===n)return r;return null}getByInstance(n){for(const r of this.nodes.values())if(r.nodeClass&&n instanceof r.nodeClass)return r;return null}}const Tn=new HT;class bi extends Error{}class VT extends bi{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class qT extends bi{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class GT extends bi{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class ss extends bi{}class q1 extends bi{constructor(n){super(`Invalid unit ${n}`)}}class On extends bi{}class Br extends bi{constructor(){super("Zone is an abstract class")}}const Te="numeric",Da="short",ta="long",Mc={year:Te,month:Te,day:Te},G1={year:Te,month:Da,day:Te},YT={year:Te,month:Da,day:Te,weekday:Da},Y1={year:Te,month:ta,day:Te},P1={year:Te,month:ta,day:Te,weekday:ta},F1={hour:Te,minute:Te},Z1={hour:Te,minute:Te,second:Te},X1={hour:Te,minute:Te,second:Te,timeZoneName:Da},K1={hour:Te,minute:Te,second:Te,timeZoneName:ta},Q1={hour:Te,minute:Te,hourCycle:"h23"},J1={hour:Te,minute:Te,second:Te,hourCycle:"h23"},W1={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:Da},ew={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:ta},tw={year:Te,month:Te,day:Te,hour:Te,minute:Te},nw={year:Te,month:Te,day:Te,hour:Te,minute:Te,second:Te},aw={year:Te,month:Da,day:Te,hour:Te,minute:Te},rw={year:Te,month:Da,day:Te,hour:Te,minute:Te,second:Te},PT={year:Te,month:Da,day:Te,weekday:Da,hour:Te,minute:Te},iw={year:Te,month:ta,day:Te,hour:Te,minute:Te,timeZoneName:Da},sw={year:Te,month:ta,day:Te,hour:Te,minute:Te,second:Te,timeZoneName:Da},ow={year:Te,month:ta,day:Te,weekday:ta,hour:Te,minute:Te,timeZoneName:ta},lw={year:Te,month:ta,day:Te,weekday:ta,hour:Te,minute:Te,second:Te,timeZoneName:ta};class ws{get type(){throw new Br}get name(){throw new Br}get ianaName(){return this.name}get isUniversal(){throw new Br}offsetName(n,r){throw new Br}formatOffset(n,r){throw new Br}offset(n){throw new Br}equals(n){throw new Br}get isValid(){throw new Br}}let Mf=null;class Bo extends ws{static get instance(){return Mf===null&&(Mf=new Bo),Mf}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return ww(n,r,s)}formatOffset(n,r){return Ao(this.offset(n),r)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const hh=new Map;function FT(a){let n=hh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),hh.set(a,n)),n}const ZT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function XT(a,n){const r=a.format(n).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,d,h,p,y,v]=s;return[d,l,c,h,p,y,v]}function KT(a,n){const r=a.formatToParts(n),s=[];for(let l=0;l<r.length;l++){const{type:c,value:d}=r[l],h=ZT[c];c==="era"?s[h]=d:Ye(h)||(s[h]=parseInt(d,10))}return s}const Rf=new Map;class Va extends ws{static create(n){let r=Rf.get(n);return r===void 0&&Rf.set(n,r=new Va(n)),r}static resetCache(){Rf.clear(),hh.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=Va.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return ww(n,r,s,this.name)}formatOffset(n,r){return Ao(this.offset(n),r)}offset(n){if(!this.valid)return NaN;const r=new Date(n);if(isNaN(r))return NaN;const s=FT(this.name);let[l,c,d,h,p,y,v]=s.formatToParts?KT(s,r):XT(s,r);h==="BC"&&(l=-Math.abs(l)+1);const S=Fc({year:l,month:c,day:d,hour:p===24?0:p,minute:y,second:v,millisecond:0});let E=+r;const O=E%1e3;return E-=O>=0?O:1e3+O,(S-E)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let T0={};function QT(a,n={}){const r=JSON.stringify([a,n]);let s=T0[r];return s||(s=new Intl.ListFormat(a,n),T0[r]=s),s}const ph=new Map;function mh(a,n={}){const r=JSON.stringify([a,n]);let s=ph.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,n),ph.set(r,s)),s}const yh=new Map;function JT(a,n={}){const r=JSON.stringify([a,n]);let s=yh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,n),yh.set(r,s)),s}const gh=new Map;function WT(a,n={}){const{base:r,...s}=n,l=JSON.stringify([a,s]);let c=gh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,n),gh.set(l,c)),c}let ko=null;function eO(){return ko||(ko=new Intl.DateTimeFormat().resolvedOptions().locale,ko)}const vh=new Map;function cw(a){let n=vh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat(a).resolvedOptions(),vh.set(a,n)),n}const bh=new Map;function tO(a){let n=bh.get(a);if(!n){const r=new Intl.Locale(a);n="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in n||(n={...uw,...n}),bh.set(a,n)}return n}function nO(a){const n=a.indexOf("-x-");n!==-1&&(a=a.substring(0,n));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=mh(a).resolvedOptions(),l=a}catch{const p=a.substring(0,r);s=mh(p).resolvedOptions(),l=p}const{numberingSystem:c,calendar:d}=s;return[l,c,d]}}function aO(a,n,r){return(r||n)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),n&&(a+=`-nu-${n}`)),a}function rO(a){const n=[];for(let r=1;r<=12;r++){const s=Fe.utc(2009,r,1);n.push(a(s))}return n}function iO(a){const n=[];for(let r=1;r<=7;r++){const s=Fe.utc(2016,11,13+r);n.push(a(s))}return n}function dc(a,n,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(n):s(n)}function sO(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||cw(a.locale).numberingSystem==="latn"}class oO{constructor(n,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...d}=s;if(!r||Object.keys(d).length>0){const h={useGrouping:!1,...s};s.padTo>0&&(h.minimumIntegerDigits=s.padTo),this.inf=JT(n,h)}}format(n){if(this.inf){const r=this.floor?Math.floor(n):n;return this.inf.format(r)}else{const r=this.floor?Math.floor(n):Wh(n,3);return an(r,this.padTo)}}}class lO{constructor(n,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const d=-1*(n.offset/60),h=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;n.offset!==0&&Va.create(h).valid?(l=h,this.dt=n):(l="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,l=n.zone.name):(l="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=mh(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class cO{constructor(n,r,s){this.opts={style:"long",...s},!r&&vw()&&(this.rtf=WT(n,s))}format(n,r){return this.rtf?this.rtf.format(n,r):AO(r,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,r){return this.rtf?this.rtf.formatToParts(n,r):[]}}const uw={firstDay:1,minimalDays:4,weekend:[6,7]};class xt{static fromOpts(n){return xt.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,r,s,l,c=!1){const d=n||qt.defaultLocale,h=d||(c?"en-US":eO()),p=r||qt.defaultNumberingSystem,y=s||qt.defaultOutputCalendar,v=Sh(l)||qt.defaultWeekSettings;return new xt(h,p,y,v,d)}static resetCache(){ko=null,ph.clear(),yh.clear(),gh.clear(),vh.clear(),bh.clear()}static fromObject({locale:n,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return xt.create(n,r,s,l)}constructor(n,r,s,l,c){const[d,h,p]=nO(n);this.locale=d,this.numberingSystem=r||h||null,this.outputCalendar=s||p||null,this.weekSettings=l,this.intl=aO(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=sO(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&r?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:xt.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,Sh(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,r=!1){return dc(this,n,kw,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:n,day:"numeric"}:{month:n},c=r?"format":"standalone";if(!this.monthsCache[c][n]){const d=s?h=>this.dtFormatter(h,l).format():h=>this.extract(h,l,"month");this.monthsCache[c][n]=rO(d)}return this.monthsCache[c][n]})}weekdays(n,r=!1){return dc(this,n,Tw,()=>{const s=r?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},l=r?"format":"standalone";return this.weekdaysCache[l][n]||(this.weekdaysCache[l][n]=iO(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][n]})}meridiems(){return dc(this,void 0,()=>Ow,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Fe.utc(2016,11,13,9),Fe.utc(2016,11,13,19)].map(r=>this.extract(r,n,"dayperiod"))}return this.meridiemCache})}eras(n){return dc(this,n,Nw,()=>{const r={era:n};return this.eraCache[n]||(this.eraCache[n]=[Fe.utc(-40,1,1),Fe.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[n]})}extract(n,r,s){const l=this.dtFormatter(n,r),c=l.formatToParts(),d=c.find(h=>h.type.toLowerCase()===s);return d?d.value:null}numberFormatter(n={}){return new oO(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,r={}){return new lO(n,this.intl,r)}relFormatter(n={}){return new cO(this.intl,this.isEnglish(),n)}listFormatter(n={}){return QT(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||cw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:bw()?tO(this.locale):uw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let zf=null;class jn extends ws{static get utcInstance(){return zf===null&&(zf=new jn(0)),zf}static instance(n){return n===0?jn.utcInstance:new jn(n)}static parseSpecifier(n){if(n){const r=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new jn(Zc(r[1],r[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ao(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ao(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,r){return Ao(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class dw extends ws{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Vr(a,n){if(Ye(a)||a===null)return n;if(a instanceof ws)return a;if(mO(a)){const r=a.toLowerCase();return r==="default"?n:r==="local"||r==="system"?Bo.instance:r==="utc"||r==="gmt"?jn.utcInstance:jn.parseSpecifier(r)||Va.create(a)}else return Yr(a)?jn.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new dw(a)}const Xh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},O0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},uO=Xh.hanidec.replace(/[\[|\]]/g,"").split("");function dO(a){let n=parseInt(a,10);if(isNaN(n)){n="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Xh.hanidec)!==-1)n+=uO.indexOf(a[r]);else for(const l in O0){const[c,d]=O0[l];s>=c&&s<=d&&(n+=s-c)}}return parseInt(n,10)}else return n}const wh=new Map;function fO(){wh.clear()}function Ta({numberingSystem:a},n=""){const r=a||"latn";let s=wh.get(r);s===void 0&&(s=new Map,wh.set(r,s));let l=s.get(n);return l===void 0&&(l=new RegExp(`${Xh[r]}${n}`),s.set(n,l)),l}let N0=()=>Date.now(),j0="system",A0=null,_0=null,D0=null,M0=60,R0,z0=null;class qt{static get now(){return N0}static set now(n){N0=n}static set defaultZone(n){j0=n}static get defaultZone(){return Vr(j0,Bo.instance)}static get defaultLocale(){return A0}static set defaultLocale(n){A0=n}static get defaultNumberingSystem(){return _0}static set defaultNumberingSystem(n){_0=n}static get defaultOutputCalendar(){return D0}static set defaultOutputCalendar(n){D0=n}static get defaultWeekSettings(){return z0}static set defaultWeekSettings(n){z0=Sh(n)}static get twoDigitCutoffYear(){return M0}static set twoDigitCutoffYear(n){M0=n%100}static get throwOnInvalid(){return R0}static set throwOnInvalid(n){R0=n}static resetCaches(){xt.resetCache(),Va.resetCache(),Fe.resetCache(),fO()}}class ja{constructor(n,r){this.reason=n,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const fw=[0,31,59,90,120,151,181,212,243,273,304,334],hw=[0,31,60,91,121,152,182,213,244,274,305,335];function ma(a,n){return new ja("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${a}, which is invalid`)}function Kh(a,n,r){const s=new Date(Date.UTC(a,n-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function pw(a,n,r){return r+(Uo(a)?hw:fw)[n-1]}function mw(a,n){const r=Uo(a)?hw:fw,s=r.findIndex(c=>c<n),l=n-r[s];return{month:s+1,day:l}}function Qh(a,n){return(a-n+7)%7+1}function Rc(a,n=4,r=1){const{year:s,month:l,day:c}=a,d=pw(s,l,c),h=Qh(Kh(s,l,c),r);let p=Math.floor((d-h+14-n)/7),y;return p<1?(y=s-1,p=Ro(y,n,r)):p>Ro(s,n,r)?(y=s+1,p=1):y=s,{weekYear:y,weekNumber:p,weekday:h,...Xc(a)}}function L0(a,n=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,d=Qh(Kh(s,1,n),r),h=ls(s);let p=l*7+c-d-7+n,y;p<1?(y=s-1,p+=ls(y)):p>h?(y=s+1,p-=ls(s)):y=s;const{month:v,day:b}=mw(y,p);return{year:y,month:v,day:b,...Xc(a)}}function Lf(a){const{year:n,month:r,day:s}=a,l=pw(n,r,s);return{year:n,ordinal:l,...Xc(a)}}function B0(a){const{year:n,ordinal:r}=a,{month:s,day:l}=mw(n,r);return{year:n,month:s,day:l,...Xc(a)}}function U0(a,n){if(!Ye(a.localWeekday)||!Ye(a.localWeekNumber)||!Ye(a.localWeekYear)){if(!Ye(a.weekday)||!Ye(a.weekNumber)||!Ye(a.weekYear))throw new ss("Cannot mix locale-based week fields with ISO-based week fields");return Ye(a.localWeekday)||(a.weekday=a.localWeekday),Ye(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ye(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function hO(a,n=4,r=1){const s=Pc(a.weekYear),l=ya(a.weekNumber,1,Ro(a.weekYear,n,r)),c=ya(a.weekday,1,7);return s?l?c?!1:ma("weekday",a.weekday):ma("week",a.weekNumber):ma("weekYear",a.weekYear)}function pO(a){const n=Pc(a.year),r=ya(a.ordinal,1,ls(a.year));return n?r?!1:ma("ordinal",a.ordinal):ma("year",a.year)}function yw(a){const n=Pc(a.year),r=ya(a.month,1,12),s=ya(a.day,1,zc(a.year,a.month));return n?r?s?!1:ma("day",a.day):ma("month",a.month):ma("year",a.year)}function gw(a){const{hour:n,minute:r,second:s,millisecond:l}=a,c=ya(n,0,23)||n===24&&r===0&&s===0&&l===0,d=ya(r,0,59),h=ya(s,0,59),p=ya(l,0,999);return c?d?h?p?!1:ma("millisecond",l):ma("second",s):ma("minute",r):ma("hour",n)}function Ye(a){return typeof a>"u"}function Yr(a){return typeof a=="number"}function Pc(a){return typeof a=="number"&&a%1===0}function mO(a){return typeof a=="string"}function yO(a){return Object.prototype.toString.call(a)==="[object Date]"}function vw(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function bw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function gO(a){return Array.isArray(a)?a:[a]}function I0(a,n,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[n(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function vO(a,n){return n.reduce((r,s)=>(r[s]=a[s],r),{})}function ms(a,n){return Object.prototype.hasOwnProperty.call(a,n)}function Sh(a){if(a==null)return null;if(typeof a!="object")throw new On("Week settings must be an object");if(!ya(a.firstDay,1,7)||!ya(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(n=>!ya(n,1,7)))throw new On("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function ya(a,n,r){return Pc(a)&&a>=n&&a<=r}function bO(a,n){return a-n*Math.floor(a/n)}function an(a,n=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(n,"0"):s=(""+a).padStart(n,"0"),s}function Hr(a){if(!(Ye(a)||a===null||a===""))return parseInt(a,10)}function di(a){if(!(Ye(a)||a===null||a===""))return parseFloat(a)}function Jh(a){if(!(Ye(a)||a===null||a==="")){const n=parseFloat("0."+a)*1e3;return Math.floor(n)}}function Wh(a,n,r="round"){const s=10**n;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Uo(a){return a%4===0&&(a%100!==0||a%400===0)}function ls(a){return Uo(a)?366:365}function zc(a,n){const r=bO(n-1,12)+1,s=a+(n-r)/12;return r===2?Uo(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Fc(a){let n=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(n=new Date(n),n.setUTCFullYear(a.year,a.month-1,a.day)),+n}function $0(a,n,r){return-Qh(Kh(a,1,n),r)+n-1}function Ro(a,n=4,r=1){const s=$0(a,n,r),l=$0(a+1,n,r);return(ls(a)-s+l)/7}function xh(a){return a>99?a:a>qt.twoDigitCutoffYear?1900+a:2e3+a}function ww(a,n,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const d={timeZoneName:n,...c},h=new Intl.DateTimeFormat(r,d).formatToParts(l).find(p=>p.type.toLowerCase()==="timezonename");return h?h.value:null}function Zc(a,n){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(n,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function Sw(a){const n=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(n))throw new On(`Invalid unit value ${a}`);return n}function Lc(a,n){const r={};for(const s in a)if(ms(a,s)){const l=a[s];if(l==null)continue;r[n(s)]=Sw(l)}return r}function Ao(a,n){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(n){case"short":return`${l}${an(r,2)}:${an(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${an(r,2)}${an(s,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Xc(a){return vO(a,["hour","minute","second","millisecond"])}const wO=["January","February","March","April","May","June","July","August","September","October","November","December"],xw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],SO=["J","F","M","A","M","J","J","A","S","O","N","D"];function kw(a){switch(a){case"narrow":return[...SO];case"short":return[...xw];case"long":return[...wO];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Ew=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Cw=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],xO=["M","T","W","T","F","S","S"];function Tw(a){switch(a){case"narrow":return[...xO];case"short":return[...Cw];case"long":return[...Ew];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ow=["AM","PM"],kO=["Before Christ","Anno Domini"],EO=["BC","AD"],CO=["B","A"];function Nw(a){switch(a){case"narrow":return[...CO];case"short":return[...EO];case"long":return[...kO];default:return null}}function TO(a){return Ow[a.hour<12?0:1]}function OO(a,n){return Tw(n)[a.weekday-1]}function NO(a,n){return kw(n)[a.month-1]}function jO(a,n){return Nw(n)[a.year<0?0:1]}function AO(a,n,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const b=a==="days";switch(n){case 1:return b?"tomorrow":`next ${l[a][0]}`;case-1:return b?"yesterday":`last ${l[a][0]}`;case 0:return b?"today":`this ${l[a][0]}`}}const d=Object.is(n,-0)||n<0,h=Math.abs(n),p=h===1,y=l[a],v=s?p?y[1]:y[2]||y[1]:p?l[a][0]:a;return d?`${h} ${v} ago`:`in ${h} ${v}`}function H0(a,n){let r="";for(const s of a)s.literal?r+=s.val:r+=n(s.val);return r}const _O={D:Mc,DD:G1,DDD:Y1,DDDD:P1,t:F1,tt:Z1,ttt:X1,tttt:K1,T:Q1,TT:J1,TTT:W1,TTTT:ew,f:tw,ff:aw,fff:iw,ffff:ow,F:nw,FF:rw,FFF:sw,FFFF:lw};class Nn{static create(n,r={}){return new Nn(n,r)}static parseFormat(n){let r=null,s="",l=!1;const c=[];for(let d=0;d<n.length;d++){const h=n.charAt(d);h==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||h===r?s+=h:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=h,r=h)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(n){return _O[n]}constructor(n,r){this.opts=r,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...r}).format()}dtFormatter(n,r={}){return this.loc.dtFormatter(n,{...this.opts,...r})}formatDateTime(n,r){return this.dtFormatter(n,r).format()}formatDateTimeParts(n,r){return this.dtFormatter(n,r).formatToParts()}formatInterval(n,r){return this.dtFormatter(n.start,r).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,r){return this.dtFormatter(n,r).resolvedOptions()}num(n,r=0,s=void 0){if(this.opts.forceSimple)return an(n,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(n)}formatDateTimeFromString(n,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(E,O)=>this.loc.extract(n,E,O),d=E=>n.isOffsetFixed&&n.offset===0&&E.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,E.format):"",h=()=>s?TO(n):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),p=(E,O)=>s?NO(n,E):c(O?{month:E}:{month:E,day:"numeric"},"month"),y=(E,O)=>s?OO(n,E):c(O?{weekday:E}:{weekday:E,month:"long",day:"numeric"},"weekday"),v=E=>{const O=Nn.macroTokenToFormatOpts(E);return O?this.formatWithSystemDefault(n,O):E},b=E=>s?jO(n,E):c({era:E},"era"),S=E=>{switch(E){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return h();case"d":return l?c({day:"numeric"},"day"):this.num(n.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return p("short",!0);case"LLLL":return p("long",!0);case"LLLLL":return p("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(n.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return p("short",!1);case"MMMM":return p("long",!1);case"MMMMM":return p("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(n.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(n.year,6);case"G":return b("short");case"GG":return b("long");case"GGGGG":return b("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return v(E)}};return H0(Nn.parseFormat(r),S)}formatDurationFromString(n,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=v=>{switch(v[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(v,b)=>S=>{const E=l(S);if(E){const O=b.isNegativeDuration&&E!==b.largestUnit?s:1;let Z;return this.opts.signMode==="negativeLargestOnly"&&E!==b.largestUnit?Z="never":this.opts.signMode==="all"?Z="always":Z="auto",this.num(v.get(E)*O,S.length,Z)}else return S},d=Nn.parseFormat(r),h=d.reduce((v,{literal:b,val:S})=>b?v:v.concat(S),[]),p=n.shiftTo(...h.map(l).filter(v=>v)),y={isNegativeDuration:p<0,largestUnit:Object.keys(p.values)[0]};return H0(d,c(p,y))}}const jw=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ss(...a){const n=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${n}$`)}function xs(...a){return n=>a.reduce(([r,s,l],c)=>{const[d,h,p]=c(n,l);return[{...r,...d},h||s,p]},[{},null,1]).slice(0,2)}function ks(a,...n){if(a==null)return[null,null];for(const[r,s]of n){const l=r.exec(a);if(l)return s(l)}return[null,null]}function Aw(...a){return(n,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Hr(n[r+l]);return[s,null,r+l]}}const _w=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,DO=`(?:${_w.source}?(?:\\[(${jw.source})\\])?)?`,ep=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Dw=RegExp(`${ep.source}${DO}`),tp=RegExp(`(?:[Tt]${Dw.source})?`),MO=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,RO=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zO=/(\d{4})-?(\d{3})/,LO=Aw("weekYear","weekNumber","weekDay"),BO=Aw("year","ordinal"),UO=/(\d{4})-(\d\d)-(\d\d)/,Mw=RegExp(`${ep.source} ?(?:${_w.source}|(${jw.source}))?`),IO=RegExp(`(?: ${Mw.source})?`);function cs(a,n,r){const s=a[n];return Ye(s)?r:Hr(s)}function $O(a,n){return[{year:cs(a,n),month:cs(a,n+1,1),day:cs(a,n+2,1)},null,n+3]}function Es(a,n){return[{hours:cs(a,n,0),minutes:cs(a,n+1,0),seconds:cs(a,n+2,0),milliseconds:Jh(a[n+3])},null,n+4]}function Io(a,n){const r=!a[n]&&!a[n+1],s=Zc(a[n+1],a[n+2]),l=r?null:jn.instance(s);return[{},l,n+3]}function $o(a,n){const r=a[n]?Va.create(a[n]):null;return[{},r,n+1]}const HO=RegExp(`^T?${ep.source}$`),VO=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function qO(a){const[n,r,s,l,c,d,h,p,y]=a,v=n[0]==="-",b=p&&p[0]==="-",S=(E,O=!1)=>E!==void 0&&(O||E&&v)?-E:E;return[{years:S(di(r)),months:S(di(s)),weeks:S(di(l)),days:S(di(c)),hours:S(di(d)),minutes:S(di(h)),seconds:S(di(p),p==="-0"),milliseconds:S(Jh(y),b)}]}const GO={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function np(a,n,r,s,l,c,d){const h={year:n.length===2?xh(Hr(n)):Hr(n),month:xw.indexOf(r)+1,day:Hr(s),hour:Hr(l),minute:Hr(c)};return d&&(h.second=Hr(d)),a&&(h.weekday=a.length>3?Ew.indexOf(a)+1:Cw.indexOf(a)+1),h}const YO=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function PO(a){const[,n,r,s,l,c,d,h,p,y,v,b]=a,S=np(n,l,s,r,c,d,h);let E;return p?E=GO[p]:y?E=0:E=Zc(v,b),[S,new jn(E)]}function FO(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ZO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,XO=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,KO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function V0(a){const[,n,r,s,l,c,d,h]=a;return[np(n,l,s,r,c,d,h),jn.utcInstance]}function QO(a){const[,n,r,s,l,c,d,h]=a;return[np(n,h,r,s,l,c,d),jn.utcInstance]}const JO=Ss(MO,tp),WO=Ss(RO,tp),eN=Ss(zO,tp),tN=Ss(Dw),Rw=xs($O,Es,Io,$o),nN=xs(LO,Es,Io,$o),aN=xs(BO,Es,Io,$o),rN=xs(Es,Io,$o);function iN(a){return ks(a,[JO,Rw],[WO,nN],[eN,aN],[tN,rN])}function sN(a){return ks(FO(a),[YO,PO])}function oN(a){return ks(a,[ZO,V0],[XO,V0],[KO,QO])}function lN(a){return ks(a,[VO,qO])}const cN=xs(Es);function uN(a){return ks(a,[HO,cN])}const dN=Ss(UO,IO),fN=Ss(Mw),hN=xs(Es,Io,$o);function pN(a){return ks(a,[dN,Rw],[fN,hN])}const q0="Invalid Duration",zw={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},mN={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...zw},ha=146097/400,ts=146097/4800,yN={years:{quarters:4,months:12,weeks:ha/7,days:ha,hours:ha*24,minutes:ha*24*60,seconds:ha*24*60*60,milliseconds:ha*24*60*60*1e3},quarters:{months:3,weeks:ha/28,days:ha/4,hours:ha*24/4,minutes:ha*24*60/4,seconds:ha*24*60*60/4,milliseconds:ha*24*60*60*1e3/4},months:{weeks:ts/7,days:ts,hours:ts*24,minutes:ts*24*60,seconds:ts*24*60*60,milliseconds:ts*24*60*60*1e3},...zw},mi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],gN=mi.slice(0).reverse();function ur(a,n,r=!1){const s={values:r?n.values:{...a.values,...n.values||{}},loc:a.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||a.conversionAccuracy,matrix:n.matrix||a.matrix};return new ht(s)}function Lw(a,n){let r=n.milliseconds??0;for(const s of gN.slice(1))n[s]&&(r+=n[s]*a[s].milliseconds);return r}function G0(a,n){const r=Lw(a,n)<0?-1:1;mi.reduceRight((s,l)=>{if(Ye(n[l]))return s;if(s){const c=n[s]*r,d=a[l][s],h=Math.floor(c/d);n[l]+=h*r,n[s]-=h*d*r}return l},null),mi.reduce((s,l)=>{if(Ye(n[l]))return s;if(s){const c=n[s]%1;n[s]-=c,n[l]+=c*a[s][l]}return l},null)}function Y0(a){const n={};for(const[r,s]of Object.entries(a))s!==0&&(n[r]=s);return n}class ht{constructor(n){const r=n.conversionAccuracy==="longterm"||!1;let s=r?yN:mN;n.matrix&&(s=n.matrix),this.values=n.values,this.loc=n.loc||xt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(n,r){return ht.fromObject({milliseconds:n},r)}static fromObject(n,r={}){if(n==null||typeof n!="object")throw new On(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new ht({values:Lc(n,ht.normalizeUnit),loc:xt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(n){if(Yr(n))return ht.fromMillis(n);if(ht.isDuration(n))return n;if(typeof n=="object")return ht.fromObject(n);throw new On(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,r){const[s]=lN(n);return s?ht.fromObject(s,r):ht.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,r){const[s]=uN(n);return s?ht.fromObject(s,r):ht.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,r=null){if(!n)throw new On("need to specify a reason the Duration is invalid");const s=n instanceof ja?n:new ja(n,r);if(qt.throwOnInvalid)throw new GT(s);return new ht({invalid:s})}static normalizeUnit(n){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!r)throw new q1(n);return r}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Nn.create(this.loc,s).formatDurationFromString(this,n):q0}toHuman(n={}){if(!this.isValid)return q0;const r=n.showZeros!==!1,s=mi.map(l=>{const c=this.values[l];return Ye(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=Wh(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},Fe.fromMillis(r,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Lw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n),s={};for(const l of mi)(ms(r.values,l)||ms(this.values,l))&&(s[l]=r.get(l)+this.get(l));return ur(this,{values:s},!0)}minus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n);return this.plus(r.negate())}mapUnits(n){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=Sw(n(this.values[s],s));return ur(this,{values:r},!0)}get(n){return this[ht.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const r={...this.values,...Lc(n,ht.normalizeUnit)};return ur(this,{values:r})}reconfigure({locale:n,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const d={loc:this.loc.clone({locale:n,numberingSystem:r}),matrix:l,conversionAccuracy:s};return ur(this,d)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return G0(this.matrix,n),ur(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=Y0(this.normalize().shiftToAll().toObject());return ur(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(d=>ht.normalizeUnit(d));const r={},s={},l=this.toObject();let c;for(const d of mi)if(n.indexOf(d)>=0){c=d;let h=0;for(const y in s)h+=this.matrix[y][d]*s[y],s[y]=0;Yr(l[d])&&(h+=l[d]);const p=Math.trunc(h);r[d]=p,s[d]=(h*1e3-p*1e3)/1e3}else Yr(l[d])&&(s[d]=l[d]);for(const d in s)s[d]!==0&&(r[c]+=d===c?s[d]:s[d]/this.matrix[c][d]);return G0(this.matrix,r),ur(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=this.values[r]===0?0:-this.values[r];return ur(this,{values:n},!0)}removeZeros(){if(!this.isValid)return this;const n=Y0(this.values);return ur(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of mi)if(!r(this.values[s],n.values[s]))return!1;return!0}}const ns="Invalid Interval";function vN(a,n){return!a||!a.isValid?Vt.invalid("missing or invalid start"):!n||!n.isValid?Vt.invalid("missing or invalid end"):n<a?Vt.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${n.toISO()}`):null}class Vt{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,r=null){if(!n)throw new On("need to specify a reason the Interval is invalid");const s=n instanceof ja?n:new ja(n,r);if(qt.throwOnInvalid)throw new qT(s);return new Vt({invalid:s})}static fromDateTimes(n,r){const s=wo(n),l=wo(r),c=vN(s,l);return c??new Vt({start:s,end:l})}static after(n,r){const s=ht.fromDurationLike(r),l=wo(n);return Vt.fromDateTimes(l,l.plus(s))}static before(n,r){const s=ht.fromDurationLike(r),l=wo(n);return Vt.fromDateTimes(l.minus(s),l)}static fromISO(n,r){const[s,l]=(n||"").split("/",2);if(s&&l){let c,d;try{c=Fe.fromISO(s,r),d=c.isValid}catch{d=!1}let h,p;try{h=Fe.fromISO(l,r),p=h.isValid}catch{p=!1}if(d&&p)return Vt.fromDateTimes(c,h);if(d){const y=ht.fromISO(l,r);if(y.isValid)return Vt.after(c,y)}else if(p){const y=ht.fromISO(s,r);if(y.isValid)return Vt.before(h,y)}}return Vt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(n,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(n,r),Math.floor(l.diff(s,n).get(n))+(l.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:r}={}){return this.isValid?Vt.fromDateTimes(n||this.s,r||this.e):this}splitAt(...n){if(!this.isValid)return[];const r=n.map(wo).filter(d=>this.contains(d)).sort((d,h)=>d.toMillis()-h.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const d=r[c]||this.e,h=+d>+this.e?this.e:d;s.push(Vt.fromDateTimes(l,h)),l=h,c+=1}return s}splitBy(n){const r=ht.fromDurationLike(n);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const d=[];for(;s<this.e;){const h=this.start.plus(r.mapUnits(p=>p*l));c=+h>+this.e?this.e:h,d.push(Vt.fromDateTimes(s,c)),s=c,l+=1}return d}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const r=this.s>n.s?this.s:n.s,s=this.e<n.e?this.e:n.e;return r>=s?null:Vt.fromDateTimes(r,s)}union(n){if(!this.isValid)return this;const r=this.s<n.s?this.s:n.s,s=this.e>n.e?this.e:n.e;return Vt.fromDateTimes(r,s)}static merge(n){const[r,s]=n.sort((l,c)=>l.s-c.s).reduce(([l,c],d)=>c?c.overlaps(d)||c.abutsStart(d)?[l,c.union(d)]:[l.concat([c]),d]:[l,d],[[],null]);return s&&r.push(s),r}static xor(n){let r=null,s=0;const l=[],c=n.map(p=>[{time:p.s,type:"s"},{time:p.e,type:"e"}]),d=Array.prototype.concat(...c),h=d.sort((p,y)=>p.time-y.time);for(const p of h)s+=p.type==="s"?1:-1,s===1?r=p.time:(r&&+r!=+p.time&&l.push(Vt.fromDateTimes(r,p.time)),r=null);return Vt.merge(l)}difference(...n){return Vt.xor([this].concat(n)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ns}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=Mc,r={}){return this.isValid?Nn.create(this.s.loc.clone(r),n).formatInterval(this):ns}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:ns}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ns}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:ns}toFormat(n,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(n)}${r}${this.e.toFormat(n)}`:ns}toDuration(n,r){return this.isValid?this.e.diff(this.s,n,r):ht.invalid(this.invalidReason)}mapEndpoints(n){return Vt.fromDateTimes(n(this.s),n(this.e))}}class Eo{static hasDST(n=qt.defaultZone){const r=Fe.now().setZone(n).set({month:12});return!n.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(n){return Va.isValidZone(n)}static normalizeZone(n){return Vr(n,qt.defaultZone)}static getStartOfWeek({locale:n=null,locObj:r=null}={}){return(r||xt.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:r=null}={}){return(r||xt.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:r=null}={}){return(r||xt.create(n)).getWeekendDays().slice()}static months(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||xt.create(r,s,c)).months(n)}static monthsFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||xt.create(r,s,c)).months(n,!0)}static weekdays(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||xt.create(r,s,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||xt.create(r,s,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return xt.create(n).meridiems()}static eras(n="short",{locale:r=null}={}){return xt.create(r,null,"gregory").eras(n)}static features(){return{relative:vw(),localeWeek:bw()}}}function P0(a,n){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(n)-r(a);return Math.floor(ht.fromMillis(s).as("days"))}function bN(a,n,r){const s=[["years",(p,y)=>y.year-p.year],["quarters",(p,y)=>y.quarter-p.quarter+(y.year-p.year)*4],["months",(p,y)=>y.month-p.month+(y.year-p.year)*12],["weeks",(p,y)=>{const v=P0(p,y);return(v-v%7)/7}],["days",P0]],l={},c=a;let d,h;for(const[p,y]of s)r.indexOf(p)>=0&&(d=p,l[p]=y(a,n),h=c.plus(l),h>n?(l[p]--,a=c.plus(l),a>n&&(h=a,l[p]--,a=c.plus(l))):a=h);return[a,l,h,d]}function wN(a,n,r,s){let[l,c,d,h]=bN(a,n,r);const p=n-l,y=r.filter(b=>["hours","minutes","seconds","milliseconds"].indexOf(b)>=0);y.length===0&&(d<n&&(d=l.plus({[h]:1})),d!==l&&(c[h]=(c[h]||0)+p/(d-l)));const v=ht.fromObject(c,s);return y.length>0?ht.fromMillis(p,s).shiftTo(...y).plus(v):v}const SN="missing Intl.DateTimeFormat.formatToParts support";function wt(a,n=r=>r){return{regex:a,deser:([r])=>n(dO(r))}}const xN="",Bw=`[ ${xN}]`,Uw=new RegExp(Bw,"g");function kN(a){return a.replace(/\./g,"\\.?").replace(Uw,Bw)}function F0(a){return a.replace(/\./g,"").replace(Uw," ").toLowerCase()}function Oa(a,n){return a===null?null:{regex:RegExp(a.map(kN).join("|")),deser:([r])=>a.findIndex(s=>F0(r)===F0(s))+n}}function Z0(a,n){return{regex:a,deser:([,r,s])=>Zc(r,s),groups:n}}function fc(a){return{regex:a,deser:([n])=>n}}function EN(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function CN(a,n){const r=Ta(n),s=Ta(n,"{2}"),l=Ta(n,"{3}"),c=Ta(n,"{4}"),d=Ta(n,"{6}"),h=Ta(n,"{1,2}"),p=Ta(n,"{1,3}"),y=Ta(n,"{1,6}"),v=Ta(n,"{1,9}"),b=Ta(n,"{2,4}"),S=Ta(n,"{4,6}"),E=$=>({regex:RegExp(EN($.val)),deser:([Q])=>Q,literal:!0}),Z=($=>{if(a.literal)return E($);switch($.val){case"G":return Oa(n.eras("short"),0);case"GG":return Oa(n.eras("long"),0);case"y":return wt(y);case"yy":return wt(b,xh);case"yyyy":return wt(c);case"yyyyy":return wt(S);case"yyyyyy":return wt(d);case"M":return wt(h);case"MM":return wt(s);case"MMM":return Oa(n.months("short",!0),1);case"MMMM":return Oa(n.months("long",!0),1);case"L":return wt(h);case"LL":return wt(s);case"LLL":return Oa(n.months("short",!1),1);case"LLLL":return Oa(n.months("long",!1),1);case"d":return wt(h);case"dd":return wt(s);case"o":return wt(p);case"ooo":return wt(l);case"HH":return wt(s);case"H":return wt(h);case"hh":return wt(s);case"h":return wt(h);case"mm":return wt(s);case"m":return wt(h);case"q":return wt(h);case"qq":return wt(s);case"s":return wt(h);case"ss":return wt(s);case"S":return wt(p);case"SSS":return wt(l);case"u":return fc(v);case"uu":return fc(h);case"uuu":return wt(r);case"a":return Oa(n.meridiems(),0);case"kkkk":return wt(c);case"kk":return wt(b,xh);case"W":return wt(h);case"WW":return wt(s);case"E":case"c":return wt(r);case"EEE":return Oa(n.weekdays("short",!1),1);case"EEEE":return Oa(n.weekdays("long",!1),1);case"ccc":return Oa(n.weekdays("short",!0),1);case"cccc":return Oa(n.weekdays("long",!0),1);case"Z":case"ZZ":return Z0(new RegExp(`([+-]${h.source})(?::(${s.source}))?`),2);case"ZZZ":return Z0(new RegExp(`([+-]${h.source})(${s.source})?`),2);case"z":return fc(/[a-z_+-/]{1,256}?/i);case" ":return fc(/[^\S\n\r]/);default:return E($)}})(a)||{invalidReason:SN};return Z.token=a,Z}const TN={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function ON(a,n,r){const{type:s,value:l}=a;if(s==="literal"){const p=/^\s+$/.test(l);return{literal:!p,val:p?" ":l}}const c=n[s];let d=s;s==="hour"&&(n.hour12!=null?d=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?d="hour12":d="hour24":d=r.hour12?"hour12":"hour24");let h=TN[d];if(typeof h=="object"&&(h=h[c]),h)return{literal:!1,val:h}}function NN(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function jN(a,n,r){const s=a.match(n);if(s){const l={};let c=1;for(const d in r)if(ms(r,d)){const h=r[d],p=h.groups?h.groups+1:1;!h.literal&&h.token&&(l[h.token.val[0]]=h.deser(s.slice(c,c+p))),c+=p}return[s,l]}else return[s,{}]}function AN(a){const n=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Ye(a.z)||(r=Va.create(a.z)),Ye(a.Z)||(r||(r=new jn(a.Z)),s=a.Z),Ye(a.q)||(a.M=(a.q-1)*3+1),Ye(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ye(a.u)||(a.S=Jh(a.u)),[Object.keys(a).reduce((c,d)=>{const h=n(d);return h&&(c[h]=a[d]),c},{}),r,s]}let Bf=null;function _N(){return Bf||(Bf=Fe.fromMillis(1555555555555)),Bf}function DN(a,n){if(a.literal)return a;const r=Nn.macroTokenToFormatOpts(a.val),s=Vw(r,n);return s==null||s.includes(void 0)?a:s}function Iw(a,n){return Array.prototype.concat(...a.map(r=>DN(r,n)))}class $w{constructor(n,r){if(this.locale=n,this.format=r,this.tokens=Iw(Nn.parseFormat(r),n),this.units=this.tokens.map(s=>CN(s,n)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=NN(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(n){if(this.isValid){const[r,s]=jN(n,this.regex,this.handlers),[l,c,d]=s?AN(s):[null,null,void 0];if(ms(s,"a")&&ms(s,"H"))throw new ss("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:d}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Hw(a,n,r){return new $w(a,r).explainFromTokens(n)}function MN(a,n,r){const{result:s,zone:l,specificOffset:c,invalidReason:d}=Hw(a,n,r);return[s,l,c,d]}function Vw(a,n){if(!a)return null;const s=Nn.create(n,a).dtFormatter(_N()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(d=>ON(d,a,c))}const Uf="Invalid DateTime",X0=864e13;function Co(a){return new ja("unsupported zone",`the zone "${a.name}" is not supported`)}function If(a){return a.weekData===null&&(a.weekData=Rc(a.c)),a.weekData}function $f(a){return a.localWeekData===null&&(a.localWeekData=Rc(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function fi(a,n){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Fe({...r,...n,old:r})}function qw(a,n,r){let s=a-n*60*1e3;const l=r.offset(s);if(n===l)return[s,n];s-=(l-n)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function hc(a,n){a+=n*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Ec(a,n,r){return qw(Fc(a),n,r)}function K0(a,n){const r=a.o,s=a.c.year+Math.trunc(n.years),l=a.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,zc(s,l))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},d=ht.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),h=Fc(c);let[p,y]=qw(h,r,a.zone);return d!==0&&(p+=d,y=a.zone.offset(p)),{ts:p,o:y}}function as(a,n,r,s,l,c){const{setZone:d,zone:h}=r;if(a&&Object.keys(a).length!==0||n){const p=n||h,y=Fe.fromObject(a,{...r,zone:p,specificOffset:c});return d?y:y.setZone(h)}else return Fe.invalid(new ja("unparsable",`the input "${l}" can't be parsed as ${s}`))}function pc(a,n,r=!0){return a.isValid?Nn.create(xt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,n):null}function Hf(a,n,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=an(a.c.year,s?6:4),r==="year")return l;if(n){if(l+="-",l+=an(a.c.month),r==="month")return l;l+="-"}else if(l+=an(a.c.month),r==="month")return l;return l+=an(a.c.day),l}function Q0(a,n,r,s,l,c,d){let h=!r||a.c.millisecond!==0||a.c.second!==0,p="";switch(d){case"day":case"month":case"year":break;default:if(p+=an(a.c.hour),d==="hour")break;if(n){if(p+=":",p+=an(a.c.minute),d==="minute")break;h&&(p+=":",p+=an(a.c.second))}else{if(p+=an(a.c.minute),d==="minute")break;h&&(p+=an(a.c.second))}if(d==="second")break;h&&(!s||a.c.millisecond!==0)&&(p+=".",p+=an(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?p+="Z":a.o<0?(p+="-",p+=an(Math.trunc(-a.o/60)),p+=":",p+=an(Math.trunc(-a.o%60))):(p+="+",p+=an(Math.trunc(a.o/60)),p+=":",p+=an(Math.trunc(a.o%60)))),c&&(p+="["+a.zone.ianaName+"]"),p}const Gw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},RN={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zN={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Cc=["year","month","day","hour","minute","second","millisecond"],LN=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],BN=["year","ordinal","hour","minute","second","millisecond"];function Tc(a){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!n)throw new q1(a);return n}function J0(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Tc(a)}}function UN(a){if(To===void 0&&(To=qt.now()),a.type!=="iana")return a.offset(To);const n=a.name;let r=kh.get(n);return r===void 0&&(r=a.offset(To),kh.set(n,r)),r}function W0(a,n){const r=Vr(n.zone,qt.defaultZone);if(!r.isValid)return Fe.invalid(Co(r));const s=xt.fromObject(n);let l,c;if(Ye(a.year))l=qt.now();else{for(const p of Cc)Ye(a[p])&&(a[p]=Gw[p]);const d=yw(a)||gw(a);if(d)return Fe.invalid(d);const h=UN(r);[l,c]=Ec(a,h,r)}return new Fe({ts:l,zone:r,loc:s,o:c})}function eb(a,n,r){const s=Ye(r.round)?!0:r.round,l=Ye(r.rounding)?"trunc":r.rounding,c=(h,p)=>(h=Wh(h,s||r.calendary?0:2,r.calendary?"round":l),n.loc.clone(r).relFormatter(r).format(h,p)),d=h=>r.calendary?n.hasSame(a,h)?0:n.startOf(h).diff(a.startOf(h),h).get(h):n.diff(a,h).get(h);if(r.unit)return c(d(r.unit),r.unit);for(const h of r.units){const p=d(h);if(Math.abs(p)>=1)return c(p,h)}return c(a>n?-0:0,r.units[r.units.length-1])}function tb(a){let n={},r;return a.length>0&&typeof a[a.length-1]=="object"?(n=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[n,r]}let To;const kh=new Map;class Fe{constructor(n){const r=n.zone||qt.defaultZone;let s=n.invalid||(Number.isNaN(n.ts)?new ja("invalid input"):null)||(r.isValid?null:Co(r));this.ts=Ye(n.ts)?qt.now():n.ts;let l=null,c=null;if(!s)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(r))[l,c]=[n.old.c,n.old.o];else{const h=Yr(n.o)&&!n.old?n.o:r.offset(this.ts);l=hc(this.ts,h),s=Number.isNaN(l.year)?new ja("invalid input"):null,l=s?null:l,c=s?null:h}this._zone=r,this.loc=n.loc||xt.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Fe({})}static local(){const[n,r]=tb(arguments),[s,l,c,d,h,p,y]=r;return W0({year:s,month:l,day:c,hour:d,minute:h,second:p,millisecond:y},n)}static utc(){const[n,r]=tb(arguments),[s,l,c,d,h,p,y]=r;return n.zone=jn.utcInstance,W0({year:s,month:l,day:c,hour:d,minute:h,second:p,millisecond:y},n)}static fromJSDate(n,r={}){const s=yO(n)?n.valueOf():NaN;if(Number.isNaN(s))return Fe.invalid("invalid input");const l=Vr(r.zone,qt.defaultZone);return l.isValid?new Fe({ts:s,zone:l,loc:xt.fromObject(r)}):Fe.invalid(Co(l))}static fromMillis(n,r={}){if(Yr(n))return n<-X0||n>X0?Fe.invalid("Timestamp out of range"):new Fe({ts:n,zone:Vr(r.zone,qt.defaultZone),loc:xt.fromObject(r)});throw new On(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,r={}){if(Yr(n))return new Fe({ts:n*1e3,zone:Vr(r.zone,qt.defaultZone),loc:xt.fromObject(r)});throw new On("fromSeconds requires a numerical input")}static fromObject(n,r={}){n=n||{};const s=Vr(r.zone,qt.defaultZone);if(!s.isValid)return Fe.invalid(Co(s));const l=xt.fromObject(r),c=Lc(n,J0),{minDaysInFirstWeek:d,startOfWeek:h}=U0(c,l),p=qt.now(),y=Ye(r.specificOffset)?s.offset(p):r.specificOffset,v=!Ye(c.ordinal),b=!Ye(c.year),S=!Ye(c.month)||!Ye(c.day),E=b||S,O=c.weekYear||c.weekNumber;if((E||v)&&O)throw new ss("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(S&&v)throw new ss("Can't mix ordinal dates with month/day");const Z=O||c.weekday&&!E;let $,Q,K=hc(p,y);Z?($=LN,Q=RN,K=Rc(K,d,h)):v?($=BN,Q=zN,K=Lf(K)):($=Cc,Q=Gw);let z=!1;for(const Y of $){const fe=c[Y];Ye(fe)?z?c[Y]=Q[Y]:c[Y]=K[Y]:z=!0}const P=Z?hO(c,d,h):v?pO(c):yw(c),he=P||gw(c);if(he)return Fe.invalid(he);const pe=Z?L0(c,d,h):v?B0(c):c,[G,ue]=Ec(pe,y,s),te=new Fe({ts:G,zone:s,o:ue,loc:l});return c.weekday&&E&&n.weekday!==te.weekday?Fe.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${te.toISO()}`):te.isValid?te:Fe.invalid(te.invalid)}static fromISO(n,r={}){const[s,l]=iN(n);return as(s,l,r,"ISO 8601",n)}static fromRFC2822(n,r={}){const[s,l]=sN(n);return as(s,l,r,"RFC 2822",n)}static fromHTTP(n,r={}){const[s,l]=oN(n);return as(s,l,r,"HTTP",r)}static fromFormat(n,r,s={}){if(Ye(n)||Ye(r))throw new On("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,d=xt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[h,p,y,v]=MN(d,n,r);return v?Fe.invalid(v):as(h,p,s,`format ${r}`,n,y)}static fromString(n,r,s={}){return Fe.fromFormat(n,r,s)}static fromSQL(n,r={}){const[s,l]=pN(n);return as(s,l,r,"SQL",n)}static invalid(n,r=null){if(!n)throw new On("need to specify a reason the DateTime is invalid");const s=n instanceof ja?n:new ja(n,r);if(qt.throwOnInvalid)throw new VT(s);return new Fe({invalid:s})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,r={}){const s=Vw(n,xt.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(n,r={}){return Iw(Nn.parseFormat(n),xt.fromObject(r)).map(l=>l.val).join("")}static resetCache(){To=void 0,kh.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?If(this).weekYear:NaN}get weekNumber(){return this.isValid?If(this).weekNumber:NaN}get weekday(){return this.isValid?If(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?$f(this).weekday:NaN}get localWeekNumber(){return this.isValid?$f(this).weekNumber:NaN}get localWeekYear(){return this.isValid?$f(this).weekYear:NaN}get ordinal(){return this.isValid?Lf(this.c).ordinal:NaN}get monthShort(){return this.isValid?Eo.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Eo.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Eo.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Eo.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,r=6e4,s=Fc(this.c),l=this.zone.offset(s-n),c=this.zone.offset(s+n),d=this.zone.offset(s-l*r),h=this.zone.offset(s-c*r);if(d===h)return[this];const p=s-d*r,y=s-h*r,v=hc(p,d),b=hc(y,h);return v.hour===b.hour&&v.minute===b.minute&&v.second===b.second&&v.millisecond===b.millisecond?[fi(this,{ts:p}),fi(this,{ts:y})]:[this]}get isInLeapYear(){return Uo(this.year)}get daysInMonth(){return zc(this.year,this.month)}get daysInYear(){return this.isValid?ls(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ro(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ro(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:r,numberingSystem:s,calendar:l}=Nn.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(n=0,r={}){return this.setZone(jn.instance(n),r)}toLocal(){return this.setZone(qt.defaultZone)}setZone(n,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(n=Vr(n,qt.defaultZone),n.equals(this.zone))return this;if(n.isValid){let l=this.ts;if(r||s){const c=n.offset(this.ts),d=this.toObject();[l]=Ec(d,c,n)}return fi(this,{ts:l,zone:n})}else return Fe.invalid(Co(n))}reconfigure({locale:n,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:n,numberingSystem:r,outputCalendar:s});return fi(this,{loc:l})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const r=Lc(n,J0),{minDaysInFirstWeek:s,startOfWeek:l}=U0(r,this.loc),c=!Ye(r.weekYear)||!Ye(r.weekNumber)||!Ye(r.weekday),d=!Ye(r.ordinal),h=!Ye(r.year),p=!Ye(r.month)||!Ye(r.day),y=h||p,v=r.weekYear||r.weekNumber;if((y||d)&&v)throw new ss("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&d)throw new ss("Can't mix ordinal dates with month/day");let b;c?b=L0({...Rc(this.c,s,l),...r},s,l):Ye(r.ordinal)?(b={...this.toObject(),...r},Ye(r.day)&&(b.day=Math.min(zc(b.year,b.month),b.day))):b=B0({...Lf(this.c),...r});const[S,E]=Ec(b,this.o,this.zone);return fi(this,{ts:S,o:E})}plus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n);return fi(this,K0(this,r))}minus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n).negate();return fi(this,K0(this,r))}startOf(n,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=ht.normalizeUnit(n);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:d}=this;d<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(n,r){return this.isValid?this.plus({[n]:1}).startOf(n,r).minus(1):this}toFormat(n,r={}){return this.isValid?Nn.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,n):Uf}toLocaleString(n=Mc,r={}){return this.isValid?Nn.create(this.loc.clone(r),n).formatDateTime(this):Uf}toLocaleParts(n={}){return this.isValid?Nn.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:d="milliseconds"}={}){if(!this.isValid)return null;d=Tc(d);const h=n==="extended";let p=Hf(this,h,d);return Cc.indexOf(d)>=3&&(p+="T"),p+=Q0(this,h,r,s,l,c,d),p}toISODate({format:n="extended",precision:r="day"}={}){return this.isValid?Hf(this,n==="extended",Tc(r)):null}toISOWeekDate(){return pc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:d="extended",precision:h="milliseconds"}={}){return this.isValid?(h=Tc(h),(l&&Cc.indexOf(h)>=3?"T":"")+Q0(this,d==="extended",r,n,s,c,h)):null}toRFC2822(){return pc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return pc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Hf(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||n)&&(s&&(l+=" "),r?l+="z":n&&(l+="ZZ")),pc(this,l,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():Uf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const r={...this.c};return n.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,r="milliseconds",s={}){if(!this.isValid||!n.isValid)return ht.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=gO(r).map(ht.normalizeUnit),d=n.valueOf()>this.valueOf(),h=d?this:n,p=d?n:this,y=wN(h,p,c,l);return d?y.negate():y}diffNow(n="milliseconds",r={}){return this.diff(Fe.now(),n,r)}until(n){return this.isValid?Vt.fromDateTimes(this,n):this}hasSame(n,r,s){if(!this.isValid)return!1;const l=n.valueOf(),c=this.setZone(n.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const r=n.base||Fe.fromObject({},{zone:this.zone}),s=n.padding?this<r?-n.padding:n.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=n.unit;return Array.isArray(n.unit)&&(l=n.unit,c=void 0),eb(r,this.plus(s),{...n,numeric:"always",units:l,unit:c})}toRelativeCalendar(n={}){return this.isValid?eb(n.base||Fe.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(Fe.isDateTime))throw new On("min requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.min)}static max(...n){if(!n.every(Fe.isDateTime))throw new On("max requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.max)}static fromFormatExplain(n,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,d=xt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return Hw(d,n,r)}static fromStringExplain(n,r,s={}){return Fe.fromFormatExplain(n,r,s)}static buildFormatParser(n,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=xt.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new $w(c,n)}static fromFormatParser(n,r,s={}){if(Ye(n)||Ye(r))throw new On("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,d=xt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!d.equals(r.locale))throw new On(`fromFormatParser called with a locale of ${d}, but the format parser was created for ${r.locale}`);const{result:h,zone:p,specificOffset:y,invalidReason:v}=r.explainFromTokens(n);return v?Fe.invalid(v):as(h,p,s,`format ${r.format}`,n,y)}static get DATE_SHORT(){return Mc}static get DATE_MED(){return G1}static get DATE_MED_WITH_WEEKDAY(){return YT}static get DATE_FULL(){return Y1}static get DATE_HUGE(){return P1}static get TIME_SIMPLE(){return F1}static get TIME_WITH_SECONDS(){return Z1}static get TIME_WITH_SHORT_OFFSET(){return X1}static get TIME_WITH_LONG_OFFSET(){return K1}static get TIME_24_SIMPLE(){return Q1}static get TIME_24_WITH_SECONDS(){return J1}static get TIME_24_WITH_SHORT_OFFSET(){return W1}static get TIME_24_WITH_LONG_OFFSET(){return ew}static get DATETIME_SHORT(){return tw}static get DATETIME_SHORT_WITH_SECONDS(){return nw}static get DATETIME_MED(){return aw}static get DATETIME_MED_WITH_SECONDS(){return rw}static get DATETIME_MED_WITH_WEEKDAY(){return PT}static get DATETIME_FULL(){return iw}static get DATETIME_FULL_WITH_SECONDS(){return sw}static get DATETIME_HUGE(){return ow}static get DATETIME_HUGE_WITH_SECONDS(){return lw}}function wo(a){if(Fe.isDateTime(a))return a;if(a&&a.valueOf&&Yr(a.valueOf()))return Fe.fromJSDate(a);if(a&&typeof a=="object")return Fe.fromObject(a);throw new On(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const IN="3.7.2",$N=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Fe,Duration:ht,FixedOffsetZone:jn,IANAZone:Va,Info:Eo,Interval:Vt,InvalidZone:dw,Settings:qt,SystemZone:Bo,VERSION:IN,Zone:ws},Symbol.toStringTag,{value:"Module"}));window.Rete=Mk;window.React=rk;window.RefComponent=Hh;window.luxon=$N;window.nodeRegistry=Tn;window.sockets=O1;window.socket=ge;window.apiUrl=qn;window.getApiBase=qc;window.apiFetch=async function(a,n={}){const r=qn(a);return fetch(r,n)};let Pr={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const Eh=new Set;function Yw(a){return Eh.add(a),a({...Pr}),()=>Eh.delete(a)}function Ur(a){Pr={...Pr,...a},Eh.forEach(n=>n({...Pr}))}function HN(){return{...Pr}}async function VN(){Ur({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(qn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const n=await a.json(),r=n.length,s=n.filter(p=>p.includes("/00_")),l=n.filter(p=>!p.includes("/00_"));Ur({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const p of s){const y=p.split("/").pop().replace(".js","");Ur({status:`Loading ${y}...`});try{await nb(qn(p)),c++,Ur({loadedCount:c,progress:Math.round(c/r*100)})}catch(v){console.error(`[PluginLoader] Failed to load infrastructure ${p}`,v),Pr.failedPlugins.push({name:y,error:v.message})}}Ur({status:`Loading ${l.length} node plugins in parallel...`});const d=await Promise.allSettled(l.map(async p=>{const y=p.split("/").pop().replace(".js","");try{return await nb(qn(p)),c++,Ur({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:y}}catch(v){return console.error(`[PluginLoader] Failed to load ${p}`,v),Pr.failedPlugins.push({name:y,error:v.message}),{success:!1,name:y,error:v.message}}})),h=Pr.failedPlugins.length;Ur({isLoading:!1,progress:100,status:h>0?`Loaded ${c} plugins (${h} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Ur({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function nb(a){return new Promise((n,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=n,s.onerror=r,document.body.appendChild(s)})}const Pw=k.createContext(null),ab={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function qN({id:a,type:n,message:r,duration:s,onRemove:l,action:c,actionLabel:d}){const[h,p]=k.useState(!1),y=ab[n]||ab.info;k.useEffect(()=>{if(s>0){const S=setTimeout(()=>{p(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(S)}},[a,s,l]);const v=()=>{p(!0),setTimeout(()=>l(a),300)},b=()=>{c&&c(),v()};return m.jsxs("div",{className:`toast ${y.className} ${h?"toast-exit":""}`,children:[m.jsx("span",{className:"toast-icon",children:y.icon}),m.jsx("span",{className:"toast-message",children:r}),c&&d&&m.jsx("button",{className:"toast-action",onClick:b,children:d}),m.jsx("button",{className:"toast-close",onClick:v,children:""})]})}function GN({children:a}){const[n,r]=k.useState([]);let s=0;const l=k.useCallback((h,p,y={})=>{const v=++s,b=typeof y=="number"?y:y.duration??4e3,S=typeof y=="object"?y.action:null,E=typeof y=="object"?y.actionLabel:null;return r(O=>[...O,{id:v,type:h,message:p,duration:b,action:S,actionLabel:E}]),v},[]),c=k.useCallback(h=>{r(p=>p.filter(y=>y.id!==h))},[]),d={success:(h,p)=>l("success",h,p),error:(h,p)=>l("error",h,typeof p=="number"?p:{duration:6e3,...p}),warning:(h,p)=>l("warning",h,p),info:(h,p)=>l("info",h,p),dismiss:c,dismissAll:()=>r([])};return m.jsxs(Pw.Provider,{value:d,children:[a,m.jsx("div",{className:"toast-container",children:n.map(h=>m.jsx(qN,{id:h.id,type:h.type,message:h.message,duration:h.duration,onRemove:c,action:h.action,actionLabel:h.actionLabel},h.id))})]})}function ap(){const a=k.useContext(Pw);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function YN(){const a=ap();return k.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const rb=window.location.pathname.includes("/api/hassio/ingress/");function PN({onSave:a,onLoad:n,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:d,isMerged:h=!1,onToggleMerged:p}){const[y,v]=k.useState(!1),[b,S]=k.useState(!1),[E,O]=k.useState(!1),[Z,$]=k.useState([]),[Q,K]=k.useState(!1),[z,P]=k.useState(!1),[he,pe]=k.useState(!1),[G,ue]=k.useState(null),te=ap(),[Y,fe]=k.useState(()=>{const C=localStorage.getItem("dock-position");return C?JSON.parse(C):{x:20,y:20}}),[Ne,Re]=k.useState(!1),[$e,qe]=k.useState({x:0,y:0}),[I,re]=k.useState(!0),[ve,ze]=k.useState(!0),[H,x]=k.useState(!1),[L,N]=k.useState(new Date),[M,le]=k.useState({backend:ge.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[ye,je]=k.useState({loaded:0,failed:0,total:0}),[Qe,Ze]=k.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let Mt;const It=k.useRef(null),At=k.useRef(null);k.useEffect(()=>{(async()=>{try{const D=await fetch("/api/version");if(D.ok){const oe=await D.json();ue(oe.version)}}catch{}})()},[]),k.useEffect(()=>{Mt=Yw(D=>{let oe=0,de=D.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(oe=window.nodeRegistry.getAll().length,(!de||oe>de)&&(de=oe)):oe=D.loadedCount,je({loaded:oe,failed:D.failedPlugins?.length||0,total:de})});const C=D=>{D.target.tagName==="INPUT"||D.target.tagName==="TEXTAREA"||D.target.isContentEditable||(D.key==="?"||D.shiftKey&&D.code==="Slash")&&(D.preventDefault(),S(!0))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[]),k.useEffect(()=>{const C=()=>{le(De=>({...De,backend:!0})),ge.emit("request-hue-status")},D=()=>le(De=>({...De,backend:!1})),oe=De=>le(rt=>({...rt,ha:{connected:De.connected,wsConnected:De.wsConnected,deviceCount:De.deviceCount||0}})),de=De=>{De.hue&&le(rt=>({...rt,hue:De.hue})),De.kasa&&le(rt=>({...rt,kasa:De.kasa}))},be=De=>{le(rt=>({...rt,hue:{connected:De.connected,deviceCount:De.deviceCount||0,bridgeIp:De.bridgeIp||null}}))};ge.on("connect",C),ge.on("disconnect",D),ge.on("ha-connection-status",oe),ge.on("device-counts",de),ge.on("hue-connection-status",be);const Oe=De=>Ze(De),He=De=>Ze(rt=>({...rt,...De,running:!0})),Xe=De=>Ze(rt=>({...rt,...De,running:!1}));ge.on("engine-status",Oe),ge.on("engine-started",He),ge.on("engine-stopped",Xe),le(De=>({...De,backend:ge.connected})),ge.connected&&(ge.emit("request-hue-status"),ge.emit("request-engine-status"));const yt=HN();let Ue=0,Ve=yt.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(Ue=window.nodeRegistry.getAll().length,(!Ve||Ue>Ve)&&(Ve=Ue)):Ue=yt.loadedCount,je({loaded:Ue,failed:yt.failedPlugins?.length||0,total:Ve}),()=>{ge.off("connect",C),ge.off("disconnect",D),ge.off("ha-connection-status",oe),ge.off("device-counts",de),ge.off("hue-connection-status",be),ge.off("engine-status",Oe),ge.off("engine-started",He),ge.off("engine-stopped",Xe),Mt&&Mt()}},[]),k.useEffect(()=>{const C=setInterval(()=>{N(new Date)},1e3);return()=>clearInterval(C)},[]);const _n=()=>{const C={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return L.toLocaleDateString("en-US",C)};k.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(Y))},[Y]);const dn=C=>{h||C.target.closest(".dock-header")&&(Re(!0),qe({x:C.clientX-Y.x,y:C.clientY-Y.y}))},on=C=>{Ne&&fe({x:C.clientX-$e.x,y:C.clientY-$e.y})},Dn=()=>{Re(!1)};k.useEffect(()=>{if(Ne)return window.addEventListener("mousemove",on),window.addEventListener("mouseup",Dn),()=>{window.removeEventListener("mousemove",on),window.removeEventListener("mouseup",Dn)}},[Ne,$e]);const We=()=>{At.current?.click()},V=C=>{const D=C.target.files?.[0];if(D){const oe=new FileReader;oe.onload=de=>{try{const be=JSON.parse(de.target.result);c(be)}catch(be){console.error("Failed to parse JSON:",be),alert("Invalid JSON file")}},oe.readAsText(D)}C.target.value=""},ie=async()=>{O(!0),K(!0);try{const C=await Vn("/api/engine/graphs");if(C.ok){const D=await C.json();$(D.graphs||[])}else te.error("Failed to load graphs list"),$([])}catch(C){console.error("Failed to fetch server graphs:",C),te.error("Failed to connect to server"),$([])}finally{K(!1)}},J=async C=>{try{const D=await Vn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(D.ok){const oe=await D.json();oe.graph&&(c(oe.graph),O(!1),te.success(`Loaded: ${C.replace(".json","")}`))}else te.error("Failed to load graph")}catch(D){console.error("Failed to load graph:",D),te.error("Failed to load graph")}},Ae=async(C,D)=>{D.stopPropagation();try{const oe=await Vn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(oe.ok){const de=await oe.json();if(de.graph){const be=new Blob([JSON.stringify(de.graph,null,2)],{type:"application/json"}),Oe=URL.createObjectURL(be),He=document.createElement("a");He.href=Oe,He.download=C.endsWith(".json")?C:`${C}.json`,He.click(),URL.revokeObjectURL(Oe),te.success(`Downloaded: ${C.replace(".json","")}`)}}else te.error("Failed to download graph")}catch(oe){console.error("Failed to download graph:",oe),te.error("Failed to download graph")}},xe=async()=>{if(!z){P(!0);try{const C=await Vn("/api/update/check?force=true");if(!C.ok){const oe=await C.text();throw new Error(oe||`HTTP ${C.status}`)}const D=await C.json();if(D.isAddon){D.hasUpdate?te.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):te.success(` You're up to date! (v${D.currentVersion})`,4e3);return}D.hasUpdate?te.info(` Update available: ${D.currentVersion}  ${D.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{ge.emit("request-show-update-modal",D),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:D}))}}):te.success(` You're up to date! (v${D.currentVersion})`,4e3)}catch(C){console.error("Failed to check for updates:",C),te.error("Failed to check for updates: "+C.message,5e3)}finally{P(!1)}}},se=async()=>{if(!he){pe(!0);try{const C=await Vn("/api/update/plugins/check");if(!C.ok)throw new Error(`HTTP ${C.status}`);const D=await C.json();if(!D.hasUpdates){te.success(" Plugins are up to date!",3e3);return}const oe=(D.newPlugins?.length||0)+(D.modifiedPlugins?.length||0);te.info(` ${oe} plugin update(s) available. Downloading...`,3e3);const de=await Vn("/api/update/plugins",{method:"POST"});if(!de.ok)throw new Error(`HTTP ${de.status}`);const be=await de.json();be.success&&be.updated?.length>0?te.success(` Updated ${be.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):be.updated?.length===0?te.info("No plugins needed updating",3e3):te.error("Plugin update failed: "+(be.error||"Unknown error"),5e3)}catch(C){console.error("Failed to update plugins:",C),te.error("Failed to update plugins: "+C.message,5e3)}finally{pe(!1)}}};return m.jsxs("div",{ref:It,className:`dock-container ${h?"dock-merged":""}`,style:{...h?{cursor:"default"}:{left:`${Y.x}px`,top:`${Y.y}px`,cursor:Ne?"grabbing":"default"}},onMouseDown:dn,children:[m.jsxs("div",{className:"dock-header",style:{cursor:h?"default":"grab"},children:[m.jsxs("div",{className:"dock-header-row",children:[m.jsx("span",{className:"dock-title",children:" Control Panel"}),m.jsx("button",{type:"button",className:"dock-btn-small",onClick:C=>{C.stopPropagation(),p?.()},onMouseDown:C=>C.stopPropagation(),title:h?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:h?"Pop out":"Merge"})]}),m.jsx("span",{className:"dock-datetime",children:_n()})]}),m.jsxs("div",{className:"dock-section",children:[m.jsx("div",{className:"dock-section-header",onClick:()=>re(!I),children:m.jsxs("span",{children:[I?"":""," Graph Tools ",d&&m.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),I&&m.jsxs("div",{className:"dock-section-content",children:[m.jsxs("button",{onClick:a,className:`dock-btn ${d?"dock-btn-unsaved":""}`,children:[" Save ",d&&"*"]}),m.jsx("button",{onClick:n,className:"dock-btn",children:" Load Last"}),m.jsx("button",{onClick:ie,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),m.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),m.jsx("button",{onClick:We,className:"dock-btn",children:" Import File"}),m.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),m.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),m.jsx("button",{onClick:()=>ge.emit(Qe.running?"stop-engine":"start-engine"),className:`dock-btn ${Qe.running?"dock-btn-active":""}`,title:Qe.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:Qe.running?" Stop Engine":" Start Engine"}),m.jsx("input",{ref:At,type:"file",accept:".json",style:{display:"none"},onChange:V})]})]}),m.jsxs("div",{className:"dock-section",children:[m.jsx("div",{className:"dock-section-header",onClick:()=>ze(!ve),children:m.jsxs("span",{children:[ve?"":""," Connection Status"]})}),ve&&m.jsxs("div",{className:"dock-section-content dock-status-grid",children:[m.jsxs("div",{className:`dock-status-item ${M.backend?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Backend"}),m.jsx("span",{className:"dock-status-value",children:M.backend?"Connected":"Offline"})]}),m.jsxs("div",{className:`dock-status-item ${M.ha.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),m.jsx("span",{className:"dock-status-value",children:M.ha.connected?`${M.ha.deviceCount} devices`:"Offline"})]}),m.jsxs("div",{className:`dock-status-item ${M.hue.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),m.jsx("span",{className:"dock-status-value",children:M.hue.connected?`${M.hue.deviceCount||0} lights${M.hue.bridgeIp?` (${M.hue.bridgeIp})`:""}`:"Offline"})]}),M.kasa.deviceCount>0&&m.jsxs("div",{className:`dock-status-item ${M.kasa.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Kasa"}),m.jsxs("span",{className:"dock-status-value",children:[M.kasa.deviceCount," devices"]})]}),m.jsxs("div",{className:"dock-status-item plugins",children:[m.jsx("span",{className:"dock-status-dot",style:{background:ye.failed>0?"#f59e0b":"#10b981"}}),m.jsx("span",{className:"dock-status-label",children:"Plugins"}),m.jsx("span",{className:"dock-status-value",children:ye.total>0?`${ye.loaded} / ${ye.total} loaded${ye.failed>0?` (${ye.failed} failed)`:""}`:`${ye.loaded} loaded`})]}),m.jsxs("div",{className:`dock-status-item ${Qe.running?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot",style:{background:Qe.running?"#10b981":"#6b7280"}}),m.jsx("span",{className:"dock-status-label",children:"Engine"}),m.jsx("span",{className:"dock-status-value",children:Qe.running?`Running (${Qe.nodeCount} nodes)`:"Stopped"})]})]})]}),m.jsx(qC,{isExpanded:H,onToggle:()=>x(!H)}),m.jsxs("div",{className:"dock-section",children:[m.jsxs("div",{className:"dock-section-content",children:[m.jsx("button",{onClick:()=>v(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),m.jsx("button",{onClick:()=>S(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),m.jsx("button",{onClick:async()=>{let C=G||"unknown";try{const be=await fetch("/api/version");be.ok&&(C=(await be.json()).version||C)}catch{}const D={version:C,userAgent:navigator.userAgent,isAddon:rb,backend:M.backend,ha:M.ha.connected,engine:Qe.running,plugins:ye.loaded},oe=Object.entries(D).map(([be,Oe])=>`- **${be}**: ${Oe}`).join(`
`),de=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");de.searchParams.set("template","bug_report.md"),de.searchParams.set("title","[Bug]: "),de.searchParams.set("body",`##  Environment (auto-filled)
${oe}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(de.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),m.jsx("button",{onClick:()=>{const C=`${window.location.origin}/tools/debug_dashboard.html`;window.open(C,"_blank")},className:"dock-btn",title:"Open Debug Dashboard in new tab",children:" Debug Dashboard"}),rb?m.jsx("button",{onClick:()=>te.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):m.jsx("button",{onClick:xe,disabled:z,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:z?" Checking...":" Check for Updates"}),m.jsx("button",{onClick:se,disabled:he,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:he?" Updating...":" Update Plugins"})]}),G&&m.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",G]})]}),m.jsx($C,{isOpen:y,onClose:()=>v(!1)}),m.jsx(VC,{isOpen:b,onClose:()=>S(!1)}),E&&m.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:m.jsxs("div",{className:"modal server-graphs-modal",onClick:C=>C.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:" Saved Graphs"}),m.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:""})]}),m.jsx("div",{className:"modal-body",children:Q?m.jsx("div",{className:"loading-message",children:"Loading graphs..."}):Z.length===0?m.jsxs("div",{className:"empty-message",children:[m.jsx("p",{children:"No saved graphs found."}),m.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):m.jsx("div",{className:"graphs-list",children:Z.map((C,D)=>m.jsxs("div",{className:"graph-item",children:[m.jsxs("div",{className:"graph-info",onClick:()=>J(C.name),title:"Click to load this graph",children:[m.jsx("span",{className:"graph-name",children:C.displayName}),m.jsx("span",{className:"graph-date",children:new Date(C.modified).toLocaleDateString()})]}),m.jsx("button",{className:"graph-download-btn",onClick:oe=>Ae(C.name,oe),title:"Download this graph to your computer",children:""})]},D))})})]})})]})}function FN({dockSlotRef:a}){const[n,r]=k.useState(!0),[s,l]=k.useState(!0),[c,d]=k.useState(null),[h,p]=k.useState(null),[y,v]=k.useState(ge?.connected??!1),[b,S]=k.useState({connected:!1,wsConnected:!1,deviceCount:0}),[E,O]=k.useState(new Map),[Z,$]=k.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[Q,K]=k.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),z=k.useRef(null);k.useEffect(()=>{if(!ge)return;const Y=()=>{v(!0),ge.emit("request-ha-status")},fe=()=>{v(!1),S({connected:!1,wsConnected:!1,deviceCount:0})},Ne=$e=>{S($e)};ge.on("connect",Y),ge.on("disconnect",fe),ge.on("ha-connection-status",Ne),ge.on("forecast-update",$e=>{d($e)});const Re=$e=>{const{id:qe,state:I,on:re,name:ve}=$e;if(!qe)return;const ze=re!==void 0?re:I==="on"||I==="playing"||I==="open",H=ve||$e.friendly_name||$e.attributes?.friendly_name||qe.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(qe.includes("light.")||qe.includes("switch.")||qe.startsWith("kasa_"))&&O(L=>{const N=new Map(L);return ze?N.set(qe,{name:H,on:!0}):N.delete(qe),N})};return ge.on("device-state-update",Re),ge.emit("request-forecast"),ge.connected&&(v(!0),ge.emit("request-ha-status")),()=>{ge.off("connect",Y),ge.off("disconnect",fe),ge.off("ha-connection-status",Ne),ge.off("forecast-update"),ge.off("device-state-update",Re)}},[]);const P=()=>{ge?.emit("request-forecast")},he=Y=>{const fe=(Y||"").toLowerCase();return fe.includes("clear")||fe.includes("sun")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"5"}),m.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),m.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),m.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),m.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),m.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),m.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),m.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),m.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):fe.includes("rain")||fe.includes("drizzle")||fe.includes("shower")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),m.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),m.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),m.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),m.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),m.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),m.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):fe.includes("partly")||fe.includes("partial")||fe.includes("few")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),m.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),m.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),m.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),m.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),m.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),m.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):fe.includes("snow")||fe.includes("flurr")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),m.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),m.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),m.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),m.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),m.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),m.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):fe.includes("thunder")||fe.includes("storm")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),m.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):fe.includes("fog")||fe.includes("mist")||fe.includes("haze")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),m.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),m.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},pe=Y=>{if(!Y)return{day:"",date:""};let fe;if(typeof Y=="string"&&Y.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const $e=Y.match(/(\w+),\s*(\w+)\s*(\d+)/);return $e?{day:`${$e[1]}, ${$e[2]}`,date:$e[3]}:{day:Y,date:""}}if(fe=new Date(parseInt(Y)||Y),isNaN(fe.getTime()))return{day:Y,date:""};const Ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${Ne[fe.getUTCDay()]}, ${Re[fe.getUTCMonth()]}`,date:`${fe.getUTCDate()}`}},G=()=>{if(!c||!c.length)return m.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(h!==null){const Y=c[h],fe=pe(Y.date||Y.day);return m.jsxs("div",{className:"forecast-detail",children:[m.jsxs("div",{className:"forecast-detail-header",children:[m.jsx("button",{className:"detail-back-btn",onClick:()=>p(null),children:" Back"}),m.jsxs("span",{className:"detail-date",children:[fe.day," ",fe.date]})]}),m.jsxs("div",{className:"detail-main",children:[m.jsx("div",{className:"detail-icon",children:he(Y.conditions||Y.condition)}),m.jsxs("div",{className:"detail-temps",children:[m.jsxs("div",{className:"detail-high",children:[Y.high,""]}),m.jsxs("div",{className:"detail-low",children:[Y.low,""]})]}),m.jsx("div",{className:"detail-condition",children:Y.conditions||Y.condition||"N/A"})]}),Y.description&&m.jsx("div",{className:"detail-description",children:Y.description}),m.jsxs("div",{className:"detail-stats",children:[m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Precipitation"}),m.jsx("span",{className:"stat-value",children:Y.precipitation||Y.precip||"0%"})]}),Y.humidity&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Humidity"}),m.jsxs("span",{className:"stat-value",children:[Y.humidity,"%"]})]}),Y.wind&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Wind"}),m.jsx("span",{className:"stat-value",children:Y.wind})]}),(Y.sunrise||Y.sunset)&&m.jsxs("div",{className:"detail-sun-times",children:[Y.sunrise&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:" Sunrise"}),m.jsx("span",{className:"stat-value",children:Y.sunrise})]}),Y.sunset&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:" Sunset"}),m.jsx("span",{className:"stat-value",children:Y.sunset})]})]})]})]})}return c.slice(0,5).map((Y,fe)=>{const Ne=pe(Y.date||Y.day);return m.jsxs("div",{className:"forecast-card",onClick:()=>p(fe),children:[m.jsxs("div",{className:"forecast-row-top",children:[m.jsxs("div",{className:"forecast-date",children:[m.jsx("span",{className:"date-day",children:Ne.day}),m.jsx("span",{className:"date-num",children:Ne.date})]}),m.jsx("div",{className:"forecast-icon",children:he(Y.conditions||Y.condition)})]}),m.jsxs("div",{className:"forecast-row-bottom",children:[m.jsxs("span",{className:"temp-low",children:[Y.low,""]}),m.jsxs("span",{className:"temp-high",children:[Y.high,""]}),m.jsxs("span",{className:"precip-group",children:[m.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),m.jsx("path",{d:"M16 14v4"}),m.jsx("path",{d:"M8 14v4"}),m.jsx("path",{d:"M12 16v4"})]}),m.jsx("span",{className:"precip-value",children:Y.precipitation||Y.precip||"0%"})]})]})]},fe)})},ue=Y=>{Y.preventDefault();const fe=Y.clientX,Ne=Z,Re=qe=>{const I=fe-qe.clientX,re=Math.max(250,Math.min(500,Ne+I));$(re),localStorage.setItem("forecastPanelWidth",re)},$e=()=>{document.removeEventListener("mousemove",Re),document.removeEventListener("mouseup",$e)};document.addEventListener("mousemove",Re),document.addEventListener("mouseup",$e)},te=Y=>{Y.preventDefault(),Y.stopPropagation();const fe=Y.clientY,Ne=Q,Re=qe=>{const I=fe-qe.clientY,re=Math.max(100,Math.min(500,Ne+I));K(re),localStorage.setItem("devicesOnHeight",re)},$e=()=>{document.removeEventListener("mousemove",Re),document.removeEventListener("mouseup",$e)};document.addEventListener("mousemove",Re),document.addEventListener("mouseup",$e)};return m.jsxs("div",{className:"forecast-panel",style:{width:Z},children:[m.jsx("div",{className:"forecast-resize-handle",ref:z,onMouseDown:ue,children:m.jsx("div",{className:"forecast-resize-grip"})}),m.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!n),children:[m.jsx("span",{children:"5-Day Forecast"}),m.jsx("button",{onClick:Y=>{Y.stopPropagation(),P()},className:"forecast-refresh-btn",children:"Refresh"})]}),n&&m.jsx("div",{className:"forecast-panel-content",children:G()}),m.jsx("div",{className:"forecast-dock-slot",ref:a}),m.jsxs("div",{className:"devices-on-section",style:{height:s?Q:"auto"},children:[m.jsx("div",{className:"devices-resize-handle",onMouseDown:te,children:m.jsx("div",{className:"devices-resize-grip"})}),m.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[m.jsxs("span",{children:["Devices ON (",E.size,")"]}),m.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&m.jsx("div",{className:"devices-on-list",children:E.size===0?m.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(E.values()).sort((Y,fe)=>Y.name.localeCompare(fe.name)).map((Y,fe)=>m.jsxs("div",{className:"device-on-item",children:[m.jsx("span",{className:"device-on-indicator"}),m.jsx("span",{className:"device-on-name",children:Y.name})]},fe))})]}),m.jsxs("div",{className:"status-indicators",children:[m.jsx("div",{className:`connection-status ${y?"connected":"disconnected"}`,children:y?"Backend":"Backend X"}),m.jsx("div",{className:`connection-status ${b.connected?"connected":"disconnected"}`,children:b.connected?`HA (${b.deviceCount})`:"HA X"})]})]})}function ZN({width:a=180,panelRef:n,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:d}){const h=window.T2Controls?.Tooltip,p=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,y=(s||[]).reduce((b,S)=>b+(S?.labels||[]).length,0),v=b=>{const S=(b||"").toString().trim();S&&c?.(S)};return m.jsxs("div",{ref:n,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:b=>b.stopPropagation(),children:[m.jsx("div",{className:"favorites-header",children:m.jsxs("div",{className:"favorites-header-row",children:[m.jsx("span",{className:"favorites-title",children:" Favorites"}),h?m.jsx(h,{text:p,position:"bottom",children:m.jsx("span",{className:"favorites-help-fallback",children:"?"})}):m.jsx("span",{className:"favorites-help-fallback",title:p,children:"?"})]})}),m.jsx("div",{className:"favorites-list",children:y===0?m.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(b=>{const S=(b?.category||"Other").toString(),E=Array.isArray(b?.labels)?b.labels:[];return E.length===0?null:m.jsxs("div",{className:"favorites-group",children:[m.jsx("div",{className:"favorites-divider",children:m.jsx("span",{className:"favorites-divider-text",children:S})}),E.map(O=>m.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>d?.(O),onContextMenu:Z=>{Z.preventDefault(),Z.stopPropagation(),v(O)},title:"Click: add to canvas  Right-click: remove",children:O},`${S}:${O}`))]},S)})})]})}function XN({isOpen:a,onClose:n,onSave:r,currentGraphData:s}){const[l,c]=k.useState(""),[d,h]=k.useState([]),[p,y]=k.useState(!1),[v,b]=k.useState(!1),[S,E]=k.useState(null),O=k.useRef(null);k.useEffect(()=>{a&&(Z(),setTimeout(()=>O.current?.focus(),100))},[a]);const Z=async()=>{y(!0),E(null);try{const P=await(await fetch(qn("/api/engine/graphs"))).json();P.success?h(P.graphs||[]):E("Failed to load existing graphs")}catch(z){console.error("[SaveModal] Error fetching graphs:",z),E("Failed to connect to server")}finally{y(!1)}},$=async()=>{if(!l.trim()){E("Please enter a filename");return}b(!0),E(null);try{const P=await(await fetch(qn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();P.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${P.filename}"`,3e3),r?.(P.filename),n()):E(P.error||"Failed to save graph")}catch(z){console.error("[SaveModal] Error saving:",z),E("Failed to save graph")}finally{b(!1)}},Q=z=>{z.key==="Enter"&&!v?$():z.key==="Escape"&&n()},K=z=>{const P=z.replace(".json","");c(P),O.current?.focus()};return a?m.jsx("div",{className:"save-modal-overlay",onClick:n,children:m.jsxs("div",{className:"save-modal",onClick:z=>z.stopPropagation(),children:[m.jsxs("div",{className:"save-modal-header",children:[m.jsx("h2",{children:" Save Graph"}),m.jsx("button",{className:"save-modal-close",onClick:n,children:""})]}),m.jsxs("div",{className:"save-modal-content",children:[m.jsxs("div",{className:"save-modal-input-section",children:[m.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),m.jsxs("div",{className:"save-modal-input-row",children:[m.jsx("input",{ref:O,id:"graph-filename",type:"text",value:l,onChange:z=>c(z.target.value),onKeyDown:Q,placeholder:"my_automation_graph",disabled:v}),m.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),S&&m.jsxs("div",{className:"save-modal-error",children:[" ",S]}),m.jsxs("div",{className:"save-modal-existing",children:[m.jsxs("h3",{children:["Existing Graphs ",p&&m.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),d.length===0&&!p?m.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):m.jsx("ul",{className:"save-modal-list",children:d.map(z=>m.jsxs("li",{onClick:()=>K(z.name),className:l===z.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(z.modified).toLocaleString()}`,children:[m.jsx("span",{className:"graph-name",children:z.displayName}),m.jsx("span",{className:"graph-date",children:new Date(z.modified).toLocaleDateString()})]},z.name))})]})]}),m.jsxs("div",{className:"save-modal-footer",children:[m.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:n,disabled:v,children:"Cancel"}),m.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:$,disabled:v||!l.trim(),children:v?"Saving...":" Save"})]})]})}):null}function KN({visible:a,position:n,items:r,onClose:s,onSelect:l}){const c=k.useRef(null),d=k.useRef(null),[h,p]=k.useState(null),[y,v]=k.useState({x:0,y:0}),[b,S]=k.useState(""),E=k.useRef(null),O=k.useRef(null);k.useEffect(()=>{a&&(S(""),p(null),setTimeout(()=>{d.current?.focus()},50))},[a]);const Z=k.useMemo(()=>{if(!b.trim())return r;const G=b.toLowerCase(),ue=[];for(const te of r)if(te.subitems)for(const Y of te.subitems)Y.label&&Y.label.toLowerCase().includes(G)&&ue.push({...Y,categoryHint:te.label});else te.label&&te.label.toLowerCase().includes(G)&&ue.push(te);return ue},[r,b]),$=b.trim().length>0;k.useEffect(()=>{if(!a)return;const G=te=>{c.current&&!c.current.contains(te.target)&&s()},ue=te=>{te.key==="Escape"&&s()};return document.addEventListener("mousedown",G),document.addEventListener("keydown",ue),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("keydown",ue)}},[a,s]),k.useEffect(()=>()=>{E.current&&clearTimeout(E.current),O.current&&clearTimeout(O.current)},[]);const Q=k.useCallback((G,ue,te)=>{O.current&&(clearTimeout(O.current),O.current=null),ue.subitems&&ue.subitems.length>0?p(te):p(null)},[]),K=k.useCallback(()=>{O.current=setTimeout(()=>{p(null)},150)},[]),z=k.useCallback(()=>{O.current&&(clearTimeout(O.current),O.current=null)},[]),P=k.useCallback(()=>{O.current=setTimeout(()=>{p(null)},100)},[]),he=k.useCallback(G=>{G.subitems&&G.subitems.length>0||(l(G),s())},[l,s]);if(!a)return null;const pe={...n};if(typeof window<"u"){const ue=Math.min(Z.length*36+50,400);n.x+220>window.innerWidth&&(pe.x=window.innerWidth-220-10),n.y+ue>window.innerHeight&&(pe.y=Math.max(10,window.innerHeight-ue-10))}return m.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:pe.x,top:pe.y},children:[m.jsxs("div",{className:"fast-menu-search",children:[m.jsx("input",{ref:d,type:"text",placeholder:"Search nodes...",value:b,onChange:G=>S(G.target.value),onClick:G=>G.stopPropagation(),onKeyDown:G=>{if(G.key==="Enter"&&Z.length===1){const ue=Z[0];ue.subitems||he(ue)}G.stopPropagation()}}),b&&m.jsx("span",{className:"search-clear",onClick:G=>{G.stopPropagation(),S(""),d.current?.focus()},children:""})]}),m.jsx("div",{className:"fast-menu-results",children:Z.length===0?m.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):$?Z.map((G,ue)=>m.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>he(G),children:[m.jsx("span",{className:"menu-label",children:G.label}),G.categoryHint&&m.jsx("span",{className:"category-hint",children:G.categoryHint})]},G.label||ue)):Z.map((G,ue)=>m.jsxs("div",{className:`fast-menu-item ${G.subitems?"has-submenu":""} ${h===ue?"active":""}`,onMouseEnter:te=>Q(te,G,ue),onMouseLeave:K,onClick:()=>he(G),children:[G.icon&&m.jsx("span",{className:"menu-icon",children:G.icon}),m.jsx("span",{className:"menu-label",children:G.label}),G.subitems&&m.jsx("span",{className:"submenu-arrow",children:""}),h===ue&&G.subitems&&m.jsx("div",{className:"fast-submenu",onMouseEnter:z,onMouseLeave:P,children:G.subitems.map((te,Y)=>m.jsx("div",{className:"fast-menu-item",title:te.description||"",onClick:fe=>{fe.stopPropagation(),he(te)},children:m.jsx("span",{className:"menu-label",children:te.label})},te.label||Y))})]},G.label||ue))})]})}function ib(a){const n=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))n.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&n.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):n.push(`Node at index ${c} is missing "id"`),l.label||n.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&n.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))n.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,d)=>{c.source?s.has(c.source)||n.push(`Connection ${d} references non-existent source node: ${c.source}`):n.push(`Connection at index ${d} is missing "source"`),c.target?s.has(c.target)||n.push(`Connection ${d} references non-existent target node: ${c.target}`):n.push(`Connection at index ${d} is missing "target"`),c.sourceOutput||r.push(`Connection ${d} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${d} is missing "targetInput"`);const h=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(h)&&r.push(`Duplicate connection: ${h}`),l.add(h),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:n.length===0,errors:n,warnings:r}}function sb(a){const n=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],n.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],n.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((d,h)=>{if(!d.id)return n.push(`Removed node at index ${h} (missing ID)`),r=!0,!1;if(c.has(d.id)){const p=`${d.id}_${Date.now()}_${h}`;n.push(`Renamed duplicate node ID ${d.id} to ${p}`),d.id=p,r=!0}return c.add(d.id),l.add(d.id),d.label||(d.label="Unknown Node",n.push(`Set label for node ${d.id} to "Unknown Node"`),r=!0),!d.position||typeof d.position!="object"?(d.position={x:0,y:0},n.push(`Reset position for node ${d.id}`),r=!0):(Number.isFinite(d.position.x)||(d.position.x=0,n.push(`Fixed NaN x position for node ${d.id}`),r=!0),Number.isFinite(d.position.y)||(d.position.y=0,n.push(`Fixed NaN y position for node ${d.id}`),r=!0)),!0}),s.connections=s.connections.filter((d,h)=>l.has(d.source)?l.has(d.target)?!0:(n.push(`Removed connection ${h} (invalid target: ${d.target})`),r=!0,!1):(n.push(`Removed connection ${h} (invalid source: ${d.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,n.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,n.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,n.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:n}}class gj extends Gt.Control{constructor(n,r){super(),this.label=n,this.onClick=r}}function QN({data:a}){return m.jsx("button",{onPointerDown:n=>n.stopPropagation(),onDoubleClick:n=>n.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.25)",n.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.1)",n.currentTarget.style.boxShadow="none"},children:a.label})}class vj extends Gt.Control{constructor(n,r,s,l){super(),this.label=n,this.values=r,this.value=s,this.onChange=l}setValue(n){this.value=n}}function JN({data:a}){const[,n]=k.useReducer(d=>d+1,0),[r,s]=k.useState(a.value);k.useEffect(()=>{s(a.value)},[a.value]),k.useEffect(()=>{n()},[a]);const l=d=>{const h=d.target.value;s(h),typeof a.setValue=="function"?a.setValue(h):a.value=h,a.onChange&&a.onChange(h)},c=a.values||[];return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("select",{value:r,onChange:l,onPointerDown:d=>d.stopPropagation(),onDoubleClick:d=>d.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((d,h)=>m.jsx("option",{value:d,style:{background:"#0a0f14",color:"#00f3ff"},children:d},`${h}-${d}`))})]})}class bj extends Gt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function WN({data:a}){const[n,r]=k.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class wj extends Gt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function ej({data:a}){const[n,r]=k.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return m.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[m.jsx("input",{type:"checkbox",checked:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),m.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Sj extends Gt.Control{constructor(n,r,s,l={}){super(),this.label=n,this.value=r,this.onChange=s,this.options=l}}function tj({data:a}){const[n,r]=k.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:"number",value:n,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class xj extends Gt.Control{constructor(n,r,s,l="text"){super(),this.label=n,this.value=r,this.onChange=s,this.type=l}}function nj({data:a}){const[n,r]=k.useState(a.value);k.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:a.type||"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class kj extends Gt.Control{constructor(n,r){super(),this.deviceId=n,this.getState=r}}function aj({data:a}){const n=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!n)return m.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:m.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=n.on||n.state==="on",l=n.attributes&&typeof n.attributes.brightness=="number"?Number(n.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof n.brightness=="number"&&Number.isFinite(n.brightness)?c=n.brightness>100?Math.round(n.brightness/255*100):Math.round(n.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c));const d=n.hs_color||[0,0],[h,p]=d;let y="#e74c3c";s&&(p===0?y="#f1c40f":y=`hsl(${h}, ${p}%, 50%)`);const v={width:"14px",height:"14px",borderRadius:"50%",background:y,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:y,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${y}`:"none"};return m.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[m.jsx("div",{style:v}),m.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:n.name||a.deviceId})]}),m.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&m.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:m.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${y})`,transition:"width 0.3s ease-out"}})})]})}function rj(a){const{state:n,color:r}=a.data.data||{},s=n==="on"||n==="open"||n==="playing",l=r||(s?"#00f3ff":"#333");return m.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[m.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),m.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function ij(a){const[,n]=k.useState(0);k.useEffect(()=>{let b=JSON.stringify(a.data.data||{});const S=setInterval(()=>{const E=JSON.stringify(a.data.data||{});E!==b&&(b=E,n(O=>O+1))},100);return()=>clearInterval(S)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:d}=a.data.data||{};let h="#444";s&&s.length===2?h=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(h="#ffaa00");const p=c==="on"||d===!0;let y=typeof r=="number"&&Number.isFinite(r)?r:0;y>100&&(y=y/255*100),y=Math.max(0,Math.min(100,y));const v=p?y:0;return m.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:b=>b.stopPropagation(),children:m.jsx("div",{style:{width:`${v}%`,height:"100%",backgroundColor:h,transition:"all 0.3s ease",boxShadow:v>0?`0 0 10px ${h}`:"none"}})})}function sj(a){const{power:n,energy:r}=a.data.data||{};return n===null&&r===null?m.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):m.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("span",{children:"PWR:"}),m.jsx("span",{style:{color:"#00f3ff"},children:n!==null?`${n} W`:"--"})]}),r!==null&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("span",{children:"NRG:"}),m.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const oj=window.EDITOR_DEBUG,Ce=(...a)=>oj&&console.debug("[Editor]",...a),lj=_a.memo(({data:a,socketKey:n,side:r})=>{let l=a?.name||"any";if(n&&typeof n=="string"){const d=n.toLowerCase();d.includes("hsv")||d.includes("color")?l="hsv_info":d.includes("trigger")||d.includes("enable")||d.includes("active")?l="boolean":(d.includes("light")||d.includes("device"))&&(l="light_info")}const c=`${n||"socket"} (${l})`;return _a.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function cj(){const a=k.useRef(null),[n,r]=k.useState(null),[s,l]=k.useState(null),[c,d]=k.useState(null),[h,p]=k.useState(null),[y,v]=k.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),b=k.useRef(null),S=k.useRef(null);k.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(y))}catch{}},[y]);const E=k.useRef(!1),O=k.useRef(new Set),Z=k.useRef(null),$=k.useRef(!1),Q=k.useRef(null),K=k.useRef(null),z=k.useRef(null),P=k.useRef({x:0,y:0}),he=k.useRef(!1),pe=k.useRef([]),[G,ue]=k.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),te=180,Y="favoriteNodes",[fe,Ne]=k.useState(()=>{try{const V=localStorage.getItem(Y),ie=V?JSON.parse(V):null,J=se=>{const C=[];for(const D of Array.isArray(se)?se:[]){if(typeof D!="string")continue;const oe=D.trim();oe&&(C.includes(oe)||C.push(oe))}return C};if(Array.isArray(ie)){const se=J(ie);return se.length?[{category:"Other",labels:se}]:[]}const Ae=Array.isArray(ie?.groups)?ie.groups:Array.isArray(ie?.favoriteGroups)?ie.favoriteGroups:Array.isArray(ie)?ie:null;if(!Ae)return[];const xe=[];for(const se of Ae){const C=(se?.category||"Other").toString().trim()||"Other",D=J(se?.labels);D.length!==0&&xe.push({category:C,labels:D})}return xe}catch{return[]}}),Re=k.useRef(null),[$e,qe]=k.useState(!1),I=k.useRef(null),[re,ve]=k.useState(!1),[ze,H]=k.useState(null);k.useEffect(()=>{try{localStorage.setItem(Y,JSON.stringify({version:2,groups:fe}))}catch{}},[fe]);const x=k.useCallback(V=>{const ie=(V||"").toString().trim();if(!ie)return;const Ae=(Tn.getByLabel(ie)?.category||"Other").toString().trim()||"Other";Ne(xe=>{for(const D of xe)if(Array.isArray(D?.labels)&&D.labels.includes(ie))return xe;const se=xe.map(D=>({category:D.category,labels:[...D.labels]})),C=se.findIndex(D=>D.category===Ae);return C===-1?se.push({category:Ae,labels:[ie]}):se[C].labels.push(ie),se})},[]),L=k.useCallback(V=>{const ie=(V||"").toString().trim();ie&&Ne(J=>{const Ae=[];for(const xe of J){const se=(xe?.labels||[]).filter(C=>C!==ie);se.length!==0&&Ae.push({category:xe.category,labels:se})}return Ae})},[]),N=k.useCallback(async V=>{const ie=a.current,J=Q.current,Ae=K.current;if(!ie||!J||!Ae)return;const xe=ie.getBoundingClientRect(),se={x:xe.left+xe.width/2,y:xe.top+xe.height/2};try{const oe=window._t2GetMenuItems;if(typeof oe=="function"){const de=oe();for(const be of de||[])for(const Oe of be.subitems||[])if(Oe.label===V&&typeof Oe.handler=="function"){await Oe.handler(se);return}}}catch(oe){console.warn("[Favorites] Failed to create via context handlers:",oe)}const C=Tn.getByLabel(V);if(!C)return;const D=()=>{try{Z.current?.()}catch{}};try{const oe=C.factory(D);await J.addNode(oe);const de=Ae.area.transform,be=(se.x-de.x)/de.k,Oe=(se.y-de.y)/de.k;await Ae.translate(oe.id,{x:be,y:Oe}),V==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}catch(oe){console.warn("[Favorites] Fallback create failed:",oe)}},[]);k.useEffect(()=>{try{const V=Tn.getAll();if(V.length===0)return;const ie=new Map;for(const J of V)J?.label&&ie.set(J.label,(J.category||"Other").toString().trim()||"Other");Ne(J=>{const Ae=[],xe=new Map,se=(C,D)=>{xe.has(C)||(xe.set(C,[]),Ae.push(C));const oe=xe.get(C);oe.includes(D)||oe.push(D)};for(const C of J)for(const D of C?.labels||[]){const oe=ie.get(D);oe&&se(oe,D)}return Ae.map(C=>({category:C,labels:xe.get(C)})).filter(C=>C.labels.length>0)})}catch{}},[n]);const M=k.useCallback(async V=>{await new Promise(F=>{const ne=()=>{const me=V.getBoundingClientRect();me.width>0&&me.height>0?F():requestAnimationFrame(ne)};requestAnimationFrame(ne)});const ie=new Fr,J=new Ab(V),Ae=new wE,xe=new CC({createRoot:cb.createRoot}),se=new LC;ie.use(se);let C=0,D=0,oe=Date.now();window._t2PerfStats=()=>{const F=(Date.now()-oe)/1e3;return console.log(`[Perf] In ${F.toFixed(1)}s: ${C} process calls, ${D} skipped (${(C/F).toFixed(1)}/sec)`),{calls:C,skipped:D,perSecond:C/F}},window._t2PerfReset=()=>{C=0,D=0,oe=Date.now(),console.log("[Perf] Stats reset")};let de=null;const be=()=>{const F=ie?.getNodes?.()?.length||0;return F<50?16:F<100?32:F<150?50:100};let Oe=!1;const He=async()=>{if(Oe){D++;return}if(de)return;C++;const F=be();de=setTimeout(async()=>{de=null,Oe=!0;try{const ne=ie.getNodes(),me=ie.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",ne.map(Ee=>`${Ee.id}:${Ee.label}`)),console.log("[Editor] process() - connections:",me.map(Ee=>`${Ee.source}:${Ee.sourceOutput} -> ${Ee.target}:${Ee.targetInput}`)),window._debugProcess=!1),se.reset();for(const Ee of ne)try{await se.fetch(Ee.id)}catch{}}finally{Oe=!1}},F)},Xe=async()=>{if(!Oe){de&&(clearTimeout(de),de=null),Oe=!0;try{se.reset();for(const F of ie.getNodes())try{await se.fetch(F.id)}catch{}}finally{Oe=!1}}},yt=new Set;let Ue=null;const Ve=F=>{yt.add(F),Ue||(Ue=setTimeout(()=>{Ue=null,yt.forEach(ne=>{J.update("node",ne)}),yt.clear(),He()},16))},De=()=>{He()},rt=()=>{const F=Tn.getAll(),ne={};F.forEach(Ee=>{const Ke=Ee.category||"Other";ne[Ke]||(ne[Ke]=[]),ne[Ke].push({label:Ee.label,order:Ee.order,description:Ee.description,handler:async Ht=>{let Jt;const hn=()=>{Ee.updateStrategy==="dataflow"?De():Ve(Jt.id)};Jt=Ee.factory(hn),await ie.addNode(Jt);const ln=J.area.transform,cn=(Ht.x-ln.x)/ln.k,kn=(Ht.y-ln.y)/ln.k;await J.translate(Jt.id,{x:cn,y:kn}),Ee.label==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}})});const me=window.T2Controls?.THEME?.categories||{};return Object.entries(ne).map(([Ee,Ke])=>({label:Ee,icon:me[Ee]?.icon||"",subitems:Ke.sort((Ht,Jt)=>{const hn=Ht.order??999,ln=Jt.order??999;return hn!==ln?hn-ln:Ht.label.localeCompare(Jt.label)})})).sort((Ee,Ke)=>Ee.label.localeCompare(Ke.label))};window._t2GetMenuItems=rt,window._t2Editor=ie,window._t2Area=J,window._t2Process=He,window._t2ProcessImmediate=Xe,window._t2Engine=se;const pt=Ir.selector();xe.addPreset(jf.classic.setup({customize:{node(F){const ne=Tn.getByInstance(F.payload);return ne?ne.component:jf.classic.Node},socket(F){const ne=F.key,me=F.side;return function({data:Ee}){return _a.createElement(lj,{data:Ee,socketKey:ne,side:me})}},control(F){if(F.payload instanceof Gt.Control){const me=F.payload.constructor.name;if(me==="ButtonControl")return QN;if(me==="DropdownControl")return JN;if(me==="TextControl")return WN;if(me==="SwitchControl")return ej;if(me==="NumberControl")return tj;if(me==="InputControl")return nj;if(me==="DeviceStateControl")return aj;if(me==="StatusIndicatorControl")return rj;if(me==="ColorBarControl")return ij;if(me==="PowerStatsControl")return sj}return jf.classic.Control}}})),Ae.addPreset(mE.classic.setup()),ie.use(J),J.use(Ae),J.use(xe),Ir.selectableNodes(J,pt,{accumulating:Ir.accumulateOnCtrl()}),Ir.simpleNodesOrder(J),ie.addPipe(F=>{if(F.type==="nodecreated"){const ne=F.data,me=Tn.getByInstance(ne);me&&me.isBackdrop&&setTimeout(()=>{const ke=J.nodeViews.get(ne.id);ke&&ke.element&&(ke.element.style.zIndex="-10",Ce("[Backdrop] Set z-index on creation for:",ne.id))},50)}return F});let zt=!1,Ft=!1,A={x:0,y:0};Ae.addPipe(F=>(F.type==="connectionpick"?(zt=!0,Ce(" Connection pick - wire dragging started")):F.type==="connectiondrop"&&(zt=!1,Ft=!1,Ce(" Connection drop - wire dragging ended")),F));const R=F=>{if(zt)if(F.ctrlKey||F.metaKey)if(!Ft)Ft=!0,A={x:F.clientX,y:F.clientY},V.style.cursor="grab";else{const ne=F.clientX-A.x,me=F.clientY-A.y;if(ne!==0||me!==0){const ke=J.area.transform;J.area.translate(ke.x+ne,ke.y+me),A={x:F.clientX,y:F.clientY}}}else Ft&&(Ft=!1,V.style.cursor="")},ce=F=>{(F.key==="Control"||F.key==="Meta")&&Ft&&(Ft=!1,V.style.cursor="")};window.addEventListener("pointermove",R),window.addEventListener("keyup",ce);let we=!1,_e=!1,mt=null,Pn=!1,Pe={x:0,y:0},Rt={x:0,y:0};const Tt=F=>{F.code==="Space"&&we&&mt&&(Pn=!0,Rt={x:0,y:0},F.preventDefault())},kt=F=>{if(F.code==="Space"&&(Pn=!1,_e&&mt)){const ne=J.nodeViews.get(mt);if(ne){const me=J.area.transform,ke=Rt.x/me.k,Ee=Rt.y/me.k,Ke={x:ne.position.x-ke,y:ne.position.y-Ee};E.current=!0,J.translate(mt,Ke).finally(()=>{E.current=!1})}_e=!1,V.style.cursor=""}},Cs=F=>{if(!(!we||!mt))if(Pn)if(!_e)_e=!0,Pe={x:F.clientX,y:F.clientY},Rt={x:0,y:0},V.style.cursor="grab";else{const ne=F.clientX-Pe.x,me=F.clientY-Pe.y;if(ne!==0||me!==0){const ke=J.area.transform;J.area.translate(ke.x+ne,ke.y+me),Rt.x+=ne,Rt.y+=me,Pe={x:F.clientX,y:F.clientY}}}else _e&&(_e=!1,V.style.cursor="")};window.addEventListener("keydown",Tt,!0),window.addEventListener("keyup",kt,!0),V.addEventListener("pointermove",Cs,!0);const Zt=document.createElement("div");Zt.classList.add("selection-box"),V.appendChild(Zt);let na=!1,va={x:0,y:0};const fn=O.current,Ts=()=>{na&&(Ce(" Safety reset: clearing stuck lasso selection"),na=!1,Zt.style.display="none")},Os=()=>{Ts(),window.resetEditorDragState&&window.resetEditorDragState()},ba=()=>{document.hidden&&(Ts(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",Os),document.addEventListener("visibilitychange",ba);const Qt=F=>{try{const ne=F.target;ne&&(ne.tagName==="INPUT"||ne.tagName==="TEXTAREA"||ne.isContentEditable)||(V.tabIndex=-1,V.focus())}catch{}if((F.ctrlKey||F.metaKey)&&F.button===0){F.stopPropagation(),F.preventDefault(),na=!0;const ne=V.getBoundingClientRect();va={x:F.clientX-ne.left,y:F.clientY-ne.top},Zt.style.display="block",Zt.style.left=`${va.x}px`,Zt.style.top=`${va.y}px`,Zt.style.width="0px",Zt.style.height="0px",F.shiftKey||(fn.forEach(me=>{const ke=J.nodeViews.get(me);ke&&ke.element&&(ke.element.classList.remove("selected"),ke.element.style.outline="")}),fn.clear(),pt&&pt.entities&&Array.from(pt.entities).forEach(me=>pt.remove(me)))}},yn=F=>{if(!na)return;const ne=V.getBoundingClientRect(),me=F.clientX-ne.left,ke=F.clientY-ne.top,Ee=Math.min(va.x,me),Ke=Math.min(va.y,ke),Ht=Math.abs(me-va.x),Jt=Math.abs(ke-va.y);Zt.style.left=`${Ee}px`,Zt.style.top=`${Ke}px`,Zt.style.width=`${Ht}px`,Zt.style.height=`${Jt}px`},Ga=F=>{if(!na)return;const ne=Zt.getBoundingClientRect();if(na=!1,Zt.style.display="none",ne.width<5&&ne.height<5)return;const me=[];ie.getNodes().forEach(ke=>{const Ee=J.nodeViews.get(ke.id);if(Ee&&Ee.element){const Ke=Ee.element.getBoundingClientRect();ne.left<=Ke.left&&ne.right>=Ke.right&&ne.top<=Ke.top&&ne.bottom>=Ke.bottom&&me.push({node:ke,view:Ee})}}),me.forEach(({node:ke,view:Ee})=>{fn.add(ke.id),pt.add({id:ke.id,label:"node",translate(Ke,Ht){},unselect(){Ee.element.classList.remove("selected"),Ee.element.style.outline=""}},!1),Ee.element.classList.add("selected"),Ee.element.style.outline="3px solid #00f3ff"})},Kc=()=>{fn.size>0&&(fn.forEach(F=>{const ne=J.nodeViews.get(F);ne&&ne.element&&(ne.element.classList.remove("selected"),ne.element.style.outline="")}),fn.clear()),pt&&pt.entities&&(pt.entities instanceof Map?Array.from(pt.entities.values()):Array.from(pt.entities)).forEach(ne=>{ne.unselect&&ne.unselect(),pt.remove(ne)}),ie.getNodes().forEach(F=>{const ne=J.nodeViews.get(F.id);ne&&ne.element&&ne.element.classList.remove("selected")})},Vo=F=>{if(!F.ctrlKey&&!F.metaKey&&!na){let ne=!1;for(const[me,ke]of J.nodeViews)if(ke.element.contains(F.target)){ne=!0;break}if(!ne){const me=F.target;(me===V||me.classList.contains("rete-area")||me.closest('[data-testid="area"]'))&&Kc()}}};V.addEventListener("pointerdown",Qt,{capture:!0}),V.addEventListener("click",Vo),window.addEventListener("pointermove",yn),window.addEventListener("pointerup",Ga),ie.addPipe(F=>((F.type==="connectioncreated"||F.type==="connectionremoved")&&He(),F));let wa={activeBackdropId:null,isDragging:!1},Sa=!1,xa=null;const aa=F=>{Sa=F,xa&&(clearTimeout(xa),xa=null),F&&(xa=setTimeout(()=>{Sa&&(Ce(" Safety reset: clearing stuck isGroupMoving"),Sa=!1),xa=null},500))},hr=()=>{na&&(Ce(" Resetting stuck lasso selection"),na=!1,Zt.style.display="none"),Sa&&(Ce(" Resetting stuck group moving"),aa(!1)),wa.isDragging&&(Ce(" Resetting stuck backdrop drag"),wa.isDragging=!1,wa.activeBackdropId=null)};window.resetEditorDragState=hr;function Ya(){const F=ie.getNodes(),ne=F.filter(ke=>{const Ee=Tn.getByInstance(ke);return Ee&&Ee.isBackdrop}),me=F.filter(ke=>{const Ee=Tn.getByInstance(ke);return!Ee||!Ee.isBackdrop});ne.forEach(ke=>{const Ee=J.nodeViews.get(ke.id);if(!Ee)return;Ee.element&&(Ee.element.style.zIndex="-10");const Ke=Ee.position,Ht=[],Jt=ke.properties.width||400,hn=ke.properties.height||300;me.forEach(cn=>{const kn=J.nodeViews.get(cn.id);if(!kn)return;kn.element&&parseInt(kn.element.style.zIndex||"0",10)<0&&(kn.element.style.zIndex="1");const En=kn.position,zn=cn.width||180,qo=cn.height||100,Go=En.x+zn/2,wi=En.y+qo/2;Go>=Ke.x&&Go<=Ke.x+Jt&&wi>=Ke.y&&wi<=Ke.y+hn&&Ht.push(cn.id)});const ln=ke.properties.capturedNodes.length;ke.properties.capturedNodes=Ht,ln!==Ht.length&&ke.changeCallback&&ke.changeCallback()})}return J.updateBackdropCaptures=Ya,J.addPipe(F=>{if(F.type==="nodepicked"){const ne=F.data.id,me=ie.getNode(ne);we=!0,mt=ne,_e=!1;try{if(me&&I?.current!==void 0){const Ee=J.nodeViews.get(ne)?.position||{x:0,y:0};I.current={nodeId:ne,label:me.label,startPos:Ee,active:!1,over:!1}}}catch{}if(me){const Ee=Tn.getByInstance(me);if(Ee&&Ee.isBackdrop&&me.properties.locked)return}!he.current&&!fn.has(ne)&&(fn.forEach(Ee=>{const Ke=J.nodeViews.get(Ee);Ke&&Ke.element&&(Ke.element.classList.remove("selected"),Ke.element.style.outline="")}),fn.clear()),fn.add(ne);const ke=J.nodeViews.get(ne);ke&&ke.element&&(ke.element.classList.add("selected"),ke.element.style.outline="3px solid #00f3ff")}return F}),J.addPipe(F=>{try{if(E.current)return F;const ne=me=>{const ke=Re.current?.getBoundingClientRect();if(!ke)return!1;const Ke=J.nodeViews.get(me)?.element;if(!Ke)return!1;const Ht=Ke.getBoundingClientRect(),Jt=Ht.left+Ht.width/2,hn=Ht.top+Ht.height/2;return Jt>=ke.left&&Jt<=ke.right&&hn>=ke.top&&hn<=ke.bottom};if(F.type==="nodetranslate"){const me=I.current;if(!me)return F;const ke=F.data?.id;if(!ke||me.nodeId!==ke)return F;me.active||(me.active=!0,!me.startPos&&F.data?.previous&&(me.startPos=F.data.previous));const Ee=ne(ke);return Ee!==me.over&&(me.over=Ee,qe(Ee)),F}if(F.type==="nodedragged"){const me=I.current;if(!me)return F;const ke=F.data?.id;if(!ke||me.nodeId!==ke)return F;if(me.active&&ne(ke)){x(me.label);const Ke=me.startPos;Ke&&setTimeout(()=>{try{J.translate(ke,Ke)}catch{}},0)}return I.current=null,qe(!1),F}}catch{}return F}),J.addPipe(F=>{if(F.type==="render"&&F.data?.payload){const ne=F.data.payload,me=Tn.getByInstance(ne);me&&me.isBackdrop&&setTimeout(()=>{const ke=J.nodeViews.get(ne.id);if(ke&&ke.element){ke.element.style.zIndex!=="-10"&&(ke.element.style.zIndex="-10");const Ee=ne.properties.locked?"none":"auto";ke.element.style.pointerEvents!==Ee&&(ke.element.style.pointerEvents=Ee)}},0)}if(F.type==="nodetranslate"){if(E.current||Sa)return F;const ne=F.data.id,me=ie.getNode(ne);if(!me)return F;const ke=F.data.position,Ee=F.data.previous,Ke=ke.x-Ee.x,Ht=ke.y-Ee.y;if(Ke===0&&Ht===0)return F;if(_e&&mt===ne)return{...F,data:{...F.data,position:F.data.previous}};if(fn.size>1&&fn.has(ne)){aa(!0);const hn=[];return fn.forEach(ln=>{if(ln!==ne){const cn=J.nodeViews.get(ln);if(cn){const kn=cn.position.x+Ke,En=cn.position.y+Ht;hn.push(J.translate(ln,{x:kn,y:En}))}}}),Promise.all(hn).then(()=>{aa(!1)}),F}const Jt=Tn.getByInstance(me);if(Jt&&Jt.isBackdrop){if(me.properties.locked)return{...F,data:{...F.data,position:F.data.previous}};if(wa.activeBackdropId!==ne&&(wa.activeBackdropId=ne,wa.isDragging=!0,Ya()),me.properties.capturedNodes.length>0){aa(!0);const hn=[];return me.properties.capturedNodes.forEach(ln=>{if(!fn.has(ln)){const cn=J.nodeViews.get(ln);if(cn){const kn=cn.position.x+Ke,En=cn.position.y+Ht;hn.push(J.translate(ln,{x:kn,y:En}))}}}),Promise.all(hn).then(()=>{aa(!1)}),F}}}if(F.type==="nodedragged"){if(E.current)return F;wa.isDragging=!1,wa.activeBackdropId=null,we=!1,mt=null,_e&&(_e=!1,V.style.cursor=""),Ya()}return F}),Q.current=ie,K.current=J,z.current=pt,window.updateBackdropLockState=(F,ne)=>{const me=J.nodeViews.get(F);me&&me.element&&(me.element.style.pointerEvents=ne?"none":"auto",Ce(" Updated backdrop lock state:",F,"locked:",ne))},r(ie),l(J),d(se),{destroy:()=>{V.removeEventListener("pointerdown",Qt,{capture:!0}),V.removeEventListener("click",Vo),V.removeEventListener("pointermove",Cs,!0),window.removeEventListener("pointermove",yn),window.removeEventListener("pointerup",Ga),window.removeEventListener("pointermove",R),window.removeEventListener("keyup",ce),window.removeEventListener("keydown",Tt,!0),window.removeEventListener("keyup",kt,!0),window.removeEventListener("blur",Os),document.removeEventListener("visibilitychange",ba),xa&&clearTimeout(xa),Zt.parentNode&&Zt.parentNode.removeChild(Zt),J.destroy()},selector:pt,editor:ie,area:J,engine:se,process:He,processImmediate:Xe}},[]);k.useEffect(()=>{const V=a.current;if(!V)return;let ie=null,J=null,Ae=null;const xe=new Map,se=de=>{try{typeof de.pointerId=="number"&&xe.set(de.pointerId,{el:de.target,pointerType:de.pointerType||"mouse"})}catch{}},C=de=>{try{typeof de.pointerId=="number"&&xe.delete(de.pointerId)}catch{}},D=de=>{try{typeof de.pointerId=="number"&&xe.delete(de.pointerId)}catch{}};V.addEventListener("gotpointercapture",se,!0),V.addEventListener("lostpointercapture",C,!0),window.addEventListener("pointerup",D,!0),window.addEventListener("pointercancel",D,!0),J=VN().then(()=>(Ce(" External plugins loaded, now creating editor..."),M(V))).then(de=>{de.editor,ie=de.area,de.engine,de.selector,r(de.editor),l(de.area),d(de.engine),p(de.selector),Z.current=de.processImmediate,setTimeout(()=>{if(V){V.tabIndex=-1,V.focus();const Oe=V.getBoundingClientRect(),He=Oe.left+Oe.width/2,Xe=Oe.top+Oe.height/2,yt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:He,clientY:Xe,deltaY:0});V.dispatchEvent(yt),Ce(" Container initialized and focused"),window.resetEditorView=()=>{Ce(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const Ue=V.getBoundingClientRect(),Ve=Ue.left+Ue.width/2,De=Ue.top+Ue.height/2;V.tabIndex=-1,V.focus();try{const pt=Array.from(xe.entries());xe.clear(),pt.forEach(([zt,Ft])=>{const A=Ft?.el,R=Ft?.pointerType||"mouse";try{const ce=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:zt,pointerType:R});V.dispatchEvent(ce)}catch{}try{V.releasePointerCapture(zt)}catch{}try{A&&typeof A.releasePointerCapture=="function"&&A.releasePointerCapture(zt)}catch{}})}catch{}try{for(let zt=0;zt<5;zt++)try{V.releasePointerCapture(zt)}catch{}V.querySelectorAll(".node, .connection, [data-drag]").forEach(zt=>{try{zt.releasePointerCapture(1)}catch{}})}catch{}if(ie){const pt=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});V.dispatchEvent(pt);const zt=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});V.dispatchEvent(zt)}setTimeout(()=>{const pt=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:Ve,clientY:De,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),zt=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:Ve,clientY:De,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});V.dispatchEvent(pt),setTimeout(()=>{V.dispatchEvent(zt);const Ft=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ve,clientY:De,deltaY:0});V.dispatchEvent(Ft),Ce(" Reset complete")},50)},50)})}}},100);let be=!1;return Ae=new ResizeObserver(Oe=>{for(const He of Oe){const{width:Xe,height:yt}=He.contentRect;!be&&Xe>0&&yt>0&&(be=!0,Ce(" ResizeObserver: Container now has size",Xe,yt),setTimeout(()=>{V.focus();const Ue=V.getBoundingClientRect(),Ve=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ue.left+Ue.width/2,clientY:Ue.top+Ue.height/2,deltaY:0});V.dispatchEvent(Ve)},50))}}),Ae.observe(V),de});const oe=()=>{Ce(" graphLoadComplete event received - triggering view reset");const de=()=>{window.resetEditorView&&window.resetEditorView()};de(),setTimeout(de,100),setTimeout(de,500),setTimeout(de,1e3)};return window.addEventListener("graphLoadComplete",oe),()=>{Ae&&Ae.disconnect(),window.removeEventListener("graphLoadComplete",oe),V.removeEventListener("gotpointercapture",se,!0),V.removeEventListener("lostpointercapture",C,!0),window.removeEventListener("pointerup",D,!0),window.removeEventListener("pointercancel",D,!0),J.then(de=>de.destroy())}},[M]),k.useEffect(()=>{if(!n||!s||!h)return;const V=async C=>{if(C.target.tagName==="INPUT"||C.target.tagName==="TEXTAREA"||C.target.isContentEditable)return;if(Ce(` KeyDown: ${C.code} (Ctrl: ${C.ctrlKey}, Meta: ${C.metaKey})`),C.code==="F5"||(C.ctrlKey||C.metaKey)&&C.shiftKey&&C.code==="KeyR"){C.preventDefault(),Ce(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(C.code==="KeyF"&&!C.ctrlKey&&!C.metaKey&&!C.altKey){C.preventDefault();const Oe=K.current,He=Q.current;if(Oe&&He){const Xe=He.getNodes();Xe.length>0&&(Ce(" Zoom extents triggered (F key)"),Ir.zoomAt(Oe,Xe,{scale:.9}).catch(yt=>{console.warn("[F key] zoomAt failed:",yt)}))}return}const D=Q.current,oe=K.current,de=z.current;if(!D||!oe){Ce(" No editor/area ref available");return}const be=()=>{const Oe=new Set;if(de&&de.entities&&de.entities instanceof Map)for(const[He,Xe]of de.entities)D.getNode(He)&&Oe.add(He);for(const He of O.current){const Xe=D.getNode(He);Ce(` Checking node ${He}: exists=${!!Xe}`),Xe&&Oe.add(He)}return Ce(` Found ${Oe.size} selected nodes:`,Array.from(Oe)),Array.from(Oe)};if(C.code==="Delete"||C.code==="Backspace"){Ce(" Delete key pressed. lassoSelectedNodesRef.current size:",O.current.size),Ce(" lassoSelectedNodesRef.current contents:",Array.from(O.current));const Oe=be();if(Ce(` Deleting ${Oe.length} nodes:`,Oe),Oe.length>0){const He=[],Xe=[],yt=new Set(Oe);for(const Ue of D.getConnections())(yt.has(Ue.source)||yt.has(Ue.target))&&Xe.push({source:Ue.source,target:Ue.target,sourceOutput:Ue.sourceOutput,targetInput:Ue.targetInput});for(const Ue of Oe){const Ve=D.getNode(Ue);Ve&&He.push({id:Ue,label:Ve.label,position:oe.nodeViews.get(Ue)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(Ve.properties||{}))})}pe.current.push({type:"delete",nodes:He,connections:Xe}),Ce(" Saved undo state:",pe.current.length,"items in stack");for(const Ue of Oe){const Ve=D.getConnections().filter(De=>De.source===Ue||De.target===Ue);for(const De of Ve)await D.removeConnection(De.id);await D.removeNode(Ue),O.current.delete(Ue)}window.refreshBackdropGroups&&window.refreshBackdropGroups()}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyZ"&&!C.shiftKey){if(C.preventDefault(),pe.current.length===0){Ce(" Nothing to undo");return}const Oe=pe.current.pop();if(Ce(" Undoing:",Oe.type,Oe.nodes.length,"nodes"),Oe.type==="delete"){const He={};E.current=!0;try{for(const Xe of Oe.nodes){const yt=Tn.getByLabel(Xe.label);if(yt){let Ue;const Ve=()=>{oe&&oe.update("node",Ue.id),c&&D&&(c.reset(),setTimeout(()=>{D.getNodes().forEach(async rt=>{try{await c.fetch(rt.id)}catch{}})},0))},De=()=>{yt.updateStrategy==="dataflow"?(c&&c.reset(),c&&D&&setTimeout(()=>{D.getNodes().forEach(async rt=>{try{await c.fetch(rt.id)}catch{}})},0)):Ve()};Ue=yt.factory(De),Xe.properties&&Object.assign(Ue.properties,Xe.properties),await D.addNode(Ue),await oe.translate(Ue.id,Xe.position),He[Xe.id]=Ue.id}}for(const Xe of Oe.connections){const yt=He[Xe.source]||Xe.source,Ue=He[Xe.target]||Xe.target,Ve=D.getNode(yt),De=D.getNode(Ue);if(Ve&&De)try{await D.addConnection(new Gt.Connection(Ve,Xe.sourceOutput,De,Xe.targetInput))}catch(rt){console.warn("[Editor] Could not restore connection:",rt)}}Ce(" Undo complete - restored",Oe.nodes.length,"nodes"),window.refreshBackdropGroups&&window.refreshBackdropGroups()}finally{E.current=!1,oe?.updateBackdropCaptures?.()}}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyC")try{const Oe=be();if(Oe.length===0){Ce(" Nothing selected to copy");return}Ce(` Copying ${Oe.length} nodes`);const He=[],Xe=new Set(Oe);for(const Ve of Oe){const De=D.getNode(Ve);De&&He.push({label:De.label,position:oe.nodeViews.get(De.id)?.position||{x:0,y:0},data:{id:De.id,properties:JSON.parse(JSON.stringify(De.properties||{}))}})}if(He.length===0){Ce(" Nothing selected to copy (no nodes in selection)");return}const yt=[];for(const Ve of D.getConnections())Xe.has(Ve.source)&&Xe.has(Ve.target)&&yt.push({source:Ve.source,target:Ve.target,sourceOutput:Ve.sourceOutput,targetInput:Ve.targetInput});const Ue={nodes:He,connections:yt};localStorage.setItem("rete-clipboard",JSON.stringify(Ue)),Ce("Copied to clipboard:",Ue)}catch(Oe){console.error("[Editor] Copy failed:",Oe)}if((C.ctrlKey||C.metaKey)&&C.code==="KeyV"){const Oe=localStorage.getItem("rete-clipboard");if(!Oe){Ce(" Clipboard empty");return}try{const He=JSON.parse(Oe),Xe={},Ue=(K.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},Ve=oe.area.transform,De=(P.current.x-Ue.left-Ve.x)/Ve.k,rt=(P.current.y-Ue.top-Ve.y)/Ve.k;let pt=1/0,zt=1/0;for(const A of He.nodes)pt=Math.min(pt,A.position.x),zt=Math.min(zt,A.position.y);de&&de.entities&&Array.from(de.entities).forEach(A=>de.remove(A)),E.current=!0;try{for(const A of He.nodes){let R;const ce=Tn.getByLabel(A.label);if(ce){const we=()=>{oe&&oe.update("node",R.id),c&&D&&(c.reset(),setTimeout(()=>{D.getNodes().forEach(async mt=>{try{await c.fetch(mt.id)}catch{}})},0))},_e=()=>{ce.updateStrategy==="dataflow"?(c&&c.reset(),c&&D&&setTimeout(()=>{D.getNodes().forEach(async mt=>{try{await c.fetch(mt.id)}catch{}})},0)):we()};R=ce.factory(_e)}if(R){typeof R.restore=="function"&&A.data?R.restore(A.data):A.data&&A.data.properties&&R.properties&&Object.assign(R.properties,A.data.properties),await D.addNode(R);const we=A.position.x-pt,_e=A.position.y-zt,mt={x:De+we,y:rt+_e};await oe.translate(R.id,mt),Xe[A.data.id]=R.id,de&&de.add({id:R.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{E.current=!1,oe?.updateBackdropCaptures?.()}const Ft=[];for(const A of He.connections){const R=Xe[A.source],ce=Xe[A.target];if(R&&ce){const we=D.getNode(R),_e=D.getNode(ce);we&&_e&&Ft.push(D.addConnection(new Gt.Connection(we,A.sourceOutput,_e,A.targetInput)))}}if(await Promise.all(Ft),c&&D){c.reset();for(const A of D.getNodes())try{await c.fetch(A.id)}catch{}}Ce("Pasted from clipboard")}catch(He){console.error("[Editor] Paste failed:",He)}}C.code==="Home"&&(C.preventDefault(),oe.area&&(oe.area.zoom(1,0,0),oe.area.translate(0,0),Ce(" Viewport reset via Home key"))),C.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Ce(" Drag state reset via Escape key"))},ie=C=>{P.current={x:C.clientX,y:C.clientY}},J=C=>{C.key==="Shift"&&(he.current=!0)},Ae=C=>{C.key==="Shift"&&(he.current=!1)},xe=()=>{Ce(" Received delete from Electron IPC"),V({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let se=null;return window.api&&window.api.onDeleteKey&&(se=window.api.onDeleteKey(xe)),window.addEventListener("keydown",V),window.addEventListener("keydown",J),window.addEventListener("keyup",Ae),window.addEventListener("mousemove",ie),()=>{window.removeEventListener("keydown",V),window.removeEventListener("keydown",J),window.removeEventListener("keyup",Ae),window.removeEventListener("mousemove",ie),se&&se()}},[n,s,c,h]),k.useEffect(()=>{const V=a.current;if(!V||!n||!s)return;const ie=J=>{const Ae=J.target.closest('[data-testid="node"]');if(Ae){J.preventDefault();const xe=Ae.dataset.nodeId||Array.from(s.nodeViews.entries()).find(([se,C])=>C.element===Ae)?.[0];if(xe){const se=n.getNode(xe);ue({visible:!0,position:{x:J.clientX,y:J.clientY},items:[{label:"Delete",handler:async()=>{const C=n.getConnections().filter(D=>D.source===xe||D.target===xe);for(const D of C)await n.removeConnection(D.id);await n.removeNode(xe)}}],nodeContext:se})}}else{J.preventDefault();const xe=window._t2GetMenuItems?window._t2GetMenuItems():[];ue({visible:!0,position:{x:J.clientX,y:J.clientY},items:xe,nodeContext:null})}};return V.addEventListener("contextmenu",ie),()=>{V.removeEventListener("contextmenu",ie)}},[n,s]);const le=k.useCallback(()=>{ue(V=>({...V,visible:!1}))},[]),ye=k.useCallback(async V=>{V.handler&&await V.handler(G.position)},[G.position]),je=async()=>{if(!(!n||!s))try{const V=n.getNodes().map(be=>{const Oe=typeof be.toJSON=="function"?be.toJSON():{...be};return be.properties&&(Oe.properties=be.properties),{id:be.id,label:be.label,position:s.nodeViews.get(be.id)?.position||{x:0,y:0},data:Oe}}),ie=n.getConnections().map(be=>({id:be.id,source:be.source,target:be.target,sourceOutput:be.sourceOutput,targetInput:be.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ae={nodes:V,connections:ie,viewport:J},xe=JSON.stringify(Ae,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Ce("Running in HA ingress - showing save dialog"),H(Ae),ve(!0);return}try{xe.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",xe))}catch{console.warn("localStorage skipped")}Ce("Graph saved to localStorage");try{const be=await fetch(qn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:xe});be.ok?Ce("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",be.status)}catch(be){console.warn("[handleSave] Failed to save to server:",be)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",xe),Ce("[handleSave] Saved temp file for Electron reload")}catch(be){console.warn("[handleSave] Failed to save temp file via Electron API",be)}if(window.showSaveFilePicker)try{const Oe=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await Oe.write(xe),await Oe.close(),Ce("Graph saved to file");return}catch(be){if(be.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",be)}const D=new Blob([xe],{type:"application/json"}),oe=URL.createObjectURL(D),de=document.createElement("a");de.href=oe,de.download=`autotron_graph_${Date.now()}.json`,de.click(),URL.revokeObjectURL(oe),Ce("Graph saved via download")}catch(V){console.error("Failed to save graph:",V)}};k.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!n||!s))try{const V=n.getNodes().map(se=>{const C=typeof se.toJSON=="function"?se.toJSON():{...se};return se.properties&&(C.properties=se.properties),{id:se.id,label:se.label,position:s.nodeViews.get(se.id)?.position||{x:0,y:0},data:C}}),ie=n.getConnections().map(se=>({id:se.id,source:se.source,target:se.target,sourceOutput:se.sourceOutput,targetInput:se.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ae={nodes:V,connections:ie,viewport:J,preUpdateSave:!0,timestamp:Date.now()},xe=JSON.stringify(Ae);xe.length<2e6&&(localStorage.setItem("saved-graph",xe),Ce("[triggerGraphSave] Graph saved before update"))}catch(V){console.warn("[triggerGraphSave] Failed:",V)}},()=>{delete window.triggerGraphSave}),[n,s]);const[Qe,Ze]=k.useState(!1),Mt=k.useRef(null),It=k.useRef(Date.now());k.useEffect(()=>{if(!n)return;const V=()=>{Ze(!0)};n.addPipe(ie=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(ie.type)&&V(),ie))},[n]),k.useEffect(()=>{if(!n||!s)return;const V=async()=>{if(!(window.graphLoading||$.current)&&Qe)try{const ie=n.getNodes().map(C=>{const D=typeof C.toJSON=="function"?C.toJSON():{...C};return C.properties&&(D.properties=C.properties),{id:C.id,label:C.label,position:s.nodeViews.get(C.id)?.position||{x:0,y:0},data:D}}),J=n.getConnections().map(C=>({id:C.id,source:C.source,target:C.target,sourceOutput:C.sourceOutput,targetInput:C.targetInput})),Ae=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},xe={nodes:ie,connections:J,viewport:Ae,autoSaved:!0,timestamp:Date.now()},se=JSON.stringify(xe);if(se.length<2e6){localStorage.setItem("saved-graph",se),It.current=Date.now(),Ze(!1);try{await fetch(qn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:se})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(ie){console.warn("[Auto-save] Failed:",ie)}};return Mt.current=setInterval(V,12e4),()=>{Mt.current&&clearInterval(Mt.current)}},[n,s,Qe]),k.useEffect(()=>{if(!n||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Ce("[AutoLoad] Detected post-update reload, attempting to restore graph...");const ie=setTimeout(async()=>{try{const J=localStorage.getItem("saved-graph");if(J){Ce("[AutoLoad] Found saved graph, loading...");const Ae=JSON.parse(J);Ae.nodes&&Ae.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(J){console.warn("[AutoLoad] Failed to auto-load graph:",J)}},1e3);return()=>clearTimeout(ie)}},[n,s,c]);const At=k.useRef(!1);k.useEffect(()=>{if(!n||!s||!c||At.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Ce("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),At.current=!0;return}const J=localStorage.getItem("saved-graph"),Ae=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(J||Ae){Ce("[ServerAutoLoad] Skipping - desktop mode with local graph");return}At.current=!0;const se=setTimeout(async()=>{try{Ce("[ServerAutoLoad] Fetching last active graph from server...");const D=await(await fetch(qn("/api/engine/last-active"))).json();D.success&&D.graph?(Ce("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(D.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):Ce("[ServerAutoLoad] No last active graph on server")}catch(C){console.warn("[ServerAutoLoad] Failed to fetch from server:",C)}},1500);return()=>clearTimeout(se)},[n,s,c]);const _n=async()=>{if(!n||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!n,area:!!s,engine:!!c});return}try{let V=localStorage.getItem("saved-graph");if(!V&&window.api?.readTempFile)try{const se=await window.api.readTempFile("autotron_graph.json");se?.success&&se.content&&(V=se.content,Ce("[handleLoad] Loaded graph from Electron temp file"))}catch(se){console.warn("[handleLoad] Failed to read Electron temp file",se)}if(!V){alert("No saved graph found");return}const ie=JSON.parse(V);Ce(`[handleLoad] Loading graph with ${ie.nodes?.length} nodes`);const J=ib(ie);if(!J.valid){console.warn("[handleLoad] Graph validation failed:",J.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${J.errors.length} errors`,4e3);const se=sb(ie);se.repaired&&(Ce("[handleLoad] Graph repaired:",se.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${se.fixes.length} fixes applied`,3e3),Object.assign(ie,se.graphData))}J.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",J.warnings),await on();const Ae=n.getNodes();if(Ae.length>0){console.error("[handleLoad] Clear did not work! Still have",Ae.length,"nodes");for(const se of Ae)try{await n.removeNode(se.id)}catch(C){console.error("[handleLoad] Force remove failed:",C)}}if(E.current=!0,$.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of ie.nodes){let D;const oe=Tn.getByLabel(C.label);if(oe){const de=()=>{if($.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};D=oe.factory(de)}D&&(D.id=C.id,typeof D.restore=="function"&&C.data?D.restore(C.data):C.data&&C.data.properties&&D.properties&&Object.assign(D.properties,C.data.properties),await n.addNode(D),await s.translate(D.id,C.position))}const se=[];for(const C of ie.connections){const D=n.getNode(C.source),oe=n.getNode(C.target);D&&oe&&se.push(n.addConnection(new Gt.Connection(D,C.sourceOutput,oe,C.targetInput)))}await Promise.all(se)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const xe=n.getNodes();if(xe.length>0&&s){Ce("[handleLoad] Zooming to fit",xe.length,"nodes...");try{await Ir.zoomAt(s,xe,{scale:.9})}catch(se){console.warn("[handleLoad] zoomAt failed:",se)}}Z.current&&(Ce("[handleLoad] Processing graph immediately..."),await Z.current(),Ce("[handleLoad] Graph processing complete")),$.current=!1,Ce("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Ce("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const se=ie.viewport||{x:0,y:0,k:1},C=se.k||1,D=se.x||0,oe=se.y||0;Ce("[handleLoad] Restoring viewport:",{savedX:D,savedY:oe,savedK:C}),Ce("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(C,0,0),s.area.translate(D,oe)}catch(be){console.warn("[handleLoad] Viewport restore failed:",be)}Ce("[handleLoad] Transform after restore:",{...s.area.transform});const de=s.container;if(de){de.tabIndex=-1,de.focus(),document.activeElement&&document.activeElement!==de&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const be=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(be,100),setTimeout(be,500),setTimeout(be,1e3)}n.getNodes().forEach(be=>{const Oe=s.nodeViews.get(be.id);if(Oe?.element)try{for(let He=0;He<10;He++)try{Oe.element.releasePointerCapture(He)}catch{}}catch{}})}},300),Ce("Graph loaded")}catch(V){console.error("Failed to load graph:",V),$.current=!1,alert("Failed to load graph")}},dn=async()=>{if(!n||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(n.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const ie=await fetch(qn("/api/examples/starter"));if(!ie.ok)throw new Error(`Failed to fetch example: ${ie.status}`);const J=await ie.json();if(!J.success||!J.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(J.graph)),Ce("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await _n(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(ie){console.error("[handleLoadExample] Failed:",ie),alert("Failed to load example graph: "+ie.message)}};k.useEffect(()=>{const V=()=>{Ce("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),_n()};return document.addEventListener("autoLoadGraph",V),()=>document.removeEventListener("autoLoadGraph",V)},[n,s,c]);const on=async()=>{if(!n){console.warn("[handleClear] No editor instance!");return}try{const V=n.getConnections(),ie=n.getNodes();Ce(`[handleClear] Removing ${V.length} connections and ${ie.length} nodes`);for(const Ae of V)await n.removeConnection(Ae.id);for(const Ae of ie)await n.removeNode(Ae.id);const J=n.getNodes();Ce(`[handleClear] Complete. Remaining nodes: ${J.length}`),J.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",J.map(Ae=>Ae.id))}catch(V){console.error("Failed to clear graph:",V)}},Dn=()=>{if(!(!n||!s))try{const V=n.getNodes().map(D=>{const oe=typeof D.toJSON=="function"?D.toJSON():{...D};return D.properties&&(oe.properties=D.properties),{id:D.id,label:D.label,position:s.nodeViews.get(D.id)?.position||{x:0,y:0},data:oe}}),ie=n.getConnections().map(D=>({id:D.id,source:D.source,target:D.target,sourceOutput:D.sourceOutput,targetInput:D.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ae={nodes:V,connections:ie,viewport:J},xe=new Blob([JSON.stringify(Ae,null,2)],{type:"application/json"}),se=URL.createObjectURL(xe),C=document.createElement("a");C.href=se,C.download=`graph-${Date.now()}.json`,C.click(),URL.revokeObjectURL(se),Ce("Graph exported")}catch(V){console.error("Failed to export graph:",V)}},We=async V=>{const ie=ib(V);if(!ie.valid){console.warn("[handleImport] Graph validation failed:",ie.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ie.errors.length} errors`,4e3);const xe=sb(V);if(xe.repaired)Ce("[handleImport] Graph repaired:",xe.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${xe.fixes.length} fixes applied`,3e3),V=xe.graphData;else if(!confirm(`Graph has ${ie.errors.length} errors. Continue anyway?`))return}const J={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let Ae=0;if(console.error=(...xe)=>{Ae++<10&&J.error(...xe)},J.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!n||!s||!c){Object.assign(console,J);return}try{if(await on(),E.current=!0,$.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of V.nodes){let D;const oe=Tn.getByLabel(C.label);if(!oe){console.warn(`[handleImport] No definition found for node label: "${C.label}"`);continue}if(oe){const de=()=>{if($.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};D=oe.factory(de)}D&&(D.id=C.id,C.label==="Timeline Color"&&J.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof D.restore=="function",hasData:!!C.data,dataKeys:C.data?Object.keys(C.data):"N/A",propertiesKeys:C.data?.properties?Object.keys(C.data.properties):"N/A",previewModeValue:C.data?.properties?.previewMode}),typeof D.restore=="function"&&C.data?D.restore(C.data):C.data&&C.data.properties&&D.properties&&Object.assign(D.properties,C.data.properties),await n.addNode(D),await s.translate(D.id,C.position))}const se=[];for(const C of V.connections){const D=n.getNode(C.source),oe=n.getNode(C.target);D&&oe?se.push(n.addConnection(new Gt.Connection(D,C.sourceOutput,oe,C.targetInput))):console.warn(`[handleImport] Connection skipped - missing node: source=${C.source} (${!!D}), target=${C.target} (${!!oe})`)}await Promise.all(se)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const xe=n.getNodes();if(xe.length>0&&s)try{await Ir.zoomAt(s,xe,{scale:.9})}catch{}$.current=!1,setTimeout(async()=>{window.graphLoading=!1,Ce("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{Z.current&&(Ce("[handleImport] Running processImmediate to sync node states"),Z.current()),setTimeout(()=>{Z.current&&(Ce("[handleImport] Running second processImmediate for late-loading data"),Z.current())},1500)},500);try{const C=JSON.stringify(V,null,2);C.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",C),Ce("[handleImport] Graph saved to localStorage")),(await fetch(qn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:C})).ok&&Ce("[handleImport] Graph saved to server as last active")}catch(C){console.warn("[handleImport] Failed to save imported graph:",C)}const se=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(se,100),setTimeout(se,500)},2e3),Object.assign(console,J),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Ce("Graph imported successfully. Pan/zoom should work now.")}catch(xe){window.graphLoading=!1,typeof J<"u"&&Object.assign(console,J),console.error("Failed to import graph:",xe),$.current=!1,alert("Failed to import graph: "+xe.message)}};return m.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[m.jsx(ZN,{width:te,panelRef:Re,dropActive:$e,favoriteGroups:fe,onAddFavorite:x,onRemoveFavorite:L,onCreateNode:N}),m.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${te}px`}}),m.jsx("div",{ref:b}),(()=>{const V=y?S.current:b.current;return V?qr.createPortal(m.jsx(PN,{onSave:je,onLoad:_n,onLoadExample:dn,onClear:on,onExport:Dn,onImport:We,hasUnsavedChanges:Qe,isMerged:y,onToggleMerged:()=>v(ie=>!ie)}),V):null})(),m.jsx(FN,{dockSlotRef:S}),m.jsx(KN,{visible:G.visible,position:G.position,items:G.items,onClose:le,onSelect:ye}),m.jsx(XN,{isOpen:re,onClose:()=>ve(!1),onSave:()=>{Ze(!1),ve(!1)},currentGraphData:ze})]})}class uj extends _a.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",r),this.setState({error:n,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?m.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:m.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),m.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),m.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&m.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[m.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),m.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),m.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[m.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#4a4a6c",onMouseOut:n=>n.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),m.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#339af0",onMouseOut:n=>n.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function dj({isLoading:a,progress:n=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[d,h]=k.useState(!1),[p,y]=k.useState(a);return k.useEffect(()=>{if(!a&&p){h(!0);const v=setTimeout(()=>{y(!1),h(!1)},500);return()=>clearTimeout(v)}else a&&!p&&y(!0)},[a,p]),p?m.jsxs("div",{className:`loading-overlay ${d?"fade-out":""}`,children:[m.jsx("div",{className:"loading-logo",children:""}),m.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),m.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),m.jsx("div",{className:"loading-progress-container",children:m.jsx("div",{className:"loading-progress-bar",children:m.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,n)}%`}})})}),m.jsx("div",{className:"loading-status",children:r}),l>0&&m.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&m.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function fj({updateInfo:a,onClose:n,onApplyUpdate:r}){const[s,l]=k.useState(!1),[c,d]=k.useState("");if(!a||!a.hasUpdate)return null;const h=async()=>{l(!0),d("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),d("Graph saved! Starting update..."))}catch(y){console.warn("Pre-update graph save failed:",y)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const v=await(await Vn("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d(v.message||"Updating... The app will restart shortly."),setTimeout(()=>{d("Update applied! Reloading page..."),setTimeout(()=>{const b=()=>{Vn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)},2e3)}catch(y){y.message.includes("fetch")||y.message.includes("network")?(d("Server restarting... Reloading page..."),setTimeout(()=>{const v=()=>{Vn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(v,2e3))};v()},3e3)):(d(`Update failed: ${y.message}`),l(!1))}},p=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),n()};return m.jsx("div",{className:"update-modal-overlay",children:m.jsxs("div",{className:"update-modal",children:[m.jsxs("div",{className:"update-modal-header",children:[m.jsx("span",{className:"update-icon",children:""}),m.jsx("h2",{children:"Update Available!"})]}),m.jsxs("div",{className:"update-modal-version",children:[m.jsx("span",{className:"version-current",children:a.currentVersion}),m.jsx("span",{className:"version-arrow",children:""}),m.jsx("span",{className:"version-new",children:a.newVersion})]}),m.jsxs("div",{className:"update-modal-content",children:[m.jsx("h3",{children:"What's New:"}),m.jsx("div",{className:"changelog-content",children:m.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&m.jsxs("div",{className:"update-status",children:[m.jsx("span",{className:"status-spinner",children:""}),c]}),m.jsx("div",{className:"update-modal-actions",children:s?m.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"update-btn update-btn-primary",onClick:h,children:"Update Now"}),m.jsx("button",{className:"update-btn update-btn-secondary",onClick:p,children:"Later"})]})})]})})}const hj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};hj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Fw=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},n={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,d]of Object.entries(s)){const h=n[c];h&&(d.accent&&(l.style.setProperty(`--node-${h}-color`,d.accent),l.style.setProperty(`--node-${h}-color-rgb`,a(d.accent))),d.background&&l.style.setProperty(`--node-${h}-bg`,d.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},Zw=()=>{const a=c=>{const d=parseInt(c.slice(1,3),16),h=parseInt(c.slice(3,5),16),p=parseInt(c.slice(5,7),16);return`${d}, ${h}, ${p}`},n=(c,d=15)=>{const h=parseInt(c.slice(1),16),p=Math.max(0,(h>>16)-Math.round(255*d/100)),y=Math.max(0,(h>>8&255)-Math.round(255*d/100)),v=Math.max(0,(h&255)-Math.round(255*d/100));return`#${(16777216|p<<16|y<<8|v).toString(16).slice(1)}`},r=(c,d=20)=>{const h=parseInt(c.slice(1),16),p=Math.min(255,(h>>16)+Math.round(255*d/100)),y=Math.min(255,(h>>8&255)+Math.round(255*d/100)),v=Math.min(255,(h&255)+Math.round(255*d/100));return`#${(16777216|p<<16|y<<8|v).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),d=c?JSON.parse(c):{},h=document.documentElement;for(const[p,y]of Object.entries(s)){const v=d[p]?.color||l[p];v&&(h.style.setProperty(`--socket-${y}-color`,v),h.style.setProperty(`--socket-${y}-dark`,n(v)),h.style.setProperty(`--socket-${y}-border`,r(v)),h.style.setProperty(`--socket-${y}-rgb`,a(v)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};Fw();Zw();window.applyCategoryColors=Fw;window.applySocketColors=Zw;const Vf=new Map,qf=new Map;function pj(){const[a,n]=k.useState(ge.connected),[r,s]=k.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=k.useState([]),[d,h]=k.useState([]),[p,y]=k.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[v,b]=k.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[S,E]=k.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[O,Z]=k.useState(null),[$,Q]=k.useState(0),[K,z]=k.useState(()=>localStorage.getItem("eventLogFilter")||"all"),[P,he]=k.useState([]),pe=k.useRef(null),G=k.useRef(null),ue=k.useRef({authenticated:!1,invalidPinNotified:!1}),te=100,Y=ap();k.useEffect(()=>{const H=setInterval(()=>{Q(x=>x+1)},3e4);return()=>clearInterval(H)},[]);const fe=k.useCallback(()=>{const H=window._t2Editor;if(!H)return;const L=H.getNodes().filter(N=>N.label==="Backdrop"||N.constructor?.name==="BackdropNode"||N.properties?.width!==void 0&&N.properties?.height!==void 0&&N.properties?.title!==void 0).map(N=>({id:N.id,title:N.properties?.title||"Group",color:N.properties?.customColor||window.BackdropColorPalette?.[N.properties?.colorIndex]?.border||"#888"})).sort((N,M)=>N.title.localeCompare(M.title));he(L)},[]);k.useEffect(()=>{const H=()=>{setTimeout(fe,200)};window.addEventListener("graphLoadComplete",H),window.refreshBackdropGroups=fe;const x=setTimeout(fe,500);return()=>{window.removeEventListener("graphLoadComplete",H),delete window.refreshBackdropGroups,clearTimeout(x)}},[fe]),k.useEffect(()=>Yw(x=>{E(x),!x.isLoading&&x.progress===100&&x.failedPlugins?.length>0&&Y.warning(`Loaded ${x.loadedCount} plugins (${x.failedPlugins.length} failed)`),x.error&&Y.error(`Plugin loading failed: ${x.error}`)}),[Y]),k.useEffect(()=>{function H(){n(!0),Y.success("Connected to server"),Ne("system","Socket connected to server"),qf.clear();const We=os();We&&ge.emit("authenticate",We),ge.emit("editor-active"),ge.emit("request-ha-status")}function x(){n(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),ue.current.authenticated=!1,Y.warning("Disconnected from server - reconnecting..."),Ne("system","Socket disconnected from server")}function L(We){Ne("system",`Socket reconnected after ${We} attempt(s)`)}function N(We){We%5===0&&Ne("system",`Reconnection attempt ${We}...`)}function M(We){Ne("system","Reconnection failed, retrying...")}function le(We){s(We)}function ye(){ue.current.authenticated||(ue.current.authenticated=!0,ue.current.invalidPinNotified=!1,Y.success("Authenticated"))}function je(We){ue.current.authenticated=!1;const V=(We?.error||"").toString();if(V.toLowerCase().includes("invalid pin")){ue.current.invalidPinNotified||(ue.current.invalidPinNotified=!0,Y.error("Stored PIN is invalid. Update it in Settings  Security."));return}const ie=V?`Authentication failed: ${V}`:"Authentication failed";Y.error(ie)}function Qe(){if(!ge.connected)return;ue.current.invalidPinNotified=!1;const We=os();We&&ge.emit("authenticate",We)}function Ze(We){const{id:V,state:ie,on:J,name:Ae,vendor:xe}=We;if(!V)return;const se=qf.get(V),C=J!==void 0?J:ie==="on"||ie==="playing"||ie==="open",D=Ae||We.friendly_name||We.attributes?.friendly_name||V.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(se&&se.on===C)return;qf.set(V,{on:C,state:ie});const oe=Vf.get(V),de=C?"ON":"OFF";let be=xe||"External";xe||(V.startsWith("ha_")?be="HA":V.startsWith("hue_")?be="Hue":V.startsWith("kasa_")&&(be="Kasa")),oe&&Date.now()-oe.timestamp<5e3?(Ne("device",`${D}  ${de}`,{source:"app",triggeredBy:oe.nodeTitle,nodeId:oe.nodeId}),Vf.delete(V)):Ne("trigger",`${D}  ${de}`,{source:be})}function Mt(We){}function It(We){const{nodeId:V,nodeLabel:ie,result:J}=We;Ne("node",`${ie||V} executed`,{...J,nodeId:V})}function At(We){Array.isArray(We)&&h(We.slice(0,20))}function _n(We){const{type:V,name:ie,value:J}=We;Ne("trigger",`${V}: ${ie}`,J)}function dn(We){if(We.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==We.newVersion&&Y.info(` Update available: ${We.currentVersion}  ${We.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>Z(We)})}ge.on("connect",H),ge.on("disconnect",x),ge.on("reconnect",L),ge.on("reconnect_attempt",N),ge.on("reconnect_error",M),ge.on("auth-success",ye),ge.on("auth-failed",je),ge.on("ha-connection-status",le),ge.on("device-state-update",Ze),ge.on("device_state_change",Mt),ge.on("node_executed",It),ge.on("scheduled_events",At),ge.on("trigger_event",_n),ge.on("update-available",dn),window.addEventListener("t2-pin-changed",Qe);const on=()=>{ge.connected&&ge.emit("editor-inactive")};window.addEventListener("beforeunload",on),IT();const Dn=setInterval(()=>{ge.connected&&ge.emit("editor-heartbeat")},3e4);return()=>{ge.connected&&ge.emit("editor-inactive"),clearInterval(Dn),ge.off("connect",H),ge.off("disconnect",x),ge.off("reconnect",L),ge.off("reconnect_attempt",N),ge.off("reconnect_error",M),ge.off("auth-success",ye),ge.off("auth-failed",je),ge.off("ha-connection-status",le),ge.off("device-state-update",Ze),ge.off("device_state_change",Mt),ge.off("node_executed",It),ge.off("scheduled_events",At),ge.off("trigger_event",_n),ge.off("update-available",dn),window.removeEventListener("t2-pin-changed",Qe),window.removeEventListener("beforeunload",on),$T()}},[]);const Ne=(H,x,L=null)=>{const N=new Date().toLocaleTimeString();c(M=>[{timestamp:N,type:H,message:x,details:L},...M].slice(0,te))},Re=k.useRef({}),$e=k.useCallback((H,x)=>{const L=x.map(ye=>({...ye,nodeId:H}));Re.current[H]=L;const N=[];Object.values(Re.current).forEach(ye=>{Array.isArray(ye)&&N.push(...ye)});const M=new Date,le=N.filter(ye=>ye.time&&new Date(ye.time)>M).sort((ye,je)=>new Date(ye.time)-new Date(je.time)).slice(0,20);h(le)},[]),qe=k.useCallback(H=>{delete Re.current[H],$e(H,[])},[$e]);k.useEffect(()=>(window.addEventLog=Ne,window.setUpcomingEvents=h,window.registerScheduledEvents=$e,window.unregisterScheduledEvents=qe,window.T2Toast=Y,window.registerPendingCommand=(H,x,L,N)=>{Vf.set(H,{nodeTitle:x,action:L,nodeId:N,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[$e,qe,Y]);const I=H=>{if(!H)return"";const x=new Date(H),N=x-new Date,M=Math.floor(N/6e4),le=Math.floor(M/60),ye=Math.floor(le/24);let je="";return ye>0?je=`${ye}d ${le%24}h`:le>0?je=`${le}h ${M%60}m`:M>0?je=`${M}m`:je="<1m",`${x.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${je})`},re=k.useCallback(async H=>{if(!H)return;const x=window._t2Area,L=window._t2Editor;if(!x||!L){console.warn("[focusNode] Editor not ready");return}const N=L.getNode(H);if(!N){console.warn("[focusNode] Node not found:",H);return}try{const{AreaExtensions:M}=await Jg(async()=>{const{AreaExtensions:le}=await Promise.resolve().then(()=>Ev);return{AreaExtensions:le}},void 0,import.meta.url);await M.zoomAt(x,[N],{scale:1})}catch(M){console.warn("[focusNode] Failed to zoom to node:",M)}},[]),ve=k.useCallback(async H=>{if(!H)return;const x=window._t2Area,L=window._t2Editor;if(!x||!L){console.warn("[focusBackdrop] Editor not ready");return}const N=L.getNode(H);if(!N){console.warn("[focusBackdrop] Backdrop not found:",H);return}try{const M=x.nodeViews.get(H);if(!M){console.warn("[focusBackdrop] Node view not found");return}const le=M.position,ye=N.properties?.width||N.width||400,je=N.properties?.height||N.height||300,Qe=le.x+ye/2,Ze=le.y+je/2,Mt=x.container,It=Mt.clientWidth,At=Mt.clientHeight,_n=It*.85/ye,dn=At*.85/je,on=Math.min(_n,dn,1.5),Dn=It/2-Qe*on,We=At/2-Ze*on;await x.area.zoom(on,0,0),await x.area.translate(Dn,We)}catch(M){console.warn("[focusBackdrop] Failed to zoom to backdrop:",M)}},[]),ze=k.useCallback(async()=>{const H=window._t2Area,x=window._t2Editor;if(!H||!x){console.warn("[zoomExtents] Editor not ready");return}const L=x.getNodes();if(L.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:N}=await Jg(async()=>{const{AreaExtensions:M}=await Promise.resolve().then(()=>Ev);return{AreaExtensions:M}},void 0,import.meta.url);await N.zoomAt(H,L,{scale:.7})}catch(N){console.warn("[zoomExtents] Failed to zoom:",N)}},[]);return m.jsxs("div",{className:"app-container",children:[O&&O.hasUpdate&&m.jsx(fj,{updateInfo:O,onClose:()=>Z(null)}),m.jsx(dj,{isLoading:S.isLoading,progress:S.progress,status:S.status,loadedCount:S.loadedCount,totalCount:S.totalCount,error:S.error}),m.jsx("div",{className:"editor-wrapper",children:m.jsx(cj,{})}),m.jsx("div",{className:"resize-handle",ref:G,onMouseDown:H=>{H.preventDefault();const x=H.clientY,L=p,N=le=>{const ye=x-le.clientY,je=Math.max(80,Math.min(400,L+ye));y(je),localStorage.setItem("panelHeight",je)},M=()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",M)},children:m.jsx("div",{className:"resize-handle-grip"})}),m.jsxs("div",{className:"bottom-panels",style:{height:p,fontSize:v},children:[m.jsxs("div",{className:"panel event-log-panel",children:[m.jsxs("div",{className:"panel-header",children:[m.jsx("span",{className:"panel-title",children:"Event Log"}),m.jsxs("div",{className:"group-nav-buttons",children:[m.jsx("button",{className:"group-nav-btn group-nav-all",onClick:ze,title:"Zoom to fit all nodes (F key)",children:" All"}),P.map(H=>m.jsx("button",{className:"group-nav-btn",style:{borderColor:H.color},onClick:()=>ve(H.id),title:`Zoom to "${H.title}" group`,children:H.title},H.id))]}),m.jsxs("div",{className:"panel-controls",children:[m.jsxs("div",{className:"filter-buttons",children:[m.jsx("button",{className:`filter-btn ${K==="all"?"active":""}`,onClick:()=>{z("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),m.jsx("button",{className:`filter-btn ${K==="app"?"active":""}`,onClick:()=>{z("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),m.jsx("button",{className:`filter-btn ${K==="ha"?"active":""}`,onClick:()=>{z("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),m.jsx("button",{className:"font-size-btn",onClick:()=>{const H=Math.max(8,v-1);b(H),localStorage.setItem("panelFontSize",H)},children:"A-"}),m.jsxs("span",{className:"font-size-label",children:[v,"px"]}),m.jsx("button",{className:"font-size-btn",onClick:()=>{const H=Math.min(16,v+1);b(H),localStorage.setItem("panelFontSize",H)},children:"A+"}),m.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),m.jsx("div",{className:"panel-content",ref:pe,children:l.length===0?m.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(H=>K==="all"?!0:K==="app"?H.details?.triggeredBy||H.details?.source==="app"||H.type==="node"||H.type==="device"||H.type==="system":K==="ha"?H.type==="trigger"||H.details?.source&&H.details.source!=="app"&&!H.details?.triggeredBy:!0).map((H,x)=>m.jsxs("div",{className:`log-entry log-${H.type}${H.details?.nodeId?" clickable":""}`,title:H.details?.nodeId?"Click to jump to this node":H.details?.triggeredBy?`Triggered by: ${H.details.triggeredBy}`:H.details?.source&&H.details.source!=="app"?`Triggered externally via ${H.details.source}`:"",onClick:()=>H.details?.nodeId&&re(H.details.nodeId),style:H.details?.nodeId?{cursor:"pointer"}:{},children:[m.jsx("span",{className:"log-time",children:H.timestamp}),m.jsx("span",{className:`log-type-badge ${H.type}`,children:H.type==="trigger"?"external":H.type}),m.jsx("span",{className:"log-message",children:H.message}),H.details?.triggeredBy&&m.jsxs("span",{className:"log-source app-source",children:["via ",H.details.triggeredBy]}),H.details?.source&&H.details.source!=="app"&&!H.details?.triggeredBy&&m.jsxs("span",{className:"log-source external-source",children:["via ",H.details.source]})]},x))})]}),m.jsxs("div",{className:"panel upcoming-events-panel",children:[m.jsx("div",{className:"panel-header",children:m.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),m.jsx("div",{className:"panel-content",children:d.length===0?m.jsx("div",{className:"empty-message",children:"No scheduled events..."}):d.map((H,x)=>m.jsxs("div",{className:`event-entry event-${H.action||"unknown"}${H.nodeId?" clickable":""}`,onClick:()=>H.nodeId&&re(H.nodeId),title:H.nodeId?"Click to jump to this node":"",style:H.nodeId?{cursor:"pointer"}:{},children:[m.jsx("span",{className:"event-time",children:I(H.time)}),m.jsx("span",{className:`event-action ${H.action}`,children:H.action||"event"}),m.jsx("span",{className:"event-device",children:H.deviceName||H.device||"Unknown"})]},x))})]})]})]})}function mj(){return m.jsx(uj,{children:m.jsxs(GN,{children:[m.jsx(YN,{}),m.jsx(pj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");cb.createRoot(document.getElementById("root")).render(m.jsx(k.StrictMode,{children:m.jsx(mj,{})}));
