function ob(a,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Ch(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var af={exports:{}},go={};var Vg;function aE(){if(Vg)return go;Vg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return go.Fragment=n,go.jsx=r,go.jsxs=r,go}var qg;function rE(){return qg||(qg=1,af.exports=aE()),af.exports}var p=rE(),rf={exports:{}},Xe={};var Gg;function iE(){if(Gg)return Xe;Gg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function k(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,H={};function Q(S,M,O){this.props=S,this.context=M,this.refs=H,this.updater=O||j}Q.prototype.isReactComponent={},Q.prototype.setState=function(S,M){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,M,"setState")},Q.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function K(){}K.prototype=Q.prototype;function L(S,M,O){this.props=S,this.context=M,this.refs=H,this.updater=O||j}var G=L.prototype=new K;G.constructor=L,Z(G,Q.prototype),G.isPureReactComponent=!0;var de=Array.isArray;function ge(){}var Y={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function re(S,M,O){var z=O.ref;return{$$typeof:a,type:S,key:M,ref:z!==void 0?z:null,props:O}}function pe(S,M){return re(S.type,M,S.props)}function Re(S){return typeof S=="object"&&S!==null&&S.$$typeof===a}function Ae(S){var M={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(O){return M[O]})}var Ke=/\/+/g;function st(S,M){return typeof S=="object"&&S!==null&&S.key!=null?Ae(""+S.key):M.toString(36)}function We(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(ge,ge):(S.status="pending",S.then(function(M){S.status==="pending"&&(S.status="fulfilled",S.value=M)},function(M){S.status==="pending"&&(S.status="rejected",S.reason=M)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function N(S,M,O,z,oe){var he=typeof S;(he==="undefined"||he==="boolean")&&(S=null);var Oe=!1;if(S===null)Oe=!0;else switch(he){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(S.$$typeof){case a:case n:Oe=!0;break;case v:return Oe=S._init,N(Oe(S._payload),M,O,z,oe)}}if(Oe)return oe=oe(S),Oe=z===""?"."+st(S,0):z,de(oe)?(O="",Oe!=null&&(O=Oe.replace(Ke,"$&/")+"/"),N(oe,M,O,"",function(tt){return tt})):oe!=null&&(Re(oe)&&(oe=pe(oe,O+(oe.key==null||S&&S.key===oe.key?"":(""+oe.key).replace(Ke,"$&/")+"/")+Oe)),M.push(oe)),1;Oe=0;var Ge=z===""?".":z+":";if(de(S))for(var Ve=0;Ve<S.length;Ve++)z=S[Ve],he=Ge+st(z,Ve),Oe+=N(z,M,O,he,oe);else if(Ve=k(S),typeof Ve=="function")for(S=Ve.call(S),Ve=0;!(z=S.next()).done;)z=z.value,he=Ge+st(z,Ve++),Oe+=N(z,M,O,he,oe);else if(he==="object"){if(typeof S.then=="function")return N(We(S),M,O,z,oe);throw M=String(S),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function B(S,M,O){if(S==null)return S;var z=[],oe=0;return N(S,z,"","",function(he){return M.call(O,he,oe++)}),z}function ne(S){if(S._status===-1){var M=S._result;M=M(),M.then(function(O){(S._status===0||S._status===-1)&&(S._status=1,S._result=O)},function(O){(S._status===0||S._status===-1)&&(S._status=2,S._result=O)}),S._status===-1&&(S._status=0,S._result=M)}if(S._status===1)return S._result.default;throw S._result}var ve=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},U={map:B,forEach:function(S,M,O){B(S,function(){M.apply(this,arguments)},O)},count:function(S){var M=0;return B(S,function(){M++}),M},toArray:function(S){return B(S,function(M){return M})||[]},only:function(S){if(!Re(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return Xe.Activity=b,Xe.Children=U,Xe.Component=Q,Xe.Fragment=r,Xe.Profiler=l,Xe.PureComponent=L,Xe.StrictMode=s,Xe.Suspense=m,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return Y.H.useMemoCache(S)}},Xe.cache=function(S){return function(){return S.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(S,M,O){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var z=Z({},S.props),oe=S.key;if(M!=null)for(he in M.key!==void 0&&(oe=""+M.key),M)!ce.call(M,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&M.ref===void 0||(z[he]=M[he]);var he=arguments.length-2;if(he===1)z.children=O;else if(1<he){for(var Oe=Array(he),Ge=0;Ge<he;Ge++)Oe[Ge]=arguments[Ge+2];z.children=Oe}return re(S.type,oe,z)},Xe.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:c,_context:S},S},Xe.createElement=function(S,M,O){var z,oe={},he=null;if(M!=null)for(z in M.key!==void 0&&(he=""+M.key),M)ce.call(M,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(oe[z]=M[z]);var Oe=arguments.length-2;if(Oe===1)oe.children=O;else if(1<Oe){for(var Ge=Array(Oe),Ve=0;Ve<Oe;Ve++)Ge[Ve]=arguments[Ve+2];oe.children=Ge}if(S&&S.defaultProps)for(z in Oe=S.defaultProps,Oe)oe[z]===void 0&&(oe[z]=Oe[z]);return re(S,he,oe)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(S){return{$$typeof:h,render:S}},Xe.isValidElement=Re,Xe.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:ne}},Xe.memo=function(S,M){return{$$typeof:y,type:S,compare:M===void 0?null:M}},Xe.startTransition=function(S){var M=Y.T,O={};Y.T=O;try{var z=S(),oe=Y.S;oe!==null&&oe(O,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(ge,ve)}catch(he){ve(he)}finally{M!==null&&O.types!==null&&(M.types=O.types),Y.T=M}},Xe.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},Xe.use=function(S){return Y.H.use(S)},Xe.useActionState=function(S,M,O){return Y.H.useActionState(S,M,O)},Xe.useCallback=function(S,M){return Y.H.useCallback(S,M)},Xe.useContext=function(S){return Y.H.useContext(S)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(S,M){return Y.H.useDeferredValue(S,M)},Xe.useEffect=function(S,M){return Y.H.useEffect(S,M)},Xe.useEffectEvent=function(S){return Y.H.useEffectEvent(S)},Xe.useId=function(){return Y.H.useId()},Xe.useImperativeHandle=function(S,M,O){return Y.H.useImperativeHandle(S,M,O)},Xe.useInsertionEffect=function(S,M){return Y.H.useInsertionEffect(S,M)},Xe.useLayoutEffect=function(S,M){return Y.H.useLayoutEffect(S,M)},Xe.useMemo=function(S,M){return Y.H.useMemo(S,M)},Xe.useOptimistic=function(S,M){return Y.H.useOptimistic(S,M)},Xe.useReducer=function(S,M,O){return Y.H.useReducer(S,M,O)},Xe.useRef=function(S){return Y.H.useRef(S)},Xe.useState=function(S){return Y.H.useState(S)},Xe.useSyncExternalStore=function(S,M,O){return Y.H.useSyncExternalStore(S,M,O)},Xe.useTransition=function(){return Y.H.useTransition()},Xe.version="19.2.0",Xe}var Yg;function Th(){return Yg||(Yg=1,rf.exports=iE()),rf.exports}var E=Th();const Da=Ch(E),sE=ob({__proto__:null,default:Da},[E]);var sf={exports:{}},vo={},of={exports:{}},lf={};var Fg;function oE(){return Fg||(Fg=1,(function(a){function n(N,B){var ne=N.length;N.push(B);e:for(;0<ne;){var ve=ne-1>>>1,U=N[ve];if(0<l(U,B))N[ve]=B,N[ne]=U,ne=ve;else break e}}function r(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var B=N[0],ne=N.pop();if(ne!==B){N[0]=ne;e:for(var ve=0,U=N.length,S=U>>>1;ve<S;){var M=2*(ve+1)-1,O=N[M],z=M+1,oe=N[z];if(0>l(O,ne))z<U&&0>l(oe,O)?(N[ve]=oe,N[z]=ne,ve=z):(N[ve]=O,N[M]=ne,ve=M);else if(z<U&&0>l(oe,ne))N[ve]=oe,N[z]=ne,ve=z;else break e}}return B}function l(N,B){var ne=N.sortIndex-B.sortIndex;return ne!==0?ne:N.id-B.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();a.unstable_now=function(){return d.now()-h}}var m=[],y=[],v=1,b=null,x=3,k=!1,j=!1,Z=!1,H=!1,Q=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function G(N){for(var B=r(y);B!==null;){if(B.callback===null)s(y);else if(B.startTime<=N)s(y),B.sortIndex=B.expirationTime,n(m,B);else break;B=r(y)}}function de(N){if(Z=!1,G(N),!j)if(r(m)!==null)j=!0,ge||(ge=!0,Ae());else{var B=r(y);B!==null&&We(de,B.startTime-N)}}var ge=!1,Y=-1,ce=5,re=-1;function pe(){return H?!0:!(a.unstable_now()-re<ce)}function Re(){if(H=!1,ge){var N=a.unstable_now();re=N;var B=!0;try{e:{j=!1,Z&&(Z=!1,K(Y),Y=-1),k=!0;var ne=x;try{t:{for(G(N),b=r(m);b!==null&&!(b.expirationTime>N&&pe());){var ve=b.callback;if(typeof ve=="function"){b.callback=null,x=b.priorityLevel;var U=ve(b.expirationTime<=N);if(N=a.unstable_now(),typeof U=="function"){b.callback=U,G(N),B=!0;break t}b===r(m)&&s(m),G(N)}else s(m);b=r(m)}if(b!==null)B=!0;else{var S=r(y);S!==null&&We(de,S.startTime-N),B=!1}}break e}finally{b=null,x=ne,k=!1}B=void 0}}finally{B?Ae():ge=!1}}}var Ae;if(typeof L=="function")Ae=function(){L(Re)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,st=Ke.port2;Ke.port1.onmessage=Re,Ae=function(){st.postMessage(null)}}else Ae=function(){Q(Re,0)};function We(N,B){Y=Q(function(){N(a.unstable_now())},B)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(N){N.callback=null},a.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<N?Math.floor(1e3/N):5},a.unstable_getCurrentPriorityLevel=function(){return x},a.unstable_next=function(N){switch(x){case 1:case 2:case 3:var B=3;break;default:B=x}var ne=x;x=B;try{return N()}finally{x=ne}},a.unstable_requestPaint=function(){H=!0},a.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var ne=x;x=N;try{return B()}finally{x=ne}},a.unstable_scheduleCallback=function(N,B,ne){var ve=a.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ve+ne:ve):ne=ve,N){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ne+U,N={id:v++,callback:B,priorityLevel:N,startTime:ne,expirationTime:U,sortIndex:-1},ne>ve?(N.sortIndex=ne,n(y,N),r(m)===null&&N===r(y)&&(Z?(K(Y),Y=-1):Z=!0,We(de,ne-ve))):(N.sortIndex=U,n(m,N),j||k||(j=!0,ge||(ge=!0,Ae()))),N},a.unstable_shouldYield=pe,a.unstable_wrapCallback=function(N){var B=x;return function(){var ne=x;x=B;try{return N.apply(this,arguments)}finally{x=ne}}}})(lf)),lf}var Pg;function lE(){return Pg||(Pg=1,of.exports=oE()),of.exports}var cf={exports:{}},Rn={};var Zg;function cE(){if(Zg)return Rn;Zg=1;var a=Th();function n(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:m,containerInfo:y,implementation:v}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Rn.createPortal=function(m,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return c(m,y,null,v)},Rn.flushSync=function(m){var y=d.T,v=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=y,s.p=v,s.d.f()}},Rn.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(m,y))},Rn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Rn.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:k}):v==="script"&&s.d.X(m,{crossOrigin:b,integrity:x,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Rn.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=h(y.as,y.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(m)},Rn.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin);s.d.L(m,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Rn.preloadModule=function(m,y){if(typeof m=="string")if(y){var v=h(y.as,y.crossOrigin);s.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(m)},Rn.requestFormReset=function(m){s.d.r(m)},Rn.unstable_batchedUpdates=function(m,y){return m(y)},Rn.useFormState=function(m,y,v){return d.H.useFormState(m,y,v)},Rn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Rn.version="19.2.0",Rn}var Xg;function lb(){if(Xg)return cf.exports;Xg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),cf.exports=cE(),cf.exports}var Kg;function uE(){if(Kg)return vo;Kg=1;var a=lE(),n=Th(),r=lb();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(s(188))}function y(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,o=t;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return m(u),e;if(f===o)return m(u),t;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=f;else{for(var g=!1,w=u.child;w;){if(w===i){g=!0,i=u,o=f;break}if(w===o){g=!0,o=u,i=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===i){g=!0,i=f,o=u;break}if(w===o){g=!0,o=f,i=u;break}w=w.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),L=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),Re=Symbol.iterator;function Ae(e){return e===null||typeof e!="object"?null:(e=Re&&e[Re]||e["@@iterator"],typeof e=="function"?e:null)}var Ke=Symbol.for("react.client.reference");function st(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ke?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case Q:return"Profiler";case H:return"StrictMode";case de:return"Suspense";case ge:return"SuspenseList";case re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case L:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return t=e.displayName||null,t!==null?t:st(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return st(e(t))}catch{}}return null}var We=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ve=[],U=-1;function S(e){return{current:e}}function M(e){0>U||(e.current=ve[U],ve[U]=null,U--)}function O(e,t){U++,ve[U]=e.current,e.current=t}var z=S(null),oe=S(null),he=S(null),Oe=S(null);function Ge(e,t){switch(O(he,t),O(oe,e),O(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?dg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=dg(t),e=fg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(z),O(z,e)}function Ve(){M(z),M(oe),M(he)}function tt(e){e.memoizedState!==null&&O(Oe,e);var t=z.current,i=fg(t,e.type);t!==i&&(O(oe,e),O(z,i))}function wt(e){oe.current===e&&(M(z),M(oe)),Oe.current===e&&(M(Oe),ho._currentValue=ne)}var jt,Dn;function mn(e){if(jt===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);jt=t&&t[1]||"",Dn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jt+e+Dn}var Kt=!1;function Hn(e,t){if(!e||Kt)return"";Kt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(X){var q=X}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(X){q=X}e.call(ae.prototype)}}else{try{throw Error()}catch(X){q=X}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(X){if(X&&q&&typeof X.stack=="string")return[X.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),g=f[0],w=f[1];if(g&&w){var T=g.split(`
`),$=w.split(`
`);for(u=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;u<$.length&&!$[u].includes("DetermineComponentFrameRoot");)u++;if(o===T.length||u===$.length)for(o=T.length-1,u=$.length-1;1<=o&&0<=u&&T[o]!==$[u];)u--;for(;1<=o&&0<=u;o--,u--)if(T[o]!==$[u]){if(o!==1||u!==1)do if(o--,u--,0>u||T[o]!==$[u]){var W=`
`+T[o].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=o&&0<=u);break}}}finally{Kt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?mn(i):""}function Qe(e,t){switch(e.tag){case 26:case 27:case 5:return mn(e.type);case 16:return mn("Lazy");case 13:return e.child!==t&&t!==null?mn("Suspense Fallback"):mn("Suspense");case 19:return mn("SuspenseList");case 0:case 15:return Hn(e.type,!1);case 11:return Hn(e.type.render,!1);case 1:return Hn(e.type,!0);case 31:return mn("Activity");default:return""}}function F(e){try{var t="",i=null;do t+=Qe(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ie=Object.prototype.hasOwnProperty,J=a.unstable_scheduleCallback,je=a.unstable_cancelCallback,be=a.unstable_shouldYield,se=a.unstable_requestPaint,C=a.unstable_now,R=a.unstable_getCurrentPriorityLevel,le=a.unstable_ImmediatePriority,fe=a.unstable_UserBlockingPriority,we=a.unstable_NormalPriority,Te=a.unstable_LowPriority,$e=a.unstable_IdlePriority,Pe=a.log,St=a.unstable_setDisableYieldValue,Ue=null,He=null;function Be(e){if(typeof Pe=="function"&&St(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Ue,e)}catch{}}var it=Math.clz32?Math.clz32:zt,gt=Math.log,It=Math.LN2;function zt(e){return e>>>=0,e===0?32:31-(gt(e)/It|0)|0}var ot=256,Lt=262144,tn=4194304;function nn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qt(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?u=nn(o):(g&=w,g!==0?u=nn(g):i||(i=w&~e,i!==0&&(u=nn(i))))):(w=o&~f,w!==0?u=nn(w):g!==0?u=nn(g):i||(i=o&~e,i!==0&&(u=nn(i)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,i=t&-t,f>=i||f===32&&(i&4194048)!==0)?t:u}function _(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function V(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ue(){var e=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),e}function Ne(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yn(e,t,i,o,u,f){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,T=e.expirationTimes,$=e.hiddenUpdates;for(i=g&~i;0<i;){var W=31-it(i),ae=1<<W;w[W]=0,T[W]=-1;var q=$[W];if(q!==null)for($[W]=null,W=0;W<q.length;W++){var X=q[W];X!==null&&(X.lane&=-536870913)}i&=~ae}o!==0&&wa(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(g&~t))}function wa(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-it(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Le(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-it(i),u=1<<o;u&t|e[o]&t&&(e[o]|=t),i&=~u}}function At(e,t){var i=t&-t;return i=(i&42)!==0?1:xt(i),(i&(e.suspendedLanes|t))!==0?0:i}function xt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Je(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ns(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:zg(e.type))}function Os(e,t){var i=B.p;try{return B.p=e,t()}finally{B.p=i}}var Sa=Math.random().toString(36).slice(2),on="__reactFiber$"+Sa,Cn="__reactProps$"+Sa,Fa="__reactContainer$"+Sa,Vo="__reactEvents$"+Sa,Kc="__reactListeners$"+Sa,qo="__reactHandles$"+Sa,Sn="__reactResources$"+Sa,xa="__reactMarker$"+Sa;function Ea(e){delete e[on],delete e[Cn],delete e[Vo],delete e[Kc],delete e[qo]}function ia(e){var t=e[on];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Fa]||i[on]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=bg(e);e!==null;){if(i=e[on])return i;e=bg(e)}return t}e=i,i=e.parentNode}return null}function yr(e){if(e=e[on]||e[Fa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Pa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function P(e){var t=e[Sn];return t||(t=e[Sn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function te(e){e[xa]=!0}var ye=new Set,xe={};function Ee(e,t){Ze(e,t),Ze(e+"Capture",t)}function Ze(e,t){for(xe[e]=t,e=0;e<t.length;e++)ye.add(t[e])}var Gt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),an={},Qt={};function Jt(e){return ie.call(Qt,e)?!0:ie.call(an,e)?!1:Gt.test(e)?Qt[e]=!0:(an[e]=!0,!1)}function gn(e,t,i){if(Jt(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function _t(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Yt(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function xn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ma(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Za(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){i=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Go(e){if(!e._valueTracker){var t=Ma(e)?"checked":"value";e._valueTracker=Za(e,t,""+e[t])}}function rp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=Ma(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qw=/[\n"\\]/g;function sa(e){return e.replace(Qw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Qc(e,t,i,o,u,f,g,w){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+xn(t)):e.value!==""+xn(t)&&(e.value=""+xn(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Jc(e,g,xn(t)):i!=null?Jc(e,g,xn(i)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+xn(w):e.removeAttribute("name")}function ip(e,t,i,o,u,f,g,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Go(e);return}i=i!=null?""+xn(i):"",t=t!=null?""+xn(t):i,w||t===e.value||(e.value=t),e.defaultValue=t}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Go(e)}function Jc(e,t,i){t==="number"&&Yo(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ei(e,t,i,o){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+xn(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function sp(e,t,i){if(t!=null&&(t=""+xn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+xn(i):""}function op(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(s(92));if(We(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=xn(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Go(e)}function ki(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Jw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lp(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||Jw.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function cp(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in t)o=t[u],t.hasOwnProperty(u)&&i[u]!==o&&lp(e,u,o)}else for(var f in t)t.hasOwnProperty(f)&&lp(e,f,t[f])}function Wc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ww=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(e){return eS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Xa(){}var eu=null;function tu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ci=null,Ti=null;function up(e){var t=yr(e);if(t&&(e=t.stateNode)){var i=e[Cn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Qc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+sa(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var u=o[Cn]||null;if(!u)throw Error(s(90));Qc(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&rp(o)}break e;case"textarea":sp(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Ei(e,!!i.multiple,t,!1)}}}var nu=!1;function dp(e,t,i){if(nu)return e(t,i);nu=!0;try{var o=e(t);return o}finally{if(nu=!1,(Ci!==null||Ti!==null)&&(Rl(),Ci&&(t=Ci,e=Ti,Ti=Ci=null,up(t),e)))for(t=0;t<e.length;t++)up(e[t])}}function js(e,t){var i=e.stateNode;if(i===null)return null;var o=i[Cn]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),au=!1;if(Ka)try{var As={};Object.defineProperty(As,"passive",{get:function(){au=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{au=!1}var gr=null,ru=null,Po=null;function fp(){if(Po)return Po;var e,t=ru,i=t.length,o,u="value"in gr?gr.value:gr.textContent,f=u.length;for(e=0;e<i&&t[e]===u[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===u[f-o];o++);return Po=u.slice(e,1<o?1-o:void 0)}function Zo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xo(){return!0}function hp(){return!1}function Vn(e){function t(i,o,u,f,g){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xo:hp,this.isPropagationStopped=hp,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),t}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=Vn(Jr),_s=b({},Jr,{view:0,detail:0}),tS=Vn(_s),iu,su,Ds,Qo=b({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(iu=e.screenX-Ds.screenX,su=e.screenY-Ds.screenY):su=iu=0,Ds=e),iu)},movementY:function(e){return"movementY"in e?e.movementY:su}}),pp=Vn(Qo),nS=b({},Qo,{dataTransfer:0}),aS=Vn(nS),rS=b({},_s,{relatedTarget:0}),ou=Vn(rS),iS=b({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),sS=Vn(iS),oS=b({},Jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lS=Vn(oS),cS=b({},Jr,{data:0}),mp=Vn(cS),uS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fS[e])?!!t[e]:!1}function lu(){return hS}var pS=b({},_s,{key:function(e){if(e.key){var t=uS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lu,charCode:function(e){return e.type==="keypress"?Zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mS=Vn(pS),yS=b({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yp=Vn(yS),gS=b({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lu}),vS=Vn(gS),bS=b({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wS=Vn(bS),SS=b({},Qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xS=Vn(SS),ES=b({},Jr,{newState:0,oldState:0}),kS=Vn(ES),CS=[9,13,27,32],cu=Ka&&"CompositionEvent"in window,Rs=null;Ka&&"documentMode"in document&&(Rs=document.documentMode);var TS=Ka&&"TextEvent"in window&&!Rs,gp=Ka&&(!cu||Rs&&8<Rs&&11>=Rs),vp=" ",bp=!1;function wp(e,t){switch(e){case"keyup":return CS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ni=!1;function NS(e,t){switch(e){case"compositionend":return Sp(t);case"keypress":return t.which!==32?null:(bp=!0,vp);case"textInput":return e=t.data,e===vp&&bp?null:e;default:return null}}function OS(e,t){if(Ni)return e==="compositionend"||!cu&&wp(e,t)?(e=fp(),Po=ru=gr=null,Ni=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gp&&t.locale!=="ko"?null:t.data;default:return null}}var jS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jS[e.type]:t==="textarea"}function Ep(e,t,i,o){Ci?Ti?Ti.push(o):Ti=[o]:Ci=o,t=$l(t,"onChange"),0<t.length&&(i=new Ko("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Ms=null,zs=null;function AS(e){ig(e,0)}function Jo(e){var t=Pa(e);if(rp(t))return e}function kp(e,t){if(e==="change")return t}var Cp=!1;if(Ka){var uu;if(Ka){var du="oninput"in document;if(!du){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),du=typeof Tp.oninput=="function"}uu=du}else uu=!1;Cp=uu&&(!document.documentMode||9<document.documentMode)}function Np(){Ms&&(Ms.detachEvent("onpropertychange",Op),zs=Ms=null)}function Op(e){if(e.propertyName==="value"&&Jo(zs)){var t=[];Ep(t,zs,e,tu(e)),dp(AS,t)}}function _S(e,t,i){e==="focusin"?(Np(),Ms=t,zs=i,Ms.attachEvent("onpropertychange",Op)):e==="focusout"&&Np()}function DS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(zs)}function RS(e,t){if(e==="click")return Jo(t)}function MS(e,t){if(e==="input"||e==="change")return Jo(t)}function zS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kn=typeof Object.is=="function"?Object.is:zS;function Ls(e,t){if(Kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!ie.call(t,u)||!Kn(e[u],t[u]))return!1}return!0}function jp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ap(e,t){var i=jp(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=jp(i)}}function _p(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_p(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Yo(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Yo(e.document)}return t}function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var LS=Ka&&"documentMode"in document&&11>=document.documentMode,Oi=null,hu=null,Bs=null,pu=!1;function Rp(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;pu||Oi==null||Oi!==Yo(o)||(o=Oi,"selectionStart"in o&&fu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Bs&&Ls(Bs,o)||(Bs=o,o=$l(hu,"onSelect"),0<o.length&&(t=new Ko("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=Oi)))}function Wr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ji={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},mu={},Mp={};Ka&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function ei(e){if(mu[e])return mu[e];if(!ji[e])return e;var t=ji[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Mp)return mu[e]=t[i];return e}var zp=ei("animationend"),Lp=ei("animationiteration"),Bp=ei("animationstart"),BS=ei("transitionrun"),US=ei("transitionstart"),IS=ei("transitioncancel"),Up=ei("transitionend"),Ip=new Map,yu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yu.push("scrollEnd");function ka(e,t){Ip.set(e,t),Ee(t,[e])}var Wo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},oa=[],Ai=0,gu=0;function el(){for(var e=Ai,t=gu=Ai=0;t<e;){var i=oa[t];oa[t++]=null;var o=oa[t];oa[t++]=null;var u=oa[t];oa[t++]=null;var f=oa[t];if(oa[t++]=null,o!==null&&u!==null){var g=o.pending;g===null?u.next=u:(u.next=g.next,g.next=u),o.pending=u}f!==0&&$p(i,u,f)}}function tl(e,t,i,o){oa[Ai++]=e,oa[Ai++]=t,oa[Ai++]=i,oa[Ai++]=o,gu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function vu(e,t,i,o){return tl(e,t,i,o),nl(e)}function ti(e,t){return tl(e,null,null,t),nl(e)}function $p(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-it(i),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[t]:o.push(t),t.lane=i|536870912),f):null}function nl(e){if(50<io)throw io=0,Nd=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _i={};function $S(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(e,t,i,o){return new $S(e,t,i,o)}function bu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qa(e,t){var i=e.alternate;return i===null?(i=Qn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Hp(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function al(e,t,i,o,u,f){var g=0;if(o=e,typeof e=="function")bu(e)&&(g=1);else if(typeof e=="string")g=Yx(e,i,z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case re:return e=Qn(31,i,t,u),e.elementType=re,e.lanes=f,e;case Z:return ni(i.children,u,f,t);case H:g=8,u|=24;break;case Q:return e=Qn(12,i,t,u|2),e.elementType=Q,e.lanes=f,e;case de:return e=Qn(13,i,t,u),e.elementType=de,e.lanes=f,e;case ge:return e=Qn(19,i,t,u),e.elementType=ge,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:g=10;break e;case K:g=9;break e;case G:g=11;break e;case Y:g=14;break e;case ce:g=16,o=null;break e}g=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return t=Qn(g,i,t,u),t.elementType=e,t.type=o,t.lanes=f,t}function ni(e,t,i,o){return e=Qn(7,e,o,t),e.lanes=i,e}function wu(e,t,i){return e=Qn(6,e,null,t),e.lanes=i,e}function Vp(e){var t=Qn(18,null,null,0);return t.stateNode=e,t}function Su(e,t,i){return t=Qn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qp=new WeakMap;function la(e,t){if(typeof e=="object"&&e!==null){var i=qp.get(e);return i!==void 0?i:(t={value:e,source:t,stack:F(t)},qp.set(e,t),t)}return{value:e,source:t,stack:F(t)}}var Di=[],Ri=0,rl=null,Us=0,ca=[],ua=0,vr=null,za=1,La="";function Ja(e,t){Di[Ri++]=Us,Di[Ri++]=rl,rl=e,Us=t}function Gp(e,t,i){ca[ua++]=za,ca[ua++]=La,ca[ua++]=vr,vr=e;var o=za;e=La;var u=32-it(o)-1;o&=~(1<<u),i+=1;var f=32-it(t)+u;if(30<f){var g=u-u%5;f=(o&(1<<g)-1).toString(32),o>>=g,u-=g,za=1<<32-it(t)+u|i<<u|o,La=f+e}else za=1<<f|i<<u|o,La=e}function xu(e){e.return!==null&&(Ja(e,1),Gp(e,1,0))}function Eu(e){for(;e===rl;)rl=Di[--Ri],Di[Ri]=null,Us=Di[--Ri],Di[Ri]=null;for(;e===vr;)vr=ca[--ua],ca[ua]=null,La=ca[--ua],ca[ua]=null,za=ca[--ua],ca[ua]=null}function Yp(e,t){ca[ua++]=za,ca[ua++]=La,ca[ua++]=vr,za=t.id,La=t.overflow,vr=e}var Tn=null,$t=null,pt=!1,br=null,da=!1,ku=Error(s(519));function wr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Is(la(t,e)),ku}function Fp(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[on]=e,t[Cn]=o,i){case"dialog":ct("cancel",t),ct("close",t);break;case"iframe":case"object":case"embed":ct("load",t);break;case"video":case"audio":for(i=0;i<oo.length;i++)ct(oo[i],t);break;case"source":ct("error",t);break;case"img":case"image":case"link":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"input":ct("invalid",t),ip(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ct("invalid",t);break;case"textarea":ct("invalid",t),op(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||cg(t.textContent,i)?(o.popover!=null&&(ct("beforetoggle",t),ct("toggle",t)),o.onScroll!=null&&ct("scroll",t),o.onScrollEnd!=null&&ct("scrollend",t),o.onClick!=null&&(t.onclick=Xa),t=!0):t=!1,t||wr(e,!0)}function Pp(e){for(Tn=e.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:da=!1;return;case 27:case 3:da=!0;return;default:Tn=Tn.return}}function Mi(e){if(e!==Tn)return!1;if(!pt)return Pp(e),pt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Vd(e.type,e.memoizedProps)),i=!i),i&&$t&&wr(e),Pp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=vg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=vg(e)}else t===27?(t=$t,Mr(e.type)?(e=Pd,Pd=null,$t=e):$t=t):$t=Tn?ha(e.stateNode.nextSibling):null;return!0}function ai(){$t=Tn=null,pt=!1}function Cu(){var e=br;return e!==null&&(Fn===null?Fn=e:Fn.push.apply(Fn,e),br=null),e}function Is(e){br===null?br=[e]:br.push(e)}var Tu=S(null),ri=null,Wa=null;function Sr(e,t,i){O(Tu,t._currentValue),t._currentValue=i}function er(e){e._currentValue=Tu.current,M(Tu)}function Nu(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function Ou(e,t,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var g=u.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=u;for(var T=0;T<t.length;T++)if(w.context===t[T]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),Nu(f.return,i,e),o||(g=null);break e}f=w.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(s(341));g.lanes|=i,f=g.alternate,f!==null&&(f.lanes|=i),Nu(g,i,e),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function zi(e,t,i,o){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(s(387));if(g=g.memoizedProps,g!==null){var w=u.type;Kn(u.pendingProps.value,g.value)||(e!==null?e.push(w):e=[w])}}else if(u===Oe.current){if(g=u.alternate,g===null)throw Error(s(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ho):e=[ho])}u=u.return}e!==null&&Ou(t,e,i,o),t.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ii(e){ri=e,Wa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Nn(e){return Zp(ri,e)}function sl(e,t){return ri===null&&ii(e),Zp(e,t)}function Zp(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Wa===null){if(e===null)throw Error(s(308));Wa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wa=Wa.next=t;return i}var HS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},VS=a.unstable_scheduleCallback,qS=a.unstable_NormalPriority,ln={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ju(){return{controller:new HS,data:new Map,refCount:0}}function $s(e){e.refCount--,e.refCount===0&&VS(qS,function(){e.controller.abort()})}var Hs=null,Au=0,Li=0,Bi=null;function GS(e,t){if(Hs===null){var i=Hs=[];Au=0,Li=Rd(),Bi={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Au++,t.then(Xp,Xp),t}function Xp(){if(--Au===0&&Hs!==null){Bi!==null&&(Bi.status="fulfilled");var e=Hs;Hs=null,Li=0,Bi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function YS(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var u=0;u<i.length;u++)(0,i[u])(t)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Kp=N.S;N.S=function(e,t){Ry=C(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&GS(e,t),Kp!==null&&Kp(e,t)};var si=S(null);function _u(){var e=si.current;return e!==null?e:Bt.pooledCache}function ol(e,t){t===null?O(si,si.current):O(si,t.pool)}function Qp(){var e=_u();return e===null?null:{parent:ln._currentValue,pool:e}}var Ui=Error(s(460)),Du=Error(s(474)),ll=Error(s(542)),cl={then:function(){}};function Jp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wp(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Xa,Xa),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,tm(e),e;default:if(typeof t.status=="string")t.then(Xa,Xa);else{if(e=Bt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=o}},function(o){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,tm(e),e}throw li=t,Ui}}function oi(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(li=i,Ui):i}}var li=null;function em(){if(li===null)throw Error(s(459));var e=li;return li=null,e}function tm(e){if(e===Ui||e===ll)throw Error(s(483))}var Ii=null,Vs=0;function ul(e){var t=Vs;return Vs+=1,Ii===null&&(Ii=[]),Wp(Ii,e,t)}function qs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dl(e,t){throw t.$$typeof===x?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function nm(e){function t(D,A){if(e){var I=D.deletions;I===null?(D.deletions=[A],D.flags|=16):I.push(A)}}function i(D,A){if(!e)return null;for(;A!==null;)t(D,A),A=A.sibling;return null}function o(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function u(D,A){return D=Qa(D,A),D.index=0,D.sibling=null,D}function f(D,A,I){return D.index=I,e?(I=D.alternate,I!==null?(I=I.index,I<A?(D.flags|=67108866,A):I):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function g(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function w(D,A,I,ee){return A===null||A.tag!==6?(A=wu(I,D.mode,ee),A.return=D,A):(A=u(A,I),A.return=D,A)}function T(D,A,I,ee){var Ie=I.type;return Ie===Z?W(D,A,I.props.children,ee,I.key):A!==null&&(A.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ce&&oi(Ie)===A.type)?(A=u(A,I.props),qs(A,I),A.return=D,A):(A=al(I.type,I.key,I.props,null,D.mode,ee),qs(A,I),A.return=D,A)}function $(D,A,I,ee){return A===null||A.tag!==4||A.stateNode.containerInfo!==I.containerInfo||A.stateNode.implementation!==I.implementation?(A=Su(I,D.mode,ee),A.return=D,A):(A=u(A,I.children||[]),A.return=D,A)}function W(D,A,I,ee,Ie){return A===null||A.tag!==7?(A=ni(I,D.mode,ee,Ie),A.return=D,A):(A=u(A,I),A.return=D,A)}function ae(D,A,I){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=wu(""+A,D.mode,I),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case k:return I=al(A.type,A.key,A.props,null,D.mode,I),qs(I,A),I.return=D,I;case j:return A=Su(A,D.mode,I),A.return=D,A;case ce:return A=oi(A),ae(D,A,I)}if(We(A)||Ae(A))return A=ni(A,D.mode,I,null),A.return=D,A;if(typeof A.then=="function")return ae(D,ul(A),I);if(A.$$typeof===L)return ae(D,sl(D,A),I);dl(D,A)}return null}function q(D,A,I,ee){var Ie=A!==null?A.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return Ie!==null?null:w(D,A,""+I,ee);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case k:return I.key===Ie?T(D,A,I,ee):null;case j:return I.key===Ie?$(D,A,I,ee):null;case ce:return I=oi(I),q(D,A,I,ee)}if(We(I)||Ae(I))return Ie!==null?null:W(D,A,I,ee,null);if(typeof I.then=="function")return q(D,A,ul(I),ee);if(I.$$typeof===L)return q(D,A,sl(D,I),ee);dl(D,I)}return null}function X(D,A,I,ee,Ie){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return D=D.get(I)||null,w(A,D,""+ee,Ie);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case k:return D=D.get(ee.key===null?I:ee.key)||null,T(A,D,ee,Ie);case j:return D=D.get(ee.key===null?I:ee.key)||null,$(A,D,ee,Ie);case ce:return ee=oi(ee),X(D,A,I,ee,Ie)}if(We(ee)||Ae(ee))return D=D.get(I)||null,W(A,D,ee,Ie,null);if(typeof ee.then=="function")return X(D,A,I,ul(ee),Ie);if(ee.$$typeof===L)return X(D,A,I,sl(A,ee),Ie);dl(A,ee)}return null}function _e(D,A,I,ee){for(var Ie=null,vt=null,Me=A,nt=A=0,dt=null;Me!==null&&nt<I.length;nt++){Me.index>nt?(dt=Me,Me=null):dt=Me.sibling;var bt=q(D,Me,I[nt],ee);if(bt===null){Me===null&&(Me=dt);break}e&&Me&&bt.alternate===null&&t(D,Me),A=f(bt,A,nt),vt===null?Ie=bt:vt.sibling=bt,vt=bt,Me=dt}if(nt===I.length)return i(D,Me),pt&&Ja(D,nt),Ie;if(Me===null){for(;nt<I.length;nt++)Me=ae(D,I[nt],ee),Me!==null&&(A=f(Me,A,nt),vt===null?Ie=Me:vt.sibling=Me,vt=Me);return pt&&Ja(D,nt),Ie}for(Me=o(Me);nt<I.length;nt++)dt=X(Me,D,nt,I[nt],ee),dt!==null&&(e&&dt.alternate!==null&&Me.delete(dt.key===null?nt:dt.key),A=f(dt,A,nt),vt===null?Ie=dt:vt.sibling=dt,vt=dt);return e&&Me.forEach(function(Ir){return t(D,Ir)}),pt&&Ja(D,nt),Ie}function qe(D,A,I,ee){if(I==null)throw Error(s(151));for(var Ie=null,vt=null,Me=A,nt=A=0,dt=null,bt=I.next();Me!==null&&!bt.done;nt++,bt=I.next()){Me.index>nt?(dt=Me,Me=null):dt=Me.sibling;var Ir=q(D,Me,bt.value,ee);if(Ir===null){Me===null&&(Me=dt);break}e&&Me&&Ir.alternate===null&&t(D,Me),A=f(Ir,A,nt),vt===null?Ie=Ir:vt.sibling=Ir,vt=Ir,Me=dt}if(bt.done)return i(D,Me),pt&&Ja(D,nt),Ie;if(Me===null){for(;!bt.done;nt++,bt=I.next())bt=ae(D,bt.value,ee),bt!==null&&(A=f(bt,A,nt),vt===null?Ie=bt:vt.sibling=bt,vt=bt);return pt&&Ja(D,nt),Ie}for(Me=o(Me);!bt.done;nt++,bt=I.next())bt=X(Me,D,nt,bt.value,ee),bt!==null&&(e&&bt.alternate!==null&&Me.delete(bt.key===null?nt:bt.key),A=f(bt,A,nt),vt===null?Ie=bt:vt.sibling=bt,vt=bt);return e&&Me.forEach(function(nE){return t(D,nE)}),pt&&Ja(D,nt),Ie}function Mt(D,A,I,ee){if(typeof I=="object"&&I!==null&&I.type===Z&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case k:e:{for(var Ie=I.key;A!==null;){if(A.key===Ie){if(Ie=I.type,Ie===Z){if(A.tag===7){i(D,A.sibling),ee=u(A,I.props.children),ee.return=D,D=ee;break e}}else if(A.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ce&&oi(Ie)===A.type){i(D,A.sibling),ee=u(A,I.props),qs(ee,I),ee.return=D,D=ee;break e}i(D,A);break}else t(D,A);A=A.sibling}I.type===Z?(ee=ni(I.props.children,D.mode,ee,I.key),ee.return=D,D=ee):(ee=al(I.type,I.key,I.props,null,D.mode,ee),qs(ee,I),ee.return=D,D=ee)}return g(D);case j:e:{for(Ie=I.key;A!==null;){if(A.key===Ie)if(A.tag===4&&A.stateNode.containerInfo===I.containerInfo&&A.stateNode.implementation===I.implementation){i(D,A.sibling),ee=u(A,I.children||[]),ee.return=D,D=ee;break e}else{i(D,A);break}else t(D,A);A=A.sibling}ee=Su(I,D.mode,ee),ee.return=D,D=ee}return g(D);case ce:return I=oi(I),Mt(D,A,I,ee)}if(We(I))return _e(D,A,I,ee);if(Ae(I)){if(Ie=Ae(I),typeof Ie!="function")throw Error(s(150));return I=Ie.call(I),qe(D,A,I,ee)}if(typeof I.then=="function")return Mt(D,A,ul(I),ee);if(I.$$typeof===L)return Mt(D,A,sl(D,I),ee);dl(D,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,A!==null&&A.tag===6?(i(D,A.sibling),ee=u(A,I),ee.return=D,D=ee):(i(D,A),ee=wu(I,D.mode,ee),ee.return=D,D=ee),g(D)):i(D,A)}return function(D,A,I,ee){try{Vs=0;var Ie=Mt(D,A,I,ee);return Ii=null,Ie}catch(Me){if(Me===Ui||Me===ll)throw Me;var vt=Qn(29,Me,null,D.mode);return vt.lanes=ee,vt.return=D,vt}finally{}}}var ci=nm(!0),am=nm(!1),xr=!1;function Ru(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Er(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function kr(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Et&2)!==0){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,t=nl(e),$p(e,null,i),t}return tl(e,o,t,i),nl(e)}function Gs(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Le(e,i)}}function zu(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?u=f=t:f=f.next=t}else u=f=t;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Lu=!1;function Ys(){if(Lu){var e=Bi;if(e!==null)throw e}}function Fs(e,t,i,o){Lu=!1;var u=e.updateQueue;xr=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var T=w,$=T.next;T.next=null,g===null?f=$:g.next=$,g=T;var W=e.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==g&&(w===null?W.firstBaseUpdate=$:w.next=$,W.lastBaseUpdate=T))}if(f!==null){var ae=u.baseState;g=0,W=$=T=null,w=f;do{var q=w.lane&-536870913,X=q!==w.lane;if(X?(ut&q)===q:(o&q)===q){q!==0&&q===Li&&(Lu=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var _e=e,qe=w;q=t;var Mt=i;switch(qe.tag){case 1:if(_e=qe.payload,typeof _e=="function"){ae=_e.call(Mt,ae,q);break e}ae=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=qe.payload,q=typeof _e=="function"?_e.call(Mt,ae,q):_e,q==null)break e;ae=b({},ae,q);break e;case 2:xr=!0}}q=w.callback,q!==null&&(e.flags|=64,X&&(e.flags|=8192),X=u.callbacks,X===null?u.callbacks=[q]:X.push(q))}else X={lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?($=W=X,T=ae):W=W.next=X,g|=q;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;X=w,w=X.next,X.next=null,u.lastBaseUpdate=X,u.shared.pending=null}}while(!0);W===null&&(T=ae),u.baseState=T,u.firstBaseUpdate=$,u.lastBaseUpdate=W,f===null&&(u.shared.lanes=0),jr|=g,e.lanes=g,e.memoizedState=ae}}function rm(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function im(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)rm(i[e],t)}var $i=S(null),fl=S(0);function sm(e,t){e=cr,O(fl,e),O($i,t),cr=e|t.baseLanes}function Bu(){O(fl,cr),O($i,$i.current)}function Uu(){cr=fl.current,M($i),M(fl)}var Jn=S(null),fa=null;function Cr(e){var t=e.alternate;O(rn,rn.current&1),O(Jn,e),fa===null&&(t===null||$i.current!==null||t.memoizedState!==null)&&(fa=e)}function Iu(e){O(rn,rn.current),O(Jn,e),fa===null&&(fa=e)}function om(e){e.tag===22?(O(rn,rn.current),O(Jn,e),fa===null&&(fa=e)):Tr()}function Tr(){O(rn,rn.current),O(Jn,Jn.current)}function Wn(e){M(Jn),fa===e&&(fa=null),M(rn)}var rn=S(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Yd(i)||Fd(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tr=0,et=null,Dt=null,cn=null,pl=!1,Hi=!1,ui=!1,ml=0,Ps=0,Vi=null,FS=0;function Wt(){throw Error(s(321))}function $u(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Kn(e[i],t[i]))return!1;return!0}function Hu(e,t,i,o,u,f){return tr=f,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Gm:nd,ui=!1,f=i(o,u),ui=!1,Hi&&(f=cm(t,i,o,u)),lm(e),f}function lm(e){N.H=Ks;var t=Dt!==null&&Dt.next!==null;if(tr=0,cn=Dt=et=null,pl=!1,Ps=0,Vi=null,t)throw Error(s(300));e===null||un||(e=e.dependencies,e!==null&&il(e)&&(un=!0))}function cm(e,t,i,o){et=e;var u=0;do{if(Hi&&(Vi=null),Ps=0,Hi=!1,25<=u)throw Error(s(301));if(u+=1,cn=Dt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}N.H=Ym,f=t(i,o)}while(Hi);return f}function PS(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?Zs(t):t,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(et.flags|=1024),t}function Vu(){var e=ml!==0;return ml=0,e}function qu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Gu(e){if(pl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pl=!1}tr=0,cn=Dt=et=null,Hi=!1,Ps=ml=0,Vi=null}function In(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?et.memoizedState=cn=e:cn=cn.next=e,cn}function sn(){if(Dt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=cn===null?et.memoizedState:cn.next;if(t!==null)cn=t,Dt=e;else{if(e===null)throw et.alternate===null?Error(s(467)):Error(s(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},cn===null?et.memoizedState=cn=e:cn=cn.next=e}return cn}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zs(e){var t=Ps;return Ps+=1,Vi===null&&(Vi=[]),e=Wp(Vi,e,t),t=et,(cn===null?t.memoizedState:cn.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Gm:nd),e}function gl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zs(e);if(e.$$typeof===L)return Nn(e)}throw Error(s(438,String(e)))}function Yu(e){var t=null,i=et.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=et.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=yl(),et.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=pe;return t.index++,i}function nr(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=sn();return Fu(t,Dt,e)}function Fu(e,t,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}t.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var w=g=null,T=null,$=t,W=!1;do{var ae=$.lane&-536870913;if(ae!==$.lane?(ut&ae)===ae:(tr&ae)===ae){var q=$.revertLane;if(q===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ae===Li&&(W=!0);else if((tr&q)===q){$=$.next,q===Li&&(W=!0);continue}else ae={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},T===null?(w=T=ae,g=f):T=T.next=ae,et.lanes|=q,jr|=q;ae=$.action,ui&&i(f,ae),f=$.hasEagerState?$.eagerState:i(f,ae)}else q={lane:ae,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},T===null?(w=T=q,g=f):T=T.next=q,et.lanes|=ae,jr|=ae;$=$.next}while($!==null&&$!==t);if(T===null?g=f:T.next=w,!Kn(f,e.memoizedState)&&(un=!0,W&&(i=Bi,i!==null)))throw i;e.memoizedState=f,e.baseState=g,e.baseQueue=T,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Pu(e){var t=sn(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,f=t.memoizedState;if(u!==null){i.pending=null;var g=u=u.next;do f=e(f,g.action),g=g.next;while(g!==u);Kn(f,t.memoizedState)||(un=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,o]}function um(e,t,i){var o=et,u=sn(),f=pt;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=t();var g=!Kn((Dt||u).memoizedState,i);if(g&&(u.memoizedState=i,un=!0),u=u.queue,Ku(hm.bind(null,o,u,e),[e]),u.getSnapshot!==t||g||cn!==null&&cn.memoizedState.tag&1){if(o.flags|=2048,qi(9,{destroy:void 0},fm.bind(null,o,u,i,t),null),Bt===null)throw Error(s(349));f||(tr&127)!==0||dm(o,t,i)}return i}function dm(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=et.updateQueue,t===null?(t=yl(),et.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function fm(e,t,i,o){t.value=i,t.getSnapshot=o,pm(t)&&mm(e)}function hm(e,t,i){return i(function(){pm(t)&&mm(e)})}function pm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Kn(e,i)}catch{return!0}}function mm(e){var t=ti(e,2);t!==null&&Pn(t,e,2)}function Zu(e){var t=In();if(typeof e=="function"){var i=e;if(e=i(),ui){Be(!0);try{i()}finally{Be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:e},t}function ym(e,t,i,o){return e.baseState=i,Fu(e,Dt,typeof o=="function"?o:nr)}function ZS(e,t,i,o,u){if(Sl(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};N.T!==null?i(!0):f.isTransition=!1,o(f),i=t.pending,i===null?(f.next=t.pending=f,gm(t,f)):(f.next=i.next,t.pending=i.next=f)}}function gm(e,t){var i=t.action,o=t.payload,u=e.state;if(t.isTransition){var f=N.T,g={};N.T=g;try{var w=i(u,o),T=N.S;T!==null&&T(g,w),vm(e,t,w)}catch($){Xu(e,t,$)}finally{f!==null&&g.types!==null&&(f.types=g.types),N.T=f}}else try{f=i(u,o),vm(e,t,f)}catch($){Xu(e,t,$)}}function vm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){bm(e,t,o)},function(o){return Xu(e,t,o)}):bm(e,t,i)}function bm(e,t,i){t.status="fulfilled",t.value=i,wm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,gm(e,i)))}function Xu(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,wm(t),t=t.next;while(t!==o)}e.action=null}function wm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Sm(e,t){return t}function xm(e,t){if(pt){var i=Bt.formState;if(i!==null){e:{var o=et;if(pt){if($t){t:{for(var u=$t,f=da;u.nodeType!==8;){if(!f){u=null;break t}if(u=ha(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){$t=ha(u.nextSibling),o=u.data==="F!";break e}}wr(o)}o=!1}o&&(t=i[0])}}return i=In(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sm,lastRenderedState:t},i.queue=o,i=Hm.bind(null,et,o),o.dispatch=i,o=Zu(!1),f=td.bind(null,et,!1,o.queue),o=In(),u={state:t,dispatch:null,action:e,pending:null},o.queue=u,i=ZS.bind(null,et,u,f,i),u.dispatch=i,o.memoizedState=e,[t,i,!1]}function Em(e){var t=sn();return km(t,Dt,e)}function km(e,t,i){if(t=Fu(e,t,Sm)[0],e=vl(nr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Zs(t)}catch(g){throw g===Ui?ll:g}else o=t;t=sn();var u=t.queue,f=u.dispatch;return i!==t.memoizedState&&(et.flags|=2048,qi(9,{destroy:void 0},XS.bind(null,u,i),null)),[o,f,e]}function XS(e,t){e.action=t}function Cm(e){var t=sn(),i=Dt;if(i!==null)return km(t,i,e);sn(),t=t.memoizedState,i=sn();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function qi(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=et.updateQueue,t===null&&(t=yl(),et.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function Tm(){return sn().memoizedState}function bl(e,t,i,o){var u=In();et.flags|=e,u.memoizedState=qi(1|t,{destroy:void 0},i,o===void 0?null:o)}function wl(e,t,i,o){var u=sn();o=o===void 0?null:o;var f=u.memoizedState.inst;Dt!==null&&o!==null&&$u(o,Dt.memoizedState.deps)?u.memoizedState=qi(t,f,i,o):(et.flags|=e,u.memoizedState=qi(1|t,f,i,o))}function Nm(e,t){bl(8390656,8,e,t)}function Ku(e,t){wl(2048,8,e,t)}function KS(e){et.flags|=4;var t=et.updateQueue;if(t===null)t=yl(),et.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Om(e){var t=sn().memoizedState;return KS({ref:t,nextImpl:e}),function(){if((Et&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function jm(e,t){return wl(4,2,e,t)}function Am(e,t){return wl(4,4,e,t)}function _m(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dm(e,t,i){i=i!=null?i.concat([e]):null,wl(4,4,_m.bind(null,t,e),i)}function Qu(){}function Rm(e,t){var i=sn();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&$u(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Mm(e,t){var i=sn();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&$u(t,o[1]))return o[0];if(o=e(),ui){Be(!0);try{e()}finally{Be(!1)}}return i.memoizedState=[o,t],o}function Ju(e,t,i){return i===void 0||(tr&1073741824)!==0&&(ut&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=zy(),et.lanes|=e,jr|=e,i)}function zm(e,t,i,o){return Kn(i,t)?i:$i.current!==null?(e=Ju(e,i,o),Kn(e,t)||(un=!0),e):(tr&42)===0||(tr&1073741824)!==0&&(ut&261930)===0?(un=!0,e.memoizedState=i):(e=zy(),et.lanes|=e,jr|=e,t)}function Lm(e,t,i,o,u){var f=B.p;B.p=f!==0&&8>f?f:8;var g=N.T,w={};N.T=w,td(e,!1,t,i);try{var T=u(),$=N.S;if($!==null&&$(w,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var W=YS(T,o);Xs(e,t,W,na(e))}else Xs(e,t,o,na(e))}catch(ae){Xs(e,t,{then:function(){},status:"rejected",reason:ae},na())}finally{B.p=f,g!==null&&w.types!==null&&(g.types=w.types),N.T=g}}function QS(){}function Wu(e,t,i,o){if(e.tag!==5)throw Error(s(476));var u=Bm(e).queue;Lm(e,u,t,ne,i===null?QS:function(){return Um(e),i(o)})}function Bm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:ne},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Um(e){var t=Bm(e);t.next===null&&(t=e.alternate.memoizedState),Xs(e,t.next.queue,{},na())}function ed(){return Nn(ho)}function Im(){return sn().memoizedState}function $m(){return sn().memoizedState}function JS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=na();e=Er(i);var o=kr(t,e,i);o!==null&&(Pn(o,t,i),Gs(o,t,i)),t={cache:ju()},e.payload=t;return}t=t.return}}function WS(e,t,i){var o=na();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Sl(e)?Vm(t,i):(i=vu(e,t,i,o),i!==null&&(Pn(i,e,o),qm(i,t,o)))}function Hm(e,t,i){var o=na();Xs(e,t,i,o)}function Xs(e,t,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Sl(e))Vm(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,w=f(g,i);if(u.hasEagerState=!0,u.eagerState=w,Kn(w,g))return tl(e,t,u,0),Bt===null&&el(),!1}catch{}finally{}if(i=vu(e,t,u,o),i!==null)return Pn(i,e,o),qm(i,t,o),!0}return!1}function td(e,t,i,o){if(o={lane:2,revertLane:Rd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sl(e)){if(t)throw Error(s(479))}else t=vu(e,i,o,2),t!==null&&Pn(t,e,2)}function Sl(e){var t=e.alternate;return e===et||t!==null&&t===et}function Vm(e,t){Hi=pl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function qm(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Le(e,i)}}var Ks={readContext:Nn,use:gl,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt};Ks.useEffectEvent=Wt;var Gm={readContext:Nn,use:gl,useCallback:function(e,t){return In().memoizedState=[e,t===void 0?null:t],e},useContext:Nn,useEffect:Nm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,bl(4194308,4,_m.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bl(4194308,4,e,t)},useInsertionEffect:function(e,t){bl(4,2,e,t)},useMemo:function(e,t){var i=In();t=t===void 0?null:t;var o=e();if(ui){Be(!0);try{e()}finally{Be(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=In();if(i!==void 0){var u=i(t);if(ui){Be(!0);try{i(t)}finally{Be(!1)}}}else u=t;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=WS.bind(null,et,e),[o.memoizedState,e]},useRef:function(e){var t=In();return e={current:e},t.memoizedState=e},useState:function(e){e=Zu(e);var t=e.queue,i=Hm.bind(null,et,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Qu,useDeferredValue:function(e,t){var i=In();return Ju(i,e,t)},useTransition:function(){var e=Zu(!1);return e=Lm.bind(null,et,e.queue,!0,!1),In().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=et,u=In();if(pt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Bt===null)throw Error(s(349));(ut&127)!==0||dm(o,t,i)}u.memoizedState=i;var f={value:i,getSnapshot:t};return u.queue=f,Nm(hm.bind(null,o,f,e),[e]),o.flags|=2048,qi(9,{destroy:void 0},fm.bind(null,o,f,i,t),null),i},useId:function(){var e=In(),t=Bt.identifierPrefix;if(pt){var i=La,o=za;i=(o&~(1<<32-it(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=ml++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=FS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ed,useFormState:xm,useActionState:xm,useOptimistic:function(e){var t=In();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=td.bind(null,et,!0,i),i.dispatch=t,[e,t]},useMemoCache:Yu,useCacheRefresh:function(){return In().memoizedState=JS.bind(null,et)},useEffectEvent:function(e){var t=In(),i={impl:e};return t.memoizedState=i,function(){if((Et&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},nd={readContext:Nn,use:gl,useCallback:Rm,useContext:Nn,useEffect:Ku,useImperativeHandle:Dm,useInsertionEffect:jm,useLayoutEffect:Am,useMemo:Mm,useReducer:vl,useRef:Tm,useState:function(){return vl(nr)},useDebugValue:Qu,useDeferredValue:function(e,t){var i=sn();return zm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=vl(nr)[0],t=sn().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:um,useId:Im,useHostTransitionStatus:ed,useFormState:Em,useActionState:Em,useOptimistic:function(e,t){var i=sn();return ym(i,Dt,e,t)},useMemoCache:Yu,useCacheRefresh:$m};nd.useEffectEvent=Om;var Ym={readContext:Nn,use:gl,useCallback:Rm,useContext:Nn,useEffect:Ku,useImperativeHandle:Dm,useInsertionEffect:jm,useLayoutEffect:Am,useMemo:Mm,useReducer:Pu,useRef:Tm,useState:function(){return Pu(nr)},useDebugValue:Qu,useDeferredValue:function(e,t){var i=sn();return Dt===null?Ju(i,e,t):zm(i,Dt.memoizedState,e,t)},useTransition:function(){var e=Pu(nr)[0],t=sn().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:um,useId:Im,useHostTransitionStatus:ed,useFormState:Cm,useActionState:Cm,useOptimistic:function(e,t){var i=sn();return Dt!==null?ym(i,Dt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Yu,useCacheRefresh:$m};Ym.useEffectEvent=Om;function ad(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:b({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var rd={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=na(),u=Er(o);u.payload=t,i!=null&&(u.callback=i),t=kr(e,u,o),t!==null&&(Pn(t,e,o),Gs(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=na(),u=Er(o);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=kr(e,u,o),t!==null&&(Pn(t,e,o),Gs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=na(),o=Er(i);o.tag=2,t!=null&&(o.callback=t),t=kr(e,o,i),t!==null&&(Pn(t,e,i),Gs(t,e,i))}};function Fm(e,t,i,o,u,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):t.prototype&&t.prototype.isPureReactComponent?!Ls(i,o)||!Ls(u,f):!0}function Pm(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&rd.enqueueReplaceState(t,t.state,null)}function di(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=b({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Zm(e){Wo(e)}function Xm(e){console.error(e)}function Km(e){Wo(e)}function xl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Qm(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function id(e,t,i){return i=Er(i),i.tag=3,i.payload={element:null},i.callback=function(){xl(e,t)},i}function Jm(e){return e=Er(e),e.tag=3,e}function Wm(e,t,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){Qm(t,i,o)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Qm(t,i,o),typeof u!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function ex(e,t,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&zi(t,i,u,!0),i=Jn.current,i!==null){switch(i.tag){case 31:case 13:return fa===null?Ml():i.alternate===null&&en===0&&(en=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),Ad(e,o,u)),!1;case 22:return i.flags|=65536,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),Ad(e,o,u)),!1}throw Error(s(435,i.tag))}return Ad(e,o,u),Ml(),!1}if(pt)return t=Jn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,o!==ku&&(e=Error(s(422),{cause:o}),Is(la(e,i)))):(o!==ku&&(t=Error(s(423),{cause:o}),Is(la(t,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=la(o,i),u=id(e.stateNode,o,u),zu(e,u),en!==4&&(en=2)),!1;var f=Error(s(520),{cause:o});if(f=la(f,i),ro===null?ro=[f]:ro.push(f),en!==4&&(en=2),t===null)return!0;o=la(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=id(i.stateNode,o,e),zu(i,e),!1;case 1:if(t=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ar===null||!Ar.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Jm(u),Wm(u,e,i,o),zu(i,u),!1}i=i.return}while(i!==null);return!1}var sd=Error(s(461)),un=!1;function On(e,t,i,o){t.child=e===null?am(t,null,i,o):ci(t,e.child,i,o)}function ey(e,t,i,o,u){i=i.render;var f=t.ref;if("ref"in o){var g={};for(var w in o)w!=="ref"&&(g[w]=o[w])}else g=o;return ii(t),o=Hu(e,t,i,g,f,u),w=Vu(),e!==null&&!un?(qu(e,t,u),ar(e,t,u)):(pt&&w&&xu(t),t.flags|=1,On(e,t,o,u),t.child)}function ty(e,t,i,o,u){if(e===null){var f=i.type;return typeof f=="function"&&!bu(f)&&f.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=f,ny(e,t,f,o,u)):(e=al(i.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!pd(e,u)){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:Ls,i(g,o)&&e.ref===t.ref)return ar(e,t,u)}return t.flags|=1,e=Qa(f,o),e.ref=t.ref,e.return=t,t.child=e}function ny(e,t,i,o,u){if(e!==null){var f=e.memoizedProps;if(Ls(f,o)&&e.ref===t.ref)if(un=!1,t.pendingProps=o=f,pd(e,u))(e.flags&131072)!==0&&(un=!0);else return t.lanes=e.lanes,ar(e,t,u)}return od(e,t,i,o,u)}function ay(e,t,i,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=t.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,t.child=null;return ry(e,t,f,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ol(t,f!==null?f.cachePool:null),f!==null?sm(t,f):Bu(),om(t);else return o=t.lanes=536870912,ry(e,t,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(ol(t,f.cachePool),sm(t,f),Tr(),t.memoizedState=null):(e!==null&&ol(t,null),Bu(),Tr());return On(e,t,u,i),t.child}function Qs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ry(e,t,i,o,u){var f=_u();return f=f===null?null:{parent:ln._currentValue,pool:f},t.memoizedState={baseLanes:i,cachePool:f},e!==null&&ol(t,null),Bu(),om(t),e!==null&&zi(e,t,o,!0),t.childLanes=u,null}function El(e,t){return t=Cl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function iy(e,t,i){return ci(t,e.child,null,i),e=El(t,t.pendingProps),e.flags|=2,Wn(t),t.memoizedState=null,e}function tx(e,t,i){var o=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(pt){if(o.mode==="hidden")return e=El(t,o),t.lanes=536870912,Qs(null,e);if(Iu(t),(e=$t)?(e=gg(e,da),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:vr!==null?{id:za,overflow:La}:null,retryLane:536870912,hydrationErrors:null},i=Vp(e),i.return=t,t.child=i,Tn=t,$t=null)):e=null,e===null)throw wr(t);return t.lanes=536870912,null}return El(t,o)}var f=e.memoizedState;if(f!==null){var g=f.dehydrated;if(Iu(t),u)if(t.flags&256)t.flags&=-257,t=iy(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(un||zi(e,t,i,!1),u=(i&e.childLanes)!==0,un||u){if(o=Bt,o!==null&&(g=At(o,i),g!==0&&g!==f.retryLane))throw f.retryLane=g,ti(e,g),Pn(o,e,g),sd;Ml(),t=iy(e,t,i)}else e=f.treeContext,$t=ha(g.nextSibling),Tn=t,pt=!0,br=null,da=!1,e!==null&&Yp(t,e),t=El(t,o),t.flags|=4096;return t}return e=Qa(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function kl(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function od(e,t,i,o,u){return ii(t),i=Hu(e,t,i,o,void 0,u),o=Vu(),e!==null&&!un?(qu(e,t,u),ar(e,t,u)):(pt&&o&&xu(t),t.flags|=1,On(e,t,i,u),t.child)}function sy(e,t,i,o,u,f){return ii(t),t.updateQueue=null,i=cm(t,o,i,u),lm(e),o=Vu(),e!==null&&!un?(qu(e,t,f),ar(e,t,f)):(pt&&o&&xu(t),t.flags|=1,On(e,t,i,f),t.child)}function oy(e,t,i,o,u){if(ii(t),t.stateNode===null){var f=_i,g=i.contextType;typeof g=="object"&&g!==null&&(f=Nn(g)),f=new i(o,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=rd,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=o,f.state=t.memoizedState,f.refs={},Ru(t),g=i.contextType,f.context=typeof g=="object"&&g!==null?Nn(g):_i,f.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ad(t,i,g,o),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&rd.enqueueReplaceState(f,f.state,null),Fs(t,o,f,u),Ys(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){f=t.stateNode;var w=t.memoizedProps,T=di(i,w);f.props=T;var $=f.context,W=i.contextType;g=_i,typeof W=="object"&&W!==null&&(g=Nn(W));var ae=i.getDerivedStateFromProps;W=typeof ae=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,W||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||$!==g)&&Pm(t,f,o,g),xr=!1;var q=t.memoizedState;f.state=q,Fs(t,o,f,u),Ys(),$=t.memoizedState,w||q!==$||xr?(typeof ae=="function"&&(ad(t,i,ae,o),$=t.memoizedState),(T=xr||Fm(t,i,T,o,q,$,g))?(W||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=$),f.props=o,f.state=$,f.context=g,o=T):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,Mu(e,t),g=t.memoizedProps,W=di(i,g),f.props=W,ae=t.pendingProps,q=f.context,$=i.contextType,T=_i,typeof $=="object"&&$!==null&&(T=Nn($)),w=i.getDerivedStateFromProps,($=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==ae||q!==T)&&Pm(t,f,o,T),xr=!1,q=t.memoizedState,f.state=q,Fs(t,o,f,u),Ys();var X=t.memoizedState;g!==ae||q!==X||xr||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof w=="function"&&(ad(t,i,w,o),X=t.memoizedState),(W=xr||Fm(t,i,W,o,q,X,T)||e!==null&&e.dependencies!==null&&il(e.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,X,T),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,X,T)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=X),f.props=o,f.state=X,f.context=T,o=W):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),o=!1)}return f=o,kl(e,t),o=(t.flags&128)!==0,f||o?(f=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&o?(t.child=ci(t,e.child,null,u),t.child=ci(t,null,i,u)):On(e,t,i,u),t.memoizedState=f.state,e=t.child):e=ar(e,t,u),e}function ly(e,t,i,o){return ai(),t.flags|=256,On(e,t,i,o),t.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cd(e){return{baseLanes:e,cachePool:Qp()}}function ud(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=ta),e}function cy(e,t,i){var o=t.pendingProps,u=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(rn.current&2)!==0),g&&(u=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(pt){if(u?Cr(t):Tr(),(e=$t)?(e=gg(e,da),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:vr!==null?{id:za,overflow:La}:null,retryLane:536870912,hydrationErrors:null},i=Vp(e),i.return=t,t.child=i,Tn=t,$t=null)):e=null,e===null)throw wr(t);return Fd(e)?t.lanes=32:t.lanes=536870912,null}var w=o.children;return o=o.fallback,u?(Tr(),u=t.mode,w=Cl({mode:"hidden",children:w},u),o=ni(o,u,i,null),w.return=t,o.return=t,w.sibling=o,t.child=w,o=t.child,o.memoizedState=cd(i),o.childLanes=ud(e,g,i),t.memoizedState=ld,Qs(null,o)):(Cr(t),dd(t,w))}var T=e.memoizedState;if(T!==null&&(w=T.dehydrated,w!==null)){if(f)t.flags&256?(Cr(t),t.flags&=-257,t=fd(e,t,i)):t.memoizedState!==null?(Tr(),t.child=e.child,t.flags|=128,t=null):(Tr(),w=o.fallback,u=t.mode,o=Cl({mode:"visible",children:o.children},u),w=ni(w,u,i,null),w.flags|=2,o.return=t,w.return=t,o.sibling=w,t.child=o,ci(t,e.child,null,i),o=t.child,o.memoizedState=cd(i),o.childLanes=ud(e,g,i),t.memoizedState=ld,t=Qs(null,o));else if(Cr(t),Fd(w)){if(g=w.nextSibling&&w.nextSibling.dataset,g)var $=g.dgst;g=$,o=Error(s(419)),o.stack="",o.digest=g,Is({value:o,source:null,stack:null}),t=fd(e,t,i)}else if(un||zi(e,t,i,!1),g=(i&e.childLanes)!==0,un||g){if(g=Bt,g!==null&&(o=At(g,i),o!==0&&o!==T.retryLane))throw T.retryLane=o,ti(e,o),Pn(g,e,o),sd;Yd(w)||Ml(),t=fd(e,t,i)}else Yd(w)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,$t=ha(w.nextSibling),Tn=t,pt=!0,br=null,da=!1,e!==null&&Yp(t,e),t=dd(t,o.children),t.flags|=4096);return t}return u?(Tr(),w=o.fallback,u=t.mode,T=e.child,$=T.sibling,o=Qa(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,$!==null?w=Qa($,w):(w=ni(w,u,i,null),w.flags|=2),w.return=t,o.return=t,o.sibling=w,t.child=o,Qs(null,o),o=t.child,w=e.child.memoizedState,w===null?w=cd(i):(u=w.cachePool,u!==null?(T=ln._currentValue,u=u.parent!==T?{parent:T,pool:T}:u):u=Qp(),w={baseLanes:w.baseLanes|i,cachePool:u}),o.memoizedState=w,o.childLanes=ud(e,g,i),t.memoizedState=ld,Qs(e.child,o)):(Cr(t),i=e.child,e=i.sibling,i=Qa(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function dd(e,t){return t=Cl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Cl(e,t){return e=Qn(22,e,null,t),e.lanes=0,e}function fd(e,t,i){return ci(t,e.child,null,i),e=dd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uy(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Nu(e.return,t,i)}function hd(e,t,i,o,u,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:f}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=i,g.tailMode=u,g.treeForkCount=f)}function dy(e,t,i){var o=t.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var g=rn.current,w=(g&2)!==0;if(w?(g=g&1|2,t.flags|=128):g&=1,O(rn,g),On(e,t,o,i),o=pt?Us:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uy(e,i,t);else if(e.tag===19)uy(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&hl(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),hd(t,!1,u,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&hl(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}hd(t,!0,i,null,f,o);break;case"together":hd(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function ar(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),jr|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(zi(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Qa(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Qa(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function pd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function nx(e,t,i){switch(t.tag){case 3:Ge(t,t.stateNode.containerInfo),Sr(t,ln,e.memoizedState.cache),ai();break;case 27:case 5:tt(t);break;case 4:Ge(t,t.stateNode.containerInfo);break;case 10:Sr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Iu(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(Cr(t),t.flags|=128,null):(i&t.child.childLanes)!==0?cy(e,t,i):(Cr(t),e=ar(e,t,i),e!==null?e.sibling:null);Cr(t);break;case 19:var u=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(zi(e,t,i,!1),o=(i&t.childLanes)!==0),u){if(o)return dy(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),O(rn,rn.current),o)break;return null;case 22:return t.lanes=0,ay(e,t,i,t.pendingProps);case 24:Sr(t,ln,e.memoizedState.cache)}return ar(e,t,i)}function fy(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)un=!0;else{if(!pd(e,i)&&(t.flags&128)===0)return un=!1,nx(e,t,i);un=(e.flags&131072)!==0}else un=!1,pt&&(t.flags&1048576)!==0&&Gp(t,Us,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=oi(t.elementType),t.type=e,typeof e=="function")bu(e)?(o=di(e,o),t.tag=1,t=oy(null,t,e,o,i)):(t.tag=0,t=od(null,t,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===G){t.tag=11,t=ey(null,t,e,o,i);break e}else if(u===Y){t.tag=14,t=ty(null,t,e,o,i);break e}}throw t=st(e)||e,Error(s(306,t,""))}}return t;case 0:return od(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,u=di(o,t.pendingProps),oy(e,t,o,u,i);case 3:e:{if(Ge(t,t.stateNode.containerInfo),e===null)throw Error(s(387));o=t.pendingProps;var f=t.memoizedState;u=f.element,Mu(e,t),Fs(t,o,null,i);var g=t.memoizedState;if(o=g.cache,Sr(t,ln,o),o!==f.cache&&Ou(t,[ln],i,!0),Ys(),o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=ly(e,t,o,i);break e}else if(o!==u){u=la(Error(s(424)),t),Is(u),t=ly(e,t,o,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=ha(e.firstChild),Tn=t,pt=!0,br=null,da=!0,i=am(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ai(),o===u){t=ar(e,t,i);break e}On(e,t,o,i)}t=t.child}return t;case 26:return kl(e,t),e===null?(i=Eg(t.type,null,t.pendingProps,null))?t.memoizedState=i:pt||(i=t.type,e=t.pendingProps,o=Hl(he.current).createElement(i),o[on]=t,o[Cn]=e,jn(o,i,e),te(o),t.stateNode=o):t.memoizedState=Eg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return tt(t),e===null&&pt&&(o=t.stateNode=wg(t.type,t.pendingProps,he.current),Tn=t,da=!0,u=$t,Mr(t.type)?(Pd=u,$t=ha(o.firstChild)):$t=u),On(e,t,t.pendingProps.children,i),kl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&pt&&((u=o=$t)&&(o=Dx(o,t.type,t.pendingProps,da),o!==null?(t.stateNode=o,Tn=t,$t=ha(o.firstChild),da=!1,u=!0):u=!1),u||wr(t)),tt(t),u=t.type,f=t.pendingProps,g=e!==null?e.memoizedProps:null,o=f.children,Vd(u,f)?o=null:g!==null&&Vd(u,g)&&(t.flags|=32),t.memoizedState!==null&&(u=Hu(e,t,PS,null,null,i),ho._currentValue=u),kl(e,t),On(e,t,o,i),t.child;case 6:return e===null&&pt&&((e=i=$t)&&(i=Rx(i,t.pendingProps,da),i!==null?(t.stateNode=i,Tn=t,$t=null,e=!0):e=!1),e||wr(t)),null;case 13:return cy(e,t,i);case 4:return Ge(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=ci(t,null,o,i):On(e,t,o,i),t.child;case 11:return ey(e,t,t.type,t.pendingProps,i);case 7:return On(e,t,t.pendingProps,i),t.child;case 8:return On(e,t,t.pendingProps.children,i),t.child;case 12:return On(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,Sr(t,t.type,o.value),On(e,t,o.children,i),t.child;case 9:return u=t.type._context,o=t.pendingProps.children,ii(t),u=Nn(u),o=o(u),t.flags|=1,On(e,t,o,i),t.child;case 14:return ty(e,t,t.type,t.pendingProps,i);case 15:return ny(e,t,t.type,t.pendingProps,i);case 19:return dy(e,t,i);case 31:return tx(e,t,i);case 22:return ay(e,t,i,t.pendingProps);case 24:return ii(t),o=Nn(ln),e===null?(u=_u(),u===null&&(u=Bt,f=ju(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),t.memoizedState={parent:o,cache:u},Ru(t),Sr(t,ln,u)):((e.lanes&i)!==0&&(Mu(e,t),Fs(t,null,null,i),Ys()),u=e.memoizedState,f=t.memoizedState,u.parent!==o?(u={parent:o,cache:o},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),Sr(t,ln,o)):(o=f.cache,Sr(t,ln,o),o!==u.cache&&Ou(t,[ln],i,!0))),On(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function rr(e){e.flags|=4}function md(e,t,i,o,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Iy())e.flags|=8192;else throw li=cl,Du}else e.flags&=-16777217}function hy(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Og(t))if(Iy())e.flags|=8192;else throw li=cl,Du}function Tl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ue():536870912,e.lanes|=t,Pi|=t)}function Js(e,t){if(!pt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function ax(e,t,i){var o=t.pendingProps;switch(Eu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(t),null;case 1:return Ht(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),er(ln),Ve(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Mi(t)?rr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Cu())),Ht(t),null;case 26:var u=t.type,f=t.memoizedState;return e===null?(rr(t),f!==null?(Ht(t),hy(t,f)):(Ht(t),md(t,u,null,o,i))):f?f!==e.memoizedState?(rr(t),Ht(t),hy(t,f)):(Ht(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&rr(t),Ht(t),md(t,u,e,o,i)),null;case 27:if(wt(t),i=he.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&rr(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ht(t),null}e=z.current,Mi(t)?Fp(t):(e=wg(u,o,i),t.stateNode=e,rr(t))}return Ht(t),null;case 5:if(wt(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&rr(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ht(t),null}if(f=z.current,Mi(t))Fp(t);else{var g=Hl(he.current);switch(f){case 1:f=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=g.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?g.createElement(u,{is:o.is}):g.createElement(u)}}f[on]=t,f[Cn]=o;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)f.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=f;e:switch(jn(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&rr(t)}}return Ht(t),md(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&rr(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(e=he.current,Mi(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,u=Tn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[on]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||cg(e.nodeValue,i)),e||wr(t,!0)}else e=Hl(e).createTextNode(o),e[on]=t,t.stateNode=e}return Ht(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=Mi(t),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[on]=t}else ai(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ht(t),e=!1}else i=Cu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Wn(t),t):(Wn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Ht(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Mi(t),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[on]=t}else ai(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ht(t),u=!1}else u=Cu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Wn(t),t):(Wn(t),null)}return Wn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Tl(t,t.updateQueue),Ht(t),null);case 4:return Ve(),e===null&&Bd(t.stateNode.containerInfo),Ht(t),null;case 10:return er(t.type),Ht(t),null;case 19:if(M(rn),o=t.memoizedState,o===null)return Ht(t),null;if(u=(t.flags&128)!==0,f=o.rendering,f===null)if(u)Js(o,!1);else{if(en!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=hl(e),f!==null){for(t.flags|=128,Js(o,!1),e=f.updateQueue,t.updateQueue=e,Tl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Hp(i,e),i=i.sibling;return O(rn,rn.current&1|2),pt&&Ja(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&C()>_l&&(t.flags|=128,u=!0,Js(o,!1),t.lanes=4194304)}else{if(!u)if(e=hl(f),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Tl(t,e),Js(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!pt)return Ht(t),null}else 2*C()-o.renderingStartTime>_l&&i!==536870912&&(t.flags|=128,u=!0,Js(o,!1),t.lanes=4194304);o.isBackwards?(f.sibling=t.child,t.child=f):(e=o.last,e!==null?e.sibling=f:t.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=C(),e.sibling=null,i=rn.current,O(rn,u?i&1|2:i&1),pt&&Ja(t,o.treeForkCount),e):(Ht(t),null);case 22:case 23:return Wn(t),Uu(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(Ht(t),t.subtreeFlags&6&&(t.flags|=8192)):Ht(t),i=t.updateQueue,i!==null&&Tl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&M(si),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),er(ln),Ht(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function rx(e,t){switch(Eu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return er(ln),Ve(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return wt(t),null;case 31:if(t.memoizedState!==null){if(Wn(t),t.alternate===null)throw Error(s(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Wn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return M(rn),null;case 4:return Ve(),null;case 10:return er(t.type),null;case 22:case 23:return Wn(t),Uu(),e!==null&&M(si),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return er(ln),null;case 25:return null;default:return null}}function py(e,t){switch(Eu(t),t.tag){case 3:er(ln),Ve();break;case 26:case 27:case 5:wt(t);break;case 4:Ve();break;case 31:t.memoizedState!==null&&Wn(t);break;case 13:Wn(t);break;case 19:M(rn);break;case 10:er(t.type);break;case 22:case 23:Wn(t),Uu(),e!==null&&M(si);break;case 24:er(ln)}}function Ws(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var f=i.create,g=i.inst;o=f(),g.destroy=o}i=i.next}while(i!==u)}}catch(w){Ot(t,t.return,w)}}function Nr(e,t,i){try{var o=t.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var g=o.inst,w=g.destroy;if(w!==void 0){g.destroy=void 0,u=t;var T=i,$=w;try{$()}catch(W){Ot(u,T,W)}}}o=o.next}while(o!==f)}}catch(W){Ot(t,t.return,W)}}function my(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{im(t,i)}catch(o){Ot(e,e.return,o)}}}function yy(e,t,i){i.props=di(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Ot(e,t,o)}}function eo(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){Ot(e,t,u)}}function Ba(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){Ot(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){Ot(e,t,u)}else i.current=null}function gy(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){Ot(e,e.return,u)}}function yd(e,t,i){try{var o=e.stateNode;Tx(o,e.type,i,t),o[Cn]=t}catch(u){Ot(e,e.return,u)}}function vy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mr(e.type)||e.tag===4}function gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vd(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Xa));else if(o!==4&&(o===27&&Mr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(vd(e,t,i),e=e.sibling;e!==null;)vd(e,t,i),e=e.sibling}function Nl(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&Mr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Nl(e,t,i),e=e.sibling;e!==null;)Nl(e,t,i),e=e.sibling}function by(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);jn(t,o,i),t[on]=e,t[Cn]=i}catch(f){Ot(e,e.return,f)}}var ir=!1,dn=!1,bd=!1,wy=typeof WeakSet=="function"?WeakSet:Set,En=null;function ix(e,t){if(e=e.containerInfo,$d=Zl,e=Dp(e),fu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,w=-1,T=-1,$=0,W=0,ae=e,q=null;t:for(;;){for(var X;ae!==i||u!==0&&ae.nodeType!==3||(w=g+u),ae!==f||o!==0&&ae.nodeType!==3||(T=g+o),ae.nodeType===3&&(g+=ae.nodeValue.length),(X=ae.firstChild)!==null;)q=ae,ae=X;for(;;){if(ae===e)break t;if(q===i&&++$===u&&(w=g),q===f&&++W===o&&(T=g),(X=ae.nextSibling)!==null)break;ae=q,q=ae.parentNode}ae=X}i=w===-1||T===-1?null:{start:w,end:T}}else i=null}i=i||{start:0,end:0}}else i=null;for(Hd={focusedElem:e,selectionRange:i},Zl=!1,En=t;En!==null;)if(t=En,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,En=e;else for(;En!==null;){switch(t=En,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=t,u=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var _e=di(i.type,u);e=o.getSnapshotBeforeUpdate(_e,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(qe){Ot(i,i.return,qe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Gd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,En=e;break}En=t.return}}function Sy(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:or(e,i),o&4&&Ws(5,i);break;case 1:if(or(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){Ot(i,i.return,g)}else{var u=di(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ot(i,i.return,g)}}o&64&&my(i),o&512&&eo(i,i.return);break;case 3:if(or(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{im(e,t)}catch(g){Ot(i,i.return,g)}}break;case 27:t===null&&o&4&&by(i);case 26:case 5:or(e,i),t===null&&o&4&&gy(i),o&512&&eo(i,i.return);break;case 12:or(e,i);break;case 31:or(e,i),o&4&&ky(e,i);break;case 13:or(e,i),o&4&&Cy(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=px.bind(null,i),Mx(e,i))));break;case 22:if(o=i.memoizedState!==null||ir,!o){t=t!==null&&t.memoizedState!==null||dn,u=ir;var f=dn;ir=o,(dn=t)&&!f?lr(e,i,(i.subtreeFlags&8772)!==0):or(e,i),ir=u,dn=f}break;case 30:break;default:or(e,i)}}function xy(e){var t=e.alternate;t!==null&&(e.alternate=null,xy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ea(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ft=null,qn=!1;function sr(e,t,i){for(i=i.child;i!==null;)Ey(e,t,i),i=i.sibling}function Ey(e,t,i){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Ue,i)}catch{}switch(i.tag){case 26:dn||Ba(i,t),sr(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:dn||Ba(i,t);var o=Ft,u=qn;Mr(i.type)&&(Ft=i.stateNode,qn=!1),sr(e,t,i),co(i.stateNode),Ft=o,qn=u;break;case 5:dn||Ba(i,t);case 6:if(o=Ft,u=qn,Ft=null,sr(e,t,i),Ft=o,qn=u,Ft!==null)if(qn)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(i.stateNode)}catch(f){Ot(i,t,f)}else try{Ft.removeChild(i.stateNode)}catch(f){Ot(i,t,f)}break;case 18:Ft!==null&&(qn?(e=Ft,mg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ts(e)):mg(Ft,i.stateNode));break;case 4:o=Ft,u=qn,Ft=i.stateNode.containerInfo,qn=!0,sr(e,t,i),Ft=o,qn=u;break;case 0:case 11:case 14:case 15:Nr(2,i,t),dn||Nr(4,i,t),sr(e,t,i);break;case 1:dn||(Ba(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&yy(i,t,o)),sr(e,t,i);break;case 21:sr(e,t,i);break;case 22:dn=(o=dn)||i.memoizedState!==null,sr(e,t,i),dn=o;break;default:sr(e,t,i)}}function ky(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ts(e)}catch(i){Ot(t,t.return,i)}}}function Cy(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ts(e)}catch(i){Ot(t,t.return,i)}}function sx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new wy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new wy),t;default:throw Error(s(435,e.tag))}}function Ol(e,t){var i=sx(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var u=mx.bind(null,e,o);o.then(u,u)}})}function Gn(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],f=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 27:if(Mr(w.type)){Ft=w.stateNode,qn=!1;break e}break;case 5:Ft=w.stateNode,qn=!1;break e;case 3:case 4:Ft=w.stateNode.containerInfo,qn=!0;break e}w=w.return}if(Ft===null)throw Error(s(160));Ey(f,g,u),Ft=null,qn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ty(t,e),t=t.sibling}var Ca=null;function Ty(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gn(t,e),Yn(e),o&4&&(Nr(3,e,e.return),Ws(3,e),Nr(5,e,e.return));break;case 1:Gn(t,e),Yn(e),o&512&&(dn||i===null||Ba(i,i.return)),o&64&&ir&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Ca;if(Gn(t,e),Yn(e),o&512&&(dn||i===null||Ba(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[xa]||f[on]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),jn(f,o,i),f[on]=e,te(f),o=f;break e;case"link":var g=Tg("link","href",u).get(o+(i.href||""));if(g){for(var w=0;w<g.length;w++)if(f=g[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(w,1);break t}}f=u.createElement(o),jn(f,o,i),u.head.appendChild(f);break;case"meta":if(g=Tg("meta","content",u).get(o+(i.content||""))){for(w=0;w<g.length;w++)if(f=g[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(w,1);break t}}f=u.createElement(o),jn(f,o,i),u.head.appendChild(f);break;default:throw Error(s(468,o))}f[on]=e,te(f),o=f}e.stateNode=o}else Ng(u,e.type,e.stateNode);else e.stateNode=Cg(u,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?Ng(u,e.type,e.stateNode):Cg(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&yd(e,e.memoizedProps,i.memoizedProps)}break;case 27:Gn(t,e),Yn(e),o&512&&(dn||i===null||Ba(i,i.return)),i!==null&&o&4&&yd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Gn(t,e),Yn(e),o&512&&(dn||i===null||Ba(i,i.return)),e.flags&32){u=e.stateNode;try{ki(u,"")}catch(_e){Ot(e,e.return,_e)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,yd(e,u,i!==null?i.memoizedProps:u)),o&1024&&(bd=!0);break;case 6:if(Gn(t,e),Yn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(_e){Ot(e,e.return,_e)}}break;case 3:if(Gl=null,u=Ca,Ca=Vl(t.containerInfo),Gn(t,e),Ca=u,Yn(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ts(t.containerInfo)}catch(_e){Ot(e,e.return,_e)}bd&&(bd=!1,Ny(e));break;case 4:o=Ca,Ca=Vl(e.stateNode.containerInfo),Gn(t,e),Yn(e),Ca=o;break;case 12:Gn(t,e),Yn(e);break;case 31:Gn(t,e),Yn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 13:Gn(t,e),Yn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Al=C()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 22:u=e.memoizedState!==null;var T=i!==null&&i.memoizedState!==null,$=ir,W=dn;if(ir=$||u,dn=W||T,Gn(t,e),dn=W,ir=$,Yn(e),o&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(i===null||T||ir||dn||fi(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){T=i=t;try{if(f=T.stateNode,u)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{w=T.stateNode;var ae=T.memoizedProps.style,q=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;w.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(_e){Ot(T,T.return,_e)}}}else if(t.tag===6){if(i===null){T=t;try{T.stateNode.nodeValue=u?"":T.memoizedProps}catch(_e){Ot(T,T.return,_e)}}}else if(t.tag===18){if(i===null){T=t;try{var X=T.stateNode;u?yg(X,!0):yg(T.stateNode,!1)}catch(_e){Ot(T,T.return,_e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Ol(e,i))));break;case 19:Gn(t,e),Yn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 30:break;case 21:break;default:Gn(t,e),Yn(e)}}function Yn(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(vy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=gd(e);Nl(e,f,u);break;case 5:var g=i.stateNode;i.flags&32&&(ki(g,""),i.flags&=-33);var w=gd(e);Nl(e,w,g);break;case 3:case 4:var T=i.stateNode.containerInfo,$=gd(e);vd(e,$,T);break;default:throw Error(s(161))}}catch(W){Ot(e,e.return,W)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ny(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ny(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function or(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Sy(e,t.alternate,t),t=t.sibling}function fi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Nr(4,t,t.return),fi(t);break;case 1:Ba(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&yy(t,t.return,i),fi(t);break;case 27:co(t.stateNode);case 26:case 5:Ba(t,t.return),fi(t);break;case 22:t.memoizedState===null&&fi(t);break;case 30:fi(t);break;default:fi(t)}e=e.sibling}}function lr(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,u=e,f=t,g=f.flags;switch(f.tag){case 0:case 11:case 15:lr(u,f,i),Ws(4,f);break;case 1:if(lr(u,f,i),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch($){Ot(o,o.return,$)}if(o=f,u=o.updateQueue,u!==null){var w=o.stateNode;try{var T=u.shared.hiddenCallbacks;if(T!==null)for(u.shared.hiddenCallbacks=null,u=0;u<T.length;u++)rm(T[u],w)}catch($){Ot(o,o.return,$)}}i&&g&64&&my(f),eo(f,f.return);break;case 27:by(f);case 26:case 5:lr(u,f,i),i&&o===null&&g&4&&gy(f),eo(f,f.return);break;case 12:lr(u,f,i);break;case 31:lr(u,f,i),i&&g&4&&ky(u,f);break;case 13:lr(u,f,i),i&&g&4&&Cy(u,f);break;case 22:f.memoizedState===null&&lr(u,f,i),eo(f,f.return);break;case 30:break;default:lr(u,f,i)}t=t.sibling}}function wd(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&$s(i))}function Sd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e))}function Ta(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Oy(e,t,i,o),t=t.sibling}function Oy(e,t,i,o){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Ta(e,t,i,o),u&2048&&Ws(9,t);break;case 1:Ta(e,t,i,o);break;case 3:Ta(e,t,i,o),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e)));break;case 12:if(u&2048){Ta(e,t,i,o),e=t.stateNode;try{var f=t.memoizedProps,g=f.id,w=f.onPostCommit;typeof w=="function"&&w(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Ot(t,t.return,T)}}else Ta(e,t,i,o);break;case 31:Ta(e,t,i,o);break;case 13:Ta(e,t,i,o);break;case 23:break;case 22:f=t.stateNode,g=t.alternate,t.memoizedState!==null?f._visibility&2?Ta(e,t,i,o):to(e,t):f._visibility&2?Ta(e,t,i,o):(f._visibility|=2,Gi(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),u&2048&&wd(g,t);break;case 24:Ta(e,t,i,o),u&2048&&Sd(t.alternate,t);break;default:Ta(e,t,i,o)}}function Gi(e,t,i,o,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,g=t,w=i,T=o,$=g.flags;switch(g.tag){case 0:case 11:case 15:Gi(f,g,w,T,u),Ws(8,g);break;case 23:break;case 22:var W=g.stateNode;g.memoizedState!==null?W._visibility&2?Gi(f,g,w,T,u):to(f,g):(W._visibility|=2,Gi(f,g,w,T,u)),u&&$&2048&&wd(g.alternate,g);break;case 24:Gi(f,g,w,T,u),u&&$&2048&&Sd(g.alternate,g);break;default:Gi(f,g,w,T,u)}t=t.sibling}}function to(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,u=o.flags;switch(o.tag){case 22:to(i,o),u&2048&&wd(o.alternate,o);break;case 24:to(i,o),u&2048&&Sd(o.alternate,o);break;default:to(i,o)}t=t.sibling}}var no=8192;function Yi(e,t,i){if(e.subtreeFlags&no)for(e=e.child;e!==null;)jy(e,t,i),e=e.sibling}function jy(e,t,i){switch(e.tag){case 26:Yi(e,t,i),e.flags&no&&e.memoizedState!==null&&Fx(i,Ca,e.memoizedState,e.memoizedProps);break;case 5:Yi(e,t,i);break;case 3:case 4:var o=Ca;Ca=Vl(e.stateNode.containerInfo),Yi(e,t,i),Ca=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=no,no=16777216,Yi(e,t,i),no=o):Yi(e,t,i));break;default:Yi(e,t,i)}}function Ay(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];En=o,Dy(o,e)}Ay(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)_y(e),e=e.sibling}function _y(e){switch(e.tag){case 0:case 11:case 15:ao(e),e.flags&2048&&Nr(9,e,e.return);break;case 3:ao(e);break;case 12:ao(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,jl(e)):ao(e);break;default:ao(e)}}function jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];En=o,Dy(o,e)}Ay(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Nr(8,t,t.return),jl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,jl(t));break;default:jl(t)}e=e.sibling}}function Dy(e,t){for(;En!==null;){var i=En;switch(i.tag){case 0:case 11:case 15:Nr(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:$s(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,En=o;else e:for(i=e;En!==null;){o=En;var u=o.sibling,f=o.return;if(xy(o),o===i){En=null;break e}if(u!==null){u.return=f,En=u;break e}En=f}}}var ox={getCacheForType:function(e){var t=Nn(ln),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Nn(ln).controller.signal}},lx=typeof WeakMap=="function"?WeakMap:Map,Et=0,Bt=null,lt=null,ut=0,Nt=0,ea=null,Or=!1,Fi=!1,xd=!1,cr=0,en=0,jr=0,hi=0,Ed=0,ta=0,Pi=0,ro=null,Fn=null,kd=!1,Al=0,Ry=0,_l=1/0,Dl=null,Ar=null,vn=0,_r=null,Zi=null,ur=0,Cd=0,Td=null,My=null,io=0,Nd=null;function na(){return(Et&2)!==0&&ut!==0?ut&-ut:N.T!==null?Rd():Ns()}function zy(){if(ta===0)if((ut&536870912)===0||pt){var e=Lt;Lt<<=1,(Lt&3932160)===0&&(Lt=262144),ta=e}else ta=536870912;return e=Jn.current,e!==null&&(e.flags|=32),ta}function Pn(e,t,i){(e===Bt&&(Nt===2||Nt===9)||e.cancelPendingCommit!==null)&&(Xi(e,0),Dr(e,ut,ta,!1)),De(e,i),((Et&2)===0||e!==Bt)&&(e===Bt&&((Et&2)===0&&(hi|=i),en===4&&Dr(e,ut,ta,!1)),Ua(e))}function Ly(e,t,i){if((Et&6)!==0)throw Error(s(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||_(e,t),u=o?dx(e,t):jd(e,t,!0),f=o;do{if(u===0){Fi&&!o&&Dr(e,t,0,!1);break}else{if(i=e.current.alternate,f&&!cx(i)){u=jd(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var w=e;u=ro;var T=w.current.memoizedState.isDehydrated;if(T&&(Xi(w,g).flags|=256),g=jd(w,g,!1),g!==2){if(xd&&!T){w.errorRecoveryDisabledLanes|=f,hi|=f,u=4;break e}f=Fn,Fn=u,f!==null&&(Fn===null?Fn=f:Fn.push.apply(Fn,f))}u=g}if(f=!1,u!==2)continue}}if(u===1){Xi(e,0),Dr(e,t,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Dr(o,t,ta,!Or);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Al+300-C(),10<u)){if(Dr(o,t,ta,!Or),qt(o,0,!0)!==0)break e;ur=t,o.timeoutHandle=hg(By.bind(null,o,i,Fn,Dl,kd,t,ta,hi,Pi,Or,f,"Throttled",-0,0),u);break e}By(o,i,Fn,Dl,kd,t,ta,hi,Pi,Or,f,null,-0,0)}}break}while(!0);Ua(e)}function By(e,t,i,o,u,f,g,w,T,$,W,ae,q,X){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xa},jy(t,f,ae);var _e=(f&62914560)===f?Al-C():(f&4194048)===f?Ry-C():0;if(_e=Px(ae,_e),_e!==null){ur=f,e.cancelPendingCommit=_e(Yy.bind(null,e,t,f,i,o,u,g,w,T,W,ae,null,q,X)),Dr(e,f,g,!$);return}}Yy(e,t,f,i,o,u,g,w,T)}function cx(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],f=u.getSnapshot;u=u.value;try{if(!Kn(f(),u))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dr(e,t,i,o){t&=~Ed,t&=~hi,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var u=t;0<u;){var f=31-it(u),g=1<<f;o[f]=-1,u&=~g}i!==0&&wa(e,i,t)}function Rl(){return(Et&6)===0?(so(0),!1):!0}function Od(){if(lt!==null){if(Nt===0)var e=lt.return;else e=lt,Wa=ri=null,Gu(e),Ii=null,Vs=0,e=lt;for(;e!==null;)py(e.alternate,e),e=e.return;lt=null}}function Xi(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,jx(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ur=0,Od(),Bt=e,lt=i=Qa(e.current,null),ut=t,Nt=0,ea=null,Or=!1,Fi=_(e,t),xd=!1,Pi=ta=Ed=hi=jr=en=0,Fn=ro=null,kd=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var u=31-it(o),f=1<<u;t|=e[u],o&=~f}return cr=t,el(),i}function Uy(e,t){et=null,N.H=Ks,t===Ui||t===ll?(t=em(),Nt=3):t===Du?(t=em(),Nt=4):Nt=t===sd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ea=t,lt===null&&(en=1,xl(e,la(t,e.current)))}function Iy(){var e=Jn.current;return e===null?!0:(ut&4194048)===ut?fa===null:(ut&62914560)===ut||(ut&536870912)!==0?e===fa:!1}function $y(){var e=N.H;return N.H=Ks,e===null?Ks:e}function Hy(){var e=N.A;return N.A=ox,e}function Ml(){en=4,Or||(ut&4194048)!==ut&&Jn.current!==null||(Fi=!0),(jr&134217727)===0&&(hi&134217727)===0||Bt===null||Dr(Bt,ut,ta,!1)}function jd(e,t,i){var o=Et;Et|=2;var u=$y(),f=Hy();(Bt!==e||ut!==t)&&(Dl=null,Xi(e,t)),t=!1;var g=en;e:do try{if(Nt!==0&&lt!==null){var w=lt,T=ea;switch(Nt){case 8:Od(),g=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(t=!0);var $=Nt;if(Nt=0,ea=null,Ki(e,w,T,$),i&&Fi){g=0;break e}break;default:$=Nt,Nt=0,ea=null,Ki(e,w,T,$)}}ux(),g=en;break}catch(W){Uy(e,W)}while(!0);return t&&e.shellSuspendCounter++,Wa=ri=null,Et=o,N.H=u,N.A=f,lt===null&&(Bt=null,ut=0,el()),g}function ux(){for(;lt!==null;)Vy(lt)}function dx(e,t){var i=Et;Et|=2;var o=$y(),u=Hy();Bt!==e||ut!==t?(Dl=null,_l=C()+500,Xi(e,t)):Fi=_(e,t);e:do try{if(Nt!==0&&lt!==null){t=lt;var f=ea;t:switch(Nt){case 1:Nt=0,ea=null,Ki(e,t,f,1);break;case 2:case 9:if(Jp(f)){Nt=0,ea=null,qy(t);break}t=function(){Nt!==2&&Nt!==9||Bt!==e||(Nt=7),Ua(e)},f.then(t,t);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:Jp(f)?(Nt=0,ea=null,qy(t)):(Nt=0,ea=null,Ki(e,t,f,7));break;case 5:var g=null;switch(lt.tag){case 26:g=lt.memoizedState;case 5:case 27:var w=lt;if(g?Og(g):w.stateNode.complete){Nt=0,ea=null;var T=w.sibling;if(T!==null)lt=T;else{var $=w.return;$!==null?(lt=$,zl($)):lt=null}break t}}Nt=0,ea=null,Ki(e,t,f,5);break;case 6:Nt=0,ea=null,Ki(e,t,f,6);break;case 8:Od(),en=6;break e;default:throw Error(s(462))}}fx();break}catch(W){Uy(e,W)}while(!0);return Wa=ri=null,N.H=o,N.A=u,Et=i,lt!==null?0:(Bt=null,ut=0,el(),en)}function fx(){for(;lt!==null&&!be();)Vy(lt)}function Vy(e){var t=fy(e.alternate,e,cr);e.memoizedProps=e.pendingProps,t===null?zl(e):lt=t}function qy(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=sy(i,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=sy(i,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:Gu(t);default:py(i,t),t=lt=Hp(t,cr),t=fy(i,t,cr)}e.memoizedProps=e.pendingProps,t===null?zl(e):lt=t}function Ki(e,t,i,o){Wa=ri=null,Gu(t),Ii=null,Vs=0;var u=t.return;try{if(ex(e,u,t,i,ut)){en=1,xl(e,la(i,e.current)),lt=null;return}}catch(f){if(u!==null)throw lt=u,f;en=1,xl(e,la(i,e.current)),lt=null;return}t.flags&32768?(pt||o===1?e=!0:Fi||(ut&536870912)!==0?e=!1:(Or=e=!0,(o===2||o===9||o===3||o===6)&&(o=Jn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Gy(t,e)):zl(t)}function zl(e){var t=e;do{if((t.flags&32768)!==0){Gy(t,Or);return}e=t.return;var i=ax(t.alternate,t,cr);if(i!==null){lt=i;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);en===0&&(en=5)}function Gy(e,t){do{var i=rx(e.alternate,e);if(i!==null){i.flags&=32767,lt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){lt=e;return}lt=e=i}while(e!==null);en=6,lt=null}function Yy(e,t,i,o,u,f,g,w,T){e.cancelPendingCommit=null;do Ll();while(vn!==0);if((Et&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=gu,yn(e,i,f,g,w,T),e===Bt&&(lt=Bt=null,ut=0),Zi=t,_r=e,ur=i,Cd=f,Td=u,My=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yx(we,function(){return Ky(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=N.T,N.T=null,u=B.p,B.p=2,g=Et,Et|=4;try{ix(e,t,i)}finally{Et=g,B.p=u,N.T=o}}vn=1,Fy(),Py(),Zy()}}function Fy(){if(vn===1){vn=0;var e=_r,t=Zi,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null;var o=B.p;B.p=2;var u=Et;Et|=4;try{Ty(t,e);var f=Hd,g=Dp(e.containerInfo),w=f.focusedElem,T=f.selectionRange;if(g!==w&&w&&w.ownerDocument&&_p(w.ownerDocument.documentElement,w)){if(T!==null&&fu(w)){var $=T.start,W=T.end;if(W===void 0&&(W=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(W,w.value.length);else{var ae=w.ownerDocument||document,q=ae&&ae.defaultView||window;if(q.getSelection){var X=q.getSelection(),_e=w.textContent.length,qe=Math.min(T.start,_e),Mt=T.end===void 0?qe:Math.min(T.end,_e);!X.extend&&qe>Mt&&(g=Mt,Mt=qe,qe=g);var D=Ap(w,qe),A=Ap(w,Mt);if(D&&A&&(X.rangeCount!==1||X.anchorNode!==D.node||X.anchorOffset!==D.offset||X.focusNode!==A.node||X.focusOffset!==A.offset)){var I=ae.createRange();I.setStart(D.node,D.offset),X.removeAllRanges(),qe>Mt?(X.addRange(I),X.extend(A.node,A.offset)):(I.setEnd(A.node,A.offset),X.addRange(I))}}}}for(ae=[],X=w;X=X.parentNode;)X.nodeType===1&&ae.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ae.length;w++){var ee=ae[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Zl=!!$d,Hd=$d=null}finally{Et=u,B.p=o,N.T=i}}e.current=t,vn=2}}function Py(){if(vn===2){vn=0;var e=_r,t=Zi,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=N.T,N.T=null;var o=B.p;B.p=2;var u=Et;Et|=4;try{Sy(e,t.alternate,t)}finally{Et=u,B.p=o,N.T=i}}vn=3}}function Zy(){if(vn===4||vn===3){vn=0,se();var e=_r,t=Zi,i=ur,o=My;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?vn=5:(vn=0,Zi=_r=null,Xy(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ar=null),Je(i),t=t.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Ue,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=N.T,u=B.p,B.p=2,N.T=null;try{for(var f=e.onRecoverableError,g=0;g<o.length;g++){var w=o[g];f(w.value,{componentStack:w.stack})}}finally{N.T=t,B.p=u}}(ur&3)!==0&&Ll(),Ua(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===Nd?io++:(io=0,Nd=e):io=0,so(0)}}function Xy(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,$s(t)))}function Ll(){return Fy(),Py(),Zy(),Ky()}function Ky(){if(vn!==5)return!1;var e=_r,t=Cd;Cd=0;var i=Je(ur),o=N.T,u=B.p;try{B.p=32>i?32:i,N.T=null,i=Td,Td=null;var f=_r,g=ur;if(vn=0,Zi=_r=null,ur=0,(Et&6)!==0)throw Error(s(331));var w=Et;if(Et|=4,_y(f.current),Oy(f,f.current,g,i),Et=w,so(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Ue,f)}catch{}return!0}finally{B.p=u,N.T=o,Xy(e,t)}}function Qy(e,t,i){t=la(i,t),t=id(e.stateNode,t,2),e=kr(e,t,2),e!==null&&(De(e,2),Ua(e))}function Ot(e,t,i){if(e.tag===3)Qy(e,e,i);else for(;t!==null;){if(t.tag===3){Qy(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ar===null||!Ar.has(o))){e=la(i,e),i=Jm(2),o=kr(t,i,2),o!==null&&(Wm(i,o,t,e),De(o,2),Ua(o));break}}t=t.return}}function Ad(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new lx;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(i)||(xd=!0,u.add(i),e=hx.bind(null,e,t,i),t.then(e,e))}function hx(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Bt===e&&(ut&i)===i&&(en===4||en===3&&(ut&62914560)===ut&&300>C()-Al?(Et&2)===0&&Xi(e,0):Ed|=i,Pi===ut&&(Pi=0)),Ua(e)}function Jy(e,t){t===0&&(t=ue()),e=ti(e,t),e!==null&&(De(e,t),Ua(e))}function px(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Jy(e,i)}function mx(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(t),Jy(e,i)}function yx(e,t){return J(e,t)}var Bl=null,Qi=null,_d=!1,Ul=!1,Dd=!1,Rr=0;function Ua(e){e!==Qi&&e.next===null&&(Qi===null?Bl=Qi=e:Qi=Qi.next=e),Ul=!0,_d||(_d=!0,vx())}function so(e,t){if(!Dd&&Ul){Dd=!0;do for(var i=!1,o=Bl;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var g=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-it(42|e)+1)-1,f&=u&~(g&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,ng(o,f))}else f=ut,f=qt(o,o===Bt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||_(o,f)||(i=!0,ng(o,f));o=o.next}while(i);Dd=!1}}function gx(){Wy()}function Wy(){Ul=_d=!1;var e=0;Rr!==0&&Ox()&&(e=Rr);for(var t=C(),i=null,o=Bl;o!==null;){var u=o.next,f=eg(o,t);f===0?(o.next=null,i===null?Bl=u:i.next=u,u===null&&(Qi=i)):(i=o,(e!==0||(f&3)!==0)&&(Ul=!0)),o=u}vn!==0&&vn!==5||so(e),Rr!==0&&(Rr=0)}function eg(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var g=31-it(f),w=1<<g,T=u[g];T===-1?((w&i)===0||(w&o)!==0)&&(u[g]=V(w,t)):T<=t&&(e.expiredLanes|=w),f&=~w}if(t=Bt,i=ut,i=qt(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Nt===2||Nt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&je(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||_(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&je(o),Je(i)){case 2:case 8:i=fe;break;case 32:i=we;break;case 268435456:i=$e;break;default:i=we}return o=tg.bind(null,e),i=J(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&je(o),e.callbackPriority=2,e.callbackNode=null,2}function tg(e,t){if(vn!==0&&vn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ll()&&e.callbackNode!==i)return null;var o=ut;return o=qt(e,e===Bt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ly(e,o,t),eg(e,C()),e.callbackNode!=null&&e.callbackNode===i?tg.bind(null,e):null)}function ng(e,t){if(Ll())return null;Ly(e,t,!0)}function vx(){Ax(function(){(Et&6)!==0?J(le,gx):Wy()})}function Rd(){if(Rr===0){var e=Li;e===0&&(e=ot,ot<<=1,(ot&261888)===0&&(ot=256)),Rr=e}return Rr}function ag(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fo(""+e)}function rg(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function bx(e,t,i,o,u){if(t==="submit"&&i&&i.stateNode===u){var f=ag((u[Cn]||null).action),g=o.submitter;g&&(t=(t=g[Cn]||null)?ag(t.formAction):g.getAttribute("formAction"),t!==null&&(f=t,g=null));var w=new Ko("action","action",null,o,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Rr!==0){var T=g?rg(u,g):new FormData(u);Wu(i,{pending:!0,data:T,method:u.method,action:f},null,T)}}else typeof f=="function"&&(w.preventDefault(),T=g?rg(u,g):new FormData(u),Wu(i,{pending:!0,data:T,method:u.method,action:f},f,T))},currentTarget:u}]})}}for(var Md=0;Md<yu.length;Md++){var zd=yu[Md],wx=zd.toLowerCase(),Sx=zd[0].toUpperCase()+zd.slice(1);ka(wx,"on"+Sx)}ka(zp,"onAnimationEnd"),ka(Lp,"onAnimationIteration"),ka(Bp,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(BS,"onTransitionRun"),ka(US,"onTransitionStart"),ka(IS,"onTransitionCancel"),ka(Up,"onTransitionEnd"),Ze("onMouseEnter",["mouseout","mouseover"]),Ze("onMouseLeave",["mouseout","mouseover"]),Ze("onPointerEnter",["pointerout","pointerover"]),Ze("onPointerLeave",["pointerout","pointerover"]),Ee("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ee("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ee("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ee("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oo));function ig(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var g=o.length-1;0<=g;g--){var w=o[g],T=w.instance,$=w.currentTarget;if(w=w.listener,T!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=$;try{f(u)}catch(W){Wo(W)}u.currentTarget=null,f=T}else for(g=0;g<o.length;g++){if(w=o[g],T=w.instance,$=w.currentTarget,w=w.listener,T!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=$;try{f(u)}catch(W){Wo(W)}u.currentTarget=null,f=T}}}}function ct(e,t){var i=t[Vo];i===void 0&&(i=t[Vo]=new Set);var o=e+"__bubble";i.has(o)||(sg(t,e,2,!1),i.add(o))}function Ld(e,t,i){var o=0;t&&(o|=4),sg(i,e,o,t)}var Il="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[Il]){e[Il]=!0,ye.forEach(function(i){i!=="selectionchange"&&(xx.has(i)||Ld(i,!1,e),Ld(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Il]||(t[Il]=!0,Ld("selectionchange",!1,t))}}function sg(e,t,i,o){switch(zg(t)){case 2:var u=Kx;break;case 8:u=Qx;break;default:u=Jd}i=u.bind(null,t,i,e),u=void 0,!au||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function Ud(e,t,i,o,u){var f=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var w=o.stateNode.containerInfo;if(w===u)break;if(g===4)for(g=o.return;g!==null;){var T=g.tag;if((T===3||T===4)&&g.stateNode.containerInfo===u)return;g=g.return}for(;w!==null;){if(g=ia(w),g===null)return;if(T=g.tag,T===5||T===6||T===26||T===27){o=f=g;continue e}w=w.parentNode}}o=o.return}dp(function(){var $=f,W=tu(i),ae=[];e:{var q=Ip.get(e);if(q!==void 0){var X=Ko,_e=e;switch(e){case"keypress":if(Zo(i)===0)break e;case"keydown":case"keyup":X=mS;break;case"focusin":_e="focus",X=ou;break;case"focusout":_e="blur",X=ou;break;case"beforeblur":case"afterblur":X=ou;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=aS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=vS;break;case zp:case Lp:case Bp:X=sS;break;case Up:X=wS;break;case"scroll":case"scrollend":X=tS;break;case"wheel":X=xS;break;case"copy":case"cut":case"paste":X=lS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=yp;break;case"toggle":case"beforetoggle":X=kS}var qe=(t&4)!==0,Mt=!qe&&(e==="scroll"||e==="scrollend"),D=qe?q!==null?q+"Capture":null:q;qe=[];for(var A=$,I;A!==null;){var ee=A;if(I=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||I===null||D===null||(ee=js(A,D),ee!=null&&qe.push(lo(A,ee,I))),Mt)break;A=A.return}0<qe.length&&(q=new X(q,_e,null,i,W),ae.push({event:q,listeners:qe}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",q&&i!==eu&&(_e=i.relatedTarget||i.fromElement)&&(ia(_e)||_e[Fa]))break e;if((X||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,X?(_e=i.relatedTarget||i.toElement,X=$,_e=_e?ia(_e):null,_e!==null&&(Mt=c(_e),qe=_e.tag,_e!==Mt||qe!==5&&qe!==27&&qe!==6)&&(_e=null)):(X=null,_e=$),X!==_e)){if(qe=pp,ee="onMouseLeave",D="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(qe=yp,ee="onPointerLeave",D="onPointerEnter",A="pointer"),Mt=X==null?q:Pa(X),I=_e==null?q:Pa(_e),q=new qe(ee,A+"leave",X,i,W),q.target=Mt,q.relatedTarget=I,ee=null,ia(W)===$&&(qe=new qe(D,A+"enter",_e,i,W),qe.target=I,qe.relatedTarget=Mt,ee=qe),Mt=ee,X&&_e)t:{for(qe=Ex,D=X,A=_e,I=0,ee=D;ee;ee=qe(ee))I++;ee=0;for(var Ie=A;Ie;Ie=qe(Ie))ee++;for(;0<I-ee;)D=qe(D),I--;for(;0<ee-I;)A=qe(A),ee--;for(;I--;){if(D===A||A!==null&&D===A.alternate){qe=D;break t}D=qe(D),A=qe(A)}qe=null}else qe=null;X!==null&&og(ae,q,X,qe,!1),_e!==null&&Mt!==null&&og(ae,Mt,_e,qe,!0)}}e:{if(q=$?Pa($):window,X=q.nodeName&&q.nodeName.toLowerCase(),X==="select"||X==="input"&&q.type==="file")var vt=kp;else if(xp(q))if(Cp)vt=MS;else{vt=DS;var Me=_S}else X=q.nodeName,!X||X.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?$&&Wc($.elementType)&&(vt=kp):vt=RS;if(vt&&(vt=vt(e,$))){Ep(ae,vt,i,W);break e}Me&&Me(e,q,$),e==="focusout"&&$&&q.type==="number"&&$.memoizedProps.value!=null&&Jc(q,"number",q.value)}switch(Me=$?Pa($):window,e){case"focusin":(xp(Me)||Me.contentEditable==="true")&&(Oi=Me,hu=$,Bs=null);break;case"focusout":Bs=hu=Oi=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,Rp(ae,i,W);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":Rp(ae,i,W)}var nt;if(cu)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Ni?wp(e,i)&&(dt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(dt="onCompositionStart");dt&&(gp&&i.locale!=="ko"&&(Ni||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Ni&&(nt=fp()):(gr=W,ru="value"in gr?gr.value:gr.textContent,Ni=!0)),Me=$l($,dt),0<Me.length&&(dt=new mp(dt,e,null,i,W),ae.push({event:dt,listeners:Me}),nt?dt.data=nt:(nt=Sp(i),nt!==null&&(dt.data=nt)))),(nt=TS?NS(e,i):OS(e,i))&&(dt=$l($,"onBeforeInput"),0<dt.length&&(Me=new mp("onBeforeInput","beforeinput",null,i,W),ae.push({event:Me,listeners:dt}),Me.data=nt)),bx(ae,e,$,i,W)}ig(ae,t)})}function lo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function $l(e,t){for(var i=t+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=js(e,i),u!=null&&o.unshift(lo(e,u,f)),u=js(e,t),u!=null&&o.push(lo(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Ex(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function og(e,t,i,o,u){for(var f=t._reactName,g=[];i!==null&&i!==o;){var w=i,T=w.alternate,$=w.stateNode;if(w=w.tag,T!==null&&T===o)break;w!==5&&w!==26&&w!==27||$===null||(T=$,u?($=js(i,f),$!=null&&g.unshift(lo(i,$,T))):u||($=js(i,f),$!=null&&g.push(lo(i,$,T)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var kx=/\r\n?/g,Cx=/\u0000|\uFFFD/g;function lg(e){return(typeof e=="string"?e:""+e).replace(kx,`
`).replace(Cx,"")}function cg(e,t){return t=lg(t),lg(e)===t}function Rt(e,t,i,o,u,f){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||ki(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&ki(e,""+o);break;case"className":_t(e,"class",o);break;case"tabIndex":_t(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":_t(e,i,o);break;case"style":cp(e,o,f);break;case"data":if(t!=="object"){_t(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Fo(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(t!=="input"&&Rt(e,t,"name",u.name,u,null),Rt(e,t,"formEncType",u.formEncType,u,null),Rt(e,t,"formMethod",u.formMethod,u,null),Rt(e,t,"formTarget",u.formTarget,u,null)):(Rt(e,t,"encType",u.encType,u,null),Rt(e,t,"method",u.method,u,null),Rt(e,t,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Fo(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=Xa);break;case"onScroll":o!=null&&ct("scroll",e);break;case"onScrollEnd":o!=null&&ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Fo(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":ct("beforetoggle",e),ct("toggle",e),gn(e,"popover",o);break;case"xlinkActuate":Yt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Yt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Yt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Yt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Yt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Yt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Yt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Yt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Yt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":gn(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Ww.get(i)||i,gn(e,i,o))}}function Id(e,t,i,o,u,f){switch(i){case"style":cp(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?ki(e,o):(typeof o=="number"||typeof o=="bigint")&&ki(e,""+o);break;case"onScroll":o!=null&&ct("scroll",e);break;case"onScrollEnd":o!=null&&ct("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xe.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),t=i.slice(2,u?i.length-7:void 0),f=e[Cn]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):gn(e,i,o)}}}function jn(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",e),ct("load",e);var o=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var g=i[f];if(g!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Rt(e,t,f,g,i,null)}}u&&Rt(e,t,"srcSet",i.srcSet,i,null),o&&Rt(e,t,"src",i.src,i,null);return;case"input":ct("invalid",e);var w=f=g=u=null,T=null,$=null;for(o in i)if(i.hasOwnProperty(o)){var W=i[o];if(W!=null)switch(o){case"name":u=W;break;case"type":g=W;break;case"checked":T=W;break;case"defaultChecked":$=W;break;case"value":f=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,t));break;default:Rt(e,t,o,W,i,null)}}ip(e,f,w,T,$,g,u,!1);return;case"select":ct("invalid",e),o=g=f=null;for(u in i)if(i.hasOwnProperty(u)&&(w=i[u],w!=null))switch(u){case"value":f=w;break;case"defaultValue":g=w;break;case"multiple":o=w;default:Rt(e,t,u,w,i,null)}t=f,i=g,e.multiple=!!o,t!=null?Ei(e,!!o,t,!1):i!=null&&Ei(e,!!o,i,!0);return;case"textarea":ct("invalid",e),f=u=o=null;for(g in i)if(i.hasOwnProperty(g)&&(w=i[g],w!=null))switch(g){case"value":o=w;break;case"defaultValue":u=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Rt(e,t,g,w,i,null)}op(e,o,u,f);return;case"option":for(T in i)if(i.hasOwnProperty(T)&&(o=i[T],o!=null))switch(T){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Rt(e,t,T,o,i,null)}return;case"dialog":ct("beforetoggle",e),ct("toggle",e),ct("cancel",e),ct("close",e);break;case"iframe":case"object":ct("load",e);break;case"video":case"audio":for(o=0;o<oo.length;o++)ct(oo[o],e);break;case"image":ct("error",e),ct("load",e);break;case"details":ct("toggle",e);break;case"embed":case"source":case"link":ct("error",e),ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in i)if(i.hasOwnProperty($)&&(o=i[$],o!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Rt(e,t,$,o,i,null)}return;default:if(Wc(t)){for(W in i)i.hasOwnProperty(W)&&(o=i[W],o!==void 0&&Id(e,t,W,o,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(o=i[w],o!=null&&Rt(e,t,w,o,i,null))}function Tx(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,g=null,w=null,T=null,$=null,W=null;for(X in i){var ae=i[X];if(i.hasOwnProperty(X)&&ae!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":T=ae;default:o.hasOwnProperty(X)||Rt(e,t,X,null,o,ae)}}for(var q in o){var X=o[q];if(ae=i[q],o.hasOwnProperty(q)&&(X!=null||ae!=null))switch(q){case"type":f=X;break;case"name":u=X;break;case"checked":$=X;break;case"defaultChecked":W=X;break;case"value":g=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,t));break;default:X!==ae&&Rt(e,t,q,X,o,ae)}}Qc(e,g,w,T,$,W,f,u);return;case"select":X=g=w=q=null;for(f in i)if(T=i[f],i.hasOwnProperty(f)&&T!=null)switch(f){case"value":break;case"multiple":X=T;default:o.hasOwnProperty(f)||Rt(e,t,f,null,o,T)}for(u in o)if(f=o[u],T=i[u],o.hasOwnProperty(u)&&(f!=null||T!=null))switch(u){case"value":q=f;break;case"defaultValue":w=f;break;case"multiple":g=f;default:f!==T&&Rt(e,t,u,f,o,T)}t=w,i=g,o=X,q!=null?Ei(e,!!i,q,!1):!!o!=!!i&&(t!=null?Ei(e,!!i,t,!0):Ei(e,!!i,i?[]:"",!1));return;case"textarea":X=q=null;for(w in i)if(u=i[w],i.hasOwnProperty(w)&&u!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Rt(e,t,w,null,o,u)}for(g in o)if(u=o[g],f=i[g],o.hasOwnProperty(g)&&(u!=null||f!=null))switch(g){case"value":q=u;break;case"defaultValue":X=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Rt(e,t,g,u,o,f)}sp(e,q,X);return;case"option":for(var _e in i)if(q=i[_e],i.hasOwnProperty(_e)&&q!=null&&!o.hasOwnProperty(_e))switch(_e){case"selected":e.selected=!1;break;default:Rt(e,t,_e,null,o,q)}for(T in o)if(q=o[T],X=i[T],o.hasOwnProperty(T)&&q!==X&&(q!=null||X!=null))switch(T){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Rt(e,t,T,q,o,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in i)q=i[qe],i.hasOwnProperty(qe)&&q!=null&&!o.hasOwnProperty(qe)&&Rt(e,t,qe,null,o,q);for($ in o)if(q=o[$],X=i[$],o.hasOwnProperty($)&&q!==X&&(q!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,t));break;default:Rt(e,t,$,q,o,X)}return;default:if(Wc(t)){for(var Mt in i)q=i[Mt],i.hasOwnProperty(Mt)&&q!==void 0&&!o.hasOwnProperty(Mt)&&Id(e,t,Mt,void 0,o,q);for(W in o)q=o[W],X=i[W],!o.hasOwnProperty(W)||q===X||q===void 0&&X===void 0||Id(e,t,W,q,o,X);return}}for(var D in i)q=i[D],i.hasOwnProperty(D)&&q!=null&&!o.hasOwnProperty(D)&&Rt(e,t,D,null,o,q);for(ae in o)q=o[ae],X=i[ae],!o.hasOwnProperty(ae)||q===X||q==null&&X==null||Rt(e,t,ae,q,o,X)}function ug(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Nx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],f=u.transferSize,g=u.initiatorType,w=u.duration;if(f&&w&&ug(g)){for(g=0,w=u.responseEnd,o+=1;o<i.length;o++){var T=i[o],$=T.startTime;if($>w)break;var W=T.transferSize,ae=T.initiatorType;W&&ug(ae)&&(T=T.responseEnd,g+=W*(T<w?1:(w-$)/(T-$)))}if(--o,t+=8*(f+g)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $d=null,Hd=null;function Hl(e){return e.nodeType===9?e:e.ownerDocument}function dg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qd=null;function Ox(){var e=window.event;return e&&e.type==="popstate"?e===qd?!1:(qd=e,!0):(qd=null,!1)}var hg=typeof setTimeout=="function"?setTimeout:void 0,jx=typeof clearTimeout=="function"?clearTimeout:void 0,pg=typeof Promise=="function"?Promise:void 0,Ax=typeof queueMicrotask=="function"?queueMicrotask:typeof pg<"u"?function(e){return pg.resolve(null).then(e).catch(_x)}:hg;function _x(e){setTimeout(function(){throw e})}function Mr(e){return e==="head"}function mg(e,t){var i=t,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),ts(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")co(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,co(i);for(var f=i.firstChild;f;){var g=f.nextSibling,w=f.nodeName;f[xa]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=g}}else i==="body"&&co(e.ownerDocument.body);i=u}while(i);ts(t)}function yg(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Gd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Gd(i),Ea(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Dx(e,t,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[xa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ha(e.nextSibling),e===null)break}return null}function Rx(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ha(e.nextSibling),e===null))return null;return e}function gg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ha(e.nextSibling),e===null))return null;return e}function Yd(e){return e.data==="$?"||e.data==="$~"}function Fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Mx(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ha(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Pd=null;function vg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return ha(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function bg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function wg(e,t,i){switch(t=Hl(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function co(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ea(e)}var pa=new Map,Sg=new Set;function Vl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var dr=B.d;B.d={f:zx,r:Lx,D:Bx,C:Ux,L:Ix,m:$x,X:Vx,S:Hx,M:qx};function zx(){var e=dr.f(),t=Rl();return e||t}function Lx(e){var t=yr(e);t!==null&&t.tag===5&&t.type==="form"?Um(t):dr.r(e)}var Ji=typeof document>"u"?null:document;function xg(e,t,i){var o=Ji;if(o&&typeof t=="string"&&t){var u=sa(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),Sg.has(u)||(Sg.add(u),e={rel:e,crossOrigin:i,href:t},o.querySelector(u)===null&&(t=o.createElement("link"),jn(t,"link",e),te(t),o.head.appendChild(t)))}}function Bx(e){dr.D(e),xg("dns-prefetch",e,null)}function Ux(e,t){dr.C(e,t),xg("preconnect",e,t)}function Ix(e,t,i){dr.L(e,t,i);var o=Ji;if(o&&e&&t){var u='link[rel="preload"][as="'+sa(t)+'"]';t==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+sa(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+sa(i.imageSizes)+'"]')):u+='[href="'+sa(e)+'"]';var f=u;switch(t){case"style":f=Wi(e);break;case"script":f=es(e)}pa.has(f)||(e=b({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),pa.set(f,e),o.querySelector(u)!==null||t==="style"&&o.querySelector(uo(f))||t==="script"&&o.querySelector(fo(f))||(t=o.createElement("link"),jn(t,"link",e),te(t),o.head.appendChild(t)))}}function $x(e,t){dr.m(e,t);var i=Ji;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+sa(o)+'"][href="'+sa(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=es(e)}if(!pa.has(f)&&(e=b({rel:"modulepreload",href:e},t),pa.set(f,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(fo(f)))return}o=i.createElement("link"),jn(o,"link",e),te(o),i.head.appendChild(o)}}}function Hx(e,t,i){dr.S(e,t,i);var o=Ji;if(o&&e){var u=P(o).hoistableStyles,f=Wi(e);t=t||"default";var g=u.get(f);if(!g){var w={loading:0,preload:null};if(g=o.querySelector(uo(f)))w.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},i),(i=pa.get(f))&&Zd(e,i);var T=g=o.createElement("link");te(T),jn(T,"link",e),T._p=new Promise(function($,W){T.onload=$,T.onerror=W}),T.addEventListener("load",function(){w.loading|=1}),T.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ql(g,t,o)}g={type:"stylesheet",instance:g,count:1,state:w},u.set(f,g)}}}function Vx(e,t){dr.X(e,t);var i=Ji;if(i&&e){var o=P(i).hoistableScripts,u=es(e),f=o.get(u);f||(f=i.querySelector(fo(u)),f||(e=b({src:e,async:!0},t),(t=pa.get(u))&&Xd(e,t),f=i.createElement("script"),te(f),jn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function qx(e,t){dr.M(e,t);var i=Ji;if(i&&e){var o=P(i).hoistableScripts,u=es(e),f=o.get(u);f||(f=i.querySelector(fo(u)),f||(e=b({src:e,async:!0,type:"module"},t),(t=pa.get(u))&&Xd(e,t),f=i.createElement("script"),te(f),jn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Eg(e,t,i,o){var u=(u=he.current)?Vl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Wi(i.href),i=P(u).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Wi(i.href);var f=P(u).hoistableStyles,g=f.get(e);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,g),(f=u.querySelector(uo(e)))&&!f._p&&(g.instance=f,g.state.loading=5),pa.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},pa.set(e,i),f||Gx(u,e,i,g.state))),t&&o===null)throw Error(s(528,""));return g}if(t&&o!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=es(i),i=P(u).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Wi(e){return'href="'+sa(e)+'"'}function uo(e){return'link[rel="stylesheet"]['+e+"]"}function kg(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Gx(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),jn(t,"link",i),te(t),e.head.appendChild(t))}function es(e){return'[src="'+sa(e)+'"]'}function fo(e){return"script[async]"+e}function Cg(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+sa(i.href)+'"]');if(o)return t.instance=o,te(o),o;var u=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),te(o),jn(o,"style",u),ql(o,i.precedence,e),t.instance=o;case"stylesheet":u=Wi(i.href);var f=e.querySelector(uo(u));if(f)return t.state.loading|=4,t.instance=f,te(f),f;o=kg(i),(u=pa.get(u))&&Zd(o,u),f=(e.ownerDocument||e).createElement("link"),te(f);var g=f;return g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),jn(f,"link",o),t.state.loading|=4,ql(f,i.precedence,e),t.instance=f;case"script":return f=es(i.src),(u=e.querySelector(fo(f)))?(t.instance=u,te(u),u):(o=i,(u=pa.get(f))&&(o=b({},i),Xd(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),te(u),jn(u,"link",o),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,ql(o,i.precedence,e));return t.instance}function ql(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,g=0;g<o.length;g++){var w=o[g];if(w.dataset.precedence===t)f=w;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Zd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Xd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Gl=null;function Tg(e,t,i){if(Gl===null){var o=new Map,u=Gl=new Map;u.set(i,o)}else u=Gl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[xa]||f[on]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(t)||"";g=e+g;var w=o.get(g);w?w.push(f):o.set(g,[f])}}return o}function Ng(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Yx(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Og(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Fx(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=Wi(o.href),f=t.querySelector(uo(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Yl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=f,te(f);return}f=t.ownerDocument||t,o=kg(o),(u=pa.get(u))&&Zd(o,u),f=f.createElement("link"),te(f);var g=f;g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),jn(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Yl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Kd=0;function Px(e,t){return e.stylesheets&&e.count===0&&Pl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Pl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Kd===0&&(Kd=62500*Nx());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Pl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Kd?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Yl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fl=null;function Pl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fl=new Map,t.forEach(Zx,e),Fl=null,Yl.call(e))}function Zx(e,t){if(!(t.state.loading&4)){var i=Fl.get(e);if(i)var o=i.get(null);else{i=new Map,Fl.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var g=u[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),o=g)}o&&i.set(null,o)}u=t.instance,g=u.getAttribute("data-precedence"),f=i.get(g)||o,f===o&&i.set(null,u),i.set(g,u),this.count++,o=Yl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var ho={$$typeof:L,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function Xx(e,t,i,o,u,f,g,w,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function jg(e,t,i,o,u,f,g,w,T,$,W,ae){return e=new Xx(e,t,i,g,T,$,W,ae,w),t=1,f===!0&&(t|=24),f=Qn(3,null,null,t),e.current=f,f.stateNode=e,t=ju(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:t},Ru(f),e}function Ag(e){return e?(e=_i,e):_i}function _g(e,t,i,o,u,f){u=Ag(u),o.context===null?o.context=u:o.pendingContext=u,o=Er(t),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=kr(e,o,t),i!==null&&(Pn(i,e,t),Gs(i,e,t))}function Dg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Qd(e,t){Dg(e,t),(e=e.alternate)&&Dg(e,t)}function Rg(e){if(e.tag===13||e.tag===31){var t=ti(e,67108864);t!==null&&Pn(t,e,67108864),Qd(e,67108864)}}function Mg(e){if(e.tag===13||e.tag===31){var t=na();t=xt(t);var i=ti(e,t);i!==null&&Pn(i,e,t),Qd(e,t)}}var Zl=!0;function Kx(e,t,i,o){var u=N.T;N.T=null;var f=B.p;try{B.p=2,Jd(e,t,i,o)}finally{B.p=f,N.T=u}}function Qx(e,t,i,o){var u=N.T;N.T=null;var f=B.p;try{B.p=8,Jd(e,t,i,o)}finally{B.p=f,N.T=u}}function Jd(e,t,i,o){if(Zl){var u=Wd(o);if(u===null)Ud(e,t,o,Xl,i),Lg(e,o);else if(Wx(u,e,t,i,o))o.stopPropagation();else if(Lg(e,o),t&4&&-1<Jx.indexOf(e)){for(;u!==null;){var f=yr(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=nn(f.pendingLanes);if(g!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;g;){var T=1<<31-it(g);w.entanglements[1]|=T,g&=~T}Ua(f),(Et&6)===0&&(_l=C()+500,so(0))}}break;case 31:case 13:w=ti(f,2),w!==null&&Pn(w,f,2),Rl(),Qd(f,2)}if(f=Wd(o),f===null&&Ud(e,t,o,Xl,i),f===u)break;u=f}u!==null&&o.stopPropagation()}else Ud(e,t,o,null,i)}}function Wd(e){return e=tu(e),ef(e)}var Xl=null;function ef(e){if(Xl=null,e=ia(e),e!==null){var t=c(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xl=e,null}function zg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(R()){case le:return 2;case fe:return 8;case we:case Te:return 32;case $e:return 268435456;default:return 32}default:return 32}}var tf=!1,zr=null,Lr=null,Br=null,po=new Map,mo=new Map,Ur=[],Jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lg(e,t){switch(e){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(t.pointerId)}}function yo(e,t,i,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},t!==null&&(t=yr(t),t!==null&&Rg(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Wx(e,t,i,o,u){switch(t){case"focusin":return zr=yo(zr,e,t,i,o,u),!0;case"dragenter":return Lr=yo(Lr,e,t,i,o,u),!0;case"mouseover":return Br=yo(Br,e,t,i,o,u),!0;case"pointerover":var f=u.pointerId;return po.set(f,yo(po.get(f)||null,e,t,i,o,u)),!0;case"gotpointercapture":return f=u.pointerId,mo.set(f,yo(mo.get(f)||null,e,t,i,o,u)),!0}return!1}function Bg(e){var t=ia(e.target);if(t!==null){var i=c(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Wd(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);eu=o,i.target.dispatchEvent(o),eu=null}else return t=yr(i),t!==null&&Rg(t),e.blockedOn=i,!1;t.shift()}return!0}function Ug(e,t,i){Kl(e)&&i.delete(t)}function eE(){tf=!1,zr!==null&&Kl(zr)&&(zr=null),Lr!==null&&Kl(Lr)&&(Lr=null),Br!==null&&Kl(Br)&&(Br=null),po.forEach(Ug),mo.forEach(Ug)}function Ql(e,t){e.blockedOn===t&&(e.blockedOn=null,tf||(tf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,eE)))}var Jl=null;function Ig(e){Jl!==e&&(Jl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jl===e&&(Jl=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],u=e[t+2];if(typeof o!="function"){if(ef(o||i)===null)continue;break}var f=yr(i);f!==null&&(e.splice(t,3),t-=3,Wu(f,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function ts(e){function t(T){return Ql(T,e)}zr!==null&&Ql(zr,e),Lr!==null&&Ql(Lr,e),Br!==null&&Ql(Br,e),po.forEach(t),mo.forEach(t);for(var i=0;i<Ur.length;i++){var o=Ur[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ur.length&&(i=Ur[0],i.blockedOn===null);)Bg(i),i.blockedOn===null&&Ur.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],g=u[Cn]||null;if(typeof f=="function")g||Ig(i);else if(g){var w=null;if(f&&f.hasAttribute("formAction")){if(u=f,g=f[Cn]||null)w=g.formAction;else if(ef(u)!==null)continue}else w=g.action;typeof w=="function"?i[o+1]=w:(i.splice(o,3),o-=3),Ig(i)}}}function $g(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(g){return u=g})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function nf(e){this._internalRoot=e}Wl.prototype.render=nf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,o=na();_g(i,o,e,t,null,null)},Wl.prototype.unmount=nf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_g(e.current,2,null,e,null,null),Rl(),t[Fa]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ns();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ur.length&&t!==0&&t<Ur[i].priority;i++);Ur.splice(i,0,e),i===0&&Bg(e)}};var Hg=n.version;if(Hg!=="19.2.0")throw Error(s(527,Hg,"19.2.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var tE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{Ue=ec.inject(tE),He=ec}catch{}}return vo.createRoot=function(e,t){if(!l(e))throw Error(s(299));var i=!1,o="",u=Zm,f=Xm,g=Km;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=jg(e,1,!1,null,null,i,o,null,u,f,g,$g),e[Fa]=t.current,Bd(e),new nf(t)},vo.hydrateRoot=function(e,t,i){if(!l(e))throw Error(s(299));var o=!1,u="",f=Zm,g=Xm,w=Km,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(T=i.formState)),t=jg(e,1,!0,t,i??null,o,u,T,f,g,w,$g),t.context=Ag(null),i=t.current,o=na(),o=xt(o),u=Er(o),u.callback=null,kr(i,u,o),i=o,t.current.lanes=i,De(t,i),Ua(t),e[Fa]=t.current,Bd(e),new Wl(t)},vo.version="19.2.0",vo}var Qg;function dE(){if(Qg)return sf.exports;Qg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),sf.exports=uE(),sf.exports}var cb=dE();const fE="modulepreload",hE=function(a,n){return new URL(a,n).href},Jg={},qf=function(n,r,s){let l=Promise.resolve();if(r&&r.length>0){let y=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const d=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),m=h?.nonce||h?.getAttribute("nonce");l=y(r.map(v=>{if(v=hE(v,s),v in Jg)return;Jg[v]=!0;const b=v.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(s)for(let j=d.length-1;j>=0;j--){const Z=d[j];if(Z.href===v&&(!b||Z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${x}`))return;const k=document.createElement("link");if(k.rel=b?"stylesheet":fE,b||(k.as="script"),k.crossOrigin="",k.href=v,m&&k.setAttribute("nonce",m),document.head.appendChild(k),b)return new Promise((j,Z)=>{k.addEventListener("load",j),k.addEventListener("error",()=>Z(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return l.then(d=>{for(const h of d||[])h.status==="rejected"&&c(h.reason);return n().catch(c)})};var Fr=lb();const Nh=Ch(Fr),Wg=ob({__proto__:null,default:Nh},[Fr]);function ev(a,n,r,s,l,c,d){try{var h=a[c](d),m=h.value}catch(y){return void r(y)}h.done?n(m):Promise.resolve(m).then(s,l)}function rt(a){return function(){var n=this,r=arguments;return new Promise(function(s,l){var c=a.apply(n,r);function d(m){ev(c,s,l,d,h,"next",m)}function h(m){ev(c,s,l,d,h,"throw",m)}d(void 0)})}}function ft(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function An(a){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},An(a)}function pE(a,n){if(An(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,n);if(An(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function ub(a){var n=pE(a,"string");return An(n)=="symbol"?n:n+""}function mE(a,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,ub(s.key),s)}}function ht(a,n,r){return n&&mE(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function yE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ya(a,n){if(n&&(An(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yE(a)}function Ut(a){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ut(a)}function Do(a,n){return Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Do(a,n)}function Xn(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&Do(a,n)}function ze(a,n,r){return(n=ub(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}var uf={exports:{}},df={exports:{}},tv;function db(){return tv||(tv=1,(function(a){function n(r,s){this.v=r,this.k=s}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(df)),df.exports}var ff={exports:{}},hf={exports:{}},nv;function fb(){return nv||(nv=1,(function(a){function n(r,s,l,c){var d=Object.defineProperty;try{d({},"",{})}catch{d=0}a.exports=n=function(m,y,v,b){function x(k,j){n(m,k,function(Z){return this._invoke(k,j,Z)})}y?d?d(m,y,{value:v,enumerable:!b,configurable:!b,writable:!b}):m[y]=v:(x("next",0),x("throw",1),x("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,n(r,s,l,c)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(hf)),hf.exports}var av;function hb(){return av||(av=1,(function(a){var n=fb();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",h=c.toStringTag||"@@toStringTag";function m(H,Q,K,L){var G=Q&&Q.prototype instanceof v?Q:v,de=Object.create(G.prototype);return n(de,"_invoke",(function(ge,Y,ce){var re,pe,Re,Ae=0,Ke=ce||[],st=!1,We={p:0,n:0,v:s,a:N,f:N.bind(s,4),d:function(ne,ve){return re=ne,pe=0,Re=s,We.n=ve,y}};function N(B,ne){for(pe=B,Re=ne,l=0;!st&&Ae&&!ve&&l<Ke.length;l++){var ve,U=Ke[l],S=We.p,M=U[2];B>3?(ve=M===ne)&&(Re=U[(pe=U[4])?5:(pe=3,3)],U[4]=U[5]=s):U[0]<=S&&((ve=B<2&&S<U[1])?(pe=0,We.v=ne,We.n=U[1]):S<M&&(ve=B<3||U[0]>ne||ne>M)&&(U[4]=B,U[5]=ne,We.n=M,pe=0))}if(ve||B>1)return y;throw st=!0,ne}return function(B,ne,ve){if(Ae>1)throw TypeError("Generator is already running");for(st&&ne===1&&N(ne,ve),pe=ne,Re=ve;(l=pe<2?s:Re)||!st;){re||(pe?pe<3?(pe>1&&(We.n=-1),N(pe,Re)):We.n=Re:We.v=Re);try{if(Ae=2,re){if(pe||(B="next"),l=re[B]){if(!(l=l.call(re,Re)))throw TypeError("iterator result is not an object");if(!l.done)return l;Re=l.value,pe<2&&(pe=0)}else pe===1&&(l=re.return)&&l.call(re),pe<2&&(Re=TypeError("The iterator does not provide a '"+B+"' method"),pe=1);re=s}else if((l=(st=We.n<0)?Re:ge.call(Y,We))!==y)break}catch(U){re=s,pe=1,Re=U}finally{Ae=1}}return{value:l,done:st}}})(H,K,L),!0),de}var y={};function v(){}function b(){}function x(){}l=Object.getPrototypeOf;var k=[][d]?l(l([][d]())):(n(l={},d,function(){return this}),l),j=x.prototype=v.prototype=Object.create(k);function Z(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,x):(H.__proto__=x,n(H,h,"GeneratorFunction")),H.prototype=Object.create(j),H}return b.prototype=x,n(j,"constructor",x),n(x,"constructor",b),b.displayName="GeneratorFunction",n(x,h,"GeneratorFunction"),n(j),n(j,h,"Generator"),n(j,d,function(){return this}),n(j,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:m,m:Z}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(ff)),ff.exports}var pf={exports:{}},mf={exports:{}},yf={exports:{}},rv;function pb(){return rv||(rv=1,(function(a){var n=db(),r=fb();function s(l,c){function d(m,y,v,b){try{var x=l[m](y),k=x.value;return k instanceof n?c.resolve(k.v).then(function(j){d("next",j,v,b)},function(j){d("throw",j,v,b)}):c.resolve(k).then(function(j){x.value=j,v(x)},function(j){return d("throw",j,v,b)})}catch(j){b(j)}}var h;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(m,y,v){function b(){return new c(function(x,k){d(m,v,x,k)})}return h=h?h.then(b,b):b()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(yf)),yf.exports}var iv;function mb(){return iv||(iv=1,(function(a){var n=hb(),r=pb();function s(l,c,d,h,m){return new r(n().w(l,c,d,h),m||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(mf)),mf.exports}var sv;function gE(){return sv||(sv=1,(function(a){var n=mb();function r(s,l,c,d,h){var m=n(s,l,c,d,h);return m.next().then(function(y){return y.done?y.value:m.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(pf)),pf.exports}var gf={exports:{}},ov;function vE(){return ov||(ov=1,(function(a){function n(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function d(){for(;l.length;)if((c=l.pop())in s)return d.value=c,d.done=!1,d;return d.done=!0,d}}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(gf)),gf.exports}var vf={exports:{}},bf={exports:{}},lv;function bE(){return lv||(lv=1,(function(a){function n(r){"@babel/helpers - typeof";return a.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,n(r)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(bf)),bf.exports}var cv;function wE(){return cv||(cv=1,(function(a){var n=bE().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(n(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(vf)),vf.exports}var uv;function SE(){return uv||(uv=1,(function(a){var n=db(),r=hb(),s=gE(),l=mb(),c=pb(),d=vE(),h=wE();function m(){var y=r(),v=y.m(m),b=(Object.getPrototypeOf?Object.getPrototypeOf(v):v.__proto__).constructor;function x(Z){var H=typeof Z=="function"&&Z.constructor;return!!H&&(H===b||(H.displayName||H.name)==="GeneratorFunction")}var k={throw:1,return:2,break:3,continue:3};function j(Z){var H,Q;return function(K){H||(H={stop:function(){return Q(K.a,2)},catch:function(){return K.v},abrupt:function(G,de){return Q(K.a,k[G],de)},delegateYield:function(G,de,ge){return H.resultName=de,Q(K.d,h(G),ge)},finish:function(G){return Q(K.f,G)}},Q=function(G,de,ge){K.p=H.prev,K.n=H.next;try{return G(de,ge)}finally{H.next=K.n}}),H.resultName&&(H[H.resultName]=K.v,H.resultName=void 0),H.sent=K.v,H.next=K.n;try{return Z.call(this,H)}finally{K.p=H.prev,K.n=H.next}}}return(a.exports=m=function(){return{wrap:function(Q,K,L,G){return y.w(j(Q),K,L,G&&G.reverse())},isGeneratorFunction:x,mark:y.m,awrap:function(Q,K){return new n(Q,K)},AsyncIterator:c,async:function(Q,K,L,G,de){return(x(K)?l:s)(j(Q),K,L,G,de)},keys:d,values:h}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=m,a.exports.__esModule=!0,a.exports.default=a.exports})(uf)),uf.exports}var wf,dv;function xE(){if(dv)return wf;dv=1;var a=SE()();wf=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return wf}var EE=xE();const Se=Ch(EE);function kE(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=CE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function CE(a,n){if(a){if(typeof a=="string")return fv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fv(a,n):void 0}}function fv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function TE(){return{debug:function(n){}}}var yb=(function(){function a(){ft(this,a),ze(this,"pipes",[])}return ht(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var n=rt(Se.mark(function s(l){var c,d,h,m;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:c=l,d=kE(this.pipes),v.prev=2,d.s();case 4:if((h=d.n()).done){v.next=13;break}return m=h.value,v.next=8,m(c);case 8:if(c=v.sent,!(typeof c>"u")){v.next=11;break}return v.abrupt("return");case 11:v.next=4;break;case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(2),d.e(v.t0);case 18:return v.prev=18,d.f(),v.finish(18);case 21:return v.abrupt("return",c);case 22:case"end":return v.stop()}},s,this,[[2,15,18,21]])}));function r(s){return n.apply(this,arguments)}return r})()}])})(),vs=(function(){function a(n){ft(this,a),ze(this,"signal",new yb),this.name=n}return ht(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),TE()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function hv(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=NE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function NE(a,n){if(a){if(typeof a=="string")return pv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pv(a,n):void 0}}function pv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function OE(a,n,r){return n=Ut(n),Ya(a,gb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function gb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gb=function(){return!!a})()}var Kr=(function(a){function n(){var r;return ft(this,n),r=OE(this,n,["NodeEditor"]),ze(r,"nodes",[]),ze(r,"connections",[]),r}return Xn(n,a),ht(n,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=rt(Se.mark(function l(c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getNode(c.id)){h.next=2;break}throw new Error("node has already been added");case 2:return h.next=4,this.emit({type:"nodecreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.nodes.push(c),h.next=9,this.emit({type:"nodecreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=rt(Se.mark(function l(c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getConnection(c.id)){h.next=2;break}throw new Error("connection has already been added");case 2:return h.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.connections.push(c),h.next=9,this.emit({type:"connectioncreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=rt(Se.mark(function l(c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=this.nodes.find(function(v){return v.id===c}),d){y.next=3;break}throw new Error("cannot find node");case 3:return y.next=5,this.emit({type:"noderemove",data:d});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.nodes.indexOf(d),this.nodes.splice(h,1),y.next=11,this.emit({type:"noderemoved",data:d});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=rt(Se.mark(function l(c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=this.connections.find(function(v){return v.id===c}),d){y.next=3;break}throw new Error("cannot find connection");case 3:return y.next=5,this.emit({type:"connectionremove",data:d});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.connections.indexOf(d),this.connections.splice(h,1),y.next=11,this.emit({type:"connectionremoved",data:d});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=rt(Se.mark(function l(){var c,d,h,m,y,v;return Se.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.emit({type:"clear"});case 2:if(x.sent){x.next=6;break}return x.next=5,this.emit({type:"clearcancelled"});case 5:return x.abrupt("return",!1);case 6:c=hv(this.connections.slice()),x.prev=7,c.s();case 9:if((d=c.n()).done){x.next=15;break}return h=d.value,x.next=13,this.removeConnection(h.id);case 13:x.next=9;break;case 15:x.next=20;break;case 17:x.prev=17,x.t0=x.catch(7),c.e(x.t0);case 20:return x.prev=20,c.f(),x.finish(20);case 23:m=hv(this.nodes.slice()),x.prev=24,m.s();case 26:if((y=m.n()).done){x.next=32;break}return v=y.value,x.next=30,this.removeNode(v.id);case 30:x.next=26;break;case 32:x.next=37;break;case 34:x.prev=34,x.t1=x.catch(24),m.e(x.t1);case 37:return x.prev=37,m.f(),x.finish(37);case 40:return x.next=42,this.emit({type:"cleared"});case 42:return x.abrupt("return",!0);case 43:case"end":return x.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(vs),Sf=globalThis.crypto;function Qr(){if("randomBytes"in Sf)return Sf.randomBytes(8).toString("hex");var a=Sf.getRandomValues(new Uint8Array(8)),n=Array.from(a),r=n.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Oh(a,n,r){return n=Ut(n),Ya(a,vb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function vb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vb=function(){return!!a})()}var jE=ht(function a(n){ft(this,a),this.name=n}),jh=ht(function a(n,r,s){ft(this,a),this.socket=n,this.label=r,this.multipleConnections=s,this.id=Qr()}),AE=(function(a){function n(r,s,l){var c;return ft(this,n),c=Oh(this,n,[r,s,l]),ze(c,"control",null),ze(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return Xn(n,a),ht(n,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(jh),_E=(function(a){function n(r,s,l){return ft(this,n),Oh(this,n,[r,s,l!==!1])}return Xn(n,a),ht(n)})(jh),bb=ht(function a(){ft(this,a),this.id=Qr()}),DE=(function(a){function n(r,s){var l,c;return ft(this,n),c=Oh(this,n),c.type=r,c.options=s,c.id=Qr(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return Xn(n,a),ht(n,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(bb),RE=(function(){function a(n){ft(this,a),ze(this,"inputs",{}),ze(this,"outputs",{}),ze(this,"controls",{}),this.label=n,this.id=Qr()}return ht(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),ME=ht(function a(n,r,s,l){if(ft(this,a),this.sourceOutput=r,this.targetInput=l,!n.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=Qr(),this.source=n.id,this.target=s.id}),Xt=Object.freeze({__proto__:null,Socket:jE,Port:jh,Input:AE,Output:_E,Control:bb,InputControl:DE,Node:RE,Connection:ME});const zE=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Xt,NodeEditor:Kr,Scope:vs,Signal:yb,getUID:Qr},Symbol.toStringTag,{value:"Module"}));function Gf(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function LE(a){if(Array.isArray(a))return Gf(a)}function BE(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function wb(a,n){if(a){if(typeof a=="string")return Gf(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gf(a,n):void 0}}function UE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(a){return LE(a)||BE(a)||wb(a)||UE()}var IE=(function(){function a(n){ft(this,a),this.reordered=n,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ht(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,d=r.clientX-l,h=r.clientY-c;return{x:d,y:h}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var n=rt(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.holder.contains(l)){h.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){h.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),h.next=7,this.reordered(l);case 7:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function Sb(a,n){var r=function(d){n.move(d)},s=function(d){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),n.up(d)},l=function(d){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),n.down(d)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var mv=function(n){return n.length===0?0:Math.min.apply(Math,bs(n))},yv=function(n){return n.length===0?0:Math.max.apply(Math,bs(n))};function xb(a){var n=mv(a.map(function(c){return c.position.x})),r=mv(a.map(function(c){return c.position.y})),s=yv(a.map(function(c){return c.position.x+c.width})),l=yv(a.map(function(c){return c.position.y+c.height}));return{left:n,right:s,top:r,bottom:l,width:Math.abs(n-s),height:Math.abs(r-l),center:{x:(n+s)/2,y:(r+l)/2}}}function gv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function $E(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?gv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):gv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Ah=(function(){function a(n){var r=this;ft(this,a),ze(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=$E({},r.config.getCurrentPosition()),r.events.start(s))}),ze(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),d=r.startPosition.x+l.x/c,h=r.startPosition.y+l.y/c;r.events.translate(d,h,s)}}),ze(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=n||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return ht(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=Sb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),Eb=(function(){function a(n){var r=this;ft(this,a),ze(this,"previous",null),ze(this,"pointers",[]),ze(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=s.deltaY<0,m=h?r.intensity:-r.intensity,y=(c-s.clientX)*m,v=(d-s.clientY)*m;r.onzoom(m,y,v,"wheel")}),ze(this,"down",function(s){r.pointers.push(s)}),ze(this,"move",function(s){if(r.pointers=r.pointers.map(function(j){return j.pointerId===s.pointerId?s:j}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=r.getTouches(),m=h.cx,y=h.cy,v=h.distance;if(r.previous!==null&&r.previous.distance>0){var b=v/r.previous.distance-1,x=(c-m)*b,k=(d-y)*b;r.onzoom(b,x-(r.previous.cx-m),k-(r.previous.cy-y),"touch")}r.previous={cx:m,cy:y,distance:v}}}),ze(this,"contextmenu",function(){r.pointers=[]}),ze(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),ze(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=4*r.intensity,m=(c-s.clientX)*h,y=(d-s.clientY)*h;r.onzoom(h,m,y,"dblclick")}),this.intensity=n}return ht(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],d=[r.touches[1].clientX,r.touches[1].clientY],h=d[0],m=d[1],y=Math.sqrt(Math.pow(l-h,2)+Math.pow(c-m,2));return{cx:(l+h)/2,cy:(c+m)/2,distance:y}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),kb=(function(){function a(n,r,s){var l=this;ft(this,a),ze(this,"transform",{k:1,x:0,y:0}),ze(this,"pointer",{x:0,y:0}),ze(this,"zoomHandler",null),ze(this,"dragHandler",null),ze(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),ze(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),ze(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),ze(this,"resize",function(c){l.events.resize(c)}),ze(this,"onTranslate",function(c,d){var h;(h=l.zoomHandler)!==null&&h!==void 0&&h.isTranslating()||l.translate(c,d)}),ze(this,"onZoom",function(c,d,h,m){l.zoom(l.transform.k*(1+c),d,h,m),l.update()}),this.container=n,this.events=r,this.guards=s,this.content=new IE(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new Eb(.1)),this.setDragHandler(new Ah),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),n.appendChild(this.content.holder),this.update()}return ht(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,d=this.transform.k;this.pointer={x:l/d,y:c/d}}},{key:"translate",value:(function(){var n=rt(Se.mark(function s(l,c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return d={x:l,y:c},y.next=3,this.guards.translate({previous:this.transform,position:d});case 3:if(h=y.sent,h){y.next=6;break}return y.abrupt("return",!1);case 6:return this.transform.x=h.data.position.x,this.transform.y=h.data.position.y,this.update(),y.next=11,this.events.translated(h.data);case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var n=rt(Se.mark(function s(l){var c,d,h,m,y,v,b=arguments;return Se.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return c=b.length>1&&b[1]!==void 0?b[1]:0,d=b.length>2&&b[2]!==void 0?b[2]:0,h=b.length>3?b[3]:void 0,m=this.transform.k,k.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:h});case 6:if(y=k.sent,y){k.next=9;break}return k.abrupt("return",!0);case 9:return v=(m-y.data.zoom)/(m-l||1),this.transform.k=y.data.zoom||1,this.transform.x+=c*v,this.transform.y+=d*v,this.update(),k.next=16,this.events.zoomed(y.data);case 16:return k.abrupt("return",!1);case 17:case"end":return k.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function HE(a,n,r){return n=Ut(n),Ya(a,Cb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function Cb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cb=function(){return!!a})()}var Lo=(function(a){function n(){return ft(this,n),HE(this,n,arguments)}return Xn(n,a),ht(n)})(vs),VE=ht(function a(n){ft(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return n.contextmenu(r)})}),qE=(function(){function a(){ft(this,a),ze(this,"views",new WeakMap),ze(this,"viewsElements",new Map)}return ht(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function vv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function bv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?vv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Tb=(function(){function a(n,r,s){var l=this;ft(this,a),ze(this,"translate",(function(){var c=rt(Se.mark(function d(h,m){var y,v;return Se.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return y=bv({},l.position),x.next=3,l.guards.translate({previous:y,position:{x:h,y:m}});case 3:if(v=x.sent,v){x.next=6;break}return x.abrupt("return",!1);case 6:return l.position=bv({},v.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),x.next=10,l.events.translated({position:l.position,previous:y});case 10:return x.abrupt("return",!0);case 11:case"end":return x.stop()}},d)}));return function(d,h){return c.apply(this,arguments)}})()),ze(this,"resize",(function(){var c=rt(Se.mark(function d(h,m){var y,v;return Se.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return y={width:h,height:m},x.next=3,l.guards.resize({size:y});case 3:if(x.sent){x.next=5;break}return x.abrupt("return",!1);case 5:if(v=l.element.querySelector("*:not(span):not([fragment])"),!(!v||!(v instanceof HTMLElement))){x.next=8;break}return x.abrupt("return",!1);case 8:return v.style.width="".concat(h,"px"),v.style.height="".concat(m,"px"),x.next=12,l.events.resized({size:y});case 12:return x.abrupt("return",!0);case 13:case"end":return x.stop()}},d)}));return function(d,h){return c.apply(this,arguments)}})()),this.getZoom=n,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new Ah,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ht(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function Nb(a,n){return a.map(function(r){return{view:n.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,d=l.height;return typeof c<"u"&&typeof d<"u"?{position:s.position,width:c,height:d}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function GE(a,n){var r=a.parentScope(Kr),s=n.map(function(c){return An(c)==="object"?c:r.getNode(c)}),l=Nb(s,a.nodeViews);return xb(l)}function YE(a){var n=a;n.addPipe(function(r){if(!r||An(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=n.nodeViews.get(r.data.id),l=n.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=n.connectionViews.get(r.data.id),d=n.area.content;c&&d.reorder(c.element,d.holder.firstChild)}return r})}function wv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function fr(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?wv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function FE(a,n){var r=n!=null&&n.scaling?n.scaling===!0?{min:.1,max:1}:n.scaling:!1,s=n!=null&&n.translation?n.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:n.translation:!1;function l(d){if(!r)throw new Error("scaling param isnt defined");var h=typeof r=="function"?r():r,m=h.min,y=h.max;return d<m?m:d>y?y:d}function c(d){if(!s)throw new Error("translation param isnt defined");var h=fr({},d),m=typeof s=="function"?s():s,y=m.left,v=m.top,b=m.right,x=m.bottom;return h.x<y&&(h.x=y),h.x>b&&(h.x=b),h.y<v&&(h.y=v),h.y>x&&(h.y=x),h}a.addPipe(function(d){if(!d||An(d)!=="object"||!("type"in d))return d;if(r&&d.type==="zoom")return fr(fr({},d),{},{data:fr(fr({},d.data),{},{zoom:l(d.data.zoom)})});if(s&&d.type==="zoomed"){var h=c(a.area.transform);a.area.translate(h.x,h.y)}return s&&d.type==="translate"?fr(fr({},d),{},{data:fr(fr({},d.data),{},{position:c(d.data.position)})}):d})}function PE(){var a=!1;function n(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",n),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}}var Ob=(function(){function a(){ft(this,a),ze(this,"entities",new Map),ze(this,"pickId",null)}return ht(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var n=rt(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c){h.next=3;break}return h.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var n=rt(Se.mark(function s(l){var c,d;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c="".concat(l.label,"_").concat(l.id),d=this.entities.get(c),!d){m.next=6;break}return this.entities.delete(c),m.next=6,d.unselect();case 6:case"end":return m.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var n=rt(Se.mark(function s(){var l=this;return Se.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(bs(Array.from(this.entities.values())).map(function(h){return l.remove(h)}));case 2:case"end":return d.stop()}},s,this)}));function r(){return n.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var n=rt(Se.mark(function s(l,c){var d=this;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all(Array.from(this.entities.values()).map(function(y){return!d.isPicked(y)&&y.translate(l,c)}));case 2:case"end":return m.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function ZE(){return new Ob}function XE(a,n,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(Kr))},d=0;function h(k){k.selected||(k.selected=!0,l.update("node",k.id))}function m(k){k.selected&&(k.selected=!1,l.update("node",k.id))}function y(k,j){return v.apply(this,arguments)}function v(){return v=rt(Se.mark(function k(j,Z){var H;return Se.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(H=c().getNode(j),H){K.next=3;break}return K.abrupt("return");case 3:return K.next=5,n.add({label:"node",id:H.id,translate:function(G,de){return rt(Se.mark(function ge(){var Y,ce;return Se.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(Y=l.nodeViews.get(H.id),ce=Y?.position,!ce){pe.next=5;break}return pe.next=5,Y.translate(ce.x+G,ce.y+de);case 5:case"end":return pe.stop()}},ge)}))()},unselect:function(){m(H)}},Z);case 5:h(H);case 6:case"end":return K.stop()}},k)})),v.apply(this,arguments)}function b(k){return x.apply(this,arguments)}function x(){return x=rt(Se.mark(function k(j){return Se.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,n.remove({id:j,label:"node"});case 2:case"end":return H.stop()}},k)})),x.apply(this,arguments)}return l.addPipe((function(){var k=rt(Se.mark(function j(Z){var H,Q,K,L,G,de,ge,Y;return Se.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!(!Z||An(Z)!=="object"||!("type"in Z))){re.next=2;break}return re.abrupt("return",Z);case 2:if(Z.type!=="nodepicked"){re.next=11;break}return H=Z.data.id,Q=r.accumulating.active(),n.pick({id:H,label:"node"}),d=null,re.next=9,y(H,Q);case 9:re.next=33;break;case 11:if(Z.type!=="nodetranslated"){re.next=20;break}if(K=Z.data,L=K.id,G=K.position,de=K.previous,ge=G.x-de.x,Y=G.y-de.y,!n.isPicked({id:L,label:"node"})){re.next=18;break}return re.next=18,n.translate(ge,Y);case 18:re.next=33;break;case 20:if(Z.type!=="pointerdown"){re.next=24;break}d=0,re.next=33;break;case 24:if(Z.type!=="pointermove"){re.next=28;break}d!==null&&d++,re.next=33;break;case 28:if(Z.type!=="pointerup"){re.next=33;break}if(!(d!==null&&d<4)){re.next=32;break}return re.next=32,n.unselectAll();case 32:d=null;case 33:return re.abrupt("return",Z);case 34:case"end":return re.stop()}},j)}));return function(j){return k.apply(this,arguments)}})()),{select:y,unselect:b}}function KE(a,n){var r=null,s=function(){return r||(r=a.parentScope(Kr))};function l(c,d){var h=s().getNode(c);if(h){var m=h.inputs[d];if(!m)throw new Error("cannot find input");var y=m.showControl,v=s().getConnections(),b=!!v.find(function(x){return x.target===c&&x.targetInput===d});m.showControl=n?n({hasAnyConnection:b,input:m}):!b,m.showControl!==y&&a.update("node",h.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function Sv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function tc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Sv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function QE(a,n){var r=a,s=typeof n?.size>"u"?16:n.size,l=typeof n?.dynamic>"u"?!0:n.dynamic;function c(d){return Math.round(d/s)*s}r.addPipe(function(d){if(!d||An(d)!=="object"||!("type"in d))return d;if(l&&d.type==="nodetranslate"){var h=d.data.position,m=c(h.x),y=c(h.y);return tc(tc({},d),{},{data:tc(tc({},d.data),{},{position:{x:m,y}})})}if(!l&&d.type==="nodedragged"){var v=r.nodeViews.get(d.data.id);if(v){var b=v.position,x=b.x,k=b.y;v.translate(c(x),c(k))}}return d})}function JE(a,n,r){return Yf.apply(this,arguments)}function Yf(){return Yf=rt(Se.mark(function a(n,r,s){var l,c,d,h,m,y,v,b,x,k,j,Z,H;return Se.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return l=s||{},c=l.scale,d=c===void 0?.9:c,h=n.parentScope(Kr),m=r.map(function(L){return An(L)==="object"?L:h.getNode(L)}),y=Nb(m,n.nodeViews),v=xb(y),b=[n.container.clientWidth,n.container.clientHeight],x=b[0],k=b[1],j=x/v.width,Z=k/v.height,H=Math.min(Z*d,j*d,1),n.area.transform.x=x/2-v.center.x*H,n.area.transform.y=k/2-v.center.y*H,K.next=12,n.area.zoom(H,0,0);case 12:case"end":return K.stop()}},a)})),Yf.apply(this,arguments)}var Vr=Object.freeze({__proto__:null,getBoundingBox:GE,simpleNodesOrder:YE,restrictor:FE,accumulateOnCtrl:PE,selectableNodes:XE,Selector:Ob,selector:ZE,showInputControl:KE,snapGrid:QE,zoomAt:JE});function xv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Ev(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?xv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function WE(a,n,r){return n=Ut(n),Ya(a,jb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function jb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jb=function(){return!!a})()}var Ab=(function(a){function n(r){var s;return ft(this,n),s=WE(this,n,["area"]),ze(s,"nodeViews",new Map),ze(s,"connectionViews",new Map),ze(s,"elements",new qE),ze(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!(An(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new kb(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,d){return void s.emit({type:"pointerdown",data:{position:c,event:d}})},pointerMove:function(c,d){return void s.emit({type:"pointermove",data:{position:c,event:d}})},pointerUp:function(c,d){return void s.emit({type:"pointerup",data:{position:c,event:d}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return Xn(n,a),ht(n,[{key:"addNodeView",value:function(s){var l=this,c=s.id,d=new Tb(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(m){return l.emit({type:"nodetranslated",data:Ev({id:c},m)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(m){return void l.emit({type:"contextmenu",data:{event:m,context:s}})},resized:function(m){var y=m.size;return l.emit({type:"noderesized",data:{id:s.id,size:y}})}},{translate:function(m){return l.emit({type:"nodetranslate",data:Ev({id:c},m)})},resize:function(m){var y=m.size;return l.emit({type:"noderesize",data:{id:s.id,size:y}})}});return this.nodeViews.set(c,d),this.area.content.add(d.element),this.emit({type:"render",data:{element:d.element,type:"node",payload:s}}),d}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new VE({contextmenu:function(h){return void l.emit({type:"contextmenu",data:{event:h,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=rt(Se.mark(function l(c,d){var h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(h=this.elements.get(c,d),!h){y.next=4;break}return y.next=4,this.emit({type:"render",data:h});case 4:case"end":return y.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=rt(Se.mark(function l(c,d,h){var m;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(m=this.nodeViews.get(c),!m){v.next=5;break}return v.next=4,m.resize(d,h);case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}},l,this)}));function s(l,c,d){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=rt(Se.mark(function l(c,d){var h,m,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h=d.x,m=d.y,y=this.nodeViews.get(c),!y){b.next=6;break}return b.next=5,y.translate(h,m);case 5:return b.abrupt("return",b.sent);case 6:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(Lo);const kv=Object.freeze(Object.defineProperty({__proto__:null,Area:kb,AreaExtensions:Vr,AreaPlugin:Ab,BaseAreaPlugin:Lo,Drag:Ah,NodeView:Tb,Zoom:Eb,usePointerListener:Sb},Symbol.toStringTag,{value:"Module"}));function ek(a,n){for(;!{}.hasOwnProperty.call(a,n)&&(a=Ut(a))!==null;);return a}function Ro(){return Ro=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,n,r){var s=ek(a,n);if(s){var l=Object.getOwnPropertyDescriptor(s,n);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Ro.apply(null,arguments)}function tk(a){if(Array.isArray(a))return a}function nk(a,n){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,d,h=[],m=!0,y=!1;try{if(c=(r=r.call(a)).next,n!==0)for(;!(m=(s=c.call(r)).done)&&(h.push(s.value),h.length!==n);m=!0);}catch(v){y=!0,l=v}finally{try{if(!m&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(y)throw l}}return h}}function ak(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $n(a,n){return tk(a)||nk(a,n)||wb(a,n)||ak()}function Cv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function xf(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Cv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function rk(a){var n=null,r=null;function s(c){r&&c.removeConnectionView(r),n=null,r=null}function l(c){s(c),r="pseudo_".concat(Qr())}return{isMounted:function(){return!!r},mount:l,render:function(d,h,m){var y=h.x,v=h.y,b=m.side==="output",x={x:y+(b?-3:3),y:v};if(!r)throw new Error("pseudo connection id wasn't generated");var k=b?xf({id:r,source:m.nodeId,sourceOutput:m.key,target:"",targetInput:""},a??{}):xf({id:r,target:m.nodeId,targetInput:m.key,source:"",sourceOutput:""},a??{});if(!n){var j=d.addConnectionView(k);n=j.element}n&&d.emit({type:"render",data:xf({element:n,type:"connection",payload:k},b?{end:x}:{start:x})})},unmount:s}}function ik(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=sk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function sk(a,n){if(a){if(typeof a=="string")return Tv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tv(a,n):void 0}}function Tv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function ok(a,n){var r=ik(n),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(d){r.e(d)}finally{r.f()}}function _b(a,n){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,n),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,bs(_b(a,n,c))),l}var _h=(function(){function a(){ft(this,a)}return ht(a,[{key:"setContext",value:function(r){this.context=r}}])})();function Db(a,n){var r=a.side==="output"&&n.side==="input",s=a.side==="input"&&n.side==="output",l=r?[a,n]:s?[n,a]:[],c=$n(l,2),d=c[0],h=c[1];if(d&&h)return[d,h]}function lk(a,n){return!!Db(a,n)}function ck(a,n,r){var s=Db(a,n)||[null,null],l=$n(s,2),c=l[0],d=l[1];if(c&&d)return r.editor.addConnection({id:Qr(),source:c.nodeId,sourceOutput:c.key,target:d.nodeId,targetInput:d.key}),!0}function uk(a,n){var r=n.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function dk(a,n){var r=a.nodeId,s=a.side,l=a.key;return n.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Ff(a,n){var r=a.map(function(s){var l=uk(s,n),c=l?.multipleConnections;return c?[]:dk(s,n)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var d=c.id;return d})));l.forEach(function(c){return void n.removeConnection(c)})}}}function Dh(a,n,r){return n=Ut(n),Ya(a,Rb()?Reflect.construct(n,[],Ut(a).constructor):n.apply(a,r))}function Rb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rb=function(){return!!a})()}var fk=(function(a){function n(r,s){var l;return ft(this,n),l=Dh(this,n),l.initial=r,l.params=s,l}return Xn(n,a),ht(n,[{key:"pick",value:(function(){var r=rt(Se.mark(function l(c,d){var h,m;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:h=c.socket,this.params.canMakeConnection(this.initial,h)&&(Ff([this.initial,h],d.editor).commit(),m=this.params.makeConnection(this.initial,h,d),this.drop(d,m?h:null,m));case 2:case"end":return v.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Rh(this.params))}}])})(_h),hk=(function(a){function n(r,s,l){var c;ft(this,n),c=Dh(this,n),c.connection=r,c.params=s;var d=Array.from(l.socketsCache.values()).find(function(h){return h.nodeId===c.connection.source&&h.side==="output"&&h.key===c.connection.sourceOutput});if(!d)throw new Error("cannot find output socket");return c.outputSocket=d,c}return Xn(n,a),ht(n,[{key:"init",value:(function(){var r=rt(Se.mark(function l(c){var d=this;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(y){y?(c.editor.removeConnection(d.connection.id),d.initial=d.outputSocket):d.drop(c)});case 1:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=rt(Se.mark(function l(c,d){var h,m,y,v,b,x;return Se.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:h=c.socket,m=c.event,this.initial&&!(h.side==="input"&&this.connection.target===h.nodeId&&this.connection.targetInput===h.key)?this.params.canMakeConnection(this.initial,h)&&(Ff([this.initial,h],d.editor).commit(),y=this.params.makeConnection(this.initial,h,d),v=y?h:null,this.drop(d,v,y)):m==="down"&&this.initial&&(Ff([this.initial,h],d.editor).commit(),b=this.params.makeConnection(this.initial,h,d),x=b?null:h,this.drop(d,x,b));case 2:case"end":return j.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Rh(this.params))}}])})(_h),Rh=(function(a){function n(r){var s;return ft(this,n),s=Dh(this,n),s.params=r,s}return Xn(n,a),ht(n,[{key:"pick",value:(function(){var r=rt(Se.mark(function l(c,d){var h,m,y,v;return Se.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(h=c.socket,m=c.event,m==="down"){x.next=3;break}return x.abrupt("return");case 3:if(h.side!=="input"){x.next=11;break}if(y=d.editor.getConnections().find(function(k){return k.target===h.nodeId&&k.targetInput===h.key}),!y){x.next=11;break}return v=new hk(y,this.params,d),x.next=9,v.init(d);case 9:return this.context.switchTo(v),x.abrupt("return");case 11:return x.next=13,d.scope.emit({type:"connectionpick",data:{socket:h}});case 13:if(!x.sent){x.next=17;break}this.context.switchTo(new fk(h,this.params)),x.next=18;break;case 17:this.drop(d);case 18:case"end":return x.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(_h),pk=(function(){function a(n){ft(this,a);var r=n?.canMakeConnection||lk,s=n?.makeConnection||ck;this.switchTo(new Rh({canMakeConnection:r,makeConnection:s}))}return ht(a,[{key:"pick",value:(function(){var n=rt(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.currentState.pick(l,c);case 2:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function mk(){return function(){return new pk}}var yk=Object.freeze({__proto__:null,setup:mk}),gk=Object.freeze({__proto__:null,classic:yk});function vk(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=bk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function bk(a,n){if(a){if(typeof a=="string")return Nv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nv(a,n):void 0}}function Nv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function wk(a,n,r){return n=Ut(n),Ya(a,Mb()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function Mb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mb=function(){return!!a})()}function Sk(a,n,r,s){var l=Ro(Ut(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var xk=(function(a){function n(){var r;return ft(this,n),r=wk(this,n,["connection"]),ze(r,"presets",[]),ze(r,"currentFlow",null),ze(r,"preudoconnection",rk({isPseudo:!0})),ze(r,"socketsCache",new Map),r}return Xn(n,a),ht(n,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=vk(this.presets),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,h=d(s);if(h)return h}}catch(m){l.e(m)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=rt(Se.mark(function l(c,d){var h,m,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h={editor:this.editor,scope:this,socketsCache:this.socketsCache},m=_b(c.clientX,c.clientY),y=ok(this.socketsCache,m),!y){b.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(y),!this.currentFlow){b.next=11;break}return b.next=10,this.currentFlow.pick({socket:y,event:d},h);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:b.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(h);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;Sk(n,"setParent",this)([s]),this.areaPlugin=this.parentScope(Lo),this.editor=this.areaPlugin.parentScope(Kr);var c=function(h){l.pick(h,"down")};this.addPipe(function(d){if(!d||An(d)!=="object"||!("type"in d))return d;if(d.type==="pointermove")l.update();else if(d.type==="pointerup")l.pick(d.data.event,"up");else if(d.type==="render"){if(d.data.type==="socket"){var h=d.data.element;h.addEventListener("pointerdown",c),l.socketsCache.set(h,d.data)}}else if(d.type==="unmount"){var m=d.data.element;m.removeEventListener("pointerdown",c),l.socketsCache.delete(m)}return d})}}])})(vs);function Ek(a,n){var r=$n(a,2),s=r[0],l=s.x,c=s.y,d=r[1],h=d.x,m=d.y,y=Math.abs(c-m),v=l+Math.max(y/2,Math.abs(h-l))*n,b=h-Math.max(y/2,Math.abs(h-l))*n;return"M ".concat(l," ").concat(c," C ").concat(v," ").concat(c," ").concat(b," ").concat(m," ").concat(h," ").concat(m)}function kk(a,n,r){var s=$n(a,2),l=s[0],c=l.x,d=l.y,h=s[1],m=h.x,y=h.y,v=y>d?1:-1,b=r+Math.abs(c-m)/(r/2),x=(c+m)/2,k=d-v*b,j=(y-d)*n;return`
        M `.concat(c," ").concat(d,`
        C `).concat(c+b," ").concat(d,`
        `).concat(c+b," ").concat(k-j,`
        `).concat(x," ").concat(k,`
        C `).concat(m-b," ").concat(k+j,`
        `).concat(m-b," ").concat(y,`
        `).concat(m," ").concat(y,`
    `)}function Ck(a,n){return Pf.apply(this,arguments)}function Pf(){return Pf=rt(Se.mark(function a(n,r){var s,l,c,d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(n.offsetParent){y.next=5;break}return y.next=3,new Promise(function(v){return setTimeout(v,0)});case 3:y.next=0;break;case 5:if(s=n.offsetLeft,l=n.offsetTop,c=n.offsetParent,c){y.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return d=n.offsetWidth,h=n.offsetHeight,y.abrupt("return",{x:s+d/2,y:l+h/2});case 14:case"end":return y.stop()}},a)})),Pf.apply(this,arguments)}var Tk=(function(){function a(){ft(this,a),ze(this,"listeners",new Set)}return ht(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),Nk=(function(){function a(){ft(this,a),ze(this,"elements",new Map)}return ht(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),d=c.filter(function(h){return h.side===r.side&&h.nodeId===r.nodeId&&h.key===r.key});return d.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=d.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(bs(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),Ok=(function(){function a(){ft(this,a),ze(this,"sockets",new Nk),ze(this,"emitter",new Tk),ze(this,"area",null)}return ht(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(Lo),this.area.addPipe((function(){var l=rt(Se.mark(function c(d){var h,m,y,v,b,x,k,j,Z,H,Q;return Se.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!(d.type==="rendered"&&d.data.type==="socket")){L.next=8;break}return h=d.data,m=h.nodeId,y=h.key,v=h.side,b=h.element,L.next=4,s.calculatePosition(m,v,y,b);case 4:x=L.sent,x&&(s.sockets.add({nodeId:m,key:y,side:v,element:b,position:x}),s.emitter.emit({nodeId:m,key:y,side:v})),L.next=24;break;case 8:if(d.type!=="unmount"){L.next=12;break}s.sockets.remove(d.data.element),L.next=24;break;case 12:if(d.type!=="nodetranslated"){L.next=16;break}s.emitter.emit({nodeId:d.data.id}),L.next=24;break;case 16:if(d.type!=="noderesized"){L.next=23;break}return k=d.data.id,L.next=20,Promise.all(s.sockets.snapshot().filter(function(G){return G.nodeId===d.data.id&&G.side==="output"}).map((function(){var G=rt(Se.mark(function de(ge){var Y,ce,re,pe;return Se.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Y=ge.side,ce=ge.key,re=ge.element,Ae.next=3,s.calculatePosition(k,Y,ce,re);case 3:pe=Ae.sent,pe&&(ge.position=pe);case 5:case"end":return Ae.stop()}},de)}));return function(de){return G.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:k}),L.next=24;break;case 23:d.type==="render"&&d.data.type==="connection"&&(j=d.data.payload,Z=j.source,H=j.target,Q=Z||H,s.emitter.emit({nodeId:Q}));case 24:return L.abrupt("return",d);case 25:case"end":return L.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var d=this,h=this.emitter.listen(function(m){if(m.nodeId===r&&(!m.key||m.side===s)&&(!m.side||m.key===l)){var y,v=d.sockets.getPosition({side:s,nodeId:r,key:l});if(!v)return;var b=v.x,x=v.y,k=(y=d.area)===null||y===void 0?void 0:y.nodeViews.get(r);k&&c({x:b+k.position.x,y:x+k.position.y})}});return this.sockets.snapshot().forEach(function(m){m.nodeId===r&&d.emitter.emit(m)}),h}}])})();function jk(a,n,r){return n=Ut(n),Ya(a,zb()?Reflect.construct(n,[],Ut(a).constructor):n.apply(a,r))}function zb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zb=function(){return!!a})()}var Ak=(function(a){function n(r){var s;return ft(this,n),s=jk(this,n),s.props=r,s}return Xn(n,a),ht(n,[{key:"calculatePosition",value:(function(){var r=rt(Se.mark(function l(c,d,h,m){var y,v,b,x;return Se.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(b=(y=this.area)===null||y===void 0?void 0:y.nodeViews.get(c),b!=null&&b.element){j.next=3;break}return j.abrupt("return",null);case 3:return j.next=5,Ck(m,b.element);case 5:if(x=j.sent,!((v=this.props)!==null&&v!==void 0&&v.offset)){j.next=8;break}return j.abrupt("return",this.props.offset(x,c,d,h));case 8:return j.abrupt("return",{x:x.x+12*(d==="input"?-1:1),y:x.y});case 9:case"end":return j.stop()}},l,this)}));function s(l,c,d,h){return r.apply(this,arguments)}return s})()}])})(Ok);function _k(a){return new Ak(a)}function _n(a,n){return n||(n=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(n)}}))}var Zn=function(){return Zn=Object.assign||function(n){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(n[c]=r[c])}return n},Zn.apply(this,arguments)};function Nc(a,n,r){if(r||arguments.length===2)for(var s=0,l=n.length,c;s<l;s++)(c||!(s in n))&&(c||(c=Array.prototype.slice.call(n,0,s)),c[s]=n[s]);return a.concat(c||Array.prototype.slice.call(n))}var Vt="-ms-",Oo="-moz-",Ct="-webkit-",Lb="comm",Bc="rule",Mh="decl",Dk="@import",Bb="@keyframes",Rk="@layer",Ub=Math.abs,zh=String.fromCharCode,Zf=Object.assign;function Mk(a,n){return kn(a,0)^45?(((n<<2^kn(a,0))<<2^kn(a,1))<<2^kn(a,2))<<2^kn(a,3):0}function Ib(a){return a.trim()}function pr(a,n){return(a=n.exec(a))?a[0]:a}function at(a,n,r){return a.replace(n,r)}function mc(a,n,r){return a.indexOf(n,r)}function kn(a,n){return a.charCodeAt(n)|0}function fs(a,n,r){return a.slice(n,r)}function Ia(a){return a.length}function $b(a){return a.length}function xo(a,n){return n.push(a),a}function zk(a,n){return a.map(n).join("")}function Ov(a,n){return a.filter(function(r){return!pr(r,n)})}var Uc=1,hs=1,Hb=0,ba=0,hn=0,ws="";function Ic(a,n,r,s,l,c,d,h){return{value:a,root:n,parent:r,type:s,props:l,children:c,line:Uc,column:hs,length:d,return:"",siblings:h}}function qr(a,n){return Zf(Ic("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},n)}function ns(a){for(;a.root;)a=qr(a.root,{children:[a]});xo(a,a.siblings)}function Lk(){return hn}function Bk(){return hn=ba>0?kn(ws,--ba):0,hs--,hn===10&&(hs=1,Uc--),hn}function _a(){return hn=ba<Hb?kn(ws,ba++):0,hs++,hn===10&&(hs=1,Uc++),hn}function bi(){return kn(ws,ba)}function yc(){return ba}function $c(a,n){return fs(ws,a,n)}function Xf(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Uk(a){return Uc=hs=1,Hb=Ia(ws=a),ba=0,[]}function Ik(a){return ws="",a}function Ef(a){return Ib($c(ba-1,Kf(a===91?a+2:a===40?a+1:a)))}function $k(a){for(;(hn=bi())&&hn<33;)_a();return Xf(a)>2||Xf(hn)>3?"":" "}function Hk(a,n){for(;--n&&_a()&&!(hn<48||hn>102||hn>57&&hn<65||hn>70&&hn<97););return $c(a,yc()+(n<6&&bi()==32&&_a()==32))}function Kf(a){for(;_a();)switch(hn){case a:return ba;case 34:case 39:a!==34&&a!==39&&Kf(hn);break;case 40:a===41&&Kf(a);break;case 92:_a();break}return ba}function Vk(a,n){for(;_a()&&a+hn!==57;)if(a+hn===84&&bi()===47)break;return"/*"+$c(n,ba-1)+"*"+zh(a===47?a:_a())}function qk(a){for(;!Xf(bi());)_a();return $c(a,ba)}function Gk(a){return Ik(gc("",null,null,null,[""],a=Uk(a),0,[0],a))}function gc(a,n,r,s,l,c,d,h,m){for(var y=0,v=0,b=d,x=0,k=0,j=0,Z=1,H=1,Q=1,K=0,L="",G=l,de=c,ge=s,Y=L;H;)switch(j=K,K=_a()){case 40:if(j!=108&&kn(Y,b-1)==58){mc(Y+=at(Ef(K),"&","&\f"),"&\f",Ub(y?h[y-1]:0))!=-1&&(Q=-1);break}case 34:case 39:case 91:Y+=Ef(K);break;case 9:case 10:case 13:case 32:Y+=$k(j);break;case 92:Y+=Hk(yc()-1,7);continue;case 47:switch(bi()){case 42:case 47:xo(Yk(Vk(_a(),yc()),n,r,m),m);break;default:Y+="/"}break;case 123*Z:h[y++]=Ia(Y)*Q;case 125*Z:case 59:case 0:switch(K){case 0:case 125:H=0;case 59+v:Q==-1&&(Y=at(Y,/\f/g,"")),k>0&&Ia(Y)-b&&xo(k>32?Av(Y+";",s,r,b-1,m):Av(at(Y," ","")+";",s,r,b-2,m),m);break;case 59:Y+=";";default:if(xo(ge=jv(Y,n,r,y,v,l,h,L,G=[],de=[],b,c),c),K===123)if(v===0)gc(Y,n,ge,ge,G,c,b,h,de);else switch(x===99&&kn(Y,3)===110?100:x){case 100:case 108:case 109:case 115:gc(a,ge,ge,s&&xo(jv(a,ge,ge,0,0,l,h,L,l,G=[],b,de),de),l,de,b,h,s?G:de);break;default:gc(Y,ge,ge,ge,[""],de,0,h,de)}}y=v=k=0,Z=Q=1,L=Y="",b=d;break;case 58:b=1+Ia(Y),k=j;default:if(Z<1){if(K==123)--Z;else if(K==125&&Z++==0&&Bk()==125)continue}switch(Y+=zh(K),K*Z){case 38:Q=v>0?1:(Y+="\f",-1);break;case 44:h[y++]=(Ia(Y)-1)*Q,Q=1;break;case 64:bi()===45&&(Y+=Ef(_a())),x=bi(),v=b=Ia(L=Y+=qk(yc())),K++;break;case 45:j===45&&Ia(Y)==2&&(Z=0)}}return c}function jv(a,n,r,s,l,c,d,h,m,y,v,b){for(var x=l-1,k=l===0?c:[""],j=$b(k),Z=0,H=0,Q=0;Z<s;++Z)for(var K=0,L=fs(a,x+1,x=Ub(H=d[Z])),G=a;K<j;++K)(G=Ib(H>0?k[K]+" "+L:at(L,/&\f/g,k[K])))&&(m[Q++]=G);return Ic(a,n,r,l===0?Bc:h,m,y,v,b)}function Yk(a,n,r,s){return Ic(a,n,r,Lb,zh(Lk()),fs(a,2,-2),0,s)}function Av(a,n,r,s,l){return Ic(a,n,r,Mh,fs(a,0,s),fs(a,s+1,-1),s,l)}function Vb(a,n,r){switch(Mk(a,n)){case 5103:return Ct+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+a+a;case 4789:return Oo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+a+Oo+a+Vt+a+a;case 5936:switch(kn(a,n+11)){case 114:return Ct+a+Vt+at(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Ct+a+Vt+at(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Ct+a+Vt+at(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return Ct+a+Vt+a+a;case 6165:return Ct+a+Vt+"flex-"+a+a;case 5187:return Ct+a+at(a,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+Vt+"flex-$1$2")+a;case 5443:return Ct+a+Vt+"flex-item-"+at(a,/flex-|-self/g,"")+(pr(a,/flex-|baseline/)?"":Vt+"grid-row-"+at(a,/flex-|-self/g,""))+a;case 4675:return Ct+a+Vt+"flex-line-pack"+at(a,/align-content|flex-|-self/g,"")+a;case 5548:return Ct+a+Vt+at(a,"shrink","negative")+a;case 5292:return Ct+a+Vt+at(a,"basis","preferred-size")+a;case 6060:return Ct+"box-"+at(a,"-grow","")+Ct+a+Vt+at(a,"grow","positive")+a;case 4554:return Ct+at(a,/([^-])(transform)/g,"$1"+Ct+"$2")+a;case 6187:return at(at(at(a,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),a,"")+a;case 5495:case 3959:return at(a,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return at(at(a,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+Vt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+a+a;case 4200:if(!pr(a,/flex-|baseline/))return Vt+"grid-column-align"+fs(a,n)+a;break;case 2592:case 3360:return Vt+at(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return n=l,pr(s.props,/grid-\w+-end/)})?~mc(a+(r=r[n].value),"span",0)?a:Vt+at(a,"-start","")+a+Vt+"grid-row-span:"+(~mc(r,"span",0)?pr(r,/\d+/):+pr(r,/\d+/)-+pr(a,/\d+/))+";":Vt+at(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return pr(s.props,/grid-\w+-start/)})?a:Vt+at(at(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return at(a,/(.+)-inline(.+)/,Ct+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ia(a)-1-n>6)switch(kn(a,n+1)){case 109:if(kn(a,n+4)!==45)break;case 102:return at(a,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+Oo+(kn(a,n+3)==108?"$3":"$2-$3"))+a;case 115:return~mc(a,"stretch",0)?Vb(at(a,"stretch","fill-available"),n,r)+a:a}break;case 5152:case 5920:return at(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,d,h,m,y){return Vt+l+":"+c+y+(d?Vt+l+"-span:"+(h?m:+m-+c)+y:"")+a});case 4949:if(kn(a,n+6)===121)return at(a,":",":"+Ct)+a;break;case 6444:switch(kn(a,kn(a,14)===45?18:11)){case 120:return at(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ct+(kn(a,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+Vt+"$2box$3")+a;case 100:return at(a,":",":"+Vt)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return at(a,"scroll-","scroll-snap-")+a}return a}function Oc(a,n){for(var r="",s=0;s<a.length;s++)r+=n(a[s],s,a,n)||"";return r}function Fk(a,n,r,s){switch(a.type){case Rk:if(a.children.length)break;case Dk:case Mh:return a.return=a.return||a.value;case Lb:return"";case Bb:return a.return=a.value+"{"+Oc(a.children,s)+"}";case Bc:if(!Ia(a.value=a.props.join(",")))return""}return Ia(r=Oc(a.children,s))?a.return=a.value+"{"+r+"}":""}function Pk(a){var n=$b(a);return function(r,s,l,c){for(var d="",h=0;h<n;h++)d+=a[h](r,s,l,c)||"";return d}}function Zk(a){return function(n){n.root||(n=n.return)&&a(n)}}function Xk(a,n,r,s){if(a.length>-1&&!a.return)switch(a.type){case Mh:a.return=Vb(a.value,a.length,r);return;case Bb:return Oc([qr(a,{value:at(a.value,"@","@"+Ct)})],s);case Bc:if(a.length)return zk(r=a.props,function(l){switch(pr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ns(qr(a,{props:[at(l,/:(read-\w+)/,":"+Oo+"$1")]})),ns(qr(a,{props:[l]})),Zf(a,{props:Ov(r,s)});break;case"::placeholder":ns(qr(a,{props:[at(l,/:(plac\w+)/,":"+Ct+"input-$1")]})),ns(qr(a,{props:[at(l,/:(plac\w+)/,":"+Oo+"$1")]})),ns(qr(a,{props:[at(l,/:(plac\w+)/,Vt+"input-$1")]})),ns(qr(a,{props:[l]})),Zf(a,{props:Ov(r,s)});break}return""})}}var Kk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},aa={},ps=typeof process<"u"&&aa!==void 0&&(aa.REACT_APP_SC_ATTR||aa.SC_ATTR)||"data-styled",qb="active",Gb="data-styled-version",Hc="6.1.19",Lh=`/*!sc*/
`,jc=typeof window<"u"&&typeof document<"u",Qk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&aa!==void 0&&aa.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&aa.REACT_APP_SC_DISABLE_SPEEDY!==""?aa.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&aa.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&aa!==void 0&&aa.SC_DISABLE_SPEEDY!==void 0&&aa.SC_DISABLE_SPEEDY!==""&&aa.SC_DISABLE_SPEEDY!=="false"&&aa.SC_DISABLE_SPEEDY),Vc=Object.freeze([]),ms=Object.freeze({});function Jk(a,n,r){return r===void 0&&(r=ms),a.theme!==r.theme&&a.theme||n||r.theme}var Yb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Wk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,e2=/(^-|-$)/g;function _v(a){return a.replace(Wk,"-").replace(e2,"")}var t2=/(a)(d)/gi,nc=52,Dv=function(a){return String.fromCharCode(a+(a>25?39:97))};function Qf(a){var n,r="";for(n=Math.abs(a);n>nc;n=n/nc|0)r=Dv(n%nc)+r;return(Dv(n%nc)+r).replace(t2,"$1-$2")}var kf,Fb=5381,os=function(a,n){for(var r=n.length;r;)a=33*a^n.charCodeAt(--r);return a},Pb=function(a){return os(Fb,a)};function n2(a){return Qf(Pb(a)>>>0)}function a2(a){return a.displayName||a.name||"Component"}function Cf(a){return typeof a=="string"&&!0}var Zb=typeof Symbol=="function"&&Symbol.for,Xb=Zb?Symbol.for("react.memo"):60115,r2=Zb?Symbol.for("react.forward_ref"):60112,i2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s2={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Kb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o2=((kf={})[r2]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kf[Xb]=Kb,kf);function Rv(a){return("type"in(n=a)&&n.type.$$typeof)===Xb?Kb:"$$typeof"in a?o2[a.$$typeof]:i2;var n}var l2=Object.defineProperty,c2=Object.getOwnPropertyNames,Mv=Object.getOwnPropertySymbols,u2=Object.getOwnPropertyDescriptor,d2=Object.getPrototypeOf,zv=Object.prototype;function Qb(a,n,r){if(typeof n!="string"){if(zv){var s=d2(n);s&&s!==zv&&Qb(a,s,r)}var l=c2(n);Mv&&(l=l.concat(Mv(n)));for(var c=Rv(a),d=Rv(n),h=0;h<l.length;++h){var m=l[h];if(!(m in s2||r&&r[m]||d&&m in d||c&&m in c)){var y=u2(n,m);try{l2(a,m,y)}catch{}}}}return a}function ys(a){return typeof a=="function"}function Bh(a){return typeof a=="object"&&"styledComponentId"in a}function yi(a,n){return a&&n?"".concat(a," ").concat(n):a||n||""}function Lv(a,n){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Mo(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function Jf(a,n,r){if(r===void 0&&(r=!1),!r&&!Mo(a)&&!Array.isArray(a))return n;if(Array.isArray(n))for(var s=0;s<n.length;s++)a[s]=Jf(a[s],n[s]);else if(Mo(n))for(var s in n)a[s]=Jf(a[s],n[s]);return a}function Uh(a,n){Object.defineProperty(a,"toString",{value:n})}function Bo(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var f2=(function(){function a(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return a.prototype.indexOfGroup=function(n){for(var r=0,s=0;s<n;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;n>=c;)if((c<<=1)<0)throw Bo(16,"".concat(n));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var d=l;d<c;d++)this.groupSizes[d]=0}for(var h=this.indexOfGroup(n+1),m=(d=0,r.length);d<m;d++)this.tag.insertRule(h,r[d])&&(this.groupSizes[n]++,h++)},a.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],s=this.indexOfGroup(n),l=s+r;this.groupSizes[n]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var s=this.groupSizes[n],l=this.indexOfGroup(n),c=l+s,d=l;d<c;d++)r+="".concat(this.tag.getRule(d)).concat(Lh);return r},a})(),vc=new Map,Ac=new Map,bc=1,ac=function(a){if(vc.has(a))return vc.get(a);for(;Ac.has(bc);)bc++;var n=bc++;return vc.set(a,n),Ac.set(n,a),n},h2=function(a,n){bc=n+1,vc.set(a,n),Ac.set(n,a)},p2="style[".concat(ps,"][").concat(Gb,'="').concat(Hc,'"]'),m2=new RegExp("^".concat(ps,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),y2=function(a,n,r){for(var s,l=r.split(","),c=0,d=l.length;c<d;c++)(s=l[c])&&a.registerName(n,s)},g2=function(a,n){for(var r,s=((r=n.textContent)!==null&&r!==void 0?r:"").split(Lh),l=[],c=0,d=s.length;c<d;c++){var h=s[c].trim();if(h){var m=h.match(m2);if(m){var y=0|parseInt(m[1],10),v=m[2];y!==0&&(h2(v,y),y2(a,v,m[3]),a.getTag().insertRules(y,l)),l.length=0}else l.push(h)}}},Bv=function(a){for(var n=document.querySelectorAll(p2),r=0,s=n.length;r<s;r++){var l=n[r];l&&l.getAttribute(ps)!==qb&&(g2(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function v2(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Jb=function(a){var n=document.head,r=a||n,s=document.createElement("style"),l=(function(h){var m=Array.from(h.querySelectorAll("style[".concat(ps,"]")));return m[m.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(ps,qb),s.setAttribute(Gb,Hc);var d=v2();return d&&s.setAttribute("nonce",d),r.insertBefore(s,c),s},b2=(function(){function a(n){this.element=Jb(n),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var d=s[l];if(d.ownerNode===r)return d}throw Bo(17)})(this.element),this.length=0}return a.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},a.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},a})(),w2=(function(){function a(n){this.element=Jb(n),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[n]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},a.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},a})(),S2=(function(){function a(n){this.rules=[],this.length=0}return a.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},a.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},a.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},a})(),Uv=jc,x2={isServer:!jc,useCSSOMInjection:!Qk},Wb=(function(){function a(n,r,s){n===void 0&&(n=ms),r===void 0&&(r={});var l=this;this.options=Zn(Zn({},x2),n),this.gs=r,this.names=new Map(s),this.server=!!n.isServer,!this.server&&jc&&Uv&&(Uv=!1,Bv(this)),Uh(this,function(){return(function(c){for(var d=c.getTag(),h=d.length,m="",y=function(b){var x=(function(Q){return Ac.get(Q)})(b);if(x===void 0)return"continue";var k=c.names.get(x),j=d.getGroup(b);if(k===void 0||!k.size||j.length===0)return"continue";var Z="".concat(ps,".g").concat(b,'[id="').concat(x,'"]'),H="";k!==void 0&&k.forEach(function(Q){Q.length>0&&(H+="".concat(Q,","))}),m+="".concat(j).concat(Z,'{content:"').concat(H,'"}').concat(Lh)},v=0;v<h;v++)y(v);return m})(l)})}return a.registerId=function(n){return ac(n)},a.prototype.rehydrate=function(){!this.server&&jc&&Bv(this)},a.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new a(Zn(Zn({},this.options),n),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(n=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new S2(l):s?new b2(l):new w2(l)})(this.options),new f2(n)));var n},a.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},a.prototype.registerName=function(n,r){if(ac(n),this.names.has(n))this.names.get(n).add(r);else{var s=new Set;s.add(r),this.names.set(n,s)}},a.prototype.insertRules=function(n,r,s){this.registerName(n,r),this.getTag().insertRules(ac(n),s)},a.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},a.prototype.clearRules=function(n){this.getTag().clearGroup(ac(n)),this.clearNames(n)},a.prototype.clearTag=function(){this.tag=void 0},a})(),E2=/&/g,k2=/^\s*\/\/.*$/gm;function e1(a,n){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(s){return"".concat(n," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=e1(r.children,n)),r})}function C2(a){var n,r,s,l=ms,c=l.options,d=c===void 0?ms:c,h=l.plugins,m=h===void 0?Vc:h,y=function(x,k,j){return j.startsWith(r)&&j.endsWith(r)&&j.replaceAll(r,"").length>0?".".concat(n):x},v=m.slice();v.push(function(x){x.type===Bc&&x.value.includes("&")&&(x.props[0]=x.props[0].replace(E2,r).replace(s,y))}),d.prefix&&v.push(Xk),v.push(Fk);var b=function(x,k,j,Z){k===void 0&&(k=""),j===void 0&&(j=""),Z===void 0&&(Z="&"),n=Z,r=k,s=new RegExp("\\".concat(r,"\\b"),"g");var H=x.replace(k2,""),Q=Gk(j||k?"".concat(j," ").concat(k," { ").concat(H," }"):H);d.namespace&&(Q=e1(Q,d.namespace));var K=[];return Oc(Q,Pk(v.concat(Zk(function(L){return K.push(L)})))),K};return b.hash=m.length?m.reduce(function(x,k){return k.name||Bo(15),os(x,k.name)},Fb).toString():"",b}var T2=new Wb,Wf=C2(),t1=Da.createContext({shouldForwardProp:void 0,styleSheet:T2,stylis:Wf});t1.Consumer;Da.createContext(void 0);function Iv(){return E.useContext(t1)}var N2=(function(){function a(n,r){var s=this;this.inject=function(l,c){c===void 0&&(c=Wf);var d=s.name+c.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,c(s.rules,d,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Uh(this,function(){throw Bo(12,String(s.name))})}return a.prototype.getName=function(n){return n===void 0&&(n=Wf),this.name+n.hash},a})(),O2=function(a){return a>="A"&&a<="Z"};function $v(a){for(var n="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;O2(s)?n+="-"+s.toLowerCase():n+=s}return n.startsWith("ms-")?"-"+n:n}var n1=function(a){return a==null||a===!1||a===""},a1=function(a){var n,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!n1(c)&&(Array.isArray(c)&&c.isCss||ys(c)?s.push("".concat($v(l),":"),c,";"):Mo(c)?s.push.apply(s,Nc(Nc(["".concat(l," {")],a1(c),!1),["}"],!1)):s.push("".concat($v(l),": ").concat((n=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in Kk||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function wi(a,n,r,s){if(n1(a))return[];if(Bh(a))return[".".concat(a.styledComponentId)];if(ys(a)){if(!ys(c=a)||c.prototype&&c.prototype.isReactComponent||!n)return[a];var l=a(n);return wi(l,n,r,s)}var c;return a instanceof N2?r?(a.inject(r,s),[a.getName(s)]):[a]:Mo(a)?a1(a):Array.isArray(a)?Array.prototype.concat.apply(Vc,a.map(function(d){return wi(d,n,r,s)})):[a.toString()]}function j2(a){for(var n=0;n<a.length;n+=1){var r=a[n];if(ys(r)&&!Bh(r))return!1}return!0}var A2=Pb(Hc),_2=(function(){function a(n,r,s){this.rules=n,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&j2(n),this.componentId=r,this.baseHash=os(A2,r),this.baseStyle=s,Wb.registerId(r)}return a.prototype.generateAndInjectStyles=function(n,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=yi(l,this.staticRulesId);else{var c=Lv(wi(this.rules,n,r,s)),d=Qf(os(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,d)){var h=s(c,".".concat(d),void 0,this.componentId);r.insertRules(this.componentId,d,h)}l=yi(l,d),this.staticRulesId=d}else{for(var m=os(this.baseHash,s.hash),y="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")y+=b;else if(b){var x=Lv(wi(b,n,r,s));m=os(m,x+v),y+=x}}if(y){var k=Qf(m>>>0);r.hasNameForId(this.componentId,k)||r.insertRules(this.componentId,k,s(y,".".concat(k),void 0,this.componentId)),l=yi(l,k)}}return l},a})(),r1=Da.createContext(void 0);r1.Consumer;var Tf={};function D2(a,n,r){var s=Bh(a),l=a,c=!Cf(a),d=n.attrs,h=d===void 0?Vc:d,m=n.componentId,y=m===void 0?(function(G,de){var ge=typeof G!="string"?"sc":_v(G);Tf[ge]=(Tf[ge]||0)+1;var Y="".concat(ge,"-").concat(n2(Hc+ge+Tf[ge]));return de?"".concat(de,"-").concat(Y):Y})(n.displayName,n.parentComponentId):m,v=n.displayName,b=v===void 0?(function(G){return Cf(G)?"styled.".concat(G):"Styled(".concat(a2(G),")")})(a):v,x=n.displayName&&n.componentId?"".concat(_v(n.displayName),"-").concat(n.componentId):n.componentId||y,k=s&&l.attrs?l.attrs.concat(h).filter(Boolean):h,j=n.shouldForwardProp;if(s&&l.shouldForwardProp){var Z=l.shouldForwardProp;if(n.shouldForwardProp){var H=n.shouldForwardProp;j=function(G,de){return Z(G,de)&&H(G,de)}}else j=Z}var Q=new _2(r,x,s?l.componentStyle:void 0);function K(G,de){return(function(ge,Y,ce){var re=ge.attrs,pe=ge.componentStyle,Re=ge.defaultProps,Ae=ge.foldedComponentIds,Ke=ge.styledComponentId,st=ge.target,We=Da.useContext(r1),N=Iv(),B=ge.shouldForwardProp||N.shouldForwardProp,ne=Jk(Y,We,Re)||ms,ve=(function(oe,he,Oe){for(var Ge,Ve=Zn(Zn({},he),{className:void 0,theme:Oe}),tt=0;tt<oe.length;tt+=1){var wt=ys(Ge=oe[tt])?Ge(Ve):Ge;for(var jt in wt)Ve[jt]=jt==="className"?yi(Ve[jt],wt[jt]):jt==="style"?Zn(Zn({},Ve[jt]),wt[jt]):wt[jt]}return he.className&&(Ve.className=yi(Ve.className,he.className)),Ve})(re,Y,ne),U=ve.as||st,S={};for(var M in ve)ve[M]===void 0||M[0]==="$"||M==="as"||M==="theme"&&ve.theme===ne||(M==="forwardedAs"?S.as=ve.forwardedAs:B&&!B(M,U)||(S[M]=ve[M]));var O=(function(oe,he){var Oe=Iv(),Ge=oe.generateAndInjectStyles(he,Oe.styleSheet,Oe.stylis);return Ge})(pe,ve),z=yi(Ae,Ke);return O&&(z+=" "+O),ve.className&&(z+=" "+ve.className),S[Cf(U)&&!Yb.has(U)?"class":"className"]=z,ce&&(S.ref=ce),E.createElement(U,S)})(L,G,de)}K.displayName=b;var L=Da.forwardRef(K);return L.attrs=k,L.componentStyle=Q,L.displayName=b,L.shouldForwardProp=j,L.foldedComponentIds=s?yi(l.foldedComponentIds,l.styledComponentId):"",L.styledComponentId=x,L.target=s?l.target:a,Object.defineProperty(L,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(G){this._foldedDefaultProps=s?(function(de){for(var ge=[],Y=1;Y<arguments.length;Y++)ge[Y-1]=arguments[Y];for(var ce=0,re=ge;ce<re.length;ce++)Jf(de,re[ce],!0);return de})({},l.defaultProps,G):G}}),Uh(L,function(){return".".concat(L.styledComponentId)}),c&&Qb(L,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),L}function Hv(a,n){for(var r=[a[0]],s=0,l=n.length;s<l;s+=1)r.push(n[s],a[s+1]);return r}var Vv=function(a){return Object.assign(a,{isCss:!0})};function Ih(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(ys(a)||Mo(a))return Vv(wi(Hv(Vc,Nc([a],n,!0))));var s=a;return n.length===0&&s.length===1&&typeof s[0]=="string"?wi(s):Vv(wi(Hv(s,n)))}function eh(a,n,r){if(r===void 0&&(r=ms),!n)throw Bo(1,n);var s=function(l){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return a(n,r,Ih.apply(void 0,Nc([l],c,!1)))};return s.attrs=function(l){return eh(a,n,Zn(Zn({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return eh(a,n,Zn(Zn({},r),l))},s}var i1=function(a){return eh(D2,a)},Un=i1;Yb.forEach(function(a){Un[a]=i1(a)});function Si(){return Si=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Si.apply(null,arguments)}function R2(a,n){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(n.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function $h(a,n){if(a==null)return{};var r,s,l=R2(a,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function M2(a){var n=a?.createRoot,r=new WeakMap;function s(d){var h=r.get(d);if(h)return h;var m=document.createElement("span");return d.appendChild(m),r.set(d,m),m}function l(d){var h=r.get(d);h&&(h.remove(),r.delete(d))}if(n){var c=new WeakMap;return{mount:function(h,m){var y,v=s(m),b=c.get(v);return b||(b=n(v),c.set(v,b)),b.render(h),(y=v.firstElementChild)!==null&&y!==void 0?y:v},unmount:function(h){var m=s(h),y=c.get(m);y&&(y.unmount(),c.delete(m)),l(h)}}}return{mount:function(h,m){var y=s(m);if("render"in Wg&&typeof Fr.render=="function"){var v=Fr.render(h,y);return v||y}throw new Error("ReactDOM.render is not available")},unmount:function(h){var m=s(h);if("unmountComponentAtNode"in Wg&&typeof Fr.unmountComponentAtNode=="function")Fr.unmountComponentAtNode(m);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(h)}}}function z2(a){var n=a.children,r=a.rendered;return E.useEffect(function(){r()}),n}function L2(){var a=E.useRef(!1);return E.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){Fr.flushSync(r)}):r()}}}var s1=E.createContext({start:null,end:null,path:null});function B2(a){var n=a.children,r=E.useState(null),s=$n(r,2),l=s[0],c=s[1],d=E.useState(null),h=$n(d,2),m=h[0],y=h[1],v=E.useState(null),b=$n(v,2),x=b[0],k=b[1],j="x"in a.start?a.start:l,Z="x"in a.end?a.end:m,H=L2();return E.useEffect(function(){var Q=typeof a.start=="function"&&a.start(function(L){H.apply(function(){c(L)})}),K=typeof a.end=="function"&&a.end(function(L){H.apply(function(){y(L)})});return function(){Q&&Q(),K&&K()}},[]),E.useEffect(function(){j&&Z&&a.path(j,Z).then(function(Q){H.apply(function(){k(Q)})})},[j,Z]),E.createElement(s1.Provider,{value:{start:j,end:Z,path:x}},n)}function o1(){return E.useContext(s1)}var qv,Gv,U2=Un.svg(qv||(qv=_n([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),I2=Un.path(Gv||(Gv=_n([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function l1(a){var n=o1(),r=n.path;return r?E.createElement(U2,{"data-testid":"connection"},E.createElement(I2,{styles:a.styles,d:r})):null}function $2(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=H2(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function H2(a,n){if(a){if(typeof a=="string")return Yv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yv(a,n):void 0}}function Yv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function V2(a){for(var n=new a.constructor(a.type),r=n;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=$2(s),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,h=n[d];typeof h!="function"&&Object.defineProperty(n,d,{value:a[d]})}}catch(m){l.e(m)}finally{l.f()}}return n}var q2="__reactContainer$";function G2(a){for(var n=a;n;){if(n._reactRootContainer||Object.keys(n).some(function(r){return r.startsWith(q2)}))return n;n=n.parentElement}}function Fv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Pv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Fv(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Fv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function c1(a,n){return{start:function(s){var l=Pv({},n(s));function c(h){var m=Pv({},n(h)),y=m.x-l.x,v=m.y-l.y;l=m,a(y,v)}function d(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d)}}}function Y2(a,n){E.useEffect(function(){var r=function(c){if(!n){var d=G2(c.target),h=E.version.startsWith("16")?document:d;h&&(c.stopPropagation(),h.dispatchEvent(V2(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,n])}var Zv,F2=Un.input(Zv||(Zv=_n([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function th(a){var n=E.useState(a.data.value),r=$n(n,2),s=r[0],l=r[1],c=E.useRef(null);return Y2(c),E.useEffect(function(){l(a.data.value)},[a.data.value]),E.createElement(F2,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(h){var m=a.data.type==="number"?+h.target.value:h.target.value;l(m),a.data.setValue(m)},styles:a.styles})}var nh="rgba(110,136,255,0.8)",u1="#ffd92c",$a=24,mr=6,d1="#96b38a",f1=180,P2=Object.freeze({__proto__:null,$nodecolor:nh,$nodecolorselected:u1,$socketsize:$a,$socketmargin:mr,$socketcolor:d1,$nodewidth:f1}),Z2=["init","unmount"];function Hh(a){var n=a.init,r=a.unmount,s=$h(a,Z2),l=E.useRef(null);return E.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),E.useEffect(function(){l.current&&n(l.current)}),E.createElement("span",Si({},s,{ref:l}))}var X2=["name","emit","payload"];function ah(a){var n=a.name,r=a.emit,s=a.payload,l=$h(a,X2);return E.createElement(Hh,Si({},l,{className:n,init:function(d){r({type:"render",data:{type:"control",element:d,payload:s}})},unmount:function(d){r({type:"unmount",data:{element:d}})}}))}var K2=["name","emit","nodeId","side","socketKey","payload"];function rh(a){var n=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,d=a.payload,h=$h(a,K2);return E.createElement(Hh,Si({},h,{className:n,init:function(y){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:y,payload:d}})},unmount:function(y){r({type:"unmount",data:{element:y}})}}))}var Xv,Kv,h1=Un.div(Xv||(Xv=_n([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),nh,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(f1,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},nh,function(a){return a.selected&&Ih(Kv||(Kv=_n([`
        background: `,`;
        border-color: #e3c000;
    `])),u1)},$a/2+mr,$a/2+mr,mr,$a,$a+2*mr,mr,$a/2+mr,function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function Nf(a){a.sort(function(n,r){var s,l,c=((s=n[1])===null||s===void 0?void 0:s.index)||0,d=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-d})}function p1(a){var n=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,d=c.id,h=c.label,m=c.width,y=c.height;return Nf(n),Nf(r),Nf(s),E.createElement(h1,{selected:l,width:m,height:y,styles:a.styles,"data-testid":"node"},E.createElement("div",{className:"title","data-testid":"title"},h),r.map(function(v){var b=$n(v,2),x=b[0],k=b[1];return k&&E.createElement("div",{className:"output",key:x,"data-testid":"output-".concat(x)},E.createElement("div",{className:"output-title","data-testid":"output-title"},k.label),E.createElement(rh,{name:"output-socket",side:"output",socketKey:x,nodeId:d,emit:a.emit,payload:k.socket,"data-testid":"output-socket"}))}),s.map(function(v){var b=$n(v,2),x=b[0],k=b[1];return k?E.createElement(ah,{key:x,name:"control",emit:a.emit,payload:k,"data-testid":"control-".concat(x)}):null}),n.map(function(v){var b=$n(v,2),x=b[0],k=b[1];return k&&E.createElement("div",{className:"input",key:x,"data-testid":"input-".concat(x)},E.createElement(rh,{name:"input-socket",side:"input",socketKey:x,nodeId:d,emit:a.emit,payload:k.socket,"data-testid":"input-socket"}),k&&(!k.control||!k.showControl)&&E.createElement("div",{className:"input-title","data-testid":"input-title"},k.label),k.control&&k.showControl&&E.createElement(ah,{key:x,name:"input-control",emit:a.emit,payload:k.control,"data-testid":"input-control"}))}))}var Qv,Jv,m1=Un.div(Qv||(Qv=_n([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),$a/2,$a,$a,d1),Q2=Un.div(Jv||(Jv=_n([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),($a+mr*2)/2,mr,m1);function y1(a){return E.createElement(Q2,null,E.createElement(m1,{title:a.data.name}))}function J2(a){var n=typeof a?.socketPositionWatcher>"u"?_k():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,d=r.control;return{attach:function(m){n.attach(m)},render:function(m,y){if(m.data.type==="node"){var v=y.parentScope(),b=s?s(m.data):p1;return b&&E.createElement(b,{data:m.data.payload,emit:function(de){return void v.emit(de)}})}else if(m.data.type==="connection"){var x=l?l(m.data):l1,k=m.data.payload,j=k.sourceOutput,Z=k.targetInput,H=k.source,Q=k.target;return x&&E.createElement(B2,{start:m.data.start||function(G){return n.listen(H,"output",j,G)},end:m.data.end||function(G){return n.listen(Q,"input",Z,G)},path:(function(){var G=rt(Se.mark(function de(ge,Y){var ce,re,pe,Re,Ae;return Se.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=1,y.emit({type:"connectionpath",data:{payload:k,points:[ge,Y]}});case 1:if(ce=Ke.sent,ce){Ke.next=2;break}return Ke.abrupt("return","");case 2:if(re=ce.data,pe=re.path,Re=re.points,Ae=.3,!(!pe&&Re.length!==2)){Ke.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(pe){Ke.next=4;break}return Ke.abrupt("return",k.isLoop?kk(Re,Ae,120):Ek(Re,Ae));case 4:return Ke.abrupt("return",pe);case 5:case"end":return Ke.stop()}},de)}));return function(de,ge){return G.apply(this,arguments)}})()},E.createElement(x,{data:m.data.payload}))}else if(m.data.type==="socket"){var K=c?c(m.data):y1;return K&&m.data.payload&&E.createElement(K,{data:m.data.payload})}else if(m.data.type==="control"){var L=d&&m.data.payload?d(m.data):m.data.payload instanceof Xt.InputControl?th:null;return L&&E.createElement(L,{data:m.data.payload})}}}}var W2=Object.freeze({__proto__:null,vars:P2,setup:J2,Connection:l1,useConnection:o1,Control:th,InputControl:th,Node:p1,NodeStyles:h1,RefControl:ah,RefSocket:rh,Socket:y1});function g1(a,n){var r=E.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},n)};return E.useEffect(function(){return s},[]),[l,s]}var eC="rgba(110,136,255,0.8)",tC="rgba(130, 153, 255, 0.8)",nC="rgba(69, 103, 255, 0.8)",rc="5px",ih=120,Wv,Vh=Un.div(Wv||(Wv=_n([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),nC,eC,rc,rc,rc,rc,tC),e0,t0,n0,v1=Un(Vh)(e0||(e0=_n([`
    `,`
`])),function(a){return a.hasSubitems&&Ih(t0||(t0=_n([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),b1=Un.div(n0||(n0=_n([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),ih);function w1(a){var n,r,s,l,c=E.useState(!1),d=$n(c,2),h=d[0],m=d[1],y=E.useCallback(function(){m(!1)},[m]),v=g1(y,a.delay),b=$n(v,2),x=b[0],k=b[1],j=((n=a.components)===null||n===void 0||(r=n.item)===null||r===void 0?void 0:r.call(n,a.data))||v1,Z=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||b1;return E.createElement(j,{onClick:function(Q){Q.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(Q){Q.stopPropagation()},onPointerOver:function(){k(),m(!0)},onPointerLeave:function(){x&&x()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&h&&E.createElement(Z,null,a.data.subitems.map(function(H){return E.createElement(w1,{key:H.key,data:H,delay:a.delay,hide:a.hide,components:a.components},H.label)})))}var a0,S1=Un.input(a0||(a0=_n([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function aC(a){var n=a.component||S1;return E.createElement(n,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var r0,x1=Un.div(r0||(r0=_n([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),ih,ih/2);function rC(a){var n,r,s,l,c,d,h=g1(a.onHide,a.delay),m=$n(h,2),y=m[0],v=m[1],b=E.useState(""),x=$n(b,2),k=x[0],j=x[1],Z=new RegExp(k,"i"),H=a.items.filter(function(L){return L.label.match(Z)}),Q=((n=a.components)===null||n===void 0||(r=n.main)===null||r===void 0?void 0:r.call(n))||x1,K=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||Vh;return E.createElement(Q,{onMouseOver:function(){v()},onMouseLeave:function(){y?.()},onWheel:function(G){G.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&E.createElement(K,null,E.createElement(aC,{value:k,onChange:j,component:(c=a.components)===null||c===void 0||(d=c.search)===null||d===void 0?void 0:d.call(c)})),H.map(function(L){return E.createElement(w1,{key:L.key,data:L,delay:a.delay,hide:a.onHide,components:a.components},L.label)}))}function iC(a){var n=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return E.createElement(rC,{items:s.data.items,delay:n,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var sC=Object.freeze({__proto__:null,setup:iC,Item:v1,Subitems:b1,Menu:x1,Search:S1,Common:Vh}),ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oC=typeof ic=="object"&&ic&&ic.Object===Object&&ic,lC=typeof self=="object"&&self&&self.Object===Object&&self;oC||lC||Function("return this")();function cC(){const a=E.useRef(!1);return E.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),E.useCallback(()=>a.current,[])}var i0={width:void 0,height:void 0};function uC(a){const{ref:n,box:r="content-box"}=a,[{width:s,height:l},c]=E.useState(i0),d=cC(),h=E.useRef({...i0}),m=E.useRef(void 0);return m.current=a.onResize,E.useEffect(()=>{if(!n.current||typeof window>"u"||!("ResizeObserver"in window))return;const y=new ResizeObserver(([v])=>{const b=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",x=s0(v,b,"inlineSize"),k=s0(v,b,"blockSize");if(h.current.width!==x||h.current.height!==k){const Z={width:x,height:k};h.current.width=x,h.current.height=k,m.current?m.current(Z):d()&&c(Z)}});return y.observe(n.current,{box:r}),()=>{y.disconnect()}},[r,n,d]),{width:s,height:l}}function s0(a,n,r){return a[n]?Array.isArray(a[n])?a[n][0][r]:a[n][r]:n==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function Ha(a){return"".concat(a,"px")}var o0,dC=Un.div(o0||(o0=_n([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function fC(a){return E.createElement(dC,{style:{left:Ha(a.left),top:Ha(a.top),width:Ha(a.width),height:Ha(a.height)},"data-testid":"minimap-node"})}var l0,hC=Un.div(l0||(l0=_n([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function pC(a){var n=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=c1(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return E.createElement(hC,{onPointerDown:s.start,style:{left:Ha(n(a.left)),top:Ha(n(a.top)),width:Ha(n(a.width)),height:Ha(n(a.height))},"data-testid":"minimap-viewport"})}var c0,mC=Un.div(c0||(c0=_n([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function yC(a){var n,r=E.useRef(null),s=uC({ref:r}),l=s.width,c=l===void 0?0:l,d=((n=r.current)===null||n===void 0?void 0:n.clientWidth)||c,h=E.useCallback(function(m){return m*d},[d]);return E.createElement(mC,{size:a.size,style:{width:Ha(a.size*a.ratio),height:Ha(a.size)},onPointerDown:function(y){y.stopPropagation(),y.preventDefault()},onDoubleClick:function(y){if(y.stopPropagation(),y.preventDefault(),!!r.current){var v=r.current.getBoundingClientRect(),b=(y.clientX-v.left)/(a.size*a.ratio),x=(y.clientY-v.top)/(a.size*a.ratio);a.point(b,x)}},ref:r,"data-testid":"minimap"},d?a.nodes.map(function(m,y){return E.createElement(fC,{key:y,left:h(m.left),top:h(m.top),width:h(m.width),height:h(m.height)})}):null,E.createElement(pC,Si({},a.viewport,{start:a.start,containerWidth:d,translate:a.translate})))}function gC(a){return{render:function(r){if(r.data.type==="minimap")return E.createElement(yC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var vC=Object.freeze({__proto__:null,setup:gC}),u0,jo=20,bC=Un.div(u0||(u0=_n([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),jo,jo,function(a){return a.selected?"#ffd92c":"steelblue"},jo);function wC(a){var n=c1(function(c,d){a.translate(c,d)},a.pointer),r=a.position,s=r.x,l=r.y;return E.createElement(bC,{onPointerDown:function(d){d.stopPropagation(),d.preventDefault(),n.start(d),a.pointerdown()},onContextMenu:function(d){d.stopPropagation(),d.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-jo/2,"px"),left:"".concat(s-jo/2,"px")},"data-testid":"pin"})}function SC(a){function n(r,s){return E.createElement(E.Fragment,null,r.pins.map(function(l){return E.createElement(wC,Si({},l,{key:l.id,contextMenu:function(){var d;a==null||(d=a.contextMenu)===null||d===void 0||d.call(a,l.id)},translate:function(d,h){var m;a==null||(m=a.translate)===null||m===void 0||m.call(a,l.id,d,h)},pointerdown:function(){var d;a==null||(d=a.pointerdown)===null||d===void 0||d.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,d=l.parentScope(Lo);if(c.type==="reroute-pins")return n(c.data,function(){return d.area.pointer})}}}var xC=Object.freeze({__proto__:null,setup:SC}),Of=Object.freeze({__proto__:null,classic:W2,contextMenu:sC,minimap:vC,reroute:xC});function EC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=kC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function kC(a,n){if(a){if(typeof a=="string")return d0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d0(a,n):void 0}}function d0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function f0(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function sc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?f0(Object(r),!0).forEach(function(s){ze(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):f0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function CC(a,n,r){return n=Ut(n),Ya(a,E1()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function E1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E1=function(){return!!a})()}function TC(a,n,r,s){var l=Ro(Ut(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var NC=(function(a){function n(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l[0];return ft(this,n),r=CC(this,n,["react-render"]),ze(r,"presets",[]),r.renderer=M2({createRoot:d?.createRoot}),r.addPipe(function(h){if(!h||An(h)!=="object"||!("type"in h))return h;if(h.type==="unmount")r.unmount(h.data.element);else if(h.type==="render"){if("filled"in h.data&&h.data.filled)return h;if(r.mount(h.data.element,h))return sc(sc({},h),{},{data:sc(sc({},h.data),{},{filled:!0})})}return h}),r}return Xn(n,a),ht(n,[{key:"setParent",value:function(s){var l=this;TC(n,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),d=EC(this.presets),h;try{for(d.s();!(h=d.n()).done;){var m=h.value,y=m.render(l,this);if(y){var v=E.createElement(z2,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},y);return this.renderer.mount(v,s),!0}}}catch(b){d.e(b)}finally{d.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(vs);function OC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function k1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k1=function(){return!!a})()}function jC(a,n,r){if(k1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,n);var l=new(a.bind.apply(a,s));return r&&Do(l,r.prototype),l}function sh(a){var n=typeof Map=="function"?new Map:void 0;return sh=function(s){if(s===null||!OC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(s))return n.get(s);n.set(s,l)}function l(){return jC(s,arguments,Ut(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Do(l,s)},sh(a)}function AC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=_C(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function _C(a,n){if(a){if(typeof a=="string")return h0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h0(a,n):void 0}}function h0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}var DC=(function(){function a(n){ft(this,a),ze(this,"setups",new Map),this.editor=n}return ht(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var n=rt(Se.mark(function s(l){var c=this,d,h,m,y,v,b,x,k,j,Z,H,Q;return Se.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(d=this.setups.get(l),d){L.next=3;break}throw new Error("node is not initialized");case 3:return h=d.inputs(),m=this.editor.getConnections().filter(function(G){return G.target===l&&h.includes(G.targetInput)}),y={},L.next=8,Promise.all(m.map((function(){var G=rt(Se.mark(function de(ge){return Se.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.t0=ge,ce.next=3,c.fetch(ge.source);case 3:return ce.t1=ce.sent,ce.abrupt("return",{c:ce.t0,sourceData:ce.t1});case 5:case"end":return ce.stop()}},de)}));return function(de){return G.apply(this,arguments)}})()));case 8:v=L.sent,b=AC(v);try{for(b.s();!(x=b.n()).done;)k=x.value,j=k.c,Z=k.sourceData,H=y[j.targetInput]?y[j.targetInput]:[],Q=y,Q[j.targetInput]=[].concat(bs(H),[Z[j.sourceOutput]])}catch(G){b.e(G)}finally{b.f()}return L.abrupt("return",y);case 12:case"end":return L.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var n=rt(Se.mark(function s(l){var c=this,d,h,m,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=this.setups.get(l),d){b.next=3;break}throw new Error("node is not initialized");case 3:return h=d.outputs(),b.next=6,d.data(function(){return c.fetchInputs(l)});case 6:if(m=b.sent,y=Object.keys(m),h.every(function(x){return y.includes(x)})){b.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(h.join('", "'),'". Got "').concat(y.join('", "'),'"'));case 10:return b.abrupt("return",m);case 11:case"end":return b.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()}])})(),RC=(function(){function a(n){ft(this,a),ze(this,"cache",new Map),this.onDelete=n}return ht(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function MC(a,n,r){return n=Ut(n),Ya(a,C1()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function C1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C1=function(){return!!a})()}var p0=(function(a){function n(){return ft(this,n),MC(this,n,["cancelled"])}return Xn(n,a),ht(n)})(sh(Error));function zC(){var a=!1;function n(m){if(a)throw new p0;return m}for(var r,s=new Promise(function(m,y){r=y,m()}),l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=c.reduce(function(m,y){var v=m.then(y).then(n);return v},s);return h.cancel=function(){a||r(new p0),a=!0},h}function LC(a,n,r){return n=Ut(n),Ya(a,T1()?Reflect.construct(n,r||[],Ut(a).constructor):n.apply(a,r))}function T1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T1=function(){return!!a})()}function BC(a,n,r,s){var l=Ro(Ut(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var UC=(function(a){function n(r){var s;return ft(this,n),s=LC(this,n,["dataflow-engine"]),ze(s,"cache",new RC(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return Xn(n,a),ht(n,[{key:"setParent",value:function(s){BC(n,"setParent",this)([s]),this.editor=this.parentScope(Kr),this.dataflow=new DC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var d=rt(Se.mark(function m(y){var v,b;return Se.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(v=l.cache.get(s.id),!v){k.next=3;break}return k.abrupt("return",v);case 3:return b=zC(function(){return y()},function(j){return s.data(j)}),l.cache.add(s.id,b),k.abrupt("return",b);case 6:case"end":return k.stop()}},m)}));function h(m){return d.apply(this,arguments)}return h})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var d=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(h){return h.source===s&&d.includes(h.sourceOutput)}).forEach(function(h){l.reset(h.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=rt(Se.mark(function l(c){var d;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=An(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetchInputs(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=rt(Se.mark(function l(c){var d;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=An(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetch(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(vs);const IC=!1,qh=(...a)=>IC,m0=Xt.Socket.canConnect;Xt.Socket.canConnect=function(a,n){return qh(`[Socket Check] ${a.name} <-> ${n.name}`),m0&&m0(a,n)||a.name==="any"||n.name==="any"?!0:a.name===n.name};Xt.Socket.prototype.canConnectTo=function(a){return qh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Xt.Socket.canConnect(this,a)};const N1={boolean:new Xt.Socket("boolean"),number:new Xt.Socket("number"),object:new Xt.Socket("object"),lightInfo:new Xt.Socket("light_info"),any:new Xt.Socket("any")};Object.values(N1).forEach(a=>{a.canConnectTo=function(n){return qh(`[Socket Instance Direct] ${this.name} -> ${n.name}`),this.name===n.name||this.name==="any"||n.name==="any"}});let bo=null;function qc(){if(bo!==null)return bo;const n=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return n?bo=n[1]:bo="",bo}function wn(a){const n=qc(),r=a.startsWith("/")?a:"/"+a;return n+r}qc();const gi="t2app-pin",_c="t2app-pin-remember",O1=(a,n)=>{try{return a.getItem(n)}catch{return null}},oc=(a,n,r)=>{try{return a.setItem(n,r),!0}catch{return!1}},Ao=(a,n)=>{try{return a.removeItem(n),!0}catch{return!1}},Dc=()=>O1(localStorage,_c)==="true",cs=()=>{const n=Dc()?localStorage:sessionStorage;return(O1(n,gi)||"").trim()||null},j1=()=>{Ao(sessionStorage,gi),Ao(localStorage,gi),Ao(localStorage,_c),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},y0=(a,{remember:n}={})=>{const r=(a||"").toString().trim(),s=typeof n=="boolean"?n:Dc();if(!r){j1(),typeof n=="boolean"&&oc(localStorage,_c,n?"true":"false");return}oc(localStorage,_c,s?"true":"false"),s?(oc(localStorage,gi,r),Ao(sessionStorage,gi)):(oc(sessionStorage,gi,r),Ao(localStorage,gi)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},ss=async(a,n={})=>{const r=typeof a=="string"?wn(a):a;return fetch(r,n)},bn=async(a,n={})=>{const r=cs(),s=typeof a=="string"?wn(a):a;if(!r)return fetch(s,n);const l=new Headers(n.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...n,headers:l})},g0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function $C(){const[a,n]=E.useState([]),[r,s]=E.useState(!1),[l,c]=E.useState(null),[d,h]=E.useState(null),[m,y]=E.useState(5e3),[v,b]=E.useState(null),x=E.useCallback(async()=>{s(!0),c(null);try{const Q=await ss("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:m})});if(!Q.ok){const L=await Q.json();throw new Error(L.error||`Scan failed (${Q.status})`)}const K=await Q.json();n(K.devices||[]),h(new Date)}catch(Q){console.error("[Discovery] Scan error:",Q),c(Q.message)}finally{s(!1)}},[m]),k=Q=>g0[Q]||g0.generic,j=Q=>Q?new Date(Q).toLocaleTimeString():"",H=(Q=>{const K={};for(const L of Q){const G=L.type||"generic";K[G]||(K[G]=[]),K[G].push(L)}return K})(a);return p.jsxs("div",{className:"discovery-panel",children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),p.jsxs("select",{value:m,onChange:Q=>y(Number(Q.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[p.jsx("option",{value:3e3,children:"3 seconds"}),p.jsx("option",{value:5e3,children:"5 seconds"}),p.jsx("option",{value:1e4,children:"10 seconds"}),p.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),p.jsx("button",{onClick:x,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):p.jsx(p.Fragment,{children:" Scan Network"})})]}),l&&p.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),d&&p.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",d.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&d&&p.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[p.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),p.jsx("div",{children:"No devices found on your network."}),p.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(H).map(([Q,K])=>{const L=k(Q);return p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[p.jsx("span",{style:{fontSize:"16px"},children:L.icon}),p.jsx("span",{style:{color:L.color,fontSize:"13px",fontWeight:500},children:L.label}),p.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:K.length})]}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:K.map(G=>p.jsxs("div",{style:{background:v===G.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>b(v===G.id?null:G.id),children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:G.name}),p.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[G.ip,":",G.port]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[G.configured?p.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):p.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),p.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:v===G.id?"":""})]})]}),v===G.id&&p.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[p.jsx("span",{children:"Host:"}),p.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:G.host||"N/A"}),p.jsx("span",{children:"Source:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:G.source==="mdns"?"mDNS/Bonjour":G.source==="udp"?"UDP Broadcast":G.source}),p.jsx("span",{children:"Discovered:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:j(G.discoveredAt)}),G.capabilities&&G.capabilities.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Capabilities:"}),p.jsx("span",{style:{color:"#5fb3b3"},children:G.capabilities.join(", ")})]}),G.model&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Model:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:G.model})]})]}),p.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[p.jsx("button",{onClick:de=>{de.stopPropagation(),window.open(`http://${G.ip}:${G.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),p.jsx("button",{onClick:de=>{de.stopPropagation(),navigator.clipboard.writeText(G.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},G.id))})]},Q)}),p.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const lc=[{key:"primary",label:"Primary Accent Color",type:"color",default:"#5fb3b3"},{key:"background",label:"Node Background",type:"color",default:"#1e2428"},{key:"surface",label:"Node Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text Color",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"},{key:"success",label:"Success Color",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning Color",type:"color",default:"#d4a054"},{key:"error",label:"Error Color",type:"color",default:"#c75f5f"},{key:"borderOpacity",label:"Border Opacity (%)",type:"range",min:0,max:100,default:25}],HC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",testable:"ambient",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Forecast Panel",icon:"",description:"Configure HA sensors to display live weather data on the forecast panel (optional)",settings:[{key:"FORECAST_TEMP_SENSOR",label:"Temperature Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for current temperature"},{key:"FORECAST_WIND_SENSOR",label:"Wind Speed Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind speed"},{key:"FORECAST_WIND_DIR_SENSOR",label:"Wind Direction Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind direction"},{key:"FORECAST_RAIN_SENSOR",label:"Rain Rate Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for rain rate"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],v0=a=>{try{const n=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},b0=a=>{try{const n=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function VC({isOpen:a,onClose:n}){const[r,s]=E.useState({}),[l,c]=E.useState(!0),[d,h]=E.useState(!1),[m,y]=E.useState(null),[v,b]=E.useState(null),[x,k]=E.useState({}),[j,Z]=E.useState({}),[H,Q]=E.useState({}),[K,L]=E.useState({}),[G,de]=E.useState([]),[ge,Y]=E.useState(!1),ce=E.useRef(null),[re,pe]=E.useState(""),[Re,Ae]=E.useState(()=>Dc()),[Ke,st]=E.useState(()=>!!cs()),[We,N]=E.useState(!1),[B,ne]=E.useState(()=>{try{const _=localStorage.getItem("t2theme-overrides"),V=_?JSON.parse(_):{},ue={};return lc.forEach(Ne=>{ue[Ne.key]=Ne.default}),{...ue,...V}}catch{const _={};return lc.forEach(V=>{_[V.key]=V.default}),_}}),[ve,U]=E.useState(!1),S={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[M,O]=E.useState(()=>{try{const _=localStorage.getItem("t2category-overrides"),V=_?JSON.parse(_):{},ue={};for(const[Ne,De]of Object.entries(S))ue[Ne]={...De,...V[Ne]||{}};return ue}catch{return{...S}}}),[z,oe]=E.useState(!1),he={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},Oe={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[Ge,Ve]=E.useState(()=>{try{const _=localStorage.getItem("t2socket-colors"),V=_?JSON.parse(_):{},ue={};for(const[Ne,De]of Object.entries(he))ue[Ne]={...De,...V[Ne]||{}};return ue}catch{return{...he}}}),[tt,wt]=E.useState(!1),[jt,Dn]=E.useState(!1),[mn,Kt]=E.useState(null),[Hn,Qe]=E.useState(!1),[F,ie]=E.useState(!1);E.useEffect(()=>{a&&(J(),Z({Security:!0,"Home Assistant":!0}),Q({}),Ae(Dc()),st(!!cs()),pe(""))},[a]);const J=async()=>{c(!0),y(null);try{const _=await bn("/api/settings");if(!_.ok)throw new Error("Failed to fetch settings");const ue=(await _.json()).settings||{};s(ue);try{const Ne=await bn("/api/config");if(Ne.ok){const De=await Ne.json();if(De.success){Qe(De.isAddon||!1),ie(!0);const yn=!ue.LOCATION_CITY,wa=!ue.LOCATION_LATITUDE,Le=!ue.LOCATION_LONGITUDE,At=!ue.LOCATION_TIMEZONE;(yn||wa||Le||At)&&(s(xt=>({...xt,...yn&&De.locationName?{LOCATION_CITY:De.locationName}:{},...wa&&De.latitude?{LOCATION_LATITUDE:String(De.latitude)}:{},...Le&&De.longitude?{LOCATION_LONGITUDE:String(De.longitude)}:{},...At&&De.timezone?{LOCATION_TIMEZONE:De.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(Ne){console.log("[Settings] Could not fetch HA config for location auto-fill:",Ne.message)}}catch(_){y("Failed to load settings: "+_.message)}finally{c(!1)}},je=async()=>{h(!0),y(null),b(null);try{const _=await bn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!_.ok){const V=await _.json();throw new Error(V.error||"Failed to save settings")}b("Settings saved! Some changes may require a server restart."),setTimeout(()=>b(null),5e3)}catch(_){y("Failed to save: "+_.message)}finally{h(!1)}},be=(_,V)=>{s(ue=>({...ue,[_]:V}))},se=async()=>{const _=r.LOCATION_CITY;if(!_||_.trim().length<2){Kt("Please enter a city name first");return}Dn(!0),Kt(null);try{const V=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(_)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!V.ok)throw new Error("Geocoding service unavailable");const ue=await V.json();if(ue.length===0){Kt(`Could not find "${_}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const Ne=ue[0],De=parseFloat(Ne.lat).toFixed(4),yn=parseFloat(Ne.lon).toFixed(4),wa=Ne.address?[Ne.address.city||Ne.address.town||Ne.address.village||Ne.name,Ne.address.state,Ne.address.country].filter(Boolean).join(", "):Ne.display_name.split(",").slice(0,3).join(",");let Le="UTC";const At=Ne.address?.state?.toLowerCase()||"",xt=Ne.address?.country?.toLowerCase()||"";if(xt.includes("portugal"))Le="Europe/Lisbon";else if(xt.includes("spain"))Le="Europe/Madrid";else if(xt.includes("france"))Le="Europe/Paris";else if(xt.includes("germany"))Le="Europe/Berlin";else if(xt.includes("italy"))Le="Europe/Rome";else if(xt.includes("united kingdom")||xt.includes("ireland"))Le="Europe/London";else if(xt.includes("netherlands"))Le="Europe/Amsterdam";else if(xt.includes("belgium"))Le="Europe/Brussels";else if(xt.includes("australia"))Le="Australia/Sydney";else if(xt.includes("japan"))Le="Asia/Tokyo";else if(xt.includes("china"))Le="Asia/Shanghai";else if(xt.includes("india"))Le="Asia/Kolkata";else if(xt.includes("brazil"))Le="America/Sao_Paulo";else if(xt.includes("canada"))At.includes("british columbia")?Le="America/Vancouver":At.includes("alberta")?Le="America/Edmonton":At.includes("saskatchewan")?Le="America/Regina":At.includes("manitoba")?Le="America/Winnipeg":At.includes("ontario")?Le="America/Toronto":At.includes("quebec")?Le="America/Montreal":Le="America/Toronto";else if(xt.includes("united states")||xt.includes("usa"))At.includes("hawaii")?Le="Pacific/Honolulu":At.includes("alaska")?Le="America/Anchorage":["california","nevada","oregon","washington"].some(Je=>At.includes(Je))?Le="America/Los_Angeles":["arizona"].some(Je=>At.includes(Je))?Le="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(Je=>At.includes(Je))?Le="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(Je=>At.includes(Je))?Le="America/Chicago":Le="America/New_York";else{const Je=parseFloat(yn);Je>=-125&&Je<-115?Le="America/Los_Angeles":Je>=-115&&Je<-102?Le="America/Denver":Je>=-102&&Je<-87?Le="America/Chicago":Je>=-87&&Je<-67?Le="America/New_York":Je>=-10&&Je<3?Le="Europe/London":Je>=3&&Je<15?Le="Europe/Paris":Je>=15&&Je<30&&(Le="Europe/Berlin")}s(Je=>({...Je,LOCATION_CITY:wa,LOCATION_LATITUDE:De,LOCATION_LONGITUDE:yn,LOCATION_TIMEZONE:Le})),b(`Found: ${wa} (${De}, ${yn})`),setTimeout(()=>b(null),5e3)}catch(V){Kt("Search failed: "+V.message)}finally{Dn(!1)}},C=(_,V)=>{ne(ue=>({...ue,[_]:V})),U(!0)},R=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(B)),b("Theme saved! Refresh the page to apply changes."),U(!1),setTimeout(()=>b(null),5e3)}catch(_){y("Failed to save theme: "+_.message)}},le=()=>{const _={};lc.forEach(V=>{_[V.key]=V.default}),ne(_),localStorage.removeItem("t2theme-overrides"),b("Theme reset to defaults! Refresh the page to apply."),U(!1),setTimeout(()=>b(null),5e3)},fe=(_,V,ue)=>{O(Ne=>({...Ne,[_]:{...Ne[_],[V]:ue}})),oe(!0)},we=_=>{const V=parseInt(_.slice(1,3),16),ue=parseInt(_.slice(3,5),16),Ne=parseInt(_.slice(5,7),16);return`${V}, ${ue}, ${Ne}`},Te={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},$e=_=>{const V=document.documentElement;for(const[ue,Ne]of Object.entries(_)){const De=Te[ue];De&&(V.style.setProperty(`--node-${De}-color`,Ne.accent),V.style.setProperty(`--node-${De}-color-rgb`,we(Ne.accent)),Ne.background&&V.style.setProperty(`--node-${De}-bg`,Ne.background))}},Pe=()=>{try{const _={};for(const[V,ue]of Object.entries(M)){const Ne=S[V],De={};ue.accent!==Ne.accent&&(De.accent=ue.accent),ue.background!==Ne.background&&(De.background=ue.background),Object.keys(De).length>0&&(_[V]=De)}Object.keys(_).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(_)):localStorage.removeItem("t2category-overrides"),$e(M),b("Category colors applied!"),oe(!1),setTimeout(()=>b(null),3e3)}catch(_){y("Failed to save category colors: "+_.message)}},St=()=>{O({...S}),localStorage.removeItem("t2category-overrides"),$e(S),b("Category colors reset to defaults!"),oe(!1),setTimeout(()=>b(null),3e3)},Ue=(_,V)=>{Ve(ue=>({...ue,[_]:{...ue[_],color:V}})),wt(!0)},He=(_,V=20)=>{const ue=parseInt(_.slice(1),16),Ne=Math.max(0,(ue>>16)-Math.round(255*V/100)),De=Math.max(0,(ue>>8&255)-Math.round(255*V/100)),yn=Math.max(0,(ue&255)-Math.round(255*V/100));return`#${(1<<24|Ne<<16|De<<8|yn).toString(16).slice(1)}`},Be=(_,V=20)=>{const ue=parseInt(_.slice(1),16),Ne=Math.min(255,(ue>>16)+Math.round(255*V/100)),De=Math.min(255,(ue>>8&255)+Math.round(255*V/100)),yn=Math.min(255,(ue&255)+Math.round(255*V/100));return`#${(1<<24|Ne<<16|De<<8|yn).toString(16).slice(1)}`},it=_=>{const V=document.documentElement;for(const[ue,Ne]of Object.entries(_)){const De=Oe[ue];De&&(V.style.setProperty(`--socket-${De}-color`,Ne.color),V.style.setProperty(`--socket-${De}-dark`,He(Ne.color,15)),V.style.setProperty(`--socket-${De}-border`,Be(Ne.color,20)),V.style.setProperty(`--socket-${De}-rgb`,we(Ne.color)))}},gt=()=>{try{const _={};for(const[V,ue]of Object.entries(Ge)){const Ne=he[V];ue.color!==Ne.color&&(_[V]={color:ue.color})}Object.keys(_).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(_)):localStorage.removeItem("t2socket-colors"),it(Ge),b("Socket colors applied!"),wt(!1),setTimeout(()=>b(null),3e3)}catch(_){y("Failed to save socket colors: "+_.message)}},It=()=>{Ve({...he}),localStorage.removeItem("t2socket-colors"),it(he),b("Socket colors reset to defaults!"),wt(!1),setTimeout(()=>b(null),3e3)},zt=_=>{Z(V=>({...V,[_]:!V[_]})),_==="Forecast Panel"&&!j[_]&&G.length===0&&ot()},ot=async()=>{Y(!0);try{const _=(await qf(async()=>{const{socket:ue}=await Promise.resolve().then(()=>HT);return{socket:ue}},void 0,import.meta.url)).socket,V=ue=>{const Ne=ue.filter(De=>De.id?.includes("sensor.")).map(De=>({id:De.id?.replace("ha_","")||De.entity_id,name:De.name||De.friendly_name||De.id})).sort((De,yn)=>De.name.localeCompare(yn.name));de(Ne),Y(!1),_.off("ha-devices",V)};_.on("ha-devices",V),_.emit("request-ha-devices"),setTimeout(()=>{ge&&(Y(!1),_.off("ha-devices",V))},5e3)}catch(_){console.warn("Failed to fetch HA sensors:",_),Y(!1)}},Lt=_=>{k(V=>({...V,[_]:!V[_]}))},tn=async _=>{L(V=>({...V,[_]:!0})),Q(V=>({...V,[_]:null}));try{const ue=await(await bn("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:_,settings:r})})).json();Q(Ne=>({...Ne,[_]:{success:ue.success,message:ue.message||(ue.success?"Connection successful!":"Connection failed"),details:ue.details}}))}catch(V){Q(ue=>({...ue,[_]:{success:!1,message:"Test failed: "+V.message}}))}finally{L(V=>({...V,[_]:!1}))}},nn=()=>{const _={version:"1.0",timestamp:new Date().toISOString(),settings:r},V=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),ue=URL.createObjectURL(V),Ne=document.createElement("a");Ne.href=ue,Ne.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(ue),b("Settings exported successfully!"),setTimeout(()=>b(null),3e3)},qt=_=>{const V=_.target.files?.[0];if(!V)return;const ue=new FileReader;ue.onload=Ne=>{try{const De=JSON.parse(Ne.target.result);if(!De.settings||typeof De.settings!="object")throw new Error("Invalid backup file format");s(yn=>({...yn,...De.settings})),b(`Imported ${Object.keys(De.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>b(null),5e3)}catch(De){y("Failed to import backup: "+De.message)}},ue.readAsText(V),_.target.value=""};return a?Nh.createPortal(p.jsx("div",{className:"settings-modal-overlay",onClick:n,children:p.jsxs("div",{className:"settings-modal",onClick:_=>_.stopPropagation(),children:[p.jsxs("div",{className:"settings-header",children:[p.jsx("h2",{children:" Settings & API Keys"}),p.jsx("button",{className:"settings-close-btn",onClick:n,children:""})]}),p.jsx("div",{className:"settings-content",children:l?p.jsx("div",{className:"settings-loading",children:"Loading settings..."}):p.jsxs(p.Fragment,{children:[m&&p.jsx("div",{className:"settings-error",children:m}),v&&p.jsx("div",{className:"settings-success",children:v}),p.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>zt("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[p.jsxs("span",{children:[j.Security?"":""," Security (This Device)"]}),Ke&&p.jsxs("span",{style:{fontSize:"10px",color:Re?"#00c896":"#ffaa00"},children:[" ",Re?"REMEMBERED":"SESSION"]})]}),j.Security&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),p.jsxs("div",{className:"settings-field",children:[p.jsxs("label",{className:"settings-label",children:["App PIN",p.jsx("button",{className:"settings-show-btn",onClick:()=>N(_=>!_),type:"button",children:We?" Hide":" Show"})]}),p.jsx("input",{type:We?"text":"password",className:"settings-input",value:re,onChange:_=>pe(_.target.value),placeholder:Ke?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[p.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[p.jsx("input",{type:"checkbox",checked:Re,onChange:_=>{const V=_.target.checked;Ae(V);const ue=cs();ue&&y0(ue,{remember:V})}}),"Remember PIN on this device"]}),p.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[p.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const _=re.trim();_&&(y0(_,{remember:Re}),st(!0),pe(""),(async()=>{try{const V=await bn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:_}})});if(!V.ok){const ue=await V.text();throw new Error(ue||`HTTP ${V.status}`)}b("PIN saved (server + this device)."),setTimeout(()=>b(null),3e3)}catch{b("PIN saved on this device. Server PIN update failed."),setTimeout(()=>b(null),4e3)}finally{J()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!re.trim(),children:" Save PIN"}),p.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{j1(),st(!1),pe(""),Ae(!1),b("PIN cleared."),setTimeout(()=>b(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!Ke,children:"Clear"})]})]}),p.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:Ke?`PIN is saved (${Re?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),p.jsxs("div",{className:"settings-backup-section",children:[p.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),p.jsxs("div",{className:"settings-backup-buttons",children:[p.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:nn,children:" Export Backup"}),p.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>ce.current?.click(),children:" Import Backup"}),p.jsx("input",{ref:ce,type:"file",accept:".json",style:{display:"none"},onChange:qt})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>zt("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[p.jsxs("span",{children:[j.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&p.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),j.Performance&&p.jsxs("div",{className:"settings-category-content",children:[p.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",p.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),p.jsx("br",{}),p.jsx("br",{}),"Performance Mode disables:",p.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[p.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),p.jsx("li",{children:"Complex glow shadows"}),p.jsx("li",{children:"Infinite pulse/glow animations"}),p.jsx("li",{children:"Transition effects on nodes"})]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),p.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),p.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[p.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:_=>{window.setPerformanceMode?.(_.target.checked),Z(V=>({...V}))},style:{opacity:0,width:0,height:0}}),p.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:p.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),p.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsx("div",{className:"settings-category-header",onClick:()=>zt("Discovery"),children:p.jsxs("span",{children:[j.Discovery?"":""," Network Device Discovery"]})}),j.Discovery&&p.jsx("div",{className:"settings-category-content",children:p.jsx($C,{})})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>zt("Theme"),children:[p.jsxs("span",{children:[j.Theme?"":""," Node Theme Settings"]}),ve&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),j.Theme&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Theme settings are stored locally. Refresh the page after saving to apply changes."}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:lc.map(_=>p.jsxs("div",{className:"settings-field",style:{marginBottom:"8px"},children:[p.jsx("label",{className:"settings-label",style:{fontSize:"10px"},children:_.label}),_.type==="color"?p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("input",{type:"color",value:B[_.key]||_.default,onChange:V=>C(_.key,V.target.value),style:{width:"40px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("input",{type:"text",value:B[_.key]||_.default,onChange:V=>C(_.key,V.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"11px"}})]}):_.type==="range"?p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("input",{type:"range",min:_.min,max:_.max,value:B[_.key]||_.default,onChange:V=>C(_.key,parseInt(V.target.value)),style:{flex:1}}),p.jsxs("span",{style:{minWidth:"35px",textAlign:"right",color:"#c5cdd3",fontSize:"12px"},children:[B[_.key]||_.default,"%"]})]}):null]},_.key))}),p.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:B.background,borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(B.borderOpacity||25)/100})`},children:[p.jsx("div",{style:{fontSize:"10px",color:B.textMuted,marginBottom:"8px"},children:"PREVIEW"}),p.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[p.jsx("div",{style:{padding:"8px 12px",background:B.surface,color:B.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),p.jsx("div",{style:{padding:"8px 12px",background:B.surfaceLight,color:B.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),p.jsx("span",{style:{color:B.primary},children:"Primary"}),p.jsx("span",{style:{color:B.success},children:"Success"}),p.jsx("span",{style:{color:B.warning},children:"Warning"}),p.jsx("span",{style:{color:B.error},children:"Error"})]})]}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:le,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:R,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Theme"})]})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>zt("CategoryColors"),children:[p.jsxs("span",{children:[j.CategoryColors?"":""," Category Accent Colors"]}),z&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),j.CategoryColors&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(M).map(([_,V])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:V.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${V.accent}55`},children:[p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[p.jsx("input",{type:"color",value:V.accent,onChange:ue=>fe(_,"accent",ue.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[p.jsx("input",{type:"color",value:V.background||"#0a0f14",onChange:ue=>fe(_,"background",ue.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),p.jsx("div",{style:{flex:1,minWidth:0},children:p.jsxs("div",{style:{fontSize:"11px",color:V.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[V.icon," ",_]})})]},_))}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:St,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:Pe,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>zt("SocketColors"),children:[p.jsxs("span",{children:[j.SocketColors?"":""," Socket Colors"]}),tt&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),j.SocketColors&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),p.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[p.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[p.jsx("span",{children:""})," Preview Node"]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(Ge).slice(0,3).map(([_,V])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${V.color}, ${v0(V.color)})`,border:`2px solid ${b0(V.color)}`,boxShadow:`0 0 8px ${V.color}80`}}),p.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:_})]},_))}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(Ge).slice(3).map(([_,V])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:_}),p.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${V.color}, ${v0(V.color)})`,border:`2px solid ${b0(V.color)}`,boxShadow:`0 0 8px ${V.color}80`}})]},_))})]})]}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(Ge).map(([_,V])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${V.color}55`},children:[p.jsx("input",{type:"color",value:V.color,onChange:ue=>Ue(_,ue.target.value),title:`${_} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),p.jsxs("div",{style:{flex:1,minWidth:0},children:[p.jsxs("div",{style:{fontSize:"12px",color:V.color,fontWeight:"600"},children:[V.icon," ",_]}),p.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:V.description})]})]},_))}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:It,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:gt,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),HC.map(_=>p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>zt(_.category),children:[p.jsxs("span",{children:[j[_.category]?"":"",_.icon," ",_.category]}),_.testable&&j[_.category]&&p.jsx("button",{className:`settings-test-btn ${H[_.testable]?.success?"success":H[_.testable]?.success===!1?"error":""}`,onClick:V=>{V.stopPropagation(),tn(_.testable)},disabled:K[_.testable],children:K[_.testable]?" Testing...":" Test Connection"})]}),j[_.category]&&p.jsxs("div",{className:"settings-category-content",children:[H[_.testable]&&p.jsxs("div",{className:`settings-test-result ${H[_.testable].success?"success":"error"}`,children:[H[_.testable].success?"":""," ",H[_.testable].message,H[_.testable].details&&p.jsx("div",{className:"settings-test-details",children:H[_.testable].details})]}),_.category==="Location"&&p.jsxs("div",{className:"settings-location-search",children:[F&&Hn&&p.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),p.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),p.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:V=>be("LOCATION_CITY",V.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:V=>{V.key==="Enter"&&se()}}),p.jsx("button",{className:"settings-test-btn",onClick:se,disabled:jt,style:{whiteSpace:"nowrap"},children:jt?" Searching...":" Search City"})]}),mn&&p.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",mn]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[p.jsxs("div",{className:"settings-field",children:[p.jsx("label",{className:"settings-label",children:"Latitude"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:V=>be("LOCATION_LATITUDE",V.target.value),placeholder:"32.7767"})]}),p.jsxs("div",{className:"settings-field",children:[p.jsx("label",{className:"settings-label",children:"Longitude"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:V=>be("LOCATION_LONGITUDE",V.target.value),placeholder:"-96.7970"})]})]}),p.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[p.jsx("label",{className:"settings-label",children:"Timezone"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:V=>be("LOCATION_TIMEZONE",V.target.value),placeholder:"America/Chicago"}),p.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),_.category!=="Location"&&_.settings.map(V=>p.jsxs("div",{className:"settings-field",children:[p.jsxs("label",{className:"settings-label",children:[V.label,V.isSecret&&p.jsx("button",{className:"settings-show-btn",onClick:()=>Lt(V.key),type:"button",children:x[V.key]?" Hide":" Show"})]}),V.type==="select"?p.jsxs("select",{className:"settings-input",value:r[V.key]||"",onChange:ue=>be(V.key,ue.target.value),children:[p.jsx("option",{value:"",children:"Select..."}),V.options.map(ue=>p.jsx("option",{value:ue,children:ue},ue))]}):V.type==="sensor-select"?p.jsxs("select",{className:"settings-input",value:r[V.key]||"",onChange:ue=>be(V.key,ue.target.value),disabled:ge,children:[p.jsx("option",{value:"",children:ge?"Loading sensors...":"None (disabled)"}),G.map(ue=>p.jsx("option",{value:ue.id,children:ue.name},ue.id))]}):p.jsx("input",{type:V.isSecret&&!x[V.key]?"password":"text",className:"settings-input",value:r[V.key]||"",onChange:ue=>be(V.key,ue.target.value),placeholder:V.placeholder}),p.jsx("span",{className:"settings-key-hint",children:V.key})]},V.key))]})]},_.category))]})}),p.jsxs("div",{className:"settings-footer",children:[p.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:n,children:"Cancel"}),p.jsx("button",{className:"settings-btn settings-btn-primary",onClick:je,disabled:d||l,children:d?"Saving...":" Save Settings"})]})]})}),document.body):null}const qC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function GC({isOpen:a,onClose:n}){if(E.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,n]),!a)return null;const r=s=>{s.target===s.currentTarget&&n()};return Nh.createPortal(p.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:p.jsxs("div",{className:"shortcuts-modal",children:[p.jsxs("div",{className:"shortcuts-modal-header",children:[p.jsx("h2",{children:" Keyboard Shortcuts"}),p.jsx("button",{className:"shortcuts-close-btn",onClick:n,children:" Close"})]}),p.jsx("div",{className:"shortcuts-modal-body",children:qC.map((s,l)=>p.jsxs("div",{className:"shortcuts-section",children:[p.jsx("h3",{children:s.category}),p.jsx("div",{className:"shortcuts-list",children:s.items.map((c,d)=>p.jsxs("div",{className:"shortcut-row",children:[p.jsx("div",{className:"shortcut-keys",children:c.keys.map((h,m)=>p.jsxs(Da.Fragment,{children:[p.jsx("kbd",{children:h}),m<c.keys.length-1&&p.jsx("span",{className:"key-separator",children:"+"})]},m))}),p.jsx("div",{className:"shortcut-action",children:c.action})]},d))})]},l))}),p.jsx("div",{className:"shortcuts-modal-footer",children:p.jsxs("p",{children:["Press ",p.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function YC({isExpanded:a,onToggle:n}){const[r,s]=E.useState([]),[l,c]=E.useState([]),[d,h]=E.useState(!0),[m,y]=E.useState(!1),[v,b]=E.useState(null),[x,k]=E.useState(!1),[j,Z]=E.useState(null),[H,Q]=E.useState(null),[K,L]=E.useState({username:"",password:"",name:""}),[G,de]=E.useState({username:"",password:""}),[ge,Y]=E.useState(""),[ce,re]=E.useState(5e3),[pe,Re]=E.useState(null),Ae=E.useRef(null),[Ke,st]=E.useState({});E.useEffect(()=>(We(),()=>{Ae.current&&clearInterval(Ae.current)}),[]),E.useEffect(()=>(Ae.current&&clearInterval(Ae.current),a&&r.length>0&&ce>0&&(Ae.current=setInterval(()=>{st(O=>{const z={...O};return r.forEach(oe=>{z[oe.ip]=Date.now()}),z})},ce)),()=>{Ae.current&&clearInterval(Ae.current)}),[a,r,ce]);const We=async()=>{try{h(!0);const O=await ss("/api/cameras");if(O.ok){const z=await O.json();s(z.cameras||[]),z.defaultCredentials&&de(oe=>({...oe,username:z.defaultCredentials.username||""}))}}catch{b("Failed to load cameras")}finally{h(!1)}},N=async()=>{y(!0),b(null);try{const O=await ss("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(O.ok){const z=await O.json();if(z.found&&z.found.length>0){const oe=r.map(Oe=>Oe.ip),he=z.found.filter(Oe=>!oe.includes(Oe.ip));c(he),window.T2Toast&&(he.length>0?window.T2Toast.success(`Found ${he.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${z.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{b("Discovery failed")}finally{y(!1)}},B=async()=>{try{await ss("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{b("Failed to save credentials")}},ne=async(O,z,oe)=>{try{await ss("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:O,name:z||`Camera ${O.split(".").pop()}`,username:oe?.username||G.username,password:oe?.password||G.password})}),c(he=>he.filter(Oe=>Oe.ip!==O)),Z(null),Y(""),await We(),window.T2Toast&&window.T2Toast.success(`Camera ${O} added!`)}catch{b("Failed to add camera")}},ve=async O=>{try{await fetch(`/api/cameras/${O}`,{method:"DELETE"}),await We(),pe===O&&Re(null)}catch{b("Failed to remove camera")}},U=async()=>{if(H)try{await ss("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:H,name:K.name,username:K.username,password:K.password})}),Q(null),st(O=>({...O,[H]:Date.now()})),await We(),window.T2Toast&&window.T2Toast.success(`Camera ${H} updated!`)}catch{b("Failed to update camera")}},S={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},M=O=>{const z=Ke[O]||Date.now();return`/api/cameras/snapshot/${O}?t=${z}`};return p.jsxs("div",{style:S.container,children:[p.jsxs("div",{style:S.header,onClick:n,children:[p.jsxs("div",{style:S.title,children:[p.jsx("span",{style:S.icon,children:""}),p.jsx("span",{children:"Cameras"}),r.length>0&&p.jsx("span",{style:S.badge,children:r.length})]}),p.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&p.jsxs("div",{style:S.content,children:[p.jsxs("div",{style:S.toolbar,children:[p.jsx("button",{style:{...S.btn,...m?S.btnActive:{}},onClick:N,disabled:m,children:m?" Scanning...":" Discover"}),p.jsx("button",{style:{...S.btn,...x?S.btnActive:{}},onClick:()=>k(!x),children:" Settings"}),p.jsxs("select",{style:S.refreshSelect,value:ce,onChange:O=>re(Number(O.target.value)),title:"Refresh interval",children:[p.jsx("option",{value:0,children:"Manual"}),p.jsx("option",{value:2e3,children:"2s"}),p.jsx("option",{value:5e3,children:"5s"}),p.jsx("option",{value:1e4,children:"10s"}),p.jsx("option",{value:3e4,children:"30s"})]})]}),x&&p.jsxs("div",{style:S.settings,children:[p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Select Camera to Configure"}),p.jsxs("select",{style:{...S.input,cursor:"pointer"},value:H||"",onChange:O=>{const z=O.target.value;if(!z){Q(null),L({username:"",password:"",name:""});return}const oe=r.find(he=>he.ip===z);oe?(Q(z),L({name:oe.name||"",username:oe.username||"",password:""})):(Q(z),L({name:`Camera ${z.split(".").pop()}`,username:G.username||"",password:G.password||""}))},children:[p.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&p.jsx("optgroup",{label:" Configured Cameras",children:r.map(O=>p.jsxs("option",{value:O.ip,children:[O.name," (",O.ip,")"]},O.ip))}),l.length>0&&p.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(O=>p.jsxs("option",{value:O.ip,children:[O.ip," (Ports: ",O.ports.join(", "),")"]},O.ip))})]})]}),H&&p.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Camera Name"}),p.jsx("input",{type:"text",style:S.input,value:K.name,onChange:O=>L(z=>({...z,name:O.target.value})),placeholder:"Front Door"})]}),p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Username"}),p.jsx("input",{type:"text",style:S.input,value:K.username,onChange:O=>L(z=>({...z,username:O.target.value})),placeholder:"admin"})]}),p.jsxs("div",{style:S.inputGroup,children:[p.jsxs("label",{style:S.label,children:["Password ",r.find(O=>O.ip===H)?"(leave blank to keep current)":""]}),p.jsx("input",{type:"password",style:S.input,value:K.password,onChange:O=>L(z=>({...z,password:O.target.value})),placeholder:""})]}),p.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:p.jsx("button",{style:{...S.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(z=>z.ip===H)?ne(H,K.name,K):U()},children:r.find(O=>O.ip===H)?" Save Changes":" Add Camera"})})]}),p.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[p.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("input",{type:"text",style:{...S.input,flex:1},value:G.username,onChange:O=>de(z=>({...z,username:O.target.value})),placeholder:"Username"}),p.jsx("input",{type:"password",style:{...S.input,flex:1},value:G.password,onChange:O=>de(z=>({...z,password:O.target.value})),placeholder:"Password"}),p.jsx("button",{style:S.btn,onClick:B,title:"Save as default",children:""})]})]}),p.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[p.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("input",{type:"text",id:"addCameraIp",style:{...S.input,flex:1},placeholder:"192.168.1.100",onKeyDown:O=>{if(O.key==="Enter"&&O.target.value){const z=O.target.value;!l.find(oe=>oe.ip===z)&&!r.find(oe=>oe.ip===z)&&c(oe=>[...oe,{ip:z,ports:["manual"]}]),Q(z),L({name:`Camera ${z.split(".").pop()}`,username:G.username||"",password:G.password||""}),O.target.value=""}}}),p.jsx("button",{style:S.btn,onClick:()=>{const O=document.getElementById("addCameraIp"),z=O?.value;z&&(!l.find(oe=>oe.ip===z)&&!r.find(oe=>oe.ip===z)&&c(oe=>[...oe,{ip:z,ports:["manual"]}]),Q(z),L({name:`Camera ${z.split(".").pop()}`,username:G.username||"",password:G.password||""}),O.value="")},children:"Configure"})]})]})]}),v&&p.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",v]}),d?p.jsx("div",{style:S.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?p.jsxs("div",{style:S.emptyState,children:[p.jsx("p",{children:"No cameras configured"}),p.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):p.jsx("div",{style:S.grid,children:r.map(O=>p.jsxs("div",{style:{...S.cameraCard,...pe===O.ip?S.cameraCardSelected:{}},onClick:()=>Re(O.ip),children:[p.jsx("img",{src:M(O.ip),alt:O.name,style:S.cameraImage,onError:z=>{z.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),p.jsxs("div",{style:S.cameraInfo,children:[p.jsx("span",{style:S.cameraName,title:O.ip,children:O.name}),p.jsxs("div",{style:{display:"flex",gap:"4px"},children:[p.jsx("button",{style:{...S.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:z=>{z.stopPropagation(),k(!0),Q(O.ip),L({name:O.name||"",username:O.username||"",password:""})},title:"Edit credentials",children:""}),p.jsx("button",{style:S.deleteBtn,onClick:z=>{z.stopPropagation(),ve(O.ip)},title:"Remove camera",children:""})]})]})]},O.ip))})]}),pe&&p.jsxs("div",{style:S.fullView,onClick:()=>Re(null),children:[p.jsx("img",{src:M(pe),alt:"Camera feed",style:S.fullImage}),p.jsx("button",{style:S.closeBtn,onClick:()=>Re(null),children:" Close"}),p.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(O=>O.ip===pe)?.name||pe})]})]})}const qa=Object.create(null);qa.open="0";qa.close="1";qa.ping="2";qa.pong="3";qa.message="4";qa.upgrade="5";qa.noop="6";const wc=Object.create(null);Object.keys(qa).forEach(a=>{wc[qa[a]]=a});const oh={type:"error",data:"parser error"},A1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_1=typeof ArrayBuffer=="function",D1=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Gh=({type:a,data:n},r,s)=>A1&&n instanceof Blob?r?s(n):w0(n,s):_1&&(n instanceof ArrayBuffer||D1(n))?r?s(n):w0(new Blob([n]),s):s(qa[a]+(n||"")),w0=(a,n)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];n("b"+(s||""))},r.readAsDataURL(a)};function S0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let jf;function FC(a,n){if(A1&&a.data instanceof Blob)return a.data.arrayBuffer().then(S0).then(n);if(_1&&(a.data instanceof ArrayBuffer||D1(a.data)))return n(S0(a.data));Gh(a,!1,r=>{jf||(jf=new TextEncoder),n(jf.encode(r))})}const x0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Eo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<x0.length;a++)Eo[x0.charCodeAt(a)]=a;const PC=a=>{let n=a.length*.75,r=a.length,s,l=0,c,d,h,m;a[a.length-1]==="="&&(n--,a[a.length-2]==="="&&n--);const y=new ArrayBuffer(n),v=new Uint8Array(y);for(s=0;s<r;s+=4)c=Eo[a.charCodeAt(s)],d=Eo[a.charCodeAt(s+1)],h=Eo[a.charCodeAt(s+2)],m=Eo[a.charCodeAt(s+3)],v[l++]=c<<2|d>>4,v[l++]=(d&15)<<4|h>>2,v[l++]=(h&3)<<6|m&63;return y},ZC=typeof ArrayBuffer=="function",Yh=(a,n)=>{if(typeof a!="string")return{type:"message",data:R1(a,n)};const r=a.charAt(0);return r==="b"?{type:"message",data:XC(a.substring(1),n)}:wc[r]?a.length>1?{type:wc[r],data:a.substring(1)}:{type:wc[r]}:oh},XC=(a,n)=>{if(ZC){const r=PC(a);return R1(r,n)}else return{base64:!0,data:a}},R1=(a,n)=>{switch(n){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},M1="",KC=(a,n)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,d)=>{Gh(c,!1,h=>{s[d]=h,++l===r&&n(s.join(M1))})})},QC=(a,n)=>{const r=a.split(M1),s=[];for(let l=0;l<r.length;l++){const c=Yh(r[l],n);if(s.push(c),c.type==="error")break}return s};function JC(){return new TransformStream({transform(a,n){FC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),n.enqueue(l),n.enqueue(r)})}})}let Af;function cc(a){return a.reduce((n,r)=>n+r.length,0)}function uc(a,n){if(a[0].length===n)return a.shift();const r=new Uint8Array(n);let s=0;for(let l=0;l<n;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function WC(a,n){Af||(Af=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(d,h){for(r.push(d);;){if(s===0){if(cc(r)<1)break;const m=uc(r,1);c=(m[0]&128)===128,l=m[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(cc(r)<2)break;const m=uc(r,2);l=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),s=3}else if(s===2){if(cc(r)<8)break;const m=uc(r,8),y=new DataView(m.buffer,m.byteOffset,m.length),v=y.getUint32(0);if(v>Math.pow(2,21)-1){h.enqueue(oh);break}l=v*Math.pow(2,32)+y.getUint32(4),s=3}else{if(cc(r)<l)break;const m=uc(r,l);h.enqueue(Yh(c?m:Af.decode(m),n)),s=0}if(l===0||l>a){h.enqueue(oh);break}}}})}const z1=4;function pn(a){if(a)return eT(a)}function eT(a){for(var n in pn.prototype)a[n]=pn.prototype[n];return a}pn.prototype.on=pn.prototype.addEventListener=function(a,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(n),this};pn.prototype.once=function(a,n){function r(){this.off(a,r),n.apply(this,arguments)}return r.fn=n,this.on(a,r),this};pn.prototype.off=pn.prototype.removeListener=pn.prototype.removeAllListeners=pn.prototype.removeEventListener=function(a,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===n||s.fn===n){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};pn.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,n)}return this};pn.prototype.emitReserved=pn.prototype.emit;pn.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};pn.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Gc=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),ya=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),tT="arraybuffer";function L1(a,...n){return n.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const nT=ya.setTimeout,aT=ya.clearTimeout;function Yc(a,n){n.useNativeTimers?(a.setTimeoutFn=nT.bind(ya),a.clearTimeoutFn=aT.bind(ya)):(a.setTimeoutFn=ya.setTimeout.bind(ya),a.clearTimeoutFn=ya.clearTimeout.bind(ya))}const rT=1.33;function iT(a){return typeof a=="string"?sT(a):Math.ceil((a.byteLength||a.size)*rT)}function sT(a){let n=0,r=0;for(let s=0,l=a.length;s<l;s++)n=a.charCodeAt(s),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(s++,r+=4);return r}function B1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function oT(a){let n="";for(let r in a)a.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return n}function lT(a){let n={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");n[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return n}class cT extends Error{constructor(n,r,s){super(n),this.description=r,this.context=s,this.type="TransportError"}}class Fh extends pn{constructor(n){super(),this.writable=!1,Yc(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,s){return super.emitReserved("error",new cT(n,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=Yh(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=oT(n);return r.length?"?"+r:""}}class uT extends Fh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};QC(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,KC(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=B1()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let U1=!1;try{U1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dT=U1;function fT(){}class hT extends uT{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||s!==n.port}}doWrite(n,r){const s=this.request({method:"POST",data:n});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=n}}class Va extends pn{constructor(n,r,s){super(),this.createRequest=n,Yc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var n;const r=L1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Va.requestsCount++,Va.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=fT,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Va.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Va.requestsCount=0;Va.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",E0);else if(typeof addEventListener=="function"){const a="onpagehide"in ya?"pagehide":"unload";addEventListener(a,E0,!1)}}function E0(){for(let a in Va.requests)Va.requests.hasOwnProperty(a)&&Va.requests[a].abort()}const pT=(function(){const a=I1({xdomain:!1});return a&&a.responseType!==null})();class mT extends hT{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=pT&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new Va(I1,this.uri(),n)}}function I1(a){const n=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||dT))return new XMLHttpRequest}catch{}if(!n)try{return new ya[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yT extends Fh{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,s=$1?{}:L1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;Gh(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Gc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=B1()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const _f=ya.WebSocket||ya.MozWebSocket;class gT extends yT{createSocket(n,r,s){return $1?new _f(n,r,s):r?new _f(n,r):new _f(n)}doWrite(n,r){this.ws.send(r)}}class vT extends Fh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=WC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=n.readable.pipeThrough(r).getReader(),l=JC();l.readable.pipeTo(n.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:h,value:m})=>{h||(this.onPacket(m),c())}).catch(h=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;this._writer.write(s).then(()=>{l&&Gc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const bT={websocket:gT,webtransport:vT,polling:mT},wT=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ST=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lh(a){if(a.length>8e3)throw"URI too long";const n=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=wT.exec(a||""),c={},d=14;for(;d--;)c[ST[d]]=l[d]||"";return r!=-1&&s!=-1&&(c.source=n,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=xT(c,c.path),c.queryKey=ET(c,c.query),c}function xT(a,n){const r=/\/{2,9}/g,s=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&s.splice(0,1),n.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ET(a,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const ch=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sc=[];ch&&addEventListener("offline",()=>{Sc.forEach(a=>a())},!1);class Pr extends pn{constructor(n,r){if(super(),this.binaryType=tT,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const s=lh(n);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=lh(r.host).host);Yc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=lT(this.opts.query)),ch&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=z1,r.transport=n,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Pr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Pr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=iT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,Gc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,s){return this._sendPacket("message",n,r,s),this}send(n,r,s){return this._sendPacket("message",n,r,s),this}_sendPacket(n,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:n,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}_onError(n){if(Pr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ch&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Sc.indexOf(this._offlineEventListener);s!==-1&&Sc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Pr.protocol=z1;class kT extends Pr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),s=!1;Pr.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!s)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Pr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=r.name,this.emitReserved("upgradeError",x)}}))};function c(){s||(s=!0,v(),r.close(),r=null)}const d=b=>{const x=new Error("probe error: "+b);x.transport=r.name,c(),this.emitReserved("upgradeError",x)};function h(){d("transport closed")}function m(){d("socket closed")}function y(b){r&&b.name!==r.name&&c()}const v=()=>{r.removeListener("open",l),r.removeListener("error",d),r.removeListener("close",h),this.off("close",m),this.off("upgrading",y)};r.once("open",l),r.once("error",d),r.once("close",h),this.once("close",m),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let s=0;s<n.length;s++)~this.transports.indexOf(n[s])&&r.push(n[s]);return r}}let CT=class extends kT{constructor(n,r={}){const s=typeof n=="object"?n:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>bT[l]).filter(l=>!!l)),super(n,s)}};function TT(a,n="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=lh(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+n,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const NT=typeof ArrayBuffer=="function",OT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,H1=Object.prototype.toString,jT=typeof Blob=="function"||typeof Blob<"u"&&H1.call(Blob)==="[object BlobConstructor]",AT=typeof File=="function"||typeof File<"u"&&H1.call(File)==="[object FileConstructor]";function Ph(a){return NT&&(a instanceof ArrayBuffer||OT(a))||jT&&a instanceof Blob||AT&&a instanceof File}function xc(a,n){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(xc(a[r]))return!0;return!1}if(Ph(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return xc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&xc(a[r]))return!0;return!1}function _T(a){const n=[],r=a.data,s=a;return s.data=uh(r,n),s.attachments=n.length,{packet:s,buffers:n}}function uh(a,n){if(!a)return a;if(Ph(a)){const r={_placeholder:!0,num:n.length};return n.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=uh(a[s],n);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=uh(a[s],n));return r}return a}function DT(a,n){return a.data=dh(a.data,n),delete a.attachments,a}function dh(a,n){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<n.length)return n[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=dh(a[r],n);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=dh(a[r],n));return a}const RT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],MT=5;var mt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(mt||(mt={}));class zT{constructor(n){this.replacer=n}encode(n){return(n.type===mt.EVENT||n.type===mt.ACK)&&xc(n)?this.encodeAsBinary({type:n.type===mt.EVENT?mt.BINARY_EVENT:mt.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===mt.BINARY_EVENT||n.type===mt.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=_T(n),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function k0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Zh extends pn{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const s=r.type===mt.BINARY_EVENT;s||r.type===mt.BINARY_ACK?(r.type=s?mt.EVENT:mt.ACK,this.reconstructor=new LT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Ph(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const s={type:Number(n.charAt(0))};if(mt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===mt.BINARY_EVENT||s.type===mt.BINARY_ACK){const c=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const d=n.substring(c,r);if(d!=Number(d)||n.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(n.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););s.nsp=n.substring(c,r)}else s.nsp="/";const l=n.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const d=n.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===n.length)break}s.id=Number(n.substring(c,r+1))}if(n.charAt(++r)){const c=this.tryParse(n.substr(r));if(Zh.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case mt.CONNECT:return k0(r);case mt.DISCONNECT:return r===void 0;case mt.CONNECT_ERROR:return typeof r=="string"||k0(r);case mt.EVENT:case mt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&RT.indexOf(r[0])===-1);case mt.ACK:case mt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class LT{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=DT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const BT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Zh,Encoder:zT,get PacketType(){return mt},protocol:MT},Symbol.toStringTag,{value:"Module"}));function ja(a,n,r){return a.on(n,r),function(){a.off(n,r)}}const UT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class V1 extends pn{constructor(n,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[ja(n,"open",this.onopen.bind(this)),ja(n,"packet",this.onpacket.bind(this)),ja(n,"error",this.onerror.bind(this)),ja(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var s,l,c;if(UT.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:mt.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,b=r.pop();this._registerAckCallback(v,b),d.id=v}const h=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,m=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!h||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(n,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[n]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===n&&this.sendBuffer.splice(h,1);r.call(this,new Error("operation has timed out"))},l),d=(...h)=>{this.io.clearTimeoutFn(c),r.apply(this,h)};d.withError=!0,this.acks[n]=d}emitWithAck(n,...r){return new Promise((s,l)=>{const c=(d,h)=>d?l(d):s(h);c.withError=!0,r.push(c),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:mt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(s=>String(s.id)===n)){const s=this.acks[n];delete this.acks[n],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case mt.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mt.EVENT:case mt.BINARY_EVENT:this.onevent(n);break;case mt.ACK:case mt.BINARY_ACK:this.onack(n);break;case mt.DISCONNECT:this.ondisconnect();break;case mt.CONNECT_ERROR:this.destroy();const s=new Error(n.data.message);s.data=n.data.data,this.emitReserved("connect_error",s);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:mt.ACK,id:n,data:l}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,n.data)}}}function Ss(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}Ss.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*a);a=(Math.floor(n*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};Ss.prototype.reset=function(){this.attempts=0};Ss.prototype.setMin=function(a){this.ms=a};Ss.prototype.setMax=function(a){this.max=a};Ss.prototype.setJitter=function(a){this.jitter=a};class fh extends pn{constructor(n,r){var s;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Yc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ss({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const l=r.parser||BT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new CT(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=ja(r,"open",function(){s.onopen(),n&&n()}),c=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),n?n(h):this.maybeReconnectOnOpen()},d=ja(r,"error",c);if(this._timeout!==!1){const h=this._timeout,m=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},h);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(l),this.subs.push(d),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(ja(n,"ping",this.onping.bind(this)),ja(n,"data",this.ondata.bind(this)),ja(n,"error",this.onerror.bind(this)),ja(n,"close",this.onclose.bind(this)),ja(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){Gc(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let s=this.nsps[n];return s?this._autoConnect&&!s.active&&s.connect():(s=new V1(this,n,r),this.nsps[n]=s),s}_destroy(n){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let s=0;s<r.length;s++)this.engine.write(r[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(l=>{l?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",l)):n.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const wo={};function Ec(a,n){typeof a=="object"&&(n=a,a=void 0),n=n||{};const r=TT(a,n.path||"/socket.io"),s=r.source,l=r.id,c=r.path,d=wo[l]&&c in wo[l].nsps,h=n.forceNew||n["force new connection"]||n.multiplex===!1||d;let m;return h?m=new fh(s,n):(wo[l]||(wo[l]=new fh(s,n)),m=wo[l]),r.query&&!n.query&&(n.query=r.queryKey),m.socket(r.path,n)}Object.assign(Ec,{Manager:fh,Socket:V1,io:Ec,connect:Ec});const IT=typeof window<"u"?window.location.origin:"http://localhost:3000",C0=qc(),$T=C0?`${C0}/socket.io`:"/socket.io",me=Ec(IT,{path:$T,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]}),q1=()=>{me.connected||me.connect()},G1=()=>{me.connected&&me.disconnect()},HT=Object.freeze(Object.defineProperty({__proto__:null,connectSocket:q1,disconnectSocket:G1,socket:me},Symbol.toStringTag,{value:"Module"}));class VT{constructor(){this.nodes=new Map}register(n,r){typeof n=="object"&&r===void 0&&(r=n,n=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(n,r)}get(n){return this.nodes.get(n)}getAll(){return Array.from(this.nodes.values()).filter(n=>n)}getByLabel(n){for(const r of this.nodes.values())if(r.label===n)return r;return null}getByInstance(n){for(const r of this.nodes.values())if(r.nodeClass&&n instanceof r.nodeClass)return r;return null}}const Mn=new VT;class xi extends Error{}class qT extends xi{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class GT extends xi{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class YT extends xi{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class ls extends xi{}class Y1 extends xi{constructor(n){super(`Invalid unit ${n}`)}}class zn extends xi{}class $r extends xi{constructor(){super("Zone is an abstract class")}}const Ce="numeric",Ra="short",ra="long",Rc={year:Ce,month:Ce,day:Ce},F1={year:Ce,month:Ra,day:Ce},FT={year:Ce,month:Ra,day:Ce,weekday:Ra},P1={year:Ce,month:ra,day:Ce},Z1={year:Ce,month:ra,day:Ce,weekday:ra},X1={hour:Ce,minute:Ce},K1={hour:Ce,minute:Ce,second:Ce},Q1={hour:Ce,minute:Ce,second:Ce,timeZoneName:Ra},J1={hour:Ce,minute:Ce,second:Ce,timeZoneName:ra},W1={hour:Ce,minute:Ce,hourCycle:"h23"},ew={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23"},tw={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:Ra},nw={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:ra},aw={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce},rw={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce,second:Ce},iw={year:Ce,month:Ra,day:Ce,hour:Ce,minute:Ce},sw={year:Ce,month:Ra,day:Ce,hour:Ce,minute:Ce,second:Ce},PT={year:Ce,month:Ra,day:Ce,weekday:Ra,hour:Ce,minute:Ce},ow={year:Ce,month:ra,day:Ce,hour:Ce,minute:Ce,timeZoneName:Ra},lw={year:Ce,month:ra,day:Ce,hour:Ce,minute:Ce,second:Ce,timeZoneName:Ra},cw={year:Ce,month:ra,day:Ce,weekday:ra,hour:Ce,minute:Ce,timeZoneName:ra},uw={year:Ce,month:ra,day:Ce,weekday:ra,hour:Ce,minute:Ce,second:Ce,timeZoneName:ra};class xs{get type(){throw new $r}get name(){throw new $r}get ianaName(){return this.name}get isUniversal(){throw new $r}offsetName(n,r){throw new $r}formatOffset(n,r){throw new $r}offset(n){throw new $r}equals(n){throw new $r}get isValid(){throw new $r}}let Df=null;class Uo extends xs{static get instance(){return Df===null&&(Df=new Uo),Df}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return xw(n,r,s)}formatOffset(n,r){return _o(this.offset(n),r)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const hh=new Map;function ZT(a){let n=hh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),hh.set(a,n)),n}const XT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function KT(a,n){const r=a.format(n).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,d,h,m,y,v]=s;return[d,l,c,h,m,y,v]}function QT(a,n){const r=a.formatToParts(n),s=[];for(let l=0;l<r.length;l++){const{type:c,value:d}=r[l],h=XT[c];c==="era"?s[h]=d:Ye(h)||(s[h]=parseInt(d,10))}return s}const Rf=new Map;class Ga extends xs{static create(n){let r=Rf.get(n);return r===void 0&&Rf.set(n,r=new Ga(n)),r}static resetCache(){Rf.clear(),hh.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=Ga.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return xw(n,r,s,this.name)}formatOffset(n,r){return _o(this.offset(n),r)}offset(n){if(!this.valid)return NaN;const r=new Date(n);if(isNaN(r))return NaN;const s=ZT(this.name);let[l,c,d,h,m,y,v]=s.formatToParts?QT(s,r):KT(s,r);h==="BC"&&(l=-Math.abs(l)+1);const x=Pc({year:l,month:c,day:d,hour:m===24?0:m,minute:y,second:v,millisecond:0});let k=+r;const j=k%1e3;return k-=j>=0?j:1e3+j,(x-k)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let T0={};function JT(a,n={}){const r=JSON.stringify([a,n]);let s=T0[r];return s||(s=new Intl.ListFormat(a,n),T0[r]=s),s}const ph=new Map;function mh(a,n={}){const r=JSON.stringify([a,n]);let s=ph.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,n),ph.set(r,s)),s}const yh=new Map;function WT(a,n={}){const r=JSON.stringify([a,n]);let s=yh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,n),yh.set(r,s)),s}const gh=new Map;function eN(a,n={}){const{base:r,...s}=n,l=JSON.stringify([a,s]);let c=gh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,n),gh.set(l,c)),c}let ko=null;function tN(){return ko||(ko=new Intl.DateTimeFormat().resolvedOptions().locale,ko)}const vh=new Map;function dw(a){let n=vh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat(a).resolvedOptions(),vh.set(a,n)),n}const bh=new Map;function nN(a){let n=bh.get(a);if(!n){const r=new Intl.Locale(a);n="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in n||(n={...fw,...n}),bh.set(a,n)}return n}function aN(a){const n=a.indexOf("-x-");n!==-1&&(a=a.substring(0,n));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=mh(a).resolvedOptions(),l=a}catch{const m=a.substring(0,r);s=mh(m).resolvedOptions(),l=m}const{numberingSystem:c,calendar:d}=s;return[l,c,d]}}function rN(a,n,r){return(r||n)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),n&&(a+=`-nu-${n}`)),a}function iN(a){const n=[];for(let r=1;r<=12;r++){const s=Fe.utc(2009,r,1);n.push(a(s))}return n}function sN(a){const n=[];for(let r=1;r<=7;r++){const s=Fe.utc(2016,11,13+r);n.push(a(s))}return n}function dc(a,n,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(n):s(n)}function oN(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||dw(a.locale).numberingSystem==="latn"}class lN{constructor(n,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...d}=s;if(!r||Object.keys(d).length>0){const h={useGrouping:!1,...s};s.padTo>0&&(h.minimumIntegerDigits=s.padTo),this.inf=WT(n,h)}}format(n){if(this.inf){const r=this.floor?Math.floor(n):n;return this.inf.format(r)}else{const r=this.floor?Math.floor(n):Wh(n,3);return fn(r,this.padTo)}}}class cN{constructor(n,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const d=-1*(n.offset/60),h=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;n.offset!==0&&Ga.create(h).valid?(l=h,this.dt=n):(l="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,l=n.zone.name):(l="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=mh(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class uN{constructor(n,r,s){this.opts={style:"long",...s},!r&&ww()&&(this.rtf=eN(n,s))}format(n,r){return this.rtf?this.rtf.format(n,r):_N(r,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,r){return this.rtf?this.rtf.formatToParts(n,r):[]}}const fw={firstDay:1,minimalDays:4,weekend:[6,7]};class Tt{static fromOpts(n){return Tt.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,r,s,l,c=!1){const d=n||Zt.defaultLocale,h=d||(c?"en-US":tN()),m=r||Zt.defaultNumberingSystem,y=s||Zt.defaultOutputCalendar,v=Sh(l)||Zt.defaultWeekSettings;return new Tt(h,m,y,v,d)}static resetCache(){ko=null,ph.clear(),yh.clear(),gh.clear(),vh.clear(),bh.clear()}static fromObject({locale:n,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return Tt.create(n,r,s,l)}constructor(n,r,s,l,c){const[d,h,m]=aN(n);this.locale=d,this.numberingSystem=r||h||null,this.outputCalendar=s||m||null,this.weekSettings=l,this.intl=rN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=oN(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&r?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:Tt.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,Sh(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,r=!1){return dc(this,n,Cw,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:n,day:"numeric"}:{month:n},c=r?"format":"standalone";if(!this.monthsCache[c][n]){const d=s?h=>this.dtFormatter(h,l).format():h=>this.extract(h,l,"month");this.monthsCache[c][n]=iN(d)}return this.monthsCache[c][n]})}weekdays(n,r=!1){return dc(this,n,Ow,()=>{const s=r?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},l=r?"format":"standalone";return this.weekdaysCache[l][n]||(this.weekdaysCache[l][n]=sN(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][n]})}meridiems(){return dc(this,void 0,()=>jw,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Fe.utc(2016,11,13,9),Fe.utc(2016,11,13,19)].map(r=>this.extract(r,n,"dayperiod"))}return this.meridiemCache})}eras(n){return dc(this,n,Aw,()=>{const r={era:n};return this.eraCache[n]||(this.eraCache[n]=[Fe.utc(-40,1,1),Fe.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[n]})}extract(n,r,s){const l=this.dtFormatter(n,r),c=l.formatToParts(),d=c.find(h=>h.type.toLowerCase()===s);return d?d.value:null}numberFormatter(n={}){return new lN(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,r={}){return new cN(n,this.intl,r)}relFormatter(n={}){return new uN(this.intl,this.isEnglish(),n)}listFormatter(n={}){return JT(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||dw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Sw()?nN(this.locale):fw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Mf=null;class Bn extends xs{static get utcInstance(){return Mf===null&&(Mf=new Bn(0)),Mf}static instance(n){return n===0?Bn.utcInstance:new Bn(n)}static parseSpecifier(n){if(n){const r=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Bn(Zc(r[1],r[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${_o(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${_o(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,r){return _o(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class hw extends xs{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Yr(a,n){if(Ye(a)||a===null)return n;if(a instanceof xs)return a;if(yN(a)){const r=a.toLowerCase();return r==="default"?n:r==="local"||r==="system"?Uo.instance:r==="utc"||r==="gmt"?Bn.utcInstance:Bn.parseSpecifier(r)||Ga.create(a)}else return Zr(a)?Bn.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new hw(a)}const Xh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},N0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},dN=Xh.hanidec.replace(/[\[|\]]/g,"").split("");function fN(a){let n=parseInt(a,10);if(isNaN(n)){n="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Xh.hanidec)!==-1)n+=dN.indexOf(a[r]);else for(const l in N0){const[c,d]=N0[l];s>=c&&s<=d&&(n+=s-c)}}return parseInt(n,10)}else return n}const wh=new Map;function hN(){wh.clear()}function Na({numberingSystem:a},n=""){const r=a||"latn";let s=wh.get(r);s===void 0&&(s=new Map,wh.set(r,s));let l=s.get(n);return l===void 0&&(l=new RegExp(`${Xh[r]}${n}`),s.set(n,l)),l}let O0=()=>Date.now(),j0="system",A0=null,_0=null,D0=null,R0=60,M0,z0=null;class Zt{static get now(){return O0}static set now(n){O0=n}static set defaultZone(n){j0=n}static get defaultZone(){return Yr(j0,Uo.instance)}static get defaultLocale(){return A0}static set defaultLocale(n){A0=n}static get defaultNumberingSystem(){return _0}static set defaultNumberingSystem(n){_0=n}static get defaultOutputCalendar(){return D0}static set defaultOutputCalendar(n){D0=n}static get defaultWeekSettings(){return z0}static set defaultWeekSettings(n){z0=Sh(n)}static get twoDigitCutoffYear(){return R0}static set twoDigitCutoffYear(n){R0=n%100}static get throwOnInvalid(){return M0}static set throwOnInvalid(n){M0=n}static resetCaches(){Tt.resetCache(),Ga.resetCache(),Fe.resetCache(),hN()}}class Aa{constructor(n,r){this.reason=n,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const pw=[0,31,59,90,120,151,181,212,243,273,304,334],mw=[0,31,60,91,121,152,182,213,244,274,305,335];function ga(a,n){return new Aa("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${a}, which is invalid`)}function Kh(a,n,r){const s=new Date(Date.UTC(a,n-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function yw(a,n,r){return r+(Io(a)?mw:pw)[n-1]}function gw(a,n){const r=Io(a)?mw:pw,s=r.findIndex(c=>c<n),l=n-r[s];return{month:s+1,day:l}}function Qh(a,n){return(a-n+7)%7+1}function Mc(a,n=4,r=1){const{year:s,month:l,day:c}=a,d=yw(s,l,c),h=Qh(Kh(s,l,c),r);let m=Math.floor((d-h+14-n)/7),y;return m<1?(y=s-1,m=zo(y,n,r)):m>zo(s,n,r)?(y=s+1,m=1):y=s,{weekYear:y,weekNumber:m,weekday:h,...Xc(a)}}function L0(a,n=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,d=Qh(Kh(s,1,n),r),h=us(s);let m=l*7+c-d-7+n,y;m<1?(y=s-1,m+=us(y)):m>h?(y=s+1,m-=us(s)):y=s;const{month:v,day:b}=gw(y,m);return{year:y,month:v,day:b,...Xc(a)}}function zf(a){const{year:n,month:r,day:s}=a,l=yw(n,r,s);return{year:n,ordinal:l,...Xc(a)}}function B0(a){const{year:n,ordinal:r}=a,{month:s,day:l}=gw(n,r);return{year:n,month:s,day:l,...Xc(a)}}function U0(a,n){if(!Ye(a.localWeekday)||!Ye(a.localWeekNumber)||!Ye(a.localWeekYear)){if(!Ye(a.weekday)||!Ye(a.weekNumber)||!Ye(a.weekYear))throw new ls("Cannot mix locale-based week fields with ISO-based week fields");return Ye(a.localWeekday)||(a.weekday=a.localWeekday),Ye(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ye(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function pN(a,n=4,r=1){const s=Fc(a.weekYear),l=va(a.weekNumber,1,zo(a.weekYear,n,r)),c=va(a.weekday,1,7);return s?l?c?!1:ga("weekday",a.weekday):ga("week",a.weekNumber):ga("weekYear",a.weekYear)}function mN(a){const n=Fc(a.year),r=va(a.ordinal,1,us(a.year));return n?r?!1:ga("ordinal",a.ordinal):ga("year",a.year)}function vw(a){const n=Fc(a.year),r=va(a.month,1,12),s=va(a.day,1,zc(a.year,a.month));return n?r?s?!1:ga("day",a.day):ga("month",a.month):ga("year",a.year)}function bw(a){const{hour:n,minute:r,second:s,millisecond:l}=a,c=va(n,0,23)||n===24&&r===0&&s===0&&l===0,d=va(r,0,59),h=va(s,0,59),m=va(l,0,999);return c?d?h?m?!1:ga("millisecond",l):ga("second",s):ga("minute",r):ga("hour",n)}function Ye(a){return typeof a>"u"}function Zr(a){return typeof a=="number"}function Fc(a){return typeof a=="number"&&a%1===0}function yN(a){return typeof a=="string"}function gN(a){return Object.prototype.toString.call(a)==="[object Date]"}function ww(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Sw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function vN(a){return Array.isArray(a)?a:[a]}function I0(a,n,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[n(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function bN(a,n){return n.reduce((r,s)=>(r[s]=a[s],r),{})}function gs(a,n){return Object.prototype.hasOwnProperty.call(a,n)}function Sh(a){if(a==null)return null;if(typeof a!="object")throw new zn("Week settings must be an object");if(!va(a.firstDay,1,7)||!va(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(n=>!va(n,1,7)))throw new zn("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function va(a,n,r){return Fc(a)&&a>=n&&a<=r}function wN(a,n){return a-n*Math.floor(a/n)}function fn(a,n=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(n,"0"):s=(""+a).padStart(n,"0"),s}function Gr(a){if(!(Ye(a)||a===null||a===""))return parseInt(a,10)}function pi(a){if(!(Ye(a)||a===null||a===""))return parseFloat(a)}function Jh(a){if(!(Ye(a)||a===null||a==="")){const n=parseFloat("0."+a)*1e3;return Math.floor(n)}}function Wh(a,n,r="round"){const s=10**n;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Io(a){return a%4===0&&(a%100!==0||a%400===0)}function us(a){return Io(a)?366:365}function zc(a,n){const r=wN(n-1,12)+1,s=a+(n-r)/12;return r===2?Io(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Pc(a){let n=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(n=new Date(n),n.setUTCFullYear(a.year,a.month-1,a.day)),+n}function $0(a,n,r){return-Qh(Kh(a,1,n),r)+n-1}function zo(a,n=4,r=1){const s=$0(a,n,r),l=$0(a+1,n,r);return(us(a)-s+l)/7}function xh(a){return a>99?a:a>Zt.twoDigitCutoffYear?1900+a:2e3+a}function xw(a,n,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const d={timeZoneName:n,...c},h=new Intl.DateTimeFormat(r,d).formatToParts(l).find(m=>m.type.toLowerCase()==="timezonename");return h?h.value:null}function Zc(a,n){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(n,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function Ew(a){const n=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(n))throw new zn(`Invalid unit value ${a}`);return n}function Lc(a,n){const r={};for(const s in a)if(gs(a,s)){const l=a[s];if(l==null)continue;r[n(s)]=Ew(l)}return r}function _o(a,n){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(n){case"short":return`${l}${fn(r,2)}:${fn(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${fn(r,2)}${fn(s,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Xc(a){return bN(a,["hour","minute","second","millisecond"])}const SN=["January","February","March","April","May","June","July","August","September","October","November","December"],kw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xN=["J","F","M","A","M","J","J","A","S","O","N","D"];function Cw(a){switch(a){case"narrow":return[...xN];case"short":return[...kw];case"long":return[...SN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Tw=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Nw=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],EN=["M","T","W","T","F","S","S"];function Ow(a){switch(a){case"narrow":return[...EN];case"short":return[...Nw];case"long":return[...Tw];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const jw=["AM","PM"],kN=["Before Christ","Anno Domini"],CN=["BC","AD"],TN=["B","A"];function Aw(a){switch(a){case"narrow":return[...TN];case"short":return[...CN];case"long":return[...kN];default:return null}}function NN(a){return jw[a.hour<12?0:1]}function ON(a,n){return Ow(n)[a.weekday-1]}function jN(a,n){return Cw(n)[a.month-1]}function AN(a,n){return Aw(n)[a.year<0?0:1]}function _N(a,n,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const b=a==="days";switch(n){case 1:return b?"tomorrow":`next ${l[a][0]}`;case-1:return b?"yesterday":`last ${l[a][0]}`;case 0:return b?"today":`this ${l[a][0]}`}}const d=Object.is(n,-0)||n<0,h=Math.abs(n),m=h===1,y=l[a],v=s?m?y[1]:y[2]||y[1]:m?l[a][0]:a;return d?`${h} ${v} ago`:`in ${h} ${v}`}function H0(a,n){let r="";for(const s of a)s.literal?r+=s.val:r+=n(s.val);return r}const DN={D:Rc,DD:F1,DDD:P1,DDDD:Z1,t:X1,tt:K1,ttt:Q1,tttt:J1,T:W1,TT:ew,TTT:tw,TTTT:nw,f:aw,ff:iw,fff:ow,ffff:cw,F:rw,FF:sw,FFF:lw,FFFF:uw};class Ln{static create(n,r={}){return new Ln(n,r)}static parseFormat(n){let r=null,s="",l=!1;const c=[];for(let d=0;d<n.length;d++){const h=n.charAt(d);h==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||h===r?s+=h:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=h,r=h)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(n){return DN[n]}constructor(n,r){this.opts=r,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...r}).format()}dtFormatter(n,r={}){return this.loc.dtFormatter(n,{...this.opts,...r})}formatDateTime(n,r){return this.dtFormatter(n,r).format()}formatDateTimeParts(n,r){return this.dtFormatter(n,r).formatToParts()}formatInterval(n,r){return this.dtFormatter(n.start,r).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,r){return this.dtFormatter(n,r).resolvedOptions()}num(n,r=0,s=void 0){if(this.opts.forceSimple)return fn(n,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(n)}formatDateTimeFromString(n,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(k,j)=>this.loc.extract(n,k,j),d=k=>n.isOffsetFixed&&n.offset===0&&k.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,k.format):"",h=()=>s?NN(n):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(k,j)=>s?jN(n,k):c(j?{month:k}:{month:k,day:"numeric"},"month"),y=(k,j)=>s?ON(n,k):c(j?{weekday:k}:{weekday:k,month:"long",day:"numeric"},"weekday"),v=k=>{const j=Ln.macroTokenToFormatOpts(k);return j?this.formatWithSystemDefault(n,j):k},b=k=>s?AN(n,k):c({era:k},"era"),x=k=>{switch(k){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return h();case"d":return l?c({day:"numeric"},"day"):this.num(n.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(n.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(n.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(n.year,6);case"G":return b("short");case"GG":return b("long");case"GGGGG":return b("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return v(k)}};return H0(Ln.parseFormat(r),x)}formatDurationFromString(n,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=v=>{switch(v[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(v,b)=>x=>{const k=l(x);if(k){const j=b.isNegativeDuration&&k!==b.largestUnit?s:1;let Z;return this.opts.signMode==="negativeLargestOnly"&&k!==b.largestUnit?Z="never":this.opts.signMode==="all"?Z="always":Z="auto",this.num(v.get(k)*j,x.length,Z)}else return x},d=Ln.parseFormat(r),h=d.reduce((v,{literal:b,val:x})=>b?v:v.concat(x),[]),m=n.shiftTo(...h.map(l).filter(v=>v)),y={isNegativeDuration:m<0,largestUnit:Object.keys(m.values)[0]};return H0(d,c(m,y))}}const _w=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Es(...a){const n=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${n}$`)}function ks(...a){return n=>a.reduce(([r,s,l],c)=>{const[d,h,m]=c(n,l);return[{...r,...d},h||s,m]},[{},null,1]).slice(0,2)}function Cs(a,...n){if(a==null)return[null,null];for(const[r,s]of n){const l=r.exec(a);if(l)return s(l)}return[null,null]}function Dw(...a){return(n,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Gr(n[r+l]);return[s,null,r+l]}}const Rw=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,RN=`(?:${Rw.source}?(?:\\[(${_w.source})\\])?)?`,ep=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Mw=RegExp(`${ep.source}${RN}`),tp=RegExp(`(?:[Tt]${Mw.source})?`),MN=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,zN=/(\d{4})-?W(\d\d)(?:-?(\d))?/,LN=/(\d{4})-?(\d{3})/,BN=Dw("weekYear","weekNumber","weekDay"),UN=Dw("year","ordinal"),IN=/(\d{4})-(\d\d)-(\d\d)/,zw=RegExp(`${ep.source} ?(?:${Rw.source}|(${_w.source}))?`),$N=RegExp(`(?: ${zw.source})?`);function ds(a,n,r){const s=a[n];return Ye(s)?r:Gr(s)}function HN(a,n){return[{year:ds(a,n),month:ds(a,n+1,1),day:ds(a,n+2,1)},null,n+3]}function Ts(a,n){return[{hours:ds(a,n,0),minutes:ds(a,n+1,0),seconds:ds(a,n+2,0),milliseconds:Jh(a[n+3])},null,n+4]}function $o(a,n){const r=!a[n]&&!a[n+1],s=Zc(a[n+1],a[n+2]),l=r?null:Bn.instance(s);return[{},l,n+3]}function Ho(a,n){const r=a[n]?Ga.create(a[n]):null;return[{},r,n+1]}const VN=RegExp(`^T?${ep.source}$`),qN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function GN(a){const[n,r,s,l,c,d,h,m,y]=a,v=n[0]==="-",b=m&&m[0]==="-",x=(k,j=!1)=>k!==void 0&&(j||k&&v)?-k:k;return[{years:x(pi(r)),months:x(pi(s)),weeks:x(pi(l)),days:x(pi(c)),hours:x(pi(d)),minutes:x(pi(h)),seconds:x(pi(m),m==="-0"),milliseconds:x(Jh(y),b)}]}const YN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function np(a,n,r,s,l,c,d){const h={year:n.length===2?xh(Gr(n)):Gr(n),month:kw.indexOf(r)+1,day:Gr(s),hour:Gr(l),minute:Gr(c)};return d&&(h.second=Gr(d)),a&&(h.weekday=a.length>3?Tw.indexOf(a)+1:Nw.indexOf(a)+1),h}const FN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function PN(a){const[,n,r,s,l,c,d,h,m,y,v,b]=a,x=np(n,l,s,r,c,d,h);let k;return m?k=YN[m]:y?k=0:k=Zc(v,b),[x,new Bn(k)]}function ZN(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const XN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,KN=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,QN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function V0(a){const[,n,r,s,l,c,d,h]=a;return[np(n,l,s,r,c,d,h),Bn.utcInstance]}function JN(a){const[,n,r,s,l,c,d,h]=a;return[np(n,h,r,s,l,c,d),Bn.utcInstance]}const WN=Es(MN,tp),eO=Es(zN,tp),tO=Es(LN,tp),nO=Es(Mw),Lw=ks(HN,Ts,$o,Ho),aO=ks(BN,Ts,$o,Ho),rO=ks(UN,Ts,$o,Ho),iO=ks(Ts,$o,Ho);function sO(a){return Cs(a,[WN,Lw],[eO,aO],[tO,rO],[nO,iO])}function oO(a){return Cs(ZN(a),[FN,PN])}function lO(a){return Cs(a,[XN,V0],[KN,V0],[QN,JN])}function cO(a){return Cs(a,[qN,GN])}const uO=ks(Ts);function dO(a){return Cs(a,[VN,uO])}const fO=Es(IN,$N),hO=Es(zw),pO=ks(Ts,$o,Ho);function mO(a){return Cs(a,[fO,Lw],[hO,pO])}const q0="Invalid Duration",Bw={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},yO={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Bw},ma=146097/400,as=146097/4800,gO={years:{quarters:4,months:12,weeks:ma/7,days:ma,hours:ma*24,minutes:ma*24*60,seconds:ma*24*60*60,milliseconds:ma*24*60*60*1e3},quarters:{months:3,weeks:ma/28,days:ma/4,hours:ma*24/4,minutes:ma*24*60/4,seconds:ma*24*60*60/4,milliseconds:ma*24*60*60*1e3/4},months:{weeks:as/7,days:as,hours:as*24,minutes:as*24*60,seconds:as*24*60*60,milliseconds:as*24*60*60*1e3},...Bw},vi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],vO=vi.slice(0).reverse();function hr(a,n,r=!1){const s={values:r?n.values:{...a.values,...n.values||{}},loc:a.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||a.conversionAccuracy,matrix:n.matrix||a.matrix};return new yt(s)}function Uw(a,n){let r=n.milliseconds??0;for(const s of vO.slice(1))n[s]&&(r+=n[s]*a[s].milliseconds);return r}function G0(a,n){const r=Uw(a,n)<0?-1:1;vi.reduceRight((s,l)=>{if(Ye(n[l]))return s;if(s){const c=n[s]*r,d=a[l][s],h=Math.floor(c/d);n[l]+=h*r,n[s]-=h*d*r}return l},null),vi.reduce((s,l)=>{if(Ye(n[l]))return s;if(s){const c=n[s]%1;n[s]-=c,n[l]+=c*a[s][l]}return l},null)}function Y0(a){const n={};for(const[r,s]of Object.entries(a))s!==0&&(n[r]=s);return n}class yt{constructor(n){const r=n.conversionAccuracy==="longterm"||!1;let s=r?gO:yO;n.matrix&&(s=n.matrix),this.values=n.values,this.loc=n.loc||Tt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(n,r){return yt.fromObject({milliseconds:n},r)}static fromObject(n,r={}){if(n==null||typeof n!="object")throw new zn(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new yt({values:Lc(n,yt.normalizeUnit),loc:Tt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(n){if(Zr(n))return yt.fromMillis(n);if(yt.isDuration(n))return n;if(typeof n=="object")return yt.fromObject(n);throw new zn(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,r){const[s]=cO(n);return s?yt.fromObject(s,r):yt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,r){const[s]=dO(n);return s?yt.fromObject(s,r):yt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,r=null){if(!n)throw new zn("need to specify a reason the Duration is invalid");const s=n instanceof Aa?n:new Aa(n,r);if(Zt.throwOnInvalid)throw new YT(s);return new yt({invalid:s})}static normalizeUnit(n){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!r)throw new Y1(n);return r}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Ln.create(this.loc,s).formatDurationFromString(this,n):q0}toHuman(n={}){if(!this.isValid)return q0;const r=n.showZeros!==!1,s=vi.map(l=>{const c=this.values[l];return Ye(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=Wh(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},Fe.fromMillis(r,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Uw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const r=yt.fromDurationLike(n),s={};for(const l of vi)(gs(r.values,l)||gs(this.values,l))&&(s[l]=r.get(l)+this.get(l));return hr(this,{values:s},!0)}minus(n){if(!this.isValid)return this;const r=yt.fromDurationLike(n);return this.plus(r.negate())}mapUnits(n){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=Ew(n(this.values[s],s));return hr(this,{values:r},!0)}get(n){return this[yt.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const r={...this.values,...Lc(n,yt.normalizeUnit)};return hr(this,{values:r})}reconfigure({locale:n,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const d={loc:this.loc.clone({locale:n,numberingSystem:r}),matrix:l,conversionAccuracy:s};return hr(this,d)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return G0(this.matrix,n),hr(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=Y0(this.normalize().shiftToAll().toObject());return hr(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(d=>yt.normalizeUnit(d));const r={},s={},l=this.toObject();let c;for(const d of vi)if(n.indexOf(d)>=0){c=d;let h=0;for(const y in s)h+=this.matrix[y][d]*s[y],s[y]=0;Zr(l[d])&&(h+=l[d]);const m=Math.trunc(h);r[d]=m,s[d]=(h*1e3-m*1e3)/1e3}else Zr(l[d])&&(s[d]=l[d]);for(const d in s)s[d]!==0&&(r[c]+=d===c?s[d]:s[d]/this.matrix[c][d]);return G0(this.matrix,r),hr(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=this.values[r]===0?0:-this.values[r];return hr(this,{values:n},!0)}removeZeros(){if(!this.isValid)return this;const n=Y0(this.values);return hr(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of vi)if(!r(this.values[s],n.values[s]))return!1;return!0}}const rs="Invalid Interval";function bO(a,n){return!a||!a.isValid?Pt.invalid("missing or invalid start"):!n||!n.isValid?Pt.invalid("missing or invalid end"):n<a?Pt.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${n.toISO()}`):null}class Pt{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,r=null){if(!n)throw new zn("need to specify a reason the Interval is invalid");const s=n instanceof Aa?n:new Aa(n,r);if(Zt.throwOnInvalid)throw new GT(s);return new Pt({invalid:s})}static fromDateTimes(n,r){const s=So(n),l=So(r),c=bO(s,l);return c??new Pt({start:s,end:l})}static after(n,r){const s=yt.fromDurationLike(r),l=So(n);return Pt.fromDateTimes(l,l.plus(s))}static before(n,r){const s=yt.fromDurationLike(r),l=So(n);return Pt.fromDateTimes(l.minus(s),l)}static fromISO(n,r){const[s,l]=(n||"").split("/",2);if(s&&l){let c,d;try{c=Fe.fromISO(s,r),d=c.isValid}catch{d=!1}let h,m;try{h=Fe.fromISO(l,r),m=h.isValid}catch{m=!1}if(d&&m)return Pt.fromDateTimes(c,h);if(d){const y=yt.fromISO(l,r);if(y.isValid)return Pt.after(c,y)}else if(m){const y=yt.fromISO(s,r);if(y.isValid)return Pt.before(h,y)}}return Pt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(n,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(n,r),Math.floor(l.diff(s,n).get(n))+(l.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:r}={}){return this.isValid?Pt.fromDateTimes(n||this.s,r||this.e):this}splitAt(...n){if(!this.isValid)return[];const r=n.map(So).filter(d=>this.contains(d)).sort((d,h)=>d.toMillis()-h.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const d=r[c]||this.e,h=+d>+this.e?this.e:d;s.push(Pt.fromDateTimes(l,h)),l=h,c+=1}return s}splitBy(n){const r=yt.fromDurationLike(n);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const d=[];for(;s<this.e;){const h=this.start.plus(r.mapUnits(m=>m*l));c=+h>+this.e?this.e:h,d.push(Pt.fromDateTimes(s,c)),s=c,l+=1}return d}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const r=this.s>n.s?this.s:n.s,s=this.e<n.e?this.e:n.e;return r>=s?null:Pt.fromDateTimes(r,s)}union(n){if(!this.isValid)return this;const r=this.s<n.s?this.s:n.s,s=this.e>n.e?this.e:n.e;return Pt.fromDateTimes(r,s)}static merge(n){const[r,s]=n.sort((l,c)=>l.s-c.s).reduce(([l,c],d)=>c?c.overlaps(d)||c.abutsStart(d)?[l,c.union(d)]:[l.concat([c]),d]:[l,d],[[],null]);return s&&r.push(s),r}static xor(n){let r=null,s=0;const l=[],c=n.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),d=Array.prototype.concat(...c),h=d.sort((m,y)=>m.time-y.time);for(const m of h)s+=m.type==="s"?1:-1,s===1?r=m.time:(r&&+r!=+m.time&&l.push(Pt.fromDateTimes(r,m.time)),r=null);return Pt.merge(l)}difference(...n){return Pt.xor([this].concat(n)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:rs}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=Rc,r={}){return this.isValid?Ln.create(this.s.loc.clone(r),n).formatInterval(this):rs}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:rs}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:rs}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:rs}toFormat(n,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(n)}${r}${this.e.toFormat(n)}`:rs}toDuration(n,r){return this.isValid?this.e.diff(this.s,n,r):yt.invalid(this.invalidReason)}mapEndpoints(n){return Pt.fromDateTimes(n(this.s),n(this.e))}}class Co{static hasDST(n=Zt.defaultZone){const r=Fe.now().setZone(n).set({month:12});return!n.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(n){return Ga.isValidZone(n)}static normalizeZone(n){return Yr(n,Zt.defaultZone)}static getStartOfWeek({locale:n=null,locObj:r=null}={}){return(r||Tt.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:r=null}={}){return(r||Tt.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:r=null}={}){return(r||Tt.create(n)).getWeekendDays().slice()}static months(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Tt.create(r,s,c)).months(n)}static monthsFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Tt.create(r,s,c)).months(n,!0)}static weekdays(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Tt.create(r,s,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Tt.create(r,s,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return Tt.create(n).meridiems()}static eras(n="short",{locale:r=null}={}){return Tt.create(r,null,"gregory").eras(n)}static features(){return{relative:ww(),localeWeek:Sw()}}}function F0(a,n){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(n)-r(a);return Math.floor(yt.fromMillis(s).as("days"))}function wO(a,n,r){const s=[["years",(m,y)=>y.year-m.year],["quarters",(m,y)=>y.quarter-m.quarter+(y.year-m.year)*4],["months",(m,y)=>y.month-m.month+(y.year-m.year)*12],["weeks",(m,y)=>{const v=F0(m,y);return(v-v%7)/7}],["days",F0]],l={},c=a;let d,h;for(const[m,y]of s)r.indexOf(m)>=0&&(d=m,l[m]=y(a,n),h=c.plus(l),h>n?(l[m]--,a=c.plus(l),a>n&&(h=a,l[m]--,a=c.plus(l))):a=h);return[a,l,h,d]}function SO(a,n,r,s){let[l,c,d,h]=wO(a,n,r);const m=n-l,y=r.filter(b=>["hours","minutes","seconds","milliseconds"].indexOf(b)>=0);y.length===0&&(d<n&&(d=l.plus({[h]:1})),d!==l&&(c[h]=(c[h]||0)+m/(d-l)));const v=yt.fromObject(c,s);return y.length>0?yt.fromMillis(m,s).shiftTo(...y).plus(v):v}const xO="missing Intl.DateTimeFormat.formatToParts support";function kt(a,n=r=>r){return{regex:a,deser:([r])=>n(fN(r))}}const EO="",Iw=`[ ${EO}]`,$w=new RegExp(Iw,"g");function kO(a){return a.replace(/\./g,"\\.?").replace($w,Iw)}function P0(a){return a.replace(/\./g,"").replace($w," ").toLowerCase()}function Oa(a,n){return a===null?null:{regex:RegExp(a.map(kO).join("|")),deser:([r])=>a.findIndex(s=>P0(r)===P0(s))+n}}function Z0(a,n){return{regex:a,deser:([,r,s])=>Zc(r,s),groups:n}}function fc(a){return{regex:a,deser:([n])=>n}}function CO(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function TO(a,n){const r=Na(n),s=Na(n,"{2}"),l=Na(n,"{3}"),c=Na(n,"{4}"),d=Na(n,"{6}"),h=Na(n,"{1,2}"),m=Na(n,"{1,3}"),y=Na(n,"{1,6}"),v=Na(n,"{1,9}"),b=Na(n,"{2,4}"),x=Na(n,"{4,6}"),k=H=>({regex:RegExp(CO(H.val)),deser:([Q])=>Q,literal:!0}),Z=(H=>{if(a.literal)return k(H);switch(H.val){case"G":return Oa(n.eras("short"),0);case"GG":return Oa(n.eras("long"),0);case"y":return kt(y);case"yy":return kt(b,xh);case"yyyy":return kt(c);case"yyyyy":return kt(x);case"yyyyyy":return kt(d);case"M":return kt(h);case"MM":return kt(s);case"MMM":return Oa(n.months("short",!0),1);case"MMMM":return Oa(n.months("long",!0),1);case"L":return kt(h);case"LL":return kt(s);case"LLL":return Oa(n.months("short",!1),1);case"LLLL":return Oa(n.months("long",!1),1);case"d":return kt(h);case"dd":return kt(s);case"o":return kt(m);case"ooo":return kt(l);case"HH":return kt(s);case"H":return kt(h);case"hh":return kt(s);case"h":return kt(h);case"mm":return kt(s);case"m":return kt(h);case"q":return kt(h);case"qq":return kt(s);case"s":return kt(h);case"ss":return kt(s);case"S":return kt(m);case"SSS":return kt(l);case"u":return fc(v);case"uu":return fc(h);case"uuu":return kt(r);case"a":return Oa(n.meridiems(),0);case"kkkk":return kt(c);case"kk":return kt(b,xh);case"W":return kt(h);case"WW":return kt(s);case"E":case"c":return kt(r);case"EEE":return Oa(n.weekdays("short",!1),1);case"EEEE":return Oa(n.weekdays("long",!1),1);case"ccc":return Oa(n.weekdays("short",!0),1);case"cccc":return Oa(n.weekdays("long",!0),1);case"Z":case"ZZ":return Z0(new RegExp(`([+-]${h.source})(?::(${s.source}))?`),2);case"ZZZ":return Z0(new RegExp(`([+-]${h.source})(${s.source})?`),2);case"z":return fc(/[a-z_+-/]{1,256}?/i);case" ":return fc(/[^\S\n\r]/);default:return k(H)}})(a)||{invalidReason:xO};return Z.token=a,Z}const NO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function OO(a,n,r){const{type:s,value:l}=a;if(s==="literal"){const m=/^\s+$/.test(l);return{literal:!m,val:m?" ":l}}const c=n[s];let d=s;s==="hour"&&(n.hour12!=null?d=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?d="hour12":d="hour24":d=r.hour12?"hour12":"hour24");let h=NO[d];if(typeof h=="object"&&(h=h[c]),h)return{literal:!1,val:h}}function jO(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function AO(a,n,r){const s=a.match(n);if(s){const l={};let c=1;for(const d in r)if(gs(r,d)){const h=r[d],m=h.groups?h.groups+1:1;!h.literal&&h.token&&(l[h.token.val[0]]=h.deser(s.slice(c,c+m))),c+=m}return[s,l]}else return[s,{}]}function _O(a){const n=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Ye(a.z)||(r=Ga.create(a.z)),Ye(a.Z)||(r||(r=new Bn(a.Z)),s=a.Z),Ye(a.q)||(a.M=(a.q-1)*3+1),Ye(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ye(a.u)||(a.S=Jh(a.u)),[Object.keys(a).reduce((c,d)=>{const h=n(d);return h&&(c[h]=a[d]),c},{}),r,s]}let Lf=null;function DO(){return Lf||(Lf=Fe.fromMillis(1555555555555)),Lf}function RO(a,n){if(a.literal)return a;const r=Ln.macroTokenToFormatOpts(a.val),s=Gw(r,n);return s==null||s.includes(void 0)?a:s}function Hw(a,n){return Array.prototype.concat(...a.map(r=>RO(r,n)))}class Vw{constructor(n,r){if(this.locale=n,this.format=r,this.tokens=Hw(Ln.parseFormat(r),n),this.units=this.tokens.map(s=>TO(s,n)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=jO(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(n){if(this.isValid){const[r,s]=AO(n,this.regex,this.handlers),[l,c,d]=s?_O(s):[null,null,void 0];if(gs(s,"a")&&gs(s,"H"))throw new ls("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:d}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function qw(a,n,r){return new Vw(a,r).explainFromTokens(n)}function MO(a,n,r){const{result:s,zone:l,specificOffset:c,invalidReason:d}=qw(a,n,r);return[s,l,c,d]}function Gw(a,n){if(!a)return null;const s=Ln.create(n,a).dtFormatter(DO()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(d=>OO(d,a,c))}const Bf="Invalid DateTime",X0=864e13;function To(a){return new Aa("unsupported zone",`the zone "${a.name}" is not supported`)}function Uf(a){return a.weekData===null&&(a.weekData=Mc(a.c)),a.weekData}function If(a){return a.localWeekData===null&&(a.localWeekData=Mc(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function mi(a,n){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Fe({...r,...n,old:r})}function Yw(a,n,r){let s=a-n*60*1e3;const l=r.offset(s);if(n===l)return[s,n];s-=(l-n)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function hc(a,n){a+=n*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function kc(a,n,r){return Yw(Pc(a),n,r)}function K0(a,n){const r=a.o,s=a.c.year+Math.trunc(n.years),l=a.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,zc(s,l))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},d=yt.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),h=Pc(c);let[m,y]=Yw(h,r,a.zone);return d!==0&&(m+=d,y=a.zone.offset(m)),{ts:m,o:y}}function is(a,n,r,s,l,c){const{setZone:d,zone:h}=r;if(a&&Object.keys(a).length!==0||n){const m=n||h,y=Fe.fromObject(a,{...r,zone:m,specificOffset:c});return d?y:y.setZone(h)}else return Fe.invalid(new Aa("unparsable",`the input "${l}" can't be parsed as ${s}`))}function pc(a,n,r=!0){return a.isValid?Ln.create(Tt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,n):null}function $f(a,n,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=fn(a.c.year,s?6:4),r==="year")return l;if(n){if(l+="-",l+=fn(a.c.month),r==="month")return l;l+="-"}else if(l+=fn(a.c.month),r==="month")return l;return l+=fn(a.c.day),l}function Q0(a,n,r,s,l,c,d){let h=!r||a.c.millisecond!==0||a.c.second!==0,m="";switch(d){case"day":case"month":case"year":break;default:if(m+=fn(a.c.hour),d==="hour")break;if(n){if(m+=":",m+=fn(a.c.minute),d==="minute")break;h&&(m+=":",m+=fn(a.c.second))}else{if(m+=fn(a.c.minute),d==="minute")break;h&&(m+=fn(a.c.second))}if(d==="second")break;h&&(!s||a.c.millisecond!==0)&&(m+=".",m+=fn(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?m+="Z":a.o<0?(m+="-",m+=fn(Math.trunc(-a.o/60)),m+=":",m+=fn(Math.trunc(-a.o%60))):(m+="+",m+=fn(Math.trunc(a.o/60)),m+=":",m+=fn(Math.trunc(a.o%60)))),c&&(m+="["+a.zone.ianaName+"]"),m}const Fw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},zO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},LO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Cc=["year","month","day","hour","minute","second","millisecond"],BO=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],UO=["year","ordinal","hour","minute","second","millisecond"];function Tc(a){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!n)throw new Y1(a);return n}function J0(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Tc(a)}}function IO(a){if(No===void 0&&(No=Zt.now()),a.type!=="iana")return a.offset(No);const n=a.name;let r=Eh.get(n);return r===void 0&&(r=a.offset(No),Eh.set(n,r)),r}function W0(a,n){const r=Yr(n.zone,Zt.defaultZone);if(!r.isValid)return Fe.invalid(To(r));const s=Tt.fromObject(n);let l,c;if(Ye(a.year))l=Zt.now();else{for(const m of Cc)Ye(a[m])&&(a[m]=Fw[m]);const d=vw(a)||bw(a);if(d)return Fe.invalid(d);const h=IO(r);[l,c]=kc(a,h,r)}return new Fe({ts:l,zone:r,loc:s,o:c})}function eb(a,n,r){const s=Ye(r.round)?!0:r.round,l=Ye(r.rounding)?"trunc":r.rounding,c=(h,m)=>(h=Wh(h,s||r.calendary?0:2,r.calendary?"round":l),n.loc.clone(r).relFormatter(r).format(h,m)),d=h=>r.calendary?n.hasSame(a,h)?0:n.startOf(h).diff(a.startOf(h),h).get(h):n.diff(a,h).get(h);if(r.unit)return c(d(r.unit),r.unit);for(const h of r.units){const m=d(h);if(Math.abs(m)>=1)return c(m,h)}return c(a>n?-0:0,r.units[r.units.length-1])}function tb(a){let n={},r;return a.length>0&&typeof a[a.length-1]=="object"?(n=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[n,r]}let No;const Eh=new Map;class Fe{constructor(n){const r=n.zone||Zt.defaultZone;let s=n.invalid||(Number.isNaN(n.ts)?new Aa("invalid input"):null)||(r.isValid?null:To(r));this.ts=Ye(n.ts)?Zt.now():n.ts;let l=null,c=null;if(!s)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(r))[l,c]=[n.old.c,n.old.o];else{const h=Zr(n.o)&&!n.old?n.o:r.offset(this.ts);l=hc(this.ts,h),s=Number.isNaN(l.year)?new Aa("invalid input"):null,l=s?null:l,c=s?null:h}this._zone=r,this.loc=n.loc||Tt.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Fe({})}static local(){const[n,r]=tb(arguments),[s,l,c,d,h,m,y]=r;return W0({year:s,month:l,day:c,hour:d,minute:h,second:m,millisecond:y},n)}static utc(){const[n,r]=tb(arguments),[s,l,c,d,h,m,y]=r;return n.zone=Bn.utcInstance,W0({year:s,month:l,day:c,hour:d,minute:h,second:m,millisecond:y},n)}static fromJSDate(n,r={}){const s=gN(n)?n.valueOf():NaN;if(Number.isNaN(s))return Fe.invalid("invalid input");const l=Yr(r.zone,Zt.defaultZone);return l.isValid?new Fe({ts:s,zone:l,loc:Tt.fromObject(r)}):Fe.invalid(To(l))}static fromMillis(n,r={}){if(Zr(n))return n<-X0||n>X0?Fe.invalid("Timestamp out of range"):new Fe({ts:n,zone:Yr(r.zone,Zt.defaultZone),loc:Tt.fromObject(r)});throw new zn(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,r={}){if(Zr(n))return new Fe({ts:n*1e3,zone:Yr(r.zone,Zt.defaultZone),loc:Tt.fromObject(r)});throw new zn("fromSeconds requires a numerical input")}static fromObject(n,r={}){n=n||{};const s=Yr(r.zone,Zt.defaultZone);if(!s.isValid)return Fe.invalid(To(s));const l=Tt.fromObject(r),c=Lc(n,J0),{minDaysInFirstWeek:d,startOfWeek:h}=U0(c,l),m=Zt.now(),y=Ye(r.specificOffset)?s.offset(m):r.specificOffset,v=!Ye(c.ordinal),b=!Ye(c.year),x=!Ye(c.month)||!Ye(c.day),k=b||x,j=c.weekYear||c.weekNumber;if((k||v)&&j)throw new ls("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&v)throw new ls("Can't mix ordinal dates with month/day");const Z=j||c.weekday&&!k;let H,Q,K=hc(m,y);Z?(H=BO,Q=zO,K=Mc(K,d,h)):v?(H=UO,Q=LO,K=zf(K)):(H=Cc,Q=Fw);let L=!1;for(const pe of H){const Re=c[pe];Ye(Re)?L?c[pe]=Q[pe]:c[pe]=K[pe]:L=!0}const G=Z?pN(c,d,h):v?mN(c):vw(c),de=G||bw(c);if(de)return Fe.invalid(de);const ge=Z?L0(c,d,h):v?B0(c):c,[Y,ce]=kc(ge,y,s),re=new Fe({ts:Y,zone:s,o:ce,loc:l});return c.weekday&&k&&n.weekday!==re.weekday?Fe.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${re.toISO()}`):re.isValid?re:Fe.invalid(re.invalid)}static fromISO(n,r={}){const[s,l]=sO(n);return is(s,l,r,"ISO 8601",n)}static fromRFC2822(n,r={}){const[s,l]=oO(n);return is(s,l,r,"RFC 2822",n)}static fromHTTP(n,r={}){const[s,l]=lO(n);return is(s,l,r,"HTTP",r)}static fromFormat(n,r,s={}){if(Ye(n)||Ye(r))throw new zn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[h,m,y,v]=MO(d,n,r);return v?Fe.invalid(v):is(h,m,s,`format ${r}`,n,y)}static fromString(n,r,s={}){return Fe.fromFormat(n,r,s)}static fromSQL(n,r={}){const[s,l]=mO(n);return is(s,l,r,"SQL",n)}static invalid(n,r=null){if(!n)throw new zn("need to specify a reason the DateTime is invalid");const s=n instanceof Aa?n:new Aa(n,r);if(Zt.throwOnInvalid)throw new qT(s);return new Fe({invalid:s})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,r={}){const s=Gw(n,Tt.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(n,r={}){return Hw(Ln.parseFormat(n),Tt.fromObject(r)).map(l=>l.val).join("")}static resetCache(){No=void 0,Eh.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Uf(this).weekYear:NaN}get weekNumber(){return this.isValid?Uf(this).weekNumber:NaN}get weekday(){return this.isValid?Uf(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?If(this).weekday:NaN}get localWeekNumber(){return this.isValid?If(this).weekNumber:NaN}get localWeekYear(){return this.isValid?If(this).weekYear:NaN}get ordinal(){return this.isValid?zf(this.c).ordinal:NaN}get monthShort(){return this.isValid?Co.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Co.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Co.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Co.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,r=6e4,s=Pc(this.c),l=this.zone.offset(s-n),c=this.zone.offset(s+n),d=this.zone.offset(s-l*r),h=this.zone.offset(s-c*r);if(d===h)return[this];const m=s-d*r,y=s-h*r,v=hc(m,d),b=hc(y,h);return v.hour===b.hour&&v.minute===b.minute&&v.second===b.second&&v.millisecond===b.millisecond?[mi(this,{ts:m}),mi(this,{ts:y})]:[this]}get isInLeapYear(){return Io(this.year)}get daysInMonth(){return zc(this.year,this.month)}get daysInYear(){return this.isValid?us(this.year):NaN}get weeksInWeekYear(){return this.isValid?zo(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?zo(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:r,numberingSystem:s,calendar:l}=Ln.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(n=0,r={}){return this.setZone(Bn.instance(n),r)}toLocal(){return this.setZone(Zt.defaultZone)}setZone(n,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(n=Yr(n,Zt.defaultZone),n.equals(this.zone))return this;if(n.isValid){let l=this.ts;if(r||s){const c=n.offset(this.ts),d=this.toObject();[l]=kc(d,c,n)}return mi(this,{ts:l,zone:n})}else return Fe.invalid(To(n))}reconfigure({locale:n,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:n,numberingSystem:r,outputCalendar:s});return mi(this,{loc:l})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const r=Lc(n,J0),{minDaysInFirstWeek:s,startOfWeek:l}=U0(r,this.loc),c=!Ye(r.weekYear)||!Ye(r.weekNumber)||!Ye(r.weekday),d=!Ye(r.ordinal),h=!Ye(r.year),m=!Ye(r.month)||!Ye(r.day),y=h||m,v=r.weekYear||r.weekNumber;if((y||d)&&v)throw new ls("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new ls("Can't mix ordinal dates with month/day");let b;c?b=L0({...Mc(this.c,s,l),...r},s,l):Ye(r.ordinal)?(b={...this.toObject(),...r},Ye(r.day)&&(b.day=Math.min(zc(b.year,b.month),b.day))):b=B0({...zf(this.c),...r});const[x,k]=kc(b,this.o,this.zone);return mi(this,{ts:x,o:k})}plus(n){if(!this.isValid)return this;const r=yt.fromDurationLike(n);return mi(this,K0(this,r))}minus(n){if(!this.isValid)return this;const r=yt.fromDurationLike(n).negate();return mi(this,K0(this,r))}startOf(n,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=yt.normalizeUnit(n);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:d}=this;d<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(n,r){return this.isValid?this.plus({[n]:1}).startOf(n,r).minus(1):this}toFormat(n,r={}){return this.isValid?Ln.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,n):Bf}toLocaleString(n=Rc,r={}){return this.isValid?Ln.create(this.loc.clone(r),n).formatDateTime(this):Bf}toLocaleParts(n={}){return this.isValid?Ln.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:d="milliseconds"}={}){if(!this.isValid)return null;d=Tc(d);const h=n==="extended";let m=$f(this,h,d);return Cc.indexOf(d)>=3&&(m+="T"),m+=Q0(this,h,r,s,l,c,d),m}toISODate({format:n="extended",precision:r="day"}={}){return this.isValid?$f(this,n==="extended",Tc(r)):null}toISOWeekDate(){return pc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:d="extended",precision:h="milliseconds"}={}){return this.isValid?(h=Tc(h),(l&&Cc.indexOf(h)>=3?"T":"")+Q0(this,d==="extended",r,n,s,c,h)):null}toRFC2822(){return pc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return pc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?$f(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||n)&&(s&&(l+=" "),r?l+="z":n&&(l+="ZZ")),pc(this,l,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():Bf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const r={...this.c};return n.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,r="milliseconds",s={}){if(!this.isValid||!n.isValid)return yt.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=vN(r).map(yt.normalizeUnit),d=n.valueOf()>this.valueOf(),h=d?this:n,m=d?n:this,y=SO(h,m,c,l);return d?y.negate():y}diffNow(n="milliseconds",r={}){return this.diff(Fe.now(),n,r)}until(n){return this.isValid?Pt.fromDateTimes(this,n):this}hasSame(n,r,s){if(!this.isValid)return!1;const l=n.valueOf(),c=this.setZone(n.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const r=n.base||Fe.fromObject({},{zone:this.zone}),s=n.padding?this<r?-n.padding:n.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=n.unit;return Array.isArray(n.unit)&&(l=n.unit,c=void 0),eb(r,this.plus(s),{...n,numeric:"always",units:l,unit:c})}toRelativeCalendar(n={}){return this.isValid?eb(n.base||Fe.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(Fe.isDateTime))throw new zn("min requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.min)}static max(...n){if(!n.every(Fe.isDateTime))throw new zn("max requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.max)}static fromFormatExplain(n,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return qw(d,n,r)}static fromStringExplain(n,r,s={}){return Fe.fromFormatExplain(n,r,s)}static buildFormatParser(n,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=Tt.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new Vw(c,n)}static fromFormatParser(n,r,s={}){if(Ye(n)||Ye(r))throw new zn("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!d.equals(r.locale))throw new zn(`fromFormatParser called with a locale of ${d}, but the format parser was created for ${r.locale}`);const{result:h,zone:m,specificOffset:y,invalidReason:v}=r.explainFromTokens(n);return v?Fe.invalid(v):is(h,m,s,`format ${r.format}`,n,y)}static get DATE_SHORT(){return Rc}static get DATE_MED(){return F1}static get DATE_MED_WITH_WEEKDAY(){return FT}static get DATE_FULL(){return P1}static get DATE_HUGE(){return Z1}static get TIME_SIMPLE(){return X1}static get TIME_WITH_SECONDS(){return K1}static get TIME_WITH_SHORT_OFFSET(){return Q1}static get TIME_WITH_LONG_OFFSET(){return J1}static get TIME_24_SIMPLE(){return W1}static get TIME_24_WITH_SECONDS(){return ew}static get TIME_24_WITH_SHORT_OFFSET(){return tw}static get TIME_24_WITH_LONG_OFFSET(){return nw}static get DATETIME_SHORT(){return aw}static get DATETIME_SHORT_WITH_SECONDS(){return rw}static get DATETIME_MED(){return iw}static get DATETIME_MED_WITH_SECONDS(){return sw}static get DATETIME_MED_WITH_WEEKDAY(){return PT}static get DATETIME_FULL(){return ow}static get DATETIME_FULL_WITH_SECONDS(){return lw}static get DATETIME_HUGE(){return cw}static get DATETIME_HUGE_WITH_SECONDS(){return uw}}function So(a){if(Fe.isDateTime(a))return a;if(a&&a.valueOf&&Zr(a.valueOf()))return Fe.fromJSDate(a);if(a&&typeof a=="object")return Fe.fromObject(a);throw new zn(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const $O="3.7.2",HO=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Fe,Duration:yt,FixedOffsetZone:Bn,IANAZone:Ga,Info:Co,Interval:Pt,InvalidZone:hw,Settings:Zt,SystemZone:Uo,VERSION:$O,Zone:xs},Symbol.toStringTag,{value:"Module"}));window.Rete=zE;window.React=sE;window.RefComponent=Hh;window.luxon=HO;window.nodeRegistry=Mn;window.sockets=N1;window.socket=me;window.apiUrl=wn;window.getApiBase=qc;window.apiFetch=async function(a,n={}){const r=wn(a);return fetch(r,n)};let Xr={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const kh=new Set;function Pw(a){return kh.add(a),a({...Xr}),()=>kh.delete(a)}function Hr(a){Xr={...Xr,...a},kh.forEach(n=>n({...Xr}))}function VO(){return{...Xr}}async function qO(){Hr({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(wn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const n=await a.json(),r=n.length,s=n.filter(m=>m.includes("/00_")),l=n.filter(m=>!m.includes("/00_"));Hr({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const m of s){const y=m.split("/").pop().replace(".js","");Hr({status:`Loading ${y}...`});try{await nb(wn(m)),c++,Hr({loadedCount:c,progress:Math.round(c/r*100)})}catch(v){console.error(`[PluginLoader] Failed to load infrastructure ${m}`,v),Xr.failedPlugins.push({name:y,error:v.message})}}Hr({status:`Loading ${l.length} node plugins in parallel...`});const d=await Promise.allSettled(l.map(async m=>{const y=m.split("/").pop().replace(".js","");try{return await nb(wn(m)),c++,Hr({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:y}}catch(v){return console.error(`[PluginLoader] Failed to load ${m}`,v),Xr.failedPlugins.push({name:y,error:v.message}),{success:!1,name:y,error:v.message}}})),h=Xr.failedPlugins.length;Hr({isLoading:!1,progress:100,status:h>0?`Loaded ${c} plugins (${h} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Hr({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function nb(a){return new Promise((n,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=n,s.onerror=r,document.body.appendChild(s)})}const Zw=E.createContext(null),ab={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function GO({id:a,type:n,message:r,duration:s,onRemove:l,action:c,actionLabel:d}){const[h,m]=E.useState(!1),y=ab[n]||ab.info;E.useEffect(()=>{if(s>0){const x=setTimeout(()=>{m(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(x)}},[a,s,l]);const v=()=>{m(!0),setTimeout(()=>l(a),300)},b=()=>{c&&c(),v()};return p.jsxs("div",{className:`toast ${y.className} ${h?"toast-exit":""}`,children:[p.jsx("span",{className:"toast-icon",children:y.icon}),p.jsx("span",{className:"toast-message",children:r}),c&&d&&p.jsx("button",{className:"toast-action",onClick:b,children:d}),p.jsx("button",{className:"toast-close",onClick:v,children:""})]})}function YO({children:a}){const[n,r]=E.useState([]);let s=0;const l=E.useCallback((h,m,y={})=>{const v=++s,b=typeof y=="number"?y:y.duration??4e3,x=typeof y=="object"?y.action:null,k=typeof y=="object"?y.actionLabel:null;return r(j=>[...j,{id:v,type:h,message:m,duration:b,action:x,actionLabel:k}]),v},[]),c=E.useCallback(h=>{r(m=>m.filter(y=>y.id!==h))},[]),d={success:(h,m)=>l("success",h,m),error:(h,m)=>l("error",h,typeof m=="number"?m:{duration:6e3,...m}),warning:(h,m)=>l("warning",h,m),info:(h,m)=>l("info",h,m),dismiss:c,dismissAll:()=>r([])};return p.jsxs(Zw.Provider,{value:d,children:[a,p.jsx("div",{className:"toast-container",children:n.map(h=>p.jsx(GO,{id:h.id,type:h.type,message:h.message,duration:h.duration,onRemove:c,action:h.action,actionLabel:h.actionLabel},h.id))})]})}function ap(){const a=E.useContext(Zw);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function FO(){const a=ap();return E.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const rb=window.location.pathname.includes("/api/hassio/ingress/");function PO({onSave:a,onLoad:n,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:d,isMerged:h=!1,onToggleMerged:m}){const[y,v]=E.useState(!1),[b,x]=E.useState(!1),[k,j]=E.useState(!1),[Z,H]=E.useState([]),[Q,K]=E.useState(!1),[L,G]=E.useState(!1),[de,ge]=E.useState(!1),[Y,ce]=E.useState(null),re=ap(),[pe,Re]=E.useState(()=>{const C=localStorage.getItem("dock-position");return C?JSON.parse(C):{x:20,y:20}}),[Ae,Ke]=E.useState(!1),[st,We]=E.useState({x:0,y:0}),[N,B]=E.useState(!0),[ne,ve]=E.useState(!0),[U,S]=E.useState(!1),[M,O]=E.useState(new Date),[z,oe]=E.useState({backend:me.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[he,Oe]=E.useState({loaded:0,failed:0,total:0}),[Ge,Ve]=E.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let tt;const wt=E.useRef(null),jt=E.useRef(null);E.useEffect(()=>{(async()=>{try{const R=await fetch("/api/version");if(R.ok){const le=await R.json();ce(le.version)}}catch{}})()},[]),E.useEffect(()=>{tt=Pw(R=>{let le=0,fe=R.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(le=window.nodeRegistry.getAll().length,(!fe||le>fe)&&(fe=le)):le=R.loadedCount,Oe({loaded:le,failed:R.failedPlugins?.length||0,total:fe})});const C=R=>{R.target.tagName==="INPUT"||R.target.tagName==="TEXTAREA"||R.target.isContentEditable||(R.key==="?"||R.shiftKey&&R.code==="Slash")&&(R.preventDefault(),x(!0))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[]),E.useEffect(()=>{const C=()=>{oe(Be=>({...Be,backend:!0})),me.emit("request-hue-status")},R=()=>oe(Be=>({...Be,backend:!1})),le=Be=>oe(it=>({...it,ha:{connected:Be.connected,wsConnected:Be.wsConnected,deviceCount:Be.deviceCount||0}})),fe=Be=>{Be.hue&&oe(it=>({...it,hue:Be.hue})),Be.kasa&&oe(it=>({...it,kasa:Be.kasa}))},we=Be=>{oe(it=>({...it,hue:{connected:Be.connected,deviceCount:Be.deviceCount||0,bridgeIp:Be.bridgeIp||null}}))};me.on("connect",C),me.on("disconnect",R),me.on("ha-connection-status",le),me.on("device-counts",fe),me.on("hue-connection-status",we);const Te=Be=>Ve(Be),$e=Be=>Ve(it=>({...it,...Be,running:!0})),Pe=Be=>Ve(it=>({...it,...Be,running:!1}));me.on("engine-status",Te),me.on("engine-started",$e),me.on("engine-stopped",Pe),oe(Be=>({...Be,backend:me.connected})),me.connected&&(me.emit("request-hue-status"),me.emit("request-engine-status"));const St=VO();let Ue=0,He=St.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(Ue=window.nodeRegistry.getAll().length,(!He||Ue>He)&&(He=Ue)):Ue=St.loadedCount,Oe({loaded:Ue,failed:St.failedPlugins?.length||0,total:He}),()=>{me.off("connect",C),me.off("disconnect",R),me.off("ha-connection-status",le),me.off("device-counts",fe),me.off("hue-connection-status",we),me.off("engine-status",Te),me.off("engine-started",$e),me.off("engine-stopped",Pe),tt&&tt()}},[]),E.useEffect(()=>{const C=setInterval(()=>{O(new Date)},1e3);return()=>clearInterval(C)},[]);const Dn=()=>{const C={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return M.toLocaleDateString("en-US",C)};E.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(pe))},[pe]);const mn=C=>{h||C.target.closest(".dock-header")&&(Ke(!0),We({x:C.clientX-pe.x,y:C.clientY-pe.y}))},Kt=C=>{Ae&&Re({x:C.clientX-st.x,y:C.clientY-st.y})},Hn=()=>{Ke(!1)};E.useEffect(()=>{if(Ae)return window.addEventListener("mousemove",Kt),window.addEventListener("mouseup",Hn),()=>{window.removeEventListener("mousemove",Kt),window.removeEventListener("mouseup",Hn)}},[Ae,st]);const Qe=()=>{jt.current?.click()},F=C=>{const R=C.target.files?.[0];if(R){const le=new FileReader;le.onload=fe=>{try{const we=JSON.parse(fe.target.result);c(we)}catch(we){console.error("Failed to parse JSON:",we),alert("Invalid JSON file")}},le.readAsText(R)}C.target.value=""},ie=async()=>{j(!0),K(!0);try{const C=await bn("/api/engine/graphs");if(C.ok){const R=await C.json();H(R.graphs||[])}else re.error("Failed to load graphs list"),H([])}catch(C){console.error("Failed to fetch server graphs:",C),re.error("Failed to connect to server"),H([])}finally{K(!1)}},J=async C=>{try{const R=await bn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(R.ok){const le=await R.json();le.graph&&(c(le.graph),j(!1),re.success(`Loaded: ${C.replace(".json","")}`))}else re.error("Failed to load graph")}catch(R){console.error("Failed to load graph:",R),re.error("Failed to load graph")}},je=async(C,R)=>{R.stopPropagation();try{const le=await bn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(le.ok){const fe=await le.json();if(fe.graph){const we=new Blob([JSON.stringify(fe.graph,null,2)],{type:"application/json"}),Te=URL.createObjectURL(we),$e=document.createElement("a");$e.href=Te,$e.download=C.endsWith(".json")?C:`${C}.json`,$e.click(),URL.revokeObjectURL(Te),re.success(`Downloaded: ${C.replace(".json","")}`)}}else re.error("Failed to download graph")}catch(le){console.error("Failed to download graph:",le),re.error("Failed to download graph")}},be=async()=>{if(!L){G(!0);try{const C=await bn("/api/update/check?force=true");if(!C.ok){const le=await C.text();throw new Error(le||`HTTP ${C.status}`)}const R=await C.json();if(R.isAddon){R.hasUpdate?re.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):re.success(` You're up to date! (v${R.currentVersion})`,4e3);return}R.hasUpdate?re.info(` Update available: ${R.currentVersion}  ${R.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{me.emit("request-show-update-modal",R),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:R}))}}):re.success(` You're up to date! (v${R.currentVersion})`,4e3)}catch(C){console.error("Failed to check for updates:",C),re.error("Failed to check for updates: "+C.message,5e3)}finally{G(!1)}}},se=async()=>{if(!de){ge(!0);try{const C=await bn("/api/update/plugins/check");if(!C.ok)throw new Error(`HTTP ${C.status}`);const R=await C.json();if(!R.hasUpdates){re.success(" Plugins are up to date!",3e3);return}const le=(R.newPlugins?.length||0)+(R.modifiedPlugins?.length||0);re.info(` ${le} plugin update(s) available. Downloading...`,3e3);const fe=await bn("/api/update/plugins",{method:"POST"});if(!fe.ok)throw new Error(`HTTP ${fe.status}`);const we=await fe.json();we.success&&we.updated?.length>0?re.success(` Updated ${we.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):we.updated?.length===0?re.info("No plugins needed updating",3e3):re.error("Plugin update failed: "+(we.error||"Unknown error"),5e3)}catch(C){console.error("Failed to update plugins:",C),re.error("Failed to update plugins: "+C.message,5e3)}finally{ge(!1)}}};return p.jsxs("div",{ref:wt,className:`dock-container ${h?"dock-merged":""}`,style:{...h?{cursor:"default"}:{left:`${pe.x}px`,top:`${pe.y}px`,cursor:Ae?"grabbing":"default"}},onMouseDown:mn,children:[p.jsxs("div",{className:"dock-header",style:{cursor:h?"default":"grab"},children:[p.jsxs("div",{className:"dock-header-row",children:[p.jsx("span",{className:"dock-title",children:" Control Panel"}),p.jsx("button",{type:"button",className:"dock-btn-small",onClick:C=>{C.stopPropagation(),m?.()},onMouseDown:C=>C.stopPropagation(),title:h?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:h?"Pop out":"Merge"})]}),p.jsx("span",{className:"dock-datetime",children:Dn()})]}),p.jsxs("div",{className:"dock-section",children:[p.jsx("div",{className:"dock-section-header",onClick:()=>B(!N),children:p.jsxs("span",{children:[N?"":""," Graph Tools ",d&&p.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),N&&p.jsxs("div",{className:"dock-section-content",children:[p.jsxs("button",{onClick:a,className:`dock-btn ${d?"dock-btn-unsaved":""}`,children:[" Save ",d&&"*"]}),p.jsx("button",{onClick:n,className:"dock-btn",children:" Load Last"}),p.jsx("button",{onClick:ie,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),p.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),p.jsx("button",{onClick:Qe,className:"dock-btn",children:" Import File"}),p.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),p.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),p.jsx("button",{onClick:()=>me.emit(Ge.running?"stop-engine":"start-engine"),className:`dock-btn ${Ge.running?"dock-btn-active":""}`,title:Ge.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:Ge.running?" Stop Engine":" Start Engine"}),p.jsx("input",{ref:jt,type:"file",accept:".json",style:{display:"none"},onChange:F})]})]}),p.jsxs("div",{className:"dock-section",children:[p.jsx("div",{className:"dock-section-header",onClick:()=>ve(!ne),children:p.jsxs("span",{children:[ne?"":""," Connection Status"]})}),ne&&p.jsxs("div",{className:"dock-section-content dock-status-grid",children:[p.jsxs("div",{className:`dock-status-item ${z.backend?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Backend"}),p.jsx("span",{className:"dock-status-value",children:z.backend?"Connected":"Offline"})]}),p.jsxs("div",{className:`dock-status-item ${z.ha.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),p.jsx("span",{className:"dock-status-value",children:z.ha.connected?`${z.ha.deviceCount} devices`:"Offline"})]}),p.jsxs("div",{className:`dock-status-item ${z.hue.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),p.jsx("span",{className:"dock-status-value",children:z.hue.connected?`${z.hue.deviceCount||0} lights${z.hue.bridgeIp?` (${z.hue.bridgeIp})`:""}`:"Offline"})]}),z.kasa.deviceCount>0&&p.jsxs("div",{className:`dock-status-item ${z.kasa.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Kasa"}),p.jsxs("span",{className:"dock-status-value",children:[z.kasa.deviceCount," devices"]})]}),p.jsxs("div",{className:"dock-status-item plugins",children:[p.jsx("span",{className:"dock-status-dot",style:{background:he.failed>0?"#f59e0b":"#10b981"}}),p.jsx("span",{className:"dock-status-label",children:"Plugins"}),p.jsx("span",{className:"dock-status-value",children:he.total>0?`${he.loaded} / ${he.total} loaded${he.failed>0?` (${he.failed} failed)`:""}`:`${he.loaded} loaded`})]}),p.jsxs("div",{className:`dock-status-item ${Ge.running?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot",style:{background:Ge.running?"#10b981":"#6b7280"}}),p.jsx("span",{className:"dock-status-label",children:"Engine"}),p.jsx("span",{className:"dock-status-value",children:Ge.running?`Running (${Ge.nodeCount} nodes)`:"Stopped"})]})]})]}),p.jsx(YC,{isExpanded:U,onToggle:()=>S(!U)}),p.jsxs("div",{className:"dock-section",children:[p.jsxs("div",{className:"dock-section-content",children:[p.jsx("button",{onClick:()=>v(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),p.jsx("button",{onClick:()=>x(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),p.jsx("button",{onClick:async()=>{let C=Y||"unknown";try{const we=await fetch("/api/version");we.ok&&(C=(await we.json()).version||C)}catch{}const R={version:C,userAgent:navigator.userAgent,isAddon:rb,backend:z.backend,ha:z.ha.connected,engine:Ge.running,plugins:he.loaded},le=Object.entries(R).map(([we,Te])=>`- **${we}**: ${Te}`).join(`
`),fe=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");fe.searchParams.set("template","bug_report.md"),fe.searchParams.set("title","[Bug]: "),fe.searchParams.set("body",`##  Environment (auto-filled)
${le}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(fe.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),p.jsx("button",{onClick:()=>{const C=`${window.location.origin}/tools/debug_dashboard.html`;window.open(C,"_blank")},className:"dock-btn",title:"Open Debug Dashboard in new tab",children:" Debug Dashboard"}),rb?p.jsx("button",{onClick:()=>re.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):p.jsx("button",{onClick:be,disabled:L,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:L?" Checking...":" Check for Updates"}),p.jsx("button",{onClick:se,disabled:de,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:de?" Updating...":" Update Plugins"})]}),Y&&p.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",Y]})]}),p.jsx(VC,{isOpen:y,onClose:()=>v(!1)}),p.jsx(GC,{isOpen:b,onClose:()=>x(!1)}),k&&p.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:p.jsxs("div",{className:"modal server-graphs-modal",onClick:C=>C.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:" Saved Graphs"}),p.jsx("button",{className:"modal-close",onClick:()=>j(!1),children:""})]}),p.jsx("div",{className:"modal-body",children:Q?p.jsx("div",{className:"loading-message",children:"Loading graphs..."}):Z.length===0?p.jsxs("div",{className:"empty-message",children:[p.jsx("p",{children:"No saved graphs found."}),p.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):p.jsx("div",{className:"graphs-list",children:Z.map((C,R)=>p.jsxs("div",{className:"graph-item",children:[p.jsxs("div",{className:"graph-info",onClick:()=>J(C.name),title:"Click to load this graph",children:[p.jsx("span",{className:"graph-name",children:C.displayName}),p.jsx("span",{className:"graph-date",children:new Date(C.modified).toLocaleDateString()})]}),p.jsx("button",{className:"graph-download-btn",onClick:le=>je(C.name,le),title:"Download this graph to your computer",children:""})]},R))})})]})})]})}function ZO({dockSlotRef:a}){const[n,r]=E.useState(!0),[s,l]=E.useState(!0),[c,d]=E.useState(null),[h,m]=E.useState(null),[y,v]=E.useState(me?.connected??!1),[b,x]=E.useState({connected:!1,wsConnected:!1,deviceCount:0}),[k,j]=E.useState(new Map),[Z,H]=E.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[Q,K]=E.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),[L,G]=E.useState(null),[de,ge]=E.useState(null),Y=E.useRef(null);E.useEffect(()=>{(async()=>{try{const B=await bn(wn("/api/settings"));if(B.ok){const ne=await B.json(),ve={tempSensor:ne.FORECAST_TEMP_SENSOR||null,windSensor:ne.FORECAST_WIND_SENSOR||null,windDirSensor:ne.FORECAST_WIND_DIR_SENSOR||null,rainSensor:ne.FORECAST_RAIN_SENSOR||null};(ve.tempSensor||ve.windSensor||ve.windDirSensor||ve.rainSensor)&&(ge(ve),ce(ve))}}catch(B){console.warn("Could not fetch forecast sensor config:",B)}})()},[]);const ce=async N=>{if(!N)return;const B={source:"ha-sensors"};try{if(N.tempSensor){const ne=await bn(wn(`/api/lights/ha/${N.tempSensor}/state`));if(ne.ok){const ve=await ne.json();B.temp=parseFloat(ve.state)}}if(N.windSensor){const ne=await bn(wn(`/api/lights/ha/${N.windSensor}/state`));if(ne.ok){const ve=await ne.json();B.windSpeed=parseFloat(ve.state)}}if(N.windDirSensor){const ne=await bn(wn(`/api/lights/ha/${N.windDirSensor}/state`));if(ne.ok){const ve=await ne.json();B.windDir=parseFloat(ve.state)}}if(N.rainSensor){const ne=await bn(wn(`/api/lights/ha/${N.rainSensor}/state`));if(ne.ok){const ve=await ne.json();B.rainRate=parseFloat(ve.state)}}B.temp!==void 0&&G(ne=>({...ne,...B}))}catch(ne){console.warn("Error fetching sensor values:",ne)}};E.useEffect(()=>{if(!me)return;const N=()=>{v(!0),me.emit("request-ha-status")},B=()=>{v(!1),x({connected:!1,wsConnected:!1,deviceCount:0})},ne=S=>{x(S)};me.on("connect",N),me.on("disconnect",B),me.on("ha-connection-status",ne),me.on("forecast-update",S=>{d(S)});const ve=S=>{G(M=>M?.source==="ha-sensors"||de?.tempSensor?M:{temp:S.tempf,humidity:S.humidity,windSpeed:S.windspeedmph,windDir:S.winddir,rainRate:S.hourlyrainin,dailyRain:S.dailyrainin,source:S._source||"ambient"})};me.on("weather-update",ve),de?.tempSensor||me.emit("request-weather-update");const U=S=>{const{id:M,state:O,on:z,name:oe}=S;if(!M)return;if(de){const Ve=M.replace("ha_","");if(Ve===de.tempSensor){const tt=parseFloat(O);isNaN(tt)||G(wt=>({...wt,temp:tt,source:"ha-sensors"}))}else if(Ve===de.windSensor){const tt=parseFloat(O);isNaN(tt)||G(wt=>({...wt,windSpeed:tt}))}else if(Ve===de.windDirSensor){const tt=parseFloat(O);isNaN(tt)||G(wt=>({...wt,windDir:tt}))}else if(Ve===de.rainSensor){const tt=parseFloat(O);isNaN(tt)||G(wt=>({...wt,rainRate:tt}))}}const he=z!==void 0?z:O==="on"||O==="playing"||O==="open",Oe=oe||S.friendly_name||S.attributes?.friendly_name||M.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(M.includes("light.")||M.includes("switch.")||M.startsWith("kasa_"))&&j(Ve=>{const tt=new Map(Ve);return he?tt.set(M,{name:Oe,on:!0}):tt.delete(M),tt})};return me.on("device-state-update",U),me.emit("request-forecast"),me.connected&&(v(!0),me.emit("request-ha-status")),()=>{me.off("connect",N),me.off("disconnect",B),me.off("ha-connection-status",ne),me.off("forecast-update"),me.off("weather-update",ve),me.off("device-state-update",U)}},[de]);const re=()=>{me?.emit("request-forecast"),de?.tempSensor?ce(de):me?.emit("request-weather-update")},pe=N=>{if(N==null)return"";const B=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],ne=Math.round(N/22.5)%16;return B[ne]},Re=N=>{const B=(N||"").toLowerCase();return B.includes("clear")||B.includes("sun")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"5"}),p.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),p.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),p.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),p.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),p.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),p.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),p.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):B.includes("rain")||B.includes("drizzle")||B.includes("shower")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),p.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),p.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),p.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),p.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),p.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):B.includes("partly")||B.includes("partial")||B.includes("few")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),p.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),p.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),p.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),p.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),p.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),p.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):B.includes("snow")||B.includes("flurr")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),p.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),p.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),p.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),p.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),p.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),p.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):B.includes("thunder")||B.includes("storm")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),p.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):B.includes("fog")||B.includes("mist")||B.includes("haze")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),p.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),p.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},Ae=N=>{if(!N)return{day:"",date:""};let B;if(typeof N=="string"&&N.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const U=N.match(/(\w+),\s*(\w+)\s*(\d+)/);return U?{day:`${U[1]}, ${U[2]}`,date:U[3]}:{day:N,date:""}}if(B=new Date(parseInt(N)||N),isNaN(B.getTime()))return{day:N,date:""};const ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${ne[B.getUTCDay()]}, ${ve[B.getUTCMonth()]}`,date:`${B.getUTCDate()}`}},Ke=()=>{if(!c||!c.length)return p.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(h!==null){const N=c[h],B=Ae(N.date||N.day);return p.jsxs("div",{className:"forecast-detail",children:[p.jsxs("div",{className:"forecast-detail-header",children:[p.jsx("button",{className:"detail-back-btn",onClick:()=>m(null),children:" Back"}),p.jsxs("span",{className:"detail-date",children:[B.day," ",B.date]})]}),p.jsxs("div",{className:"detail-main",children:[p.jsx("div",{className:"detail-icon",children:Re(N.conditions||N.condition)}),p.jsxs("div",{className:"detail-temps",children:[p.jsxs("div",{className:"detail-high",children:[N.high,""]}),p.jsxs("div",{className:"detail-low",children:[N.low,""]})]}),p.jsx("div",{className:"detail-condition",children:N.conditions||N.condition||"N/A"})]}),N.description&&p.jsx("div",{className:"detail-description",children:N.description}),p.jsxs("div",{className:"detail-stats",children:[p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Precipitation"}),p.jsx("span",{className:"stat-value",children:N.precipitation||N.precip||"0%"})]}),N.humidity&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Humidity"}),p.jsxs("span",{className:"stat-value",children:[N.humidity,"%"]})]}),N.wind&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Wind"}),p.jsx("span",{className:"stat-value",children:N.wind})]}),(N.sunrise||N.sunset)&&p.jsxs("div",{className:"detail-sun-times",children:[N.sunrise&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:" Sunrise"}),p.jsx("span",{className:"stat-value",children:N.sunrise})]}),N.sunset&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:" Sunset"}),p.jsx("span",{className:"stat-value",children:N.sunset})]})]})]})]})}return c.slice(0,5).map((N,B)=>{const ne=Ae(N.date||N.day),ve=B===0;return p.jsxs("div",{className:`forecast-card ${ve&&L?"forecast-card-today":""}`,onClick:()=>m(B),children:[p.jsxs("div",{className:"forecast-row-top",children:[p.jsxs("div",{className:"forecast-date",children:[p.jsx("span",{className:"date-day",children:ne.day}),p.jsx("span",{className:"date-num",children:ne.date})]}),p.jsx("div",{className:"forecast-icon",children:Re(N.conditions||N.condition)})]}),ve&&L&&p.jsxs("div",{className:"station-data",children:[p.jsxs("div",{className:"station-current-temp",children:[Math.round(L.temp),"",p.jsx("span",{className:"station-label",children:"now"})]}),p.jsxs("div",{className:"station-details",children:[p.jsxs("span",{className:"station-detail",title:"Wind",children:[" ",Math.round(L.windSpeed||0)," mph ",pe(L.windDir)]}),L.rainRate>0&&p.jsxs("span",{className:"station-detail station-rain",title:"Rain Rate",children:[" ",L.rainRate.toFixed(2),'"/hr']})]})]}),p.jsxs("div",{className:"forecast-row-bottom",children:[p.jsxs("span",{className:"temp-low",children:[N.low,""]}),p.jsxs("span",{className:"temp-high",children:[N.high,""]}),p.jsxs("span",{className:"precip-group",children:[p.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),p.jsx("path",{d:"M16 14v4"}),p.jsx("path",{d:"M8 14v4"}),p.jsx("path",{d:"M12 16v4"})]}),p.jsx("span",{className:"precip-value",children:N.precipitation||N.precip||"0%"})]})]})]},B)})},st=N=>{N.preventDefault();const B=N.clientX,ne=Z,ve=S=>{const M=B-S.clientX,O=Math.max(250,Math.min(500,ne+M));H(O),localStorage.setItem("forecastPanelWidth",O)},U=()=>{document.removeEventListener("mousemove",ve),document.removeEventListener("mouseup",U)};document.addEventListener("mousemove",ve),document.addEventListener("mouseup",U)},We=N=>{N.preventDefault(),N.stopPropagation();const B=N.clientY,ne=Q,ve=S=>{const M=B-S.clientY,O=Math.max(100,Math.min(500,ne+M));K(O),localStorage.setItem("devicesOnHeight",O)},U=()=>{document.removeEventListener("mousemove",ve),document.removeEventListener("mouseup",U)};document.addEventListener("mousemove",ve),document.addEventListener("mouseup",U)};return p.jsxs("div",{className:"forecast-panel",style:{width:Z},children:[p.jsx("div",{className:"forecast-resize-handle",ref:Y,onMouseDown:st,children:p.jsx("div",{className:"forecast-resize-grip"})}),p.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!n),children:[p.jsx("span",{children:"5-Day Forecast"}),p.jsx("button",{onClick:N=>{N.stopPropagation(),re()},className:"forecast-refresh-btn",children:"Refresh"})]}),n&&p.jsx("div",{className:"forecast-panel-content",children:Ke()}),p.jsx("div",{className:"forecast-dock-slot",ref:a}),p.jsxs("div",{className:"devices-on-section",style:{height:s?Q:"auto"},children:[p.jsx("div",{className:"devices-resize-handle",onMouseDown:We,children:p.jsx("div",{className:"devices-resize-grip"})}),p.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[p.jsxs("span",{children:["Devices ON (",k.size,")"]}),p.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&p.jsx("div",{className:"devices-on-list",children:k.size===0?p.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(k.values()).sort((N,B)=>N.name.localeCompare(B.name)).map((N,B)=>p.jsxs("div",{className:"device-on-item",children:[p.jsx("span",{className:"device-on-indicator"}),p.jsx("span",{className:"device-on-name",children:N.name})]},B))})]}),p.jsxs("div",{className:"status-indicators",children:[p.jsx("div",{className:`connection-status ${y?"connected":"disconnected"}`,children:y?"Backend":"Backend X"}),p.jsx("div",{className:`connection-status ${b.connected?"connected":"disconnected"}`,children:b.connected?`HA (${b.deviceCount})`:"HA X"})]})]})}function XO({width:a=180,panelRef:n,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:d}){const h=window.T2Controls?.Tooltip,m=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,y=(s||[]).reduce((b,x)=>b+(x?.labels||[]).length,0),v=b=>{const x=(b||"").toString().trim();x&&c?.(x)};return p.jsxs("div",{ref:n,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:b=>b.stopPropagation(),children:[p.jsx("div",{className:"favorites-header",children:p.jsxs("div",{className:"favorites-header-row",children:[p.jsx("span",{className:"favorites-title",children:" Favorites"}),h?p.jsx(h,{text:m,position:"bottom",children:p.jsx("span",{className:"favorites-help-fallback",children:"?"})}):p.jsx("span",{className:"favorites-help-fallback",title:m,children:"?"})]})}),p.jsx("div",{className:"favorites-list",children:y===0?p.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(b=>{const x=(b?.category||"Other").toString(),k=Array.isArray(b?.labels)?b.labels:[];return k.length===0?null:p.jsxs("div",{className:"favorites-group",children:[p.jsx("div",{className:"favorites-divider",children:p.jsx("span",{className:"favorites-divider-text",children:x})}),k.map(j=>p.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>d?.(j),onContextMenu:Z=>{Z.preventDefault(),Z.stopPropagation(),v(j)},title:"Click: add to canvas  Right-click: remove",children:j},`${x}:${j}`))]},x)})})]})}function KO({isOpen:a,onClose:n,onSave:r,currentGraphData:s}){const[l,c]=E.useState(""),[d,h]=E.useState([]),[m,y]=E.useState(!1),[v,b]=E.useState(!1),[x,k]=E.useState(null),j=E.useRef(null);E.useEffect(()=>{a&&(Z(),setTimeout(()=>j.current?.focus(),100))},[a]);const Z=async()=>{y(!0),k(null);try{const G=await(await fetch(wn("/api/engine/graphs"))).json();G.success?h(G.graphs||[]):k("Failed to load existing graphs")}catch(L){console.error("[SaveModal] Error fetching graphs:",L),k("Failed to connect to server")}finally{y(!1)}},H=async()=>{if(!l.trim()){k("Please enter a filename");return}b(!0),k(null);try{const G=await(await fetch(wn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();G.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${G.filename}"`,3e3),r?.(G.filename),n()):k(G.error||"Failed to save graph")}catch(L){console.error("[SaveModal] Error saving:",L),k("Failed to save graph")}finally{b(!1)}},Q=L=>{L.key==="Enter"&&!v?H():L.key==="Escape"&&n()},K=L=>{const G=L.replace(".json","");c(G),j.current?.focus()};return a?p.jsx("div",{className:"save-modal-overlay",onClick:n,children:p.jsxs("div",{className:"save-modal",onClick:L=>L.stopPropagation(),children:[p.jsxs("div",{className:"save-modal-header",children:[p.jsx("h2",{children:" Save Graph"}),p.jsx("button",{className:"save-modal-close",onClick:n,children:""})]}),p.jsxs("div",{className:"save-modal-content",children:[p.jsxs("div",{className:"save-modal-input-section",children:[p.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),p.jsxs("div",{className:"save-modal-input-row",children:[p.jsx("input",{ref:j,id:"graph-filename",type:"text",value:l,onChange:L=>c(L.target.value),onKeyDown:Q,placeholder:"my_automation_graph",disabled:v}),p.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),x&&p.jsxs("div",{className:"save-modal-error",children:[" ",x]}),p.jsxs("div",{className:"save-modal-existing",children:[p.jsxs("h3",{children:["Existing Graphs ",m&&p.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),d.length===0&&!m?p.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):p.jsx("ul",{className:"save-modal-list",children:d.map(L=>p.jsxs("li",{onClick:()=>K(L.name),className:l===L.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(L.modified).toLocaleString()}`,children:[p.jsx("span",{className:"graph-name",children:L.displayName}),p.jsx("span",{className:"graph-date",children:new Date(L.modified).toLocaleDateString()})]},L.name))})]})]}),p.jsxs("div",{className:"save-modal-footer",children:[p.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:n,disabled:v,children:"Cancel"}),p.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:H,disabled:v||!l.trim(),children:v?"Saving...":" Save"})]})]})}):null}function QO({visible:a,position:n,items:r,onClose:s,onSelect:l}){const c=E.useRef(null),d=E.useRef(null),[h,m]=E.useState(null),[y,v]=E.useState({x:0,y:0}),[b,x]=E.useState(""),k=E.useRef(null),j=E.useRef(null);E.useEffect(()=>{a&&(x(""),m(null),setTimeout(()=>{d.current?.focus()},50))},[a]);const Z=E.useMemo(()=>{if(!b.trim())return r;const Y=b.toLowerCase(),ce=[];for(const re of r)if(re.subitems)for(const pe of re.subitems)pe.label&&pe.label.toLowerCase().includes(Y)&&ce.push({...pe,categoryHint:re.label});else re.label&&re.label.toLowerCase().includes(Y)&&ce.push(re);return ce},[r,b]),H=b.trim().length>0;E.useEffect(()=>{if(!a)return;const Y=re=>{c.current&&!c.current.contains(re.target)&&s()},ce=re=>{re.key==="Escape"&&s()};return document.addEventListener("mousedown",Y),document.addEventListener("keydown",ce),()=>{document.removeEventListener("mousedown",Y),document.removeEventListener("keydown",ce)}},[a,s]),E.useEffect(()=>()=>{k.current&&clearTimeout(k.current),j.current&&clearTimeout(j.current)},[]);const Q=E.useCallback((Y,ce,re)=>{j.current&&(clearTimeout(j.current),j.current=null),ce.subitems&&ce.subitems.length>0?m(re):m(null)},[]),K=E.useCallback(()=>{j.current=setTimeout(()=>{m(null)},150)},[]),L=E.useCallback(()=>{j.current&&(clearTimeout(j.current),j.current=null)},[]),G=E.useCallback(()=>{j.current=setTimeout(()=>{m(null)},100)},[]),de=E.useCallback(Y=>{Y.subitems&&Y.subitems.length>0||(l(Y),s())},[l,s]);if(!a)return null;const ge={...n};if(typeof window<"u"){const ce=Math.min(Z.length*36+50,400);n.x+220>window.innerWidth&&(ge.x=window.innerWidth-220-10),n.y+ce>window.innerHeight&&(ge.y=Math.max(10,window.innerHeight-ce-10))}return p.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:ge.x,top:ge.y},children:[p.jsxs("div",{className:"fast-menu-search",children:[p.jsx("input",{ref:d,type:"text",placeholder:"Search nodes...",value:b,onChange:Y=>x(Y.target.value),onClick:Y=>Y.stopPropagation(),onKeyDown:Y=>{if(Y.key==="Enter"&&Z.length===1){const ce=Z[0];ce.subitems||de(ce)}Y.stopPropagation()}}),b&&p.jsx("span",{className:"search-clear",onClick:Y=>{Y.stopPropagation(),x(""),d.current?.focus()},children:""})]}),p.jsx("div",{className:"fast-menu-results",children:Z.length===0?p.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):H?Z.map((Y,ce)=>p.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>de(Y),children:[p.jsx("span",{className:"menu-label",children:Y.label}),Y.categoryHint&&p.jsx("span",{className:"category-hint",children:Y.categoryHint})]},Y.label||ce)):Z.map((Y,ce)=>p.jsxs("div",{className:`fast-menu-item ${Y.subitems?"has-submenu":""} ${h===ce?"active":""}`,onMouseEnter:re=>Q(re,Y,ce),onMouseLeave:K,onClick:()=>de(Y),children:[Y.icon&&p.jsx("span",{className:"menu-icon",children:Y.icon}),p.jsx("span",{className:"menu-label",children:Y.label}),Y.subitems&&p.jsx("span",{className:"submenu-arrow",children:""}),h===ce&&Y.subitems&&p.jsx("div",{className:"fast-submenu",onMouseEnter:L,onMouseLeave:G,children:Y.subitems.map((re,pe)=>p.jsx("div",{className:"fast-menu-item",title:re.description||"",onClick:Re=>{Re.stopPropagation(),de(re)},children:p.jsx("span",{className:"menu-label",children:re.label})},re.label||pe))})]},Y.label||ce))})]})}function ib(a){const n=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))n.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&n.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):n.push(`Node at index ${c} is missing "id"`),l.label||n.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&n.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))n.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,d)=>{c.source?s.has(c.source)||n.push(`Connection ${d} references non-existent source node: ${c.source}`):n.push(`Connection at index ${d} is missing "source"`),c.target?s.has(c.target)||n.push(`Connection ${d} references non-existent target node: ${c.target}`):n.push(`Connection at index ${d} is missing "target"`),c.sourceOutput||r.push(`Connection ${d} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${d} is missing "targetInput"`);const h=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(h)&&r.push(`Duplicate connection: ${h}`),l.add(h),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:n.length===0,errors:n,warnings:r}}function sb(a){const n=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],n.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],n.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((d,h)=>{if(!d.id)return n.push(`Removed node at index ${h} (missing ID)`),r=!0,!1;if(c.has(d.id)){const m=`${d.id}_${Date.now()}_${h}`;n.push(`Renamed duplicate node ID ${d.id} to ${m}`),d.id=m,r=!0}return c.add(d.id),l.add(d.id),d.label||(d.label="Unknown Node",n.push(`Set label for node ${d.id} to "Unknown Node"`),r=!0),!d.position||typeof d.position!="object"?(d.position={x:0,y:0},n.push(`Reset position for node ${d.id}`),r=!0):(Number.isFinite(d.position.x)||(d.position.x=0,n.push(`Fixed NaN x position for node ${d.id}`),r=!0),Number.isFinite(d.position.y)||(d.position.y=0,n.push(`Fixed NaN y position for node ${d.id}`),r=!0)),!0}),s.connections=s.connections.filter((d,h)=>l.has(d.source)?l.has(d.target)?!0:(n.push(`Removed connection ${h} (invalid target: ${d.target})`),r=!0,!1):(n.push(`Removed connection ${h} (invalid source: ${d.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,n.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,n.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,n.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:n}}class vj extends Xt.Control{constructor(n,r){super(),this.label=n,this.onClick=r}}function JO({data:a}){return p.jsx("button",{onPointerDown:n=>n.stopPropagation(),onDoubleClick:n=>n.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.25)",n.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.1)",n.currentTarget.style.boxShadow="none"},children:a.label})}class bj extends Xt.Control{constructor(n,r,s,l){super(),this.label=n,this.values=r,this.value=s,this.onChange=l}setValue(n){this.value=n}}function WO({data:a}){const[,n]=E.useReducer(d=>d+1,0),[r,s]=E.useState(a.value);E.useEffect(()=>{s(a.value)},[a.value]),E.useEffect(()=>{n()},[a]);const l=d=>{const h=d.target.value;s(h),typeof a.setValue=="function"?a.setValue(h):a.value=h,a.onChange&&a.onChange(h)},c=a.values||[];return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("select",{value:r,onChange:l,onPointerDown:d=>d.stopPropagation(),onDoubleClick:d=>d.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((d,h)=>p.jsx("option",{value:d,style:{background:"#0a0f14",color:"#00f3ff"},children:d},`${h}-${d}`))})]})}class wj extends Xt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function ej({data:a}){const[n,r]=E.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Sj extends Xt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function tj({data:a}){const[n,r]=E.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[p.jsx("input",{type:"checkbox",checked:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),p.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class xj extends Xt.Control{constructor(n,r,s,l={}){super(),this.label=n,this.value=r,this.onChange=s,this.options=l}}function nj({data:a}){const[n,r]=E.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:"number",value:n,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Ej extends Xt.Control{constructor(n,r,s,l="text"){super(),this.label=n,this.value=r,this.onChange=s,this.type=l}}function aj({data:a}){const[n,r]=E.useState(a.value);E.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:a.type||"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class kj extends Xt.Control{constructor(n,r){super(),this.deviceId=n,this.getState=r}}function rj({data:a}){const n=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!n)return p.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:p.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=n.on||n.state==="on",l=n.attributes&&typeof n.attributes.brightness=="number"?Number(n.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof n.brightness=="number"&&Number.isFinite(n.brightness)?c=n.brightness>100?Math.round(n.brightness/255*100):Math.round(n.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c));const d=n.hs_color||[0,0],[h,m]=d;let y="#e74c3c";s&&(m===0?y="#f1c40f":y=`hsl(${h}, ${m}%, 50%)`);const v={width:"14px",height:"14px",borderRadius:"50%",background:y,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:y,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${y}`:"none"};return p.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[p.jsx("div",{style:v}),p.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:n.name||a.deviceId})]}),p.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&p.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:p.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${y})`,transition:"width 0.3s ease-out"}})})]})}function ij(a){const{state:n,color:r}=a.data.data||{},s=n==="on"||n==="open"||n==="playing",l=r||(s?"#00f3ff":"#333");return p.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[p.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),p.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function sj(a){const[,n]=E.useState(0);E.useEffect(()=>{let b=JSON.stringify(a.data.data||{});const x=setInterval(()=>{const k=JSON.stringify(a.data.data||{});k!==b&&(b=k,n(j=>j+1))},100);return()=>clearInterval(x)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:d}=a.data.data||{};let h="#444";s&&s.length===2?h=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(h="#ffaa00");const m=c==="on"||d===!0;let y=typeof r=="number"&&Number.isFinite(r)?r:0;y>100&&(y=y/255*100),y=Math.max(0,Math.min(100,y));const v=m?y:0;return p.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:b=>b.stopPropagation(),children:p.jsx("div",{style:{width:`${v}%`,height:"100%",backgroundColor:h,transition:"all 0.3s ease",boxShadow:v>0?`0 0 10px ${h}`:"none"}})})}function oj(a){const{power:n,energy:r}=a.data.data||{};return n===null&&r===null?p.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):p.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("span",{children:"PWR:"}),p.jsx("span",{style:{color:"#00f3ff"},children:n!==null?`${n} W`:"--"})]}),r!==null&&p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("span",{children:"NRG:"}),p.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const lj=window.EDITOR_DEBUG,ke=(...a)=>lj&&console.debug("[Editor]",...a),cj=Da.memo(({data:a,socketKey:n,side:r})=>{let l=a?.name||"any";if(n&&typeof n=="string"){const d=n.toLowerCase();d.includes("hsv")||d.includes("color")?l="hsv_info":d.includes("trigger")||d.includes("enable")||d.includes("active")?l="boolean":(d.includes("light")||d.includes("device"))&&(l="light_info")}const c=`${n||"socket"} (${l})`;return Da.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function uj(){const a=E.useRef(null),[n,r]=E.useState(null),[s,l]=E.useState(null),[c,d]=E.useState(null),[h,m]=E.useState(null),[y,v]=E.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),b=E.useRef(null),x=E.useRef(null);E.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(y))}catch{}},[y]);const k=E.useRef(!1),j=E.useRef(new Set),Z=E.useRef(null),H=E.useRef(!1),Q=E.useRef(null),K=E.useRef(null),L=E.useRef(null),G=E.useRef({x:0,y:0}),de=E.useRef(!1),ge=E.useRef([]),[Y,ce]=E.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),re=180,pe="favoriteNodes",[Re,Ae]=E.useState(()=>{try{const F=localStorage.getItem(pe),ie=F?JSON.parse(F):null,J=se=>{const C=[];for(const R of Array.isArray(se)?se:[]){if(typeof R!="string")continue;const le=R.trim();le&&(C.includes(le)||C.push(le))}return C};if(Array.isArray(ie)){const se=J(ie);return se.length?[{category:"Other",labels:se}]:[]}const je=Array.isArray(ie?.groups)?ie.groups:Array.isArray(ie?.favoriteGroups)?ie.favoriteGroups:Array.isArray(ie)?ie:null;if(!je)return[];const be=[];for(const se of je){const C=(se?.category||"Other").toString().trim()||"Other",R=J(se?.labels);R.length!==0&&be.push({category:C,labels:R})}return be}catch{return[]}}),Ke=E.useRef(null),[st,We]=E.useState(!1),N=E.useRef(null),[B,ne]=E.useState(!1),[ve,U]=E.useState(null);E.useEffect(()=>{try{localStorage.setItem(pe,JSON.stringify({version:2,groups:Re}))}catch{}},[Re]);const S=E.useCallback(F=>{const ie=(F||"").toString().trim();if(!ie)return;const je=(Mn.getByLabel(ie)?.category||"Other").toString().trim()||"Other";Ae(be=>{for(const R of be)if(Array.isArray(R?.labels)&&R.labels.includes(ie))return be;const se=be.map(R=>({category:R.category,labels:[...R.labels]})),C=se.findIndex(R=>R.category===je);return C===-1?se.push({category:je,labels:[ie]}):se[C].labels.push(ie),se})},[]),M=E.useCallback(F=>{const ie=(F||"").toString().trim();ie&&Ae(J=>{const je=[];for(const be of J){const se=(be?.labels||[]).filter(C=>C!==ie);se.length!==0&&je.push({category:be.category,labels:se})}return je})},[]),O=E.useCallback(async F=>{const ie=a.current,J=Q.current,je=K.current;if(!ie||!J||!je)return;const be=ie.getBoundingClientRect(),se={x:be.left+be.width/2,y:be.top+be.height/2};try{const le=window._t2GetMenuItems;if(typeof le=="function"){const fe=le();for(const we of fe||[])for(const Te of we.subitems||[])if(Te.label===F&&typeof Te.handler=="function"){await Te.handler(se);return}}}catch(le){console.warn("[Favorites] Failed to create via context handlers:",le)}const C=Mn.getByLabel(F);if(!C)return;const R=()=>{try{Z.current?.()}catch{}};try{const le=C.factory(R);await J.addNode(le);const fe=je.area.transform,we=(se.x-fe.x)/fe.k,Te=(se.y-fe.y)/fe.k;await je.translate(le.id,{x:we,y:Te}),F==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}catch(le){console.warn("[Favorites] Fallback create failed:",le)}},[]);E.useEffect(()=>{try{const F=Mn.getAll();if(F.length===0)return;const ie=new Map;for(const J of F)J?.label&&ie.set(J.label,(J.category||"Other").toString().trim()||"Other");Ae(J=>{const je=[],be=new Map,se=(C,R)=>{be.has(C)||(be.set(C,[]),je.push(C));const le=be.get(C);le.includes(R)||le.push(R)};for(const C of J)for(const R of C?.labels||[]){const le=ie.get(R);le&&se(le,R)}return je.map(C=>({category:C,labels:be.get(C)})).filter(C=>C.labels.length>0)})}catch{}},[n]);const z=E.useCallback(async F=>{await new Promise(P=>{const te=()=>{const ye=F.getBoundingClientRect();ye.width>0&&ye.height>0?P():requestAnimationFrame(te)};requestAnimationFrame(te)});const ie=new Kr,J=new Ab(F),je=new xk,be=new NC({createRoot:cb.createRoot}),se=new UC;ie.use(se);let C=0,R=0,le=Date.now();window._t2PerfStats=()=>{const P=(Date.now()-le)/1e3;return console.log(`[Perf] In ${P.toFixed(1)}s: ${C} process calls, ${R} skipped (${(C/P).toFixed(1)}/sec)`),{calls:C,skipped:R,perSecond:C/P}},window._t2PerfReset=()=>{C=0,R=0,le=Date.now(),console.log("[Perf] Stats reset")};let fe=null;const we=()=>{const P=ie?.getNodes?.()?.length||0;return P<50?16:P<100?32:P<150?50:100};let Te=!1;const $e=async()=>{if(Te){R++;return}if(fe)return;C++;const P=we();fe=setTimeout(async()=>{fe=null,Te=!0;try{const te=ie.getNodes(),ye=ie.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",te.map(Ee=>`${Ee.id}:${Ee.label}`)),console.log("[Editor] process() - connections:",ye.map(Ee=>`${Ee.source}:${Ee.sourceOutput} -> ${Ee.target}:${Ee.targetInput}`)),window._debugProcess=!1),se.reset();for(const Ee of te)try{await se.fetch(Ee.id)}catch{}}finally{Te=!1}},P)},Pe=async()=>{if(!Te){fe&&(clearTimeout(fe),fe=null),Te=!0;try{se.reset();for(const P of ie.getNodes())try{await se.fetch(P.id)}catch{}}finally{Te=!1}}},St=new Set;let Ue=null;const He=P=>{St.add(P),Ue||(Ue=setTimeout(()=>{Ue=null,St.forEach(te=>{J.update("node",te)}),St.clear(),$e()},16))},Be=()=>{$e()},it=()=>{const P=Mn.getAll(),te={};P.forEach(Ee=>{const Ze=Ee.category||"Other";te[Ze]||(te[Ze]=[]),te[Ze].push({label:Ee.label,order:Ee.order,description:Ee.description,handler:async Gt=>{let an;const Qt=()=>{Ee.updateStrategy==="dataflow"?Be():He(an.id)};an=Ee.factory(Qt),await ie.addNode(an);const Jt=J.area.transform,gn=(Gt.x-Jt.x)/Jt.k,_t=(Gt.y-Jt.y)/Jt.k;await J.translate(an.id,{x:gn,y:_t}),Ee.label==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}})});const ye=window.T2Controls?.THEME?.categories||{};return Object.entries(te).map(([Ee,Ze])=>({label:Ee,icon:ye[Ee]?.icon||"",subitems:Ze.sort((Gt,an)=>{const Qt=Gt.order??999,Jt=an.order??999;return Qt!==Jt?Qt-Jt:Gt.label.localeCompare(an.label)})})).sort((Ee,Ze)=>Ee.label.localeCompare(Ze.label))};window._t2GetMenuItems=it,window._t2Editor=ie,window._t2Area=J,window._t2Process=$e,window._t2ProcessImmediate=Pe,window._t2Engine=se;const gt=Vr.selector();be.addPreset(Of.classic.setup({customize:{node(P){const te=Mn.getByInstance(P.payload);return te?te.component:Of.classic.Node},socket(P){const te=P.key,ye=P.side;return function({data:Ee}){return Da.createElement(cj,{data:Ee,socketKey:te,side:ye})}},control(P){if(P.payload instanceof Xt.Control){const ye=P.payload.constructor.name;if(ye==="ButtonControl")return JO;if(ye==="DropdownControl")return WO;if(ye==="TextControl")return ej;if(ye==="SwitchControl")return tj;if(ye==="NumberControl")return nj;if(ye==="InputControl")return aj;if(ye==="DeviceStateControl")return rj;if(ye==="StatusIndicatorControl")return ij;if(ye==="ColorBarControl")return sj;if(ye==="PowerStatsControl")return oj}return Of.classic.Control}}})),je.addPreset(gk.classic.setup()),ie.use(J),J.use(je),J.use(be),Vr.selectableNodes(J,gt,{accumulating:Vr.accumulateOnCtrl()}),Vr.simpleNodesOrder(J),ie.addPipe(P=>{if(P.type==="nodecreated"){const te=P.data,ye=Mn.getByInstance(te);ye&&ye.isBackdrop&&setTimeout(()=>{const xe=J.nodeViews.get(te.id);xe&&xe.element&&(xe.element.style.zIndex="-10",ke("[Backdrop] Set z-index on creation for:",te.id))},50)}return P});let It=!1,zt=!1,ot={x:0,y:0};je.addPipe(P=>(P.type==="connectionpick"?(It=!0,ke(" Connection pick - wire dragging started")):P.type==="connectiondrop"&&(It=!1,zt=!1,ke(" Connection drop - wire dragging ended")),P));const Lt=P=>{if(It)if(P.ctrlKey||P.metaKey)if(!zt)zt=!0,ot={x:P.clientX,y:P.clientY},F.style.cursor="grab";else{const te=P.clientX-ot.x,ye=P.clientY-ot.y;if(te!==0||ye!==0){const xe=J.area.transform;J.area.translate(xe.x+te,xe.y+ye),ot={x:P.clientX,y:P.clientY}}}else zt&&(zt=!1,F.style.cursor="")},tn=P=>{(P.key==="Control"||P.key==="Meta")&&zt&&(zt=!1,F.style.cursor="")};window.addEventListener("pointermove",Lt),window.addEventListener("keyup",tn);let nn=!1,qt=!1,_=null,V=!1,ue={x:0,y:0},Ne={x:0,y:0};const De=P=>{P.code==="Space"&&nn&&_&&(V=!0,Ne={x:0,y:0},P.preventDefault())},yn=P=>{if(P.code==="Space"&&(V=!1,qt&&_)){const te=J.nodeViews.get(_);if(te){const ye=J.area.transform,xe=Ne.x/ye.k,Ee=Ne.y/ye.k,Ze={x:te.position.x-xe,y:te.position.y-Ee};k.current=!0,J.translate(_,Ze).finally(()=>{k.current=!1})}qt=!1,F.style.cursor=""}},wa=P=>{if(!(!nn||!_))if(V)if(!qt)qt=!0,ue={x:P.clientX,y:P.clientY},Ne={x:0,y:0},F.style.cursor="grab";else{const te=P.clientX-ue.x,ye=P.clientY-ue.y;if(te!==0||ye!==0){const xe=J.area.transform;J.area.translate(xe.x+te,xe.y+ye),Ne.x+=te,Ne.y+=ye,ue={x:P.clientX,y:P.clientY}}}else qt&&(qt=!1,F.style.cursor="")};window.addEventListener("keydown",De,!0),window.addEventListener("keyup",yn,!0),F.addEventListener("pointermove",wa,!0);const Le=document.createElement("div");Le.classList.add("selection-box"),F.appendChild(Le);let At=!1,xt={x:0,y:0};const Je=j.current,Ns=()=>{At&&(ke(" Safety reset: clearing stuck lasso selection"),At=!1,Le.style.display="none")},Os=()=>{Ns(),window.resetEditorDragState&&window.resetEditorDragState()},Sa=()=>{document.hidden&&(Ns(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",Os),document.addEventListener("visibilitychange",Sa);const on=P=>{try{const te=P.target;te&&(te.tagName==="INPUT"||te.tagName==="TEXTAREA"||te.isContentEditable)||(F.tabIndex=-1,F.focus())}catch{}if((P.ctrlKey||P.metaKey)&&P.button===0){P.stopPropagation(),P.preventDefault(),At=!0;const te=F.getBoundingClientRect();xt={x:P.clientX-te.left,y:P.clientY-te.top},Le.style.display="block",Le.style.left=`${xt.x}px`,Le.style.top=`${xt.y}px`,Le.style.width="0px",Le.style.height="0px",P.shiftKey||(Je.forEach(ye=>{const xe=J.nodeViews.get(ye);xe&&xe.element&&(xe.element.classList.remove("selected"),xe.element.style.outline="")}),Je.clear(),gt&&gt.entities&&Array.from(gt.entities).forEach(ye=>gt.remove(ye)))}},Cn=P=>{if(!At)return;const te=F.getBoundingClientRect(),ye=P.clientX-te.left,xe=P.clientY-te.top,Ee=Math.min(xt.x,ye),Ze=Math.min(xt.y,xe),Gt=Math.abs(ye-xt.x),an=Math.abs(xe-xt.y);Le.style.left=`${Ee}px`,Le.style.top=`${Ze}px`,Le.style.width=`${Gt}px`,Le.style.height=`${an}px`},Fa=P=>{if(!At)return;const te=Le.getBoundingClientRect();if(At=!1,Le.style.display="none",te.width<5&&te.height<5)return;const ye=[];ie.getNodes().forEach(xe=>{const Ee=J.nodeViews.get(xe.id);if(Ee&&Ee.element){const Ze=Ee.element.getBoundingClientRect();te.left<=Ze.left&&te.right>=Ze.right&&te.top<=Ze.top&&te.bottom>=Ze.bottom&&ye.push({node:xe,view:Ee})}}),ye.forEach(({node:xe,view:Ee})=>{Je.add(xe.id),gt.add({id:xe.id,label:"node",translate(Ze,Gt){},unselect(){Ee.element.classList.remove("selected"),Ee.element.style.outline=""}},!1),Ee.element.classList.add("selected"),Ee.element.style.outline="3px solid #00f3ff"})},Kc=()=>{Je.size>0&&(Je.forEach(P=>{const te=J.nodeViews.get(P);te&&te.element&&(te.element.classList.remove("selected"),te.element.style.outline="")}),Je.clear()),gt&&gt.entities&&(gt.entities instanceof Map?Array.from(gt.entities.values()):Array.from(gt.entities)).forEach(te=>{te.unselect&&te.unselect(),gt.remove(te)}),ie.getNodes().forEach(P=>{const te=J.nodeViews.get(P.id);te&&te.element&&te.element.classList.remove("selected")})},qo=P=>{if(!P.ctrlKey&&!P.metaKey&&!At){let te=!1;for(const[ye,xe]of J.nodeViews)if(xe.element.contains(P.target)){te=!0;break}if(!te){const ye=P.target;(ye===F||ye.classList.contains("rete-area")||ye.closest('[data-testid="area"]'))&&Kc()}}};F.addEventListener("pointerdown",on,{capture:!0}),F.addEventListener("click",qo),window.addEventListener("pointermove",Cn),window.addEventListener("pointerup",Fa),ie.addPipe(P=>((P.type==="connectioncreated"||P.type==="connectionremoved")&&$e(),P));let Sn={activeBackdropId:null,isDragging:!1,nodesBeingMoved:new Set},xa=!1,Ea=null;const ia=P=>{xa=P,Ea&&(clearTimeout(Ea),Ea=null),P&&(Ea=setTimeout(()=>{xa&&(ke(" Safety reset: clearing stuck isGroupMoving"),xa=!1),Ea=null},500))},yr=()=>{At&&(ke(" Resetting stuck lasso selection"),At=!1,Le.style.display="none"),xa&&(ke(" Resetting stuck group moving"),ia(!1)),Sn.isDragging&&(ke(" Resetting stuck backdrop drag"),Sn.isDragging=!1,Sn.activeBackdropId=null,Sn.nodesBeingMoved.clear())};window.resetEditorDragState=yr;function Pa(){const P=ie.getNodes(),te=P.filter(xe=>{const Ee=Mn.getByInstance(xe);return Ee&&Ee.isBackdrop}),ye=P.filter(xe=>{const Ee=Mn.getByInstance(xe);return!Ee||!Ee.isBackdrop});te.forEach(xe=>{const Ee=J.nodeViews.get(xe.id);if(!Ee)return;Ee.element&&(Ee.element.style.zIndex="-10");const Ze=Ee.position,Gt=[],an=xe.properties.width||400,Qt=xe.properties.height||300,Jt=(_t,Yt,xn)=>{const Ma=_t.x+Yt/2,Za=_t.y+xn/2;return Ma>=Ze.x&&Ma<=Ze.x+an&&Za>=Ze.y&&Za<=Ze.y+Qt};ye.forEach(_t=>{const Yt=J.nodeViews.get(_t.id);if(!Yt)return;Yt.element&&parseInt(Yt.element.style.zIndex||"0",10)<0&&(Yt.element.style.zIndex="1");const xn=Yt.position,Ma=_t.width||180,Za=_t.height||100;Jt(xn,Ma,Za)&&Gt.push(_t.id)}),te.forEach(_t=>{if(_t.id===xe.id)return;const Yt=J.nodeViews.get(_t.id);if(!Yt)return;const xn=Yt.position,Ma=_t.properties.width||400,Za=_t.properties.height||300;Ma>=an||Za>=Qt||Jt(xn,Ma,Za)&&Gt.push(_t.id)});const gn=xe.properties.capturedNodes.length;xe.properties.capturedNodes=Gt,gn!==Gt.length&&xe.changeCallback&&xe.changeCallback()})}return J.updateBackdropCaptures=Pa,J.addPipe(P=>{if(P.type==="nodepicked"){const te=P.data.id,ye=ie.getNode(te);nn=!0,_=te,qt=!1;try{if(ye&&N?.current!==void 0){const Ee=J.nodeViews.get(te)?.position||{x:0,y:0};N.current={nodeId:te,label:ye.label,startPos:Ee,active:!1,over:!1}}}catch{}if(ye){const Ee=Mn.getByInstance(ye);if(Ee&&Ee.isBackdrop&&ye.properties.locked)return}!de.current&&!Je.has(te)&&(Je.forEach(Ee=>{const Ze=J.nodeViews.get(Ee);Ze&&Ze.element&&(Ze.element.classList.remove("selected"),Ze.element.style.outline="")}),Je.clear()),Je.add(te);const xe=J.nodeViews.get(te);xe&&xe.element&&(xe.element.classList.add("selected"),xe.element.style.outline="3px solid #00f3ff")}return P}),J.addPipe(P=>{try{if(k.current)return P;const te=ye=>{const xe=Ke.current?.getBoundingClientRect();if(!xe)return!1;const Ze=J.nodeViews.get(ye)?.element;if(!Ze)return!1;const Gt=Ze.getBoundingClientRect(),an=Gt.left+Gt.width/2,Qt=Gt.top+Gt.height/2;return an>=xe.left&&an<=xe.right&&Qt>=xe.top&&Qt<=xe.bottom};if(P.type==="nodetranslate"){const ye=N.current;if(!ye)return P;const xe=P.data?.id;if(!xe||ye.nodeId!==xe)return P;ye.active||(ye.active=!0,!ye.startPos&&P.data?.previous&&(ye.startPos=P.data.previous));const Ee=te(xe);return Ee!==ye.over&&(ye.over=Ee,We(Ee)),P}if(P.type==="nodedragged"){const ye=N.current;if(!ye)return P;const xe=P.data?.id;if(!xe||ye.nodeId!==xe)return P;if(ye.active&&te(xe)){S(ye.label);const Ze=ye.startPos;Ze&&setTimeout(()=>{try{J.translate(xe,Ze)}catch{}},0)}return N.current=null,We(!1),P}}catch{}return P}),J.addPipe(P=>{if(P.type==="render"&&P.data?.payload){const te=P.data.payload,ye=Mn.getByInstance(te);ye&&ye.isBackdrop&&setTimeout(()=>{const xe=J.nodeViews.get(te.id);if(xe&&xe.element){xe.element.style.zIndex!=="-10"&&(xe.element.style.zIndex="-10");const Ee=te.properties.locked?"none":"auto";xe.element.style.pointerEvents!==Ee&&(xe.element.style.pointerEvents=Ee)}},0)}if(P.type==="nodetranslate"){if(k.current||xa)return P;const te=P.data.id,ye=ie.getNode(te);if(!ye)return P;const xe=P.data.position,Ee=P.data.previous,Ze=xe.x-Ee.x,Gt=xe.y-Ee.y;if(Ze===0&&Gt===0)return P;if(qt&&_===te)return{...P,data:{...P.data,position:P.data.previous}};if(Je.size>1&&Je.has(te)){ia(!0);const Qt=[];return Je.forEach(Jt=>{if(Jt!==te){const gn=J.nodeViews.get(Jt);if(gn){const _t=gn.position.x+Ze,Yt=gn.position.y+Gt;Qt.push(J.translate(Jt,{x:_t,y:Yt}))}}}),Promise.all(Qt).then(()=>{ia(!1)}),P}const an=Mn.getByInstance(ye);if(an&&an.isBackdrop){if(ye.properties.locked)return{...P,data:{...P.data,position:P.data.previous}};if(Sn.isDragging&&Sn.nodesBeingMoved.has(te)&&Sn.activeBackdropId!==te)return P;if(Sn.activeBackdropId!==te){Sn.activeBackdropId=te,Sn.isDragging=!0,Sn.nodesBeingMoved.clear(),Pa();const Qt=Jt=>{Jt.forEach(gn=>{Sn.nodesBeingMoved.add(gn);const _t=ie.getNode(gn);_t&&_t.properties.capturedNodes&&Qt(_t.properties.capturedNodes)})};Qt(ye.properties.capturedNodes)}if(ye.properties.capturedNodes.length>0){ia(!0);const Qt=[];return ye.properties.capturedNodes.forEach(Jt=>{if(!Je.has(Jt)){const gn=J.nodeViews.get(Jt);if(gn){const _t=gn.position.x+Ze,Yt=gn.position.y+Gt;Qt.push(J.translate(Jt,{x:_t,y:Yt}))}}}),Promise.all(Qt).then(()=>{ia(!1)}),P}}}if(P.type==="nodedragged"){if(k.current)return P;Sn.isDragging=!1,Sn.activeBackdropId=null,Sn.nodesBeingMoved.clear(),nn=!1,_=null,qt&&(qt=!1,F.style.cursor=""),Pa()}return P}),Q.current=ie,K.current=J,L.current=gt,window.updateBackdropLockState=(P,te)=>{const ye=J.nodeViews.get(P);ye&&ye.element&&(ye.element.style.pointerEvents=te?"none":"auto",ke(" Updated backdrop lock state:",P,"locked:",te))},r(ie),l(J),d(se),{destroy:()=>{F.removeEventListener("pointerdown",on,{capture:!0}),F.removeEventListener("click",qo),F.removeEventListener("pointermove",wa,!0),window.removeEventListener("pointermove",Cn),window.removeEventListener("pointerup",Fa),window.removeEventListener("pointermove",Lt),window.removeEventListener("keyup",tn),window.removeEventListener("keydown",De,!0),window.removeEventListener("keyup",yn,!0),window.removeEventListener("blur",Os),document.removeEventListener("visibilitychange",Sa),Ea&&clearTimeout(Ea),Le.parentNode&&Le.parentNode.removeChild(Le),J.destroy()},selector:gt,editor:ie,area:J,engine:se,process:$e,processImmediate:Pe}},[]);E.useEffect(()=>{const F=a.current;if(!F)return;let ie=null,J=null,je=null;const be=new Map,se=fe=>{try{typeof fe.pointerId=="number"&&be.set(fe.pointerId,{el:fe.target,pointerType:fe.pointerType||"mouse"})}catch{}},C=fe=>{try{typeof fe.pointerId=="number"&&be.delete(fe.pointerId)}catch{}},R=fe=>{try{typeof fe.pointerId=="number"&&be.delete(fe.pointerId)}catch{}};F.addEventListener("gotpointercapture",se,!0),F.addEventListener("lostpointercapture",C,!0),window.addEventListener("pointerup",R,!0),window.addEventListener("pointercancel",R,!0),J=qO().then(()=>(ke(" External plugins loaded, now creating editor..."),z(F))).then(fe=>{fe.editor,ie=fe.area,fe.engine,fe.selector,r(fe.editor),l(fe.area),d(fe.engine),m(fe.selector),Z.current=fe.processImmediate,setTimeout(()=>{if(F){F.tabIndex=-1,F.focus();const Te=F.getBoundingClientRect(),$e=Te.left+Te.width/2,Pe=Te.top+Te.height/2,St=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:$e,clientY:Pe,deltaY:0});F.dispatchEvent(St),ke(" Container initialized and focused"),window.resetEditorView=()=>{ke(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const Ue=F.getBoundingClientRect(),He=Ue.left+Ue.width/2,Be=Ue.top+Ue.height/2;F.tabIndex=-1,F.focus();try{const gt=Array.from(be.entries());be.clear(),gt.forEach(([It,zt])=>{const ot=zt?.el,Lt=zt?.pointerType||"mouse";try{const tn=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:It,pointerType:Lt});F.dispatchEvent(tn)}catch{}try{F.releasePointerCapture(It)}catch{}try{ot&&typeof ot.releasePointerCapture=="function"&&ot.releasePointerCapture(It)}catch{}})}catch{}try{for(let It=0;It<5;It++)try{F.releasePointerCapture(It)}catch{}F.querySelectorAll(".node, .connection, [data-drag]").forEach(It=>{try{It.releasePointerCapture(1)}catch{}})}catch{}if(ie){const gt=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});F.dispatchEvent(gt);const It=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});F.dispatchEvent(It)}setTimeout(()=>{const gt=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:He,clientY:Be,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),It=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:He,clientY:Be,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});F.dispatchEvent(gt),setTimeout(()=>{F.dispatchEvent(It);const zt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:He,clientY:Be,deltaY:0});F.dispatchEvent(zt),ke(" Reset complete")},50)},50)})}}},100);let we=!1;return je=new ResizeObserver(Te=>{for(const $e of Te){const{width:Pe,height:St}=$e.contentRect;!we&&Pe>0&&St>0&&(we=!0,ke(" ResizeObserver: Container now has size",Pe,St),setTimeout(()=>{F.focus();const Ue=F.getBoundingClientRect(),He=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ue.left+Ue.width/2,clientY:Ue.top+Ue.height/2,deltaY:0});F.dispatchEvent(He)},50))}}),je.observe(F),fe});const le=()=>{ke(" graphLoadComplete event received - triggering view reset");const fe=()=>{window.resetEditorView&&window.resetEditorView()};fe(),setTimeout(fe,100),setTimeout(fe,500),setTimeout(fe,1e3)};return window.addEventListener("graphLoadComplete",le),()=>{je&&je.disconnect(),window.removeEventListener("graphLoadComplete",le),F.removeEventListener("gotpointercapture",se,!0),F.removeEventListener("lostpointercapture",C,!0),window.removeEventListener("pointerup",R,!0),window.removeEventListener("pointercancel",R,!0),J.then(fe=>fe.destroy())}},[z]),E.useEffect(()=>{if(!n||!s||!h)return;const F=async C=>{if(C.target.tagName==="INPUT"||C.target.tagName==="TEXTAREA"||C.target.isContentEditable)return;if(ke(` KeyDown: ${C.code} (Ctrl: ${C.ctrlKey}, Meta: ${C.metaKey})`),C.code==="F5"||(C.ctrlKey||C.metaKey)&&C.shiftKey&&C.code==="KeyR"){C.preventDefault(),ke(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(C.code==="KeyF"&&!C.ctrlKey&&!C.metaKey&&!C.altKey){C.preventDefault();const Te=K.current,$e=Q.current;if(Te&&$e){const Pe=$e.getNodes();Pe.length>0&&(ke(" Zoom extents triggered (F key)"),Vr.zoomAt(Te,Pe,{scale:.9}).catch(St=>{console.warn("[F key] zoomAt failed:",St)}))}return}const R=Q.current,le=K.current,fe=L.current;if(!R||!le){ke(" No editor/area ref available");return}const we=()=>{const Te=new Set;if(fe&&fe.entities&&fe.entities instanceof Map)for(const[$e,Pe]of fe.entities)R.getNode($e)&&Te.add($e);for(const $e of j.current){const Pe=R.getNode($e);ke(` Checking node ${$e}: exists=${!!Pe}`),Pe&&Te.add($e)}return ke(` Found ${Te.size} selected nodes:`,Array.from(Te)),Array.from(Te)};if(C.code==="Delete"||C.code==="Backspace"){ke(" Delete key pressed. lassoSelectedNodesRef.current size:",j.current.size),ke(" lassoSelectedNodesRef.current contents:",Array.from(j.current));const Te=we();if(ke(` Deleting ${Te.length} nodes:`,Te),Te.length>0){const $e=[],Pe=[],St=new Set(Te);for(const Ue of R.getConnections())(St.has(Ue.source)||St.has(Ue.target))&&Pe.push({source:Ue.source,target:Ue.target,sourceOutput:Ue.sourceOutput,targetInput:Ue.targetInput});for(const Ue of Te){const He=R.getNode(Ue);He&&$e.push({id:Ue,label:He.label,position:le.nodeViews.get(Ue)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(He.properties||{}))})}ge.current.push({type:"delete",nodes:$e,connections:Pe}),ke(" Saved undo state:",ge.current.length,"items in stack");for(const Ue of Te){const He=R.getConnections().filter(Be=>Be.source===Ue||Be.target===Ue);for(const Be of He)await R.removeConnection(Be.id);await R.removeNode(Ue),j.current.delete(Ue)}window.refreshBackdropGroups&&window.refreshBackdropGroups()}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyZ"&&!C.shiftKey){if(C.preventDefault(),ge.current.length===0){ke(" Nothing to undo");return}const Te=ge.current.pop();if(ke(" Undoing:",Te.type,Te.nodes.length,"nodes"),Te.type==="delete"){const $e={};k.current=!0;try{for(const Pe of Te.nodes){const St=Mn.getByLabel(Pe.label);if(St){let Ue;const He=()=>{le&&le.update("node",Ue.id),c&&R&&(c.reset(),setTimeout(()=>{R.getNodes().forEach(async it=>{try{await c.fetch(it.id)}catch{}})},0))},Be=()=>{St.updateStrategy==="dataflow"?(c&&c.reset(),c&&R&&setTimeout(()=>{R.getNodes().forEach(async it=>{try{await c.fetch(it.id)}catch{}})},0)):He()};Ue=St.factory(Be),Pe.properties&&Object.assign(Ue.properties,Pe.properties),await R.addNode(Ue),await le.translate(Ue.id,Pe.position),$e[Pe.id]=Ue.id}}for(const Pe of Te.connections){const St=$e[Pe.source]||Pe.source,Ue=$e[Pe.target]||Pe.target,He=R.getNode(St),Be=R.getNode(Ue);if(He&&Be)try{await R.addConnection(new Xt.Connection(He,Pe.sourceOutput,Be,Pe.targetInput))}catch(it){console.warn("[Editor] Could not restore connection:",it)}}ke(" Undo complete - restored",Te.nodes.length,"nodes"),window.refreshBackdropGroups&&window.refreshBackdropGroups()}finally{k.current=!1,le?.updateBackdropCaptures?.()}}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyC")try{const Te=we();if(Te.length===0){ke(" Nothing selected to copy");return}ke(` Copying ${Te.length} nodes`);const $e=[],Pe=new Set(Te);for(const He of Te){const Be=R.getNode(He);Be&&$e.push({label:Be.label,position:le.nodeViews.get(Be.id)?.position||{x:0,y:0},data:{id:Be.id,properties:JSON.parse(JSON.stringify(Be.properties||{}))}})}if($e.length===0){ke(" Nothing selected to copy (no nodes in selection)");return}const St=[];for(const He of R.getConnections())Pe.has(He.source)&&Pe.has(He.target)&&St.push({source:He.source,target:He.target,sourceOutput:He.sourceOutput,targetInput:He.targetInput});const Ue={nodes:$e,connections:St};localStorage.setItem("rete-clipboard",JSON.stringify(Ue)),ke("Copied to clipboard:",Ue)}catch(Te){console.error("[Editor] Copy failed:",Te)}if((C.ctrlKey||C.metaKey)&&C.code==="KeyV"){const Te=localStorage.getItem("rete-clipboard");if(!Te){ke(" Clipboard empty");return}try{const $e=JSON.parse(Te),Pe={},Ue=(K.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},He=le.area.transform,Be=(G.current.x-Ue.left-He.x)/He.k,it=(G.current.y-Ue.top-He.y)/He.k;let gt=1/0,It=1/0;for(const ot of $e.nodes)gt=Math.min(gt,ot.position.x),It=Math.min(It,ot.position.y);fe&&fe.entities&&Array.from(fe.entities).forEach(ot=>fe.remove(ot)),k.current=!0;try{for(const ot of $e.nodes){let Lt;const tn=Mn.getByLabel(ot.label);if(tn){const nn=()=>{le&&le.update("node",Lt.id),c&&R&&(c.reset(),setTimeout(()=>{R.getNodes().forEach(async _=>{try{await c.fetch(_.id)}catch{}})},0))},qt=()=>{tn.updateStrategy==="dataflow"?(c&&c.reset(),c&&R&&setTimeout(()=>{R.getNodes().forEach(async _=>{try{await c.fetch(_.id)}catch{}})},0)):nn()};Lt=tn.factory(qt)}if(Lt){typeof Lt.restore=="function"&&ot.data?Lt.restore(ot.data):ot.data&&ot.data.properties&&Lt.properties&&Object.assign(Lt.properties,ot.data.properties),await R.addNode(Lt);const nn=ot.position.x-gt,qt=ot.position.y-It,_={x:Be+nn,y:it+qt};await le.translate(Lt.id,_),Pe[ot.data.id]=Lt.id,fe&&fe.add({id:Lt.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{k.current=!1,le?.updateBackdropCaptures?.()}const zt=[];for(const ot of $e.connections){const Lt=Pe[ot.source],tn=Pe[ot.target];if(Lt&&tn){const nn=R.getNode(Lt),qt=R.getNode(tn);nn&&qt&&zt.push(R.addConnection(new Xt.Connection(nn,ot.sourceOutput,qt,ot.targetInput)))}}if(await Promise.all(zt),c&&R){c.reset();for(const ot of R.getNodes())try{await c.fetch(ot.id)}catch{}}ke("Pasted from clipboard")}catch($e){console.error("[Editor] Paste failed:",$e)}}C.code==="Home"&&(C.preventDefault(),le.area&&(le.area.zoom(1,0,0),le.area.translate(0,0),ke(" Viewport reset via Home key"))),C.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),ke(" Drag state reset via Escape key"))},ie=C=>{G.current={x:C.clientX,y:C.clientY}},J=C=>{C.key==="Shift"&&(de.current=!0)},je=C=>{C.key==="Shift"&&(de.current=!1)},be=()=>{ke(" Received delete from Electron IPC"),F({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let se=null;return window.api&&window.api.onDeleteKey&&(se=window.api.onDeleteKey(be)),window.addEventListener("keydown",F),window.addEventListener("keydown",J),window.addEventListener("keyup",je),window.addEventListener("mousemove",ie),()=>{window.removeEventListener("keydown",F),window.removeEventListener("keydown",J),window.removeEventListener("keyup",je),window.removeEventListener("mousemove",ie),se&&se()}},[n,s,c,h]),E.useEffect(()=>{const F=a.current;if(!F||!n||!s)return;const ie=J=>{const je=J.target.closest('[data-testid="node"]');if(je){J.preventDefault();const be=je.dataset.nodeId||Array.from(s.nodeViews.entries()).find(([se,C])=>C.element===je)?.[0];if(be){const se=n.getNode(be);ce({visible:!0,position:{x:J.clientX,y:J.clientY},items:[{label:"Delete",handler:async()=>{const C=n.getConnections().filter(R=>R.source===be||R.target===be);for(const R of C)await n.removeConnection(R.id);await n.removeNode(be)}}],nodeContext:se})}}else{J.preventDefault();const be=window._t2GetMenuItems?window._t2GetMenuItems():[];ce({visible:!0,position:{x:J.clientX,y:J.clientY},items:be,nodeContext:null})}};return F.addEventListener("contextmenu",ie),()=>{F.removeEventListener("contextmenu",ie)}},[n,s]);const oe=E.useCallback(()=>{ce(F=>({...F,visible:!1}))},[]),he=E.useCallback(async F=>{F.handler&&await F.handler(Y.position)},[Y.position]),Oe=async()=>{if(!(!n||!s))try{const F=n.getNodes().map(we=>{const Te=typeof we.toJSON=="function"?we.toJSON():{...we};return we.properties&&(Te.properties=we.properties),{id:we.id,label:we.label,position:s.nodeViews.get(we.id)?.position||{x:0,y:0},data:Te}}),ie=n.getConnections().map(we=>({id:we.id,source:we.source,target:we.target,sourceOutput:we.sourceOutput,targetInput:we.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:F,connections:ie,viewport:J},be=JSON.stringify(je,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){ke("Running in HA ingress - showing save dialog"),U(je),ne(!0);return}try{be.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",be))}catch{console.warn("localStorage skipped")}ke("Graph saved to localStorage");try{const we=await fetch(wn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:be});we.ok?ke("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",we.status)}catch(we){console.warn("[handleSave] Failed to save to server:",we)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",be),ke("[handleSave] Saved temp file for Electron reload")}catch(we){console.warn("[handleSave] Failed to save temp file via Electron API",we)}if(window.showSaveFilePicker)try{const Te=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await Te.write(be),await Te.close(),ke("Graph saved to file");return}catch(we){if(we.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",we)}const R=new Blob([be],{type:"application/json"}),le=URL.createObjectURL(R),fe=document.createElement("a");fe.href=le,fe.download=`autotron_graph_${Date.now()}.json`,fe.click(),URL.revokeObjectURL(le),ke("Graph saved via download")}catch(F){console.error("Failed to save graph:",F)}};E.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!n||!s))try{const F=n.getNodes().map(se=>{const C=typeof se.toJSON=="function"?se.toJSON():{...se};return se.properties&&(C.properties=se.properties),{id:se.id,label:se.label,position:s.nodeViews.get(se.id)?.position||{x:0,y:0},data:C}}),ie=n.getConnections().map(se=>({id:se.id,source:se.source,target:se.target,sourceOutput:se.sourceOutput,targetInput:se.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:F,connections:ie,viewport:J,preUpdateSave:!0,timestamp:Date.now()},be=JSON.stringify(je);be.length<2e6&&(localStorage.setItem("saved-graph",be),ke("[triggerGraphSave] Graph saved before update"))}catch(F){console.warn("[triggerGraphSave] Failed:",F)}},()=>{delete window.triggerGraphSave}),[n,s]);const[Ge,Ve]=E.useState(!1),tt=E.useRef(null),wt=E.useRef(Date.now());E.useEffect(()=>{if(!n)return;const F=()=>{Ve(!0)};n.addPipe(ie=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(ie.type)&&F(),ie))},[n]),E.useEffect(()=>{if(!n||!s)return;const F=async()=>{if(!(window.graphLoading||H.current)&&Ge)try{const ie=n.getNodes().map(C=>{const R=typeof C.toJSON=="function"?C.toJSON():{...C};return C.properties&&(R.properties=C.properties),{id:C.id,label:C.label,position:s.nodeViews.get(C.id)?.position||{x:0,y:0},data:R}}),J=n.getConnections().map(C=>({id:C.id,source:C.source,target:C.target,sourceOutput:C.sourceOutput,targetInput:C.targetInput})),je=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},be={nodes:ie,connections:J,viewport:je,autoSaved:!0,timestamp:Date.now()},se=JSON.stringify(be);if(se.length<2e6){localStorage.setItem("saved-graph",se),wt.current=Date.now(),Ve(!1);try{await fetch(wn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:se})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(ie){console.warn("[Auto-save] Failed:",ie)}};return tt.current=setInterval(F,12e4),()=>{tt.current&&clearInterval(tt.current)}},[n,s,Ge]),E.useEffect(()=>{if(!n||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),ke("[AutoLoad] Detected post-update reload, attempting to restore graph...");const ie=setTimeout(async()=>{try{const J=localStorage.getItem("saved-graph");if(J){ke("[AutoLoad] Found saved graph, loading...");const je=JSON.parse(J);je.nodes&&je.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(J){console.warn("[AutoLoad] Failed to auto-load graph:",J)}},1e3);return()=>clearTimeout(ie)}},[n,s,c]);const jt=E.useRef(!1);E.useEffect(()=>{if(!n||!s||!c||jt.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){ke("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),jt.current=!0;return}const J=localStorage.getItem("saved-graph"),je=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(J||je){ke("[ServerAutoLoad] Skipping - desktop mode with local graph");return}jt.current=!0;const se=setTimeout(async()=>{try{ke("[ServerAutoLoad] Fetching last active graph from server...");const R=await(await fetch(wn("/api/engine/last-active"))).json();R.success&&R.graph?(ke("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(R.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):ke("[ServerAutoLoad] No last active graph on server")}catch(C){console.warn("[ServerAutoLoad] Failed to fetch from server:",C)}},1500);return()=>clearTimeout(se)},[n,s,c]);const Dn=async()=>{if(!n||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!n,area:!!s,engine:!!c});return}try{let F=localStorage.getItem("saved-graph");if(!F&&window.api?.readTempFile)try{const se=await window.api.readTempFile("autotron_graph.json");se?.success&&se.content&&(F=se.content,ke("[handleLoad] Loaded graph from Electron temp file"))}catch(se){console.warn("[handleLoad] Failed to read Electron temp file",se)}if(!F){alert("No saved graph found");return}const ie=JSON.parse(F);ke(`[handleLoad] Loading graph with ${ie.nodes?.length} nodes`);const J=ib(ie);if(!J.valid){console.warn("[handleLoad] Graph validation failed:",J.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${J.errors.length} errors`,4e3);const se=sb(ie);se.repaired&&(ke("[handleLoad] Graph repaired:",se.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${se.fixes.length} fixes applied`,3e3),Object.assign(ie,se.graphData))}J.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",J.warnings),await Kt();const je=n.getNodes();if(je.length>0){console.error("[handleLoad] Clear did not work! Still have",je.length,"nodes");for(const se of je)try{await n.removeNode(se.id)}catch(C){console.error("[handleLoad] Force remove failed:",C)}}if(k.current=!0,H.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of ie.nodes){let R;const le=Mn.getByLabel(C.label);if(le){const fe=()=>{if(H.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};R=le.factory(fe)}R&&(R.id=C.id,typeof R.restore=="function"&&C.data?R.restore(C.data):C.data&&C.data.properties&&R.properties&&Object.assign(R.properties,C.data.properties),await n.addNode(R),await s.translate(R.id,C.position))}const se=[];for(const C of ie.connections){const R=n.getNode(C.source),le=n.getNode(C.target);R&&le&&se.push(n.addConnection(new Xt.Connection(R,C.sourceOutput,le,C.targetInput)))}await Promise.all(se)}finally{k.current=!1,s?.updateBackdropCaptures?.()}const be=n.getNodes();if(be.length>0&&s){ke("[handleLoad] Zooming to fit",be.length,"nodes...");try{await Vr.zoomAt(s,be,{scale:.9})}catch(se){console.warn("[handleLoad] zoomAt failed:",se)}}Z.current&&(ke("[handleLoad] Processing graph immediately..."),await Z.current(),ke("[handleLoad] Graph processing complete")),H.current=!1,ke("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(ke("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const se=ie.viewport||{x:0,y:0,k:1},C=se.k||1,R=se.x||0,le=se.y||0;ke("[handleLoad] Restoring viewport:",{savedX:R,savedY:le,savedK:C}),ke("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(C,0,0),s.area.translate(R,le)}catch(we){console.warn("[handleLoad] Viewport restore failed:",we)}ke("[handleLoad] Transform after restore:",{...s.area.transform});const fe=s.container;if(fe){fe.tabIndex=-1,fe.focus(),document.activeElement&&document.activeElement!==fe&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const we=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(we,100),setTimeout(we,500),setTimeout(we,1e3)}n.getNodes().forEach(we=>{const Te=s.nodeViews.get(we.id);if(Te?.element)try{for(let $e=0;$e<10;$e++)try{Te.element.releasePointerCapture($e)}catch{}}catch{}})}},300),ke("Graph loaded")}catch(F){console.error("Failed to load graph:",F),H.current=!1,alert("Failed to load graph")}},mn=async()=>{if(!n||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(n.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const ie=await fetch(wn("/api/examples/starter"));if(!ie.ok)throw new Error(`Failed to fetch example: ${ie.status}`);const J=await ie.json();if(!J.success||!J.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(J.graph)),ke("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await Dn(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(ie){console.error("[handleLoadExample] Failed:",ie),alert("Failed to load example graph: "+ie.message)}};E.useEffect(()=>{const F=()=>{ke("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),Dn()};return document.addEventListener("autoLoadGraph",F),()=>document.removeEventListener("autoLoadGraph",F)},[n,s,c]);const Kt=async()=>{if(!n){console.warn("[handleClear] No editor instance!");return}try{const F=n.getConnections(),ie=n.getNodes();ke(`[handleClear] Removing ${F.length} connections and ${ie.length} nodes`);for(const je of F)await n.removeConnection(je.id);for(const je of ie)await n.removeNode(je.id);const J=n.getNodes();ke(`[handleClear] Complete. Remaining nodes: ${J.length}`),J.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",J.map(je=>je.id))}catch(F){console.error("Failed to clear graph:",F)}},Hn=()=>{if(!(!n||!s))try{const F=n.getNodes().map(R=>{const le=typeof R.toJSON=="function"?R.toJSON():{...R};return R.properties&&(le.properties=R.properties),{id:R.id,label:R.label,position:s.nodeViews.get(R.id)?.position||{x:0,y:0},data:le}}),ie=n.getConnections().map(R=>({id:R.id,source:R.source,target:R.target,sourceOutput:R.sourceOutput,targetInput:R.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:F,connections:ie,viewport:J},be=new Blob([JSON.stringify(je,null,2)],{type:"application/json"}),se=URL.createObjectURL(be),C=document.createElement("a");C.href=se,C.download=`graph-${Date.now()}.json`,C.click(),URL.revokeObjectURL(se),ke("Graph exported")}catch(F){console.error("Failed to export graph:",F)}},Qe=async F=>{const ie=ib(F);if(!ie.valid){console.warn("[handleImport] Graph validation failed:",ie.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ie.errors.length} errors`,4e3);const be=sb(F);if(be.repaired)ke("[handleImport] Graph repaired:",be.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${be.fixes.length} fixes applied`,3e3),F=be.graphData;else if(!confirm(`Graph has ${ie.errors.length} errors. Continue anyway?`))return}const J={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let je=0;if(console.error=(...be)=>{je++<10&&J.error(...be)},J.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!n||!s||!c){Object.assign(console,J);return}try{if(await Kt(),k.current=!0,H.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of F.nodes){let R;const le=Mn.getByLabel(C.label);if(!le){console.warn(`[handleImport] No definition found for node label: "${C.label}"`);continue}if(le){const fe=()=>{if(H.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};R=le.factory(fe)}R&&(R.id=C.id,C.label==="Timeline Color"&&J.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof R.restore=="function",hasData:!!C.data,dataKeys:C.data?Object.keys(C.data):"N/A",propertiesKeys:C.data?.properties?Object.keys(C.data.properties):"N/A",previewModeValue:C.data?.properties?.previewMode}),typeof R.restore=="function"&&C.data?R.restore(C.data):C.data&&C.data.properties&&R.properties&&Object.assign(R.properties,C.data.properties),await n.addNode(R),await s.translate(R.id,C.position))}const se=[];for(const C of F.connections){const R=n.getNode(C.source),le=n.getNode(C.target);R&&le?se.push(n.addConnection(new Xt.Connection(R,C.sourceOutput,le,C.targetInput))):console.warn(`[handleImport] Connection skipped - missing node: source=${C.source} (${!!R}), target=${C.target} (${!!le})`)}await Promise.all(se)}finally{k.current=!1,s?.updateBackdropCaptures?.()}const be=n.getNodes();if(be.length>0&&s)try{await Vr.zoomAt(s,be,{scale:.9})}catch{}H.current=!1,setTimeout(async()=>{window.graphLoading=!1,ke("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{Z.current&&(ke("[handleImport] Running processImmediate to sync node states"),Z.current()),setTimeout(()=>{Z.current&&(ke("[handleImport] Running second processImmediate for late-loading data"),Z.current())},1500)},500);try{const C=JSON.stringify(F,null,2);C.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",C),ke("[handleImport] Graph saved to localStorage")),(await fetch(wn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:C})).ok&&ke("[handleImport] Graph saved to server as last active")}catch(C){console.warn("[handleImport] Failed to save imported graph:",C)}const se=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(se,100),setTimeout(se,500)},2e3),Object.assign(console,J),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),ke("Graph imported successfully. Pan/zoom should work now.")}catch(be){window.graphLoading=!1,typeof J<"u"&&Object.assign(console,J),console.error("Failed to import graph:",be),H.current=!1,alert("Failed to import graph: "+be.message)}};return p.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[p.jsx(XO,{width:re,panelRef:Ke,dropActive:st,favoriteGroups:Re,onAddFavorite:S,onRemoveFavorite:M,onCreateNode:O}),p.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${re}px`}}),p.jsx("div",{ref:b}),(()=>{const F=y?x.current:b.current;return F?Fr.createPortal(p.jsx(PO,{onSave:Oe,onLoad:Dn,onLoadExample:mn,onClear:Kt,onExport:Hn,onImport:Qe,hasUnsavedChanges:Ge,isMerged:y,onToggleMerged:()=>v(ie=>!ie)}),F):null})(),p.jsx(ZO,{dockSlotRef:x}),p.jsx(QO,{visible:Y.visible,position:Y.position,items:Y.items,onClose:oe,onSelect:he}),p.jsx(KO,{isOpen:B,onClose:()=>ne(!1),onSave:()=>{Ve(!1),ne(!1)},currentGraphData:ve})]})}class dj extends Da.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",r),this.setState({error:n,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?p.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:p.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[p.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),p.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),p.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&p.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[p.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),p.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[p.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#4a4a6c",onMouseOut:n=>n.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),p.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#339af0",onMouseOut:n=>n.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function fj({isLoading:a,progress:n=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[d,h]=E.useState(!1),[m,y]=E.useState(a);return E.useEffect(()=>{if(!a&&m){h(!0);const v=setTimeout(()=>{y(!1),h(!1)},500);return()=>clearTimeout(v)}else a&&!m&&y(!0)},[a,m]),m?p.jsxs("div",{className:`loading-overlay ${d?"fade-out":""}`,children:[p.jsx("div",{className:"loading-logo",children:""}),p.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),p.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),p.jsx("div",{className:"loading-progress-container",children:p.jsx("div",{className:"loading-progress-bar",children:p.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,n)}%`}})})}),p.jsx("div",{className:"loading-status",children:r}),l>0&&p.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&p.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function hj({updateInfo:a,onClose:n,onApplyUpdate:r}){const[s,l]=E.useState(!1),[c,d]=E.useState("");if(!a||!a.hasUpdate)return null;const h=async()=>{l(!0),d("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),d("Graph saved! Starting update..."))}catch(y){console.warn("Pre-update graph save failed:",y)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const v=await(await bn("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d(v.message||"Updating... The app will restart shortly."),setTimeout(()=>{d("Update applied! Reloading page..."),setTimeout(()=>{const b=()=>{bn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)},2e3)}catch(y){y.message.includes("fetch")||y.message.includes("network")?(d("Server restarting... Reloading page..."),setTimeout(()=>{const v=()=>{bn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(v,2e3))};v()},3e3)):(d(`Update failed: ${y.message}`),l(!1))}},m=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),n()};return p.jsx("div",{className:"update-modal-overlay",children:p.jsxs("div",{className:"update-modal",children:[p.jsxs("div",{className:"update-modal-header",children:[p.jsx("span",{className:"update-icon",children:""}),p.jsx("h2",{children:"Update Available!"})]}),p.jsxs("div",{className:"update-modal-version",children:[p.jsx("span",{className:"version-current",children:a.currentVersion}),p.jsx("span",{className:"version-arrow",children:""}),p.jsx("span",{className:"version-new",children:a.newVersion})]}),p.jsxs("div",{className:"update-modal-content",children:[p.jsx("h3",{children:"What's New:"}),p.jsx("div",{className:"changelog-content",children:p.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&p.jsxs("div",{className:"update-status",children:[p.jsx("span",{className:"status-spinner",children:""}),c]}),p.jsx("div",{className:"update-modal-actions",children:s?p.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"update-btn update-btn-primary",onClick:h,children:"Update Now"}),p.jsx("button",{className:"update-btn update-btn-secondary",onClick:m,children:"Later"})]})})]})})}const pj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};pj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Xw=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},n={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,d]of Object.entries(s)){const h=n[c];h&&(d.accent&&(l.style.setProperty(`--node-${h}-color`,d.accent),l.style.setProperty(`--node-${h}-color-rgb`,a(d.accent))),d.background&&l.style.setProperty(`--node-${h}-bg`,d.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},Kw=()=>{const a=c=>{const d=parseInt(c.slice(1,3),16),h=parseInt(c.slice(3,5),16),m=parseInt(c.slice(5,7),16);return`${d}, ${h}, ${m}`},n=(c,d=15)=>{const h=parseInt(c.slice(1),16),m=Math.max(0,(h>>16)-Math.round(255*d/100)),y=Math.max(0,(h>>8&255)-Math.round(255*d/100)),v=Math.max(0,(h&255)-Math.round(255*d/100));return`#${(16777216|m<<16|y<<8|v).toString(16).slice(1)}`},r=(c,d=20)=>{const h=parseInt(c.slice(1),16),m=Math.min(255,(h>>16)+Math.round(255*d/100)),y=Math.min(255,(h>>8&255)+Math.round(255*d/100)),v=Math.min(255,(h&255)+Math.round(255*d/100));return`#${(16777216|m<<16|y<<8|v).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),d=c?JSON.parse(c):{},h=document.documentElement;for(const[m,y]of Object.entries(s)){const v=d[m]?.color||l[m];v&&(h.style.setProperty(`--socket-${y}-color`,v),h.style.setProperty(`--socket-${y}-dark`,n(v)),h.style.setProperty(`--socket-${y}-border`,r(v)),h.style.setProperty(`--socket-${y}-rgb`,a(v)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};Xw();Kw();window.applyCategoryColors=Xw;window.applySocketColors=Kw;const Hf=new Map,Vf=new Map;function mj(){const[a,n]=E.useState(me.connected),[r,s]=E.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=E.useState([]),[d,h]=E.useState([]),[m,y]=E.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[v,b]=E.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[x,k]=E.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[j,Z]=E.useState(null),[H,Q]=E.useState(0),[K,L]=E.useState(()=>localStorage.getItem("eventLogFilter")||"all"),[G,de]=E.useState([]),ge=E.useRef(null),Y=E.useRef(null),ce=E.useRef({authenticated:!1,invalidPinNotified:!1}),re=100,pe=ap();E.useEffect(()=>{const U=setInterval(()=>{Q(S=>S+1)},3e4);return()=>clearInterval(U)},[]);const Re=E.useCallback(()=>{const U=window._t2Editor;if(!U)return;const M=U.getNodes().filter(O=>O.label==="Backdrop"||O.constructor?.name==="BackdropNode"||O.properties?.width!==void 0&&O.properties?.height!==void 0&&O.properties?.title!==void 0).map(O=>({id:O.id,title:O.properties?.title||"Group",color:O.properties?.customColor||window.BackdropColorPalette?.[O.properties?.colorIndex]?.border||"#888"})).sort((O,z)=>O.title.localeCompare(z.title));de(M)},[]);E.useEffect(()=>{const U=()=>{setTimeout(Re,200)};window.addEventListener("graphLoadComplete",U),window.refreshBackdropGroups=Re;const S=setTimeout(Re,500);return()=>{window.removeEventListener("graphLoadComplete",U),delete window.refreshBackdropGroups,clearTimeout(S)}},[Re]),E.useEffect(()=>Pw(S=>{k(S),!S.isLoading&&S.progress===100&&S.failedPlugins?.length>0&&pe.warning(`Loaded ${S.loadedCount} plugins (${S.failedPlugins.length} failed)`),S.error&&pe.error(`Plugin loading failed: ${S.error}`)}),[pe]),E.useEffect(()=>{function U(){n(!0),pe.success("Connected to server"),Ae("system","Socket connected to server"),Vf.clear();const Qe=cs();Qe&&me.emit("authenticate",Qe),me.emit("editor-active"),me.emit("request-ha-status")}function S(){n(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),ce.current.authenticated=!1,pe.warning("Disconnected from server - reconnecting..."),Ae("system","Socket disconnected from server")}function M(Qe){Ae("system",`Socket reconnected after ${Qe} attempt(s)`)}function O(Qe){Qe%5===0&&Ae("system",`Reconnection attempt ${Qe}...`)}function z(Qe){Ae("system","Reconnection failed, retrying...")}function oe(Qe){s(Qe)}function he(){ce.current.authenticated||(ce.current.authenticated=!0,ce.current.invalidPinNotified=!1,pe.success("Authenticated"))}function Oe(Qe){ce.current.authenticated=!1;const F=(Qe?.error||"").toString();if(F.toLowerCase().includes("invalid pin")){ce.current.invalidPinNotified||(ce.current.invalidPinNotified=!0,pe.error("Stored PIN is invalid. Update it in Settings  Security."));return}const ie=F?`Authentication failed: ${F}`:"Authentication failed";pe.error(ie)}function Ge(){if(!me.connected)return;ce.current.invalidPinNotified=!1;const Qe=cs();Qe&&me.emit("authenticate",Qe)}function Ve(Qe){const{id:F,state:ie,on:J,name:je,vendor:be}=Qe;if(!F)return;const se=Vf.get(F),C=J!==void 0?J:ie==="on"||ie==="playing"||ie==="open",R=je||Qe.friendly_name||Qe.attributes?.friendly_name||F.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(se&&se.on===C)return;Vf.set(F,{on:C,state:ie});const le=Hf.get(F),fe=C?"ON":"OFF";let we=be||"External";be||(F.startsWith("ha_")?we="HA":F.startsWith("hue_")?we="Hue":F.startsWith("kasa_")&&(we="Kasa")),le&&Date.now()-le.timestamp<5e3?(Ae("device",`${R}  ${fe}`,{source:"app",triggeredBy:le.nodeTitle,nodeId:le.nodeId}),Hf.delete(F)):Ae("trigger",`${R}  ${fe}`,{source:we})}function tt(Qe){}function wt(Qe){const{nodeId:F,nodeLabel:ie,result:J}=Qe;Ae("node",`${ie||F} executed`,{...J,nodeId:F})}function jt(Qe){Array.isArray(Qe)&&h(Qe.slice(0,20))}function Dn(Qe){const{type:F,name:ie,value:J}=Qe;Ae("trigger",`${F}: ${ie}`,J)}function mn(Qe){if(Qe.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==Qe.newVersion&&pe.info(` Update available: ${Qe.currentVersion}  ${Qe.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>Z(Qe)})}me.on("connect",U),me.on("disconnect",S),me.on("reconnect",M),me.on("reconnect_attempt",O),me.on("reconnect_error",z),me.on("auth-success",he),me.on("auth-failed",Oe),me.on("ha-connection-status",oe),me.on("device-state-update",Ve),me.on("device_state_change",tt),me.on("node_executed",wt),me.on("scheduled_events",jt),me.on("trigger_event",Dn),me.on("update-available",mn),window.addEventListener("t2-pin-changed",Ge);const Kt=()=>{me.connected&&me.emit("editor-inactive")};window.addEventListener("beforeunload",Kt),q1();const Hn=setInterval(()=>{me.connected&&me.emit("editor-heartbeat")},3e4);return()=>{me.connected&&me.emit("editor-inactive"),clearInterval(Hn),me.off("connect",U),me.off("disconnect",S),me.off("reconnect",M),me.off("reconnect_attempt",O),me.off("reconnect_error",z),me.off("auth-success",he),me.off("auth-failed",Oe),me.off("ha-connection-status",oe),me.off("device-state-update",Ve),me.off("device_state_change",tt),me.off("node_executed",wt),me.off("scheduled_events",jt),me.off("trigger_event",Dn),me.off("update-available",mn),window.removeEventListener("t2-pin-changed",Ge),window.removeEventListener("beforeunload",Kt),G1()}},[]);const Ae=(U,S,M=null)=>{const O=new Date().toLocaleTimeString();c(z=>[{timestamp:O,type:U,message:S,details:M},...z].slice(0,re))},Ke=E.useRef({}),st=E.useCallback((U,S)=>{const M=S.map(he=>({...he,nodeId:U}));Ke.current[U]=M;const O=[];Object.values(Ke.current).forEach(he=>{Array.isArray(he)&&O.push(...he)});const z=new Date,oe=O.filter(he=>he.time&&new Date(he.time)>z).sort((he,Oe)=>new Date(he.time)-new Date(Oe.time)).slice(0,20);h(oe)},[]),We=E.useCallback(U=>{delete Ke.current[U],st(U,[])},[st]);E.useEffect(()=>(window.addEventLog=Ae,window.setUpcomingEvents=h,window.registerScheduledEvents=st,window.unregisterScheduledEvents=We,window.T2Toast=pe,window.registerPendingCommand=(U,S,M,O)=>{Hf.set(U,{nodeTitle:S,action:M,nodeId:O,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[st,We,pe]);const N=U=>{if(!U)return"";const S=new Date(U),O=S-new Date,z=Math.floor(O/6e4),oe=Math.floor(z/60),he=Math.floor(oe/24);let Oe="";return he>0?Oe=`${he}d ${oe%24}h`:oe>0?Oe=`${oe}h ${z%60}m`:z>0?Oe=`${z}m`:Oe="<1m",`${S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${Oe})`},B=E.useCallback(async U=>{if(!U)return;const S=window._t2Area,M=window._t2Editor;if(!S||!M){console.warn("[focusNode] Editor not ready");return}const O=M.getNode(U);if(!O){console.warn("[focusNode] Node not found:",U);return}try{const{AreaExtensions:z}=await qf(async()=>{const{AreaExtensions:oe}=await Promise.resolve().then(()=>kv);return{AreaExtensions:oe}},void 0,import.meta.url);await z.zoomAt(S,[O],{scale:1})}catch(z){console.warn("[focusNode] Failed to zoom to node:",z)}},[]),ne=E.useCallback(async U=>{if(!U)return;const S=window._t2Area,M=window._t2Editor;if(!S||!M){console.warn("[focusBackdrop] Editor not ready");return}const O=M.getNode(U);if(!O){console.warn("[focusBackdrop] Backdrop not found:",U);return}try{const z=S.nodeViews.get(U);if(!z){console.warn("[focusBackdrop] Node view not found");return}const oe=z.position,he=O.properties?.width||O.width||400,Oe=O.properties?.height||O.height||300,Ge=oe.x+he/2,Ve=oe.y+Oe/2,tt=S.container,wt=tt.clientWidth,jt=tt.clientHeight,Dn=wt*.85/he,mn=jt*.85/Oe,Kt=Math.min(Dn,mn,1.5),Hn=wt/2-Ge*Kt,Qe=jt/2-Ve*Kt;await S.area.zoom(Kt,0,0),await S.area.translate(Hn,Qe)}catch(z){console.warn("[focusBackdrop] Failed to zoom to backdrop:",z)}},[]),ve=E.useCallback(async()=>{const U=window._t2Area,S=window._t2Editor;if(!U||!S){console.warn("[zoomExtents] Editor not ready");return}const M=S.getNodes();if(M.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:O}=await qf(async()=>{const{AreaExtensions:z}=await Promise.resolve().then(()=>kv);return{AreaExtensions:z}},void 0,import.meta.url);await O.zoomAt(U,M,{scale:.7})}catch(O){console.warn("[zoomExtents] Failed to zoom:",O)}},[]);return p.jsxs("div",{className:"app-container",children:[j&&j.hasUpdate&&p.jsx(hj,{updateInfo:j,onClose:()=>Z(null)}),p.jsx(fj,{isLoading:x.isLoading,progress:x.progress,status:x.status,loadedCount:x.loadedCount,totalCount:x.totalCount,error:x.error}),p.jsx("div",{className:"editor-wrapper",children:p.jsx(uj,{})}),p.jsx("div",{className:"resize-handle",ref:Y,onMouseDown:U=>{U.preventDefault();const S=U.clientY,M=m,O=oe=>{const he=S-oe.clientY,Oe=Math.max(80,Math.min(400,M+he));y(Oe),localStorage.setItem("panelHeight",Oe)},z=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",z)},children:p.jsx("div",{className:"resize-handle-grip"})}),p.jsxs("div",{className:"bottom-panels",style:{height:m,fontSize:v},children:[p.jsxs("div",{className:"panel event-log-panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("span",{className:"panel-title",children:"Event Log"}),p.jsxs("div",{className:"group-nav-buttons",children:[p.jsx("button",{className:"group-nav-btn group-nav-all",onClick:ve,title:"Zoom to fit all nodes (F key)",children:" All"}),G.map(U=>p.jsx("button",{className:"group-nav-btn",style:{borderColor:U.color},onClick:()=>ne(U.id),title:`Zoom to "${U.title}" group`,children:U.title},U.id))]}),p.jsxs("div",{className:"panel-controls",children:[p.jsxs("div",{className:"filter-buttons",children:[p.jsx("button",{className:`filter-btn ${K==="all"?"active":""}`,onClick:()=>{L("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),p.jsx("button",{className:`filter-btn ${K==="app"?"active":""}`,onClick:()=>{L("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),p.jsx("button",{className:`filter-btn ${K==="ha"?"active":""}`,onClick:()=>{L("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),p.jsx("button",{className:"font-size-btn",onClick:()=>{const U=Math.max(8,v-1);b(U),localStorage.setItem("panelFontSize",U)},children:"A-"}),p.jsxs("span",{className:"font-size-label",children:[v,"px"]}),p.jsx("button",{className:"font-size-btn",onClick:()=>{const U=Math.min(16,v+1);b(U),localStorage.setItem("panelFontSize",U)},children:"A+"}),p.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),p.jsx("div",{className:"panel-content",ref:ge,children:l.length===0?p.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(U=>K==="all"?!0:K==="app"?U.details?.triggeredBy||U.details?.source==="app"||U.type==="node"||U.type==="device"||U.type==="system":K==="ha"?U.type==="trigger"||U.details?.source&&U.details.source!=="app"&&!U.details?.triggeredBy:!0).map((U,S)=>p.jsxs("div",{className:`log-entry log-${U.type}${U.details?.nodeId?" clickable":""}`,title:U.details?.nodeId?"Click to jump to this node":U.details?.triggeredBy?`Triggered by: ${U.details.triggeredBy}`:U.details?.source&&U.details.source!=="app"?`Triggered externally via ${U.details.source}`:"",onClick:()=>U.details?.nodeId&&B(U.details.nodeId),style:U.details?.nodeId?{cursor:"pointer"}:{},children:[p.jsx("span",{className:"log-time",children:U.timestamp}),p.jsx("span",{className:`log-type-badge ${U.type}`,children:U.type==="trigger"?"external":U.type}),p.jsx("span",{className:"log-message",children:U.message}),U.details?.triggeredBy&&p.jsxs("span",{className:"log-source app-source",children:["via ",U.details.triggeredBy]}),U.details?.source&&U.details.source!=="app"&&!U.details?.triggeredBy&&p.jsxs("span",{className:"log-source external-source",children:["via ",U.details.source]})]},S))})]}),p.jsxs("div",{className:"panel upcoming-events-panel",children:[p.jsx("div",{className:"panel-header",children:p.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),p.jsx("div",{className:"panel-content",children:d.length===0?p.jsx("div",{className:"empty-message",children:"No scheduled events..."}):d.map((U,S)=>p.jsxs("div",{className:`event-entry event-${U.action||"unknown"}${U.nodeId?" clickable":""}`,onClick:()=>U.nodeId&&B(U.nodeId),title:U.nodeId?"Click to jump to this node":"",style:U.nodeId?{cursor:"pointer"}:{},children:[p.jsx("span",{className:"event-time",children:N(U.time)}),p.jsx("span",{className:`event-action ${U.action}`,children:U.action||"event"}),p.jsx("span",{className:"event-device",children:U.deviceName||U.device||"Unknown"})]},S))})]})]})]})}function yj(){return p.jsx(dj,{children:p.jsxs(YO,{children:[p.jsx(FO,{}),p.jsx(mj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");cb.createRoot(document.getElementById("root")).render(p.jsx(E.StrictMode,{children:p.jsx(yj,{})}));
