function ob(a,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Ch(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var id={exports:{}},yo={};var Hg;function tE(){if(Hg)return yo;Hg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:f,ref:l!==void 0?l:null,props:c}}return yo.Fragment=n,yo.jsx=r,yo.jsxs=r,yo}var Vg;function nE(){return Vg||(Vg=1,id.exports=tE()),id.exports}var m=nE(),sd={exports:{}},Qe={};var qg;function aE(){if(qg)return Qe;qg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function k(E){return E===null||typeof E!="object"?null:(E=S&&E[S]||E["@@iterator"],typeof E=="function"?E:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,I={};function Q(E,B,D){this.props=E,this.context=B,this.refs=I,this.updater=D||N}Q.prototype.isReactComponent={},Q.prototype.setState=function(E,B){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,B,"setState")},Q.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function K(){}K.prototype=Q.prototype;function z(E,B,D){this.props=E,this.context=B,this.refs=I,this.updater=D||N}var Y=z.prototype=new K;Y.constructor=z,P(Y,Q.prototype),Y.isPureReactComponent=!0;var he=Array.isArray;function ue(){}var H={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function W(E,B,D){var V=D.ref;return{$$typeof:a,type:E,key:B,ref:V!==void 0?V:null,props:D}}function Z(E,B){return W(E.type,B,E.props)}function fe(E){return typeof E=="object"&&E!==null&&E.$$typeof===a}function _e(E){var B={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(D){return B[D]})}var Re=/\/+/g;function Ve(E,B){return typeof E=="object"&&E!==null&&E.key!=null?_e(""+E.key):B.toString(36)}function Ye(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(ue,ue):(E.status="pending",E.then(function(B){E.status==="pending"&&(E.status="fulfilled",E.value=B)},function(B){E.status==="pending"&&(E.status="rejected",E.reason=B)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function T(E,B,D,V,me){var Ne=typeof E;(Ne==="undefined"||Ne==="boolean")&&(E=null);var Ie=!1;if(E===null)Ie=!0;else switch(Ne){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(E.$$typeof){case a:case n:Ie=!0;break;case v:return Ie=E._init,T(Ie(E._payload),B,D,V,me)}}if(Ie)return me=me(E),Ie=V===""?"."+Ve(E,0):V,he(me)?(D="",Ie!=null&&(D=Ie.replace(Re,"$&/")+"/"),T(me,B,D,"",function(It){return It})):me!=null&&(fe(me)&&(me=Z(me,D+(me.key==null||E&&E.key===me.key?"":(""+me.key).replace(Re,"$&/")+"/")+Ie)),B.push(me)),1;Ie=0;var et=V===""?".":V+":";if(he(E))for(var Je=0;Je<E.length;Je++)V=E[Je],Ne=et+Ve(V,Je),Ie+=T(V,B,D,Ne,me);else if(Je=k(E),typeof Je=="function")for(E=Je.call(E),Je=0;!(V=E.next()).done;)V=V.value,Ne=et+Ve(V,Je++),Ie+=T(V,B,D,Ne,me);else if(Ne==="object"){if(typeof E.then=="function")return T(Ye(E),B,D,V,me);throw B=String(E),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function q(E,B,D){if(E==null)return E;var V=[],me=0;return T(E,V,"","",function(Ne){return B.call(D,Ne,me++)}),V}function ce(E){if(E._status===-1){var B=E._result;B=B(),B.then(function(D){(E._status===0||E._status===-1)&&(E._status=1,E._result=D)},function(D){(E._status===0||E._status===-1)&&(E._status=2,E._result=D)}),E._status===-1&&(E._status=0,E._result=B)}if(E._status===1)return E._result.default;throw E._result}var ge=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},Se={map:q,forEach:function(E,B,D){q(E,function(){B.apply(this,arguments)},D)},count:function(E){var B=0;return q(E,function(){B++}),B},toArray:function(E){return q(E,function(B){return B})||[]},only:function(E){if(!fe(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Qe.Activity=b,Qe.Children=Se,Qe.Component=Q,Qe.Fragment=r,Qe.Profiler=l,Qe.PureComponent=z,Qe.StrictMode=s,Qe.Suspense=p,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(E){return H.H.useMemoCache(E)}},Qe.cache=function(E){return function(){return E.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(E,B,D){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var V=P({},E.props),me=E.key;if(B!=null)for(Ne in B.key!==void 0&&(me=""+B.key),B)!se.call(B,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&B.ref===void 0||(V[Ne]=B[Ne]);var Ne=arguments.length-2;if(Ne===1)V.children=D;else if(1<Ne){for(var Ie=Array(Ne),et=0;et<Ne;et++)Ie[et]=arguments[et+2];V.children=Ie}return W(E.type,me,V)},Qe.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:c,_context:E},E},Qe.createElement=function(E,B,D){var V,me={},Ne=null;if(B!=null)for(V in B.key!==void 0&&(Ne=""+B.key),B)se.call(B,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(me[V]=B[V]);var Ie=arguments.length-2;if(Ie===1)me.children=D;else if(1<Ie){for(var et=Array(Ie),Je=0;Je<Ie;Je++)et[Je]=arguments[Je+2];me.children=et}if(E&&E.defaultProps)for(V in Ie=E.defaultProps,Ie)me[V]===void 0&&(me[V]=Ie[V]);return W(E,Ne,me)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(E){return{$$typeof:h,render:E}},Qe.isValidElement=fe,Qe.lazy=function(E){return{$$typeof:v,_payload:{_status:-1,_result:E},_init:ce}},Qe.memo=function(E,B){return{$$typeof:y,type:E,compare:B===void 0?null:B}},Qe.startTransition=function(E){var B=H.T,D={};H.T=D;try{var V=E(),me=H.S;me!==null&&me(D,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(ue,ge)}catch(Ne){ge(Ne)}finally{B!==null&&D.types!==null&&(B.types=D.types),H.T=B}},Qe.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Qe.use=function(E){return H.H.use(E)},Qe.useActionState=function(E,B,D){return H.H.useActionState(E,B,D)},Qe.useCallback=function(E,B){return H.H.useCallback(E,B)},Qe.useContext=function(E){return H.H.useContext(E)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(E,B){return H.H.useDeferredValue(E,B)},Qe.useEffect=function(E,B){return H.H.useEffect(E,B)},Qe.useEffectEvent=function(E){return H.H.useEffectEvent(E)},Qe.useId=function(){return H.H.useId()},Qe.useImperativeHandle=function(E,B,D){return H.H.useImperativeHandle(E,B,D)},Qe.useInsertionEffect=function(E,B){return H.H.useInsertionEffect(E,B)},Qe.useLayoutEffect=function(E,B){return H.H.useLayoutEffect(E,B)},Qe.useMemo=function(E,B){return H.H.useMemo(E,B)},Qe.useOptimistic=function(E,B){return H.H.useOptimistic(E,B)},Qe.useReducer=function(E,B,D){return H.H.useReducer(E,B,D)},Qe.useRef=function(E){return H.H.useRef(E)},Qe.useState=function(E){return H.H.useState(E)},Qe.useSyncExternalStore=function(E,B,D){return H.H.useSyncExternalStore(E,B,D)},Qe.useTransition=function(){return H.H.useTransition()},Qe.version="19.2.0",Qe}var Yg;function Th(){return Yg||(Yg=1,sd.exports=aE()),sd.exports}var x=Th();const Aa=Ch(x),rE=ob({__proto__:null,default:Aa},[x]);var od={exports:{}},go={},ld={exports:{}},cd={};var Gg;function iE(){return Gg||(Gg=1,(function(a){function n(T,q){var ce=T.length;T.push(q);e:for(;0<ce;){var ge=ce-1>>>1,Se=T[ge];if(0<l(Se,q))T[ge]=q,T[ce]=Se,ce=ge;else break e}}function r(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var q=T[0],ce=T.pop();if(ce!==q){T[0]=ce;e:for(var ge=0,Se=T.length,E=Se>>>1;ge<E;){var B=2*(ge+1)-1,D=T[B],V=B+1,me=T[V];if(0>l(D,ce))V<Se&&0>l(me,D)?(T[ge]=me,T[V]=ce,ge=V):(T[ge]=D,T[B]=ce,ge=B);else if(V<Se&&0>l(me,ce))T[ge]=me,T[V]=ce,ge=V;else break e}}return q}function l(T,q){var ce=T.sortIndex-q.sortIndex;return ce!==0?ce:T.id-q.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var f=Date,h=f.now();a.unstable_now=function(){return f.now()-h}}var p=[],y=[],v=1,b=null,S=3,k=!1,N=!1,P=!1,I=!1,Q=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function Y(T){for(var q=r(y);q!==null;){if(q.callback===null)s(y);else if(q.startTime<=T)s(y),q.sortIndex=q.expirationTime,n(p,q);else break;q=r(y)}}function he(T){if(P=!1,Y(T),!N)if(r(p)!==null)N=!0,ue||(ue=!0,_e());else{var q=r(y);q!==null&&Ye(he,q.startTime-T)}}var ue=!1,H=-1,se=5,W=-1;function Z(){return I?!0:!(a.unstable_now()-W<se)}function fe(){if(I=!1,ue){var T=a.unstable_now();W=T;var q=!0;try{e:{N=!1,P&&(P=!1,K(H),H=-1),k=!0;var ce=S;try{t:{for(Y(T),b=r(p);b!==null&&!(b.expirationTime>T&&Z());){var ge=b.callback;if(typeof ge=="function"){b.callback=null,S=b.priorityLevel;var Se=ge(b.expirationTime<=T);if(T=a.unstable_now(),typeof Se=="function"){b.callback=Se,Y(T),q=!0;break t}b===r(p)&&s(p),Y(T)}else s(p);b=r(p)}if(b!==null)q=!0;else{var E=r(y);E!==null&&Ye(he,E.startTime-T),q=!1}}break e}finally{b=null,S=ce,k=!1}q=void 0}}finally{q?_e():ue=!1}}}var _e;if(typeof z=="function")_e=function(){z(fe)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Ve=Re.port2;Re.port1.onmessage=fe,_e=function(){Ve.postMessage(null)}}else _e=function(){Q(fe,0)};function Ye(T,q){H=Q(function(){T(a.unstable_now())},q)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(T){T.callback=null},a.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<T?Math.floor(1e3/T):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(T){switch(S){case 1:case 2:case 3:var q=3;break;default:q=S}var ce=S;S=q;try{return T()}finally{S=ce}},a.unstable_requestPaint=function(){I=!0},a.unstable_runWithPriority=function(T,q){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var ce=S;S=T;try{return q()}finally{S=ce}},a.unstable_scheduleCallback=function(T,q,ce){var ge=a.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ge+ce:ge):ce=ge,T){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ce+Se,T={id:v++,callback:q,priorityLevel:T,startTime:ce,expirationTime:Se,sortIndex:-1},ce>ge?(T.sortIndex=ce,n(y,T),r(p)===null&&T===r(y)&&(P?(K(H),H=-1):P=!0,Ye(he,ce-ge))):(T.sortIndex=Se,n(p,T),N||k||(N=!0,ue||(ue=!0,_e()))),T},a.unstable_shouldYield=Z,a.unstable_wrapCallback=function(T){var q=S;return function(){var ce=S;S=q;try{return T.apply(this,arguments)}finally{S=ce}}}})(cd)),cd}var Pg;function sE(){return Pg||(Pg=1,ld.exports=iE()),ld.exports}var ud={exports:{}},Tn={};var Fg;function oE(){if(Fg)return Tn;Fg=1;var a=Th();function n(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:p,containerInfo:y,implementation:v}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Tn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return c(p,y,null,v)},Tn.flushSync=function(p){var y=f.T,v=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=v,s.d.f()}},Tn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Tn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Tn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:k}):v==="script"&&s.d.X(p,{crossOrigin:b,integrity:S,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Tn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=h(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Tn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin);s.d.L(p,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Tn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=h(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Tn.requestFormReset=function(p){s.d.r(p)},Tn.unstable_batchedUpdates=function(p,y){return p(y)},Tn.useFormState=function(p,y,v){return f.H.useFormState(p,y,v)},Tn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Tn.version="19.2.0",Tn}var Zg;function lb(){if(Zg)return ud.exports;Zg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),ud.exports=oE(),ud.exports}var Xg;function lE(){if(Xg)return go;Xg=1;var a=sE(),n=Th(),r=lb();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function y(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,o=t;;){var u=i.return;if(u===null)break;var d=u.alternate;if(d===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===i)return p(u),e;if(d===o)return p(u),t;d=d.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=d;else{for(var g=!1,w=u.child;w;){if(w===i){g=!0,i=u,o=d;break}if(w===o){g=!0,o=u,i=d;break}w=w.sibling}if(!g){for(w=d.child;w;){if(w===i){g=!0,i=d,o=u;break}if(w===o){g=!0,o=d,i=u;break}w=w.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),z=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function _e(e){return e===null||typeof e!="object"?null:(e=fe&&e[fe]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Symbol.for("react.client.reference");function Ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case Q:return"Profiler";case I:return"StrictMode";case he:return"Suspense";case ue:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case z:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case Y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return t=e.displayName||null,t!==null?t:Ve(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return Ve(e(t))}catch{}}return null}var Ye=Array.isArray,T=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},ge=[],Se=-1;function E(e){return{current:e}}function B(e){0>Se||(e.current=ge[Se],ge[Se]=null,Se--)}function D(e,t){Se++,ge[Se]=e.current,e.current=t}var V=E(null),me=E(null),Ne=E(null),Ie=E(null);function et(e,t){switch(D(Ne,t),D(me,e),D(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ug(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ug(t),e=fg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(V),D(V,e)}function Je(){B(V),B(me),B(Ne)}function It(e){e.memoizedState!==null&&D(Ie,e);var t=V.current,i=fg(t,e.type);t!==i&&(D(me,e),D(V,i))}function Zt(e){me.current===e&&(B(V),B(me)),Ie.current===e&&(B(Ie),fo._currentValue=ce)}var $t,Ke;function pt(e){if($t===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);$t=t&&t[1]||"",Ke=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$t+e+Ke}var Ht=!1;function dn(e,t){if(!e||Ht)return"";Ht=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(F){var $=F}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(F){$=F}e.call(ae.prototype)}}else{try{throw Error()}catch(F){$=F}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(F){if(F&&$&&typeof F.stack=="string")return[F.stack,$.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),g=d[0],w=d[1];if(g&&w){var O=g.split(`
`),U=w.split(`
`);for(u=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;if(o===O.length||u===U.length)for(o=O.length-1,u=U.length-1;1<=o&&0<=u&&O[o]!==U[u];)u--;for(;1<=o&&0<=u;o--,u--)if(O[o]!==U[u]){if(o!==1||u!==1)do if(o--,u--,0>u||O[o]!==U[u]){var J=`
`+O[o].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=o&&0<=u);break}}}finally{Ht=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?pt(i):""}function qa(e,t){switch(e.tag){case 26:case 27:case 5:return pt(e.type);case 16:return pt("Lazy");case 13:return e.child!==t&&t!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return dn(e.type,!1);case 11:return dn(e.type.render,!1);case 1:return dn(e.type,!0);case 31:return pt("Activity");default:return""}}function X(e){try{var t="",i=null;do t+=qa(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ie=Object.prototype.hasOwnProperty,ee=a.unstable_scheduleCallback,je=a.unstable_cancelCallback,ve=a.unstable_shouldYield,re=a.unstable_requestPaint,C=a.unstable_now,M=a.unstable_getCurrentPriorityLevel,oe=a.unstable_ImmediatePriority,de=a.unstable_UserBlockingPriority,xe=a.unstable_NormalPriority,Oe=a.unstable_LowPriority,$e=a.unstable_IdlePriority,Ze=a.log,gt=a.unstable_setDisableYieldValue,Be=null,He=null;function De(e){if(typeof Ze=="function"&&gt(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Be,e)}catch{}}var rt=Math.clz32?Math.clz32:Xt,mt=Math.log,Rt=Math.LN2;function Xt(e){return e>>>=0,e===0?32:31-(mt(e)/Rt|0)|0}var A=256,R=262144,le=4194304;function be(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,d=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~d,o!==0?u=be(o):(g&=w,g!==0?u=be(g):i||(i=w&~e,i!==0&&(u=be(i))))):(w=o&~d,w!==0?u=be(w):g!==0?u=be(g):i||(i=o&~e,i!==0&&(u=be(i)))),u===0?0:t!==0&&t!==u&&(t&d)===0&&(d=u&-u,i=t&-t,d>=i||d===32&&(i&4194048)!==0)?t:u}function yt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Gn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var e=le;return le<<=1,(le&62914560)===0&&(le=4194304),e}function Mt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ot(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kt(e,t,i,o,u,d){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,O=e.expirationTimes,U=e.hiddenUpdates;for(i=g&~i;0<i;){var J=31-rt(i),ae=1<<J;w[J]=0,O[J]=-1;var $=U[J];if($!==null)for(U[J]=null,J=0;J<$.length;J++){var F=$[J];F!==null&&(F.lane&=-536870913)}i&=~ae}o!==0&&Cs(e,o,0),d!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=d&~(g&~t))}function Cs(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-rt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Kt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-rt(i),u=1<<o;u&t|e[o]&t&&(e[o]|=t),i&=~u}}function ta(e,t){var i=t&-t;return i=(i&42)!==0?1:ga(i),(i&(e.suspendedLanes|t))!==0?0:i}function ga(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function hn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ts(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:Rg(e.type))}function Os(e,t){var i=q.p;try{return q.p=e,t()}finally{q.p=i}}var va=Math.random().toString(36).slice(2),Wt="__reactFiber$"+va,gn="__reactProps$"+va,Ya="__reactContainer$"+va,Ho="__reactEvents$"+va,Kc="__reactListeners$"+va,Vo="__reactHandles$"+va,ba="__reactResources$"+va,wa="__reactMarker$"+va;function Sa(e){delete e[Wt],delete e[gn],delete e[Ho],delete e[Kc],delete e[Vo]}function na(e){var t=e[Wt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ya]||i[Wt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=vg(e);e!==null;){if(i=e[Wt])return i;e=vg(e)}return t}e=i,i=e.parentNode}return null}function hr(e){if(e=e[Wt]||e[Ya]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ga(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function G(e){var t=e[ba];return t||(t=e[ba]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ne(e){e[wa]=!0}var pe=new Set,Ee={};function ke(e,t){Xe(e,t),Xe(e+"Capture",t)}function Xe(e,t){for(Ee[e]=t,e=0;e<t.length;e++)pe.add(t[e])}var Vt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),en={},pn={};function cn(e){return ie.call(pn,e)?!0:ie.call(en,e)?!1:Vt.test(e)?pn[e]=!0:(en[e]=!0,!1)}function un(e,t,i){if(cn(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function kn(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Cn(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function Rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yo(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,d=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){i=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wi(e){if(!e._valueTracker){var t=qo(e)?"checked":"value";e._valueTracker=Yo(e,t,""+e[t])}}function Qc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=qo(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Go(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xw=/[\n"\\]/g;function aa(e){return e.replace(Xw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Jc(e,t,i,o,u,d,g,w){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Rn(t)):e.value!==""+Rn(t)&&(e.value=""+Rn(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Wc(e,g,Rn(t)):i!=null?Wc(e,g,Rn(i)):o!=null&&e.removeAttribute("value"),u==null&&d!=null&&(e.defaultChecked=!!d),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Rn(w):e.removeAttribute("name")}function rp(e,t,i,o,u,d,g,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){wi(e);return}i=i!=null?""+Rn(i):"",t=t!=null?""+Rn(t):i,w||t===e.value||(e.value=t),e.defaultValue=t}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),wi(e)}function Wc(e,t,i){t==="number"&&Go(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Si(e,t,i,o){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Rn(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function ip(e,t,i){if(t!=null&&(t=""+Rn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Rn(i):""}function sp(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(s(92));if(Ye(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=Rn(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),wi(e)}function xi(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Kw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function op(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||Kw.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function lp(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in t)o=t[u],t.hasOwnProperty(u)&&i[u]!==o&&op(e,u,o)}else for(var d in t)t.hasOwnProperty(d)&&op(e,d,t[d])}function eu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Po(e){return Jw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pa(){}var tu=null;function nu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ei=null,ki=null;function cp(e){var t=hr(e);if(t&&(e=t.stateNode)){var i=e[gn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Jc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+aa(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var u=o[gn]||null;if(!u)throw Error(s(90));Jc(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&Qc(o)}break e;case"textarea":ip(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Si(e,!!i.multiple,t,!1)}}}var au=!1;function up(e,t,i){if(au)return e(t,i);au=!0;try{var o=e(t);return o}finally{if(au=!1,(Ei!==null||ki!==null)&&(Ml(),Ei&&(t=Ei,e=ki,ki=Ei=null,cp(t),e)))for(t=0;t<e.length;t++)cp(e[t])}}function Ns(e,t){var i=e.stateNode;if(i===null)return null;var o=i[gn]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ru=!1;if(Fa)try{var js={};Object.defineProperty(js,"passive",{get:function(){ru=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{ru=!1}var pr=null,iu=null,Fo=null;function fp(){if(Fo)return Fo;var e,t=iu,i=t.length,o,u="value"in pr?pr.value:pr.textContent,d=u.length;for(e=0;e<i&&t[e]===u[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===u[d-o];o++);return Fo=u.slice(e,1<o?1-o:void 0)}function Zo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xo(){return!0}function dp(){return!1}function zn(e){function t(i,o,u,d,g){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Xo:dp,this.isPropagationStopped=dp,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=zn(Xr),As=b({},Xr,{view:0,detail:0}),Ww=zn(As),su,ou,_s,Qo=b({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_s&&(_s&&e.type==="mousemove"?(su=e.screenX-_s.screenX,ou=e.screenY-_s.screenY):ou=su=0,_s=e),su)},movementY:function(e){return"movementY"in e?e.movementY:ou}}),hp=zn(Qo),eS=b({},Qo,{dataTransfer:0}),tS=zn(eS),nS=b({},As,{relatedTarget:0}),lu=zn(nS),aS=b({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),rS=zn(aS),iS=b({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sS=zn(iS),oS=b({},Xr,{data:0}),pp=zn(oS),lS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uS[e])?!!t[e]:!1}function cu(){return fS}var dS=b({},As,{key:function(e){if(e.key){var t=lS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(e){return e.type==="keypress"?Zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hS=zn(dS),pS=b({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=zn(pS),mS=b({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),yS=zn(mS),gS=b({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vS=zn(gS),bS=b({},Qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wS=zn(bS),SS=b({},Xr,{newState:0,oldState:0}),xS=zn(SS),ES=[9,13,27,32],uu=Fa&&"CompositionEvent"in window,Ds=null;Fa&&"documentMode"in document&&(Ds=document.documentMode);var kS=Fa&&"TextEvent"in window&&!Ds,yp=Fa&&(!uu||Ds&&8<Ds&&11>=Ds),gp=" ",vp=!1;function bp(e,t){switch(e){case"keyup":return ES.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ci=!1;function CS(e,t){switch(e){case"compositionend":return wp(t);case"keypress":return t.which!==32?null:(vp=!0,gp);case"textInput":return e=t.data,e===gp&&vp?null:e;default:return null}}function TS(e,t){if(Ci)return e==="compositionend"||!uu&&bp(e,t)?(e=fp(),Fo=iu=pr=null,Ci=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yp&&t.locale!=="ko"?null:t.data;default:return null}}var OS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OS[e.type]:t==="textarea"}function xp(e,t,i,o){Ei?ki?ki.push(o):ki=[o]:Ei=o,t=$l(t,"onChange"),0<t.length&&(i=new Ko("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Ms=null,Rs=null;function NS(e){rg(e,0)}function Jo(e){var t=Ga(e);if(Qc(t))return e}function Ep(e,t){if(e==="change")return t}var kp=!1;if(Fa){var fu;if(Fa){var du="oninput"in document;if(!du){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),du=typeof Cp.oninput=="function"}fu=du}else fu=!1;kp=fu&&(!document.documentMode||9<document.documentMode)}function Tp(){Ms&&(Ms.detachEvent("onpropertychange",Op),Rs=Ms=null)}function Op(e){if(e.propertyName==="value"&&Jo(Rs)){var t=[];xp(t,Rs,e,nu(e)),up(NS,t)}}function jS(e,t,i){e==="focusin"?(Tp(),Ms=t,Rs=i,Ms.attachEvent("onpropertychange",Op)):e==="focusout"&&Tp()}function AS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(Rs)}function _S(e,t){if(e==="click")return Jo(t)}function DS(e,t){if(e==="input"||e==="change")return Jo(t)}function MS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pn=typeof Object.is=="function"?Object.is:MS;function zs(e,t){if(Pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!ie.call(t,u)||!Pn(e[u],t[u]))return!1}return!0}function Np(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jp(e,t){var i=Np(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Np(i)}}function Ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _p(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Go(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Go(e.document)}return t}function hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var RS=Fa&&"documentMode"in document&&11>=document.documentMode,Ti=null,pu=null,Ls=null,mu=!1;function Dp(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;mu||Ti==null||Ti!==Go(o)||(o=Ti,"selectionStart"in o&&hu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ls&&zs(Ls,o)||(Ls=o,o=$l(pu,"onSelect"),0<o.length&&(t=new Ko("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=Ti)))}function Kr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Oi={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},yu={},Mp={};Fa&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function Qr(e){if(yu[e])return yu[e];if(!Oi[e])return e;var t=Oi[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Mp)return yu[e]=t[i];return e}var Rp=Qr("animationend"),zp=Qr("animationiteration"),Lp=Qr("animationstart"),zS=Qr("transitionrun"),LS=Qr("transitionstart"),BS=Qr("transitioncancel"),Bp=Qr("transitionend"),Up=new Map,gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gu.push("scrollEnd");function xa(e,t){Up.set(e,t),ke(t,[e])}var Wo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ra=[],Ni=0,vu=0;function el(){for(var e=Ni,t=vu=Ni=0;t<e;){var i=ra[t];ra[t++]=null;var o=ra[t];ra[t++]=null;var u=ra[t];ra[t++]=null;var d=ra[t];if(ra[t++]=null,o!==null&&u!==null){var g=o.pending;g===null?u.next=u:(u.next=g.next,g.next=u),o.pending=u}d!==0&&Ip(i,u,d)}}function tl(e,t,i,o){ra[Ni++]=e,ra[Ni++]=t,ra[Ni++]=i,ra[Ni++]=o,vu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function bu(e,t,i,o){return tl(e,t,i,o),nl(e)}function Jr(e,t){return tl(e,null,null,t),nl(e)}function Ip(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,d=e.return;d!==null;)d.childLanes|=i,o=d.alternate,o!==null&&(o.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(u=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,u&&t!==null&&(u=31-rt(i),e=d.hiddenUpdates,o=e[u],o===null?e[u]=[t]:o.push(t),t.lane=i|536870912),d):null}function nl(e){if(50<ro)throw ro=0,jf=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ji={};function US(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(e,t,i,o){return new US(e,t,i,o)}function wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Za(e,t){var i=e.alternate;return i===null?(i=Fn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function $p(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function al(e,t,i,o,u,d){var g=0;if(o=e,typeof e=="function")wu(e)&&(g=1);else if(typeof e=="string")g=qx(e,i,V.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case W:return e=Fn(31,i,t,u),e.elementType=W,e.lanes=d,e;case P:return Wr(i.children,u,d,t);case I:g=8,u|=24;break;case Q:return e=Fn(12,i,t,u|2),e.elementType=Q,e.lanes=d,e;case he:return e=Fn(13,i,t,u),e.elementType=he,e.lanes=d,e;case ue:return e=Fn(19,i,t,u),e.elementType=ue,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:g=10;break e;case K:g=9;break e;case Y:g=11;break e;case H:g=14;break e;case se:g=16,o=null;break e}g=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return t=Fn(g,i,t,u),t.elementType=e,t.type=o,t.lanes=d,t}function Wr(e,t,i,o){return e=Fn(7,e,o,t),e.lanes=i,e}function Su(e,t,i){return e=Fn(6,e,null,t),e.lanes=i,e}function Hp(e){var t=Fn(18,null,null,0);return t.stateNode=e,t}function xu(e,t,i){return t=Fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vp=new WeakMap;function ia(e,t){if(typeof e=="object"&&e!==null){var i=Vp.get(e);return i!==void 0?i:(t={value:e,source:t,stack:X(t)},Vp.set(e,t),t)}return{value:e,source:t,stack:X(t)}}var Ai=[],_i=0,rl=null,Bs=0,sa=[],oa=0,mr=null,Da=1,Ma="";function Xa(e,t){Ai[_i++]=Bs,Ai[_i++]=rl,rl=e,Bs=t}function qp(e,t,i){sa[oa++]=Da,sa[oa++]=Ma,sa[oa++]=mr,mr=e;var o=Da;e=Ma;var u=32-rt(o)-1;o&=~(1<<u),i+=1;var d=32-rt(t)+u;if(30<d){var g=u-u%5;d=(o&(1<<g)-1).toString(32),o>>=g,u-=g,Da=1<<32-rt(t)+u|i<<u|o,Ma=d+e}else Da=1<<d|i<<u|o,Ma=e}function Eu(e){e.return!==null&&(Xa(e,1),qp(e,1,0))}function ku(e){for(;e===rl;)rl=Ai[--_i],Ai[_i]=null,Bs=Ai[--_i],Ai[_i]=null;for(;e===mr;)mr=sa[--oa],sa[oa]=null,Ma=sa[--oa],sa[oa]=null,Da=sa[--oa],sa[oa]=null}function Yp(e,t){sa[oa++]=Da,sa[oa++]=Ma,sa[oa++]=mr,Da=t.id,Ma=t.overflow,mr=e}var vn=null,zt=null,ft=!1,yr=null,la=!1,Cu=Error(s(519));function gr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Us(ia(t,e)),Cu}function Gp(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[Wt]=e,t[gn]=o,i){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(i=0;i<so.length;i++)st(so[i],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),rp(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),sp(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||lg(t.textContent,i)?(o.popover!=null&&(st("beforetoggle",t),st("toggle",t)),o.onScroll!=null&&st("scroll",t),o.onScrollEnd!=null&&st("scrollend",t),o.onClick!=null&&(t.onclick=Pa),t=!0):t=!1,t||gr(e,!0)}function Pp(e){for(vn=e.return;vn;)switch(vn.tag){case 5:case 31:case 13:la=!1;return;case 27:case 3:la=!0;return;default:vn=vn.return}}function Di(e){if(e!==vn)return!1;if(!ft)return Pp(e),ft=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Yf(e.type,e.memoizedProps)),i=!i),i&&zt&&gr(e),Pp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));zt=gg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));zt=gg(e)}else t===27?(t=zt,_r(e.type)?(e=Xf,Xf=null,zt=e):zt=t):zt=vn?ua(e.stateNode.nextSibling):null;return!0}function ei(){zt=vn=null,ft=!1}function Tu(){var e=yr;return e!==null&&(In===null?In=e:In.push.apply(In,e),yr=null),e}function Us(e){yr===null?yr=[e]:yr.push(e)}var Ou=E(null),ti=null,Ka=null;function vr(e,t,i){D(Ou,t._currentValue),t._currentValue=i}function Qa(e){e._currentValue=Ou.current,B(Ou)}function Nu(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function ju(e,t,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var d=u.dependencies;if(d!==null){var g=u.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=u;for(var O=0;O<t.length;O++)if(w.context===t[O]){d.lanes|=i,w=d.alternate,w!==null&&(w.lanes|=i),Nu(d.return,i,e),o||(g=null);break e}d=w.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(s(341));g.lanes|=i,d=g.alternate,d!==null&&(d.lanes|=i),Nu(g,i,e),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function Mi(e,t,i,o){e=null;for(var u=t,d=!1;u!==null;){if(!d){if((u.flags&524288)!==0)d=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(s(387));if(g=g.memoizedProps,g!==null){var w=u.type;Pn(u.pendingProps.value,g.value)||(e!==null?e.push(w):e=[w])}}else if(u===Ie.current){if(g=u.alternate,g===null)throw Error(s(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(fo):e=[fo])}u=u.return}e!==null&&ju(t,e,i,o),t.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!Pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ni(e){ti=e,Ka=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bn(e){return Fp(ti,e)}function sl(e,t){return ti===null&&ni(e),Fp(e,t)}function Fp(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ka===null){if(e===null)throw Error(s(308));Ka=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ka=Ka.next=t;return i}var IS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},$S=a.unstable_scheduleCallback,HS=a.unstable_NormalPriority,tn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Au(){return{controller:new IS,data:new Map,refCount:0}}function Is(e){e.refCount--,e.refCount===0&&$S(HS,function(){e.controller.abort()})}var $s=null,_u=0,Ri=0,zi=null;function VS(e,t){if($s===null){var i=$s=[];_u=0,Ri=zf(),zi={status:"pending",value:void 0,then:function(o){i.push(o)}}}return _u++,t.then(Zp,Zp),t}function Zp(){if(--_u===0&&$s!==null){zi!==null&&(zi.status="fulfilled");var e=$s;$s=null,Ri=0,zi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function qS(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var u=0;u<i.length;u++)(0,i[u])(t)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Xp=T.S;T.S=function(e,t){Dy=C(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&VS(e,t),Xp!==null&&Xp(e,t)};var ai=E(null);function Du(){var e=ai.current;return e!==null?e:_t.pooledCache}function ol(e,t){t===null?D(ai,ai.current):D(ai,t.pool)}function Kp(){var e=Du();return e===null?null:{parent:tn._currentValue,pool:e}}var Li=Error(s(460)),Mu=Error(s(474)),ll=Error(s(542)),cl={then:function(){}};function Qp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jp(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Pa,Pa),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,em(e),e;default:if(typeof t.status=="string")t.then(Pa,Pa);else{if(e=_t,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=o}},function(o){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,em(e),e}throw ii=t,Li}}function ri(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ii=i,Li):i}}var ii=null;function Wp(){if(ii===null)throw Error(s(459));var e=ii;return ii=null,e}function em(e){if(e===Li||e===ll)throw Error(s(483))}var Bi=null,Hs=0;function ul(e){var t=Hs;return Hs+=1,Bi===null&&(Bi=[]),Jp(Bi,e,t)}function Vs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function fl(e,t){throw t.$$typeof===S?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function tm(e){function t(_,j){if(e){var L=_.deletions;L===null?(_.deletions=[j],_.flags|=16):L.push(j)}}function i(_,j){if(!e)return null;for(;j!==null;)t(_,j),j=j.sibling;return null}function o(_){for(var j=new Map;_!==null;)_.key!==null?j.set(_.key,_):j.set(_.index,_),_=_.sibling;return j}function u(_,j){return _=Za(_,j),_.index=0,_.sibling=null,_}function d(_,j,L){return _.index=L,e?(L=_.alternate,L!==null?(L=L.index,L<j?(_.flags|=67108866,j):L):(_.flags|=67108866,j)):(_.flags|=1048576,j)}function g(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function w(_,j,L,te){return j===null||j.tag!==6?(j=Su(L,_.mode,te),j.return=_,j):(j=u(j,L),j.return=_,j)}function O(_,j,L,te){var Ue=L.type;return Ue===P?J(_,j,L.props.children,te,L.key):j!==null&&(j.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===se&&ri(Ue)===j.type)?(j=u(j,L.props),Vs(j,L),j.return=_,j):(j=al(L.type,L.key,L.props,null,_.mode,te),Vs(j,L),j.return=_,j)}function U(_,j,L,te){return j===null||j.tag!==4||j.stateNode.containerInfo!==L.containerInfo||j.stateNode.implementation!==L.implementation?(j=xu(L,_.mode,te),j.return=_,j):(j=u(j,L.children||[]),j.return=_,j)}function J(_,j,L,te,Ue){return j===null||j.tag!==7?(j=Wr(L,_.mode,te,Ue),j.return=_,j):(j=u(j,L),j.return=_,j)}function ae(_,j,L){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Su(""+j,_.mode,L),j.return=_,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case k:return L=al(j.type,j.key,j.props,null,_.mode,L),Vs(L,j),L.return=_,L;case N:return j=xu(j,_.mode,L),j.return=_,j;case se:return j=ri(j),ae(_,j,L)}if(Ye(j)||_e(j))return j=Wr(j,_.mode,L,null),j.return=_,j;if(typeof j.then=="function")return ae(_,ul(j),L);if(j.$$typeof===z)return ae(_,sl(_,j),L);fl(_,j)}return null}function $(_,j,L,te){var Ue=j!==null?j.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return Ue!==null?null:w(_,j,""+L,te);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case k:return L.key===Ue?O(_,j,L,te):null;case N:return L.key===Ue?U(_,j,L,te):null;case se:return L=ri(L),$(_,j,L,te)}if(Ye(L)||_e(L))return Ue!==null?null:J(_,j,L,te,null);if(typeof L.then=="function")return $(_,j,ul(L),te);if(L.$$typeof===z)return $(_,j,sl(_,L),te);fl(_,L)}return null}function F(_,j,L,te,Ue){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return _=_.get(L)||null,w(j,_,""+te,Ue);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case k:return _=_.get(te.key===null?L:te.key)||null,O(j,_,te,Ue);case N:return _=_.get(te.key===null?L:te.key)||null,U(j,_,te,Ue);case se:return te=ri(te),F(_,j,L,te,Ue)}if(Ye(te)||_e(te))return _=_.get(L)||null,J(j,_,te,Ue,null);if(typeof te.then=="function")return F(_,j,L,ul(te),Ue);if(te.$$typeof===z)return F(_,j,L,sl(j,te),Ue);fl(j,te)}return null}function Me(_,j,L,te){for(var Ue=null,vt=null,ze=j,tt=j=0,lt=null;ze!==null&&tt<L.length;tt++){ze.index>tt?(lt=ze,ze=null):lt=ze.sibling;var bt=$(_,ze,L[tt],te);if(bt===null){ze===null&&(ze=lt);break}e&&ze&&bt.alternate===null&&t(_,ze),j=d(bt,j,tt),vt===null?Ue=bt:vt.sibling=bt,vt=bt,ze=lt}if(tt===L.length)return i(_,ze),ft&&Xa(_,tt),Ue;if(ze===null){for(;tt<L.length;tt++)ze=ae(_,L[tt],te),ze!==null&&(j=d(ze,j,tt),vt===null?Ue=ze:vt.sibling=ze,vt=ze);return ft&&Xa(_,tt),Ue}for(ze=o(ze);tt<L.length;tt++)lt=F(ze,_,tt,L[tt],te),lt!==null&&(e&&lt.alternate!==null&&ze.delete(lt.key===null?tt:lt.key),j=d(lt,j,tt),vt===null?Ue=lt:vt.sibling=lt,vt=lt);return e&&ze.forEach(function(Lr){return t(_,Lr)}),ft&&Xa(_,tt),Ue}function qe(_,j,L,te){if(L==null)throw Error(s(151));for(var Ue=null,vt=null,ze=j,tt=j=0,lt=null,bt=L.next();ze!==null&&!bt.done;tt++,bt=L.next()){ze.index>tt?(lt=ze,ze=null):lt=ze.sibling;var Lr=$(_,ze,bt.value,te);if(Lr===null){ze===null&&(ze=lt);break}e&&ze&&Lr.alternate===null&&t(_,ze),j=d(Lr,j,tt),vt===null?Ue=Lr:vt.sibling=Lr,vt=Lr,ze=lt}if(bt.done)return i(_,ze),ft&&Xa(_,tt),Ue;if(ze===null){for(;!bt.done;tt++,bt=L.next())bt=ae(_,bt.value,te),bt!==null&&(j=d(bt,j,tt),vt===null?Ue=bt:vt.sibling=bt,vt=bt);return ft&&Xa(_,tt),Ue}for(ze=o(ze);!bt.done;tt++,bt=L.next())bt=F(ze,_,tt,bt.value,te),bt!==null&&(e&&bt.alternate!==null&&ze.delete(bt.key===null?tt:bt.key),j=d(bt,j,tt),vt===null?Ue=bt:vt.sibling=bt,vt=bt);return e&&ze.forEach(function(eE){return t(_,eE)}),ft&&Xa(_,tt),Ue}function At(_,j,L,te){if(typeof L=="object"&&L!==null&&L.type===P&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case k:e:{for(var Ue=L.key;j!==null;){if(j.key===Ue){if(Ue=L.type,Ue===P){if(j.tag===7){i(_,j.sibling),te=u(j,L.props.children),te.return=_,_=te;break e}}else if(j.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===se&&ri(Ue)===j.type){i(_,j.sibling),te=u(j,L.props),Vs(te,L),te.return=_,_=te;break e}i(_,j);break}else t(_,j);j=j.sibling}L.type===P?(te=Wr(L.props.children,_.mode,te,L.key),te.return=_,_=te):(te=al(L.type,L.key,L.props,null,_.mode,te),Vs(te,L),te.return=_,_=te)}return g(_);case N:e:{for(Ue=L.key;j!==null;){if(j.key===Ue)if(j.tag===4&&j.stateNode.containerInfo===L.containerInfo&&j.stateNode.implementation===L.implementation){i(_,j.sibling),te=u(j,L.children||[]),te.return=_,_=te;break e}else{i(_,j);break}else t(_,j);j=j.sibling}te=xu(L,_.mode,te),te.return=_,_=te}return g(_);case se:return L=ri(L),At(_,j,L,te)}if(Ye(L))return Me(_,j,L,te);if(_e(L)){if(Ue=_e(L),typeof Ue!="function")throw Error(s(150));return L=Ue.call(L),qe(_,j,L,te)}if(typeof L.then=="function")return At(_,j,ul(L),te);if(L.$$typeof===z)return At(_,j,sl(_,L),te);fl(_,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,j!==null&&j.tag===6?(i(_,j.sibling),te=u(j,L),te.return=_,_=te):(i(_,j),te=Su(L,_.mode,te),te.return=_,_=te),g(_)):i(_,j)}return function(_,j,L,te){try{Hs=0;var Ue=At(_,j,L,te);return Bi=null,Ue}catch(ze){if(ze===Li||ze===ll)throw ze;var vt=Fn(29,ze,null,_.mode);return vt.lanes=te,vt.return=_,vt}finally{}}}var si=tm(!0),nm=tm(!1),br=!1;function Ru(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(wt&2)!==0){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,t=nl(e),Ip(e,null,i),t}return tl(e,o,t,i),nl(e)}function qs(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Kt(e,i)}}function Lu(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?u=d=g:d=d.next=g,i=i.next}while(i!==null);d===null?u=d=t:d=d.next=t}else u=d=t;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Bu=!1;function Ys(){if(Bu){var e=zi;if(e!==null)throw e}}function Gs(e,t,i,o){Bu=!1;var u=e.updateQueue;br=!1;var d=u.firstBaseUpdate,g=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var O=w,U=O.next;O.next=null,g===null?d=U:g.next=U,g=O;var J=e.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==g&&(w===null?J.firstBaseUpdate=U:w.next=U,J.lastBaseUpdate=O))}if(d!==null){var ae=u.baseState;g=0,J=U=O=null,w=d;do{var $=w.lane&-536870913,F=$!==w.lane;if(F?(ot&$)===$:(o&$)===$){$!==0&&$===Ri&&(Bu=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Me=e,qe=w;$=t;var At=i;switch(qe.tag){case 1:if(Me=qe.payload,typeof Me=="function"){ae=Me.call(At,ae,$);break e}ae=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=qe.payload,$=typeof Me=="function"?Me.call(At,ae,$):Me,$==null)break e;ae=b({},ae,$);break e;case 2:br=!0}}$=w.callback,$!==null&&(e.flags|=64,F&&(e.flags|=8192),F=u.callbacks,F===null?u.callbacks=[$]:F.push($))}else F={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?(U=J=F,O=ae):J=J.next=F,g|=$;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;F=w,w=F.next,F.next=null,u.lastBaseUpdate=F,u.shared.pending=null}}while(!0);J===null&&(O=ae),u.baseState=O,u.firstBaseUpdate=U,u.lastBaseUpdate=J,d===null&&(u.shared.lanes=0),Tr|=g,e.lanes=g,e.memoizedState=ae}}function am(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function rm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)am(i[e],t)}var Ui=E(null),dl=E(0);function im(e,t){e=sr,D(dl,e),D(Ui,t),sr=e|t.baseLanes}function Uu(){D(dl,sr),D(Ui,Ui.current)}function Iu(){sr=dl.current,B(Ui),B(dl)}var Zn=E(null),ca=null;function xr(e){var t=e.alternate;D(Qt,Qt.current&1),D(Zn,e),ca===null&&(t===null||Ui.current!==null||t.memoizedState!==null)&&(ca=e)}function $u(e){D(Qt,Qt.current),D(Zn,e),ca===null&&(ca=e)}function sm(e){e.tag===22?(D(Qt,Qt.current),D(Zn,e),ca===null&&(ca=e)):Er()}function Er(){D(Qt,Qt.current),D(Zn,Zn.current)}function Xn(e){B(Zn),ca===e&&(ca=null),B(Qt)}var Qt=E(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Ff(i)||Zf(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ja=0,We=null,Nt=null,nn=null,pl=!1,Ii=!1,oi=!1,ml=0,Ps=0,$i=null,YS=0;function Pt(){throw Error(s(321))}function Hu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Pn(e[i],t[i]))return!1;return!0}function Vu(e,t,i,o,u,d){return Ja=d,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?qm:af,oi=!1,d=i(o,u),oi=!1,Ii&&(d=lm(t,i,o,u)),om(e),d}function om(e){T.H=Xs;var t=Nt!==null&&Nt.next!==null;if(Ja=0,nn=Nt=We=null,pl=!1,Ps=0,$i=null,t)throw Error(s(300));e===null||an||(e=e.dependencies,e!==null&&il(e)&&(an=!0))}function lm(e,t,i,o){We=e;var u=0;do{if(Ii&&($i=null),Ps=0,Ii=!1,25<=u)throw Error(s(301));if(u+=1,nn=Nt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}T.H=Ym,d=t(i,o)}while(Ii);return d}function GS(){var e=T.H,t=e.useState()[0];return t=typeof t.then=="function"?Fs(t):t,e=e.useState()[0],(Nt!==null?Nt.memoizedState:null)!==e&&(We.flags|=1024),t}function qu(){var e=ml!==0;return ml=0,e}function Yu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Gu(e){if(pl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pl=!1}Ja=0,nn=Nt=We=null,Ii=!1,Ps=ml=0,$i=null}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?We.memoizedState=nn=e:nn=nn.next=e,nn}function Jt(){if(Nt===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var t=nn===null?We.memoizedState:nn.next;if(t!==null)nn=t,Nt=e;else{if(e===null)throw We.alternate===null?Error(s(467)):Error(s(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},nn===null?We.memoizedState=nn=e:nn=nn.next=e}return nn}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fs(e){var t=Ps;return Ps+=1,$i===null&&($i=[]),e=Jp($i,e,t),t=We,(nn===null?t.memoizedState:nn.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?qm:af),e}function gl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fs(e);if(e.$$typeof===z)return bn(e)}throw Error(s(438,String(e)))}function Pu(e){var t=null,i=We.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=We.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=yl(),We.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=Z;return t.index++,i}function Wa(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=Jt();return Fu(t,Nt,e)}function Fu(e,t,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,d=o.pending;if(d!==null){if(u!==null){var g=u.next;u.next=d.next,d.next=g}t.baseQueue=u=d,o.pending=null}if(d=e.baseState,u===null)e.memoizedState=d;else{t=u.next;var w=g=null,O=null,U=t,J=!1;do{var ae=U.lane&-536870913;if(ae!==U.lane?(ot&ae)===ae:(Ja&ae)===ae){var $=U.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),ae===Ri&&(J=!0);else if((Ja&$)===$){U=U.next,$===Ri&&(J=!0);continue}else ae={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},O===null?(w=O=ae,g=d):O=O.next=ae,We.lanes|=$,Tr|=$;ae=U.action,oi&&i(d,ae),d=U.hasEagerState?U.eagerState:i(d,ae)}else $={lane:ae,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},O===null?(w=O=$,g=d):O=O.next=$,We.lanes|=ae,Tr|=ae;U=U.next}while(U!==null&&U!==t);if(O===null?g=d:O.next=w,!Pn(d,e.memoizedState)&&(an=!0,J&&(i=zi,i!==null)))throw i;e.memoizedState=d,e.baseState=g,e.baseQueue=O,o.lastRenderedState=d}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Zu(e){var t=Jt(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,d=t.memoizedState;if(u!==null){i.pending=null;var g=u=u.next;do d=e(d,g.action),g=g.next;while(g!==u);Pn(d,t.memoizedState)||(an=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,o]}function cm(e,t,i){var o=We,u=Jt(),d=ft;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=t();var g=!Pn((Nt||u).memoizedState,i);if(g&&(u.memoizedState=i,an=!0),u=u.queue,Qu(dm.bind(null,o,u,e),[e]),u.getSnapshot!==t||g||nn!==null&&nn.memoizedState.tag&1){if(o.flags|=2048,Hi(9,{destroy:void 0},fm.bind(null,o,u,i,t),null),_t===null)throw Error(s(349));d||(Ja&127)!==0||um(o,t,i)}return i}function um(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=We.updateQueue,t===null?(t=yl(),We.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function fm(e,t,i,o){t.value=i,t.getSnapshot=o,hm(t)&&pm(e)}function dm(e,t,i){return i(function(){hm(t)&&pm(e)})}function hm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Pn(e,i)}catch{return!0}}function pm(e){var t=Jr(e,2);t!==null&&$n(t,e,2)}function Xu(e){var t=Dn();if(typeof e=="function"){var i=e;if(e=i(),oi){De(!0);try{i()}finally{De(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:e},t}function mm(e,t,i,o){return e.baseState=i,Fu(e,Nt,typeof o=="function"?o:Wa)}function PS(e,t,i,o,u){if(Sl(e))throw Error(s(485));if(e=t.action,e!==null){var d={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){d.listeners.push(g)}};T.T!==null?i(!0):d.isTransition=!1,o(d),i=t.pending,i===null?(d.next=t.pending=d,ym(t,d)):(d.next=i.next,t.pending=i.next=d)}}function ym(e,t){var i=t.action,o=t.payload,u=e.state;if(t.isTransition){var d=T.T,g={};T.T=g;try{var w=i(u,o),O=T.S;O!==null&&O(g,w),gm(e,t,w)}catch(U){Ku(e,t,U)}finally{d!==null&&g.types!==null&&(d.types=g.types),T.T=d}}else try{d=i(u,o),gm(e,t,d)}catch(U){Ku(e,t,U)}}function gm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){vm(e,t,o)},function(o){return Ku(e,t,o)}):vm(e,t,i)}function vm(e,t,i){t.status="fulfilled",t.value=i,bm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,ym(e,i)))}function Ku(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,bm(t),t=t.next;while(t!==o)}e.action=null}function bm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function wm(e,t){return t}function Sm(e,t){if(ft){var i=_t.formState;if(i!==null){e:{var o=We;if(ft){if(zt){t:{for(var u=zt,d=la;u.nodeType!==8;){if(!d){u=null;break t}if(u=ua(u.nextSibling),u===null){u=null;break t}}d=u.data,u=d==="F!"||d==="F"?u:null}if(u){zt=ua(u.nextSibling),o=u.data==="F!";break e}}gr(o)}o=!1}o&&(t=i[0])}}return i=Dn(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wm,lastRenderedState:t},i.queue=o,i=$m.bind(null,We,o),o.dispatch=i,o=Xu(!1),d=nf.bind(null,We,!1,o.queue),o=Dn(),u={state:t,dispatch:null,action:e,pending:null},o.queue=u,i=PS.bind(null,We,u,d,i),u.dispatch=i,o.memoizedState=e,[t,i,!1]}function xm(e){var t=Jt();return Em(t,Nt,e)}function Em(e,t,i){if(t=Fu(e,t,wm)[0],e=vl(Wa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Fs(t)}catch(g){throw g===Li?ll:g}else o=t;t=Jt();var u=t.queue,d=u.dispatch;return i!==t.memoizedState&&(We.flags|=2048,Hi(9,{destroy:void 0},FS.bind(null,u,i),null)),[o,d,e]}function FS(e,t){e.action=t}function km(e){var t=Jt(),i=Nt;if(i!==null)return Em(t,i,e);Jt(),t=t.memoizedState,i=Jt();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function Hi(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=We.updateQueue,t===null&&(t=yl(),We.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function Cm(){return Jt().memoizedState}function bl(e,t,i,o){var u=Dn();We.flags|=e,u.memoizedState=Hi(1|t,{destroy:void 0},i,o===void 0?null:o)}function wl(e,t,i,o){var u=Jt();o=o===void 0?null:o;var d=u.memoizedState.inst;Nt!==null&&o!==null&&Hu(o,Nt.memoizedState.deps)?u.memoizedState=Hi(t,d,i,o):(We.flags|=e,u.memoizedState=Hi(1|t,d,i,o))}function Tm(e,t){bl(8390656,8,e,t)}function Qu(e,t){wl(2048,8,e,t)}function ZS(e){We.flags|=4;var t=We.updateQueue;if(t===null)t=yl(),We.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Om(e){var t=Jt().memoizedState;return ZS({ref:t,nextImpl:e}),function(){if((wt&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Nm(e,t){return wl(4,2,e,t)}function jm(e,t){return wl(4,4,e,t)}function Am(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _m(e,t,i){i=i!=null?i.concat([e]):null,wl(4,4,Am.bind(null,t,e),i)}function Ju(){}function Dm(e,t){var i=Jt();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&Hu(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Mm(e,t){var i=Jt();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&Hu(t,o[1]))return o[0];if(o=e(),oi){De(!0);try{e()}finally{De(!1)}}return i.memoizedState=[o,t],o}function Wu(e,t,i){return i===void 0||(Ja&1073741824)!==0&&(ot&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Ry(),We.lanes|=e,Tr|=e,i)}function Rm(e,t,i,o){return Pn(i,t)?i:Ui.current!==null?(e=Wu(e,i,o),Pn(e,t)||(an=!0),e):(Ja&42)===0||(Ja&1073741824)!==0&&(ot&261930)===0?(an=!0,e.memoizedState=i):(e=Ry(),We.lanes|=e,Tr|=e,t)}function zm(e,t,i,o,u){var d=q.p;q.p=d!==0&&8>d?d:8;var g=T.T,w={};T.T=w,nf(e,!1,t,i);try{var O=u(),U=T.S;if(U!==null&&U(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=qS(O,o);Zs(e,t,J,Jn(e))}else Zs(e,t,o,Jn(e))}catch(ae){Zs(e,t,{then:function(){},status:"rejected",reason:ae},Jn())}finally{q.p=d,g!==null&&w.types!==null&&(g.types=w.types),T.T=g}}function XS(){}function ef(e,t,i,o){if(e.tag!==5)throw Error(s(476));var u=Lm(e).queue;zm(e,u,t,ce,i===null?XS:function(){return Bm(e),i(o)})}function Lm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:ce},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Bm(e){var t=Lm(e);t.next===null&&(t=e.alternate.memoizedState),Zs(e,t.next.queue,{},Jn())}function tf(){return bn(fo)}function Um(){return Jt().memoizedState}function Im(){return Jt().memoizedState}function KS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Jn();e=wr(i);var o=Sr(t,e,i);o!==null&&($n(o,t,i),qs(o,t,i)),t={cache:Au()},e.payload=t;return}t=t.return}}function QS(e,t,i){var o=Jn();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Sl(e)?Hm(t,i):(i=bu(e,t,i,o),i!==null&&($n(i,e,o),Vm(i,t,o)))}function $m(e,t,i){var o=Jn();Zs(e,t,i,o)}function Zs(e,t,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Sl(e))Hm(t,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,w=d(g,i);if(u.hasEagerState=!0,u.eagerState=w,Pn(w,g))return tl(e,t,u,0),_t===null&&el(),!1}catch{}finally{}if(i=bu(e,t,u,o),i!==null)return $n(i,e,o),Vm(i,t,o),!0}return!1}function nf(e,t,i,o){if(o={lane:2,revertLane:zf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sl(e)){if(t)throw Error(s(479))}else t=bu(e,i,o,2),t!==null&&$n(t,e,2)}function Sl(e){var t=e.alternate;return e===We||t!==null&&t===We}function Hm(e,t){Ii=pl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Vm(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Kt(e,i)}}var Xs={readContext:bn,use:gl,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};Xs.useEffectEvent=Pt;var qm={readContext:bn,use:gl,useCallback:function(e,t){return Dn().memoizedState=[e,t===void 0?null:t],e},useContext:bn,useEffect:Tm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,bl(4194308,4,Am.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bl(4194308,4,e,t)},useInsertionEffect:function(e,t){bl(4,2,e,t)},useMemo:function(e,t){var i=Dn();t=t===void 0?null:t;var o=e();if(oi){De(!0);try{e()}finally{De(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=Dn();if(i!==void 0){var u=i(t);if(oi){De(!0);try{i(t)}finally{De(!1)}}}else u=t;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=QS.bind(null,We,e),[o.memoizedState,e]},useRef:function(e){var t=Dn();return e={current:e},t.memoizedState=e},useState:function(e){e=Xu(e);var t=e.queue,i=$m.bind(null,We,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Ju,useDeferredValue:function(e,t){var i=Dn();return Wu(i,e,t)},useTransition:function(){var e=Xu(!1);return e=zm.bind(null,We,e.queue,!0,!1),Dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=We,u=Dn();if(ft){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),_t===null)throw Error(s(349));(ot&127)!==0||um(o,t,i)}u.memoizedState=i;var d={value:i,getSnapshot:t};return u.queue=d,Tm(dm.bind(null,o,d,e),[e]),o.flags|=2048,Hi(9,{destroy:void 0},fm.bind(null,o,d,i,t),null),i},useId:function(){var e=Dn(),t=_t.identifierPrefix;if(ft){var i=Ma,o=Da;i=(o&~(1<<32-rt(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=ml++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=YS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:tf,useFormState:Sm,useActionState:Sm,useOptimistic:function(e){var t=Dn();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=nf.bind(null,We,!0,i),i.dispatch=t,[e,t]},useMemoCache:Pu,useCacheRefresh:function(){return Dn().memoizedState=KS.bind(null,We)},useEffectEvent:function(e){var t=Dn(),i={impl:e};return t.memoizedState=i,function(){if((wt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},af={readContext:bn,use:gl,useCallback:Dm,useContext:bn,useEffect:Qu,useImperativeHandle:_m,useInsertionEffect:Nm,useLayoutEffect:jm,useMemo:Mm,useReducer:vl,useRef:Cm,useState:function(){return vl(Wa)},useDebugValue:Ju,useDeferredValue:function(e,t){var i=Jt();return Rm(i,Nt.memoizedState,e,t)},useTransition:function(){var e=vl(Wa)[0],t=Jt().memoizedState;return[typeof e=="boolean"?e:Fs(e),t]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:tf,useFormState:xm,useActionState:xm,useOptimistic:function(e,t){var i=Jt();return mm(i,Nt,e,t)},useMemoCache:Pu,useCacheRefresh:Im};af.useEffectEvent=Om;var Ym={readContext:bn,use:gl,useCallback:Dm,useContext:bn,useEffect:Qu,useImperativeHandle:_m,useInsertionEffect:Nm,useLayoutEffect:jm,useMemo:Mm,useReducer:Zu,useRef:Cm,useState:function(){return Zu(Wa)},useDebugValue:Ju,useDeferredValue:function(e,t){var i=Jt();return Nt===null?Wu(i,e,t):Rm(i,Nt.memoizedState,e,t)},useTransition:function(){var e=Zu(Wa)[0],t=Jt().memoizedState;return[typeof e=="boolean"?e:Fs(e),t]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:tf,useFormState:km,useActionState:km,useOptimistic:function(e,t){var i=Jt();return Nt!==null?mm(i,Nt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Pu,useCacheRefresh:Im};Ym.useEffectEvent=Om;function rf(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:b({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var sf={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Jn(),u=wr(o);u.payload=t,i!=null&&(u.callback=i),t=Sr(e,u,o),t!==null&&($n(t,e,o),qs(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Jn(),u=wr(o);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=Sr(e,u,o),t!==null&&($n(t,e,o),qs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Jn(),o=wr(i);o.tag=2,t!=null&&(o.callback=t),t=Sr(e,o,i),t!==null&&($n(t,e,i),qs(t,e,i))}};function Gm(e,t,i,o,u,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,g):t.prototype&&t.prototype.isPureReactComponent?!zs(i,o)||!zs(u,d):!0}function Pm(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&sf.enqueueReplaceState(t,t.state,null)}function li(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=b({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Fm(e){Wo(e)}function Zm(e){console.error(e)}function Xm(e){Wo(e)}function xl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Km(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function of(e,t,i){return i=wr(i),i.tag=3,i.payload={element:null},i.callback=function(){xl(e,t)},i}function Qm(e){return e=wr(e),e.tag=3,e}function Jm(e,t,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var d=o.value;e.payload=function(){return u(d)},e.callback=function(){Km(t,i,o)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Km(t,i,o),typeof u!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function JS(e,t,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Mi(t,i,u,!0),i=Zn.current,i!==null){switch(i.tag){case 31:case 13:return ca===null?Rl():i.alternate===null&&Ft===0&&(Ft=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),Df(e,o,u)),!1;case 22:return i.flags|=65536,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),Df(e,o,u)),!1}throw Error(s(435,i.tag))}return Df(e,o,u),Rl(),!1}if(ft)return t=Zn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,o!==Cu&&(e=Error(s(422),{cause:o}),Us(ia(e,i)))):(o!==Cu&&(t=Error(s(423),{cause:o}),Us(ia(t,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=ia(o,i),u=of(e.stateNode,o,u),Lu(e,u),Ft!==4&&(Ft=2)),!1;var d=Error(s(520),{cause:o});if(d=ia(d,i),ao===null?ao=[d]:ao.push(d),Ft!==4&&(Ft=2),t===null)return!0;o=ia(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=of(i.stateNode,o,e),Lu(i,e),!1;case 1:if(t=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Or===null||!Or.has(d))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Qm(u),Jm(u,e,i,o),Lu(i,u),!1}i=i.return}while(i!==null);return!1}var lf=Error(s(461)),an=!1;function wn(e,t,i,o){t.child=e===null?nm(t,null,i,o):si(t,e.child,i,o)}function Wm(e,t,i,o,u){i=i.render;var d=t.ref;if("ref"in o){var g={};for(var w in o)w!=="ref"&&(g[w]=o[w])}else g=o;return ni(t),o=Vu(e,t,i,g,d,u),w=qu(),e!==null&&!an?(Yu(e,t,u),er(e,t,u)):(ft&&w&&Eu(t),t.flags|=1,wn(e,t,o,u),t.child)}function ey(e,t,i,o,u){if(e===null){var d=i.type;return typeof d=="function"&&!wu(d)&&d.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=d,ty(e,t,d,o,u)):(e=al(i.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!yf(e,u)){var g=d.memoizedProps;if(i=i.compare,i=i!==null?i:zs,i(g,o)&&e.ref===t.ref)return er(e,t,u)}return t.flags|=1,e=Za(d,o),e.ref=t.ref,e.return=t,t.child=e}function ty(e,t,i,o,u){if(e!==null){var d=e.memoizedProps;if(zs(d,o)&&e.ref===t.ref)if(an=!1,t.pendingProps=o=d,yf(e,u))(e.flags&131072)!==0&&(an=!0);else return t.lanes=e.lanes,er(e,t,u)}return cf(e,t,i,o,u)}function ny(e,t,i,o){var u=o.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|i:i,e!==null){for(o=t.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~d}else o=0,t.child=null;return ay(e,t,d,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ol(t,d!==null?d.cachePool:null),d!==null?im(t,d):Uu(),sm(t);else return o=t.lanes=536870912,ay(e,t,d!==null?d.baseLanes|i:i,i,o)}else d!==null?(ol(t,d.cachePool),im(t,d),Er(),t.memoizedState=null):(e!==null&&ol(t,null),Uu(),Er());return wn(e,t,u,i),t.child}function Ks(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ay(e,t,i,o,u){var d=Du();return d=d===null?null:{parent:tn._currentValue,pool:d},t.memoizedState={baseLanes:i,cachePool:d},e!==null&&ol(t,null),Uu(),sm(t),e!==null&&Mi(e,t,o,!0),t.childLanes=u,null}function El(e,t){return t=Cl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ry(e,t,i){return si(t,e.child,null,i),e=El(t,t.pendingProps),e.flags|=2,Xn(t),t.memoizedState=null,e}function WS(e,t,i){var o=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ft){if(o.mode==="hidden")return e=El(t,o),t.lanes=536870912,Ks(null,e);if($u(t),(e=zt)?(e=yg(e,la),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:mr!==null?{id:Da,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},i=Hp(e),i.return=t,t.child=i,vn=t,zt=null)):e=null,e===null)throw gr(t);return t.lanes=536870912,null}return El(t,o)}var d=e.memoizedState;if(d!==null){var g=d.dehydrated;if($u(t),u)if(t.flags&256)t.flags&=-257,t=ry(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(an||Mi(e,t,i,!1),u=(i&e.childLanes)!==0,an||u){if(o=_t,o!==null&&(g=ta(o,i),g!==0&&g!==d.retryLane))throw d.retryLane=g,Jr(e,g),$n(o,e,g),lf;Rl(),t=ry(e,t,i)}else e=d.treeContext,zt=ua(g.nextSibling),vn=t,ft=!0,yr=null,la=!1,e!==null&&Yp(t,e),t=El(t,o),t.flags|=4096;return t}return e=Za(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function kl(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function cf(e,t,i,o,u){return ni(t),i=Vu(e,t,i,o,void 0,u),o=qu(),e!==null&&!an?(Yu(e,t,u),er(e,t,u)):(ft&&o&&Eu(t),t.flags|=1,wn(e,t,i,u),t.child)}function iy(e,t,i,o,u,d){return ni(t),t.updateQueue=null,i=lm(t,o,i,u),om(e),o=qu(),e!==null&&!an?(Yu(e,t,d),er(e,t,d)):(ft&&o&&Eu(t),t.flags|=1,wn(e,t,i,d),t.child)}function sy(e,t,i,o,u){if(ni(t),t.stateNode===null){var d=ji,g=i.contextType;typeof g=="object"&&g!==null&&(d=bn(g)),d=new i(o,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sf,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=o,d.state=t.memoizedState,d.refs={},Ru(t),g=i.contextType,d.context=typeof g=="object"&&g!==null?bn(g):ji,d.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(rf(t,i,g,o),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(g=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&sf.enqueueReplaceState(d,d.state,null),Gs(t,o,d,u),Ys(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){d=t.stateNode;var w=t.memoizedProps,O=li(i,w);d.props=O;var U=d.context,J=i.contextType;g=ji,typeof J=="object"&&J!==null&&(g=bn(J));var ae=i.getDerivedStateFromProps;J=typeof ae=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||U!==g)&&Pm(t,d,o,g),br=!1;var $=t.memoizedState;d.state=$,Gs(t,o,d,u),Ys(),U=t.memoizedState,w||$!==U||br?(typeof ae=="function"&&(rf(t,i,ae,o),U=t.memoizedState),(O=br||Gm(t,i,O,o,$,U,g))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=U),d.props=o,d.state=U,d.context=g,o=O):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{d=t.stateNode,zu(e,t),g=t.memoizedProps,J=li(i,g),d.props=J,ae=t.pendingProps,$=d.context,U=i.contextType,O=ji,typeof U=="object"&&U!==null&&(O=bn(U)),w=i.getDerivedStateFromProps,(U=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==ae||$!==O)&&Pm(t,d,o,O),br=!1,$=t.memoizedState,d.state=$,Gs(t,o,d,u),Ys();var F=t.memoizedState;g!==ae||$!==F||br||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof w=="function"&&(rf(t,i,w,o),F=t.memoizedState),(J=br||Gm(t,i,J,o,$,F,O)||e!==null&&e.dependencies!==null&&il(e.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,F,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,F,O)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=F),d.props=o,d.state=F,d.context=O,o=J):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),o=!1)}return d=o,kl(e,t),o=(t.flags&128)!==0,d||o?(d=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&o?(t.child=si(t,e.child,null,u),t.child=si(t,null,i,u)):wn(e,t,i,u),t.memoizedState=d.state,e=t.child):e=er(e,t,u),e}function oy(e,t,i,o){return ei(),t.flags|=256,wn(e,t,i,o),t.child}var uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ff(e){return{baseLanes:e,cachePool:Kp()}}function df(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Qn),e}function ly(e,t,i){var o=t.pendingProps,u=!1,d=(t.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(Qt.current&2)!==0),g&&(u=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(ft){if(u?xr(t):Er(),(e=zt)?(e=yg(e,la),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:mr!==null?{id:Da,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},i=Hp(e),i.return=t,t.child=i,vn=t,zt=null)):e=null,e===null)throw gr(t);return Zf(e)?t.lanes=32:t.lanes=536870912,null}var w=o.children;return o=o.fallback,u?(Er(),u=t.mode,w=Cl({mode:"hidden",children:w},u),o=Wr(o,u,i,null),w.return=t,o.return=t,w.sibling=o,t.child=w,o=t.child,o.memoizedState=ff(i),o.childLanes=df(e,g,i),t.memoizedState=uf,Ks(null,o)):(xr(t),hf(t,w))}var O=e.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(d)t.flags&256?(xr(t),t.flags&=-257,t=pf(e,t,i)):t.memoizedState!==null?(Er(),t.child=e.child,t.flags|=128,t=null):(Er(),w=o.fallback,u=t.mode,o=Cl({mode:"visible",children:o.children},u),w=Wr(w,u,i,null),w.flags|=2,o.return=t,w.return=t,o.sibling=w,t.child=o,si(t,e.child,null,i),o=t.child,o.memoizedState=ff(i),o.childLanes=df(e,g,i),t.memoizedState=uf,t=Ks(null,o));else if(xr(t),Zf(w)){if(g=w.nextSibling&&w.nextSibling.dataset,g)var U=g.dgst;g=U,o=Error(s(419)),o.stack="",o.digest=g,Us({value:o,source:null,stack:null}),t=pf(e,t,i)}else if(an||Mi(e,t,i,!1),g=(i&e.childLanes)!==0,an||g){if(g=_t,g!==null&&(o=ta(g,i),o!==0&&o!==O.retryLane))throw O.retryLane=o,Jr(e,o),$n(g,e,o),lf;Ff(w)||Rl(),t=pf(e,t,i)}else Ff(w)?(t.flags|=192,t.child=e.child,t=null):(e=O.treeContext,zt=ua(w.nextSibling),vn=t,ft=!0,yr=null,la=!1,e!==null&&Yp(t,e),t=hf(t,o.children),t.flags|=4096);return t}return u?(Er(),w=o.fallback,u=t.mode,O=e.child,U=O.sibling,o=Za(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,U!==null?w=Za(U,w):(w=Wr(w,u,i,null),w.flags|=2),w.return=t,o.return=t,o.sibling=w,t.child=o,Ks(null,o),o=t.child,w=e.child.memoizedState,w===null?w=ff(i):(u=w.cachePool,u!==null?(O=tn._currentValue,u=u.parent!==O?{parent:O,pool:O}:u):u=Kp(),w={baseLanes:w.baseLanes|i,cachePool:u}),o.memoizedState=w,o.childLanes=df(e,g,i),t.memoizedState=uf,Ks(e.child,o)):(xr(t),i=e.child,e=i.sibling,i=Za(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function hf(e,t){return t=Cl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Cl(e,t){return e=Fn(22,e,null,t),e.lanes=0,e}function pf(e,t,i){return si(t,e.child,null,i),e=hf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cy(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Nu(e.return,t,i)}function mf(e,t,i,o,u,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=i,g.tailMode=u,g.treeForkCount=d)}function uy(e,t,i){var o=t.pendingProps,u=o.revealOrder,d=o.tail;o=o.children;var g=Qt.current,w=(g&2)!==0;if(w?(g=g&1|2,t.flags|=128):g&=1,D(Qt,g),wn(e,t,o,i),o=ft?Bs:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cy(e,i,t);else if(e.tag===19)cy(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&hl(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),mf(t,!1,u,i,d,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&hl(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}mf(t,!0,i,null,d,o);break;case"together":mf(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function er(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Tr|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Mi(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Za(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Za(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function yf(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function ex(e,t,i){switch(t.tag){case 3:et(t,t.stateNode.containerInfo),vr(t,tn,e.memoizedState.cache),ei();break;case 27:case 5:It(t);break;case 4:et(t,t.stateNode.containerInfo);break;case 10:vr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,$u(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(xr(t),t.flags|=128,null):(i&t.child.childLanes)!==0?ly(e,t,i):(xr(t),e=er(e,t,i),e!==null?e.sibling:null);xr(t);break;case 19:var u=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Mi(e,t,i,!1),o=(i&t.childLanes)!==0),u){if(o)return uy(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),D(Qt,Qt.current),o)break;return null;case 22:return t.lanes=0,ny(e,t,i,t.pendingProps);case 24:vr(t,tn,e.memoizedState.cache)}return er(e,t,i)}function fy(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)an=!0;else{if(!yf(e,i)&&(t.flags&128)===0)return an=!1,ex(e,t,i);an=(e.flags&131072)!==0}else an=!1,ft&&(t.flags&1048576)!==0&&qp(t,Bs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=ri(t.elementType),t.type=e,typeof e=="function")wu(e)?(o=li(e,o),t.tag=1,t=sy(null,t,e,o,i)):(t.tag=0,t=cf(null,t,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===Y){t.tag=11,t=Wm(null,t,e,o,i);break e}else if(u===H){t.tag=14,t=ey(null,t,e,o,i);break e}}throw t=Ve(e)||e,Error(s(306,t,""))}}return t;case 0:return cf(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,u=li(o,t.pendingProps),sy(e,t,o,u,i);case 3:e:{if(et(t,t.stateNode.containerInfo),e===null)throw Error(s(387));o=t.pendingProps;var d=t.memoizedState;u=d.element,zu(e,t),Gs(t,o,null,i);var g=t.memoizedState;if(o=g.cache,vr(t,tn,o),o!==d.cache&&ju(t,[tn],i,!0),Ys(),o=g.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=oy(e,t,o,i);break e}else if(o!==u){u=ia(Error(s(424)),t),Us(u),t=oy(e,t,o,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(zt=ua(e.firstChild),vn=t,ft=!0,yr=null,la=!0,i=nm(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ei(),o===u){t=er(e,t,i);break e}wn(e,t,o,i)}t=t.child}return t;case 26:return kl(e,t),e===null?(i=xg(t.type,null,t.pendingProps,null))?t.memoizedState=i:ft||(i=t.type,e=t.pendingProps,o=Hl(Ne.current).createElement(i),o[Wt]=t,o[gn]=e,Sn(o,i,e),ne(o),t.stateNode=o):t.memoizedState=xg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return It(t),e===null&&ft&&(o=t.stateNode=bg(t.type,t.pendingProps,Ne.current),vn=t,la=!0,u=zt,_r(t.type)?(Xf=u,zt=ua(o.firstChild)):zt=u),wn(e,t,t.pendingProps.children,i),kl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ft&&((u=o=zt)&&(o=Ax(o,t.type,t.pendingProps,la),o!==null?(t.stateNode=o,vn=t,zt=ua(o.firstChild),la=!1,u=!0):u=!1),u||gr(t)),It(t),u=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,o=d.children,Yf(u,d)?o=null:g!==null&&Yf(u,g)&&(t.flags|=32),t.memoizedState!==null&&(u=Vu(e,t,GS,null,null,i),fo._currentValue=u),kl(e,t),wn(e,t,o,i),t.child;case 6:return e===null&&ft&&((e=i=zt)&&(i=_x(i,t.pendingProps,la),i!==null?(t.stateNode=i,vn=t,zt=null,e=!0):e=!1),e||gr(t)),null;case 13:return ly(e,t,i);case 4:return et(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=si(t,null,o,i):wn(e,t,o,i),t.child;case 11:return Wm(e,t,t.type,t.pendingProps,i);case 7:return wn(e,t,t.pendingProps,i),t.child;case 8:return wn(e,t,t.pendingProps.children,i),t.child;case 12:return wn(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,vr(t,t.type,o.value),wn(e,t,o.children,i),t.child;case 9:return u=t.type._context,o=t.pendingProps.children,ni(t),u=bn(u),o=o(u),t.flags|=1,wn(e,t,o,i),t.child;case 14:return ey(e,t,t.type,t.pendingProps,i);case 15:return ty(e,t,t.type,t.pendingProps,i);case 19:return uy(e,t,i);case 31:return WS(e,t,i);case 22:return ny(e,t,i,t.pendingProps);case 24:return ni(t),o=bn(tn),e===null?(u=Du(),u===null&&(u=_t,d=Au(),u.pooledCache=d,d.refCount++,d!==null&&(u.pooledCacheLanes|=i),u=d),t.memoizedState={parent:o,cache:u},Ru(t),vr(t,tn,u)):((e.lanes&i)!==0&&(zu(e,t),Gs(t,null,null,i),Ys()),u=e.memoizedState,d=t.memoizedState,u.parent!==o?(u={parent:o,cache:o},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),vr(t,tn,o)):(o=d.cache,vr(t,tn,o),o!==u.cache&&ju(t,[tn],i,!0))),wn(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function tr(e){e.flags|=4}function gf(e,t,i,o,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Uy())e.flags|=8192;else throw ii=cl,Mu}else e.flags&=-16777217}function dy(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Og(t))if(Uy())e.flags|=8192;else throw ii=cl,Mu}function Tl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Pe():536870912,e.lanes|=t,Gi|=t)}function Qs(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function tx(e,t,i){var o=t.pendingProps;switch(ku(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(t),null;case 1:return Lt(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Qa(tn),Je(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Di(t)?tr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tu())),Lt(t),null;case 26:var u=t.type,d=t.memoizedState;return e===null?(tr(t),d!==null?(Lt(t),dy(t,d)):(Lt(t),gf(t,u,null,o,i))):d?d!==e.memoizedState?(tr(t),Lt(t),dy(t,d)):(Lt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&tr(t),Lt(t),gf(t,u,e,o,i)),null;case 27:if(Zt(t),i=Ne.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&tr(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Lt(t),null}e=V.current,Di(t)?Gp(t):(e=bg(u,o,i),t.stateNode=e,tr(t))}return Lt(t),null;case 5:if(Zt(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&tr(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Lt(t),null}if(d=V.current,Di(t))Gp(t);else{var g=Hl(Ne.current);switch(d){case 1:d=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:d=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":d=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":d=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":d=g.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?g.createElement(u,{is:o.is}):g.createElement(u)}}d[Wt]=t,d[gn]=o;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)d.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=d;e:switch(Sn(d,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&tr(t)}}return Lt(t),gf(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&tr(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(e=Ne.current,Di(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,u=vn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[Wt]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||lg(e.nodeValue,i)),e||gr(t,!0)}else e=Hl(e).createTextNode(o),e[Wt]=t,t.stateNode=e}return Lt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=Di(t),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Wt]=t}else ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Lt(t),e=!1}else i=Tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Xn(t),t):(Xn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Lt(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Di(t),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[Wt]=t}else ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Lt(t),u=!1}else u=Tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Xn(t),t):(Xn(t),null)}return Xn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Tl(t,t.updateQueue),Lt(t),null);case 4:return Je(),e===null&&If(t.stateNode.containerInfo),Lt(t),null;case 10:return Qa(t.type),Lt(t),null;case 19:if(B(Qt),o=t.memoizedState,o===null)return Lt(t),null;if(u=(t.flags&128)!==0,d=o.rendering,d===null)if(u)Qs(o,!1);else{if(Ft!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=hl(e),d!==null){for(t.flags|=128,Qs(o,!1),e=d.updateQueue,t.updateQueue=e,Tl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)$p(i,e),i=i.sibling;return D(Qt,Qt.current&1|2),ft&&Xa(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&C()>_l&&(t.flags|=128,u=!0,Qs(o,!1),t.lanes=4194304)}else{if(!u)if(e=hl(d),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Tl(t,e),Qs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!ft)return Lt(t),null}else 2*C()-o.renderingStartTime>_l&&i!==536870912&&(t.flags|=128,u=!0,Qs(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(e=o.last,e!==null?e.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=C(),e.sibling=null,i=Qt.current,D(Qt,u?i&1|2:i&1),ft&&Xa(t,o.treeForkCount),e):(Lt(t),null);case 22:case 23:return Xn(t),Iu(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(Lt(t),t.subtreeFlags&6&&(t.flags|=8192)):Lt(t),i=t.updateQueue,i!==null&&Tl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&B(ai),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Qa(tn),Lt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function nx(e,t){switch(ku(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qa(tn),Je(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Zt(t),null;case 31:if(t.memoizedState!==null){if(Xn(t),t.alternate===null)throw Error(s(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Xn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(Qt),null;case 4:return Je(),null;case 10:return Qa(t.type),null;case 22:case 23:return Xn(t),Iu(),e!==null&&B(ai),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Qa(tn),null;case 25:return null;default:return null}}function hy(e,t){switch(ku(t),t.tag){case 3:Qa(tn),Je();break;case 26:case 27:case 5:Zt(t);break;case 4:Je();break;case 31:t.memoizedState!==null&&Xn(t);break;case 13:Xn(t);break;case 19:B(Qt);break;case 10:Qa(t.type);break;case 22:case 23:Xn(t),Iu(),e!==null&&B(ai);break;case 24:Qa(tn)}}function Js(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var d=i.create,g=i.inst;o=d(),g.destroy=o}i=i.next}while(i!==u)}}catch(w){Tt(t,t.return,w)}}function kr(e,t,i){try{var o=t.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&e)===e){var g=o.inst,w=g.destroy;if(w!==void 0){g.destroy=void 0,u=t;var O=i,U=w;try{U()}catch(J){Tt(u,O,J)}}}o=o.next}while(o!==d)}}catch(J){Tt(t,t.return,J)}}function py(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{rm(t,i)}catch(o){Tt(e,e.return,o)}}}function my(e,t,i){i.props=li(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Tt(e,t,o)}}function Ws(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){Tt(e,t,u)}}function Ra(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){Tt(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){Tt(e,t,u)}else i.current=null}function yy(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){Tt(e,e.return,u)}}function vf(e,t,i){try{var o=e.stateNode;kx(o,e.type,i,t),o[gn]=t}catch(u){Tt(e,e.return,u)}}function gy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_r(e.type)||e.tag===4}function bf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_r(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wf(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Pa));else if(o!==4&&(o===27&&_r(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(wf(e,t,i),e=e.sibling;e!==null;)wf(e,t,i),e=e.sibling}function Ol(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&_r(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Ol(e,t,i),e=e.sibling;e!==null;)Ol(e,t,i),e=e.sibling}function vy(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Sn(t,o,i),t[Wt]=e,t[gn]=i}catch(d){Tt(e,e.return,d)}}var nr=!1,rn=!1,Sf=!1,by=typeof WeakSet=="function"?WeakSet:Set,mn=null;function ax(e,t){if(e=e.containerInfo,Vf=Zl,e=_p(e),hu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var g=0,w=-1,O=-1,U=0,J=0,ae=e,$=null;t:for(;;){for(var F;ae!==i||u!==0&&ae.nodeType!==3||(w=g+u),ae!==d||o!==0&&ae.nodeType!==3||(O=g+o),ae.nodeType===3&&(g+=ae.nodeValue.length),(F=ae.firstChild)!==null;)$=ae,ae=F;for(;;){if(ae===e)break t;if($===i&&++U===u&&(w=g),$===d&&++J===o&&(O=g),(F=ae.nextSibling)!==null)break;ae=$,$=ae.parentNode}ae=F}i=w===-1||O===-1?null:{start:w,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(qf={focusedElem:e,selectionRange:i},Zl=!1,mn=t;mn!==null;)if(t=mn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mn=e;else for(;mn!==null;){switch(t=mn,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=t,u=d.memoizedProps,d=d.memoizedState,o=i.stateNode;try{var Me=li(i.type,u);e=o.getSnapshotBeforeUpdate(Me,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(qe){Tt(i,i.return,qe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Pf(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,mn=e;break}mn=t.return}}function wy(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:rr(e,i),o&4&&Js(5,i);break;case 1:if(rr(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){Tt(i,i.return,g)}else{var u=li(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Tt(i,i.return,g)}}o&64&&py(i),o&512&&Ws(i,i.return);break;case 3:if(rr(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{rm(e,t)}catch(g){Tt(i,i.return,g)}}break;case 27:t===null&&o&4&&vy(i);case 26:case 5:rr(e,i),t===null&&o&4&&yy(i),o&512&&Ws(i,i.return);break;case 12:rr(e,i);break;case 31:rr(e,i),o&4&&Ey(e,i);break;case 13:rr(e,i),o&4&&ky(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=dx.bind(null,i),Dx(e,i))));break;case 22:if(o=i.memoizedState!==null||nr,!o){t=t!==null&&t.memoizedState!==null||rn,u=nr;var d=rn;nr=o,(rn=t)&&!d?ir(e,i,(i.subtreeFlags&8772)!==0):rr(e,i),nr=u,rn=d}break;case 30:break;default:rr(e,i)}}function Sy(e){var t=e.alternate;t!==null&&(e.alternate=null,Sy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Sa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ut=null,Ln=!1;function ar(e,t,i){for(i=i.child;i!==null;)xy(e,t,i),i=i.sibling}function xy(e,t,i){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Be,i)}catch{}switch(i.tag){case 26:rn||Ra(i,t),ar(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:rn||Ra(i,t);var o=Ut,u=Ln;_r(i.type)&&(Ut=i.stateNode,Ln=!1),ar(e,t,i),lo(i.stateNode),Ut=o,Ln=u;break;case 5:rn||Ra(i,t);case 6:if(o=Ut,u=Ln,Ut=null,ar(e,t,i),Ut=o,Ln=u,Ut!==null)if(Ln)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(i.stateNode)}catch(d){Tt(i,t,d)}else try{Ut.removeChild(i.stateNode)}catch(d){Tt(i,t,d)}break;case 18:Ut!==null&&(Ln?(e=Ut,pg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Wi(e)):pg(Ut,i.stateNode));break;case 4:o=Ut,u=Ln,Ut=i.stateNode.containerInfo,Ln=!0,ar(e,t,i),Ut=o,Ln=u;break;case 0:case 11:case 14:case 15:kr(2,i,t),rn||kr(4,i,t),ar(e,t,i);break;case 1:rn||(Ra(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&my(i,t,o)),ar(e,t,i);break;case 21:ar(e,t,i);break;case 22:rn=(o=rn)||i.memoizedState!==null,ar(e,t,i),rn=o;break;default:ar(e,t,i)}}function Ey(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Wi(e)}catch(i){Tt(t,t.return,i)}}}function ky(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wi(e)}catch(i){Tt(t,t.return,i)}}function rx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new by),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new by),t;default:throw Error(s(435,e.tag))}}function Nl(e,t){var i=rx(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var u=hx.bind(null,e,o);o.then(u,u)}})}function Bn(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],d=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 27:if(_r(w.type)){Ut=w.stateNode,Ln=!1;break e}break;case 5:Ut=w.stateNode,Ln=!1;break e;case 3:case 4:Ut=w.stateNode.containerInfo,Ln=!0;break e}w=w.return}if(Ut===null)throw Error(s(160));xy(d,g,u),Ut=null,Ln=!1,d=u.alternate,d!==null&&(d.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Cy(t,e),t=t.sibling}var Ea=null;function Cy(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bn(t,e),Un(e),o&4&&(kr(3,e,e.return),Js(3,e),kr(5,e,e.return));break;case 1:Bn(t,e),Un(e),o&512&&(rn||i===null||Ra(i,i.return)),o&64&&nr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Ea;if(Bn(t,e),Un(e),o&512&&(rn||i===null||Ra(i,i.return)),o&4){var d=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":d=u.getElementsByTagName("title")[0],(!d||d[wa]||d[Wt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=u.createElement(o),u.head.insertBefore(d,u.querySelector("head > title"))),Sn(d,o,i),d[Wt]=e,ne(d),o=d;break e;case"link":var g=Cg("link","href",u).get(o+(i.href||""));if(g){for(var w=0;w<g.length;w++)if(d=g[w],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(w,1);break t}}d=u.createElement(o),Sn(d,o,i),u.head.appendChild(d);break;case"meta":if(g=Cg("meta","content",u).get(o+(i.content||""))){for(w=0;w<g.length;w++)if(d=g[w],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(w,1);break t}}d=u.createElement(o),Sn(d,o,i),u.head.appendChild(d);break;default:throw Error(s(468,o))}d[Wt]=e,ne(d),o=d}e.stateNode=o}else Tg(u,e.type,e.stateNode);else e.stateNode=kg(u,o,e.memoizedProps);else d!==o?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,o===null?Tg(u,e.type,e.stateNode):kg(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&vf(e,e.memoizedProps,i.memoizedProps)}break;case 27:Bn(t,e),Un(e),o&512&&(rn||i===null||Ra(i,i.return)),i!==null&&o&4&&vf(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Bn(t,e),Un(e),o&512&&(rn||i===null||Ra(i,i.return)),e.flags&32){u=e.stateNode;try{xi(u,"")}catch(Me){Tt(e,e.return,Me)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,vf(e,u,i!==null?i.memoizedProps:u)),o&1024&&(Sf=!0);break;case 6:if(Bn(t,e),Un(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Me){Tt(e,e.return,Me)}}break;case 3:if(Yl=null,u=Ea,Ea=Vl(t.containerInfo),Bn(t,e),Ea=u,Un(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Wi(t.containerInfo)}catch(Me){Tt(e,e.return,Me)}Sf&&(Sf=!1,Ty(e));break;case 4:o=Ea,Ea=Vl(e.stateNode.containerInfo),Bn(t,e),Un(e),Ea=o;break;case 12:Bn(t,e),Un(e);break;case 31:Bn(t,e),Un(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nl(e,o)));break;case 13:Bn(t,e),Un(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Al=C()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nl(e,o)));break;case 22:u=e.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,U=nr,J=rn;if(nr=U||u,rn=J||O,Bn(t,e),rn=J,nr=U,Un(e),o&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(i===null||O||nr||rn||ci(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){O=i=t;try{if(d=O.stateNode,u)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{w=O.stateNode;var ae=O.memoizedProps.style,$=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Me){Tt(O,O.return,Me)}}}else if(t.tag===6){if(i===null){O=t;try{O.stateNode.nodeValue=u?"":O.memoizedProps}catch(Me){Tt(O,O.return,Me)}}}else if(t.tag===18){if(i===null){O=t;try{var F=O.stateNode;u?mg(F,!0):mg(O.stateNode,!1)}catch(Me){Tt(O,O.return,Me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Nl(e,i))));break;case 19:Bn(t,e),Un(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nl(e,o)));break;case 30:break;case 21:break;default:Bn(t,e),Un(e)}}function Un(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(gy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,d=bf(e);Ol(e,d,u);break;case 5:var g=i.stateNode;i.flags&32&&(xi(g,""),i.flags&=-33);var w=bf(e);Ol(e,w,g);break;case 3:case 4:var O=i.stateNode.containerInfo,U=bf(e);wf(e,U,O);break;default:throw Error(s(161))}}catch(J){Tt(e,e.return,J)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ty(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ty(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function rr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wy(e,t.alternate,t),t=t.sibling}function ci(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:kr(4,t,t.return),ci(t);break;case 1:Ra(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&my(t,t.return,i),ci(t);break;case 27:lo(t.stateNode);case 26:case 5:Ra(t,t.return),ci(t);break;case 22:t.memoizedState===null&&ci(t);break;case 30:ci(t);break;default:ci(t)}e=e.sibling}}function ir(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,u=e,d=t,g=d.flags;switch(d.tag){case 0:case 11:case 15:ir(u,d,i),Js(4,d);break;case 1:if(ir(u,d,i),o=d,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(U){Tt(o,o.return,U)}if(o=d,u=o.updateQueue,u!==null){var w=o.stateNode;try{var O=u.shared.hiddenCallbacks;if(O!==null)for(u.shared.hiddenCallbacks=null,u=0;u<O.length;u++)am(O[u],w)}catch(U){Tt(o,o.return,U)}}i&&g&64&&py(d),Ws(d,d.return);break;case 27:vy(d);case 26:case 5:ir(u,d,i),i&&o===null&&g&4&&yy(d),Ws(d,d.return);break;case 12:ir(u,d,i);break;case 31:ir(u,d,i),i&&g&4&&Ey(u,d);break;case 13:ir(u,d,i),i&&g&4&&ky(u,d);break;case 22:d.memoizedState===null&&ir(u,d,i),Ws(d,d.return);break;case 30:break;default:ir(u,d,i)}t=t.sibling}}function xf(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Is(i))}function Ef(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Is(e))}function ka(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Oy(e,t,i,o),t=t.sibling}function Oy(e,t,i,o){var u=t.flags;switch(t.tag){case 0:case 11:case 15:ka(e,t,i,o),u&2048&&Js(9,t);break;case 1:ka(e,t,i,o);break;case 3:ka(e,t,i,o),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Is(e)));break;case 12:if(u&2048){ka(e,t,i,o),e=t.stateNode;try{var d=t.memoizedProps,g=d.id,w=d.onPostCommit;typeof w=="function"&&w(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Tt(t,t.return,O)}}else ka(e,t,i,o);break;case 31:ka(e,t,i,o);break;case 13:ka(e,t,i,o);break;case 23:break;case 22:d=t.stateNode,g=t.alternate,t.memoizedState!==null?d._visibility&2?ka(e,t,i,o):eo(e,t):d._visibility&2?ka(e,t,i,o):(d._visibility|=2,Vi(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),u&2048&&xf(g,t);break;case 24:ka(e,t,i,o),u&2048&&Ef(t.alternate,t);break;default:ka(e,t,i,o)}}function Vi(e,t,i,o,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,g=t,w=i,O=o,U=g.flags;switch(g.tag){case 0:case 11:case 15:Vi(d,g,w,O,u),Js(8,g);break;case 23:break;case 22:var J=g.stateNode;g.memoizedState!==null?J._visibility&2?Vi(d,g,w,O,u):eo(d,g):(J._visibility|=2,Vi(d,g,w,O,u)),u&&U&2048&&xf(g.alternate,g);break;case 24:Vi(d,g,w,O,u),u&&U&2048&&Ef(g.alternate,g);break;default:Vi(d,g,w,O,u)}t=t.sibling}}function eo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,u=o.flags;switch(o.tag){case 22:eo(i,o),u&2048&&xf(o.alternate,o);break;case 24:eo(i,o),u&2048&&Ef(o.alternate,o);break;default:eo(i,o)}t=t.sibling}}var to=8192;function qi(e,t,i){if(e.subtreeFlags&to)for(e=e.child;e!==null;)Ny(e,t,i),e=e.sibling}function Ny(e,t,i){switch(e.tag){case 26:qi(e,t,i),e.flags&to&&e.memoizedState!==null&&Yx(i,Ea,e.memoizedState,e.memoizedProps);break;case 5:qi(e,t,i);break;case 3:case 4:var o=Ea;Ea=Vl(e.stateNode.containerInfo),qi(e,t,i),Ea=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=to,to=16777216,qi(e,t,i),to=o):qi(e,t,i));break;default:qi(e,t,i)}}function jy(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function no(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];mn=o,_y(o,e)}jy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ay(e),e=e.sibling}function Ay(e){switch(e.tag){case 0:case 11:case 15:no(e),e.flags&2048&&kr(9,e,e.return);break;case 3:no(e);break;case 12:no(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,jl(e)):no(e);break;default:no(e)}}function jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];mn=o,_y(o,e)}jy(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:kr(8,t,t.return),jl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,jl(t));break;default:jl(t)}e=e.sibling}}function _y(e,t){for(;mn!==null;){var i=mn;switch(i.tag){case 0:case 11:case 15:kr(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Is(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,mn=o;else e:for(i=e;mn!==null;){o=mn;var u=o.sibling,d=o.return;if(Sy(o),o===i){mn=null;break e}if(u!==null){u.return=d,mn=u;break e}mn=d}}}var ix={getCacheForType:function(e){var t=bn(tn),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return bn(tn).controller.signal}},sx=typeof WeakMap=="function"?WeakMap:Map,wt=0,_t=null,it=null,ot=0,Ct=0,Kn=null,Cr=!1,Yi=!1,kf=!1,sr=0,Ft=0,Tr=0,ui=0,Cf=0,Qn=0,Gi=0,ao=null,In=null,Tf=!1,Al=0,Dy=0,_l=1/0,Dl=null,Or=null,fn=0,Nr=null,Pi=null,or=0,Of=0,Nf=null,My=null,ro=0,jf=null;function Jn(){return(wt&2)!==0&&ot!==0?ot&-ot:T.T!==null?zf():Ts()}function Ry(){if(Qn===0)if((ot&536870912)===0||ft){var e=R;R<<=1,(R&3932160)===0&&(R=262144),Qn=e}else Qn=536870912;return e=Zn.current,e!==null&&(e.flags|=32),Qn}function $n(e,t,i){(e===_t&&(Ct===2||Ct===9)||e.cancelPendingCommit!==null)&&(Fi(e,0),jr(e,ot,Qn,!1)),Ot(e,i),((wt&2)===0||e!==_t)&&(e===_t&&((wt&2)===0&&(ui|=i),Ft===4&&jr(e,ot,Qn,!1)),za(e))}function zy(e,t,i){if((wt&6)!==0)throw Error(s(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||yt(e,t),u=o?cx(e,t):_f(e,t,!0),d=o;do{if(u===0){Yi&&!o&&jr(e,t,0,!1);break}else{if(i=e.current.alternate,d&&!ox(i)){u=_f(e,t,!1),d=!1;continue}if(u===2){if(d=t,e.errorRecoveryDisabledLanes&d)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var w=e;u=ao;var O=w.current.memoizedState.isDehydrated;if(O&&(Fi(w,g).flags|=256),g=_f(w,g,!1),g!==2){if(kf&&!O){w.errorRecoveryDisabledLanes|=d,ui|=d,u=4;break e}d=In,In=u,d!==null&&(In===null?In=d:In.push.apply(In,d))}u=g}if(d=!1,u!==2)continue}}if(u===1){Fi(e,0),jr(e,t,0,!0);break}e:{switch(o=e,d=u,d){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:jr(o,t,Qn,!Cr);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Al+300-C(),10<u)){if(jr(o,t,Qn,!Cr),Ae(o,0,!0)!==0)break e;or=t,o.timeoutHandle=dg(Ly.bind(null,o,i,In,Dl,Tf,t,Qn,ui,Gi,Cr,d,"Throttled",-0,0),u);break e}Ly(o,i,In,Dl,Tf,t,Qn,ui,Gi,Cr,d,null,-0,0)}}break}while(!0);za(e)}function Ly(e,t,i,o,u,d,g,w,O,U,J,ae,$,F){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pa},Ny(t,d,ae);var Me=(d&62914560)===d?Al-C():(d&4194048)===d?Dy-C():0;if(Me=Gx(ae,Me),Me!==null){or=d,e.cancelPendingCommit=Me(Yy.bind(null,e,t,d,i,o,u,g,w,O,J,ae,null,$,F)),jr(e,d,g,!U);return}}Yy(e,t,d,i,o,u,g,w,O)}function ox(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],d=u.getSnapshot;u=u.value;try{if(!Pn(d(),u))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jr(e,t,i,o){t&=~Cf,t&=~ui,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var u=t;0<u;){var d=31-rt(u),g=1<<d;o[d]=-1,u&=~g}i!==0&&Cs(e,i,t)}function Ml(){return(wt&6)===0?(io(0),!1):!0}function Af(){if(it!==null){if(Ct===0)var e=it.return;else e=it,Ka=ti=null,Gu(e),Bi=null,Hs=0,e=it;for(;e!==null;)hy(e.alternate,e),e=e.return;it=null}}function Fi(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Ox(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),or=0,Af(),_t=e,it=i=Za(e.current,null),ot=t,Ct=0,Kn=null,Cr=!1,Yi=yt(e,t),kf=!1,Gi=Qn=Cf=ui=Tr=Ft=0,In=ao=null,Tf=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var u=31-rt(o),d=1<<u;t|=e[u],o&=~d}return sr=t,el(),i}function By(e,t){We=null,T.H=Xs,t===Li||t===ll?(t=Wp(),Ct=3):t===Mu?(t=Wp(),Ct=4):Ct=t===lf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Kn=t,it===null&&(Ft=1,xl(e,ia(t,e.current)))}function Uy(){var e=Zn.current;return e===null?!0:(ot&4194048)===ot?ca===null:(ot&62914560)===ot||(ot&536870912)!==0?e===ca:!1}function Iy(){var e=T.H;return T.H=Xs,e===null?Xs:e}function $y(){var e=T.A;return T.A=ix,e}function Rl(){Ft=4,Cr||(ot&4194048)!==ot&&Zn.current!==null||(Yi=!0),(Tr&134217727)===0&&(ui&134217727)===0||_t===null||jr(_t,ot,Qn,!1)}function _f(e,t,i){var o=wt;wt|=2;var u=Iy(),d=$y();(_t!==e||ot!==t)&&(Dl=null,Fi(e,t)),t=!1;var g=Ft;e:do try{if(Ct!==0&&it!==null){var w=it,O=Kn;switch(Ct){case 8:Af(),g=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(t=!0);var U=Ct;if(Ct=0,Kn=null,Zi(e,w,O,U),i&&Yi){g=0;break e}break;default:U=Ct,Ct=0,Kn=null,Zi(e,w,O,U)}}lx(),g=Ft;break}catch(J){By(e,J)}while(!0);return t&&e.shellSuspendCounter++,Ka=ti=null,wt=o,T.H=u,T.A=d,it===null&&(_t=null,ot=0,el()),g}function lx(){for(;it!==null;)Hy(it)}function cx(e,t){var i=wt;wt|=2;var o=Iy(),u=$y();_t!==e||ot!==t?(Dl=null,_l=C()+500,Fi(e,t)):Yi=yt(e,t);e:do try{if(Ct!==0&&it!==null){t=it;var d=Kn;t:switch(Ct){case 1:Ct=0,Kn=null,Zi(e,t,d,1);break;case 2:case 9:if(Qp(d)){Ct=0,Kn=null,Vy(t);break}t=function(){Ct!==2&&Ct!==9||_t!==e||(Ct=7),za(e)},d.then(t,t);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:Qp(d)?(Ct=0,Kn=null,Vy(t)):(Ct=0,Kn=null,Zi(e,t,d,7));break;case 5:var g=null;switch(it.tag){case 26:g=it.memoizedState;case 5:case 27:var w=it;if(g?Og(g):w.stateNode.complete){Ct=0,Kn=null;var O=w.sibling;if(O!==null)it=O;else{var U=w.return;U!==null?(it=U,zl(U)):it=null}break t}}Ct=0,Kn=null,Zi(e,t,d,5);break;case 6:Ct=0,Kn=null,Zi(e,t,d,6);break;case 8:Af(),Ft=6;break e;default:throw Error(s(462))}}ux();break}catch(J){By(e,J)}while(!0);return Ka=ti=null,T.H=o,T.A=u,wt=i,it!==null?0:(_t=null,ot=0,el(),Ft)}function ux(){for(;it!==null&&!ve();)Hy(it)}function Hy(e){var t=fy(e.alternate,e,sr);e.memoizedProps=e.pendingProps,t===null?zl(e):it=t}function Vy(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=iy(i,t,t.pendingProps,t.type,void 0,ot);break;case 11:t=iy(i,t,t.pendingProps,t.type.render,t.ref,ot);break;case 5:Gu(t);default:hy(i,t),t=it=$p(t,sr),t=fy(i,t,sr)}e.memoizedProps=e.pendingProps,t===null?zl(e):it=t}function Zi(e,t,i,o){Ka=ti=null,Gu(t),Bi=null,Hs=0;var u=t.return;try{if(JS(e,u,t,i,ot)){Ft=1,xl(e,ia(i,e.current)),it=null;return}}catch(d){if(u!==null)throw it=u,d;Ft=1,xl(e,ia(i,e.current)),it=null;return}t.flags&32768?(ft||o===1?e=!0:Yi||(ot&536870912)!==0?e=!1:(Cr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Zn.current,o!==null&&o.tag===13&&(o.flags|=16384))),qy(t,e)):zl(t)}function zl(e){var t=e;do{if((t.flags&32768)!==0){qy(t,Cr);return}e=t.return;var i=tx(t.alternate,t,sr);if(i!==null){it=i;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);Ft===0&&(Ft=5)}function qy(e,t){do{var i=nx(e.alternate,e);if(i!==null){i.flags&=32767,it=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=i}while(e!==null);Ft=6,it=null}function Yy(e,t,i,o,u,d,g,w,O){e.cancelPendingCommit=null;do Ll();while(fn!==0);if((wt&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(d=t.lanes|t.childLanes,d|=vu,kt(e,i,d,g,w,O),e===_t&&(it=_t=null,ot=0),Pi=t,Nr=e,or=i,Of=d,Nf=u,My=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,px(xe,function(){return Xy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=T.T,T.T=null,u=q.p,q.p=2,g=wt,wt|=4;try{ax(e,t,i)}finally{wt=g,q.p=u,T.T=o}}fn=1,Gy(),Py(),Fy()}}function Gy(){if(fn===1){fn=0;var e=Nr,t=Pi,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=T.T,T.T=null;var o=q.p;q.p=2;var u=wt;wt|=4;try{Cy(t,e);var d=qf,g=_p(e.containerInfo),w=d.focusedElem,O=d.selectionRange;if(g!==w&&w&&w.ownerDocument&&Ap(w.ownerDocument.documentElement,w)){if(O!==null&&hu(w)){var U=O.start,J=O.end;if(J===void 0&&(J=U),"selectionStart"in w)w.selectionStart=U,w.selectionEnd=Math.min(J,w.value.length);else{var ae=w.ownerDocument||document,$=ae&&ae.defaultView||window;if($.getSelection){var F=$.getSelection(),Me=w.textContent.length,qe=Math.min(O.start,Me),At=O.end===void 0?qe:Math.min(O.end,Me);!F.extend&&qe>At&&(g=At,At=qe,qe=g);var _=jp(w,qe),j=jp(w,At);if(_&&j&&(F.rangeCount!==1||F.anchorNode!==_.node||F.anchorOffset!==_.offset||F.focusNode!==j.node||F.focusOffset!==j.offset)){var L=ae.createRange();L.setStart(_.node,_.offset),F.removeAllRanges(),qe>At?(F.addRange(L),F.extend(j.node,j.offset)):(L.setEnd(j.node,j.offset),F.addRange(L))}}}}for(ae=[],F=w;F=F.parentNode;)F.nodeType===1&&ae.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ae.length;w++){var te=ae[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Zl=!!Vf,qf=Vf=null}finally{wt=u,q.p=o,T.T=i}}e.current=t,fn=2}}function Py(){if(fn===2){fn=0;var e=Nr,t=Pi,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=T.T,T.T=null;var o=q.p;q.p=2;var u=wt;wt|=4;try{wy(e,t.alternate,t)}finally{wt=u,q.p=o,T.T=i}}fn=3}}function Fy(){if(fn===4||fn===3){fn=0,re();var e=Nr,t=Pi,i=or,o=My;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?fn=5:(fn=0,Pi=Nr=null,Zy(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Or=null),hn(i),t=t.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Be,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=T.T,u=q.p,q.p=2,T.T=null;try{for(var d=e.onRecoverableError,g=0;g<o.length;g++){var w=o[g];d(w.value,{componentStack:w.stack})}}finally{T.T=t,q.p=u}}(or&3)!==0&&Ll(),za(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===jf?ro++:(ro=0,jf=e):ro=0,io(0)}}function Zy(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Is(t)))}function Ll(){return Gy(),Py(),Fy(),Xy()}function Xy(){if(fn!==5)return!1;var e=Nr,t=Of;Of=0;var i=hn(or),o=T.T,u=q.p;try{q.p=32>i?32:i,T.T=null,i=Nf,Nf=null;var d=Nr,g=or;if(fn=0,Pi=Nr=null,or=0,(wt&6)!==0)throw Error(s(331));var w=wt;if(wt|=4,Ay(d.current),Oy(d,d.current,g,i),wt=w,io(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Be,d)}catch{}return!0}finally{q.p=u,T.T=o,Zy(e,t)}}function Ky(e,t,i){t=ia(i,t),t=of(e.stateNode,t,2),e=Sr(e,t,2),e!==null&&(Ot(e,2),za(e))}function Tt(e,t,i){if(e.tag===3)Ky(e,e,i);else for(;t!==null;){if(t.tag===3){Ky(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Or===null||!Or.has(o))){e=ia(i,e),i=Qm(2),o=Sr(t,i,2),o!==null&&(Jm(i,o,t,e),Ot(o,2),za(o));break}}t=t.return}}function Df(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new sx;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(i)||(kf=!0,u.add(i),e=fx.bind(null,e,t,i),t.then(e,e))}function fx(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,_t===e&&(ot&i)===i&&(Ft===4||Ft===3&&(ot&62914560)===ot&&300>C()-Al?(wt&2)===0&&Fi(e,0):Cf|=i,Gi===ot&&(Gi=0)),za(e)}function Qy(e,t){t===0&&(t=Pe()),e=Jr(e,t),e!==null&&(Ot(e,t),za(e))}function dx(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Qy(e,i)}function hx(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(t),Qy(e,i)}function px(e,t){return ee(e,t)}var Bl=null,Xi=null,Mf=!1,Ul=!1,Rf=!1,Ar=0;function za(e){e!==Xi&&e.next===null&&(Xi===null?Bl=Xi=e:Xi=Xi.next=e),Ul=!0,Mf||(Mf=!0,yx())}function io(e,t){if(!Rf&&Ul){Rf=!0;do for(var i=!1,o=Bl;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var d=0;else{var g=o.suspendedLanes,w=o.pingedLanes;d=(1<<31-rt(42|e)+1)-1,d&=u&~(g&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,tg(o,d))}else d=ot,d=Ae(o,o===_t?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||yt(o,d)||(i=!0,tg(o,d));o=o.next}while(i);Rf=!1}}function mx(){Jy()}function Jy(){Ul=Mf=!1;var e=0;Ar!==0&&Tx()&&(e=Ar);for(var t=C(),i=null,o=Bl;o!==null;){var u=o.next,d=Wy(o,t);d===0?(o.next=null,i===null?Bl=u:i.next=u,u===null&&(Xi=i)):(i=o,(e!==0||(d&3)!==0)&&(Ul=!0)),o=u}fn!==0&&fn!==5||io(e),Ar!==0&&(Ar=0)}function Wy(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var g=31-rt(d),w=1<<g,O=u[g];O===-1?((w&i)===0||(w&o)!==0)&&(u[g]=Gn(w,t)):O<=t&&(e.expiredLanes|=w),d&=~w}if(t=_t,i=ot,i=Ae(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Ct===2||Ct===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&je(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||yt(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&je(o),hn(i)){case 2:case 8:i=de;break;case 32:i=xe;break;case 268435456:i=$e;break;default:i=xe}return o=eg.bind(null,e),i=ee(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&je(o),e.callbackPriority=2,e.callbackNode=null,2}function eg(e,t){if(fn!==0&&fn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ll()&&e.callbackNode!==i)return null;var o=ot;return o=Ae(e,e===_t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(zy(e,o,t),Wy(e,C()),e.callbackNode!=null&&e.callbackNode===i?eg.bind(null,e):null)}function tg(e,t){if(Ll())return null;zy(e,t,!0)}function yx(){Nx(function(){(wt&6)!==0?ee(oe,mx):Jy()})}function zf(){if(Ar===0){var e=Ri;e===0&&(e=A,A<<=1,(A&261888)===0&&(A=256)),Ar=e}return Ar}function ng(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Po(""+e)}function ag(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function gx(e,t,i,o,u){if(t==="submit"&&i&&i.stateNode===u){var d=ng((u[gn]||null).action),g=o.submitter;g&&(t=(t=g[gn]||null)?ng(t.formAction):g.getAttribute("formAction"),t!==null&&(d=t,g=null));var w=new Ko("action","action",null,o,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ar!==0){var O=g?ag(u,g):new FormData(u);ef(i,{pending:!0,data:O,method:u.method,action:d},null,O)}}else typeof d=="function"&&(w.preventDefault(),O=g?ag(u,g):new FormData(u),ef(i,{pending:!0,data:O,method:u.method,action:d},d,O))},currentTarget:u}]})}}for(var Lf=0;Lf<gu.length;Lf++){var Bf=gu[Lf],vx=Bf.toLowerCase(),bx=Bf[0].toUpperCase()+Bf.slice(1);xa(vx,"on"+bx)}xa(Rp,"onAnimationEnd"),xa(zp,"onAnimationIteration"),xa(Lp,"onAnimationStart"),xa("dblclick","onDoubleClick"),xa("focusin","onFocus"),xa("focusout","onBlur"),xa(zS,"onTransitionRun"),xa(LS,"onTransitionStart"),xa(BS,"onTransitionCancel"),xa(Bp,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var so="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(so));function rg(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var g=o.length-1;0<=g;g--){var w=o[g],O=w.instance,U=w.currentTarget;if(w=w.listener,O!==d&&u.isPropagationStopped())break e;d=w,u.currentTarget=U;try{d(u)}catch(J){Wo(J)}u.currentTarget=null,d=O}else for(g=0;g<o.length;g++){if(w=o[g],O=w.instance,U=w.currentTarget,w=w.listener,O!==d&&u.isPropagationStopped())break e;d=w,u.currentTarget=U;try{d(u)}catch(J){Wo(J)}u.currentTarget=null,d=O}}}}function st(e,t){var i=t[Ho];i===void 0&&(i=t[Ho]=new Set);var o=e+"__bubble";i.has(o)||(ig(t,e,2,!1),i.add(o))}function Uf(e,t,i){var o=0;t&&(o|=4),ig(i,e,o,t)}var Il="_reactListening"+Math.random().toString(36).slice(2);function If(e){if(!e[Il]){e[Il]=!0,pe.forEach(function(i){i!=="selectionchange"&&(wx.has(i)||Uf(i,!1,e),Uf(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Il]||(t[Il]=!0,Uf("selectionchange",!1,t))}}function ig(e,t,i,o){switch(Rg(t)){case 2:var u=Zx;break;case 8:u=Xx;break;default:u=ed}i=u.bind(null,t,i,e),u=void 0,!ru||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function $f(e,t,i,o,u){var d=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var w=o.stateNode.containerInfo;if(w===u)break;if(g===4)for(g=o.return;g!==null;){var O=g.tag;if((O===3||O===4)&&g.stateNode.containerInfo===u)return;g=g.return}for(;w!==null;){if(g=na(w),g===null)return;if(O=g.tag,O===5||O===6||O===26||O===27){o=d=g;continue e}w=w.parentNode}}o=o.return}up(function(){var U=d,J=nu(i),ae=[];e:{var $=Up.get(e);if($!==void 0){var F=Ko,Me=e;switch(e){case"keypress":if(Zo(i)===0)break e;case"keydown":case"keyup":F=hS;break;case"focusin":Me="focus",F=lu;break;case"focusout":Me="blur",F=lu;break;case"beforeblur":case"afterblur":F=lu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=tS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=yS;break;case Rp:case zp:case Lp:F=rS;break;case Bp:F=vS;break;case"scroll":case"scrollend":F=Ww;break;case"wheel":F=wS;break;case"copy":case"cut":case"paste":F=sS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=mp;break;case"toggle":case"beforetoggle":F=xS}var qe=(t&4)!==0,At=!qe&&(e==="scroll"||e==="scrollend"),_=qe?$!==null?$+"Capture":null:$;qe=[];for(var j=U,L;j!==null;){var te=j;if(L=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||L===null||_===null||(te=Ns(j,_),te!=null&&qe.push(oo(j,te,L))),At)break;j=j.return}0<qe.length&&($=new F($,Me,null,i,J),ae.push({event:$,listeners:qe}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",$&&i!==tu&&(Me=i.relatedTarget||i.fromElement)&&(na(Me)||Me[Ya]))break e;if((F||$)&&($=J.window===J?J:($=J.ownerDocument)?$.defaultView||$.parentWindow:window,F?(Me=i.relatedTarget||i.toElement,F=U,Me=Me?na(Me):null,Me!==null&&(At=c(Me),qe=Me.tag,Me!==At||qe!==5&&qe!==27&&qe!==6)&&(Me=null)):(F=null,Me=U),F!==Me)){if(qe=hp,te="onMouseLeave",_="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(qe=mp,te="onPointerLeave",_="onPointerEnter",j="pointer"),At=F==null?$:Ga(F),L=Me==null?$:Ga(Me),$=new qe(te,j+"leave",F,i,J),$.target=At,$.relatedTarget=L,te=null,na(J)===U&&(qe=new qe(_,j+"enter",Me,i,J),qe.target=L,qe.relatedTarget=At,te=qe),At=te,F&&Me)t:{for(qe=Sx,_=F,j=Me,L=0,te=_;te;te=qe(te))L++;te=0;for(var Ue=j;Ue;Ue=qe(Ue))te++;for(;0<L-te;)_=qe(_),L--;for(;0<te-L;)j=qe(j),te--;for(;L--;){if(_===j||j!==null&&_===j.alternate){qe=_;break t}_=qe(_),j=qe(j)}qe=null}else qe=null;F!==null&&sg(ae,$,F,qe,!1),Me!==null&&At!==null&&sg(ae,At,Me,qe,!0)}}e:{if($=U?Ga(U):window,F=$.nodeName&&$.nodeName.toLowerCase(),F==="select"||F==="input"&&$.type==="file")var vt=Ep;else if(Sp($))if(kp)vt=DS;else{vt=AS;var ze=jS}else F=$.nodeName,!F||F.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?U&&eu(U.elementType)&&(vt=Ep):vt=_S;if(vt&&(vt=vt(e,U))){xp(ae,vt,i,J);break e}ze&&ze(e,$,U),e==="focusout"&&U&&$.type==="number"&&U.memoizedProps.value!=null&&Wc($,"number",$.value)}switch(ze=U?Ga(U):window,e){case"focusin":(Sp(ze)||ze.contentEditable==="true")&&(Ti=ze,pu=U,Ls=null);break;case"focusout":Ls=pu=Ti=null;break;case"mousedown":mu=!0;break;case"contextmenu":case"mouseup":case"dragend":mu=!1,Dp(ae,i,J);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":Dp(ae,i,J)}var tt;if(uu)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Ci?bp(e,i)&&(lt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(lt="onCompositionStart");lt&&(yp&&i.locale!=="ko"&&(Ci||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Ci&&(tt=fp()):(pr=J,iu="value"in pr?pr.value:pr.textContent,Ci=!0)),ze=$l(U,lt),0<ze.length&&(lt=new pp(lt,e,null,i,J),ae.push({event:lt,listeners:ze}),tt?lt.data=tt:(tt=wp(i),tt!==null&&(lt.data=tt)))),(tt=kS?CS(e,i):TS(e,i))&&(lt=$l(U,"onBeforeInput"),0<lt.length&&(ze=new pp("onBeforeInput","beforeinput",null,i,J),ae.push({event:ze,listeners:lt}),ze.data=tt)),gx(ae,e,U,i,J)}rg(ae,t)})}function oo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function $l(e,t){for(var i=t+"Capture",o=[];e!==null;){var u=e,d=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||d===null||(u=Ns(e,i),u!=null&&o.unshift(oo(e,u,d)),u=Ns(e,t),u!=null&&o.push(oo(e,u,d))),e.tag===3)return o;e=e.return}return[]}function Sx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sg(e,t,i,o,u){for(var d=t._reactName,g=[];i!==null&&i!==o;){var w=i,O=w.alternate,U=w.stateNode;if(w=w.tag,O!==null&&O===o)break;w!==5&&w!==26&&w!==27||U===null||(O=U,u?(U=Ns(i,d),U!=null&&g.unshift(oo(i,U,O))):u||(U=Ns(i,d),U!=null&&g.push(oo(i,U,O)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var xx=/\r\n?/g,Ex=/\u0000|\uFFFD/g;function og(e){return(typeof e=="string"?e:""+e).replace(xx,`
`).replace(Ex,"")}function lg(e,t){return t=og(t),og(e)===t}function jt(e,t,i,o,u,d){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||xi(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&xi(e,""+o);break;case"className":kn(e,"class",o);break;case"tabIndex":kn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(e,i,o);break;case"style":lp(e,o,d);break;case"data":if(t!=="object"){kn(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Po(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(t!=="input"&&jt(e,t,"name",u.name,u,null),jt(e,t,"formEncType",u.formEncType,u,null),jt(e,t,"formMethod",u.formMethod,u,null),jt(e,t,"formTarget",u.formTarget,u,null)):(jt(e,t,"encType",u.encType,u,null),jt(e,t,"method",u.method,u,null),jt(e,t,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Po(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=Pa);break;case"onScroll":o!=null&&st("scroll",e);break;case"onScrollEnd":o!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Po(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":st("beforetoggle",e),st("toggle",e),un(e,"popover",o);break;case"xlinkActuate":Cn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Cn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Cn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Cn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Cn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Cn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":un(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Qw.get(i)||i,un(e,i,o))}}function Hf(e,t,i,o,u,d){switch(i){case"style":lp(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?xi(e,o):(typeof o=="number"||typeof o=="bigint")&&xi(e,""+o);break;case"onScroll":o!=null&&st("scroll",e);break;case"onScrollEnd":o!=null&&st("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ee.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),t=i.slice(2,u?i.length-7:void 0),d=e[gn]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(t,d,u),typeof o=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):un(e,i,o)}}}function Sn(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var o=!1,u=!1,d;for(d in i)if(i.hasOwnProperty(d)){var g=i[d];if(g!=null)switch(d){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:jt(e,t,d,g,i,null)}}u&&jt(e,t,"srcSet",i.srcSet,i,null),o&&jt(e,t,"src",i.src,i,null);return;case"input":st("invalid",e);var w=d=g=u=null,O=null,U=null;for(o in i)if(i.hasOwnProperty(o)){var J=i[o];if(J!=null)switch(o){case"name":u=J;break;case"type":g=J;break;case"checked":O=J;break;case"defaultChecked":U=J;break;case"value":d=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,t));break;default:jt(e,t,o,J,i,null)}}rp(e,d,w,O,U,g,u,!1);return;case"select":st("invalid",e),o=g=d=null;for(u in i)if(i.hasOwnProperty(u)&&(w=i[u],w!=null))switch(u){case"value":d=w;break;case"defaultValue":g=w;break;case"multiple":o=w;default:jt(e,t,u,w,i,null)}t=d,i=g,e.multiple=!!o,t!=null?Si(e,!!o,t,!1):i!=null&&Si(e,!!o,i,!0);return;case"textarea":st("invalid",e),d=u=o=null;for(g in i)if(i.hasOwnProperty(g)&&(w=i[g],w!=null))switch(g){case"value":o=w;break;case"defaultValue":u=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:jt(e,t,g,w,i,null)}sp(e,o,u,d);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(o=i[O],o!=null))switch(O){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:jt(e,t,O,o,i,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(o=0;o<so.length;o++)st(so[o],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in i)if(i.hasOwnProperty(U)&&(o=i[U],o!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:jt(e,t,U,o,i,null)}return;default:if(eu(t)){for(J in i)i.hasOwnProperty(J)&&(o=i[J],o!==void 0&&Hf(e,t,J,o,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(o=i[w],o!=null&&jt(e,t,w,o,i,null))}function kx(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,d=null,g=null,w=null,O=null,U=null,J=null;for(F in i){var ae=i[F];if(i.hasOwnProperty(F)&&ae!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":O=ae;default:o.hasOwnProperty(F)||jt(e,t,F,null,o,ae)}}for(var $ in o){var F=o[$];if(ae=i[$],o.hasOwnProperty($)&&(F!=null||ae!=null))switch($){case"type":d=F;break;case"name":u=F;break;case"checked":U=F;break;case"defaultChecked":J=F;break;case"value":g=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,t));break;default:F!==ae&&jt(e,t,$,F,o,ae)}}Jc(e,g,w,O,U,J,d,u);return;case"select":F=g=w=$=null;for(d in i)if(O=i[d],i.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":F=O;default:o.hasOwnProperty(d)||jt(e,t,d,null,o,O)}for(u in o)if(d=o[u],O=i[u],o.hasOwnProperty(u)&&(d!=null||O!=null))switch(u){case"value":$=d;break;case"defaultValue":w=d;break;case"multiple":g=d;default:d!==O&&jt(e,t,u,d,o,O)}t=w,i=g,o=F,$!=null?Si(e,!!i,$,!1):!!o!=!!i&&(t!=null?Si(e,!!i,t,!0):Si(e,!!i,i?[]:"",!1));return;case"textarea":F=$=null;for(w in i)if(u=i[w],i.hasOwnProperty(w)&&u!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:jt(e,t,w,null,o,u)}for(g in o)if(u=o[g],d=i[g],o.hasOwnProperty(g)&&(u!=null||d!=null))switch(g){case"value":$=u;break;case"defaultValue":F=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==d&&jt(e,t,g,u,o,d)}ip(e,$,F);return;case"option":for(var Me in i)if($=i[Me],i.hasOwnProperty(Me)&&$!=null&&!o.hasOwnProperty(Me))switch(Me){case"selected":e.selected=!1;break;default:jt(e,t,Me,null,o,$)}for(O in o)if($=o[O],F=i[O],o.hasOwnProperty(O)&&$!==F&&($!=null||F!=null))switch(O){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:jt(e,t,O,$,o,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in i)$=i[qe],i.hasOwnProperty(qe)&&$!=null&&!o.hasOwnProperty(qe)&&jt(e,t,qe,null,o,$);for(U in o)if($=o[U],F=i[U],o.hasOwnProperty(U)&&$!==F&&($!=null||F!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,t));break;default:jt(e,t,U,$,o,F)}return;default:if(eu(t)){for(var At in i)$=i[At],i.hasOwnProperty(At)&&$!==void 0&&!o.hasOwnProperty(At)&&Hf(e,t,At,void 0,o,$);for(J in o)$=o[J],F=i[J],!o.hasOwnProperty(J)||$===F||$===void 0&&F===void 0||Hf(e,t,J,$,o,F);return}}for(var _ in i)$=i[_],i.hasOwnProperty(_)&&$!=null&&!o.hasOwnProperty(_)&&jt(e,t,_,null,o,$);for(ae in o)$=o[ae],F=i[ae],!o.hasOwnProperty(ae)||$===F||$==null&&F==null||jt(e,t,ae,$,o,F)}function cg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],d=u.transferSize,g=u.initiatorType,w=u.duration;if(d&&w&&cg(g)){for(g=0,w=u.responseEnd,o+=1;o<i.length;o++){var O=i[o],U=O.startTime;if(U>w)break;var J=O.transferSize,ae=O.initiatorType;J&&cg(ae)&&(O=O.responseEnd,g+=J*(O<w?1:(w-U)/(O-U)))}if(--o,t+=8*(d+g)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Vf=null,qf=null;function Hl(e){return e.nodeType===9?e:e.ownerDocument}function ug(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Yf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gf=null;function Tx(){var e=window.event;return e&&e.type==="popstate"?e===Gf?!1:(Gf=e,!0):(Gf=null,!1)}var dg=typeof setTimeout=="function"?setTimeout:void 0,Ox=typeof clearTimeout=="function"?clearTimeout:void 0,hg=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof hg<"u"?function(e){return hg.resolve(null).then(e).catch(jx)}:dg;function jx(e){setTimeout(function(){throw e})}function _r(e){return e==="head"}function pg(e,t){var i=t,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),Wi(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")lo(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,lo(i);for(var d=i.firstChild;d;){var g=d.nextSibling,w=d.nodeName;d[wa]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&d.rel.toLowerCase()==="stylesheet"||i.removeChild(d),d=g}}else i==="body"&&lo(e.ownerDocument.body);i=u}while(i);Wi(t)}function mg(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Pf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Pf(i),Sa(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Ax(e,t,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[wa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ua(e.nextSibling),e===null)break}return null}function _x(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ua(e.nextSibling),e===null))return null;return e}function yg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ua(e.nextSibling),e===null))return null;return e}function Ff(e){return e.data==="$?"||e.data==="$~"}function Zf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Dx(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ua(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Xf=null;function gg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return ua(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function vg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function bg(e,t,i){switch(t=Hl(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function lo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Sa(e)}var fa=new Map,wg=new Set;function Vl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var lr=q.d;q.d={f:Mx,r:Rx,D:zx,C:Lx,L:Bx,m:Ux,X:$x,S:Ix,M:Hx};function Mx(){var e=lr.f(),t=Ml();return e||t}function Rx(e){var t=hr(e);t!==null&&t.tag===5&&t.type==="form"?Bm(t):lr.r(e)}var Ki=typeof document>"u"?null:document;function Sg(e,t,i){var o=Ki;if(o&&typeof t=="string"&&t){var u=aa(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),wg.has(u)||(wg.add(u),e={rel:e,crossOrigin:i,href:t},o.querySelector(u)===null&&(t=o.createElement("link"),Sn(t,"link",e),ne(t),o.head.appendChild(t)))}}function zx(e){lr.D(e),Sg("dns-prefetch",e,null)}function Lx(e,t){lr.C(e,t),Sg("preconnect",e,t)}function Bx(e,t,i){lr.L(e,t,i);var o=Ki;if(o&&e&&t){var u='link[rel="preload"][as="'+aa(t)+'"]';t==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+aa(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+aa(i.imageSizes)+'"]')):u+='[href="'+aa(e)+'"]';var d=u;switch(t){case"style":d=Qi(e);break;case"script":d=Ji(e)}fa.has(d)||(e=b({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),fa.set(d,e),o.querySelector(u)!==null||t==="style"&&o.querySelector(co(d))||t==="script"&&o.querySelector(uo(d))||(t=o.createElement("link"),Sn(t,"link",e),ne(t),o.head.appendChild(t)))}}function Ux(e,t){lr.m(e,t);var i=Ki;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+aa(o)+'"][href="'+aa(e)+'"]',d=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ji(e)}if(!fa.has(d)&&(e=b({rel:"modulepreload",href:e},t),fa.set(d,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(uo(d)))return}o=i.createElement("link"),Sn(o,"link",e),ne(o),i.head.appendChild(o)}}}function Ix(e,t,i){lr.S(e,t,i);var o=Ki;if(o&&e){var u=G(o).hoistableStyles,d=Qi(e);t=t||"default";var g=u.get(d);if(!g){var w={loading:0,preload:null};if(g=o.querySelector(co(d)))w.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},i),(i=fa.get(d))&&Kf(e,i);var O=g=o.createElement("link");ne(O),Sn(O,"link",e),O._p=new Promise(function(U,J){O.onload=U,O.onerror=J}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ql(g,t,o)}g={type:"stylesheet",instance:g,count:1,state:w},u.set(d,g)}}}function $x(e,t){lr.X(e,t);var i=Ki;if(i&&e){var o=G(i).hoistableScripts,u=Ji(e),d=o.get(u);d||(d=i.querySelector(uo(u)),d||(e=b({src:e,async:!0},t),(t=fa.get(u))&&Qf(e,t),d=i.createElement("script"),ne(d),Sn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(u,d))}}function Hx(e,t){lr.M(e,t);var i=Ki;if(i&&e){var o=G(i).hoistableScripts,u=Ji(e),d=o.get(u);d||(d=i.querySelector(uo(u)),d||(e=b({src:e,async:!0,type:"module"},t),(t=fa.get(u))&&Qf(e,t),d=i.createElement("script"),ne(d),Sn(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(u,d))}}function xg(e,t,i,o){var u=(u=Ne.current)?Vl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Qi(i.href),i=G(u).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Qi(i.href);var d=G(u).hoistableStyles,g=d.get(e);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,g),(d=u.querySelector(co(e)))&&!d._p&&(g.instance=d,g.state.loading=5),fa.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},fa.set(e,i),d||Vx(u,e,i,g.state))),t&&o===null)throw Error(s(528,""));return g}if(t&&o!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ji(i),i=G(u).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Qi(e){return'href="'+aa(e)+'"'}function co(e){return'link[rel="stylesheet"]['+e+"]"}function Eg(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Vx(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Sn(t,"link",i),ne(t),e.head.appendChild(t))}function Ji(e){return'[src="'+aa(e)+'"]'}function uo(e){return"script[async]"+e}function kg(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+aa(i.href)+'"]');if(o)return t.instance=o,ne(o),o;var u=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ne(o),Sn(o,"style",u),ql(o,i.precedence,e),t.instance=o;case"stylesheet":u=Qi(i.href);var d=e.querySelector(co(u));if(d)return t.state.loading|=4,t.instance=d,ne(d),d;o=Eg(i),(u=fa.get(u))&&Kf(o,u),d=(e.ownerDocument||e).createElement("link"),ne(d);var g=d;return g._p=new Promise(function(w,O){g.onload=w,g.onerror=O}),Sn(d,"link",o),t.state.loading|=4,ql(d,i.precedence,e),t.instance=d;case"script":return d=Ji(i.src),(u=e.querySelector(uo(d)))?(t.instance=u,ne(u),u):(o=i,(u=fa.get(d))&&(o=b({},i),Qf(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),ne(u),Sn(u,"link",o),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,ql(o,i.precedence,e));return t.instance}function ql(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,d=u,g=0;g<o.length;g++){var w=o[g];if(w.dataset.precedence===t)d=w;else if(d!==u)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Kf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Qf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Yl=null;function Cg(e,t,i){if(Yl===null){var o=new Map,u=Yl=new Map;u.set(i,o)}else u=Yl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var d=i[u];if(!(d[wa]||d[Wt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var g=d.getAttribute(t)||"";g=e+g;var w=o.get(g);w?w.push(d):o.set(g,[d])}}return o}function Tg(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function qx(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Og(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Yx(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=Qi(o.href),d=t.querySelector(co(u));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Gl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=d,ne(d);return}d=t.ownerDocument||t,o=Eg(o),(u=fa.get(u))&&Kf(o,u),d=d.createElement("link"),ne(d);var g=d;g._p=new Promise(function(w,O){g.onload=w,g.onerror=O}),Sn(d,"link",o),i.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Gl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Jf=0;function Gx(e,t){return e.stylesheets&&e.count===0&&Fl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Fl(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&Jf===0&&(Jf=62500*Cx());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fl(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Jf?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Gl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pl=null;function Fl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pl=new Map,t.forEach(Px,e),Pl=null,Gl.call(e))}function Px(e,t){if(!(t.state.loading&4)){var i=Pl.get(e);if(i)var o=i.get(null);else{i=new Map,Pl.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<u.length;d++){var g=u[d];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),o=g)}o&&i.set(null,o)}u=t.instance,g=u.getAttribute("data-precedence"),d=i.get(g)||o,d===o&&i.set(null,u),i.set(g,u),this.count++,o=Gl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),d?d.parentNode.insertBefore(u,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var fo={$$typeof:z,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Fx(e,t,i,o,u,d,g,w,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.hiddenUpdates=Mt(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=d,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Ng(e,t,i,o,u,d,g,w,O,U,J,ae){return e=new Fx(e,t,i,g,O,U,J,ae,w),t=1,d===!0&&(t|=24),d=Fn(3,null,null,t),e.current=d,d.stateNode=e,t=Au(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:o,isDehydrated:i,cache:t},Ru(d),e}function jg(e){return e?(e=ji,e):ji}function Ag(e,t,i,o,u,d){u=jg(u),o.context===null?o.context=u:o.pendingContext=u,o=wr(t),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Sr(e,o,t),i!==null&&($n(i,e,t),qs(i,e,t))}function _g(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Wf(e,t){_g(e,t),(e=e.alternate)&&_g(e,t)}function Dg(e){if(e.tag===13||e.tag===31){var t=Jr(e,67108864);t!==null&&$n(t,e,67108864),Wf(e,67108864)}}function Mg(e){if(e.tag===13||e.tag===31){var t=Jn();t=ga(t);var i=Jr(e,t);i!==null&&$n(i,e,t),Wf(e,t)}}var Zl=!0;function Zx(e,t,i,o){var u=T.T;T.T=null;var d=q.p;try{q.p=2,ed(e,t,i,o)}finally{q.p=d,T.T=u}}function Xx(e,t,i,o){var u=T.T;T.T=null;var d=q.p;try{q.p=8,ed(e,t,i,o)}finally{q.p=d,T.T=u}}function ed(e,t,i,o){if(Zl){var u=td(o);if(u===null)$f(e,t,o,Xl,i),zg(e,o);else if(Qx(u,e,t,i,o))o.stopPropagation();else if(zg(e,o),t&4&&-1<Kx.indexOf(e)){for(;u!==null;){var d=hr(u);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=be(d.pendingLanes);if(g!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;g;){var O=1<<31-rt(g);w.entanglements[1]|=O,g&=~O}za(d),(wt&6)===0&&(_l=C()+500,io(0))}}break;case 31:case 13:w=Jr(d,2),w!==null&&$n(w,d,2),Ml(),Wf(d,2)}if(d=td(o),d===null&&$f(e,t,o,Xl,i),d===u)break;u=d}u!==null&&o.stopPropagation()}else $f(e,t,o,null,i)}}function td(e){return e=nu(e),nd(e)}var Xl=null;function nd(e){if(Xl=null,e=na(e),e!==null){var t=c(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=f(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xl=e,null}function Rg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(M()){case oe:return 2;case de:return 8;case xe:case Oe:return 32;case $e:return 268435456;default:return 32}default:return 32}}var ad=!1,Dr=null,Mr=null,Rr=null,ho=new Map,po=new Map,zr=[],Kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zg(e,t){switch(e){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":ho.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(t.pointerId)}}function mo(e,t,i,o,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:d,targetContainers:[u]},t!==null&&(t=hr(t),t!==null&&Dg(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Qx(e,t,i,o,u){switch(t){case"focusin":return Dr=mo(Dr,e,t,i,o,u),!0;case"dragenter":return Mr=mo(Mr,e,t,i,o,u),!0;case"mouseover":return Rr=mo(Rr,e,t,i,o,u),!0;case"pointerover":var d=u.pointerId;return ho.set(d,mo(ho.get(d)||null,e,t,i,o,u)),!0;case"gotpointercapture":return d=u.pointerId,po.set(d,mo(po.get(d)||null,e,t,i,o,u)),!0}return!1}function Lg(e){var t=na(e.target);if(t!==null){var i=c(t);if(i!==null){if(t=i.tag,t===13){if(t=f(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=td(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);tu=o,i.target.dispatchEvent(o),tu=null}else return t=hr(i),t!==null&&Dg(t),e.blockedOn=i,!1;t.shift()}return!0}function Bg(e,t,i){Kl(e)&&i.delete(t)}function Jx(){ad=!1,Dr!==null&&Kl(Dr)&&(Dr=null),Mr!==null&&Kl(Mr)&&(Mr=null),Rr!==null&&Kl(Rr)&&(Rr=null),ho.forEach(Bg),po.forEach(Bg)}function Ql(e,t){e.blockedOn===t&&(e.blockedOn=null,ad||(ad=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Jx)))}var Jl=null;function Ug(e){Jl!==e&&(Jl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jl===e&&(Jl=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],u=e[t+2];if(typeof o!="function"){if(nd(o||i)===null)continue;break}var d=hr(i);d!==null&&(e.splice(t,3),t-=3,ef(d,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function Wi(e){function t(O){return Ql(O,e)}Dr!==null&&Ql(Dr,e),Mr!==null&&Ql(Mr,e),Rr!==null&&Ql(Rr,e),ho.forEach(t),po.forEach(t);for(var i=0;i<zr.length;i++){var o=zr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<zr.length&&(i=zr[0],i.blockedOn===null);)Lg(i),i.blockedOn===null&&zr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],d=i[o+1],g=u[gn]||null;if(typeof d=="function")g||Ug(i);else if(g){var w=null;if(d&&d.hasAttribute("formAction")){if(u=d,g=d[gn]||null)w=g.formAction;else if(nd(u)!==null)continue}else w=g.action;typeof w=="function"?i[o+1]=w:(i.splice(o,3),o-=3),Ug(i)}}}function Ig(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(g){return u=g})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function rd(e){this._internalRoot=e}Wl.prototype.render=rd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,o=Jn();Ag(i,o,e,t,null,null)},Wl.prototype.unmount=rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ag(e.current,2,null,e,null,null),Ml(),t[Ya]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ts();e={blockedOn:null,target:e,priority:t};for(var i=0;i<zr.length&&t!==0&&t<zr[i].priority;i++);zr.splice(i,0,e),i===0&&Lg(e)}};var $g=n.version;if($g!=="19.2.0")throw Error(s(527,$g,"19.2.0"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Wx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{Be=ec.inject(Wx),He=ec}catch{}}return go.createRoot=function(e,t){if(!l(e))throw Error(s(299));var i=!1,o="",u=Fm,d=Zm,g=Xm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Ng(e,1,!1,null,null,i,o,null,u,d,g,Ig),e[Ya]=t.current,If(e),new rd(t)},go.hydrateRoot=function(e,t,i){if(!l(e))throw Error(s(299));var o=!1,u="",d=Fm,g=Zm,w=Xm,O=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(O=i.formState)),t=Ng(e,1,!0,t,i??null,o,u,O,d,g,w,Ig),t.context=jg(null),i=t.current,o=Jn(),o=ga(o),u=wr(o),u.callback=null,Sr(i,u,o),i=o,t.current.lanes=i,Ot(t,i),za(t),e[Ya]=t.current,If(e),new Wl(t)},go.version="19.2.0",go}var Kg;function cE(){if(Kg)return od.exports;Kg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),od.exports=lE(),od.exports}var cb=cE();const uE="modulepreload",fE=function(a,n){return new URL(a,n).href},Qg={},Jg=function(n,r,s){let l=Promise.resolve();if(r&&r.length>0){let y=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};const f=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=y(r.map(v=>{if(v=fE(v,s),v in Qg)return;Qg[v]=!0;const b=v.endsWith(".css"),S=b?'[rel="stylesheet"]':"";if(s)for(let N=f.length-1;N>=0;N--){const P=f[N];if(P.href===v&&(!b||P.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${S}`))return;const k=document.createElement("link");if(k.rel=b?"stylesheet":uE,b||(k.as="script"),k.crossOrigin="",k.href=v,p&&k.setAttribute("nonce",p),document.head.appendChild(k),b)return new Promise((N,P)=>{k.addEventListener("load",N),k.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return l.then(f=>{for(const h of f||[])h.status==="rejected"&&c(h.reason);return n().catch(c)})};var qr=lb();const Oh=Ch(qr),Wg=ob({__proto__:null,default:Oh},[qr]);function ev(a,n,r,s,l,c,f){try{var h=a[c](f),p=h.value}catch(y){return void r(y)}h.done?n(p):Promise.resolve(p).then(s,l)}function at(a){return function(){var n=this,r=arguments;return new Promise(function(s,l){var c=a.apply(n,r);function f(p){ev(c,s,l,f,h,"next",p)}function h(p){ev(c,s,l,f,h,"throw",p)}f(void 0)})}}function ct(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function xn(a){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xn(a)}function dE(a,n){if(xn(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,n);if(xn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function ub(a){var n=dE(a,"string");return xn(n)=="symbol"?n:n+""}function hE(a,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,ub(s.key),s)}}function ut(a,n,r){return n&&hE(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function pE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Va(a,n){if(n&&(xn(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pE(a)}function Dt(a){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dt(a)}function _o(a,n){return _o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_o(a,n)}function Yn(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&_o(a,n)}function Le(a,n,r){return(n=ub(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}var fd={exports:{}},dd={exports:{}},tv;function fb(){return tv||(tv=1,(function(a){function n(r,s){this.v=r,this.k=s}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(dd)),dd.exports}var hd={exports:{}},pd={exports:{}},nv;function db(){return nv||(nv=1,(function(a){function n(r,s,l,c){var f=Object.defineProperty;try{f({},"",{})}catch{f=0}a.exports=n=function(p,y,v,b){function S(k,N){n(p,k,function(P){return this._invoke(k,N,P)})}y?f?f(p,y,{value:v,enumerable:!b,configurable:!b,writable:!b}):p[y]=v:(S("next",0),S("throw",1),S("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,n(r,s,l,c)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(pd)),pd.exports}var av;function hb(){return av||(av=1,(function(a){var n=db();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},f=c.iterator||"@@iterator",h=c.toStringTag||"@@toStringTag";function p(I,Q,K,z){var Y=Q&&Q.prototype instanceof v?Q:v,he=Object.create(Y.prototype);return n(he,"_invoke",(function(ue,H,se){var W,Z,fe,_e=0,Re=se||[],Ve=!1,Ye={p:0,n:0,v:s,a:T,f:T.bind(s,4),d:function(ce,ge){return W=ce,Z=0,fe=s,Ye.n=ge,y}};function T(q,ce){for(Z=q,fe=ce,l=0;!Ve&&_e&&!ge&&l<Re.length;l++){var ge,Se=Re[l],E=Ye.p,B=Se[2];q>3?(ge=B===ce)&&(fe=Se[(Z=Se[4])?5:(Z=3,3)],Se[4]=Se[5]=s):Se[0]<=E&&((ge=q<2&&E<Se[1])?(Z=0,Ye.v=ce,Ye.n=Se[1]):E<B&&(ge=q<3||Se[0]>ce||ce>B)&&(Se[4]=q,Se[5]=ce,Ye.n=B,Z=0))}if(ge||q>1)return y;throw Ve=!0,ce}return function(q,ce,ge){if(_e>1)throw TypeError("Generator is already running");for(Ve&&ce===1&&T(ce,ge),Z=ce,fe=ge;(l=Z<2?s:fe)||!Ve;){W||(Z?Z<3?(Z>1&&(Ye.n=-1),T(Z,fe)):Ye.n=fe:Ye.v=fe);try{if(_e=2,W){if(Z||(q="next"),l=W[q]){if(!(l=l.call(W,fe)))throw TypeError("iterator result is not an object");if(!l.done)return l;fe=l.value,Z<2&&(Z=0)}else Z===1&&(l=W.return)&&l.call(W),Z<2&&(fe=TypeError("The iterator does not provide a '"+q+"' method"),Z=1);W=s}else if((l=(Ve=Ye.n<0)?fe:ue.call(H,Ye))!==y)break}catch(Se){W=s,Z=1,fe=Se}finally{_e=1}}return{value:l,done:Ve}}})(I,K,z),!0),he}var y={};function v(){}function b(){}function S(){}l=Object.getPrototypeOf;var k=[][f]?l(l([][f]())):(n(l={},f,function(){return this}),l),N=S.prototype=v.prototype=Object.create(k);function P(I){return Object.setPrototypeOf?Object.setPrototypeOf(I,S):(I.__proto__=S,n(I,h,"GeneratorFunction")),I.prototype=Object.create(N),I}return b.prototype=S,n(N,"constructor",S),n(S,"constructor",b),b.displayName="GeneratorFunction",n(S,h,"GeneratorFunction"),n(N),n(N,h,"Generator"),n(N,f,function(){return this}),n(N,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:p,m:P}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(hd)),hd.exports}var md={exports:{}},yd={exports:{}},gd={exports:{}},rv;function pb(){return rv||(rv=1,(function(a){var n=fb(),r=db();function s(l,c){function f(p,y,v,b){try{var S=l[p](y),k=S.value;return k instanceof n?c.resolve(k.v).then(function(N){f("next",N,v,b)},function(N){f("throw",N,v,b)}):c.resolve(k).then(function(N){S.value=N,v(S)},function(N){return f("throw",N,v,b)})}catch(N){b(N)}}var h;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(p,y,v){function b(){return new c(function(S,k){f(p,v,S,k)})}return h=h?h.then(b,b):b()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(gd)),gd.exports}var iv;function mb(){return iv||(iv=1,(function(a){var n=hb(),r=pb();function s(l,c,f,h,p){return new r(n().w(l,c,f,h),p||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(yd)),yd.exports}var sv;function mE(){return sv||(sv=1,(function(a){var n=mb();function r(s,l,c,f,h){var p=n(s,l,c,f,h);return p.next().then(function(y){return y.done?y.value:p.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(md)),md.exports}var vd={exports:{}},ov;function yE(){return ov||(ov=1,(function(a){function n(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function f(){for(;l.length;)if((c=l.pop())in s)return f.value=c,f.done=!1,f;return f.done=!0,f}}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(vd)),vd.exports}var bd={exports:{}},wd={exports:{}},lv;function gE(){return lv||(lv=1,(function(a){function n(r){"@babel/helpers - typeof";return a.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,n(r)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(wd)),wd.exports}var cv;function vE(){return cv||(cv=1,(function(a){var n=gE().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(n(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(bd)),bd.exports}var uv;function bE(){return uv||(uv=1,(function(a){var n=fb(),r=hb(),s=mE(),l=mb(),c=pb(),f=yE(),h=vE();function p(){var y=r(),v=y.m(p),b=(Object.getPrototypeOf?Object.getPrototypeOf(v):v.__proto__).constructor;function S(P){var I=typeof P=="function"&&P.constructor;return!!I&&(I===b||(I.displayName||I.name)==="GeneratorFunction")}var k={throw:1,return:2,break:3,continue:3};function N(P){var I,Q;return function(K){I||(I={stop:function(){return Q(K.a,2)},catch:function(){return K.v},abrupt:function(Y,he){return Q(K.a,k[Y],he)},delegateYield:function(Y,he,ue){return I.resultName=he,Q(K.d,h(Y),ue)},finish:function(Y){return Q(K.f,Y)}},Q=function(Y,he,ue){K.p=I.prev,K.n=I.next;try{return Y(he,ue)}finally{I.next=K.n}}),I.resultName&&(I[I.resultName]=K.v,I.resultName=void 0),I.sent=K.v,I.next=K.n;try{return P.call(this,I)}finally{K.p=I.prev,K.n=I.next}}}return(a.exports=p=function(){return{wrap:function(Q,K,z,Y){return y.w(N(Q),K,z,Y&&Y.reverse())},isGeneratorFunction:S,mark:y.m,awrap:function(Q,K){return new n(Q,K)},AsyncIterator:c,async:function(Q,K,z,Y,he){return(S(K)?l:s)(N(Q),K,z,Y,he)},keys:f,values:h}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=p,a.exports.__esModule=!0,a.exports.default=a.exports})(fd)),fd.exports}var Sd,fv;function wE(){if(fv)return Sd;fv=1;var a=bE()();Sd=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return Sd}var SE=wE();const we=Ch(SE);function xE(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=EE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,c=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw c}}}}function EE(a,n){if(a){if(typeof a=="string")return dv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dv(a,n):void 0}}function dv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function kE(){return{debug:function(n){}}}var yb=(function(){function a(){ct(this,a),Le(this,"pipes",[])}return ut(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var n=at(we.mark(function s(l){var c,f,h,p;return we.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:c=l,f=xE(this.pipes),v.prev=2,f.s();case 4:if((h=f.n()).done){v.next=13;break}return p=h.value,v.next=8,p(c);case 8:if(c=v.sent,!(typeof c>"u")){v.next=11;break}return v.abrupt("return");case 11:v.next=4;break;case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(2),f.e(v.t0);case 18:return v.prev=18,f.f(),v.finish(18);case 21:return v.abrupt("return",c);case 22:case"end":return v.stop()}},s,this,[[2,15,18,21]])}));function r(s){return n.apply(this,arguments)}return r})()}])})(),ys=(function(){function a(n){ct(this,a),Le(this,"signal",new yb),this.name=n}return ut(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),kE()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function hv(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=CE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,c=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw c}}}}function CE(a,n){if(a){if(typeof a=="string")return pv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pv(a,n):void 0}}function pv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function TE(a,n,r){return n=Dt(n),Va(a,gb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function gb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gb=function(){return!!a})()}var Fr=(function(a){function n(){var r;return ct(this,n),r=TE(this,n,["NodeEditor"]),Le(r,"nodes",[]),Le(r,"connections",[]),r}return Yn(n,a),ut(n,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=at(we.mark(function l(c){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getNode(c.id)){h.next=2;break}throw new Error("node has already been added");case 2:return h.next=4,this.emit({type:"nodecreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.nodes.push(c),h.next=9,this.emit({type:"nodecreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=at(we.mark(function l(c){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getConnection(c.id)){h.next=2;break}throw new Error("connection has already been added");case 2:return h.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.connections.push(c),h.next=9,this.emit({type:"connectioncreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=at(we.mark(function l(c){var f,h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(f=this.nodes.find(function(v){return v.id===c}),f){y.next=3;break}throw new Error("cannot find node");case 3:return y.next=5,this.emit({type:"noderemove",data:f});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.nodes.indexOf(f),this.nodes.splice(h,1),y.next=11,this.emit({type:"noderemoved",data:f});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=at(we.mark(function l(c){var f,h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(f=this.connections.find(function(v){return v.id===c}),f){y.next=3;break}throw new Error("cannot find connection");case 3:return y.next=5,this.emit({type:"connectionremove",data:f});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.connections.indexOf(f),this.connections.splice(h,1),y.next=11,this.emit({type:"connectionremoved",data:f});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=at(we.mark(function l(){var c,f,h,p,y,v;return we.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.emit({type:"clear"});case 2:if(S.sent){S.next=6;break}return S.next=5,this.emit({type:"clearcancelled"});case 5:return S.abrupt("return",!1);case 6:c=hv(this.connections.slice()),S.prev=7,c.s();case 9:if((f=c.n()).done){S.next=15;break}return h=f.value,S.next=13,this.removeConnection(h.id);case 13:S.next=9;break;case 15:S.next=20;break;case 17:S.prev=17,S.t0=S.catch(7),c.e(S.t0);case 20:return S.prev=20,c.f(),S.finish(20);case 23:p=hv(this.nodes.slice()),S.prev=24,p.s();case 26:if((y=p.n()).done){S.next=32;break}return v=y.value,S.next=30,this.removeNode(v.id);case 30:S.next=26;break;case 32:S.next=37;break;case 34:S.prev=34,S.t1=S.catch(24),p.e(S.t1);case 37:return S.prev=37,p.f(),S.finish(37);case 40:return S.next=42,this.emit({type:"cleared"});case 42:return S.abrupt("return",!0);case 43:case"end":return S.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(ys),xd=globalThis.crypto;function Zr(){if("randomBytes"in xd)return xd.randomBytes(8).toString("hex");var a=xd.getRandomValues(new Uint8Array(8)),n=Array.from(a),r=n.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Nh(a,n,r){return n=Dt(n),Va(a,vb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function vb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vb=function(){return!!a})()}var OE=ut(function a(n){ct(this,a),this.name=n}),jh=ut(function a(n,r,s){ct(this,a),this.socket=n,this.label=r,this.multipleConnections=s,this.id=Zr()}),NE=(function(a){function n(r,s,l){var c;return ct(this,n),c=Nh(this,n,[r,s,l]),Le(c,"control",null),Le(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return Yn(n,a),ut(n,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(jh),jE=(function(a){function n(r,s,l){return ct(this,n),Nh(this,n,[r,s,l!==!1])}return Yn(n,a),ut(n)})(jh),bb=ut(function a(){ct(this,a),this.id=Zr()}),AE=(function(a){function n(r,s){var l,c;return ct(this,n),c=Nh(this,n),c.type=r,c.options=s,c.id=Zr(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return Yn(n,a),ut(n,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(bb),_E=(function(){function a(n){ct(this,a),Le(this,"inputs",{}),Le(this,"outputs",{}),Le(this,"controls",{}),this.label=n,this.id=Zr()}return ut(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),DE=ut(function a(n,r,s,l){if(ct(this,a),this.sourceOutput=r,this.targetInput=l,!n.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=Zr(),this.source=n.id,this.target=s.id}),Gt=Object.freeze({__proto__:null,Socket:OE,Port:jh,Input:NE,Output:jE,Control:bb,InputControl:AE,Node:_E,Connection:DE});const ME=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Gt,NodeEditor:Fr,Scope:ys,Signal:yb,getUID:Zr},Symbol.toStringTag,{value:"Module"}));function Yd(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function RE(a){if(Array.isArray(a))return Yd(a)}function zE(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function wb(a,n){if(a){if(typeof a=="string")return Yd(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yd(a,n):void 0}}function LE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(a){return RE(a)||zE(a)||wb(a)||LE()}var BE=(function(){function a(n){ct(this,a),this.reordered=n,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ut(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,f=r.clientX-l,h=r.clientY-c;return{x:f,y:h}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var n=at(we.mark(function s(l,c){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.holder.contains(l)){h.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){h.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),h.next=7,this.reordered(l);case 7:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function Sb(a,n){var r=function(f){n.move(f)},s=function(f){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),n.up(f)},l=function(f){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),n.down(f)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var mv=function(n){return n.length===0?0:Math.min.apply(Math,gs(n))},yv=function(n){return n.length===0?0:Math.max.apply(Math,gs(n))};function xb(a){var n=mv(a.map(function(c){return c.position.x})),r=mv(a.map(function(c){return c.position.y})),s=yv(a.map(function(c){return c.position.x+c.width})),l=yv(a.map(function(c){return c.position.y+c.height}));return{left:n,right:s,top:r,bottom:l,width:Math.abs(n-s),height:Math.abs(r-l),center:{x:(n+s)/2,y:(r+l)/2}}}function gv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function UE(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?gv(Object(r),!0).forEach(function(s){Le(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):gv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Ah=(function(){function a(n){var r=this;ct(this,a),Le(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=UE({},r.config.getCurrentPosition()),r.events.start(s))}),Le(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),f=r.startPosition.x+l.x/c,h=r.startPosition.y+l.y/c;r.events.translate(f,h,s)}}),Le(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=n||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return ut(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=Sb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),Eb=(function(){function a(n){var r=this;ct(this,a),Le(this,"previous",null),Le(this,"pointers",[]),Le(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,f=l.top,h=s.deltaY<0,p=h?r.intensity:-r.intensity,y=(c-s.clientX)*p,v=(f-s.clientY)*p;r.onzoom(p,y,v,"wheel")}),Le(this,"down",function(s){r.pointers.push(s)}),Le(this,"move",function(s){if(r.pointers=r.pointers.map(function(N){return N.pointerId===s.pointerId?s:N}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,f=l.top,h=r.getTouches(),p=h.cx,y=h.cy,v=h.distance;if(r.previous!==null&&r.previous.distance>0){var b=v/r.previous.distance-1,S=(c-p)*b,k=(f-y)*b;r.onzoom(b,S-(r.previous.cx-p),k-(r.previous.cy-y),"touch")}r.previous={cx:p,cy:y,distance:v}}}),Le(this,"contextmenu",function(){r.pointers=[]}),Le(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),Le(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,f=l.top,h=4*r.intensity,p=(c-s.clientX)*h,y=(f-s.clientY)*h;r.onzoom(h,p,y,"dblclick")}),this.intensity=n}return ut(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],f=[r.touches[1].clientX,r.touches[1].clientY],h=f[0],p=f[1],y=Math.sqrt(Math.pow(l-h,2)+Math.pow(c-p,2));return{cx:(l+h)/2,cy:(c+p)/2,distance:y}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),kb=(function(){function a(n,r,s){var l=this;ct(this,a),Le(this,"transform",{k:1,x:0,y:0}),Le(this,"pointer",{x:0,y:0}),Le(this,"zoomHandler",null),Le(this,"dragHandler",null),Le(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),Le(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),Le(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),Le(this,"resize",function(c){l.events.resize(c)}),Le(this,"onTranslate",function(c,f){var h;(h=l.zoomHandler)!==null&&h!==void 0&&h.isTranslating()||l.translate(c,f)}),Le(this,"onZoom",function(c,f,h,p){l.zoom(l.transform.k*(1+c),f,h,p),l.update()}),this.container=n,this.events=r,this.guards=s,this.content=new BE(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new Eb(.1)),this.setDragHandler(new Ah),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),n.appendChild(this.content.holder),this.update()}return ut(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,f=this.transform.k;this.pointer={x:l/f,y:c/f}}},{key:"translate",value:(function(){var n=at(we.mark(function s(l,c){var f,h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f={x:l,y:c},y.next=3,this.guards.translate({previous:this.transform,position:f});case 3:if(h=y.sent,h){y.next=6;break}return y.abrupt("return",!1);case 6:return this.transform.x=h.data.position.x,this.transform.y=h.data.position.y,this.update(),y.next=11,this.events.translated(h.data);case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var n=at(we.mark(function s(l){var c,f,h,p,y,v,b=arguments;return we.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return c=b.length>1&&b[1]!==void 0?b[1]:0,f=b.length>2&&b[2]!==void 0?b[2]:0,h=b.length>3?b[3]:void 0,p=this.transform.k,k.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:h});case 6:if(y=k.sent,y){k.next=9;break}return k.abrupt("return",!0);case 9:return v=(p-y.data.zoom)/(p-l||1),this.transform.k=y.data.zoom||1,this.transform.x+=c*v,this.transform.y+=f*v,this.update(),k.next=16,this.events.zoomed(y.data);case 16:return k.abrupt("return",!1);case 17:case"end":return k.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function IE(a,n,r){return n=Dt(n),Va(a,Cb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function Cb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cb=function(){return!!a})()}var zo=(function(a){function n(){return ct(this,n),IE(this,n,arguments)}return Yn(n,a),ut(n)})(ys),$E=ut(function a(n){ct(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return n.contextmenu(r)})}),HE=(function(){function a(){ct(this,a),Le(this,"views",new WeakMap),Le(this,"viewsElements",new Map)}return ut(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function vv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function bv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?vv(Object(r),!0).forEach(function(s){Le(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Tb=(function(){function a(n,r,s){var l=this;ct(this,a),Le(this,"translate",(function(){var c=at(we.mark(function f(h,p){var y,v;return we.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return y=bv({},l.position),S.next=3,l.guards.translate({previous:y,position:{x:h,y:p}});case 3:if(v=S.sent,v){S.next=6;break}return S.abrupt("return",!1);case 6:return l.position=bv({},v.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),S.next=10,l.events.translated({position:l.position,previous:y});case 10:return S.abrupt("return",!0);case 11:case"end":return S.stop()}},f)}));return function(f,h){return c.apply(this,arguments)}})()),Le(this,"resize",(function(){var c=at(we.mark(function f(h,p){var y,v;return we.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return y={width:h,height:p},S.next=3,l.guards.resize({size:y});case 3:if(S.sent){S.next=5;break}return S.abrupt("return",!1);case 5:if(v=l.element.querySelector("*:not(span):not([fragment])"),!(!v||!(v instanceof HTMLElement))){S.next=8;break}return S.abrupt("return",!1);case 8:return v.style.width="".concat(h,"px"),v.style.height="".concat(p,"px"),S.next=12,l.events.resized({size:y});case 12:return S.abrupt("return",!0);case 13:case"end":return S.stop()}},f)}));return function(f,h){return c.apply(this,arguments)}})()),this.getZoom=n,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new Ah,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ut(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function Ob(a,n){return a.map(function(r){return{view:n.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,f=l.height;return typeof c<"u"&&typeof f<"u"?{position:s.position,width:c,height:f}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function VE(a,n){var r=a.parentScope(Fr),s=n.map(function(c){return xn(c)==="object"?c:r.getNode(c)}),l=Ob(s,a.nodeViews);return xb(l)}function qE(a){var n=a;n.addPipe(function(r){if(!r||xn(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=n.nodeViews.get(r.data.id),l=n.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=n.connectionViews.get(r.data.id),f=n.area.content;c&&f.reorder(c.element,f.holder.firstChild)}return r})}function wv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function cr(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?wv(Object(r),!0).forEach(function(s){Le(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function YE(a,n){var r=n!=null&&n.scaling?n.scaling===!0?{min:.1,max:1}:n.scaling:!1,s=n!=null&&n.translation?n.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:n.translation:!1;function l(f){if(!r)throw new Error("scaling param isnt defined");var h=typeof r=="function"?r():r,p=h.min,y=h.max;return f<p?p:f>y?y:f}function c(f){if(!s)throw new Error("translation param isnt defined");var h=cr({},f),p=typeof s=="function"?s():s,y=p.left,v=p.top,b=p.right,S=p.bottom;return h.x<y&&(h.x=y),h.x>b&&(h.x=b),h.y<v&&(h.y=v),h.y>S&&(h.y=S),h}a.addPipe(function(f){if(!f||xn(f)!=="object"||!("type"in f))return f;if(r&&f.type==="zoom")return cr(cr({},f),{},{data:cr(cr({},f.data),{},{zoom:l(f.data.zoom)})});if(s&&f.type==="zoomed"){var h=c(a.area.transform);a.area.translate(h.x,h.y)}return s&&f.type==="translate"?cr(cr({},f),{},{data:cr(cr({},f.data),{},{position:c(f.data.position)})}):f})}function GE(){var a=!1;function n(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",n),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}}var Nb=(function(){function a(){ct(this,a),Le(this,"entities",new Map),Le(this,"pickId",null)}return ut(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var n=at(we.mark(function s(l,c){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c){h.next=3;break}return h.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var n=at(we.mark(function s(l){var c,f;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c="".concat(l.label,"_").concat(l.id),f=this.entities.get(c),!f){p.next=6;break}return this.entities.delete(c),p.next=6,f.unselect();case 6:case"end":return p.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var n=at(we.mark(function s(){var l=this;return we.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Promise.all(gs(Array.from(this.entities.values())).map(function(h){return l.remove(h)}));case 2:case"end":return f.stop()}},s,this)}));function r(){return n.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var n=at(we.mark(function s(l,c){var f=this;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Promise.all(Array.from(this.entities.values()).map(function(y){return!f.isPicked(y)&&y.translate(l,c)}));case 2:case"end":return p.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function PE(){return new Nb}function FE(a,n,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(Fr))},f=0;function h(k){k.selected||(k.selected=!0,l.update("node",k.id))}function p(k){k.selected&&(k.selected=!1,l.update("node",k.id))}function y(k,N){return v.apply(this,arguments)}function v(){return v=at(we.mark(function k(N,P){var I;return we.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(I=c().getNode(N),I){K.next=3;break}return K.abrupt("return");case 3:return K.next=5,n.add({label:"node",id:I.id,translate:function(Y,he){return at(we.mark(function ue(){var H,se;return we.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(H=l.nodeViews.get(I.id),se=H?.position,!se){Z.next=5;break}return Z.next=5,H.translate(se.x+Y,se.y+he);case 5:case"end":return Z.stop()}},ue)}))()},unselect:function(){p(I)}},P);case 5:h(I);case 6:case"end":return K.stop()}},k)})),v.apply(this,arguments)}function b(k){return S.apply(this,arguments)}function S(){return S=at(we.mark(function k(N){return we.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,n.remove({id:N,label:"node"});case 2:case"end":return I.stop()}},k)})),S.apply(this,arguments)}return l.addPipe((function(){var k=at(we.mark(function N(P){var I,Q,K,z,Y,he,ue,H;return we.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!(!P||xn(P)!=="object"||!("type"in P))){W.next=2;break}return W.abrupt("return",P);case 2:if(P.type!=="nodepicked"){W.next=11;break}return I=P.data.id,Q=r.accumulating.active(),n.pick({id:I,label:"node"}),f=null,W.next=9,y(I,Q);case 9:W.next=33;break;case 11:if(P.type!=="nodetranslated"){W.next=20;break}if(K=P.data,z=K.id,Y=K.position,he=K.previous,ue=Y.x-he.x,H=Y.y-he.y,!n.isPicked({id:z,label:"node"})){W.next=18;break}return W.next=18,n.translate(ue,H);case 18:W.next=33;break;case 20:if(P.type!=="pointerdown"){W.next=24;break}f=0,W.next=33;break;case 24:if(P.type!=="pointermove"){W.next=28;break}f!==null&&f++,W.next=33;break;case 28:if(P.type!=="pointerup"){W.next=33;break}if(!(f!==null&&f<4)){W.next=32;break}return W.next=32,n.unselectAll();case 32:f=null;case 33:return W.abrupt("return",P);case 34:case"end":return W.stop()}},N)}));return function(N){return k.apply(this,arguments)}})()),{select:y,unselect:b}}function ZE(a,n){var r=null,s=function(){return r||(r=a.parentScope(Fr))};function l(c,f){var h=s().getNode(c);if(h){var p=h.inputs[f];if(!p)throw new Error("cannot find input");var y=p.showControl,v=s().getConnections(),b=!!v.find(function(S){return S.target===c&&S.targetInput===f});p.showControl=n?n({hasAnyConnection:b,input:p}):!b,p.showControl!==y&&a.update("node",h.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function Sv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function tc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Sv(Object(r),!0).forEach(function(s){Le(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function XE(a,n){var r=a,s=typeof n?.size>"u"?16:n.size,l=typeof n?.dynamic>"u"?!0:n.dynamic;function c(f){return Math.round(f/s)*s}r.addPipe(function(f){if(!f||xn(f)!=="object"||!("type"in f))return f;if(l&&f.type==="nodetranslate"){var h=f.data.position,p=c(h.x),y=c(h.y);return tc(tc({},f),{},{data:tc(tc({},f.data),{},{position:{x:p,y}})})}if(!l&&f.type==="nodedragged"){var v=r.nodeViews.get(f.data.id);if(v){var b=v.position,S=b.x,k=b.y;v.translate(c(S),c(k))}}return f})}function KE(a,n,r){return Gd.apply(this,arguments)}function Gd(){return Gd=at(we.mark(function a(n,r,s){var l,c,f,h,p,y,v,b,S,k,N,P,I;return we.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return l=s||{},c=l.scale,f=c===void 0?.9:c,h=n.parentScope(Fr),p=r.map(function(z){return xn(z)==="object"?z:h.getNode(z)}),y=Ob(p,n.nodeViews),v=xb(y),b=[n.container.clientWidth,n.container.clientHeight],S=b[0],k=b[1],N=S/v.width,P=k/v.height,I=Math.min(P*f,N*f,1),n.area.transform.x=S/2-v.center.x*I,n.area.transform.y=k/2-v.center.y*I,K.next=12,n.area.zoom(I,0,0);case 12:case"end":return K.stop()}},a)})),Gd.apply(this,arguments)}var Ir=Object.freeze({__proto__:null,getBoundingBox:VE,simpleNodesOrder:qE,restrictor:YE,accumulateOnCtrl:GE,selectableNodes:FE,Selector:Nb,selector:PE,showInputControl:ZE,snapGrid:XE,zoomAt:KE});function xv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Ev(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?xv(Object(r),!0).forEach(function(s){Le(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function QE(a,n,r){return n=Dt(n),Va(a,jb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function jb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jb=function(){return!!a})()}var Ab=(function(a){function n(r){var s;return ct(this,n),s=QE(this,n,["area"]),Le(s,"nodeViews",new Map),Le(s,"connectionViews",new Map),Le(s,"elements",new HE),Le(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!(xn(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new kb(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,f){return void s.emit({type:"pointerdown",data:{position:c,event:f}})},pointerMove:function(c,f){return void s.emit({type:"pointermove",data:{position:c,event:f}})},pointerUp:function(c,f){return void s.emit({type:"pointerup",data:{position:c,event:f}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return Yn(n,a),ut(n,[{key:"addNodeView",value:function(s){var l=this,c=s.id,f=new Tb(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(p){return l.emit({type:"nodetranslated",data:Ev({id:c},p)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(p){return void l.emit({type:"contextmenu",data:{event:p,context:s}})},resized:function(p){var y=p.size;return l.emit({type:"noderesized",data:{id:s.id,size:y}})}},{translate:function(p){return l.emit({type:"nodetranslate",data:Ev({id:c},p)})},resize:function(p){var y=p.size;return l.emit({type:"noderesize",data:{id:s.id,size:y}})}});return this.nodeViews.set(c,f),this.area.content.add(f.element),this.emit({type:"render",data:{element:f.element,type:"node",payload:s}}),f}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new $E({contextmenu:function(h){return void l.emit({type:"contextmenu",data:{event:h,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=at(we.mark(function l(c,f){var h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(h=this.elements.get(c,f),!h){y.next=4;break}return y.next=4,this.emit({type:"render",data:h});case 4:case"end":return y.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=at(we.mark(function l(c,f,h){var p;return we.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(p=this.nodeViews.get(c),!p){v.next=5;break}return v.next=4,p.resize(f,h);case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}},l,this)}));function s(l,c,f){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=at(we.mark(function l(c,f){var h,p,y;return we.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h=f.x,p=f.y,y=this.nodeViews.get(c),!y){b.next=6;break}return b.next=5,y.translate(h,p);case 5:return b.abrupt("return",b.sent);case 6:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(zo);const kv=Object.freeze(Object.defineProperty({__proto__:null,Area:kb,AreaExtensions:Ir,AreaPlugin:Ab,BaseAreaPlugin:zo,Drag:Ah,NodeView:Tb,Zoom:Eb,usePointerListener:Sb},Symbol.toStringTag,{value:"Module"}));function JE(a,n){for(;!{}.hasOwnProperty.call(a,n)&&(a=Dt(a))!==null;);return a}function Do(){return Do=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,n,r){var s=JE(a,n);if(s){var l=Object.getOwnPropertyDescriptor(s,n);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Do.apply(null,arguments)}function WE(a){if(Array.isArray(a))return a}function ek(a,n){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,f,h=[],p=!0,y=!1;try{if(c=(r=r.call(a)).next,n!==0)for(;!(p=(s=c.call(r)).done)&&(h.push(s.value),h.length!==n);p=!0);}catch(v){y=!0,l=v}finally{try{if(!p&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(y)throw l}}return h}}function tk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mn(a,n){return WE(a)||ek(a,n)||wb(a,n)||tk()}function Cv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Ed(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Cv(Object(r),!0).forEach(function(s){Le(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function nk(a){var n=null,r=null;function s(c){r&&c.removeConnectionView(r),n=null,r=null}function l(c){s(c),r="pseudo_".concat(Zr())}return{isMounted:function(){return!!r},mount:l,render:function(f,h,p){var y=h.x,v=h.y,b=p.side==="output",S={x:y+(b?-3:3),y:v};if(!r)throw new Error("pseudo connection id wasn't generated");var k=b?Ed({id:r,source:p.nodeId,sourceOutput:p.key,target:"",targetInput:""},a??{}):Ed({id:r,target:p.nodeId,targetInput:p.key,source:"",sourceOutput:""},a??{});if(!n){var N=f.addConnectionView(k);n=N.element}n&&f.emit({type:"render",data:Ed({element:n,type:"connection",payload:k},b?{end:S}:{start:S})})},unmount:s}}function ak(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=rk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,c=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw c}}}}function rk(a,n){if(a){if(typeof a=="string")return Tv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tv(a,n):void 0}}function Tv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function ik(a,n){var r=ak(n),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(f){r.e(f)}finally{r.f()}}function _b(a,n){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,n),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,gs(_b(a,n,c))),l}var _h=(function(){function a(){ct(this,a)}return ut(a,[{key:"setContext",value:function(r){this.context=r}}])})();function Db(a,n){var r=a.side==="output"&&n.side==="input",s=a.side==="input"&&n.side==="output",l=r?[a,n]:s?[n,a]:[],c=Mn(l,2),f=c[0],h=c[1];if(f&&h)return[f,h]}function sk(a,n){return!!Db(a,n)}function ok(a,n,r){var s=Db(a,n)||[null,null],l=Mn(s,2),c=l[0],f=l[1];if(c&&f)return r.editor.addConnection({id:Zr(),source:c.nodeId,sourceOutput:c.key,target:f.nodeId,targetInput:f.key}),!0}function lk(a,n){var r=n.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function ck(a,n){var r=a.nodeId,s=a.side,l=a.key;return n.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Pd(a,n){var r=a.map(function(s){var l=lk(s,n),c=l?.multipleConnections;return c?[]:ck(s,n)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var f=c.id;return f})));l.forEach(function(c){return void n.removeConnection(c)})}}}function Dh(a,n,r){return n=Dt(n),Va(a,Mb()?Reflect.construct(n,[],Dt(a).constructor):n.apply(a,r))}function Mb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mb=function(){return!!a})()}var uk=(function(a){function n(r,s){var l;return ct(this,n),l=Dh(this,n),l.initial=r,l.params=s,l}return Yn(n,a),ut(n,[{key:"pick",value:(function(){var r=at(we.mark(function l(c,f){var h,p;return we.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:h=c.socket,this.params.canMakeConnection(this.initial,h)&&(Pd([this.initial,h],f.editor).commit(),p=this.params.makeConnection(this.initial,h,f),this.drop(f,p?h:null,p));case 2:case"end":return v.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Mh(this.params))}}])})(_h),fk=(function(a){function n(r,s,l){var c;ct(this,n),c=Dh(this,n),c.connection=r,c.params=s;var f=Array.from(l.socketsCache.values()).find(function(h){return h.nodeId===c.connection.source&&h.side==="output"&&h.key===c.connection.sourceOutput});if(!f)throw new Error("cannot find output socket");return c.outputSocket=f,c}return Yn(n,a),ut(n,[{key:"init",value:(function(){var r=at(we.mark(function l(c){var f=this;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(y){y?(c.editor.removeConnection(f.connection.id),f.initial=f.outputSocket):f.drop(c)});case 1:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=at(we.mark(function l(c,f){var h,p,y,v,b,S;return we.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:h=c.socket,p=c.event,this.initial&&!(h.side==="input"&&this.connection.target===h.nodeId&&this.connection.targetInput===h.key)?this.params.canMakeConnection(this.initial,h)&&(Pd([this.initial,h],f.editor).commit(),y=this.params.makeConnection(this.initial,h,f),v=y?h:null,this.drop(f,v,y)):p==="down"&&this.initial&&(Pd([this.initial,h],f.editor).commit(),b=this.params.makeConnection(this.initial,h,f),S=b?null:h,this.drop(f,S,b));case 2:case"end":return N.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Mh(this.params))}}])})(_h),Mh=(function(a){function n(r){var s;return ct(this,n),s=Dh(this,n),s.params=r,s}return Yn(n,a),ut(n,[{key:"pick",value:(function(){var r=at(we.mark(function l(c,f){var h,p,y,v;return we.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(h=c.socket,p=c.event,p==="down"){S.next=3;break}return S.abrupt("return");case 3:if(h.side!=="input"){S.next=11;break}if(y=f.editor.getConnections().find(function(k){return k.target===h.nodeId&&k.targetInput===h.key}),!y){S.next=11;break}return v=new fk(y,this.params,f),S.next=9,v.init(f);case 9:return this.context.switchTo(v),S.abrupt("return");case 11:return S.next=13,f.scope.emit({type:"connectionpick",data:{socket:h}});case 13:if(!S.sent){S.next=17;break}this.context.switchTo(new uk(h,this.params)),S.next=18;break;case 17:this.drop(f);case 18:case"end":return S.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(_h),dk=(function(){function a(n){ct(this,a);var r=n?.canMakeConnection||sk,s=n?.makeConnection||ok;this.switchTo(new Mh({canMakeConnection:r,makeConnection:s}))}return ut(a,[{key:"pick",value:(function(){var n=at(we.mark(function s(l,c){return we.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.currentState.pick(l,c);case 2:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function hk(){return function(){return new dk}}var pk=Object.freeze({__proto__:null,setup:hk}),mk=Object.freeze({__proto__:null,classic:pk});function yk(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=gk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,c=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw c}}}}function gk(a,n){if(a){if(typeof a=="string")return Ov(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ov(a,n):void 0}}function Ov(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function vk(a,n,r){return n=Dt(n),Va(a,Rb()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function Rb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rb=function(){return!!a})()}function bk(a,n,r,s){var l=Do(Dt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var wk=(function(a){function n(){var r;return ct(this,n),r=vk(this,n,["connection"]),Le(r,"presets",[]),Le(r,"currentFlow",null),Le(r,"preudoconnection",nk({isPseudo:!0})),Le(r,"socketsCache",new Map),r}return Yn(n,a),ut(n,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=yk(this.presets),c;try{for(l.s();!(c=l.n()).done;){var f=c.value,h=f(s);if(h)return h}}catch(p){l.e(p)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=at(we.mark(function l(c,f){var h,p,y;return we.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h={editor:this.editor,scope:this,socketsCache:this.socketsCache},p=_b(c.clientX,c.clientY),y=ik(this.socketsCache,p),!y){b.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(y),!this.currentFlow){b.next=11;break}return b.next=10,this.currentFlow.pick({socket:y,event:f},h);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:b.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(h);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;bk(n,"setParent",this)([s]),this.areaPlugin=this.parentScope(zo),this.editor=this.areaPlugin.parentScope(Fr);var c=function(h){l.pick(h,"down")};this.addPipe(function(f){if(!f||xn(f)!=="object"||!("type"in f))return f;if(f.type==="pointermove")l.update();else if(f.type==="pointerup")l.pick(f.data.event,"up");else if(f.type==="render"){if(f.data.type==="socket"){var h=f.data.element;h.addEventListener("pointerdown",c),l.socketsCache.set(h,f.data)}}else if(f.type==="unmount"){var p=f.data.element;p.removeEventListener("pointerdown",c),l.socketsCache.delete(p)}return f})}}])})(ys);function Sk(a,n){var r=Mn(a,2),s=r[0],l=s.x,c=s.y,f=r[1],h=f.x,p=f.y,y=Math.abs(c-p),v=l+Math.max(y/2,Math.abs(h-l))*n,b=h-Math.max(y/2,Math.abs(h-l))*n;return"M ".concat(l," ").concat(c," C ").concat(v," ").concat(c," ").concat(b," ").concat(p," ").concat(h," ").concat(p)}function xk(a,n,r){var s=Mn(a,2),l=s[0],c=l.x,f=l.y,h=s[1],p=h.x,y=h.y,v=y>f?1:-1,b=r+Math.abs(c-p)/(r/2),S=(c+p)/2,k=f-v*b,N=(y-f)*n;return`
        M `.concat(c," ").concat(f,`
        C `).concat(c+b," ").concat(f,`
        `).concat(c+b," ").concat(k-N,`
        `).concat(S," ").concat(k,`
        C `).concat(p-b," ").concat(k+N,`
        `).concat(p-b," ").concat(y,`
        `).concat(p," ").concat(y,`
    `)}function Ek(a,n){return Fd.apply(this,arguments)}function Fd(){return Fd=at(we.mark(function a(n,r){var s,l,c,f,h;return we.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(n.offsetParent){y.next=5;break}return y.next=3,new Promise(function(v){return setTimeout(v,0)});case 3:y.next=0;break;case 5:if(s=n.offsetLeft,l=n.offsetTop,c=n.offsetParent,c){y.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return f=n.offsetWidth,h=n.offsetHeight,y.abrupt("return",{x:s+f/2,y:l+h/2});case 14:case"end":return y.stop()}},a)})),Fd.apply(this,arguments)}var kk=(function(){function a(){ct(this,a),Le(this,"listeners",new Set)}return ut(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),Ck=(function(){function a(){ct(this,a),Le(this,"elements",new Map)}return ut(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),f=c.filter(function(h){return h.side===r.side&&h.nodeId===r.nodeId&&h.key===r.key});return f.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=f.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(gs(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),Tk=(function(){function a(){ct(this,a),Le(this,"sockets",new Ck),Le(this,"emitter",new kk),Le(this,"area",null)}return ut(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(zo),this.area.addPipe((function(){var l=at(we.mark(function c(f){var h,p,y,v,b,S,k,N,P,I,Q;return we.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(f.type==="rendered"&&f.data.type==="socket")){z.next=8;break}return h=f.data,p=h.nodeId,y=h.key,v=h.side,b=h.element,z.next=4,s.calculatePosition(p,v,y,b);case 4:S=z.sent,S&&(s.sockets.add({nodeId:p,key:y,side:v,element:b,position:S}),s.emitter.emit({nodeId:p,key:y,side:v})),z.next=24;break;case 8:if(f.type!=="unmount"){z.next=12;break}s.sockets.remove(f.data.element),z.next=24;break;case 12:if(f.type!=="nodetranslated"){z.next=16;break}s.emitter.emit({nodeId:f.data.id}),z.next=24;break;case 16:if(f.type!=="noderesized"){z.next=23;break}return k=f.data.id,z.next=20,Promise.all(s.sockets.snapshot().filter(function(Y){return Y.nodeId===f.data.id&&Y.side==="output"}).map((function(){var Y=at(we.mark(function he(ue){var H,se,W,Z;return we.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return H=ue.side,se=ue.key,W=ue.element,_e.next=3,s.calculatePosition(k,H,se,W);case 3:Z=_e.sent,Z&&(ue.position=Z);case 5:case"end":return _e.stop()}},he)}));return function(he){return Y.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:k}),z.next=24;break;case 23:f.type==="render"&&f.data.type==="connection"&&(N=f.data.payload,P=N.source,I=N.target,Q=P||I,s.emitter.emit({nodeId:Q}));case 24:return z.abrupt("return",f);case 25:case"end":return z.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var f=this,h=this.emitter.listen(function(p){if(p.nodeId===r&&(!p.key||p.side===s)&&(!p.side||p.key===l)){var y,v=f.sockets.getPosition({side:s,nodeId:r,key:l});if(!v)return;var b=v.x,S=v.y,k=(y=f.area)===null||y===void 0?void 0:y.nodeViews.get(r);k&&c({x:b+k.position.x,y:S+k.position.y})}});return this.sockets.snapshot().forEach(function(p){p.nodeId===r&&f.emitter.emit(p)}),h}}])})();function Ok(a,n,r){return n=Dt(n),Va(a,zb()?Reflect.construct(n,[],Dt(a).constructor):n.apply(a,r))}function zb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zb=function(){return!!a})()}var Nk=(function(a){function n(r){var s;return ct(this,n),s=Ok(this,n),s.props=r,s}return Yn(n,a),ut(n,[{key:"calculatePosition",value:(function(){var r=at(we.mark(function l(c,f,h,p){var y,v,b,S;return we.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(b=(y=this.area)===null||y===void 0?void 0:y.nodeViews.get(c),b!=null&&b.element){N.next=3;break}return N.abrupt("return",null);case 3:return N.next=5,Ek(p,b.element);case 5:if(S=N.sent,!((v=this.props)!==null&&v!==void 0&&v.offset)){N.next=8;break}return N.abrupt("return",this.props.offset(S,c,f,h));case 8:return N.abrupt("return",{x:S.x+12*(f==="input"?-1:1),y:S.y});case 9:case"end":return N.stop()}},l,this)}));function s(l,c,f,h){return r.apply(this,arguments)}return s})()}])})(Tk);function jk(a){return new Nk(a)}function En(a,n){return n||(n=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(n)}}))}var qn=function(){return qn=Object.assign||function(n){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(n[c]=r[c])}return n},qn.apply(this,arguments)};function Oc(a,n,r){if(r||arguments.length===2)for(var s=0,l=n.length,c;s<l;s++)(c||!(s in n))&&(c||(c=Array.prototype.slice.call(n,0,s)),c[s]=n[s]);return a.concat(c||Array.prototype.slice.call(n))}var Bt="-ms-",Oo="-moz-",xt="-webkit-",Lb="comm",Bc="rule",Rh="decl",Ak="@import",Bb="@keyframes",_k="@layer",Ub=Math.abs,zh=String.fromCharCode,Zd=Object.assign;function Dk(a,n){return yn(a,0)^45?(((n<<2^yn(a,0))<<2^yn(a,1))<<2^yn(a,2))<<2^yn(a,3):0}function Ib(a){return a.trim()}function fr(a,n){return(a=n.exec(a))?a[0]:a}function nt(a,n,r){return a.replace(n,r)}function mc(a,n,r){return a.indexOf(n,r)}function yn(a,n){return a.charCodeAt(n)|0}function us(a,n,r){return a.slice(n,r)}function La(a){return a.length}function $b(a){return a.length}function So(a,n){return n.push(a),a}function Mk(a,n){return a.map(n).join("")}function Nv(a,n){return a.filter(function(r){return!fr(r,n)})}var Uc=1,fs=1,Hb=0,ya=0,on=0,vs="";function Ic(a,n,r,s,l,c,f,h){return{value:a,root:n,parent:r,type:s,props:l,children:c,line:Uc,column:fs,length:f,return:"",siblings:h}}function $r(a,n){return Zd(Ic("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},n)}function es(a){for(;a.root;)a=$r(a.root,{children:[a]});So(a,a.siblings)}function Rk(){return on}function zk(){return on=ya>0?yn(vs,--ya):0,fs--,on===10&&(fs=1,Uc--),on}function ja(){return on=ya<Hb?yn(vs,ya++):0,fs++,on===10&&(fs=1,Uc++),on}function yi(){return yn(vs,ya)}function yc(){return ya}function $c(a,n){return us(vs,a,n)}function Xd(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Lk(a){return Uc=fs=1,Hb=La(vs=a),ya=0,[]}function Bk(a){return vs="",a}function kd(a){return Ib($c(ya-1,Kd(a===91?a+2:a===40?a+1:a)))}function Uk(a){for(;(on=yi())&&on<33;)ja();return Xd(a)>2||Xd(on)>3?"":" "}function Ik(a,n){for(;--n&&ja()&&!(on<48||on>102||on>57&&on<65||on>70&&on<97););return $c(a,yc()+(n<6&&yi()==32&&ja()==32))}function Kd(a){for(;ja();)switch(on){case a:return ya;case 34:case 39:a!==34&&a!==39&&Kd(on);break;case 40:a===41&&Kd(a);break;case 92:ja();break}return ya}function $k(a,n){for(;ja()&&a+on!==57;)if(a+on===84&&yi()===47)break;return"/*"+$c(n,ya-1)+"*"+zh(a===47?a:ja())}function Hk(a){for(;!Xd(yi());)ja();return $c(a,ya)}function Vk(a){return Bk(gc("",null,null,null,[""],a=Lk(a),0,[0],a))}function gc(a,n,r,s,l,c,f,h,p){for(var y=0,v=0,b=f,S=0,k=0,N=0,P=1,I=1,Q=1,K=0,z="",Y=l,he=c,ue=s,H=z;I;)switch(N=K,K=ja()){case 40:if(N!=108&&yn(H,b-1)==58){mc(H+=nt(kd(K),"&","&\f"),"&\f",Ub(y?h[y-1]:0))!=-1&&(Q=-1);break}case 34:case 39:case 91:H+=kd(K);break;case 9:case 10:case 13:case 32:H+=Uk(N);break;case 92:H+=Ik(yc()-1,7);continue;case 47:switch(yi()){case 42:case 47:So(qk($k(ja(),yc()),n,r,p),p);break;default:H+="/"}break;case 123*P:h[y++]=La(H)*Q;case 125*P:case 59:case 0:switch(K){case 0:case 125:I=0;case 59+v:Q==-1&&(H=nt(H,/\f/g,"")),k>0&&La(H)-b&&So(k>32?Av(H+";",s,r,b-1,p):Av(nt(H," ","")+";",s,r,b-2,p),p);break;case 59:H+=";";default:if(So(ue=jv(H,n,r,y,v,l,h,z,Y=[],he=[],b,c),c),K===123)if(v===0)gc(H,n,ue,ue,Y,c,b,h,he);else switch(S===99&&yn(H,3)===110?100:S){case 100:case 108:case 109:case 115:gc(a,ue,ue,s&&So(jv(a,ue,ue,0,0,l,h,z,l,Y=[],b,he),he),l,he,b,h,s?Y:he);break;default:gc(H,ue,ue,ue,[""],he,0,h,he)}}y=v=k=0,P=Q=1,z=H="",b=f;break;case 58:b=1+La(H),k=N;default:if(P<1){if(K==123)--P;else if(K==125&&P++==0&&zk()==125)continue}switch(H+=zh(K),K*P){case 38:Q=v>0?1:(H+="\f",-1);break;case 44:h[y++]=(La(H)-1)*Q,Q=1;break;case 64:yi()===45&&(H+=kd(ja())),S=yi(),v=b=La(z=H+=Hk(yc())),K++;break;case 45:N===45&&La(H)==2&&(P=0)}}return c}function jv(a,n,r,s,l,c,f,h,p,y,v,b){for(var S=l-1,k=l===0?c:[""],N=$b(k),P=0,I=0,Q=0;P<s;++P)for(var K=0,z=us(a,S+1,S=Ub(I=f[P])),Y=a;K<N;++K)(Y=Ib(I>0?k[K]+" "+z:nt(z,/&\f/g,k[K])))&&(p[Q++]=Y);return Ic(a,n,r,l===0?Bc:h,p,y,v,b)}function qk(a,n,r,s){return Ic(a,n,r,Lb,zh(Rk()),us(a,2,-2),0,s)}function Av(a,n,r,s,l){return Ic(a,n,r,Rh,us(a,0,s),us(a,s+1,-1),s,l)}function Vb(a,n,r){switch(Dk(a,n)){case 5103:return xt+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xt+a+a;case 4789:return Oo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return xt+a+Oo+a+Bt+a+a;case 5936:switch(yn(a,n+11)){case 114:return xt+a+Bt+nt(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return xt+a+Bt+nt(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return xt+a+Bt+nt(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return xt+a+Bt+a+a;case 6165:return xt+a+Bt+"flex-"+a+a;case 5187:return xt+a+nt(a,/(\w+).+(:[^]+)/,xt+"box-$1$2"+Bt+"flex-$1$2")+a;case 5443:return xt+a+Bt+"flex-item-"+nt(a,/flex-|-self/g,"")+(fr(a,/flex-|baseline/)?"":Bt+"grid-row-"+nt(a,/flex-|-self/g,""))+a;case 4675:return xt+a+Bt+"flex-line-pack"+nt(a,/align-content|flex-|-self/g,"")+a;case 5548:return xt+a+Bt+nt(a,"shrink","negative")+a;case 5292:return xt+a+Bt+nt(a,"basis","preferred-size")+a;case 6060:return xt+"box-"+nt(a,"-grow","")+xt+a+Bt+nt(a,"grow","positive")+a;case 4554:return xt+nt(a,/([^-])(transform)/g,"$1"+xt+"$2")+a;case 6187:return nt(nt(nt(a,/(zoom-|grab)/,xt+"$1"),/(image-set)/,xt+"$1"),a,"")+a;case 5495:case 3959:return nt(a,/(image-set\([^]*)/,xt+"$1$`$1");case 4968:return nt(nt(a,/(.+:)(flex-)?(.*)/,xt+"box-pack:$3"+Bt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xt+a+a;case 4200:if(!fr(a,/flex-|baseline/))return Bt+"grid-column-align"+us(a,n)+a;break;case 2592:case 3360:return Bt+nt(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return n=l,fr(s.props,/grid-\w+-end/)})?~mc(a+(r=r[n].value),"span",0)?a:Bt+nt(a,"-start","")+a+Bt+"grid-row-span:"+(~mc(r,"span",0)?fr(r,/\d+/):+fr(r,/\d+/)-+fr(a,/\d+/))+";":Bt+nt(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return fr(s.props,/grid-\w+-start/)})?a:Bt+nt(nt(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return nt(a,/(.+)-inline(.+)/,xt+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(La(a)-1-n>6)switch(yn(a,n+1)){case 109:if(yn(a,n+4)!==45)break;case 102:return nt(a,/(.+:)(.+)-([^]+)/,"$1"+xt+"$2-$3$1"+Oo+(yn(a,n+3)==108?"$3":"$2-$3"))+a;case 115:return~mc(a,"stretch",0)?Vb(nt(a,"stretch","fill-available"),n,r)+a:a}break;case 5152:case 5920:return nt(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,f,h,p,y){return Bt+l+":"+c+y+(f?Bt+l+"-span:"+(h?p:+p-+c)+y:"")+a});case 4949:if(yn(a,n+6)===121)return nt(a,":",":"+xt)+a;break;case 6444:switch(yn(a,yn(a,14)===45?18:11)){case 120:return nt(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+xt+(yn(a,14)===45?"inline-":"")+"box$3$1"+xt+"$2$3$1"+Bt+"$2box$3")+a;case 100:return nt(a,":",":"+Bt)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return nt(a,"scroll-","scroll-snap-")+a}return a}function Nc(a,n){for(var r="",s=0;s<a.length;s++)r+=n(a[s],s,a,n)||"";return r}function Yk(a,n,r,s){switch(a.type){case _k:if(a.children.length)break;case Ak:case Rh:return a.return=a.return||a.value;case Lb:return"";case Bb:return a.return=a.value+"{"+Nc(a.children,s)+"}";case Bc:if(!La(a.value=a.props.join(",")))return""}return La(r=Nc(a.children,s))?a.return=a.value+"{"+r+"}":""}function Gk(a){var n=$b(a);return function(r,s,l,c){for(var f="",h=0;h<n;h++)f+=a[h](r,s,l,c)||"";return f}}function Pk(a){return function(n){n.root||(n=n.return)&&a(n)}}function Fk(a,n,r,s){if(a.length>-1&&!a.return)switch(a.type){case Rh:a.return=Vb(a.value,a.length,r);return;case Bb:return Nc([$r(a,{value:nt(a.value,"@","@"+xt)})],s);case Bc:if(a.length)return Mk(r=a.props,function(l){switch(fr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":es($r(a,{props:[nt(l,/:(read-\w+)/,":"+Oo+"$1")]})),es($r(a,{props:[l]})),Zd(a,{props:Nv(r,s)});break;case"::placeholder":es($r(a,{props:[nt(l,/:(plac\w+)/,":"+xt+"input-$1")]})),es($r(a,{props:[nt(l,/:(plac\w+)/,":"+Oo+"$1")]})),es($r(a,{props:[nt(l,/:(plac\w+)/,Bt+"input-$1")]})),es($r(a,{props:[l]})),Zd(a,{props:Nv(r,s)});break}return""})}}var Zk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Wn={},ds=typeof process<"u"&&Wn!==void 0&&(Wn.REACT_APP_SC_ATTR||Wn.SC_ATTR)||"data-styled",qb="active",Yb="data-styled-version",Hc="6.1.19",Lh=`/*!sc*/
`,jc=typeof window<"u"&&typeof document<"u",Xk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Wn!==void 0&&Wn.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Wn.REACT_APP_SC_DISABLE_SPEEDY!==""?Wn.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Wn.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Wn!==void 0&&Wn.SC_DISABLE_SPEEDY!==void 0&&Wn.SC_DISABLE_SPEEDY!==""&&Wn.SC_DISABLE_SPEEDY!=="false"&&Wn.SC_DISABLE_SPEEDY),Vc=Object.freeze([]),hs=Object.freeze({});function Kk(a,n,r){return r===void 0&&(r=hs),a.theme!==r.theme&&a.theme||n||r.theme}var Gb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Qk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Jk=/(^-|-$)/g;function _v(a){return a.replace(Qk,"-").replace(Jk,"")}var Wk=/(a)(d)/gi,nc=52,Dv=function(a){return String.fromCharCode(a+(a>25?39:97))};function Qd(a){var n,r="";for(n=Math.abs(a);n>nc;n=n/nc|0)r=Dv(n%nc)+r;return(Dv(n%nc)+r).replace(Wk,"$1-$2")}var Cd,Pb=5381,is=function(a,n){for(var r=n.length;r;)a=33*a^n.charCodeAt(--r);return a},Fb=function(a){return is(Pb,a)};function e2(a){return Qd(Fb(a)>>>0)}function t2(a){return a.displayName||a.name||"Component"}function Td(a){return typeof a=="string"&&!0}var Zb=typeof Symbol=="function"&&Symbol.for,Xb=Zb?Symbol.for("react.memo"):60115,n2=Zb?Symbol.for("react.forward_ref"):60112,a2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r2={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Kb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i2=((Cd={})[n2]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Cd[Xb]=Kb,Cd);function Mv(a){return("type"in(n=a)&&n.type.$$typeof)===Xb?Kb:"$$typeof"in a?i2[a.$$typeof]:a2;var n}var s2=Object.defineProperty,o2=Object.getOwnPropertyNames,Rv=Object.getOwnPropertySymbols,l2=Object.getOwnPropertyDescriptor,c2=Object.getPrototypeOf,zv=Object.prototype;function Qb(a,n,r){if(typeof n!="string"){if(zv){var s=c2(n);s&&s!==zv&&Qb(a,s,r)}var l=o2(n);Rv&&(l=l.concat(Rv(n)));for(var c=Mv(a),f=Mv(n),h=0;h<l.length;++h){var p=l[h];if(!(p in r2||r&&r[p]||f&&p in f||c&&p in c)){var y=l2(n,p);try{s2(a,p,y)}catch{}}}}return a}function ps(a){return typeof a=="function"}function Bh(a){return typeof a=="object"&&"styledComponentId"in a}function hi(a,n){return a&&n?"".concat(a," ").concat(n):a||n||""}function Lv(a,n){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Mo(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function Jd(a,n,r){if(r===void 0&&(r=!1),!r&&!Mo(a)&&!Array.isArray(a))return n;if(Array.isArray(n))for(var s=0;s<n.length;s++)a[s]=Jd(a[s],n[s]);else if(Mo(n))for(var s in n)a[s]=Jd(a[s],n[s]);return a}function Uh(a,n){Object.defineProperty(a,"toString",{value:n})}function Lo(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var u2=(function(){function a(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return a.prototype.indexOfGroup=function(n){for(var r=0,s=0;s<n;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;n>=c;)if((c<<=1)<0)throw Lo(16,"".concat(n));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var f=l;f<c;f++)this.groupSizes[f]=0}for(var h=this.indexOfGroup(n+1),p=(f=0,r.length);f<p;f++)this.tag.insertRule(h,r[f])&&(this.groupSizes[n]++,h++)},a.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],s=this.indexOfGroup(n),l=s+r;this.groupSizes[n]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var s=this.groupSizes[n],l=this.indexOfGroup(n),c=l+s,f=l;f<c;f++)r+="".concat(this.tag.getRule(f)).concat(Lh);return r},a})(),vc=new Map,Ac=new Map,bc=1,ac=function(a){if(vc.has(a))return vc.get(a);for(;Ac.has(bc);)bc++;var n=bc++;return vc.set(a,n),Ac.set(n,a),n},f2=function(a,n){bc=n+1,vc.set(a,n),Ac.set(n,a)},d2="style[".concat(ds,"][").concat(Yb,'="').concat(Hc,'"]'),h2=new RegExp("^".concat(ds,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),p2=function(a,n,r){for(var s,l=r.split(","),c=0,f=l.length;c<f;c++)(s=l[c])&&a.registerName(n,s)},m2=function(a,n){for(var r,s=((r=n.textContent)!==null&&r!==void 0?r:"").split(Lh),l=[],c=0,f=s.length;c<f;c++){var h=s[c].trim();if(h){var p=h.match(h2);if(p){var y=0|parseInt(p[1],10),v=p[2];y!==0&&(f2(v,y),p2(a,v,p[3]),a.getTag().insertRules(y,l)),l.length=0}else l.push(h)}}},Bv=function(a){for(var n=document.querySelectorAll(d2),r=0,s=n.length;r<s;r++){var l=n[r];l&&l.getAttribute(ds)!==qb&&(m2(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function y2(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Jb=function(a){var n=document.head,r=a||n,s=document.createElement("style"),l=(function(h){var p=Array.from(h.querySelectorAll("style[".concat(ds,"]")));return p[p.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(ds,qb),s.setAttribute(Yb,Hc);var f=y2();return f&&s.setAttribute("nonce",f),r.insertBefore(s,c),s},g2=(function(){function a(n){this.element=Jb(n),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var f=s[l];if(f.ownerNode===r)return f}throw Lo(17)})(this.element),this.length=0}return a.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},a.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},a})(),v2=(function(){function a(n){this.element=Jb(n),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[n]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},a.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},a})(),b2=(function(){function a(n){this.rules=[],this.length=0}return a.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},a.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},a.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},a})(),Uv=jc,w2={isServer:!jc,useCSSOMInjection:!Xk},Wb=(function(){function a(n,r,s){n===void 0&&(n=hs),r===void 0&&(r={});var l=this;this.options=qn(qn({},w2),n),this.gs=r,this.names=new Map(s),this.server=!!n.isServer,!this.server&&jc&&Uv&&(Uv=!1,Bv(this)),Uh(this,function(){return(function(c){for(var f=c.getTag(),h=f.length,p="",y=function(b){var S=(function(Q){return Ac.get(Q)})(b);if(S===void 0)return"continue";var k=c.names.get(S),N=f.getGroup(b);if(k===void 0||!k.size||N.length===0)return"continue";var P="".concat(ds,".g").concat(b,'[id="').concat(S,'"]'),I="";k!==void 0&&k.forEach(function(Q){Q.length>0&&(I+="".concat(Q,","))}),p+="".concat(N).concat(P,'{content:"').concat(I,'"}').concat(Lh)},v=0;v<h;v++)y(v);return p})(l)})}return a.registerId=function(n){return ac(n)},a.prototype.rehydrate=function(){!this.server&&jc&&Bv(this)},a.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new a(qn(qn({},this.options),n),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(n=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new b2(l):s?new g2(l):new v2(l)})(this.options),new u2(n)));var n},a.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},a.prototype.registerName=function(n,r){if(ac(n),this.names.has(n))this.names.get(n).add(r);else{var s=new Set;s.add(r),this.names.set(n,s)}},a.prototype.insertRules=function(n,r,s){this.registerName(n,r),this.getTag().insertRules(ac(n),s)},a.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},a.prototype.clearRules=function(n){this.getTag().clearGroup(ac(n)),this.clearNames(n)},a.prototype.clearTag=function(){this.tag=void 0},a})(),S2=/&/g,x2=/^\s*\/\/.*$/gm;function e1(a,n){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(s){return"".concat(n," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=e1(r.children,n)),r})}function E2(a){var n,r,s,l=hs,c=l.options,f=c===void 0?hs:c,h=l.plugins,p=h===void 0?Vc:h,y=function(S,k,N){return N.startsWith(r)&&N.endsWith(r)&&N.replaceAll(r,"").length>0?".".concat(n):S},v=p.slice();v.push(function(S){S.type===Bc&&S.value.includes("&")&&(S.props[0]=S.props[0].replace(S2,r).replace(s,y))}),f.prefix&&v.push(Fk),v.push(Yk);var b=function(S,k,N,P){k===void 0&&(k=""),N===void 0&&(N=""),P===void 0&&(P="&"),n=P,r=k,s=new RegExp("\\".concat(r,"\\b"),"g");var I=S.replace(x2,""),Q=Vk(N||k?"".concat(N," ").concat(k," { ").concat(I," }"):I);f.namespace&&(Q=e1(Q,f.namespace));var K=[];return Nc(Q,Gk(v.concat(Pk(function(z){return K.push(z)})))),K};return b.hash=p.length?p.reduce(function(S,k){return k.name||Lo(15),is(S,k.name)},Pb).toString():"",b}var k2=new Wb,Wd=E2(),t1=Aa.createContext({shouldForwardProp:void 0,styleSheet:k2,stylis:Wd});t1.Consumer;Aa.createContext(void 0);function Iv(){return x.useContext(t1)}var C2=(function(){function a(n,r){var s=this;this.inject=function(l,c){c===void 0&&(c=Wd);var f=s.name+c.hash;l.hasNameForId(s.id,f)||l.insertRules(s.id,f,c(s.rules,f,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Uh(this,function(){throw Lo(12,String(s.name))})}return a.prototype.getName=function(n){return n===void 0&&(n=Wd),this.name+n.hash},a})(),T2=function(a){return a>="A"&&a<="Z"};function $v(a){for(var n="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;T2(s)?n+="-"+s.toLowerCase():n+=s}return n.startsWith("ms-")?"-"+n:n}var n1=function(a){return a==null||a===!1||a===""},a1=function(a){var n,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!n1(c)&&(Array.isArray(c)&&c.isCss||ps(c)?s.push("".concat($v(l),":"),c,";"):Mo(c)?s.push.apply(s,Oc(Oc(["".concat(l," {")],a1(c),!1),["}"],!1)):s.push("".concat($v(l),": ").concat((n=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in Zk||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function gi(a,n,r,s){if(n1(a))return[];if(Bh(a))return[".".concat(a.styledComponentId)];if(ps(a)){if(!ps(c=a)||c.prototype&&c.prototype.isReactComponent||!n)return[a];var l=a(n);return gi(l,n,r,s)}var c;return a instanceof C2?r?(a.inject(r,s),[a.getName(s)]):[a]:Mo(a)?a1(a):Array.isArray(a)?Array.prototype.concat.apply(Vc,a.map(function(f){return gi(f,n,r,s)})):[a.toString()]}function O2(a){for(var n=0;n<a.length;n+=1){var r=a[n];if(ps(r)&&!Bh(r))return!1}return!0}var N2=Fb(Hc),j2=(function(){function a(n,r,s){this.rules=n,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&O2(n),this.componentId=r,this.baseHash=is(N2,r),this.baseStyle=s,Wb.registerId(r)}return a.prototype.generateAndInjectStyles=function(n,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=hi(l,this.staticRulesId);else{var c=Lv(gi(this.rules,n,r,s)),f=Qd(is(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,f)){var h=s(c,".".concat(f),void 0,this.componentId);r.insertRules(this.componentId,f,h)}l=hi(l,f),this.staticRulesId=f}else{for(var p=is(this.baseHash,s.hash),y="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")y+=b;else if(b){var S=Lv(gi(b,n,r,s));p=is(p,S+v),y+=S}}if(y){var k=Qd(p>>>0);r.hasNameForId(this.componentId,k)||r.insertRules(this.componentId,k,s(y,".".concat(k),void 0,this.componentId)),l=hi(l,k)}}return l},a})(),r1=Aa.createContext(void 0);r1.Consumer;var Od={};function A2(a,n,r){var s=Bh(a),l=a,c=!Td(a),f=n.attrs,h=f===void 0?Vc:f,p=n.componentId,y=p===void 0?(function(Y,he){var ue=typeof Y!="string"?"sc":_v(Y);Od[ue]=(Od[ue]||0)+1;var H="".concat(ue,"-").concat(e2(Hc+ue+Od[ue]));return he?"".concat(he,"-").concat(H):H})(n.displayName,n.parentComponentId):p,v=n.displayName,b=v===void 0?(function(Y){return Td(Y)?"styled.".concat(Y):"Styled(".concat(t2(Y),")")})(a):v,S=n.displayName&&n.componentId?"".concat(_v(n.displayName),"-").concat(n.componentId):n.componentId||y,k=s&&l.attrs?l.attrs.concat(h).filter(Boolean):h,N=n.shouldForwardProp;if(s&&l.shouldForwardProp){var P=l.shouldForwardProp;if(n.shouldForwardProp){var I=n.shouldForwardProp;N=function(Y,he){return P(Y,he)&&I(Y,he)}}else N=P}var Q=new j2(r,S,s?l.componentStyle:void 0);function K(Y,he){return(function(ue,H,se){var W=ue.attrs,Z=ue.componentStyle,fe=ue.defaultProps,_e=ue.foldedComponentIds,Re=ue.styledComponentId,Ve=ue.target,Ye=Aa.useContext(r1),T=Iv(),q=ue.shouldForwardProp||T.shouldForwardProp,ce=Kk(H,Ye,fe)||hs,ge=(function(me,Ne,Ie){for(var et,Je=qn(qn({},Ne),{className:void 0,theme:Ie}),It=0;It<me.length;It+=1){var Zt=ps(et=me[It])?et(Je):et;for(var $t in Zt)Je[$t]=$t==="className"?hi(Je[$t],Zt[$t]):$t==="style"?qn(qn({},Je[$t]),Zt[$t]):Zt[$t]}return Ne.className&&(Je.className=hi(Je.className,Ne.className)),Je})(W,H,ce),Se=ge.as||Ve,E={};for(var B in ge)ge[B]===void 0||B[0]==="$"||B==="as"||B==="theme"&&ge.theme===ce||(B==="forwardedAs"?E.as=ge.forwardedAs:q&&!q(B,Se)||(E[B]=ge[B]));var D=(function(me,Ne){var Ie=Iv(),et=me.generateAndInjectStyles(Ne,Ie.styleSheet,Ie.stylis);return et})(Z,ge),V=hi(_e,Re);return D&&(V+=" "+D),ge.className&&(V+=" "+ge.className),E[Td(Se)&&!Gb.has(Se)?"class":"className"]=V,se&&(E.ref=se),x.createElement(Se,E)})(z,Y,he)}K.displayName=b;var z=Aa.forwardRef(K);return z.attrs=k,z.componentStyle=Q,z.displayName=b,z.shouldForwardProp=N,z.foldedComponentIds=s?hi(l.foldedComponentIds,l.styledComponentId):"",z.styledComponentId=S,z.target=s?l.target:a,Object.defineProperty(z,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Y){this._foldedDefaultProps=s?(function(he){for(var ue=[],H=1;H<arguments.length;H++)ue[H-1]=arguments[H];for(var se=0,W=ue;se<W.length;se++)Jd(he,W[se],!0);return he})({},l.defaultProps,Y):Y}}),Uh(z,function(){return".".concat(z.styledComponentId)}),c&&Qb(z,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),z}function Hv(a,n){for(var r=[a[0]],s=0,l=n.length;s<l;s+=1)r.push(n[s],a[s+1]);return r}var Vv=function(a){return Object.assign(a,{isCss:!0})};function Ih(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(ps(a)||Mo(a))return Vv(gi(Hv(Vc,Oc([a],n,!0))));var s=a;return n.length===0&&s.length===1&&typeof s[0]=="string"?gi(s):Vv(gi(Hv(s,n)))}function eh(a,n,r){if(r===void 0&&(r=hs),!n)throw Lo(1,n);var s=function(l){for(var c=[],f=1;f<arguments.length;f++)c[f-1]=arguments[f];return a(n,r,Ih.apply(void 0,Oc([l],c,!1)))};return s.attrs=function(l){return eh(a,n,qn(qn({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return eh(a,n,qn(qn({},r),l))},s}var i1=function(a){return eh(A2,a)},_n=i1;Gb.forEach(function(a){_n[a]=i1(a)});function vi(){return vi=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},vi.apply(null,arguments)}function _2(a,n){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(n.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function $h(a,n){if(a==null)return{};var r,s,l=_2(a,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function D2(a){var n=a?.createRoot,r=new WeakMap;function s(f){var h=r.get(f);if(h)return h;var p=document.createElement("span");return f.appendChild(p),r.set(f,p),p}function l(f){var h=r.get(f);h&&(h.remove(),r.delete(f))}if(n){var c=new WeakMap;return{mount:function(h,p){var y,v=s(p),b=c.get(v);return b||(b=n(v),c.set(v,b)),b.render(h),(y=v.firstElementChild)!==null&&y!==void 0?y:v},unmount:function(h){var p=s(h),y=c.get(p);y&&(y.unmount(),c.delete(p)),l(h)}}}return{mount:function(h,p){var y=s(p);if("render"in Wg&&typeof qr.render=="function"){var v=qr.render(h,y);return v||y}throw new Error("ReactDOM.render is not available")},unmount:function(h){var p=s(h);if("unmountComponentAtNode"in Wg&&typeof qr.unmountComponentAtNode=="function")qr.unmountComponentAtNode(p);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(h)}}}function M2(a){var n=a.children,r=a.rendered;return x.useEffect(function(){r()}),n}function R2(){var a=x.useRef(!1);return x.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){qr.flushSync(r)}):r()}}}var s1=x.createContext({start:null,end:null,path:null});function z2(a){var n=a.children,r=x.useState(null),s=Mn(r,2),l=s[0],c=s[1],f=x.useState(null),h=Mn(f,2),p=h[0],y=h[1],v=x.useState(null),b=Mn(v,2),S=b[0],k=b[1],N="x"in a.start?a.start:l,P="x"in a.end?a.end:p,I=R2();return x.useEffect(function(){var Q=typeof a.start=="function"&&a.start(function(z){I.apply(function(){c(z)})}),K=typeof a.end=="function"&&a.end(function(z){I.apply(function(){y(z)})});return function(){Q&&Q(),K&&K()}},[]),x.useEffect(function(){N&&P&&a.path(N,P).then(function(Q){I.apply(function(){k(Q)})})},[N,P]),x.createElement(s1.Provider,{value:{start:N,end:P,path:S}},n)}function o1(){return x.useContext(s1)}var qv,Yv,L2=_n.svg(qv||(qv=En([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),B2=_n.path(Yv||(Yv=En([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function l1(a){var n=o1(),r=n.path;return r?x.createElement(L2,{"data-testid":"connection"},x.createElement(B2,{styles:a.styles,d:r})):null}function U2(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=I2(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,c=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw c}}}}function I2(a,n){if(a){if(typeof a=="string")return Gv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gv(a,n):void 0}}function Gv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function $2(a){for(var n=new a.constructor(a.type),r=n;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=U2(s),c;try{for(l.s();!(c=l.n()).done;){var f=c.value,h=n[f];typeof h!="function"&&Object.defineProperty(n,f,{value:a[f]})}}catch(p){l.e(p)}finally{l.f()}}return n}var H2="__reactContainer$";function V2(a){for(var n=a;n;){if(n._reactRootContainer||Object.keys(n).some(function(r){return r.startsWith(H2)}))return n;n=n.parentElement}}function Pv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Fv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Pv(Object(r),!0).forEach(function(s){Le(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Pv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function c1(a,n){return{start:function(s){var l=Fv({},n(s));function c(h){var p=Fv({},n(h)),y=p.x-l.x,v=p.y-l.y;l=p,a(y,v)}function f(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f)}}}function q2(a,n){x.useEffect(function(){var r=function(c){if(!n){var f=V2(c.target),h=x.version.startsWith("16")?document:f;h&&(c.stopPropagation(),h.dispatchEvent($2(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,n])}var Zv,Y2=_n.input(Zv||(Zv=En([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function th(a){var n=x.useState(a.data.value),r=Mn(n,2),s=r[0],l=r[1],c=x.useRef(null);return q2(c),x.useEffect(function(){l(a.data.value)},[a.data.value]),x.createElement(Y2,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(h){var p=a.data.type==="number"?+h.target.value:h.target.value;l(p),a.data.setValue(p)},styles:a.styles})}var nh="rgba(110,136,255,0.8)",u1="#ffd92c",Ba=24,dr=6,f1="#96b38a",d1=180,G2=Object.freeze({__proto__:null,$nodecolor:nh,$nodecolorselected:u1,$socketsize:Ba,$socketmargin:dr,$socketcolor:f1,$nodewidth:d1}),P2=["init","unmount"];function Hh(a){var n=a.init,r=a.unmount,s=$h(a,P2),l=x.useRef(null);return x.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),x.useEffect(function(){l.current&&n(l.current)}),x.createElement("span",vi({},s,{ref:l}))}var F2=["name","emit","payload"];function ah(a){var n=a.name,r=a.emit,s=a.payload,l=$h(a,F2);return x.createElement(Hh,vi({},l,{className:n,init:function(f){r({type:"render",data:{type:"control",element:f,payload:s}})},unmount:function(f){r({type:"unmount",data:{element:f}})}}))}var Z2=["name","emit","nodeId","side","socketKey","payload"];function rh(a){var n=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,f=a.payload,h=$h(a,Z2);return x.createElement(Hh,vi({},h,{className:n,init:function(y){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:y,payload:f}})},unmount:function(y){r({type:"unmount",data:{element:y}})}}))}var Xv,Kv,h1=_n.div(Xv||(Xv=En([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),nh,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(d1,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},nh,function(a){return a.selected&&Ih(Kv||(Kv=En([`
        background: `,`;
        border-color: #e3c000;
    `])),u1)},Ba/2+dr,Ba/2+dr,dr,Ba,Ba+2*dr,dr,Ba/2+dr,function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function Nd(a){a.sort(function(n,r){var s,l,c=((s=n[1])===null||s===void 0?void 0:s.index)||0,f=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-f})}function p1(a){var n=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,f=c.id,h=c.label,p=c.width,y=c.height;return Nd(n),Nd(r),Nd(s),x.createElement(h1,{selected:l,width:p,height:y,styles:a.styles,"data-testid":"node"},x.createElement("div",{className:"title","data-testid":"title"},h),r.map(function(v){var b=Mn(v,2),S=b[0],k=b[1];return k&&x.createElement("div",{className:"output",key:S,"data-testid":"output-".concat(S)},x.createElement("div",{className:"output-title","data-testid":"output-title"},k.label),x.createElement(rh,{name:"output-socket",side:"output",socketKey:S,nodeId:f,emit:a.emit,payload:k.socket,"data-testid":"output-socket"}))}),s.map(function(v){var b=Mn(v,2),S=b[0],k=b[1];return k?x.createElement(ah,{key:S,name:"control",emit:a.emit,payload:k,"data-testid":"control-".concat(S)}):null}),n.map(function(v){var b=Mn(v,2),S=b[0],k=b[1];return k&&x.createElement("div",{className:"input",key:S,"data-testid":"input-".concat(S)},x.createElement(rh,{name:"input-socket",side:"input",socketKey:S,nodeId:f,emit:a.emit,payload:k.socket,"data-testid":"input-socket"}),k&&(!k.control||!k.showControl)&&x.createElement("div",{className:"input-title","data-testid":"input-title"},k.label),k.control&&k.showControl&&x.createElement(ah,{key:S,name:"input-control",emit:a.emit,payload:k.control,"data-testid":"input-control"}))}))}var Qv,Jv,m1=_n.div(Qv||(Qv=En([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),Ba/2,Ba,Ba,f1),X2=_n.div(Jv||(Jv=En([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(Ba+dr*2)/2,dr,m1);function y1(a){return x.createElement(X2,null,x.createElement(m1,{title:a.data.name}))}function K2(a){var n=typeof a?.socketPositionWatcher>"u"?jk():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,f=r.control;return{attach:function(p){n.attach(p)},render:function(p,y){if(p.data.type==="node"){var v=y.parentScope(),b=s?s(p.data):p1;return b&&x.createElement(b,{data:p.data.payload,emit:function(he){return void v.emit(he)}})}else if(p.data.type==="connection"){var S=l?l(p.data):l1,k=p.data.payload,N=k.sourceOutput,P=k.targetInput,I=k.source,Q=k.target;return S&&x.createElement(z2,{start:p.data.start||function(Y){return n.listen(I,"output",N,Y)},end:p.data.end||function(Y){return n.listen(Q,"input",P,Y)},path:(function(){var Y=at(we.mark(function he(ue,H){var se,W,Z,fe,_e;return we.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=1,y.emit({type:"connectionpath",data:{payload:k,points:[ue,H]}});case 1:if(se=Re.sent,se){Re.next=2;break}return Re.abrupt("return","");case 2:if(W=se.data,Z=W.path,fe=W.points,_e=.3,!(!Z&&fe.length!==2)){Re.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(Z){Re.next=4;break}return Re.abrupt("return",k.isLoop?xk(fe,_e,120):Sk(fe,_e));case 4:return Re.abrupt("return",Z);case 5:case"end":return Re.stop()}},he)}));return function(he,ue){return Y.apply(this,arguments)}})()},x.createElement(S,{data:p.data.payload}))}else if(p.data.type==="socket"){var K=c?c(p.data):y1;return K&&p.data.payload&&x.createElement(K,{data:p.data.payload})}else if(p.data.type==="control"){var z=f&&p.data.payload?f(p.data):p.data.payload instanceof Gt.InputControl?th:null;return z&&x.createElement(z,{data:p.data.payload})}}}}var Q2=Object.freeze({__proto__:null,vars:G2,setup:K2,Connection:l1,useConnection:o1,Control:th,InputControl:th,Node:p1,NodeStyles:h1,RefControl:ah,RefSocket:rh,Socket:y1});function g1(a,n){var r=x.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},n)};return x.useEffect(function(){return s},[]),[l,s]}var J2="rgba(110,136,255,0.8)",W2="rgba(130, 153, 255, 0.8)",eC="rgba(69, 103, 255, 0.8)",rc="5px",ih=120,Wv,Vh=_n.div(Wv||(Wv=En([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),eC,J2,rc,rc,rc,rc,W2),e0,t0,n0,v1=_n(Vh)(e0||(e0=En([`
    `,`
`])),function(a){return a.hasSubitems&&Ih(t0||(t0=En([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),b1=_n.div(n0||(n0=En([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),ih);function w1(a){var n,r,s,l,c=x.useState(!1),f=Mn(c,2),h=f[0],p=f[1],y=x.useCallback(function(){p(!1)},[p]),v=g1(y,a.delay),b=Mn(v,2),S=b[0],k=b[1],N=((n=a.components)===null||n===void 0||(r=n.item)===null||r===void 0?void 0:r.call(n,a.data))||v1,P=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||b1;return x.createElement(N,{onClick:function(Q){Q.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(Q){Q.stopPropagation()},onPointerOver:function(){k(),p(!0)},onPointerLeave:function(){S&&S()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&h&&x.createElement(P,null,a.data.subitems.map(function(I){return x.createElement(w1,{key:I.key,data:I,delay:a.delay,hide:a.hide,components:a.components},I.label)})))}var a0,S1=_n.input(a0||(a0=En([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function tC(a){var n=a.component||S1;return x.createElement(n,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var r0,x1=_n.div(r0||(r0=En([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),ih,ih/2);function nC(a){var n,r,s,l,c,f,h=g1(a.onHide,a.delay),p=Mn(h,2),y=p[0],v=p[1],b=x.useState(""),S=Mn(b,2),k=S[0],N=S[1],P=new RegExp(k,"i"),I=a.items.filter(function(z){return z.label.match(P)}),Q=((n=a.components)===null||n===void 0||(r=n.main)===null||r===void 0?void 0:r.call(n))||x1,K=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||Vh;return x.createElement(Q,{onMouseOver:function(){v()},onMouseLeave:function(){y?.()},onWheel:function(Y){Y.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&x.createElement(K,null,x.createElement(tC,{value:k,onChange:N,component:(c=a.components)===null||c===void 0||(f=c.search)===null||f===void 0?void 0:f.call(c)})),I.map(function(z){return x.createElement(w1,{key:z.key,data:z,delay:a.delay,hide:a.onHide,components:a.components},z.label)}))}function aC(a){var n=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return x.createElement(nC,{items:s.data.items,delay:n,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var rC=Object.freeze({__proto__:null,setup:aC,Item:v1,Subitems:b1,Menu:x1,Search:S1,Common:Vh}),ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iC=typeof ic=="object"&&ic&&ic.Object===Object&&ic,sC=typeof self=="object"&&self&&self.Object===Object&&self;iC||sC||Function("return this")();function oC(){const a=x.useRef(!1);return x.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),x.useCallback(()=>a.current,[])}var i0={width:void 0,height:void 0};function lC(a){const{ref:n,box:r="content-box"}=a,[{width:s,height:l},c]=x.useState(i0),f=oC(),h=x.useRef({...i0}),p=x.useRef(void 0);return p.current=a.onResize,x.useEffect(()=>{if(!n.current||typeof window>"u"||!("ResizeObserver"in window))return;const y=new ResizeObserver(([v])=>{const b=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",S=s0(v,b,"inlineSize"),k=s0(v,b,"blockSize");if(h.current.width!==S||h.current.height!==k){const P={width:S,height:k};h.current.width=S,h.current.height=k,p.current?p.current(P):f()&&c(P)}});return y.observe(n.current,{box:r}),()=>{y.disconnect()}},[r,n,f]),{width:s,height:l}}function s0(a,n,r){return a[n]?Array.isArray(a[n])?a[n][0][r]:a[n][r]:n==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function Ua(a){return"".concat(a,"px")}var o0,cC=_n.div(o0||(o0=En([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function uC(a){return x.createElement(cC,{style:{left:Ua(a.left),top:Ua(a.top),width:Ua(a.width),height:Ua(a.height)},"data-testid":"minimap-node"})}var l0,fC=_n.div(l0||(l0=En([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function dC(a){var n=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=c1(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return x.createElement(fC,{onPointerDown:s.start,style:{left:Ua(n(a.left)),top:Ua(n(a.top)),width:Ua(n(a.width)),height:Ua(n(a.height))},"data-testid":"minimap-viewport"})}var c0,hC=_n.div(c0||(c0=En([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function pC(a){var n,r=x.useRef(null),s=lC({ref:r}),l=s.width,c=l===void 0?0:l,f=((n=r.current)===null||n===void 0?void 0:n.clientWidth)||c,h=x.useCallback(function(p){return p*f},[f]);return x.createElement(hC,{size:a.size,style:{width:Ua(a.size*a.ratio),height:Ua(a.size)},onPointerDown:function(y){y.stopPropagation(),y.preventDefault()},onDoubleClick:function(y){if(y.stopPropagation(),y.preventDefault(),!!r.current){var v=r.current.getBoundingClientRect(),b=(y.clientX-v.left)/(a.size*a.ratio),S=(y.clientY-v.top)/(a.size*a.ratio);a.point(b,S)}},ref:r,"data-testid":"minimap"},f?a.nodes.map(function(p,y){return x.createElement(uC,{key:y,left:h(p.left),top:h(p.top),width:h(p.width),height:h(p.height)})}):null,x.createElement(dC,vi({},a.viewport,{start:a.start,containerWidth:f,translate:a.translate})))}function mC(a){return{render:function(r){if(r.data.type==="minimap")return x.createElement(pC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var yC=Object.freeze({__proto__:null,setup:mC}),u0,No=20,gC=_n.div(u0||(u0=En([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),No,No,function(a){return a.selected?"#ffd92c":"steelblue"},No);function vC(a){var n=c1(function(c,f){a.translate(c,f)},a.pointer),r=a.position,s=r.x,l=r.y;return x.createElement(gC,{onPointerDown:function(f){f.stopPropagation(),f.preventDefault(),n.start(f),a.pointerdown()},onContextMenu:function(f){f.stopPropagation(),f.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-No/2,"px"),left:"".concat(s-No/2,"px")},"data-testid":"pin"})}function bC(a){function n(r,s){return x.createElement(x.Fragment,null,r.pins.map(function(l){return x.createElement(vC,vi({},l,{key:l.id,contextMenu:function(){var f;a==null||(f=a.contextMenu)===null||f===void 0||f.call(a,l.id)},translate:function(f,h){var p;a==null||(p=a.translate)===null||p===void 0||p.call(a,l.id,f,h)},pointerdown:function(){var f;a==null||(f=a.pointerdown)===null||f===void 0||f.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,f=l.parentScope(zo);if(c.type==="reroute-pins")return n(c.data,function(){return f.area.pointer})}}}var wC=Object.freeze({__proto__:null,setup:bC}),jd=Object.freeze({__proto__:null,classic:Q2,contextMenu:rC,minimap:yC,reroute:wC});function SC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=xC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,c=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw c}}}}function xC(a,n){if(a){if(typeof a=="string")return f0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f0(a,n):void 0}}function f0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function d0(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function sc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?d0(Object(r),!0).forEach(function(s){Le(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):d0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function EC(a,n,r){return n=Dt(n),Va(a,E1()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function E1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E1=function(){return!!a})()}function kC(a,n,r,s){var l=Do(Dt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var CC=(function(a){function n(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var f=l[0];return ct(this,n),r=EC(this,n,["react-render"]),Le(r,"presets",[]),r.renderer=D2({createRoot:f?.createRoot}),r.addPipe(function(h){if(!h||xn(h)!=="object"||!("type"in h))return h;if(h.type==="unmount")r.unmount(h.data.element);else if(h.type==="render"){if("filled"in h.data&&h.data.filled)return h;if(r.mount(h.data.element,h))return sc(sc({},h),{},{data:sc(sc({},h.data),{},{filled:!0})})}return h}),r}return Yn(n,a),ut(n,[{key:"setParent",value:function(s){var l=this;kC(n,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),f=SC(this.presets),h;try{for(f.s();!(h=f.n()).done;){var p=h.value,y=p.render(l,this);if(y){var v=x.createElement(M2,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},y);return this.renderer.mount(v,s),!0}}}catch(b){f.e(b)}finally{f.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(ys);function TC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function k1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k1=function(){return!!a})()}function OC(a,n,r){if(k1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,n);var l=new(a.bind.apply(a,s));return r&&_o(l,r.prototype),l}function sh(a){var n=typeof Map=="function"?new Map:void 0;return sh=function(s){if(s===null||!TC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(s))return n.get(s);n.set(s,l)}function l(){return OC(s,arguments,Dt(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),_o(l,s)},sh(a)}function NC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=jC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,f=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return f=y.done,y},e:function(y){h=!0,c=y},f:function(){try{f||r.return==null||r.return()}finally{if(h)throw c}}}}function jC(a,n){if(a){if(typeof a=="string")return h0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h0(a,n):void 0}}function h0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}var AC=(function(){function a(n){ct(this,a),Le(this,"setups",new Map),this.editor=n}return ut(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var n=at(we.mark(function s(l){var c=this,f,h,p,y,v,b,S,k,N,P,I,Q;return we.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(f=this.setups.get(l),f){z.next=3;break}throw new Error("node is not initialized");case 3:return h=f.inputs(),p=this.editor.getConnections().filter(function(Y){return Y.target===l&&h.includes(Y.targetInput)}),y={},z.next=8,Promise.all(p.map((function(){var Y=at(we.mark(function he(ue){return we.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.t0=ue,se.next=3,c.fetch(ue.source);case 3:return se.t1=se.sent,se.abrupt("return",{c:se.t0,sourceData:se.t1});case 5:case"end":return se.stop()}},he)}));return function(he){return Y.apply(this,arguments)}})()));case 8:v=z.sent,b=NC(v);try{for(b.s();!(S=b.n()).done;)k=S.value,N=k.c,P=k.sourceData,I=y[N.targetInput]?y[N.targetInput]:[],Q=y,Q[N.targetInput]=[].concat(gs(I),[P[N.sourceOutput]])}catch(Y){b.e(Y)}finally{b.f()}return z.abrupt("return",y);case 12:case"end":return z.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var n=at(we.mark(function s(l){var c=this,f,h,p,y;return we.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(f=this.setups.get(l),f){b.next=3;break}throw new Error("node is not initialized");case 3:return h=f.outputs(),b.next=6,f.data(function(){return c.fetchInputs(l)});case 6:if(p=b.sent,y=Object.keys(p),h.every(function(S){return y.includes(S)})){b.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(h.join('", "'),'". Got "').concat(y.join('", "'),'"'));case 10:return b.abrupt("return",p);case 11:case"end":return b.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()}])})(),_C=(function(){function a(n){ct(this,a),Le(this,"cache",new Map),this.onDelete=n}return ut(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function DC(a,n,r){return n=Dt(n),Va(a,C1()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function C1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C1=function(){return!!a})()}var p0=(function(a){function n(){return ct(this,n),DC(this,n,["cancelled"])}return Yn(n,a),ut(n)})(sh(Error));function MC(){var a=!1;function n(p){if(a)throw new p0;return p}for(var r,s=new Promise(function(p,y){r=y,p()}),l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];var h=c.reduce(function(p,y){var v=p.then(y).then(n);return v},s);return h.cancel=function(){a||r(new p0),a=!0},h}function RC(a,n,r){return n=Dt(n),Va(a,T1()?Reflect.construct(n,r||[],Dt(a).constructor):n.apply(a,r))}function T1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T1=function(){return!!a})()}function zC(a,n,r,s){var l=Do(Dt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var LC=(function(a){function n(r){var s;return ct(this,n),s=RC(this,n,["dataflow-engine"]),Le(s,"cache",new _C(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return Yn(n,a),ut(n,[{key:"setParent",value:function(s){zC(n,"setParent",this)([s]),this.editor=this.parentScope(Fr),this.dataflow=new AC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var f=at(we.mark(function p(y){var v,b;return we.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(v=l.cache.get(s.id),!v){k.next=3;break}return k.abrupt("return",v);case 3:return b=MC(function(){return y()},function(N){return s.data(N)}),l.cache.add(s.id,b),k.abrupt("return",b);case 6:case"end":return k.stop()}},p)}));function h(p){return f.apply(this,arguments)}return h})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var f=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(h){return h.source===s&&f.includes(h.sourceOutput)}).forEach(function(h){l.reset(h.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=at(we.mark(function l(c){var f;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=xn(c)==="object"?c.id:c,p.abrupt("return",this.getDataflow().fetchInputs(f));case 2:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=at(we.mark(function l(c){var f;return we.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f=xn(c)==="object"?c.id:c,p.abrupt("return",this.getDataflow().fetch(f));case 2:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(ys);const BC=!1,qh=(...a)=>BC,m0=Gt.Socket.canConnect;Gt.Socket.canConnect=function(a,n){return qh(`[Socket Check] ${a.name} <-> ${n.name}`),m0&&m0(a,n)||a.name==="any"||n.name==="any"?!0:a.name===n.name};Gt.Socket.prototype.canConnectTo=function(a){return qh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Gt.Socket.canConnect(this,a)};const O1={boolean:new Gt.Socket("boolean"),number:new Gt.Socket("number"),object:new Gt.Socket("object"),lightInfo:new Gt.Socket("light_info"),any:new Gt.Socket("any")};Object.values(O1).forEach(a=>{a.canConnectTo=function(n){return qh(`[Socket Instance Direct] ${this.name} -> ${n.name}`),this.name===n.name||this.name==="any"||n.name==="any"}});let vo=null;function qc(){if(vo!==null)return vo;const n=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return n?vo=n[1]:vo="",vo}function Vn(a){const n=qc(),r=a.startsWith("/")?a:"/"+a;return n+r}qc();const pi="t2app-pin",_c="t2app-pin-remember",N1=(a,n)=>{try{return a.getItem(n)}catch{return null}},oc=(a,n,r)=>{try{return a.setItem(n,r),!0}catch{return!1}},jo=(a,n)=>{try{return a.removeItem(n),!0}catch{return!1}},Dc=()=>N1(localStorage,_c)==="true",os=()=>{const n=Dc()?localStorage:sessionStorage;return(N1(n,pi)||"").trim()||null},j1=()=>{jo(sessionStorage,pi),jo(localStorage,pi),jo(localStorage,_c),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},y0=(a,{remember:n}={})=>{const r=(a||"").toString().trim(),s=typeof n=="boolean"?n:Dc();if(!r){j1(),typeof n=="boolean"&&oc(localStorage,_c,n?"true":"false");return}oc(localStorage,_c,s?"true":"false"),s?(oc(localStorage,pi,r),jo(sessionStorage,pi)):(oc(sessionStorage,pi,r),jo(localStorage,pi)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},rs=async(a,n={})=>{const r=typeof a=="string"?Vn(a):a;return fetch(r,n)},Hn=async(a,n={})=>{const r=os(),s=typeof a=="string"?Vn(a):a;if(!r)return fetch(s,n);const l=new Headers(n.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...n,headers:l})},g0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function UC(){const[a,n]=x.useState([]),[r,s]=x.useState(!1),[l,c]=x.useState(null),[f,h]=x.useState(null),[p,y]=x.useState(5e3),[v,b]=x.useState(null),S=x.useCallback(async()=>{s(!0),c(null);try{const Q=await rs("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:p})});if(!Q.ok){const z=await Q.json();throw new Error(z.error||`Scan failed (${Q.status})`)}const K=await Q.json();n(K.devices||[]),h(new Date)}catch(Q){console.error("[Discovery] Scan error:",Q),c(Q.message)}finally{s(!1)}},[p]),k=Q=>g0[Q]||g0.generic,N=Q=>Q?new Date(Q).toLocaleTimeString():"",I=(Q=>{const K={};for(const z of Q){const Y=z.type||"generic";K[Y]||(K[Y]=[]),K[Y].push(z)}return K})(a);return m.jsxs("div",{className:"discovery-panel",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),m.jsxs("select",{value:p,onChange:Q=>y(Number(Q.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[m.jsx("option",{value:3e3,children:"3 seconds"}),m.jsx("option",{value:5e3,children:"5 seconds"}),m.jsx("option",{value:1e4,children:"10 seconds"}),m.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),m.jsx("button",{onClick:S,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):m.jsx(m.Fragment,{children:" Scan Network"})})]}),l&&m.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),f&&m.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",f.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&f&&m.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[m.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),m.jsx("div",{children:"No devices found on your network."}),m.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(I).map(([Q,K])=>{const z=k(Q);return m.jsxs("div",{style:{marginBottom:"16px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[m.jsx("span",{style:{fontSize:"16px"},children:z.icon}),m.jsx("span",{style:{color:z.color,fontSize:"13px",fontWeight:500},children:z.label}),m.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:K.length})]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:K.map(Y=>m.jsxs("div",{style:{background:v===Y.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>b(v===Y.id?null:Y.id),children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:Y.name}),m.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[Y.ip,":",Y.port]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Y.configured?m.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):m.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),m.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:v===Y.id?"":""})]})]}),v===Y.id&&m.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[m.jsx("span",{children:"Host:"}),m.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:Y.host||"N/A"}),m.jsx("span",{children:"Source:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:Y.source==="mdns"?"mDNS/Bonjour":Y.source==="udp"?"UDP Broadcast":Y.source}),m.jsx("span",{children:"Discovered:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:N(Y.discoveredAt)}),Y.capabilities&&Y.capabilities.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:"Capabilities:"}),m.jsx("span",{style:{color:"#5fb3b3"},children:Y.capabilities.join(", ")})]}),Y.model&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:"Model:"}),m.jsx("span",{style:{color:"#c5cdd3"},children:Y.model})]})]}),m.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[m.jsx("button",{onClick:he=>{he.stopPropagation(),window.open(`http://${Y.ip}:${Y.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),m.jsx("button",{onClick:he=>{he.stopPropagation(),navigator.clipboard.writeText(Y.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},Y.id))})]},Q)}),m.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const lc=[{key:"primary",label:"Primary Accent Color",type:"color",default:"#5fb3b3"},{key:"background",label:"Node Background",type:"color",default:"#1e2428"},{key:"surface",label:"Node Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text Color",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"},{key:"success",label:"Success Color",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning Color",type:"color",default:"#d4a054"},{key:"error",label:"Error Color",type:"color",default:"#c75f5f"},{key:"borderOpacity",label:"Border Opacity (%)",type:"range",min:0,max:100,default:25}],IC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],v0=a=>{try{const n=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},b0=a=>{try{const n=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function $C({isOpen:a,onClose:n}){const[r,s]=x.useState({}),[l,c]=x.useState(!0),[f,h]=x.useState(!1),[p,y]=x.useState(null),[v,b]=x.useState(null),[S,k]=x.useState({}),[N,P]=x.useState({}),[I,Q]=x.useState({}),[K,z]=x.useState({}),Y=x.useRef(null),[he,ue]=x.useState(""),[H,se]=x.useState(()=>Dc()),[W,Z]=x.useState(()=>!!os()),[fe,_e]=x.useState(!1),[Re,Ve]=x.useState(()=>{try{const A=localStorage.getItem("t2theme-overrides"),R=A?JSON.parse(A):{},le={};return lc.forEach(be=>{le[be.key]=be.default}),{...le,...R}}catch{const A={};return lc.forEach(R=>{A[R.key]=R.default}),A}}),[Ye,T]=x.useState(!1),q={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[ce,ge]=x.useState(()=>{try{const A=localStorage.getItem("t2category-overrides"),R=A?JSON.parse(A):{},le={};for(const[be,Ae]of Object.entries(q))le[be]={...Ae,...R[be]||{}};return le}catch{return{...q}}}),[Se,E]=x.useState(!1),B={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},D={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[V,me]=x.useState(()=>{try{const A=localStorage.getItem("t2socket-colors"),R=A?JSON.parse(A):{},le={};for(const[be,Ae]of Object.entries(B))le[be]={...Ae,...R[be]||{}};return le}catch{return{...B}}}),[Ne,Ie]=x.useState(!1),[et,Je]=x.useState(!1),[It,Zt]=x.useState(null),[$t,Ke]=x.useState(!1),[pt,Ht]=x.useState(!1);x.useEffect(()=>{a&&(dn(),P({Security:!0,"Home Assistant":!0}),Q({}),se(Dc()),Z(!!os()),ue(""))},[a]);const dn=async()=>{c(!0),y(null);try{const A=await Hn("/api/settings");if(!A.ok)throw new Error("Failed to fetch settings");const le=(await A.json()).settings||{};s(le);try{const be=await Hn("/api/config");if(be.ok){const Ae=await be.json();if(Ae.success){Ke(Ae.isAddon||!1),Ht(!0);const yt=!le.LOCATION_CITY,Gn=!le.LOCATION_LATITUDE,Pe=!le.LOCATION_LONGITUDE,Mt=!le.LOCATION_TIMEZONE;(yt||Gn||Pe||Mt)&&(s(Ot=>({...Ot,...yt&&Ae.locationName?{LOCATION_CITY:Ae.locationName}:{},...Gn&&Ae.latitude?{LOCATION_LATITUDE:String(Ae.latitude)}:{},...Pe&&Ae.longitude?{LOCATION_LONGITUDE:String(Ae.longitude)}:{},...Mt&&Ae.timezone?{LOCATION_TIMEZONE:Ae.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(be){console.log("[Settings] Could not fetch HA config for location auto-fill:",be.message)}}catch(A){y("Failed to load settings: "+A.message)}finally{c(!1)}},qa=async()=>{h(!0),y(null),b(null);try{const A=await Hn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!A.ok){const R=await A.json();throw new Error(R.error||"Failed to save settings")}b("Settings saved! Some changes may require a server restart."),setTimeout(()=>b(null),5e3)}catch(A){y("Failed to save: "+A.message)}finally{h(!1)}},X=(A,R)=>{s(le=>({...le,[A]:R}))},ie=async()=>{const A=r.LOCATION_CITY;if(!A||A.trim().length<2){Zt("Please enter a city name first");return}Je(!0),Zt(null);try{const R=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(A)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!R.ok)throw new Error("Geocoding service unavailable");const le=await R.json();if(le.length===0){Zt(`Could not find "${A}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const be=le[0],Ae=parseFloat(be.lat).toFixed(4),yt=parseFloat(be.lon).toFixed(4),Gn=be.address?[be.address.city||be.address.town||be.address.village||be.name,be.address.state,be.address.country].filter(Boolean).join(", "):be.display_name.split(",").slice(0,3).join(",");let Pe="UTC";const Mt=be.address?.state?.toLowerCase()||"",Ot=be.address?.country?.toLowerCase()||"";if(Ot.includes("portugal"))Pe="Europe/Lisbon";else if(Ot.includes("spain"))Pe="Europe/Madrid";else if(Ot.includes("france"))Pe="Europe/Paris";else if(Ot.includes("germany"))Pe="Europe/Berlin";else if(Ot.includes("italy"))Pe="Europe/Rome";else if(Ot.includes("united kingdom")||Ot.includes("ireland"))Pe="Europe/London";else if(Ot.includes("netherlands"))Pe="Europe/Amsterdam";else if(Ot.includes("belgium"))Pe="Europe/Brussels";else if(Ot.includes("australia"))Pe="Australia/Sydney";else if(Ot.includes("japan"))Pe="Asia/Tokyo";else if(Ot.includes("china"))Pe="Asia/Shanghai";else if(Ot.includes("india"))Pe="Asia/Kolkata";else if(Ot.includes("brazil"))Pe="America/Sao_Paulo";else if(Ot.includes("canada"))Mt.includes("british columbia")?Pe="America/Vancouver":Mt.includes("alberta")?Pe="America/Edmonton":Mt.includes("saskatchewan")?Pe="America/Regina":Mt.includes("manitoba")?Pe="America/Winnipeg":Mt.includes("ontario")?Pe="America/Toronto":Mt.includes("quebec")?Pe="America/Montreal":Pe="America/Toronto";else if(Ot.includes("united states")||Ot.includes("usa"))Mt.includes("hawaii")?Pe="Pacific/Honolulu":Mt.includes("alaska")?Pe="America/Anchorage":["california","nevada","oregon","washington"].some(kt=>Mt.includes(kt))?Pe="America/Los_Angeles":["arizona"].some(kt=>Mt.includes(kt))?Pe="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(kt=>Mt.includes(kt))?Pe="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(kt=>Mt.includes(kt))?Pe="America/Chicago":Pe="America/New_York";else{const kt=parseFloat(yt);kt>=-125&&kt<-115?Pe="America/Los_Angeles":kt>=-115&&kt<-102?Pe="America/Denver":kt>=-102&&kt<-87?Pe="America/Chicago":kt>=-87&&kt<-67?Pe="America/New_York":kt>=-10&&kt<3?Pe="Europe/London":kt>=3&&kt<15?Pe="Europe/Paris":kt>=15&&kt<30&&(Pe="Europe/Berlin")}s(kt=>({...kt,LOCATION_CITY:Gn,LOCATION_LATITUDE:Ae,LOCATION_LONGITUDE:yt,LOCATION_TIMEZONE:Pe})),b(`Found: ${Gn} (${Ae}, ${yt})`),setTimeout(()=>b(null),5e3)}catch(R){Zt("Search failed: "+R.message)}finally{Je(!1)}},ee=(A,R)=>{Ve(le=>({...le,[A]:R})),T(!0)},je=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(Re)),b("Theme saved! Refresh the page to apply changes."),T(!1),setTimeout(()=>b(null),5e3)}catch(A){y("Failed to save theme: "+A.message)}},ve=()=>{const A={};lc.forEach(R=>{A[R.key]=R.default}),Ve(A),localStorage.removeItem("t2theme-overrides"),b("Theme reset to defaults! Refresh the page to apply."),T(!1),setTimeout(()=>b(null),5e3)},re=(A,R,le)=>{ge(be=>({...be,[A]:{...be[A],[R]:le}})),E(!0)},C=A=>{const R=parseInt(A.slice(1,3),16),le=parseInt(A.slice(3,5),16),be=parseInt(A.slice(5,7),16);return`${R}, ${le}, ${be}`},M={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},oe=A=>{const R=document.documentElement;for(const[le,be]of Object.entries(A)){const Ae=M[le];Ae&&(R.style.setProperty(`--node-${Ae}-color`,be.accent),R.style.setProperty(`--node-${Ae}-color-rgb`,C(be.accent)),be.background&&R.style.setProperty(`--node-${Ae}-bg`,be.background))}},de=()=>{try{const A={};for(const[R,le]of Object.entries(ce)){const be=q[R],Ae={};le.accent!==be.accent&&(Ae.accent=le.accent),le.background!==be.background&&(Ae.background=le.background),Object.keys(Ae).length>0&&(A[R]=Ae)}Object.keys(A).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(A)):localStorage.removeItem("t2category-overrides"),oe(ce),b("Category colors applied!"),E(!1),setTimeout(()=>b(null),3e3)}catch(A){y("Failed to save category colors: "+A.message)}},xe=()=>{ge({...q}),localStorage.removeItem("t2category-overrides"),oe(q),b("Category colors reset to defaults!"),E(!1),setTimeout(()=>b(null),3e3)},Oe=(A,R)=>{me(le=>({...le,[A]:{...le[A],color:R}})),Ie(!0)},$e=(A,R=20)=>{const le=parseInt(A.slice(1),16),be=Math.max(0,(le>>16)-Math.round(255*R/100)),Ae=Math.max(0,(le>>8&255)-Math.round(255*R/100)),yt=Math.max(0,(le&255)-Math.round(255*R/100));return`#${(1<<24|be<<16|Ae<<8|yt).toString(16).slice(1)}`},Ze=(A,R=20)=>{const le=parseInt(A.slice(1),16),be=Math.min(255,(le>>16)+Math.round(255*R/100)),Ae=Math.min(255,(le>>8&255)+Math.round(255*R/100)),yt=Math.min(255,(le&255)+Math.round(255*R/100));return`#${(1<<24|be<<16|Ae<<8|yt).toString(16).slice(1)}`},gt=A=>{const R=document.documentElement;for(const[le,be]of Object.entries(A)){const Ae=D[le];Ae&&(R.style.setProperty(`--socket-${Ae}-color`,be.color),R.style.setProperty(`--socket-${Ae}-dark`,$e(be.color,15)),R.style.setProperty(`--socket-${Ae}-border`,Ze(be.color,20)),R.style.setProperty(`--socket-${Ae}-rgb`,C(be.color)))}},Be=()=>{try{const A={};for(const[R,le]of Object.entries(V)){const be=B[R];le.color!==be.color&&(A[R]={color:le.color})}Object.keys(A).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(A)):localStorage.removeItem("t2socket-colors"),gt(V),b("Socket colors applied!"),Ie(!1),setTimeout(()=>b(null),3e3)}catch(A){y("Failed to save socket colors: "+A.message)}},He=()=>{me({...B}),localStorage.removeItem("t2socket-colors"),gt(B),b("Socket colors reset to defaults!"),Ie(!1),setTimeout(()=>b(null),3e3)},De=A=>{P(R=>({...R,[A]:!R[A]}))},rt=A=>{k(R=>({...R,[A]:!R[A]}))},mt=async A=>{z(R=>({...R,[A]:!0})),Q(R=>({...R,[A]:null}));try{const le=await(await Hn("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:A,settings:r})})).json();Q(be=>({...be,[A]:{success:le.success,message:le.message||(le.success?"Connection successful!":"Connection failed"),details:le.details}}))}catch(R){Q(le=>({...le,[A]:{success:!1,message:"Test failed: "+R.message}}))}finally{z(R=>({...R,[A]:!1}))}},Rt=()=>{const A={version:"1.0",timestamp:new Date().toISOString(),settings:r},R=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),le=URL.createObjectURL(R),be=document.createElement("a");be.href=le,be.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(be),be.click(),document.body.removeChild(be),URL.revokeObjectURL(le),b("Settings exported successfully!"),setTimeout(()=>b(null),3e3)},Xt=A=>{const R=A.target.files?.[0];if(!R)return;const le=new FileReader;le.onload=be=>{try{const Ae=JSON.parse(be.target.result);if(!Ae.settings||typeof Ae.settings!="object")throw new Error("Invalid backup file format");s(yt=>({...yt,...Ae.settings})),b(`Imported ${Object.keys(Ae.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>b(null),5e3)}catch(Ae){y("Failed to import backup: "+Ae.message)}},le.readAsText(R),A.target.value=""};return a?Oh.createPortal(m.jsx("div",{className:"settings-modal-overlay",onClick:n,children:m.jsxs("div",{className:"settings-modal",onClick:A=>A.stopPropagation(),children:[m.jsxs("div",{className:"settings-header",children:[m.jsx("h2",{children:" Settings & API Keys"}),m.jsx("button",{className:"settings-close-btn",onClick:n,children:""})]}),m.jsx("div",{className:"settings-content",children:l?m.jsx("div",{className:"settings-loading",children:"Loading settings..."}):m.jsxs(m.Fragment,{children:[p&&m.jsx("div",{className:"settings-error",children:p}),v&&m.jsx("div",{className:"settings-success",children:v}),m.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[m.jsxs("span",{children:[N.Security?"":""," Security (This Device)"]}),W&&m.jsxs("span",{style:{fontSize:"10px",color:H?"#00c896":"#ffaa00"},children:[" ",H?"REMEMBERED":"SESSION"]})]}),N.Security&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),m.jsxs("div",{className:"settings-field",children:[m.jsxs("label",{className:"settings-label",children:["App PIN",m.jsx("button",{className:"settings-show-btn",onClick:()=>_e(A=>!A),type:"button",children:fe?" Hide":" Show"})]}),m.jsx("input",{type:fe?"text":"password",className:"settings-input",value:he,onChange:A=>ue(A.target.value),placeholder:W?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[m.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[m.jsx("input",{type:"checkbox",checked:H,onChange:A=>{const R=A.target.checked;se(R);const le=os();le&&y0(le,{remember:R})}}),"Remember PIN on this device"]}),m.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[m.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const A=he.trim();A&&(y0(A,{remember:H}),Z(!0),ue(""),(async()=>{try{const R=await Hn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:A}})});if(!R.ok){const le=await R.text();throw new Error(le||`HTTP ${R.status}`)}b("PIN saved (server + this device)."),setTimeout(()=>b(null),3e3)}catch{b("PIN saved on this device. Server PIN update failed."),setTimeout(()=>b(null),4e3)}finally{dn()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!he.trim(),children:" Save PIN"}),m.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{j1(),Z(!1),ue(""),se(!1),b("PIN cleared."),setTimeout(()=>b(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!W,children:"Clear"})]})]}),m.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:W?`PIN is saved (${H?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),m.jsxs("div",{className:"settings-backup-section",children:[m.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),m.jsxs("div",{className:"settings-backup-buttons",children:[m.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:Rt,children:" Export Backup"}),m.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>Y.current?.click(),children:" Import Backup"}),m.jsx("input",{ref:Y,type:"file",accept:".json",style:{display:"none"},onChange:Xt})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[m.jsxs("span",{children:[N.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&m.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),N.Performance&&m.jsxs("div",{className:"settings-category-content",children:[m.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",m.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),m.jsx("br",{}),m.jsx("br",{}),"Performance Mode disables:",m.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[m.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),m.jsx("li",{children:"Complex glow shadows"}),m.jsx("li",{children:"Infinite pulse/glow animations"}),m.jsx("li",{children:"Transition effects on nodes"})]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),m.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),m.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[m.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:A=>{window.setPerformanceMode?.(A.target.checked),P(R=>({...R}))},style:{opacity:0,width:0,height:0}}),m.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:m.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),m.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsx("div",{className:"settings-category-header",onClick:()=>De("Discovery"),children:m.jsxs("span",{children:[N.Discovery?"":""," Network Device Discovery"]})}),N.Discovery&&m.jsx("div",{className:"settings-category-content",children:m.jsx(UC,{})})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("Theme"),children:[m.jsxs("span",{children:[N.Theme?"":""," Node Theme Settings"]}),Ye&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.Theme&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Theme settings are stored locally. Refresh the page after saving to apply changes."}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:lc.map(A=>m.jsxs("div",{className:"settings-field",style:{marginBottom:"8px"},children:[m.jsx("label",{className:"settings-label",style:{fontSize:"10px"},children:A.label}),A.type==="color"?m.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("input",{type:"color",value:Re[A.key]||A.default,onChange:R=>ee(A.key,R.target.value),style:{width:"40px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("input",{type:"text",value:Re[A.key]||A.default,onChange:R=>ee(A.key,R.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"11px"}})]}):A.type==="range"?m.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("input",{type:"range",min:A.min,max:A.max,value:Re[A.key]||A.default,onChange:R=>ee(A.key,parseInt(R.target.value)),style:{flex:1}}),m.jsxs("span",{style:{minWidth:"35px",textAlign:"right",color:"#c5cdd3",fontSize:"12px"},children:[Re[A.key]||A.default,"%"]})]}):null]},A.key))}),m.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:Re.background,borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(Re.borderOpacity||25)/100})`},children:[m.jsx("div",{style:{fontSize:"10px",color:Re.textMuted,marginBottom:"8px"},children:"PREVIEW"}),m.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[m.jsx("div",{style:{padding:"8px 12px",background:Re.surface,color:Re.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),m.jsx("div",{style:{padding:"8px 12px",background:Re.surfaceLight,color:Re.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),m.jsx("span",{style:{color:Re.primary},children:"Primary"}),m.jsx("span",{style:{color:Re.success},children:"Success"}),m.jsx("span",{style:{color:Re.warning},children:"Warning"}),m.jsx("span",{style:{color:Re.error},children:"Error"})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:ve,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:je,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Theme"})]})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("CategoryColors"),children:[m.jsxs("span",{children:[N.CategoryColors?"":""," Category Accent Colors"]}),Se&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.CategoryColors&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(ce).map(([A,R])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:R.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${R.accent}55`},children:[m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[m.jsx("input",{type:"color",value:R.accent,onChange:le=>re(A,"accent",le.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[m.jsx("input",{type:"color",value:R.background||"#0a0f14",onChange:le=>re(A,"background",le.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),m.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),m.jsx("div",{style:{flex:1,minWidth:0},children:m.jsxs("div",{style:{fontSize:"11px",color:R.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[R.icon," ",A]})})]},A))}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:xe,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:de,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De("SocketColors"),children:[m.jsxs("span",{children:[N.SocketColors?"":""," Socket Colors"]}),Ne&&m.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.SocketColors&&m.jsxs("div",{className:"settings-category-content",children:[m.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),m.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[m.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx("span",{children:""})," Preview Node"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(V).slice(0,3).map(([A,R])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${R.color}, ${v0(R.color)})`,border:`2px solid ${b0(R.color)}`,boxShadow:`0 0 8px ${R.color}80`}}),m.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:A})]},A))}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(V).slice(3).map(([A,R])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:A}),m.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${R.color}, ${v0(R.color)})`,border:`2px solid ${b0(R.color)}`,boxShadow:`0 0 8px ${R.color}80`}})]},A))})]})]}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(V).map(([A,R])=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${R.color}55`},children:[m.jsx("input",{type:"color",value:R.color,onChange:le=>Oe(A,le.target.value),title:`${A} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsxs("div",{style:{fontSize:"12px",color:R.color,fontWeight:"600"},children:[R.icon," ",A]}),m.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:R.description})]})]},A))}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[m.jsx("button",{className:"settings-btn-small",onClick:He,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),m.jsx("button",{className:"settings-btn-small",onClick:Be,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),IC.map(A=>m.jsxs("div",{className:"settings-category",children:[m.jsxs("div",{className:"settings-category-header",onClick:()=>De(A.category),children:[m.jsxs("span",{children:[N[A.category]?"":"",A.icon," ",A.category]}),A.testable&&N[A.category]&&m.jsx("button",{className:`settings-test-btn ${I[A.testable]?.success?"success":I[A.testable]?.success===!1?"error":""}`,onClick:R=>{R.stopPropagation(),mt(A.testable)},disabled:K[A.testable],children:K[A.testable]?" Testing...":" Test Connection"})]}),N[A.category]&&m.jsxs("div",{className:"settings-category-content",children:[I[A.testable]&&m.jsxs("div",{className:`settings-test-result ${I[A.testable].success?"success":"error"}`,children:[I[A.testable].success?"":""," ",I[A.testable].message,I[A.testable].details&&m.jsx("div",{className:"settings-test-details",children:I[A.testable].details})]}),A.category==="Location"&&m.jsxs("div",{className:"settings-location-search",children:[pt&&$t&&m.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),m.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),m.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:R=>X("LOCATION_CITY",R.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:R=>{R.key==="Enter"&&ie()}}),m.jsx("button",{className:"settings-test-btn",onClick:ie,disabled:et,style:{whiteSpace:"nowrap"},children:et?" Searching...":" Search City"})]}),It&&m.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",It]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[m.jsxs("div",{className:"settings-field",children:[m.jsx("label",{className:"settings-label",children:"Latitude"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:R=>X("LOCATION_LATITUDE",R.target.value),placeholder:"32.7767"})]}),m.jsxs("div",{className:"settings-field",children:[m.jsx("label",{className:"settings-label",children:"Longitude"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:R=>X("LOCATION_LONGITUDE",R.target.value),placeholder:"-96.7970"})]})]}),m.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[m.jsx("label",{className:"settings-label",children:"Timezone"}),m.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:R=>X("LOCATION_TIMEZONE",R.target.value),placeholder:"America/Chicago"}),m.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),A.category!=="Location"&&A.settings.map(R=>m.jsxs("div",{className:"settings-field",children:[m.jsxs("label",{className:"settings-label",children:[R.label,R.isSecret&&m.jsx("button",{className:"settings-show-btn",onClick:()=>rt(R.key),type:"button",children:S[R.key]?" Hide":" Show"})]}),R.type==="select"?m.jsxs("select",{className:"settings-input",value:r[R.key]||"",onChange:le=>X(R.key,le.target.value),children:[m.jsx("option",{value:"",children:"Select..."}),R.options.map(le=>m.jsx("option",{value:le,children:le},le))]}):m.jsx("input",{type:R.isSecret&&!S[R.key]?"password":"text",className:"settings-input",value:r[R.key]||"",onChange:le=>X(R.key,le.target.value),placeholder:R.placeholder}),m.jsx("span",{className:"settings-key-hint",children:R.key})]},R.key))]})]},A.category))]})}),m.jsxs("div",{className:"settings-footer",children:[m.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:n,children:"Cancel"}),m.jsx("button",{className:"settings-btn settings-btn-primary",onClick:qa,disabled:f||l,children:f?"Saving...":" Save Settings"})]})]})}),document.body):null}const HC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function VC({isOpen:a,onClose:n}){if(x.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,n]),!a)return null;const r=s=>{s.target===s.currentTarget&&n()};return Oh.createPortal(m.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:m.jsxs("div",{className:"shortcuts-modal",children:[m.jsxs("div",{className:"shortcuts-modal-header",children:[m.jsx("h2",{children:" Keyboard Shortcuts"}),m.jsx("button",{className:"shortcuts-close-btn",onClick:n,children:" Close"})]}),m.jsx("div",{className:"shortcuts-modal-body",children:HC.map((s,l)=>m.jsxs("div",{className:"shortcuts-section",children:[m.jsx("h3",{children:s.category}),m.jsx("div",{className:"shortcuts-list",children:s.items.map((c,f)=>m.jsxs("div",{className:"shortcut-row",children:[m.jsx("div",{className:"shortcut-keys",children:c.keys.map((h,p)=>m.jsxs(Aa.Fragment,{children:[m.jsx("kbd",{children:h}),p<c.keys.length-1&&m.jsx("span",{className:"key-separator",children:"+"})]},p))}),m.jsx("div",{className:"shortcut-action",children:c.action})]},f))})]},l))}),m.jsx("div",{className:"shortcuts-modal-footer",children:m.jsxs("p",{children:["Press ",m.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function qC({isExpanded:a,onToggle:n}){const[r,s]=x.useState([]),[l,c]=x.useState([]),[f,h]=x.useState(!0),[p,y]=x.useState(!1),[v,b]=x.useState(null),[S,k]=x.useState(!1),[N,P]=x.useState(null),[I,Q]=x.useState(null),[K,z]=x.useState({username:"",password:"",name:""}),[Y,he]=x.useState({username:"",password:""}),[ue,H]=x.useState(""),[se,W]=x.useState(5e3),[Z,fe]=x.useState(null),_e=x.useRef(null),[Re,Ve]=x.useState({});x.useEffect(()=>(Ye(),()=>{_e.current&&clearInterval(_e.current)}),[]),x.useEffect(()=>(_e.current&&clearInterval(_e.current),a&&r.length>0&&se>0&&(_e.current=setInterval(()=>{Ve(D=>{const V={...D};return r.forEach(me=>{V[me.ip]=Date.now()}),V})},se)),()=>{_e.current&&clearInterval(_e.current)}),[a,r,se]);const Ye=async()=>{try{h(!0);const D=await rs("/api/cameras");if(D.ok){const V=await D.json();s(V.cameras||[]),V.defaultCredentials&&he(me=>({...me,username:V.defaultCredentials.username||""}))}}catch{b("Failed to load cameras")}finally{h(!1)}},T=async()=>{y(!0),b(null);try{const D=await rs("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(D.ok){const V=await D.json();if(V.found&&V.found.length>0){const me=r.map(Ie=>Ie.ip),Ne=V.found.filter(Ie=>!me.includes(Ie.ip));c(Ne),window.T2Toast&&(Ne.length>0?window.T2Toast.success(`Found ${Ne.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${V.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{b("Discovery failed")}finally{y(!1)}},q=async()=>{try{await rs("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{b("Failed to save credentials")}},ce=async(D,V,me)=>{try{await rs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:D,name:V||`Camera ${D.split(".").pop()}`,username:me?.username||Y.username,password:me?.password||Y.password})}),c(Ne=>Ne.filter(Ie=>Ie.ip!==D)),P(null),H(""),await Ye(),window.T2Toast&&window.T2Toast.success(`Camera ${D} added!`)}catch{b("Failed to add camera")}},ge=async D=>{try{await fetch(`/api/cameras/${D}`,{method:"DELETE"}),await Ye(),Z===D&&fe(null)}catch{b("Failed to remove camera")}},Se=async()=>{if(I)try{await rs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:I,name:K.name,username:K.username,password:K.password})}),Q(null),Ve(D=>({...D,[I]:Date.now()})),await Ye(),window.T2Toast&&window.T2Toast.success(`Camera ${I} updated!`)}catch{b("Failed to update camera")}},E={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},B=D=>{const V=Re[D]||Date.now();return`/api/cameras/snapshot/${D}?t=${V}`};return m.jsxs("div",{style:E.container,children:[m.jsxs("div",{style:E.header,onClick:n,children:[m.jsxs("div",{style:E.title,children:[m.jsx("span",{style:E.icon,children:""}),m.jsx("span",{children:"Cameras"}),r.length>0&&m.jsx("span",{style:E.badge,children:r.length})]}),m.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&m.jsxs("div",{style:E.content,children:[m.jsxs("div",{style:E.toolbar,children:[m.jsx("button",{style:{...E.btn,...p?E.btnActive:{}},onClick:T,disabled:p,children:p?" Scanning...":" Discover"}),m.jsx("button",{style:{...E.btn,...S?E.btnActive:{}},onClick:()=>k(!S),children:" Settings"}),m.jsxs("select",{style:E.refreshSelect,value:se,onChange:D=>W(Number(D.target.value)),title:"Refresh interval",children:[m.jsx("option",{value:0,children:"Manual"}),m.jsx("option",{value:2e3,children:"2s"}),m.jsx("option",{value:5e3,children:"5s"}),m.jsx("option",{value:1e4,children:"10s"}),m.jsx("option",{value:3e4,children:"30s"})]})]}),S&&m.jsxs("div",{style:E.settings,children:[m.jsxs("div",{style:E.inputGroup,children:[m.jsx("label",{style:E.label,children:"Select Camera to Configure"}),m.jsxs("select",{style:{...E.input,cursor:"pointer"},value:I||"",onChange:D=>{const V=D.target.value;if(!V){Q(null),z({username:"",password:"",name:""});return}const me=r.find(Ne=>Ne.ip===V);me?(Q(V),z({name:me.name||"",username:me.username||"",password:""})):(Q(V),z({name:`Camera ${V.split(".").pop()}`,username:Y.username||"",password:Y.password||""}))},children:[m.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&m.jsx("optgroup",{label:" Configured Cameras",children:r.map(D=>m.jsxs("option",{value:D.ip,children:[D.name," (",D.ip,")"]},D.ip))}),l.length>0&&m.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(D=>m.jsxs("option",{value:D.ip,children:[D.ip," (Ports: ",D.ports.join(", "),")"]},D.ip))})]})]}),I&&m.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[m.jsxs("div",{style:E.inputGroup,children:[m.jsx("label",{style:E.label,children:"Camera Name"}),m.jsx("input",{type:"text",style:E.input,value:K.name,onChange:D=>z(V=>({...V,name:D.target.value})),placeholder:"Front Door"})]}),m.jsxs("div",{style:E.inputGroup,children:[m.jsx("label",{style:E.label,children:"Username"}),m.jsx("input",{type:"text",style:E.input,value:K.username,onChange:D=>z(V=>({...V,username:D.target.value})),placeholder:"admin"})]}),m.jsxs("div",{style:E.inputGroup,children:[m.jsxs("label",{style:E.label,children:["Password ",r.find(D=>D.ip===I)?"(leave blank to keep current)":""]}),m.jsx("input",{type:"password",style:E.input,value:K.password,onChange:D=>z(V=>({...V,password:D.target.value})),placeholder:""})]}),m.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:m.jsx("button",{style:{...E.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(V=>V.ip===I)?ce(I,K.name,K):Se()},children:r.find(D=>D.ip===I)?" Save Changes":" Add Camera"})})]}),m.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[m.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("input",{type:"text",style:{...E.input,flex:1},value:Y.username,onChange:D=>he(V=>({...V,username:D.target.value})),placeholder:"Username"}),m.jsx("input",{type:"password",style:{...E.input,flex:1},value:Y.password,onChange:D=>he(V=>({...V,password:D.target.value})),placeholder:"Password"}),m.jsx("button",{style:E.btn,onClick:q,title:"Save as default",children:""})]})]}),m.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[m.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("input",{type:"text",id:"addCameraIp",style:{...E.input,flex:1},placeholder:"192.168.1.100",onKeyDown:D=>{if(D.key==="Enter"&&D.target.value){const V=D.target.value;!l.find(me=>me.ip===V)&&!r.find(me=>me.ip===V)&&c(me=>[...me,{ip:V,ports:["manual"]}]),Q(V),z({name:`Camera ${V.split(".").pop()}`,username:Y.username||"",password:Y.password||""}),D.target.value=""}}}),m.jsx("button",{style:E.btn,onClick:()=>{const D=document.getElementById("addCameraIp"),V=D?.value;V&&(!l.find(me=>me.ip===V)&&!r.find(me=>me.ip===V)&&c(me=>[...me,{ip:V,ports:["manual"]}]),Q(V),z({name:`Camera ${V.split(".").pop()}`,username:Y.username||"",password:Y.password||""}),D.value="")},children:"Configure"})]})]})]}),v&&m.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",v]}),f?m.jsx("div",{style:E.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?m.jsxs("div",{style:E.emptyState,children:[m.jsx("p",{children:"No cameras configured"}),m.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):m.jsx("div",{style:E.grid,children:r.map(D=>m.jsxs("div",{style:{...E.cameraCard,...Z===D.ip?E.cameraCardSelected:{}},onClick:()=>fe(D.ip),children:[m.jsx("img",{src:B(D.ip),alt:D.name,style:E.cameraImage,onError:V=>{V.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),m.jsxs("div",{style:E.cameraInfo,children:[m.jsx("span",{style:E.cameraName,title:D.ip,children:D.name}),m.jsxs("div",{style:{display:"flex",gap:"4px"},children:[m.jsx("button",{style:{...E.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:V=>{V.stopPropagation(),k(!0),Q(D.ip),z({name:D.name||"",username:D.username||"",password:""})},title:"Edit credentials",children:""}),m.jsx("button",{style:E.deleteBtn,onClick:V=>{V.stopPropagation(),ge(D.ip)},title:"Remove camera",children:""})]})]})]},D.ip))})]}),Z&&m.jsxs("div",{style:E.fullView,onClick:()=>fe(null),children:[m.jsx("img",{src:B(Z),alt:"Camera feed",style:E.fullImage}),m.jsx("button",{style:E.closeBtn,onClick:()=>fe(null),children:" Close"}),m.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(D=>D.ip===Z)?.name||Z})]})]})}const $a=Object.create(null);$a.open="0";$a.close="1";$a.ping="2";$a.pong="3";$a.message="4";$a.upgrade="5";$a.noop="6";const wc=Object.create(null);Object.keys($a).forEach(a=>{wc[$a[a]]=a});const oh={type:"error",data:"parser error"},A1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_1=typeof ArrayBuffer=="function",D1=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Yh=({type:a,data:n},r,s)=>A1&&n instanceof Blob?r?s(n):w0(n,s):_1&&(n instanceof ArrayBuffer||D1(n))?r?s(n):w0(new Blob([n]),s):s($a[a]+(n||"")),w0=(a,n)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];n("b"+(s||""))},r.readAsDataURL(a)};function S0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let Ad;function YC(a,n){if(A1&&a.data instanceof Blob)return a.data.arrayBuffer().then(S0).then(n);if(_1&&(a.data instanceof ArrayBuffer||D1(a.data)))return n(S0(a.data));Yh(a,!1,r=>{Ad||(Ad=new TextEncoder),n(Ad.encode(r))})}const x0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<x0.length;a++)xo[x0.charCodeAt(a)]=a;const GC=a=>{let n=a.length*.75,r=a.length,s,l=0,c,f,h,p;a[a.length-1]==="="&&(n--,a[a.length-2]==="="&&n--);const y=new ArrayBuffer(n),v=new Uint8Array(y);for(s=0;s<r;s+=4)c=xo[a.charCodeAt(s)],f=xo[a.charCodeAt(s+1)],h=xo[a.charCodeAt(s+2)],p=xo[a.charCodeAt(s+3)],v[l++]=c<<2|f>>4,v[l++]=(f&15)<<4|h>>2,v[l++]=(h&3)<<6|p&63;return y},PC=typeof ArrayBuffer=="function",Gh=(a,n)=>{if(typeof a!="string")return{type:"message",data:M1(a,n)};const r=a.charAt(0);return r==="b"?{type:"message",data:FC(a.substring(1),n)}:wc[r]?a.length>1?{type:wc[r],data:a.substring(1)}:{type:wc[r]}:oh},FC=(a,n)=>{if(PC){const r=GC(a);return M1(r,n)}else return{base64:!0,data:a}},M1=(a,n)=>{switch(n){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},R1="",ZC=(a,n)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,f)=>{Yh(c,!1,h=>{s[f]=h,++l===r&&n(s.join(R1))})})},XC=(a,n)=>{const r=a.split(R1),s=[];for(let l=0;l<r.length;l++){const c=Gh(r[l],n);if(s.push(c),c.type==="error")break}return s};function KC(){return new TransformStream({transform(a,n){YC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),n.enqueue(l),n.enqueue(r)})}})}let _d;function cc(a){return a.reduce((n,r)=>n+r.length,0)}function uc(a,n){if(a[0].length===n)return a.shift();const r=new Uint8Array(n);let s=0;for(let l=0;l<n;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function QC(a,n){_d||(_d=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(f,h){for(r.push(f);;){if(s===0){if(cc(r)<1)break;const p=uc(r,1);c=(p[0]&128)===128,l=p[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(cc(r)<2)break;const p=uc(r,2);l=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),s=3}else if(s===2){if(cc(r)<8)break;const p=uc(r,8),y=new DataView(p.buffer,p.byteOffset,p.length),v=y.getUint32(0);if(v>Math.pow(2,21)-1){h.enqueue(oh);break}l=v*Math.pow(2,32)+y.getUint32(4),s=3}else{if(cc(r)<l)break;const p=uc(r,l);h.enqueue(Gh(c?p:_d.decode(p),n)),s=0}if(l===0||l>a){h.enqueue(oh);break}}}})}const z1=4;function ln(a){if(a)return JC(a)}function JC(a){for(var n in ln.prototype)a[n]=ln.prototype[n];return a}ln.prototype.on=ln.prototype.addEventListener=function(a,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(n),this};ln.prototype.once=function(a,n){function r(){this.off(a,r),n.apply(this,arguments)}return r.fn=n,this.on(a,r),this};ln.prototype.off=ln.prototype.removeListener=ln.prototype.removeAllListeners=ln.prototype.removeEventListener=function(a,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===n||s.fn===n){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};ln.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,n)}return this};ln.prototype.emitReserved=ln.prototype.emit;ln.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};ln.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Yc=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),ha=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),WC="arraybuffer";function L1(a,...n){return n.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const eT=ha.setTimeout,tT=ha.clearTimeout;function Gc(a,n){n.useNativeTimers?(a.setTimeoutFn=eT.bind(ha),a.clearTimeoutFn=tT.bind(ha)):(a.setTimeoutFn=ha.setTimeout.bind(ha),a.clearTimeoutFn=ha.clearTimeout.bind(ha))}const nT=1.33;function aT(a){return typeof a=="string"?rT(a):Math.ceil((a.byteLength||a.size)*nT)}function rT(a){let n=0,r=0;for(let s=0,l=a.length;s<l;s++)n=a.charCodeAt(s),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(s++,r+=4);return r}function B1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function iT(a){let n="";for(let r in a)a.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return n}function sT(a){let n={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");n[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return n}class oT extends Error{constructor(n,r,s){super(n),this.description=r,this.context=s,this.type="TransportError"}}class Ph extends ln{constructor(n){super(),this.writable=!1,Gc(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,s){return super.emitReserved("error",new oT(n,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=Gh(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=iT(n);return r.length?"?"+r:""}}class lT extends Ph{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};XC(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,ZC(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=B1()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let U1=!1;try{U1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const cT=U1;function uT(){}class fT extends lT{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||s!==n.port}}doWrite(n,r){const s=this.request({method:"POST",data:n});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=n}}class Ia extends ln{constructor(n,r,s){super(),this.createRequest=n,Gc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var n;const r=L1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Ia.requestsCount++,Ia.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=uT,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ia.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ia.requestsCount=0;Ia.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",E0);else if(typeof addEventListener=="function"){const a="onpagehide"in ha?"pagehide":"unload";addEventListener(a,E0,!1)}}function E0(){for(let a in Ia.requests)Ia.requests.hasOwnProperty(a)&&Ia.requests[a].abort()}const dT=(function(){const a=I1({xdomain:!1});return a&&a.responseType!==null})();class hT extends fT{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=dT&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new Ia(I1,this.uri(),n)}}function I1(a){const n=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||cT))return new XMLHttpRequest}catch{}if(!n)try{return new ha[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pT extends Ph{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,s=$1?{}:L1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;Yh(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=B1()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const Dd=ha.WebSocket||ha.MozWebSocket;class mT extends pT{createSocket(n,r,s){return $1?new Dd(n,r,s):r?new Dd(n,r):new Dd(n)}doWrite(n,r){this.ws.send(r)}}class yT extends Ph{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=QC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=n.readable.pipeThrough(r).getReader(),l=KC();l.readable.pipeTo(n.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:h,value:p})=>{h||(this.onPacket(p),c())}).catch(h=>{})};c();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;this._writer.write(s).then(()=>{l&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const gT={websocket:mT,webtransport:yT,polling:hT},vT=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lh(a){if(a.length>8e3)throw"URI too long";const n=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=vT.exec(a||""),c={},f=14;for(;f--;)c[bT[f]]=l[f]||"";return r!=-1&&s!=-1&&(c.source=n,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=wT(c,c.path),c.queryKey=ST(c,c.query),c}function wT(a,n){const r=/\/{2,9}/g,s=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&s.splice(0,1),n.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ST(a,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const ch=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sc=[];ch&&addEventListener("offline",()=>{Sc.forEach(a=>a())},!1);class Yr extends ln{constructor(n,r){if(super(),this.binaryType=WC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const s=lh(n);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=lh(r.host).host);Gc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=sT(this.opts.query)),ch&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=z1,r.transport=n,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Yr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Yr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=aT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,Yc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,s){return this._sendPacket("message",n,r,s),this}send(n,r,s){return this._sendPacket("message",n,r,s),this}_sendPacket(n,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:n,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}_onError(n){if(Yr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ch&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Sc.indexOf(this._offlineEventListener);s!==-1&&Sc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Yr.protocol=z1;class xT extends Yr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),s=!1;Yr.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!s)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Yr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const S=new Error("probe error");S.transport=r.name,this.emitReserved("upgradeError",S)}}))};function c(){s||(s=!0,v(),r.close(),r=null)}const f=b=>{const S=new Error("probe error: "+b);S.transport=r.name,c(),this.emitReserved("upgradeError",S)};function h(){f("transport closed")}function p(){f("socket closed")}function y(b){r&&b.name!==r.name&&c()}const v=()=>{r.removeListener("open",l),r.removeListener("error",f),r.removeListener("close",h),this.off("close",p),this.off("upgrading",y)};r.once("open",l),r.once("error",f),r.once("close",h),this.once("close",p),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let s=0;s<n.length;s++)~this.transports.indexOf(n[s])&&r.push(n[s]);return r}}let ET=class extends xT{constructor(n,r={}){const s=typeof n=="object"?n:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>gT[l]).filter(l=>!!l)),super(n,s)}};function kT(a,n="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=lh(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+n,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const CT=typeof ArrayBuffer=="function",TT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,H1=Object.prototype.toString,OT=typeof Blob=="function"||typeof Blob<"u"&&H1.call(Blob)==="[object BlobConstructor]",NT=typeof File=="function"||typeof File<"u"&&H1.call(File)==="[object FileConstructor]";function Fh(a){return CT&&(a instanceof ArrayBuffer||TT(a))||OT&&a instanceof Blob||NT&&a instanceof File}function xc(a,n){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(xc(a[r]))return!0;return!1}if(Fh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return xc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&xc(a[r]))return!0;return!1}function jT(a){const n=[],r=a.data,s=a;return s.data=uh(r,n),s.attachments=n.length,{packet:s,buffers:n}}function uh(a,n){if(!a)return a;if(Fh(a)){const r={_placeholder:!0,num:n.length};return n.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=uh(a[s],n);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=uh(a[s],n));return r}return a}function AT(a,n){return a.data=fh(a.data,n),delete a.attachments,a}function fh(a,n){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<n.length)return n[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=fh(a[r],n);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=fh(a[r],n));return a}const _T=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],DT=5;var dt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(dt||(dt={}));class MT{constructor(n){this.replacer=n}encode(n){return(n.type===dt.EVENT||n.type===dt.ACK)&&xc(n)?this.encodeAsBinary({type:n.type===dt.EVENT?dt.BINARY_EVENT:dt.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===dt.BINARY_EVENT||n.type===dt.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=jT(n),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function k0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Zh extends ln{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const s=r.type===dt.BINARY_EVENT;s||r.type===dt.BINARY_ACK?(r.type=s?dt.EVENT:dt.ACK,this.reconstructor=new RT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Fh(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const s={type:Number(n.charAt(0))};if(dt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===dt.BINARY_EVENT||s.type===dt.BINARY_ACK){const c=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const f=n.substring(c,r);if(f!=Number(f)||n.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(f)}if(n.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););s.nsp=n.substring(c,r)}else s.nsp="/";const l=n.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const f=n.charAt(r);if(f==null||Number(f)!=f){--r;break}if(r===n.length)break}s.id=Number(n.substring(c,r+1))}if(n.charAt(++r)){const c=this.tryParse(n.substr(r));if(Zh.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case dt.CONNECT:return k0(r);case dt.DISCONNECT:return r===void 0;case dt.CONNECT_ERROR:return typeof r=="string"||k0(r);case dt.EVENT:case dt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&_T.indexOf(r[0])===-1);case dt.ACK:case dt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class RT{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=AT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const zT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Zh,Encoder:MT,get PacketType(){return dt},protocol:DT},Symbol.toStringTag,{value:"Module"}));function Oa(a,n,r){return a.on(n,r),function(){a.off(n,r)}}const LT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class V1 extends ln{constructor(n,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Oa(n,"open",this.onopen.bind(this)),Oa(n,"packet",this.onpacket.bind(this)),Oa(n,"error",this.onerror.bind(this)),Oa(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var s,l,c;if(LT.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const f={type:dt.EVENT,data:r};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,b=r.pop();this._registerAckCallback(v,b),f.id=v}const h=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,p=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!h||(p?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(n,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[n]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===n&&this.sendBuffer.splice(h,1);r.call(this,new Error("operation has timed out"))},l),f=(...h)=>{this.io.clearTimeoutFn(c),r.apply(this,h)};f.withError=!0,this.acks[n]=f}emitWithAck(n,...r){return new Promise((s,l)=>{const c=(f,h)=>f?l(f):s(h);c.withError=!0,r.push(c),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:dt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(s=>String(s.id)===n)){const s=this.acks[n];delete this.acks[n],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case dt.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case dt.EVENT:case dt.BINARY_EVENT:this.onevent(n);break;case dt.ACK:case dt.BINARY_ACK:this.onack(n);break;case dt.DISCONNECT:this.ondisconnect();break;case dt.CONNECT_ERROR:this.destroy();const s=new Error(n.data.message);s.data=n.data.data,this.emitReserved("connect_error",s);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:dt.ACK,id:n,data:l}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:dt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,n.data)}}}function bs(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}bs.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*a);a=(Math.floor(n*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};bs.prototype.reset=function(){this.attempts=0};bs.prototype.setMin=function(a){this.ms=a};bs.prototype.setMax=function(a){this.max=a};bs.prototype.setJitter=function(a){this.jitter=a};class dh extends ln{constructor(n,r){var s;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Gc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new bs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const l=r.parser||zT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new ET(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=Oa(r,"open",function(){s.onopen(),n&&n()}),c=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),n?n(h):this.maybeReconnectOnOpen()},f=Oa(r,"error",c);if(this._timeout!==!1){const h=this._timeout,p=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},h);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(l),this.subs.push(f),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Oa(n,"ping",this.onping.bind(this)),Oa(n,"data",this.ondata.bind(this)),Oa(n,"error",this.onerror.bind(this)),Oa(n,"close",this.onclose.bind(this)),Oa(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){Yc(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let s=this.nsps[n];return s?this._autoConnect&&!s.active&&s.connect():(s=new V1(this,n,r),this.nsps[n]=s),s}_destroy(n){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let s=0;s<r.length;s++)this.engine.write(r[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(l=>{l?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",l)):n.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const bo={};function Ec(a,n){typeof a=="object"&&(n=a,a=void 0),n=n||{};const r=kT(a,n.path||"/socket.io"),s=r.source,l=r.id,c=r.path,f=bo[l]&&c in bo[l].nsps,h=n.forceNew||n["force new connection"]||n.multiplex===!1||f;let p;return h?p=new dh(s,n):(bo[l]||(bo[l]=new dh(s,n)),p=bo[l]),r.query&&!n.query&&(n.query=r.queryKey),p.socket(r.path,n)}Object.assign(Ec,{Manager:dh,Socket:V1,io:Ec,connect:Ec});const BT=typeof window<"u"?window.location.origin:"http://localhost:3000",C0=qc(),UT=C0?`${C0}/socket.io`:"/socket.io",ye=Ec(BT,{path:UT,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]}),IT=()=>{ye.connected||ye.connect()},$T=()=>{ye.connected&&ye.disconnect()};class HT{constructor(){this.nodes=new Map}register(n,r){typeof n=="object"&&r===void 0&&(r=n,n=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(n,r)}get(n){return this.nodes.get(n)}getAll(){return Array.from(this.nodes.values()).filter(n=>n)}getByLabel(n){for(const r of this.nodes.values())if(r.label===n)return r;return null}getByInstance(n){for(const r of this.nodes.values())if(r.nodeClass&&n instanceof r.nodeClass)return r;return null}}const On=new HT;class bi extends Error{}class VT extends bi{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class qT extends bi{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class YT extends bi{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class ss extends bi{}class q1 extends bi{constructor(n){super(`Invalid unit ${n}`)}}class Nn extends bi{}class Br extends bi{constructor(){super("Zone is an abstract class")}}const Te="numeric",_a="short",ea="long",Mc={year:Te,month:Te,day:Te},Y1={year:Te,month:_a,day:Te},GT={year:Te,month:_a,day:Te,weekday:_a},G1={year:Te,month:ea,day:Te},P1={year:Te,month:ea,day:Te,weekday:ea},F1={hour:Te,minute:Te},Z1={hour:Te,minute:Te,second:Te},X1={hour:Te,minute:Te,second:Te,timeZoneName:_a},K1={hour:Te,minute:Te,second:Te,timeZoneName:ea},Q1={hour:Te,minute:Te,hourCycle:"h23"},J1={hour:Te,minute:Te,second:Te,hourCycle:"h23"},W1={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:_a},ew={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:ea},tw={year:Te,month:Te,day:Te,hour:Te,minute:Te},nw={year:Te,month:Te,day:Te,hour:Te,minute:Te,second:Te},aw={year:Te,month:_a,day:Te,hour:Te,minute:Te},rw={year:Te,month:_a,day:Te,hour:Te,minute:Te,second:Te},PT={year:Te,month:_a,day:Te,weekday:_a,hour:Te,minute:Te},iw={year:Te,month:ea,day:Te,hour:Te,minute:Te,timeZoneName:_a},sw={year:Te,month:ea,day:Te,hour:Te,minute:Te,second:Te,timeZoneName:_a},ow={year:Te,month:ea,day:Te,weekday:ea,hour:Te,minute:Te,timeZoneName:ea},lw={year:Te,month:ea,day:Te,weekday:ea,hour:Te,minute:Te,second:Te,timeZoneName:ea};class ws{get type(){throw new Br}get name(){throw new Br}get ianaName(){return this.name}get isUniversal(){throw new Br}offsetName(n,r){throw new Br}formatOffset(n,r){throw new Br}offset(n){throw new Br}equals(n){throw new Br}get isValid(){throw new Br}}let Md=null;class Bo extends ws{static get instance(){return Md===null&&(Md=new Bo),Md}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return ww(n,r,s)}formatOffset(n,r){return Ao(this.offset(n),r)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const hh=new Map;function FT(a){let n=hh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),hh.set(a,n)),n}const ZT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function XT(a,n){const r=a.format(n).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,f,h,p,y,v]=s;return[f,l,c,h,p,y,v]}function KT(a,n){const r=a.formatToParts(n),s=[];for(let l=0;l<r.length;l++){const{type:c,value:f}=r[l],h=ZT[c];c==="era"?s[h]=f:Ge(h)||(s[h]=parseInt(f,10))}return s}const Rd=new Map;class Ha extends ws{static create(n){let r=Rd.get(n);return r===void 0&&Rd.set(n,r=new Ha(n)),r}static resetCache(){Rd.clear(),hh.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=Ha.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return ww(n,r,s,this.name)}formatOffset(n,r){return Ao(this.offset(n),r)}offset(n){if(!this.valid)return NaN;const r=new Date(n);if(isNaN(r))return NaN;const s=FT(this.name);let[l,c,f,h,p,y,v]=s.formatToParts?KT(s,r):XT(s,r);h==="BC"&&(l=-Math.abs(l)+1);const S=Fc({year:l,month:c,day:f,hour:p===24?0:p,minute:y,second:v,millisecond:0});let k=+r;const N=k%1e3;return k-=N>=0?N:1e3+N,(S-k)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let T0={};function QT(a,n={}){const r=JSON.stringify([a,n]);let s=T0[r];return s||(s=new Intl.ListFormat(a,n),T0[r]=s),s}const ph=new Map;function mh(a,n={}){const r=JSON.stringify([a,n]);let s=ph.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,n),ph.set(r,s)),s}const yh=new Map;function JT(a,n={}){const r=JSON.stringify([a,n]);let s=yh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,n),yh.set(r,s)),s}const gh=new Map;function WT(a,n={}){const{base:r,...s}=n,l=JSON.stringify([a,s]);let c=gh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,n),gh.set(l,c)),c}let Eo=null;function eO(){return Eo||(Eo=new Intl.DateTimeFormat().resolvedOptions().locale,Eo)}const vh=new Map;function cw(a){let n=vh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat(a).resolvedOptions(),vh.set(a,n)),n}const bh=new Map;function tO(a){let n=bh.get(a);if(!n){const r=new Intl.Locale(a);n="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in n||(n={...uw,...n}),bh.set(a,n)}return n}function nO(a){const n=a.indexOf("-x-");n!==-1&&(a=a.substring(0,n));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=mh(a).resolvedOptions(),l=a}catch{const p=a.substring(0,r);s=mh(p).resolvedOptions(),l=p}const{numberingSystem:c,calendar:f}=s;return[l,c,f]}}function aO(a,n,r){return(r||n)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),n&&(a+=`-nu-${n}`)),a}function rO(a){const n=[];for(let r=1;r<=12;r++){const s=Fe.utc(2009,r,1);n.push(a(s))}return n}function iO(a){const n=[];for(let r=1;r<=7;r++){const s=Fe.utc(2016,11,13+r);n.push(a(s))}return n}function fc(a,n,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(n):s(n)}function sO(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||cw(a.locale).numberingSystem==="latn"}class oO{constructor(n,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...f}=s;if(!r||Object.keys(f).length>0){const h={useGrouping:!1,...s};s.padTo>0&&(h.minimumIntegerDigits=s.padTo),this.inf=JT(n,h)}}format(n){if(this.inf){const r=this.floor?Math.floor(n):n;return this.inf.format(r)}else{const r=this.floor?Math.floor(n):Wh(n,3);return sn(r,this.padTo)}}}class lO{constructor(n,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const f=-1*(n.offset/60),h=f>=0?`Etc/GMT+${f}`:`Etc/GMT${f}`;n.offset!==0&&Ha.create(h).valid?(l=h,this.dt=n):(l="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,l=n.zone.name):(l="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=mh(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class cO{constructor(n,r,s){this.opts={style:"long",...s},!r&&vw()&&(this.rtf=WT(n,s))}format(n,r){return this.rtf?this.rtf.format(n,r):AO(r,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,r){return this.rtf?this.rtf.formatToParts(n,r):[]}}const uw={firstDay:1,minimalDays:4,weekend:[6,7]};class Et{static fromOpts(n){return Et.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,r,s,l,c=!1){const f=n||Yt.defaultLocale,h=f||(c?"en-US":eO()),p=r||Yt.defaultNumberingSystem,y=s||Yt.defaultOutputCalendar,v=Sh(l)||Yt.defaultWeekSettings;return new Et(h,p,y,v,f)}static resetCache(){Eo=null,ph.clear(),yh.clear(),gh.clear(),vh.clear(),bh.clear()}static fromObject({locale:n,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return Et.create(n,r,s,l)}constructor(n,r,s,l,c){const[f,h,p]=nO(n);this.locale=f,this.numberingSystem=r||h||null,this.outputCalendar=s||p||null,this.weekSettings=l,this.intl=aO(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=sO(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&r?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:Et.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,Sh(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,r=!1){return fc(this,n,Ew,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:n,day:"numeric"}:{month:n},c=r?"format":"standalone";if(!this.monthsCache[c][n]){const f=s?h=>this.dtFormatter(h,l).format():h=>this.extract(h,l,"month");this.monthsCache[c][n]=rO(f)}return this.monthsCache[c][n]})}weekdays(n,r=!1){return fc(this,n,Tw,()=>{const s=r?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},l=r?"format":"standalone";return this.weekdaysCache[l][n]||(this.weekdaysCache[l][n]=iO(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][n]})}meridiems(){return fc(this,void 0,()=>Ow,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Fe.utc(2016,11,13,9),Fe.utc(2016,11,13,19)].map(r=>this.extract(r,n,"dayperiod"))}return this.meridiemCache})}eras(n){return fc(this,n,Nw,()=>{const r={era:n};return this.eraCache[n]||(this.eraCache[n]=[Fe.utc(-40,1,1),Fe.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[n]})}extract(n,r,s){const l=this.dtFormatter(n,r),c=l.formatToParts(),f=c.find(h=>h.type.toLowerCase()===s);return f?f.value:null}numberFormatter(n={}){return new oO(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,r={}){return new lO(n,this.intl,r)}relFormatter(n={}){return new cO(this.intl,this.isEnglish(),n)}listFormatter(n={}){return QT(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||cw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:bw()?tO(this.locale):uw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let zd=null;class An extends ws{static get utcInstance(){return zd===null&&(zd=new An(0)),zd}static instance(n){return n===0?An.utcInstance:new An(n)}static parseSpecifier(n){if(n){const r=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new An(Zc(r[1],r[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ao(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ao(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,r){return Ao(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class fw extends ws{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Vr(a,n){if(Ge(a)||a===null)return n;if(a instanceof ws)return a;if(mO(a)){const r=a.toLowerCase();return r==="default"?n:r==="local"||r==="system"?Bo.instance:r==="utc"||r==="gmt"?An.utcInstance:An.parseSpecifier(r)||Ha.create(a)}else return Gr(a)?An.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new fw(a)}const Xh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},O0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},uO=Xh.hanidec.replace(/[\[|\]]/g,"").split("");function fO(a){let n=parseInt(a,10);if(isNaN(n)){n="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Xh.hanidec)!==-1)n+=uO.indexOf(a[r]);else for(const l in O0){const[c,f]=O0[l];s>=c&&s<=f&&(n+=s-c)}}return parseInt(n,10)}else return n}const wh=new Map;function dO(){wh.clear()}function Ca({numberingSystem:a},n=""){const r=a||"latn";let s=wh.get(r);s===void 0&&(s=new Map,wh.set(r,s));let l=s.get(n);return l===void 0&&(l=new RegExp(`${Xh[r]}${n}`),s.set(n,l)),l}let N0=()=>Date.now(),j0="system",A0=null,_0=null,D0=null,M0=60,R0,z0=null;class Yt{static get now(){return N0}static set now(n){N0=n}static set defaultZone(n){j0=n}static get defaultZone(){return Vr(j0,Bo.instance)}static get defaultLocale(){return A0}static set defaultLocale(n){A0=n}static get defaultNumberingSystem(){return _0}static set defaultNumberingSystem(n){_0=n}static get defaultOutputCalendar(){return D0}static set defaultOutputCalendar(n){D0=n}static get defaultWeekSettings(){return z0}static set defaultWeekSettings(n){z0=Sh(n)}static get twoDigitCutoffYear(){return M0}static set twoDigitCutoffYear(n){M0=n%100}static get throwOnInvalid(){return R0}static set throwOnInvalid(n){R0=n}static resetCaches(){Et.resetCache(),Ha.resetCache(),Fe.resetCache(),dO()}}class Na{constructor(n,r){this.reason=n,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const dw=[0,31,59,90,120,151,181,212,243,273,304,334],hw=[0,31,60,91,121,152,182,213,244,274,305,335];function pa(a,n){return new Na("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${a}, which is invalid`)}function Kh(a,n,r){const s=new Date(Date.UTC(a,n-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function pw(a,n,r){return r+(Uo(a)?hw:dw)[n-1]}function mw(a,n){const r=Uo(a)?hw:dw,s=r.findIndex(c=>c<n),l=n-r[s];return{month:s+1,day:l}}function Qh(a,n){return(a-n+7)%7+1}function Rc(a,n=4,r=1){const{year:s,month:l,day:c}=a,f=pw(s,l,c),h=Qh(Kh(s,l,c),r);let p=Math.floor((f-h+14-n)/7),y;return p<1?(y=s-1,p=Ro(y,n,r)):p>Ro(s,n,r)?(y=s+1,p=1):y=s,{weekYear:y,weekNumber:p,weekday:h,...Xc(a)}}function L0(a,n=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,f=Qh(Kh(s,1,n),r),h=ls(s);let p=l*7+c-f-7+n,y;p<1?(y=s-1,p+=ls(y)):p>h?(y=s+1,p-=ls(s)):y=s;const{month:v,day:b}=mw(y,p);return{year:y,month:v,day:b,...Xc(a)}}function Ld(a){const{year:n,month:r,day:s}=a,l=pw(n,r,s);return{year:n,ordinal:l,...Xc(a)}}function B0(a){const{year:n,ordinal:r}=a,{month:s,day:l}=mw(n,r);return{year:n,month:s,day:l,...Xc(a)}}function U0(a,n){if(!Ge(a.localWeekday)||!Ge(a.localWeekNumber)||!Ge(a.localWeekYear)){if(!Ge(a.weekday)||!Ge(a.weekNumber)||!Ge(a.weekYear))throw new ss("Cannot mix locale-based week fields with ISO-based week fields");return Ge(a.localWeekday)||(a.weekday=a.localWeekday),Ge(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ge(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function hO(a,n=4,r=1){const s=Pc(a.weekYear),l=ma(a.weekNumber,1,Ro(a.weekYear,n,r)),c=ma(a.weekday,1,7);return s?l?c?!1:pa("weekday",a.weekday):pa("week",a.weekNumber):pa("weekYear",a.weekYear)}function pO(a){const n=Pc(a.year),r=ma(a.ordinal,1,ls(a.year));return n?r?!1:pa("ordinal",a.ordinal):pa("year",a.year)}function yw(a){const n=Pc(a.year),r=ma(a.month,1,12),s=ma(a.day,1,zc(a.year,a.month));return n?r?s?!1:pa("day",a.day):pa("month",a.month):pa("year",a.year)}function gw(a){const{hour:n,minute:r,second:s,millisecond:l}=a,c=ma(n,0,23)||n===24&&r===0&&s===0&&l===0,f=ma(r,0,59),h=ma(s,0,59),p=ma(l,0,999);return c?f?h?p?!1:pa("millisecond",l):pa("second",s):pa("minute",r):pa("hour",n)}function Ge(a){return typeof a>"u"}function Gr(a){return typeof a=="number"}function Pc(a){return typeof a=="number"&&a%1===0}function mO(a){return typeof a=="string"}function yO(a){return Object.prototype.toString.call(a)==="[object Date]"}function vw(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function bw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function gO(a){return Array.isArray(a)?a:[a]}function I0(a,n,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[n(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function vO(a,n){return n.reduce((r,s)=>(r[s]=a[s],r),{})}function ms(a,n){return Object.prototype.hasOwnProperty.call(a,n)}function Sh(a){if(a==null)return null;if(typeof a!="object")throw new Nn("Week settings must be an object");if(!ma(a.firstDay,1,7)||!ma(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(n=>!ma(n,1,7)))throw new Nn("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function ma(a,n,r){return Pc(a)&&a>=n&&a<=r}function bO(a,n){return a-n*Math.floor(a/n)}function sn(a,n=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(n,"0"):s=(""+a).padStart(n,"0"),s}function Hr(a){if(!(Ge(a)||a===null||a===""))return parseInt(a,10)}function fi(a){if(!(Ge(a)||a===null||a===""))return parseFloat(a)}function Jh(a){if(!(Ge(a)||a===null||a==="")){const n=parseFloat("0."+a)*1e3;return Math.floor(n)}}function Wh(a,n,r="round"){const s=10**n;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Uo(a){return a%4===0&&(a%100!==0||a%400===0)}function ls(a){return Uo(a)?366:365}function zc(a,n){const r=bO(n-1,12)+1,s=a+(n-r)/12;return r===2?Uo(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Fc(a){let n=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(n=new Date(n),n.setUTCFullYear(a.year,a.month-1,a.day)),+n}function $0(a,n,r){return-Qh(Kh(a,1,n),r)+n-1}function Ro(a,n=4,r=1){const s=$0(a,n,r),l=$0(a+1,n,r);return(ls(a)-s+l)/7}function xh(a){return a>99?a:a>Yt.twoDigitCutoffYear?1900+a:2e3+a}function ww(a,n,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const f={timeZoneName:n,...c},h=new Intl.DateTimeFormat(r,f).formatToParts(l).find(p=>p.type.toLowerCase()==="timezonename");return h?h.value:null}function Zc(a,n){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(n,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function Sw(a){const n=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(n))throw new Nn(`Invalid unit value ${a}`);return n}function Lc(a,n){const r={};for(const s in a)if(ms(a,s)){const l=a[s];if(l==null)continue;r[n(s)]=Sw(l)}return r}function Ao(a,n){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(n){case"short":return`${l}${sn(r,2)}:${sn(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${sn(r,2)}${sn(s,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Xc(a){return vO(a,["hour","minute","second","millisecond"])}const wO=["January","February","March","April","May","June","July","August","September","October","November","December"],xw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],SO=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ew(a){switch(a){case"narrow":return[...SO];case"short":return[...xw];case"long":return[...wO];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const kw=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Cw=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],xO=["M","T","W","T","F","S","S"];function Tw(a){switch(a){case"narrow":return[...xO];case"short":return[...Cw];case"long":return[...kw];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ow=["AM","PM"],EO=["Before Christ","Anno Domini"],kO=["BC","AD"],CO=["B","A"];function Nw(a){switch(a){case"narrow":return[...CO];case"short":return[...kO];case"long":return[...EO];default:return null}}function TO(a){return Ow[a.hour<12?0:1]}function OO(a,n){return Tw(n)[a.weekday-1]}function NO(a,n){return Ew(n)[a.month-1]}function jO(a,n){return Nw(n)[a.year<0?0:1]}function AO(a,n,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const b=a==="days";switch(n){case 1:return b?"tomorrow":`next ${l[a][0]}`;case-1:return b?"yesterday":`last ${l[a][0]}`;case 0:return b?"today":`this ${l[a][0]}`}}const f=Object.is(n,-0)||n<0,h=Math.abs(n),p=h===1,y=l[a],v=s?p?y[1]:y[2]||y[1]:p?l[a][0]:a;return f?`${h} ${v} ago`:`in ${h} ${v}`}function H0(a,n){let r="";for(const s of a)s.literal?r+=s.val:r+=n(s.val);return r}const _O={D:Mc,DD:Y1,DDD:G1,DDDD:P1,t:F1,tt:Z1,ttt:X1,tttt:K1,T:Q1,TT:J1,TTT:W1,TTTT:ew,f:tw,ff:aw,fff:iw,ffff:ow,F:nw,FF:rw,FFF:sw,FFFF:lw};class jn{static create(n,r={}){return new jn(n,r)}static parseFormat(n){let r=null,s="",l=!1;const c=[];for(let f=0;f<n.length;f++){const h=n.charAt(f);h==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||h===r?s+=h:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=h,r=h)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(n){return _O[n]}constructor(n,r){this.opts=r,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...r}).format()}dtFormatter(n,r={}){return this.loc.dtFormatter(n,{...this.opts,...r})}formatDateTime(n,r){return this.dtFormatter(n,r).format()}formatDateTimeParts(n,r){return this.dtFormatter(n,r).formatToParts()}formatInterval(n,r){return this.dtFormatter(n.start,r).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,r){return this.dtFormatter(n,r).resolvedOptions()}num(n,r=0,s=void 0){if(this.opts.forceSimple)return sn(n,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(n)}formatDateTimeFromString(n,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(k,N)=>this.loc.extract(n,k,N),f=k=>n.isOffsetFixed&&n.offset===0&&k.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,k.format):"",h=()=>s?TO(n):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),p=(k,N)=>s?NO(n,k):c(N?{month:k}:{month:k,day:"numeric"},"month"),y=(k,N)=>s?OO(n,k):c(N?{weekday:k}:{weekday:k,month:"long",day:"numeric"},"weekday"),v=k=>{const N=jn.macroTokenToFormatOpts(k);return N?this.formatWithSystemDefault(n,N):k},b=k=>s?jO(n,k):c({era:k},"era"),S=k=>{switch(k){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return f({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return f({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return f({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return h();case"d":return l?c({day:"numeric"},"day"):this.num(n.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return p("short",!0);case"LLLL":return p("long",!0);case"LLLLL":return p("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(n.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return p("short",!1);case"MMMM":return p("long",!1);case"MMMMM":return p("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(n.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(n.year,6);case"G":return b("short");case"GG":return b("long");case"GGGGG":return b("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return v(k)}};return H0(jn.parseFormat(r),S)}formatDurationFromString(n,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=v=>{switch(v[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(v,b)=>S=>{const k=l(S);if(k){const N=b.isNegativeDuration&&k!==b.largestUnit?s:1;let P;return this.opts.signMode==="negativeLargestOnly"&&k!==b.largestUnit?P="never":this.opts.signMode==="all"?P="always":P="auto",this.num(v.get(k)*N,S.length,P)}else return S},f=jn.parseFormat(r),h=f.reduce((v,{literal:b,val:S})=>b?v:v.concat(S),[]),p=n.shiftTo(...h.map(l).filter(v=>v)),y={isNegativeDuration:p<0,largestUnit:Object.keys(p.values)[0]};return H0(f,c(p,y))}}const jw=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ss(...a){const n=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${n}$`)}function xs(...a){return n=>a.reduce(([r,s,l],c)=>{const[f,h,p]=c(n,l);return[{...r,...f},h||s,p]},[{},null,1]).slice(0,2)}function Es(a,...n){if(a==null)return[null,null];for(const[r,s]of n){const l=r.exec(a);if(l)return s(l)}return[null,null]}function Aw(...a){return(n,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Hr(n[r+l]);return[s,null,r+l]}}const _w=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,DO=`(?:${_w.source}?(?:\\[(${jw.source})\\])?)?`,ep=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Dw=RegExp(`${ep.source}${DO}`),tp=RegExp(`(?:[Tt]${Dw.source})?`),MO=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,RO=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zO=/(\d{4})-?(\d{3})/,LO=Aw("weekYear","weekNumber","weekDay"),BO=Aw("year","ordinal"),UO=/(\d{4})-(\d\d)-(\d\d)/,Mw=RegExp(`${ep.source} ?(?:${_w.source}|(${jw.source}))?`),IO=RegExp(`(?: ${Mw.source})?`);function cs(a,n,r){const s=a[n];return Ge(s)?r:Hr(s)}function $O(a,n){return[{year:cs(a,n),month:cs(a,n+1,1),day:cs(a,n+2,1)},null,n+3]}function ks(a,n){return[{hours:cs(a,n,0),minutes:cs(a,n+1,0),seconds:cs(a,n+2,0),milliseconds:Jh(a[n+3])},null,n+4]}function Io(a,n){const r=!a[n]&&!a[n+1],s=Zc(a[n+1],a[n+2]),l=r?null:An.instance(s);return[{},l,n+3]}function $o(a,n){const r=a[n]?Ha.create(a[n]):null;return[{},r,n+1]}const HO=RegExp(`^T?${ep.source}$`),VO=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function qO(a){const[n,r,s,l,c,f,h,p,y]=a,v=n[0]==="-",b=p&&p[0]==="-",S=(k,N=!1)=>k!==void 0&&(N||k&&v)?-k:k;return[{years:S(fi(r)),months:S(fi(s)),weeks:S(fi(l)),days:S(fi(c)),hours:S(fi(f)),minutes:S(fi(h)),seconds:S(fi(p),p==="-0"),milliseconds:S(Jh(y),b)}]}const YO={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function np(a,n,r,s,l,c,f){const h={year:n.length===2?xh(Hr(n)):Hr(n),month:xw.indexOf(r)+1,day:Hr(s),hour:Hr(l),minute:Hr(c)};return f&&(h.second=Hr(f)),a&&(h.weekday=a.length>3?kw.indexOf(a)+1:Cw.indexOf(a)+1),h}const GO=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function PO(a){const[,n,r,s,l,c,f,h,p,y,v,b]=a,S=np(n,l,s,r,c,f,h);let k;return p?k=YO[p]:y?k=0:k=Zc(v,b),[S,new An(k)]}function FO(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ZO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,XO=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,KO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function V0(a){const[,n,r,s,l,c,f,h]=a;return[np(n,l,s,r,c,f,h),An.utcInstance]}function QO(a){const[,n,r,s,l,c,f,h]=a;return[np(n,h,r,s,l,c,f),An.utcInstance]}const JO=Ss(MO,tp),WO=Ss(RO,tp),eN=Ss(zO,tp),tN=Ss(Dw),Rw=xs($O,ks,Io,$o),nN=xs(LO,ks,Io,$o),aN=xs(BO,ks,Io,$o),rN=xs(ks,Io,$o);function iN(a){return Es(a,[JO,Rw],[WO,nN],[eN,aN],[tN,rN])}function sN(a){return Es(FO(a),[GO,PO])}function oN(a){return Es(a,[ZO,V0],[XO,V0],[KO,QO])}function lN(a){return Es(a,[VO,qO])}const cN=xs(ks);function uN(a){return Es(a,[HO,cN])}const fN=Ss(UO,IO),dN=Ss(Mw),hN=xs(ks,Io,$o);function pN(a){return Es(a,[fN,Rw],[dN,hN])}const q0="Invalid Duration",zw={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},mN={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...zw},da=146097/400,ts=146097/4800,yN={years:{quarters:4,months:12,weeks:da/7,days:da,hours:da*24,minutes:da*24*60,seconds:da*24*60*60,milliseconds:da*24*60*60*1e3},quarters:{months:3,weeks:da/28,days:da/4,hours:da*24/4,minutes:da*24*60/4,seconds:da*24*60*60/4,milliseconds:da*24*60*60*1e3/4},months:{weeks:ts/7,days:ts,hours:ts*24,minutes:ts*24*60,seconds:ts*24*60*60,milliseconds:ts*24*60*60*1e3},...zw},mi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],gN=mi.slice(0).reverse();function ur(a,n,r=!1){const s={values:r?n.values:{...a.values,...n.values||{}},loc:a.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||a.conversionAccuracy,matrix:n.matrix||a.matrix};return new ht(s)}function Lw(a,n){let r=n.milliseconds??0;for(const s of gN.slice(1))n[s]&&(r+=n[s]*a[s].milliseconds);return r}function Y0(a,n){const r=Lw(a,n)<0?-1:1;mi.reduceRight((s,l)=>{if(Ge(n[l]))return s;if(s){const c=n[s]*r,f=a[l][s],h=Math.floor(c/f);n[l]+=h*r,n[s]-=h*f*r}return l},null),mi.reduce((s,l)=>{if(Ge(n[l]))return s;if(s){const c=n[s]%1;n[s]-=c,n[l]+=c*a[s][l]}return l},null)}function G0(a){const n={};for(const[r,s]of Object.entries(a))s!==0&&(n[r]=s);return n}class ht{constructor(n){const r=n.conversionAccuracy==="longterm"||!1;let s=r?yN:mN;n.matrix&&(s=n.matrix),this.values=n.values,this.loc=n.loc||Et.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(n,r){return ht.fromObject({milliseconds:n},r)}static fromObject(n,r={}){if(n==null||typeof n!="object")throw new Nn(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new ht({values:Lc(n,ht.normalizeUnit),loc:Et.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(n){if(Gr(n))return ht.fromMillis(n);if(ht.isDuration(n))return n;if(typeof n=="object")return ht.fromObject(n);throw new Nn(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,r){const[s]=lN(n);return s?ht.fromObject(s,r):ht.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,r){const[s]=uN(n);return s?ht.fromObject(s,r):ht.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,r=null){if(!n)throw new Nn("need to specify a reason the Duration is invalid");const s=n instanceof Na?n:new Na(n,r);if(Yt.throwOnInvalid)throw new YT(s);return new ht({invalid:s})}static normalizeUnit(n){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!r)throw new q1(n);return r}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?jn.create(this.loc,s).formatDurationFromString(this,n):q0}toHuman(n={}){if(!this.isValid)return q0;const r=n.showZeros!==!1,s=mi.map(l=>{const c=this.values[l];return Ge(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=Wh(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},Fe.fromMillis(r,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Lw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n),s={};for(const l of mi)(ms(r.values,l)||ms(this.values,l))&&(s[l]=r.get(l)+this.get(l));return ur(this,{values:s},!0)}minus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n);return this.plus(r.negate())}mapUnits(n){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=Sw(n(this.values[s],s));return ur(this,{values:r},!0)}get(n){return this[ht.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const r={...this.values,...Lc(n,ht.normalizeUnit)};return ur(this,{values:r})}reconfigure({locale:n,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const f={loc:this.loc.clone({locale:n,numberingSystem:r}),matrix:l,conversionAccuracy:s};return ur(this,f)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return Y0(this.matrix,n),ur(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=G0(this.normalize().shiftToAll().toObject());return ur(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(f=>ht.normalizeUnit(f));const r={},s={},l=this.toObject();let c;for(const f of mi)if(n.indexOf(f)>=0){c=f;let h=0;for(const y in s)h+=this.matrix[y][f]*s[y],s[y]=0;Gr(l[f])&&(h+=l[f]);const p=Math.trunc(h);r[f]=p,s[f]=(h*1e3-p*1e3)/1e3}else Gr(l[f])&&(s[f]=l[f]);for(const f in s)s[f]!==0&&(r[c]+=f===c?s[f]:s[f]/this.matrix[c][f]);return Y0(this.matrix,r),ur(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=this.values[r]===0?0:-this.values[r];return ur(this,{values:n},!0)}removeZeros(){if(!this.isValid)return this;const n=G0(this.values);return ur(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of mi)if(!r(this.values[s],n.values[s]))return!1;return!0}}const ns="Invalid Interval";function vN(a,n){return!a||!a.isValid?qt.invalid("missing or invalid start"):!n||!n.isValid?qt.invalid("missing or invalid end"):n<a?qt.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${n.toISO()}`):null}class qt{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,r=null){if(!n)throw new Nn("need to specify a reason the Interval is invalid");const s=n instanceof Na?n:new Na(n,r);if(Yt.throwOnInvalid)throw new qT(s);return new qt({invalid:s})}static fromDateTimes(n,r){const s=wo(n),l=wo(r),c=vN(s,l);return c??new qt({start:s,end:l})}static after(n,r){const s=ht.fromDurationLike(r),l=wo(n);return qt.fromDateTimes(l,l.plus(s))}static before(n,r){const s=ht.fromDurationLike(r),l=wo(n);return qt.fromDateTimes(l.minus(s),l)}static fromISO(n,r){const[s,l]=(n||"").split("/",2);if(s&&l){let c,f;try{c=Fe.fromISO(s,r),f=c.isValid}catch{f=!1}let h,p;try{h=Fe.fromISO(l,r),p=h.isValid}catch{p=!1}if(f&&p)return qt.fromDateTimes(c,h);if(f){const y=ht.fromISO(l,r);if(y.isValid)return qt.after(c,y)}else if(p){const y=ht.fromISO(s,r);if(y.isValid)return qt.before(h,y)}}return qt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(n,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(n,r),Math.floor(l.diff(s,n).get(n))+(l.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:r}={}){return this.isValid?qt.fromDateTimes(n||this.s,r||this.e):this}splitAt(...n){if(!this.isValid)return[];const r=n.map(wo).filter(f=>this.contains(f)).sort((f,h)=>f.toMillis()-h.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const f=r[c]||this.e,h=+f>+this.e?this.e:f;s.push(qt.fromDateTimes(l,h)),l=h,c+=1}return s}splitBy(n){const r=ht.fromDurationLike(n);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const f=[];for(;s<this.e;){const h=this.start.plus(r.mapUnits(p=>p*l));c=+h>+this.e?this.e:h,f.push(qt.fromDateTimes(s,c)),s=c,l+=1}return f}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const r=this.s>n.s?this.s:n.s,s=this.e<n.e?this.e:n.e;return r>=s?null:qt.fromDateTimes(r,s)}union(n){if(!this.isValid)return this;const r=this.s<n.s?this.s:n.s,s=this.e>n.e?this.e:n.e;return qt.fromDateTimes(r,s)}static merge(n){const[r,s]=n.sort((l,c)=>l.s-c.s).reduce(([l,c],f)=>c?c.overlaps(f)||c.abutsStart(f)?[l,c.union(f)]:[l.concat([c]),f]:[l,f],[[],null]);return s&&r.push(s),r}static xor(n){let r=null,s=0;const l=[],c=n.map(p=>[{time:p.s,type:"s"},{time:p.e,type:"e"}]),f=Array.prototype.concat(...c),h=f.sort((p,y)=>p.time-y.time);for(const p of h)s+=p.type==="s"?1:-1,s===1?r=p.time:(r&&+r!=+p.time&&l.push(qt.fromDateTimes(r,p.time)),r=null);return qt.merge(l)}difference(...n){return qt.xor([this].concat(n)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ns}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=Mc,r={}){return this.isValid?jn.create(this.s.loc.clone(r),n).formatInterval(this):ns}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:ns}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ns}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:ns}toFormat(n,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(n)}${r}${this.e.toFormat(n)}`:ns}toDuration(n,r){return this.isValid?this.e.diff(this.s,n,r):ht.invalid(this.invalidReason)}mapEndpoints(n){return qt.fromDateTimes(n(this.s),n(this.e))}}class ko{static hasDST(n=Yt.defaultZone){const r=Fe.now().setZone(n).set({month:12});return!n.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(n){return Ha.isValidZone(n)}static normalizeZone(n){return Vr(n,Yt.defaultZone)}static getStartOfWeek({locale:n=null,locObj:r=null}={}){return(r||Et.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:r=null}={}){return(r||Et.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:r=null}={}){return(r||Et.create(n)).getWeekendDays().slice()}static months(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Et.create(r,s,c)).months(n)}static monthsFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Et.create(r,s,c)).months(n,!0)}static weekdays(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Et.create(r,s,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Et.create(r,s,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return Et.create(n).meridiems()}static eras(n="short",{locale:r=null}={}){return Et.create(r,null,"gregory").eras(n)}static features(){return{relative:vw(),localeWeek:bw()}}}function P0(a,n){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(n)-r(a);return Math.floor(ht.fromMillis(s).as("days"))}function bN(a,n,r){const s=[["years",(p,y)=>y.year-p.year],["quarters",(p,y)=>y.quarter-p.quarter+(y.year-p.year)*4],["months",(p,y)=>y.month-p.month+(y.year-p.year)*12],["weeks",(p,y)=>{const v=P0(p,y);return(v-v%7)/7}],["days",P0]],l={},c=a;let f,h;for(const[p,y]of s)r.indexOf(p)>=0&&(f=p,l[p]=y(a,n),h=c.plus(l),h>n?(l[p]--,a=c.plus(l),a>n&&(h=a,l[p]--,a=c.plus(l))):a=h);return[a,l,h,f]}function wN(a,n,r,s){let[l,c,f,h]=bN(a,n,r);const p=n-l,y=r.filter(b=>["hours","minutes","seconds","milliseconds"].indexOf(b)>=0);y.length===0&&(f<n&&(f=l.plus({[h]:1})),f!==l&&(c[h]=(c[h]||0)+p/(f-l)));const v=ht.fromObject(c,s);return y.length>0?ht.fromMillis(p,s).shiftTo(...y).plus(v):v}const SN="missing Intl.DateTimeFormat.formatToParts support";function St(a,n=r=>r){return{regex:a,deser:([r])=>n(fO(r))}}const xN="",Bw=`[ ${xN}]`,Uw=new RegExp(Bw,"g");function EN(a){return a.replace(/\./g,"\\.?").replace(Uw,Bw)}function F0(a){return a.replace(/\./g,"").replace(Uw," ").toLowerCase()}function Ta(a,n){return a===null?null:{regex:RegExp(a.map(EN).join("|")),deser:([r])=>a.findIndex(s=>F0(r)===F0(s))+n}}function Z0(a,n){return{regex:a,deser:([,r,s])=>Zc(r,s),groups:n}}function dc(a){return{regex:a,deser:([n])=>n}}function kN(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function CN(a,n){const r=Ca(n),s=Ca(n,"{2}"),l=Ca(n,"{3}"),c=Ca(n,"{4}"),f=Ca(n,"{6}"),h=Ca(n,"{1,2}"),p=Ca(n,"{1,3}"),y=Ca(n,"{1,6}"),v=Ca(n,"{1,9}"),b=Ca(n,"{2,4}"),S=Ca(n,"{4,6}"),k=I=>({regex:RegExp(kN(I.val)),deser:([Q])=>Q,literal:!0}),P=(I=>{if(a.literal)return k(I);switch(I.val){case"G":return Ta(n.eras("short"),0);case"GG":return Ta(n.eras("long"),0);case"y":return St(y);case"yy":return St(b,xh);case"yyyy":return St(c);case"yyyyy":return St(S);case"yyyyyy":return St(f);case"M":return St(h);case"MM":return St(s);case"MMM":return Ta(n.months("short",!0),1);case"MMMM":return Ta(n.months("long",!0),1);case"L":return St(h);case"LL":return St(s);case"LLL":return Ta(n.months("short",!1),1);case"LLLL":return Ta(n.months("long",!1),1);case"d":return St(h);case"dd":return St(s);case"o":return St(p);case"ooo":return St(l);case"HH":return St(s);case"H":return St(h);case"hh":return St(s);case"h":return St(h);case"mm":return St(s);case"m":return St(h);case"q":return St(h);case"qq":return St(s);case"s":return St(h);case"ss":return St(s);case"S":return St(p);case"SSS":return St(l);case"u":return dc(v);case"uu":return dc(h);case"uuu":return St(r);case"a":return Ta(n.meridiems(),0);case"kkkk":return St(c);case"kk":return St(b,xh);case"W":return St(h);case"WW":return St(s);case"E":case"c":return St(r);case"EEE":return Ta(n.weekdays("short",!1),1);case"EEEE":return Ta(n.weekdays("long",!1),1);case"ccc":return Ta(n.weekdays("short",!0),1);case"cccc":return Ta(n.weekdays("long",!0),1);case"Z":case"ZZ":return Z0(new RegExp(`([+-]${h.source})(?::(${s.source}))?`),2);case"ZZZ":return Z0(new RegExp(`([+-]${h.source})(${s.source})?`),2);case"z":return dc(/[a-z_+-/]{1,256}?/i);case" ":return dc(/[^\S\n\r]/);default:return k(I)}})(a)||{invalidReason:SN};return P.token=a,P}const TN={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function ON(a,n,r){const{type:s,value:l}=a;if(s==="literal"){const p=/^\s+$/.test(l);return{literal:!p,val:p?" ":l}}const c=n[s];let f=s;s==="hour"&&(n.hour12!=null?f=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?f="hour12":f="hour24":f=r.hour12?"hour12":"hour24");let h=TN[f];if(typeof h=="object"&&(h=h[c]),h)return{literal:!1,val:h}}function NN(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function jN(a,n,r){const s=a.match(n);if(s){const l={};let c=1;for(const f in r)if(ms(r,f)){const h=r[f],p=h.groups?h.groups+1:1;!h.literal&&h.token&&(l[h.token.val[0]]=h.deser(s.slice(c,c+p))),c+=p}return[s,l]}else return[s,{}]}function AN(a){const n=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Ge(a.z)||(r=Ha.create(a.z)),Ge(a.Z)||(r||(r=new An(a.Z)),s=a.Z),Ge(a.q)||(a.M=(a.q-1)*3+1),Ge(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ge(a.u)||(a.S=Jh(a.u)),[Object.keys(a).reduce((c,f)=>{const h=n(f);return h&&(c[h]=a[f]),c},{}),r,s]}let Bd=null;function _N(){return Bd||(Bd=Fe.fromMillis(1555555555555)),Bd}function DN(a,n){if(a.literal)return a;const r=jn.macroTokenToFormatOpts(a.val),s=Vw(r,n);return s==null||s.includes(void 0)?a:s}function Iw(a,n){return Array.prototype.concat(...a.map(r=>DN(r,n)))}class $w{constructor(n,r){if(this.locale=n,this.format=r,this.tokens=Iw(jn.parseFormat(r),n),this.units=this.tokens.map(s=>CN(s,n)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=NN(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(n){if(this.isValid){const[r,s]=jN(n,this.regex,this.handlers),[l,c,f]=s?AN(s):[null,null,void 0];if(ms(s,"a")&&ms(s,"H"))throw new ss("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:f}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Hw(a,n,r){return new $w(a,r).explainFromTokens(n)}function MN(a,n,r){const{result:s,zone:l,specificOffset:c,invalidReason:f}=Hw(a,n,r);return[s,l,c,f]}function Vw(a,n){if(!a)return null;const s=jn.create(n,a).dtFormatter(_N()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(f=>ON(f,a,c))}const Ud="Invalid DateTime",X0=864e13;function Co(a){return new Na("unsupported zone",`the zone "${a.name}" is not supported`)}function Id(a){return a.weekData===null&&(a.weekData=Rc(a.c)),a.weekData}function $d(a){return a.localWeekData===null&&(a.localWeekData=Rc(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function di(a,n){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Fe({...r,...n,old:r})}function qw(a,n,r){let s=a-n*60*1e3;const l=r.offset(s);if(n===l)return[s,n];s-=(l-n)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function hc(a,n){a+=n*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function kc(a,n,r){return qw(Fc(a),n,r)}function K0(a,n){const r=a.o,s=a.c.year+Math.trunc(n.years),l=a.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,zc(s,l))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},f=ht.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),h=Fc(c);let[p,y]=qw(h,r,a.zone);return f!==0&&(p+=f,y=a.zone.offset(p)),{ts:p,o:y}}function as(a,n,r,s,l,c){const{setZone:f,zone:h}=r;if(a&&Object.keys(a).length!==0||n){const p=n||h,y=Fe.fromObject(a,{...r,zone:p,specificOffset:c});return f?y:y.setZone(h)}else return Fe.invalid(new Na("unparsable",`the input "${l}" can't be parsed as ${s}`))}function pc(a,n,r=!0){return a.isValid?jn.create(Et.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,n):null}function Hd(a,n,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=sn(a.c.year,s?6:4),r==="year")return l;if(n){if(l+="-",l+=sn(a.c.month),r==="month")return l;l+="-"}else if(l+=sn(a.c.month),r==="month")return l;return l+=sn(a.c.day),l}function Q0(a,n,r,s,l,c,f){let h=!r||a.c.millisecond!==0||a.c.second!==0,p="";switch(f){case"day":case"month":case"year":break;default:if(p+=sn(a.c.hour),f==="hour")break;if(n){if(p+=":",p+=sn(a.c.minute),f==="minute")break;h&&(p+=":",p+=sn(a.c.second))}else{if(p+=sn(a.c.minute),f==="minute")break;h&&(p+=sn(a.c.second))}if(f==="second")break;h&&(!s||a.c.millisecond!==0)&&(p+=".",p+=sn(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?p+="Z":a.o<0?(p+="-",p+=sn(Math.trunc(-a.o/60)),p+=":",p+=sn(Math.trunc(-a.o%60))):(p+="+",p+=sn(Math.trunc(a.o/60)),p+=":",p+=sn(Math.trunc(a.o%60)))),c&&(p+="["+a.zone.ianaName+"]"),p}const Yw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},RN={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zN={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Cc=["year","month","day","hour","minute","second","millisecond"],LN=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],BN=["year","ordinal","hour","minute","second","millisecond"];function Tc(a){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!n)throw new q1(a);return n}function J0(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Tc(a)}}function UN(a){if(To===void 0&&(To=Yt.now()),a.type!=="iana")return a.offset(To);const n=a.name;let r=Eh.get(n);return r===void 0&&(r=a.offset(To),Eh.set(n,r)),r}function W0(a,n){const r=Vr(n.zone,Yt.defaultZone);if(!r.isValid)return Fe.invalid(Co(r));const s=Et.fromObject(n);let l,c;if(Ge(a.year))l=Yt.now();else{for(const p of Cc)Ge(a[p])&&(a[p]=Yw[p]);const f=yw(a)||gw(a);if(f)return Fe.invalid(f);const h=UN(r);[l,c]=kc(a,h,r)}return new Fe({ts:l,zone:r,loc:s,o:c})}function eb(a,n,r){const s=Ge(r.round)?!0:r.round,l=Ge(r.rounding)?"trunc":r.rounding,c=(h,p)=>(h=Wh(h,s||r.calendary?0:2,r.calendary?"round":l),n.loc.clone(r).relFormatter(r).format(h,p)),f=h=>r.calendary?n.hasSame(a,h)?0:n.startOf(h).diff(a.startOf(h),h).get(h):n.diff(a,h).get(h);if(r.unit)return c(f(r.unit),r.unit);for(const h of r.units){const p=f(h);if(Math.abs(p)>=1)return c(p,h)}return c(a>n?-0:0,r.units[r.units.length-1])}function tb(a){let n={},r;return a.length>0&&typeof a[a.length-1]=="object"?(n=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[n,r]}let To;const Eh=new Map;class Fe{constructor(n){const r=n.zone||Yt.defaultZone;let s=n.invalid||(Number.isNaN(n.ts)?new Na("invalid input"):null)||(r.isValid?null:Co(r));this.ts=Ge(n.ts)?Yt.now():n.ts;let l=null,c=null;if(!s)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(r))[l,c]=[n.old.c,n.old.o];else{const h=Gr(n.o)&&!n.old?n.o:r.offset(this.ts);l=hc(this.ts,h),s=Number.isNaN(l.year)?new Na("invalid input"):null,l=s?null:l,c=s?null:h}this._zone=r,this.loc=n.loc||Et.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Fe({})}static local(){const[n,r]=tb(arguments),[s,l,c,f,h,p,y]=r;return W0({year:s,month:l,day:c,hour:f,minute:h,second:p,millisecond:y},n)}static utc(){const[n,r]=tb(arguments),[s,l,c,f,h,p,y]=r;return n.zone=An.utcInstance,W0({year:s,month:l,day:c,hour:f,minute:h,second:p,millisecond:y},n)}static fromJSDate(n,r={}){const s=yO(n)?n.valueOf():NaN;if(Number.isNaN(s))return Fe.invalid("invalid input");const l=Vr(r.zone,Yt.defaultZone);return l.isValid?new Fe({ts:s,zone:l,loc:Et.fromObject(r)}):Fe.invalid(Co(l))}static fromMillis(n,r={}){if(Gr(n))return n<-X0||n>X0?Fe.invalid("Timestamp out of range"):new Fe({ts:n,zone:Vr(r.zone,Yt.defaultZone),loc:Et.fromObject(r)});throw new Nn(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,r={}){if(Gr(n))return new Fe({ts:n*1e3,zone:Vr(r.zone,Yt.defaultZone),loc:Et.fromObject(r)});throw new Nn("fromSeconds requires a numerical input")}static fromObject(n,r={}){n=n||{};const s=Vr(r.zone,Yt.defaultZone);if(!s.isValid)return Fe.invalid(Co(s));const l=Et.fromObject(r),c=Lc(n,J0),{minDaysInFirstWeek:f,startOfWeek:h}=U0(c,l),p=Yt.now(),y=Ge(r.specificOffset)?s.offset(p):r.specificOffset,v=!Ge(c.ordinal),b=!Ge(c.year),S=!Ge(c.month)||!Ge(c.day),k=b||S,N=c.weekYear||c.weekNumber;if((k||v)&&N)throw new ss("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(S&&v)throw new ss("Can't mix ordinal dates with month/day");const P=N||c.weekday&&!k;let I,Q,K=hc(p,y);P?(I=LN,Q=RN,K=Rc(K,f,h)):v?(I=BN,Q=zN,K=Ld(K)):(I=Cc,Q=Yw);let z=!1;for(const Z of I){const fe=c[Z];Ge(fe)?z?c[Z]=Q[Z]:c[Z]=K[Z]:z=!0}const Y=P?hO(c,f,h):v?pO(c):yw(c),he=Y||gw(c);if(he)return Fe.invalid(he);const ue=P?L0(c,f,h):v?B0(c):c,[H,se]=kc(ue,y,s),W=new Fe({ts:H,zone:s,o:se,loc:l});return c.weekday&&k&&n.weekday!==W.weekday?Fe.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${W.toISO()}`):W.isValid?W:Fe.invalid(W.invalid)}static fromISO(n,r={}){const[s,l]=iN(n);return as(s,l,r,"ISO 8601",n)}static fromRFC2822(n,r={}){const[s,l]=sN(n);return as(s,l,r,"RFC 2822",n)}static fromHTTP(n,r={}){const[s,l]=oN(n);return as(s,l,r,"HTTP",r)}static fromFormat(n,r,s={}){if(Ge(n)||Ge(r))throw new Nn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,f=Et.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[h,p,y,v]=MN(f,n,r);return v?Fe.invalid(v):as(h,p,s,`format ${r}`,n,y)}static fromString(n,r,s={}){return Fe.fromFormat(n,r,s)}static fromSQL(n,r={}){const[s,l]=pN(n);return as(s,l,r,"SQL",n)}static invalid(n,r=null){if(!n)throw new Nn("need to specify a reason the DateTime is invalid");const s=n instanceof Na?n:new Na(n,r);if(Yt.throwOnInvalid)throw new VT(s);return new Fe({invalid:s})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,r={}){const s=Vw(n,Et.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(n,r={}){return Iw(jn.parseFormat(n),Et.fromObject(r)).map(l=>l.val).join("")}static resetCache(){To=void 0,Eh.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Id(this).weekYear:NaN}get weekNumber(){return this.isValid?Id(this).weekNumber:NaN}get weekday(){return this.isValid?Id(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?$d(this).weekday:NaN}get localWeekNumber(){return this.isValid?$d(this).weekNumber:NaN}get localWeekYear(){return this.isValid?$d(this).weekYear:NaN}get ordinal(){return this.isValid?Ld(this.c).ordinal:NaN}get monthShort(){return this.isValid?ko.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ko.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ko.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ko.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,r=6e4,s=Fc(this.c),l=this.zone.offset(s-n),c=this.zone.offset(s+n),f=this.zone.offset(s-l*r),h=this.zone.offset(s-c*r);if(f===h)return[this];const p=s-f*r,y=s-h*r,v=hc(p,f),b=hc(y,h);return v.hour===b.hour&&v.minute===b.minute&&v.second===b.second&&v.millisecond===b.millisecond?[di(this,{ts:p}),di(this,{ts:y})]:[this]}get isInLeapYear(){return Uo(this.year)}get daysInMonth(){return zc(this.year,this.month)}get daysInYear(){return this.isValid?ls(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ro(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ro(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:r,numberingSystem:s,calendar:l}=jn.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(n=0,r={}){return this.setZone(An.instance(n),r)}toLocal(){return this.setZone(Yt.defaultZone)}setZone(n,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(n=Vr(n,Yt.defaultZone),n.equals(this.zone))return this;if(n.isValid){let l=this.ts;if(r||s){const c=n.offset(this.ts),f=this.toObject();[l]=kc(f,c,n)}return di(this,{ts:l,zone:n})}else return Fe.invalid(Co(n))}reconfigure({locale:n,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:n,numberingSystem:r,outputCalendar:s});return di(this,{loc:l})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const r=Lc(n,J0),{minDaysInFirstWeek:s,startOfWeek:l}=U0(r,this.loc),c=!Ge(r.weekYear)||!Ge(r.weekNumber)||!Ge(r.weekday),f=!Ge(r.ordinal),h=!Ge(r.year),p=!Ge(r.month)||!Ge(r.day),y=h||p,v=r.weekYear||r.weekNumber;if((y||f)&&v)throw new ss("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&f)throw new ss("Can't mix ordinal dates with month/day");let b;c?b=L0({...Rc(this.c,s,l),...r},s,l):Ge(r.ordinal)?(b={...this.toObject(),...r},Ge(r.day)&&(b.day=Math.min(zc(b.year,b.month),b.day))):b=B0({...Ld(this.c),...r});const[S,k]=kc(b,this.o,this.zone);return di(this,{ts:S,o:k})}plus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n);return di(this,K0(this,r))}minus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n).negate();return di(this,K0(this,r))}startOf(n,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=ht.normalizeUnit(n);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:f}=this;f<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(n,r){return this.isValid?this.plus({[n]:1}).startOf(n,r).minus(1):this}toFormat(n,r={}){return this.isValid?jn.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,n):Ud}toLocaleString(n=Mc,r={}){return this.isValid?jn.create(this.loc.clone(r),n).formatDateTime(this):Ud}toLocaleParts(n={}){return this.isValid?jn.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:f="milliseconds"}={}){if(!this.isValid)return null;f=Tc(f);const h=n==="extended";let p=Hd(this,h,f);return Cc.indexOf(f)>=3&&(p+="T"),p+=Q0(this,h,r,s,l,c,f),p}toISODate({format:n="extended",precision:r="day"}={}){return this.isValid?Hd(this,n==="extended",Tc(r)):null}toISOWeekDate(){return pc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:f="extended",precision:h="milliseconds"}={}){return this.isValid?(h=Tc(h),(l&&Cc.indexOf(h)>=3?"T":"")+Q0(this,f==="extended",r,n,s,c,h)):null}toRFC2822(){return pc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return pc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Hd(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||n)&&(s&&(l+=" "),r?l+="z":n&&(l+="ZZ")),pc(this,l,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():Ud}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const r={...this.c};return n.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,r="milliseconds",s={}){if(!this.isValid||!n.isValid)return ht.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=gO(r).map(ht.normalizeUnit),f=n.valueOf()>this.valueOf(),h=f?this:n,p=f?n:this,y=wN(h,p,c,l);return f?y.negate():y}diffNow(n="milliseconds",r={}){return this.diff(Fe.now(),n,r)}until(n){return this.isValid?qt.fromDateTimes(this,n):this}hasSame(n,r,s){if(!this.isValid)return!1;const l=n.valueOf(),c=this.setZone(n.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const r=n.base||Fe.fromObject({},{zone:this.zone}),s=n.padding?this<r?-n.padding:n.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=n.unit;return Array.isArray(n.unit)&&(l=n.unit,c=void 0),eb(r,this.plus(s),{...n,numeric:"always",units:l,unit:c})}toRelativeCalendar(n={}){return this.isValid?eb(n.base||Fe.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(Fe.isDateTime))throw new Nn("min requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.min)}static max(...n){if(!n.every(Fe.isDateTime))throw new Nn("max requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.max)}static fromFormatExplain(n,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,f=Et.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return Hw(f,n,r)}static fromStringExplain(n,r,s={}){return Fe.fromFormatExplain(n,r,s)}static buildFormatParser(n,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=Et.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new $w(c,n)}static fromFormatParser(n,r,s={}){if(Ge(n)||Ge(r))throw new Nn("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,f=Et.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!f.equals(r.locale))throw new Nn(`fromFormatParser called with a locale of ${f}, but the format parser was created for ${r.locale}`);const{result:h,zone:p,specificOffset:y,invalidReason:v}=r.explainFromTokens(n);return v?Fe.invalid(v):as(h,p,s,`format ${r.format}`,n,y)}static get DATE_SHORT(){return Mc}static get DATE_MED(){return Y1}static get DATE_MED_WITH_WEEKDAY(){return GT}static get DATE_FULL(){return G1}static get DATE_HUGE(){return P1}static get TIME_SIMPLE(){return F1}static get TIME_WITH_SECONDS(){return Z1}static get TIME_WITH_SHORT_OFFSET(){return X1}static get TIME_WITH_LONG_OFFSET(){return K1}static get TIME_24_SIMPLE(){return Q1}static get TIME_24_WITH_SECONDS(){return J1}static get TIME_24_WITH_SHORT_OFFSET(){return W1}static get TIME_24_WITH_LONG_OFFSET(){return ew}static get DATETIME_SHORT(){return tw}static get DATETIME_SHORT_WITH_SECONDS(){return nw}static get DATETIME_MED(){return aw}static get DATETIME_MED_WITH_SECONDS(){return rw}static get DATETIME_MED_WITH_WEEKDAY(){return PT}static get DATETIME_FULL(){return iw}static get DATETIME_FULL_WITH_SECONDS(){return sw}static get DATETIME_HUGE(){return ow}static get DATETIME_HUGE_WITH_SECONDS(){return lw}}function wo(a){if(Fe.isDateTime(a))return a;if(a&&a.valueOf&&Gr(a.valueOf()))return Fe.fromJSDate(a);if(a&&typeof a=="object")return Fe.fromObject(a);throw new Nn(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const IN="3.7.2",$N=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Fe,Duration:ht,FixedOffsetZone:An,IANAZone:Ha,Info:ko,Interval:qt,InvalidZone:fw,Settings:Yt,SystemZone:Bo,VERSION:IN,Zone:ws},Symbol.toStringTag,{value:"Module"}));window.Rete=ME;window.React=rE;window.RefComponent=Hh;window.luxon=$N;window.nodeRegistry=On;window.sockets=O1;window.socket=ye;window.apiUrl=Vn;window.getApiBase=qc;window.apiFetch=async function(a,n={}){const r=Vn(a);return fetch(r,n)};let Pr={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const kh=new Set;function Gw(a){return kh.add(a),a({...Pr}),()=>kh.delete(a)}function Ur(a){Pr={...Pr,...a},kh.forEach(n=>n({...Pr}))}function HN(){return{...Pr}}async function VN(){Ur({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(Vn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const n=await a.json(),r=n.length,s=n.filter(p=>p.includes("/00_")),l=n.filter(p=>!p.includes("/00_"));Ur({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const p of s){const y=p.split("/").pop().replace(".js","");Ur({status:`Loading ${y}...`});try{await nb(Vn(p)),c++,Ur({loadedCount:c,progress:Math.round(c/r*100)})}catch(v){console.error(`[PluginLoader] Failed to load infrastructure ${p}`,v),Pr.failedPlugins.push({name:y,error:v.message})}}Ur({status:`Loading ${l.length} node plugins in parallel...`});const f=await Promise.allSettled(l.map(async p=>{const y=p.split("/").pop().replace(".js","");try{return await nb(Vn(p)),c++,Ur({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:y}}catch(v){return console.error(`[PluginLoader] Failed to load ${p}`,v),Pr.failedPlugins.push({name:y,error:v.message}),{success:!1,name:y,error:v.message}}})),h=Pr.failedPlugins.length;Ur({isLoading:!1,progress:100,status:h>0?`Loaded ${c} plugins (${h} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Ur({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function nb(a){return new Promise((n,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=n,s.onerror=r,document.body.appendChild(s)})}const Pw=x.createContext(null),ab={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function qN({id:a,type:n,message:r,duration:s,onRemove:l,action:c,actionLabel:f}){const[h,p]=x.useState(!1),y=ab[n]||ab.info;x.useEffect(()=>{if(s>0){const S=setTimeout(()=>{p(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(S)}},[a,s,l]);const v=()=>{p(!0),setTimeout(()=>l(a),300)},b=()=>{c&&c(),v()};return m.jsxs("div",{className:`toast ${y.className} ${h?"toast-exit":""}`,children:[m.jsx("span",{className:"toast-icon",children:y.icon}),m.jsx("span",{className:"toast-message",children:r}),c&&f&&m.jsx("button",{className:"toast-action",onClick:b,children:f}),m.jsx("button",{className:"toast-close",onClick:v,children:""})]})}function YN({children:a}){const[n,r]=x.useState([]);let s=0;const l=x.useCallback((h,p,y={})=>{const v=++s,b=typeof y=="number"?y:y.duration??4e3,S=typeof y=="object"?y.action:null,k=typeof y=="object"?y.actionLabel:null;return r(N=>[...N,{id:v,type:h,message:p,duration:b,action:S,actionLabel:k}]),v},[]),c=x.useCallback(h=>{r(p=>p.filter(y=>y.id!==h))},[]),f={success:(h,p)=>l("success",h,p),error:(h,p)=>l("error",h,typeof p=="number"?p:{duration:6e3,...p}),warning:(h,p)=>l("warning",h,p),info:(h,p)=>l("info",h,p),dismiss:c,dismissAll:()=>r([])};return m.jsxs(Pw.Provider,{value:f,children:[a,m.jsx("div",{className:"toast-container",children:n.map(h=>m.jsx(qN,{id:h.id,type:h.type,message:h.message,duration:h.duration,onRemove:c,action:h.action,actionLabel:h.actionLabel},h.id))})]})}function ap(){const a=x.useContext(Pw);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function GN(){const a=ap();return x.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const rb=window.location.pathname.includes("/api/hassio/ingress/");function PN({onSave:a,onLoad:n,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:f,isMerged:h=!1,onToggleMerged:p}){const[y,v]=x.useState(!1),[b,S]=x.useState(!1),[k,N]=x.useState(!1),[P,I]=x.useState([]),[Q,K]=x.useState(!1),[z,Y]=x.useState(!1),[he,ue]=x.useState(!1),[H,se]=x.useState(null),W=ap(),[Z,fe]=x.useState(()=>{const C=localStorage.getItem("dock-position");return C?JSON.parse(C):{x:20,y:20}}),[_e,Re]=x.useState(!1),[Ve,Ye]=x.useState({x:0,y:0}),[T,q]=x.useState(!0),[ce,ge]=x.useState(!0),[Se,E]=x.useState(!1),[B,D]=x.useState(new Date),[V,me]=x.useState({backend:ye.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[Ne,Ie]=x.useState({loaded:0,failed:0,total:0}),[et,Je]=x.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let It;const Zt=x.useRef(null),$t=x.useRef(null);x.useEffect(()=>{(async()=>{try{const M=await fetch("/api/version");if(M.ok){const oe=await M.json();se(oe.version)}}catch{}})()},[]),x.useEffect(()=>{It=Gw(M=>{let oe=0,de=M.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(oe=window.nodeRegistry.getAll().length,(!de||oe>de)&&(de=oe)):oe=M.loadedCount,Ie({loaded:oe,failed:M.failedPlugins?.length||0,total:de})});const C=M=>{M.target.tagName==="INPUT"||M.target.tagName==="TEXTAREA"||M.target.isContentEditable||(M.key==="?"||M.shiftKey&&M.code==="Slash")&&(M.preventDefault(),S(!0))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[]),x.useEffect(()=>{const C=()=>{me(De=>({...De,backend:!0})),ye.emit("request-hue-status")},M=()=>me(De=>({...De,backend:!1})),oe=De=>me(rt=>({...rt,ha:{connected:De.connected,wsConnected:De.wsConnected,deviceCount:De.deviceCount||0}})),de=De=>{De.hue&&me(rt=>({...rt,hue:De.hue})),De.kasa&&me(rt=>({...rt,kasa:De.kasa}))},xe=De=>{me(rt=>({...rt,hue:{connected:De.connected,deviceCount:De.deviceCount||0,bridgeIp:De.bridgeIp||null}}))};ye.on("connect",C),ye.on("disconnect",M),ye.on("ha-connection-status",oe),ye.on("device-counts",de),ye.on("hue-connection-status",xe);const Oe=De=>Je(De),$e=De=>Je(rt=>({...rt,...De,running:!0})),Ze=De=>Je(rt=>({...rt,...De,running:!1}));ye.on("engine-status",Oe),ye.on("engine-started",$e),ye.on("engine-stopped",Ze),me(De=>({...De,backend:ye.connected})),ye.connected&&(ye.emit("request-hue-status"),ye.emit("request-engine-status"));const gt=HN();let Be=0,He=gt.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(Be=window.nodeRegistry.getAll().length,(!He||Be>He)&&(He=Be)):Be=gt.loadedCount,Ie({loaded:Be,failed:gt.failedPlugins?.length||0,total:He}),()=>{ye.off("connect",C),ye.off("disconnect",M),ye.off("ha-connection-status",oe),ye.off("device-counts",de),ye.off("hue-connection-status",xe),ye.off("engine-status",Oe),ye.off("engine-started",$e),ye.off("engine-stopped",Ze),It&&It()}},[]),x.useEffect(()=>{const C=setInterval(()=>{D(new Date)},1e3);return()=>clearInterval(C)},[]);const Ke=()=>{const C={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return B.toLocaleDateString("en-US",C)};x.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(Z))},[Z]);const pt=C=>{h||C.target.closest(".dock-header")&&(Re(!0),Ye({x:C.clientX-Z.x,y:C.clientY-Z.y}))},Ht=C=>{_e&&fe({x:C.clientX-Ve.x,y:C.clientY-Ve.y})},dn=()=>{Re(!1)};x.useEffect(()=>{if(_e)return window.addEventListener("mousemove",Ht),window.addEventListener("mouseup",dn),()=>{window.removeEventListener("mousemove",Ht),window.removeEventListener("mouseup",dn)}},[_e,Ve]);const qa=()=>{$t.current?.click()},X=C=>{const M=C.target.files?.[0];if(M){const oe=new FileReader;oe.onload=de=>{try{const xe=JSON.parse(de.target.result);c(xe)}catch(xe){console.error("Failed to parse JSON:",xe),alert("Invalid JSON file")}},oe.readAsText(M)}C.target.value=""},ie=async()=>{N(!0),K(!0);try{const C=await Hn("/api/engine/graphs");if(C.ok){const M=await C.json();I(M.graphs||[])}else W.error("Failed to load graphs list"),I([])}catch(C){console.error("Failed to fetch server graphs:",C),W.error("Failed to connect to server"),I([])}finally{K(!1)}},ee=async C=>{try{const M=await Hn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(M.ok){const oe=await M.json();oe.graph&&(c(oe.graph),N(!1),W.success(`Loaded: ${C.replace(".json","")}`))}else W.error("Failed to load graph")}catch(M){console.error("Failed to load graph:",M),W.error("Failed to load graph")}},je=async(C,M)=>{M.stopPropagation();try{const oe=await Hn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(oe.ok){const de=await oe.json();if(de.graph){const xe=new Blob([JSON.stringify(de.graph,null,2)],{type:"application/json"}),Oe=URL.createObjectURL(xe),$e=document.createElement("a");$e.href=Oe,$e.download=C.endsWith(".json")?C:`${C}.json`,$e.click(),URL.revokeObjectURL(Oe),W.success(`Downloaded: ${C.replace(".json","")}`)}}else W.error("Failed to download graph")}catch(oe){console.error("Failed to download graph:",oe),W.error("Failed to download graph")}},ve=async()=>{if(!z){Y(!0);try{const C=await Hn("/api/update/check?force=true");if(!C.ok){const oe=await C.text();throw new Error(oe||`HTTP ${C.status}`)}const M=await C.json();if(M.isAddon){M.hasUpdate?W.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):W.success(` You're up to date! (v${M.currentVersion})`,4e3);return}M.hasUpdate?W.info(` Update available: ${M.currentVersion}  ${M.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{ye.emit("request-show-update-modal",M),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:M}))}}):W.success(` You're up to date! (v${M.currentVersion})`,4e3)}catch(C){console.error("Failed to check for updates:",C),W.error("Failed to check for updates: "+C.message,5e3)}finally{Y(!1)}}},re=async()=>{if(!he){ue(!0);try{const C=await Hn("/api/update/plugins/check");if(!C.ok)throw new Error(`HTTP ${C.status}`);const M=await C.json();if(!M.hasUpdates){W.success(" Plugins are up to date!",3e3);return}const oe=(M.newPlugins?.length||0)+(M.modifiedPlugins?.length||0);W.info(` ${oe} plugin update(s) available. Downloading...`,3e3);const de=await Hn("/api/update/plugins",{method:"POST"});if(!de.ok)throw new Error(`HTTP ${de.status}`);const xe=await de.json();xe.success&&xe.updated?.length>0?W.success(` Updated ${xe.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):xe.updated?.length===0?W.info("No plugins needed updating",3e3):W.error("Plugin update failed: "+(xe.error||"Unknown error"),5e3)}catch(C){console.error("Failed to update plugins:",C),W.error("Failed to update plugins: "+C.message,5e3)}finally{ue(!1)}}};return m.jsxs("div",{ref:Zt,className:`dock-container ${h?"dock-merged":""}`,style:{...h?{cursor:"default"}:{left:`${Z.x}px`,top:`${Z.y}px`,cursor:_e?"grabbing":"default"}},onMouseDown:pt,children:[m.jsxs("div",{className:"dock-header",style:{cursor:h?"default":"grab"},children:[m.jsxs("div",{className:"dock-header-row",children:[m.jsx("span",{className:"dock-title",children:" Control Panel"}),m.jsx("button",{type:"button",className:"dock-btn-small",onClick:C=>{C.stopPropagation(),p?.()},onMouseDown:C=>C.stopPropagation(),title:h?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:h?"Pop out":"Merge"})]}),m.jsx("span",{className:"dock-datetime",children:Ke()})]}),m.jsxs("div",{className:"dock-section",children:[m.jsx("div",{className:"dock-section-header",onClick:()=>q(!T),children:m.jsxs("span",{children:[T?"":""," Graph Tools ",f&&m.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),T&&m.jsxs("div",{className:"dock-section-content",children:[m.jsxs("button",{onClick:a,className:`dock-btn ${f?"dock-btn-unsaved":""}`,children:[" Save ",f&&"*"]}),m.jsx("button",{onClick:n,className:"dock-btn",children:" Load Last"}),m.jsx("button",{onClick:ie,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),m.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),m.jsx("button",{onClick:qa,className:"dock-btn",children:" Import File"}),m.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),m.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),m.jsx("button",{onClick:()=>ye.emit(et.running?"stop-engine":"start-engine"),className:`dock-btn ${et.running?"dock-btn-active":""}`,title:et.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:et.running?" Stop Engine":" Start Engine"}),m.jsx("input",{ref:$t,type:"file",accept:".json",style:{display:"none"},onChange:X})]})]}),m.jsxs("div",{className:"dock-section",children:[m.jsx("div",{className:"dock-section-header",onClick:()=>ge(!ce),children:m.jsxs("span",{children:[ce?"":""," Connection Status"]})}),ce&&m.jsxs("div",{className:"dock-section-content dock-status-grid",children:[m.jsxs("div",{className:`dock-status-item ${V.backend?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Backend"}),m.jsx("span",{className:"dock-status-value",children:V.backend?"Connected":"Offline"})]}),m.jsxs("div",{className:`dock-status-item ${V.ha.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),m.jsx("span",{className:"dock-status-value",children:V.ha.connected?`${V.ha.deviceCount} devices`:"Offline"})]}),m.jsxs("div",{className:`dock-status-item ${V.hue.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),m.jsx("span",{className:"dock-status-value",children:V.hue.connected?`${V.hue.deviceCount||0} lights${V.hue.bridgeIp?` (${V.hue.bridgeIp})`:""}`:"Offline"})]}),V.kasa.deviceCount>0&&m.jsxs("div",{className:`dock-status-item ${V.kasa.connected?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot"}),m.jsx("span",{className:"dock-status-label",children:"Kasa"}),m.jsxs("span",{className:"dock-status-value",children:[V.kasa.deviceCount," devices"]})]}),m.jsxs("div",{className:"dock-status-item plugins",children:[m.jsx("span",{className:"dock-status-dot",style:{background:Ne.failed>0?"#f59e0b":"#10b981"}}),m.jsx("span",{className:"dock-status-label",children:"Plugins"}),m.jsx("span",{className:"dock-status-value",children:Ne.total>0?`${Ne.loaded} / ${Ne.total} loaded${Ne.failed>0?` (${Ne.failed} failed)`:""}`:`${Ne.loaded} loaded`})]}),m.jsxs("div",{className:`dock-status-item ${et.running?"connected":"disconnected"}`,children:[m.jsx("span",{className:"dock-status-dot",style:{background:et.running?"#10b981":"#6b7280"}}),m.jsx("span",{className:"dock-status-label",children:"Engine"}),m.jsx("span",{className:"dock-status-value",children:et.running?`Running (${et.nodeCount} nodes)`:"Stopped"})]})]})]}),m.jsx(qC,{isExpanded:Se,onToggle:()=>E(!Se)}),m.jsxs("div",{className:"dock-section",children:[m.jsxs("div",{className:"dock-section-content",children:[m.jsx("button",{onClick:()=>v(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),m.jsx("button",{onClick:()=>S(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),m.jsx("button",{onClick:async()=>{let C=H||"unknown";try{const xe=await fetch("/api/version");xe.ok&&(C=(await xe.json()).version||C)}catch{}const M={version:C,userAgent:navigator.userAgent,isAddon:rb,backend:V.backend,ha:V.ha.connected,engine:et.running,plugins:Ne.loaded},oe=Object.entries(M).map(([xe,Oe])=>`- **${xe}**: ${Oe}`).join(`
`),de=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");de.searchParams.set("template","bug_report.md"),de.searchParams.set("title","[Bug]: "),de.searchParams.set("body",`##  Environment (auto-filled)
${oe}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(de.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),rb?m.jsx("button",{onClick:()=>W.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):m.jsx("button",{onClick:ve,disabled:z,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:z?" Checking...":" Check for Updates"}),m.jsx("button",{onClick:re,disabled:he,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:he?" Updating...":" Update Plugins"})]}),H&&m.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",H]})]}),m.jsx($C,{isOpen:y,onClose:()=>v(!1)}),m.jsx(VC,{isOpen:b,onClose:()=>S(!1)}),k&&m.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:m.jsxs("div",{className:"modal server-graphs-modal",onClick:C=>C.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:" Saved Graphs"}),m.jsx("button",{className:"modal-close",onClick:()=>N(!1),children:""})]}),m.jsx("div",{className:"modal-body",children:Q?m.jsx("div",{className:"loading-message",children:"Loading graphs..."}):P.length===0?m.jsxs("div",{className:"empty-message",children:[m.jsx("p",{children:"No saved graphs found."}),m.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):m.jsx("div",{className:"graphs-list",children:P.map((C,M)=>m.jsxs("div",{className:"graph-item",children:[m.jsxs("div",{className:"graph-info",onClick:()=>ee(C.name),title:"Click to load this graph",children:[m.jsx("span",{className:"graph-name",children:C.displayName}),m.jsx("span",{className:"graph-date",children:new Date(C.modified).toLocaleDateString()})]}),m.jsx("button",{className:"graph-download-btn",onClick:oe=>je(C.name,oe),title:"Download this graph to your computer",children:""})]},M))})})]})})]})}function FN({dockSlotRef:a}){const[n,r]=x.useState(!0),[s,l]=x.useState(!0),[c,f]=x.useState(null),[h,p]=x.useState(null),[y,v]=x.useState(ye?.connected??!1),[b,S]=x.useState({connected:!1,wsConnected:!1,deviceCount:0}),[k,N]=x.useState(new Map),[P,I]=x.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[Q,K]=x.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),z=x.useRef(null);x.useEffect(()=>{if(!ye)return;const Z=()=>{v(!0),ye.emit("request-ha-status")},fe=()=>{v(!1),S({connected:!1,wsConnected:!1,deviceCount:0})},_e=Ve=>{S(Ve)};ye.on("connect",Z),ye.on("disconnect",fe),ye.on("ha-connection-status",_e),ye.on("forecast-update",Ve=>{f(Ve)});const Re=Ve=>{const{id:Ye,state:T,on:q,name:ce}=Ve;if(!Ye)return;const ge=q!==void 0?q:T==="on"||T==="playing"||T==="open",Se=ce||Ve.friendly_name||Ve.attributes?.friendly_name||Ye.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(Ye.includes("light.")||Ye.includes("switch.")||Ye.startsWith("kasa_"))&&N(B=>{const D=new Map(B);return ge?D.set(Ye,{name:Se,on:!0}):D.delete(Ye),D})};return ye.on("device-state-update",Re),ye.emit("request-forecast"),ye.connected&&(v(!0),ye.emit("request-ha-status")),()=>{ye.off("connect",Z),ye.off("disconnect",fe),ye.off("ha-connection-status",_e),ye.off("forecast-update"),ye.off("device-state-update",Re)}},[]);const Y=()=>{ye?.emit("request-forecast")},he=Z=>{const fe=(Z||"").toLowerCase();return fe.includes("clear")||fe.includes("sun")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"5"}),m.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),m.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),m.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),m.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),m.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),m.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),m.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),m.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):fe.includes("rain")||fe.includes("drizzle")||fe.includes("shower")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),m.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),m.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),m.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),m.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),m.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),m.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):fe.includes("partly")||fe.includes("partial")||fe.includes("few")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),m.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),m.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),m.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),m.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),m.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),m.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):fe.includes("snow")||fe.includes("flurr")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),m.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),m.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),m.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),m.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),m.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),m.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):fe.includes("thunder")||fe.includes("storm")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),m.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):fe.includes("fog")||fe.includes("mist")||fe.includes("haze")?m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),m.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),m.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},ue=Z=>{if(!Z)return{day:"",date:""};let fe;if(typeof Z=="string"&&Z.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const Ve=Z.match(/(\w+),\s*(\w+)\s*(\d+)/);return Ve?{day:`${Ve[1]}, ${Ve[2]}`,date:Ve[3]}:{day:Z,date:""}}if(fe=new Date(parseInt(Z)||Z),isNaN(fe.getTime()))return{day:Z,date:""};const _e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${_e[fe.getUTCDay()]}, ${Re[fe.getUTCMonth()]}`,date:`${fe.getUTCDate()}`}},H=()=>{if(!c||!c.length)return m.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(h!==null){const Z=c[h],fe=ue(Z.date||Z.day);return m.jsxs("div",{className:"forecast-detail",children:[m.jsxs("div",{className:"forecast-detail-header",children:[m.jsx("button",{className:"detail-back-btn",onClick:()=>p(null),children:" Back"}),m.jsxs("span",{className:"detail-date",children:[fe.day," ",fe.date]})]}),m.jsxs("div",{className:"detail-main",children:[m.jsx("div",{className:"detail-icon",children:he(Z.conditions||Z.condition)}),m.jsxs("div",{className:"detail-temps",children:[m.jsxs("div",{className:"detail-high",children:[Z.high,""]}),m.jsxs("div",{className:"detail-low",children:[Z.low,""]})]}),m.jsx("div",{className:"detail-condition",children:Z.conditions||Z.condition||"N/A"})]}),Z.description&&m.jsx("div",{className:"detail-description",children:Z.description}),m.jsxs("div",{className:"detail-stats",children:[m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Precipitation"}),m.jsx("span",{className:"stat-value",children:Z.precipitation||Z.precip||"0%"})]}),Z.humidity&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Humidity"}),m.jsxs("span",{className:"stat-value",children:[Z.humidity,"%"]})]}),Z.wind&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:"Wind"}),m.jsx("span",{className:"stat-value",children:Z.wind})]}),(Z.sunrise||Z.sunset)&&m.jsxs("div",{className:"detail-sun-times",children:[Z.sunrise&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:" Sunrise"}),m.jsx("span",{className:"stat-value",children:Z.sunrise})]}),Z.sunset&&m.jsxs("div",{className:"detail-stat",children:[m.jsx("span",{className:"stat-label",children:" Sunset"}),m.jsx("span",{className:"stat-value",children:Z.sunset})]})]})]})]})}return c.slice(0,5).map((Z,fe)=>{const _e=ue(Z.date||Z.day);return m.jsxs("div",{className:"forecast-card",onClick:()=>p(fe),children:[m.jsxs("div",{className:"forecast-row-top",children:[m.jsxs("div",{className:"forecast-date",children:[m.jsx("span",{className:"date-day",children:_e.day}),m.jsx("span",{className:"date-num",children:_e.date})]}),m.jsx("div",{className:"forecast-icon",children:he(Z.conditions||Z.condition)})]}),m.jsxs("div",{className:"forecast-row-bottom",children:[m.jsxs("span",{className:"temp-low",children:[Z.low,""]}),m.jsxs("span",{className:"temp-high",children:[Z.high,""]}),m.jsxs("span",{className:"precip-group",children:[m.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),m.jsx("path",{d:"M16 14v4"}),m.jsx("path",{d:"M8 14v4"}),m.jsx("path",{d:"M12 16v4"})]}),m.jsx("span",{className:"precip-value",children:Z.precipitation||Z.precip||"0%"})]})]})]},fe)})},se=Z=>{Z.preventDefault();const fe=Z.clientX,_e=P,Re=Ye=>{const T=fe-Ye.clientX,q=Math.max(250,Math.min(500,_e+T));I(q),localStorage.setItem("forecastPanelWidth",q)},Ve=()=>{document.removeEventListener("mousemove",Re),document.removeEventListener("mouseup",Ve)};document.addEventListener("mousemove",Re),document.addEventListener("mouseup",Ve)},W=Z=>{Z.preventDefault(),Z.stopPropagation();const fe=Z.clientY,_e=Q,Re=Ye=>{const T=fe-Ye.clientY,q=Math.max(100,Math.min(500,_e+T));K(q),localStorage.setItem("devicesOnHeight",q)},Ve=()=>{document.removeEventListener("mousemove",Re),document.removeEventListener("mouseup",Ve)};document.addEventListener("mousemove",Re),document.addEventListener("mouseup",Ve)};return m.jsxs("div",{className:"forecast-panel",style:{width:P},children:[m.jsx("div",{className:"forecast-resize-handle",ref:z,onMouseDown:se,children:m.jsx("div",{className:"forecast-resize-grip"})}),m.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!n),children:[m.jsx("span",{children:"5-Day Forecast"}),m.jsx("button",{onClick:Z=>{Z.stopPropagation(),Y()},className:"forecast-refresh-btn",children:"Refresh"})]}),n&&m.jsx("div",{className:"forecast-panel-content",children:H()}),m.jsx("div",{className:"forecast-dock-slot",ref:a}),m.jsxs("div",{className:"devices-on-section",style:{height:s?Q:"auto"},children:[m.jsx("div",{className:"devices-resize-handle",onMouseDown:W,children:m.jsx("div",{className:"devices-resize-grip"})}),m.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[m.jsxs("span",{children:["Devices ON (",k.size,")"]}),m.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&m.jsx("div",{className:"devices-on-list",children:k.size===0?m.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(k.values()).sort((Z,fe)=>Z.name.localeCompare(fe.name)).map((Z,fe)=>m.jsxs("div",{className:"device-on-item",children:[m.jsx("span",{className:"device-on-indicator"}),m.jsx("span",{className:"device-on-name",children:Z.name})]},fe))})]}),m.jsxs("div",{className:"status-indicators",children:[m.jsx("div",{className:`connection-status ${y?"connected":"disconnected"}`,children:y?"Backend":"Backend X"}),m.jsx("div",{className:`connection-status ${b.connected?"connected":"disconnected"}`,children:b.connected?`HA (${b.deviceCount})`:"HA X"})]})]})}function ZN({width:a=180,panelRef:n,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:f}){const h=window.T2Controls?.Tooltip,p=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,y=(s||[]).reduce((b,S)=>b+(S?.labels||[]).length,0),v=b=>{const S=(b||"").toString().trim();S&&c?.(S)};return m.jsxs("div",{ref:n,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:b=>b.stopPropagation(),children:[m.jsx("div",{className:"favorites-header",children:m.jsxs("div",{className:"favorites-header-row",children:[m.jsx("span",{className:"favorites-title",children:" Favorites"}),h?m.jsx(h,{text:p,position:"bottom",children:m.jsx("span",{className:"favorites-help-fallback",children:"?"})}):m.jsx("span",{className:"favorites-help-fallback",title:p,children:"?"})]})}),m.jsx("div",{className:"favorites-list",children:y===0?m.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(b=>{const S=(b?.category||"Other").toString(),k=Array.isArray(b?.labels)?b.labels:[];return k.length===0?null:m.jsxs("div",{className:"favorites-group",children:[m.jsx("div",{className:"favorites-divider",children:m.jsx("span",{className:"favorites-divider-text",children:S})}),k.map(N=>m.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>f?.(N),onContextMenu:P=>{P.preventDefault(),P.stopPropagation(),v(N)},title:"Click: add to canvas  Right-click: remove",children:N},`${S}:${N}`))]},S)})})]})}function XN({isOpen:a,onClose:n,onSave:r,currentGraphData:s}){const[l,c]=x.useState(""),[f,h]=x.useState([]),[p,y]=x.useState(!1),[v,b]=x.useState(!1),[S,k]=x.useState(null),N=x.useRef(null);x.useEffect(()=>{a&&(P(),setTimeout(()=>N.current?.focus(),100))},[a]);const P=async()=>{y(!0),k(null);try{const Y=await(await fetch(Vn("/api/engine/graphs"))).json();Y.success?h(Y.graphs||[]):k("Failed to load existing graphs")}catch(z){console.error("[SaveModal] Error fetching graphs:",z),k("Failed to connect to server")}finally{y(!1)}},I=async()=>{if(!l.trim()){k("Please enter a filename");return}b(!0),k(null);try{const Y=await(await fetch(Vn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();Y.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${Y.filename}"`,3e3),r?.(Y.filename),n()):k(Y.error||"Failed to save graph")}catch(z){console.error("[SaveModal] Error saving:",z),k("Failed to save graph")}finally{b(!1)}},Q=z=>{z.key==="Enter"&&!v?I():z.key==="Escape"&&n()},K=z=>{const Y=z.replace(".json","");c(Y),N.current?.focus()};return a?m.jsx("div",{className:"save-modal-overlay",onClick:n,children:m.jsxs("div",{className:"save-modal",onClick:z=>z.stopPropagation(),children:[m.jsxs("div",{className:"save-modal-header",children:[m.jsx("h2",{children:" Save Graph"}),m.jsx("button",{className:"save-modal-close",onClick:n,children:""})]}),m.jsxs("div",{className:"save-modal-content",children:[m.jsxs("div",{className:"save-modal-input-section",children:[m.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),m.jsxs("div",{className:"save-modal-input-row",children:[m.jsx("input",{ref:N,id:"graph-filename",type:"text",value:l,onChange:z=>c(z.target.value),onKeyDown:Q,placeholder:"my_automation_graph",disabled:v}),m.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),S&&m.jsxs("div",{className:"save-modal-error",children:[" ",S]}),m.jsxs("div",{className:"save-modal-existing",children:[m.jsxs("h3",{children:["Existing Graphs ",p&&m.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),f.length===0&&!p?m.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):m.jsx("ul",{className:"save-modal-list",children:f.map(z=>m.jsxs("li",{onClick:()=>K(z.name),className:l===z.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(z.modified).toLocaleString()}`,children:[m.jsx("span",{className:"graph-name",children:z.displayName}),m.jsx("span",{className:"graph-date",children:new Date(z.modified).toLocaleDateString()})]},z.name))})]})]}),m.jsxs("div",{className:"save-modal-footer",children:[m.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:n,disabled:v,children:"Cancel"}),m.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:I,disabled:v||!l.trim(),children:v?"Saving...":" Save"})]})]})}):null}function KN({visible:a,position:n,items:r,onClose:s,onSelect:l}){const c=x.useRef(null),f=x.useRef(null),[h,p]=x.useState(null),[y,v]=x.useState({x:0,y:0}),[b,S]=x.useState(""),k=x.useRef(null),N=x.useRef(null);x.useEffect(()=>{a&&(S(""),p(null),setTimeout(()=>{f.current?.focus()},50))},[a]);const P=x.useMemo(()=>{if(!b.trim())return r;const H=b.toLowerCase(),se=[];for(const W of r)if(W.subitems)for(const Z of W.subitems)Z.label&&Z.label.toLowerCase().includes(H)&&se.push({...Z,categoryHint:W.label});else W.label&&W.label.toLowerCase().includes(H)&&se.push(W);return se},[r,b]),I=b.trim().length>0;x.useEffect(()=>{if(!a)return;const H=W=>{c.current&&!c.current.contains(W.target)&&s()},se=W=>{W.key==="Escape"&&s()};return document.addEventListener("mousedown",H),document.addEventListener("keydown",se),()=>{document.removeEventListener("mousedown",H),document.removeEventListener("keydown",se)}},[a,s]),x.useEffect(()=>()=>{k.current&&clearTimeout(k.current),N.current&&clearTimeout(N.current)},[]);const Q=x.useCallback((H,se,W)=>{N.current&&(clearTimeout(N.current),N.current=null),se.subitems&&se.subitems.length>0?p(W):p(null)},[]),K=x.useCallback(()=>{N.current=setTimeout(()=>{p(null)},150)},[]),z=x.useCallback(()=>{N.current&&(clearTimeout(N.current),N.current=null)},[]),Y=x.useCallback(()=>{N.current=setTimeout(()=>{p(null)},100)},[]),he=x.useCallback(H=>{H.subitems&&H.subitems.length>0||(l(H),s())},[l,s]);if(!a)return null;const ue={...n};if(typeof window<"u"){const se=Math.min(P.length*36+50,400);n.x+220>window.innerWidth&&(ue.x=window.innerWidth-220-10),n.y+se>window.innerHeight&&(ue.y=Math.max(10,window.innerHeight-se-10))}return m.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:ue.x,top:ue.y},children:[m.jsxs("div",{className:"fast-menu-search",children:[m.jsx("input",{ref:f,type:"text",placeholder:"Search nodes...",value:b,onChange:H=>S(H.target.value),onClick:H=>H.stopPropagation(),onKeyDown:H=>{if(H.key==="Enter"&&P.length===1){const se=P[0];se.subitems||he(se)}H.stopPropagation()}}),b&&m.jsx("span",{className:"search-clear",onClick:H=>{H.stopPropagation(),S(""),f.current?.focus()},children:""})]}),m.jsx("div",{className:"fast-menu-results",children:P.length===0?m.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):I?P.map((H,se)=>m.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>he(H),children:[m.jsx("span",{className:"menu-label",children:H.label}),H.categoryHint&&m.jsx("span",{className:"category-hint",children:H.categoryHint})]},H.label||se)):P.map((H,se)=>m.jsxs("div",{className:`fast-menu-item ${H.subitems?"has-submenu":""} ${h===se?"active":""}`,onMouseEnter:W=>Q(W,H,se),onMouseLeave:K,onClick:()=>he(H),children:[H.icon&&m.jsx("span",{className:"menu-icon",children:H.icon}),m.jsx("span",{className:"menu-label",children:H.label}),H.subitems&&m.jsx("span",{className:"submenu-arrow",children:""}),h===se&&H.subitems&&m.jsx("div",{className:"fast-submenu",onMouseEnter:z,onMouseLeave:Y,children:H.subitems.map((W,Z)=>m.jsx("div",{className:"fast-menu-item",title:W.description||"",onClick:fe=>{fe.stopPropagation(),he(W)},children:m.jsx("span",{className:"menu-label",children:W.label})},W.label||Z))})]},H.label||se))})]})}function ib(a){const n=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))n.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&n.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):n.push(`Node at index ${c} is missing "id"`),l.label||n.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&n.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))n.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,f)=>{c.source?s.has(c.source)||n.push(`Connection ${f} references non-existent source node: ${c.source}`):n.push(`Connection at index ${f} is missing "source"`),c.target?s.has(c.target)||n.push(`Connection ${f} references non-existent target node: ${c.target}`):n.push(`Connection at index ${f} is missing "target"`),c.sourceOutput||r.push(`Connection ${f} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${f} is missing "targetInput"`);const h=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(h)&&r.push(`Duplicate connection: ${h}`),l.add(h),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:n.length===0,errors:n,warnings:r}}function sb(a){const n=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],n.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],n.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((f,h)=>{if(!f.id)return n.push(`Removed node at index ${h} (missing ID)`),r=!0,!1;if(c.has(f.id)){const p=`${f.id}_${Date.now()}_${h}`;n.push(`Renamed duplicate node ID ${f.id} to ${p}`),f.id=p,r=!0}return c.add(f.id),l.add(f.id),f.label||(f.label="Unknown Node",n.push(`Set label for node ${f.id} to "Unknown Node"`),r=!0),!f.position||typeof f.position!="object"?(f.position={x:0,y:0},n.push(`Reset position for node ${f.id}`),r=!0):(Number.isFinite(f.position.x)||(f.position.x=0,n.push(`Fixed NaN x position for node ${f.id}`),r=!0),Number.isFinite(f.position.y)||(f.position.y=0,n.push(`Fixed NaN y position for node ${f.id}`),r=!0)),!0}),s.connections=s.connections.filter((f,h)=>l.has(f.source)?l.has(f.target)?!0:(n.push(`Removed connection ${h} (invalid target: ${f.target})`),r=!0,!1):(n.push(`Removed connection ${h} (invalid source: ${f.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,n.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,n.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,n.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:n}}class gj extends Gt.Control{constructor(n,r){super(),this.label=n,this.onClick=r}}function QN({data:a}){return m.jsx("button",{onPointerDown:n=>n.stopPropagation(),onDoubleClick:n=>n.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.25)",n.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.1)",n.currentTarget.style.boxShadow="none"},children:a.label})}class vj extends Gt.Control{constructor(n,r,s,l){super(),this.label=n,this.values=r,this.value=s,this.onChange=l}setValue(n){this.value=n}}function JN({data:a}){const[,n]=x.useReducer(f=>f+1,0),[r,s]=x.useState(a.value);x.useEffect(()=>{s(a.value)},[a.value]),x.useEffect(()=>{n()},[a]);const l=f=>{const h=f.target.value;s(h),typeof a.setValue=="function"?a.setValue(h):a.value=h,a.onChange&&a.onChange(h)},c=a.values||[];return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("select",{value:r,onChange:l,onPointerDown:f=>f.stopPropagation(),onDoubleClick:f=>f.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((f,h)=>m.jsx("option",{value:f,style:{background:"#0a0f14",color:"#00f3ff"},children:f},`${h}-${f}`))})]})}class bj extends Gt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function WN({data:a}){const[n,r]=x.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class wj extends Gt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function ej({data:a}){const[n,r]=x.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return m.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[m.jsx("input",{type:"checkbox",checked:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),m.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Sj extends Gt.Control{constructor(n,r,s,l={}){super(),this.label=n,this.value=r,this.onChange=s,this.options=l}}function tj({data:a}){const[n,r]=x.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:"number",value:n,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class xj extends Gt.Control{constructor(n,r,s,l="text"){super(),this.label=n,this.value=r,this.onChange=s,this.type=l}}function nj({data:a}){const[n,r]=x.useState(a.value);x.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return m.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&m.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),m.jsx("input",{type:a.type||"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Ej extends Gt.Control{constructor(n,r){super(),this.deviceId=n,this.getState=r}}function aj({data:a}){const n=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!n)return m.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:m.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=n.on||n.state==="on";console.log("[DeviceStateControl] state:",{deviceId:a.deviceId,"state.brightness":n.brightness,"state.attributes?.brightness":n.attributes?.brightness,"state.on":n.on,"state.state":n.state});const l=n.attributes&&typeof n.attributes.brightness=="number"?Number(n.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof n.brightness=="number"&&Number.isFinite(n.brightness)?c=n.brightness>100?Math.round(n.brightness/255*100):Math.round(n.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c)),console.log("[DeviceStateControl] computed brightness:",c);const f=n.hs_color||[0,0],[h,p]=f;let y="#e74c3c";s&&(p===0?y="#f1c40f":y=`hsl(${h}, ${p}%, 50%)`);const v={width:"14px",height:"14px",borderRadius:"50%",background:y,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:y,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${y}`:"none"};return m.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[m.jsx("div",{style:v}),m.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:n.name||a.deviceId})]}),m.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&m.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:m.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${y})`,transition:"width 0.3s ease-out"}})})]})}function rj(a){const{state:n,color:r}=a.data.data||{},s=n==="on"||n==="open"||n==="playing",l=r||(s?"#00f3ff":"#333");return m.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[m.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),m.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function ij(a){const[,n]=x.useState(0);x.useEffect(()=>{let b=JSON.stringify(a.data.data||{});const S=setInterval(()=>{const k=JSON.stringify(a.data.data||{});k!==b&&(b=k,n(N=>N+1))},100);return()=>clearInterval(S)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:f}=a.data.data||{};let h="#444";s&&s.length===2?h=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(h="#ffaa00");const p=c==="on"||f===!0;let y=typeof r=="number"&&Number.isFinite(r)?r:0;y>100&&(y=y/255*100),y=Math.max(0,Math.min(100,y));const v=p?y:0;return m.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:b=>b.stopPropagation(),children:m.jsx("div",{style:{width:`${v}%`,height:"100%",backgroundColor:h,transition:"all 0.3s ease",boxShadow:v>0?`0 0 10px ${h}`:"none"}})})}function sj(a){const{power:n,energy:r}=a.data.data||{};return n===null&&r===null?m.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):m.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("span",{children:"PWR:"}),m.jsx("span",{style:{color:"#00f3ff"},children:n!==null?`${n} W`:"--"})]}),r!==null&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsx("span",{children:"NRG:"}),m.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const oj=window.EDITOR_DEBUG,Ce=(...a)=>oj&&console.debug("[Editor]",...a),lj=Aa.memo(({data:a,socketKey:n,side:r})=>{let l=a?.name||"any";if(n&&typeof n=="string"){const f=n.toLowerCase();f.includes("hsv")||f.includes("color")?l="hsv_info":f.includes("trigger")||f.includes("enable")||f.includes("active")?l="boolean":(f.includes("light")||f.includes("device"))&&(l="light_info")}const c=`${n||"socket"} (${l})`;return Aa.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function cj(){const a=x.useRef(null),[n,r]=x.useState(null),[s,l]=x.useState(null),[c,f]=x.useState(null),[h,p]=x.useState(null),[y,v]=x.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),b=x.useRef(null),S=x.useRef(null);x.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(y))}catch{}},[y]);const k=x.useRef(!1),N=x.useRef(new Set),P=x.useRef(null),I=x.useRef(!1),Q=x.useRef(null),K=x.useRef(null),z=x.useRef(null),Y=x.useRef({x:0,y:0}),he=x.useRef(!1),ue=x.useRef([]),[H,se]=x.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),W=180,Z="favoriteNodes",[fe,_e]=x.useState(()=>{try{const X=localStorage.getItem(Z),ie=X?JSON.parse(X):null,ee=re=>{const C=[];for(const M of Array.isArray(re)?re:[]){if(typeof M!="string")continue;const oe=M.trim();oe&&(C.includes(oe)||C.push(oe))}return C};if(Array.isArray(ie)){const re=ee(ie);return re.length?[{category:"Other",labels:re}]:[]}const je=Array.isArray(ie?.groups)?ie.groups:Array.isArray(ie?.favoriteGroups)?ie.favoriteGroups:Array.isArray(ie)?ie:null;if(!je)return[];const ve=[];for(const re of je){const C=(re?.category||"Other").toString().trim()||"Other",M=ee(re?.labels);M.length!==0&&ve.push({category:C,labels:M})}return ve}catch{return[]}}),Re=x.useRef(null),[Ve,Ye]=x.useState(!1),T=x.useRef(null),[q,ce]=x.useState(!1),[ge,Se]=x.useState(null);x.useEffect(()=>{try{localStorage.setItem(Z,JSON.stringify({version:2,groups:fe}))}catch{}},[fe]);const E=x.useCallback(X=>{const ie=(X||"").toString().trim();if(!ie)return;const je=(On.getByLabel(ie)?.category||"Other").toString().trim()||"Other";_e(ve=>{for(const M of ve)if(Array.isArray(M?.labels)&&M.labels.includes(ie))return ve;const re=ve.map(M=>({category:M.category,labels:[...M.labels]})),C=re.findIndex(M=>M.category===je);return C===-1?re.push({category:je,labels:[ie]}):re[C].labels.push(ie),re})},[]),B=x.useCallback(X=>{const ie=(X||"").toString().trim();ie&&_e(ee=>{const je=[];for(const ve of ee){const re=(ve?.labels||[]).filter(C=>C!==ie);re.length!==0&&je.push({category:ve.category,labels:re})}return je})},[]),D=x.useCallback(async X=>{const ie=a.current,ee=Q.current,je=K.current;if(!ie||!ee||!je)return;const ve=ie.getBoundingClientRect(),re={x:ve.left+ve.width/2,y:ve.top+ve.height/2};try{const oe=window._t2GetMenuItems;if(typeof oe=="function"){const de=oe();for(const xe of de||[])for(const Oe of xe.subitems||[])if(Oe.label===X&&typeof Oe.handler=="function"){await Oe.handler(re);return}}}catch(oe){console.warn("[Favorites] Failed to create via context handlers:",oe)}const C=On.getByLabel(X);if(!C)return;const M=()=>{try{P.current?.()}catch{}};try{const oe=C.factory(M);await ee.addNode(oe);const de=je.area.transform,xe=(re.x-de.x)/de.k,Oe=(re.y-de.y)/de.k;await je.translate(oe.id,{x:xe,y:Oe})}catch(oe){console.warn("[Favorites] Fallback create failed:",oe)}},[]);x.useEffect(()=>{try{const X=On.getAll();if(X.length===0)return;const ie=new Map;for(const ee of X)ee?.label&&ie.set(ee.label,(ee.category||"Other").toString().trim()||"Other");_e(ee=>{const je=[],ve=new Map,re=(C,M)=>{ve.has(C)||(ve.set(C,[]),je.push(C));const oe=ve.get(C);oe.includes(M)||oe.push(M)};for(const C of ee)for(const M of C?.labels||[]){const oe=ie.get(M);oe&&re(oe,M)}return je.map(C=>({category:C,labels:ve.get(C)})).filter(C=>C.labels.length>0)})}catch{}},[n]);const V=x.useCallback(async X=>{await new Promise(G=>{const ne=()=>{const pe=X.getBoundingClientRect();pe.width>0&&pe.height>0?G():requestAnimationFrame(ne)};requestAnimationFrame(ne)});const ie=new Fr,ee=new Ab(X),je=new wk,ve=new CC({createRoot:cb.createRoot}),re=new LC;ie.use(re);let C=0,M=0,oe=Date.now();window._t2PerfStats=()=>{const G=(Date.now()-oe)/1e3;return console.log(`[Perf] In ${G.toFixed(1)}s: ${C} process calls, ${M} skipped (${(C/G).toFixed(1)}/sec)`),{calls:C,skipped:M,perSecond:C/G}},window._t2PerfReset=()=>{C=0,M=0,oe=Date.now(),console.log("[Perf] Stats reset")};let de=null;const xe=()=>{const G=ie?.getNodes?.()?.length||0;return G<50?16:G<100?32:G<150?50:100};let Oe=!1;const $e=async()=>{if(Oe){M++;return}if(de)return;C++;const G=xe();de=setTimeout(async()=>{de=null,Oe=!0;try{const ne=ie.getNodes(),pe=ie.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",ne.map(ke=>`${ke.id}:${ke.label}`)),console.log("[Editor] process() - connections:",pe.map(ke=>`${ke.source}:${ke.sourceOutput} -> ${ke.target}:${ke.targetInput}`)),window._debugProcess=!1),re.reset();for(const ke of ne)try{await re.fetch(ke.id)}catch{}}finally{Oe=!1}},G)},Ze=async()=>{if(!Oe){de&&(clearTimeout(de),de=null),Oe=!0;try{re.reset();for(const G of ie.getNodes())try{await re.fetch(G.id)}catch{}}finally{Oe=!1}}},gt=new Set;let Be=null;const He=G=>{gt.add(G),Be||(Be=setTimeout(()=>{Be=null,gt.forEach(ne=>{ee.update("node",ne)}),gt.clear(),$e()},16))},De=()=>{$e()},rt=()=>{const G=On.getAll(),ne={};G.forEach(ke=>{const Xe=ke.category||"Other";ne[Xe]||(ne[Xe]=[]),ne[Xe].push({label:ke.label,order:ke.order,description:ke.description,handler:async Vt=>{let en;const pn=()=>{ke.updateStrategy==="dataflow"?De():He(en.id)};en=ke.factory(pn),await ie.addNode(en);const cn=ee.area.transform,un=(Vt.x-cn.x)/cn.k,kn=(Vt.y-cn.y)/cn.k;await ee.translate(en.id,{x:un,y:kn})}})});const pe=window.T2Controls?.THEME?.categories||{};return Object.entries(ne).map(([ke,Xe])=>({label:ke,icon:pe[ke]?.icon||"",subitems:Xe.sort((Vt,en)=>{const pn=Vt.order??999,cn=en.order??999;return pn!==cn?pn-cn:Vt.label.localeCompare(en.label)})})).sort((ke,Xe)=>ke.label.localeCompare(Xe.label))};window._t2GetMenuItems=rt,window._t2Editor=ie,window._t2Area=ee,window._t2Process=$e,window._t2ProcessImmediate=Ze,window._t2Engine=re;const mt=Ir.selector();ve.addPreset(jd.classic.setup({customize:{node(G){const ne=On.getByInstance(G.payload);return ne?ne.component:jd.classic.Node},socket(G){const ne=G.key,pe=G.side;return function({data:ke}){return Aa.createElement(lj,{data:ke,socketKey:ne,side:pe})}},control(G){if(G.payload instanceof Gt.Control){const pe=G.payload.constructor.name;if(pe==="ButtonControl")return QN;if(pe==="DropdownControl")return JN;if(pe==="TextControl")return WN;if(pe==="SwitchControl")return ej;if(pe==="NumberControl")return tj;if(pe==="InputControl")return nj;if(pe==="DeviceStateControl")return aj;if(pe==="StatusIndicatorControl")return rj;if(pe==="ColorBarControl")return ij;if(pe==="PowerStatsControl")return sj}return jd.classic.Control}}})),je.addPreset(mk.classic.setup()),ie.use(ee),ee.use(je),ee.use(ve),Ir.selectableNodes(ee,mt,{accumulating:Ir.accumulateOnCtrl()}),Ir.simpleNodesOrder(ee),ie.addPipe(G=>{if(G.type==="nodecreated"){const ne=G.data,pe=On.getByInstance(ne);pe&&pe.isBackdrop&&setTimeout(()=>{const Ee=ee.nodeViews.get(ne.id);Ee&&Ee.element&&(Ee.element.style.zIndex="-10",Ce("[Backdrop] Set z-index on creation for:",ne.id))},50)}return G});let Rt=!1,Xt=!1,A={x:0,y:0};je.addPipe(G=>(G.type==="connectionpick"?(Rt=!0,Ce(" Connection pick - wire dragging started")):G.type==="connectiondrop"&&(Rt=!1,Xt=!1,Ce(" Connection drop - wire dragging ended")),G));const R=G=>{if(Rt)if(G.ctrlKey||G.metaKey)if(!Xt)Xt=!0,A={x:G.clientX,y:G.clientY},X.style.cursor="grab";else{const ne=G.clientX-A.x,pe=G.clientY-A.y;if(ne!==0||pe!==0){const Ee=ee.area.transform;ee.area.translate(Ee.x+ne,Ee.y+pe),A={x:G.clientX,y:G.clientY}}}else Xt&&(Xt=!1,X.style.cursor="")},le=G=>{(G.key==="Control"||G.key==="Meta")&&Xt&&(Xt=!1,X.style.cursor="")};window.addEventListener("pointermove",R),window.addEventListener("keyup",le);let be=!1,Ae=!1,yt=null,Gn=!1,Pe={x:0,y:0},Mt={x:0,y:0};const Ot=G=>{G.code==="Space"&&be&&yt&&(Gn=!0,Mt={x:0,y:0},G.preventDefault())},kt=G=>{if(G.code==="Space"&&(Gn=!1,Ae&&yt)){const ne=ee.nodeViews.get(yt);if(ne){const pe=ee.area.transform,Ee=Mt.x/pe.k,ke=Mt.y/pe.k,Xe={x:ne.position.x-Ee,y:ne.position.y-ke};k.current=!0,ee.translate(yt,Xe).finally(()=>{k.current=!1})}Ae=!1,X.style.cursor=""}},Cs=G=>{if(!(!be||!yt))if(Gn)if(!Ae)Ae=!0,Pe={x:G.clientX,y:G.clientY},Mt={x:0,y:0},X.style.cursor="grab";else{const ne=G.clientX-Pe.x,pe=G.clientY-Pe.y;if(ne!==0||pe!==0){const Ee=ee.area.transform;ee.area.translate(Ee.x+ne,Ee.y+pe),Mt.x+=ne,Mt.y+=pe,Pe={x:G.clientX,y:G.clientY}}}else Ae&&(Ae=!1,X.style.cursor="")};window.addEventListener("keydown",Ot,!0),window.addEventListener("keyup",kt,!0),X.addEventListener("pointermove",Cs,!0);const Kt=document.createElement("div");Kt.classList.add("selection-box"),X.appendChild(Kt);let ta=!1,ga={x:0,y:0};const hn=N.current,Ts=()=>{ta&&(Ce(" Safety reset: clearing stuck lasso selection"),ta=!1,Kt.style.display="none")},Os=()=>{Ts(),window.resetEditorDragState&&window.resetEditorDragState()},va=()=>{document.hidden&&(Ts(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",Os),document.addEventListener("visibilitychange",va);const Wt=G=>{try{const ne=G.target;ne&&(ne.tagName==="INPUT"||ne.tagName==="TEXTAREA"||ne.isContentEditable)||(X.tabIndex=-1,X.focus())}catch{}if((G.ctrlKey||G.metaKey)&&G.button===0){G.stopPropagation(),G.preventDefault(),ta=!0;const ne=X.getBoundingClientRect();ga={x:G.clientX-ne.left,y:G.clientY-ne.top},Kt.style.display="block",Kt.style.left=`${ga.x}px`,Kt.style.top=`${ga.y}px`,Kt.style.width="0px",Kt.style.height="0px",G.shiftKey||(hn.forEach(pe=>{const Ee=ee.nodeViews.get(pe);Ee&&Ee.element&&(Ee.element.classList.remove("selected"),Ee.element.style.outline="")}),hn.clear(),mt&&mt.entities&&Array.from(mt.entities).forEach(pe=>mt.remove(pe)))}},gn=G=>{if(!ta)return;const ne=X.getBoundingClientRect(),pe=G.clientX-ne.left,Ee=G.clientY-ne.top,ke=Math.min(ga.x,pe),Xe=Math.min(ga.y,Ee),Vt=Math.abs(pe-ga.x),en=Math.abs(Ee-ga.y);Kt.style.left=`${ke}px`,Kt.style.top=`${Xe}px`,Kt.style.width=`${Vt}px`,Kt.style.height=`${en}px`},Ya=G=>{if(!ta)return;const ne=Kt.getBoundingClientRect();if(ta=!1,Kt.style.display="none",ne.width<5&&ne.height<5)return;const pe=[];ie.getNodes().forEach(Ee=>{const ke=ee.nodeViews.get(Ee.id);if(ke&&ke.element){const Xe=ke.element.getBoundingClientRect();ne.left<=Xe.left&&ne.right>=Xe.right&&ne.top<=Xe.top&&ne.bottom>=Xe.bottom&&pe.push({node:Ee,view:ke})}}),pe.forEach(({node:Ee,view:ke})=>{hn.add(Ee.id),mt.add({id:Ee.id,label:"node",translate(Xe,Vt){},unselect(){ke.element.classList.remove("selected"),ke.element.style.outline=""}},!1),ke.element.classList.add("selected"),ke.element.style.outline="3px solid #00f3ff"})},Kc=()=>{hn.size>0&&(hn.forEach(G=>{const ne=ee.nodeViews.get(G);ne&&ne.element&&(ne.element.classList.remove("selected"),ne.element.style.outline="")}),hn.clear()),mt&&mt.entities&&(mt.entities instanceof Map?Array.from(mt.entities.values()):Array.from(mt.entities)).forEach(ne=>{ne.unselect&&ne.unselect(),mt.remove(ne)}),ie.getNodes().forEach(G=>{const ne=ee.nodeViews.get(G.id);ne&&ne.element&&ne.element.classList.remove("selected")})},Vo=G=>{if(!G.ctrlKey&&!G.metaKey&&!ta){let ne=!1;for(const[pe,Ee]of ee.nodeViews)if(Ee.element.contains(G.target)){ne=!0;break}if(!ne){const pe=G.target;(pe===X||pe.classList.contains("rete-area")||pe.closest('[data-testid="area"]'))&&Kc()}}};X.addEventListener("pointerdown",Wt,{capture:!0}),X.addEventListener("click",Vo),window.addEventListener("pointermove",gn),window.addEventListener("pointerup",Ya),ie.addPipe(G=>((G.type==="connectioncreated"||G.type==="connectionremoved")&&$e(),G));let ba={activeBackdropId:null,isDragging:!1},wa=!1,Sa=null;const na=G=>{wa=G,Sa&&(clearTimeout(Sa),Sa=null),G&&(Sa=setTimeout(()=>{wa&&(Ce(" Safety reset: clearing stuck isGroupMoving"),wa=!1),Sa=null},500))},hr=()=>{ta&&(Ce(" Resetting stuck lasso selection"),ta=!1,Kt.style.display="none"),wa&&(Ce(" Resetting stuck group moving"),na(!1)),ba.isDragging&&(Ce(" Resetting stuck backdrop drag"),ba.isDragging=!1,ba.activeBackdropId=null)};window.resetEditorDragState=hr;function Ga(){const G=ie.getNodes(),ne=G.filter(Ee=>{const ke=On.getByInstance(Ee);return ke&&ke.isBackdrop}),pe=G.filter(Ee=>{const ke=On.getByInstance(Ee);return!ke||!ke.isBackdrop});ne.forEach(Ee=>{const ke=ee.nodeViews.get(Ee.id);if(!ke)return;ke.element&&(ke.element.style.zIndex="-10");const Xe=ke.position,Vt=[],en=Ee.properties.width||400,pn=Ee.properties.height||300;pe.forEach(un=>{const kn=ee.nodeViews.get(un.id);if(!kn)return;kn.element&&parseInt(kn.element.style.zIndex||"0",10)<0&&(kn.element.style.zIndex="1");const Cn=kn.position,Rn=un.width||180,qo=un.height||100,Yo=Cn.x+Rn/2,wi=Cn.y+qo/2;Yo>=Xe.x&&Yo<=Xe.x+en&&wi>=Xe.y&&wi<=Xe.y+pn&&Vt.push(un.id)});const cn=Ee.properties.capturedNodes.length;Ee.properties.capturedNodes=Vt,cn!==Vt.length&&Ee.changeCallback&&Ee.changeCallback()})}return ee.updateBackdropCaptures=Ga,ee.addPipe(G=>{if(G.type==="nodepicked"){const ne=G.data.id,pe=ie.getNode(ne);be=!0,yt=ne,Ae=!1;try{if(pe&&T?.current!==void 0){const ke=ee.nodeViews.get(ne)?.position||{x:0,y:0};T.current={nodeId:ne,label:pe.label,startPos:ke,active:!1,over:!1}}}catch{}if(pe){const ke=On.getByInstance(pe);if(ke&&ke.isBackdrop&&pe.properties.locked)return}!he.current&&!hn.has(ne)&&(hn.forEach(ke=>{const Xe=ee.nodeViews.get(ke);Xe&&Xe.element&&(Xe.element.classList.remove("selected"),Xe.element.style.outline="")}),hn.clear()),hn.add(ne);const Ee=ee.nodeViews.get(ne);Ee&&Ee.element&&(Ee.element.classList.add("selected"),Ee.element.style.outline="3px solid #00f3ff")}return G}),ee.addPipe(G=>{try{if(k.current)return G;const ne=pe=>{const Ee=Re.current?.getBoundingClientRect();if(!Ee)return!1;const Xe=ee.nodeViews.get(pe)?.element;if(!Xe)return!1;const Vt=Xe.getBoundingClientRect(),en=Vt.left+Vt.width/2,pn=Vt.top+Vt.height/2;return en>=Ee.left&&en<=Ee.right&&pn>=Ee.top&&pn<=Ee.bottom};if(G.type==="nodetranslate"){const pe=T.current;if(!pe)return G;const Ee=G.data?.id;if(!Ee||pe.nodeId!==Ee)return G;pe.active||(pe.active=!0,!pe.startPos&&G.data?.previous&&(pe.startPos=G.data.previous));const ke=ne(Ee);return ke!==pe.over&&(pe.over=ke,Ye(ke)),G}if(G.type==="nodedragged"){const pe=T.current;if(!pe)return G;const Ee=G.data?.id;if(!Ee||pe.nodeId!==Ee)return G;if(pe.active&&ne(Ee)){E(pe.label);const Xe=pe.startPos;Xe&&setTimeout(()=>{try{ee.translate(Ee,Xe)}catch{}},0)}return T.current=null,Ye(!1),G}}catch{}return G}),ee.addPipe(G=>{if(G.type==="render"&&G.data?.payload){const ne=G.data.payload,pe=On.getByInstance(ne);pe&&pe.isBackdrop&&setTimeout(()=>{const Ee=ee.nodeViews.get(ne.id);if(Ee&&Ee.element){Ee.element.style.zIndex!=="-10"&&(Ee.element.style.zIndex="-10");const ke=ne.properties.locked?"none":"auto";Ee.element.style.pointerEvents!==ke&&(Ee.element.style.pointerEvents=ke)}},0)}if(G.type==="nodetranslate"){if(k.current||wa)return G;const ne=G.data.id,pe=ie.getNode(ne);if(!pe)return G;const Ee=G.data.position,ke=G.data.previous,Xe=Ee.x-ke.x,Vt=Ee.y-ke.y;if(Xe===0&&Vt===0)return G;if(Ae&&yt===ne)return{...G,data:{...G.data,position:G.data.previous}};if(hn.size>1&&hn.has(ne)){na(!0);const pn=[];return hn.forEach(cn=>{if(cn!==ne){const un=ee.nodeViews.get(cn);if(un){const kn=un.position.x+Xe,Cn=un.position.y+Vt;pn.push(ee.translate(cn,{x:kn,y:Cn}))}}}),Promise.all(pn).then(()=>{na(!1)}),G}const en=On.getByInstance(pe);if(en&&en.isBackdrop){if(pe.properties.locked)return{...G,data:{...G.data,position:G.data.previous}};if(ba.activeBackdropId!==ne&&(ba.activeBackdropId=ne,ba.isDragging=!0,Ga()),pe.properties.capturedNodes.length>0){na(!0);const pn=[];return pe.properties.capturedNodes.forEach(cn=>{if(!hn.has(cn)){const un=ee.nodeViews.get(cn);if(un){const kn=un.position.x+Xe,Cn=un.position.y+Vt;pn.push(ee.translate(cn,{x:kn,y:Cn}))}}}),Promise.all(pn).then(()=>{na(!1)}),G}}}if(G.type==="nodedragged"){if(k.current)return G;ba.isDragging=!1,ba.activeBackdropId=null,be=!1,yt=null,Ae&&(Ae=!1,X.style.cursor=""),Ga()}return G}),Q.current=ie,K.current=ee,z.current=mt,window.updateBackdropLockState=(G,ne)=>{const pe=ee.nodeViews.get(G);pe&&pe.element&&(pe.element.style.pointerEvents=ne?"none":"auto",Ce(" Updated backdrop lock state:",G,"locked:",ne))},r(ie),l(ee),f(re),{destroy:()=>{X.removeEventListener("pointerdown",Wt,{capture:!0}),X.removeEventListener("click",Vo),X.removeEventListener("pointermove",Cs,!0),window.removeEventListener("pointermove",gn),window.removeEventListener("pointerup",Ya),window.removeEventListener("pointermove",R),window.removeEventListener("keyup",le),window.removeEventListener("keydown",Ot,!0),window.removeEventListener("keyup",kt,!0),window.removeEventListener("blur",Os),document.removeEventListener("visibilitychange",va),Sa&&clearTimeout(Sa),Kt.parentNode&&Kt.parentNode.removeChild(Kt),ee.destroy()},selector:mt,editor:ie,area:ee,engine:re,process:$e,processImmediate:Ze}},[]);x.useEffect(()=>{const X=a.current;if(!X)return;let ie=null,ee=null,je=null;const ve=new Map,re=de=>{try{typeof de.pointerId=="number"&&ve.set(de.pointerId,{el:de.target,pointerType:de.pointerType||"mouse"})}catch{}},C=de=>{try{typeof de.pointerId=="number"&&ve.delete(de.pointerId)}catch{}},M=de=>{try{typeof de.pointerId=="number"&&ve.delete(de.pointerId)}catch{}};X.addEventListener("gotpointercapture",re,!0),X.addEventListener("lostpointercapture",C,!0),window.addEventListener("pointerup",M,!0),window.addEventListener("pointercancel",M,!0),ee=VN().then(()=>(Ce(" External plugins loaded, now creating editor..."),V(X))).then(de=>{de.editor,ie=de.area,de.engine,de.selector,r(de.editor),l(de.area),f(de.engine),p(de.selector),P.current=de.processImmediate,setTimeout(()=>{if(X){X.tabIndex=-1,X.focus();const Oe=X.getBoundingClientRect(),$e=Oe.left+Oe.width/2,Ze=Oe.top+Oe.height/2,gt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:$e,clientY:Ze,deltaY:0});X.dispatchEvent(gt),Ce(" Container initialized and focused"),window.resetEditorView=()=>{Ce(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const Be=X.getBoundingClientRect(),He=Be.left+Be.width/2,De=Be.top+Be.height/2;X.tabIndex=-1,X.focus();try{const mt=Array.from(ve.entries());ve.clear(),mt.forEach(([Rt,Xt])=>{const A=Xt?.el,R=Xt?.pointerType||"mouse";try{const le=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:Rt,pointerType:R});X.dispatchEvent(le)}catch{}try{X.releasePointerCapture(Rt)}catch{}try{A&&typeof A.releasePointerCapture=="function"&&A.releasePointerCapture(Rt)}catch{}})}catch{}try{for(let Rt=0;Rt<5;Rt++)try{X.releasePointerCapture(Rt)}catch{}X.querySelectorAll(".node, .connection, [data-drag]").forEach(Rt=>{try{Rt.releasePointerCapture(1)}catch{}})}catch{}if(ie){const mt=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});X.dispatchEvent(mt);const Rt=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});X.dispatchEvent(Rt)}setTimeout(()=>{const mt=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:He,clientY:De,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),Rt=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:He,clientY:De,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});X.dispatchEvent(mt),setTimeout(()=>{X.dispatchEvent(Rt);const Xt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:He,clientY:De,deltaY:0});X.dispatchEvent(Xt),Ce(" Reset complete")},50)},50)})}}},100);let xe=!1;return je=new ResizeObserver(Oe=>{for(const $e of Oe){const{width:Ze,height:gt}=$e.contentRect;!xe&&Ze>0&&gt>0&&(xe=!0,Ce(" ResizeObserver: Container now has size",Ze,gt),setTimeout(()=>{X.focus();const Be=X.getBoundingClientRect(),He=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Be.left+Be.width/2,clientY:Be.top+Be.height/2,deltaY:0});X.dispatchEvent(He)},50))}}),je.observe(X),de});const oe=()=>{Ce(" graphLoadComplete event received - triggering view reset");const de=()=>{window.resetEditorView&&window.resetEditorView()};de(),setTimeout(de,100),setTimeout(de,500),setTimeout(de,1e3)};return window.addEventListener("graphLoadComplete",oe),()=>{je&&je.disconnect(),window.removeEventListener("graphLoadComplete",oe),X.removeEventListener("gotpointercapture",re,!0),X.removeEventListener("lostpointercapture",C,!0),window.removeEventListener("pointerup",M,!0),window.removeEventListener("pointercancel",M,!0),ee.then(de=>de.destroy())}},[V]),x.useEffect(()=>{if(!n||!s||!h)return;const X=async C=>{if(C.target.tagName==="INPUT"||C.target.tagName==="TEXTAREA"||C.target.isContentEditable)return;if(Ce(` KeyDown: ${C.code} (Ctrl: ${C.ctrlKey}, Meta: ${C.metaKey})`),C.code==="F5"||(C.ctrlKey||C.metaKey)&&C.shiftKey&&C.code==="KeyR"){C.preventDefault(),Ce(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(C.code==="KeyF"&&!C.ctrlKey&&!C.metaKey&&!C.altKey){C.preventDefault();const Oe=K.current,$e=Q.current;if(Oe&&$e){const Ze=$e.getNodes();Ze.length>0&&(Ce(" Zoom extents triggered (F key)"),Ir.zoomAt(Oe,Ze,{scale:.9}).catch(gt=>{console.warn("[F key] zoomAt failed:",gt)}))}return}const M=Q.current,oe=K.current,de=z.current;if(!M||!oe){Ce(" No editor/area ref available");return}const xe=()=>{const Oe=new Set;if(de&&de.entities&&de.entities instanceof Map)for(const[$e,Ze]of de.entities)M.getNode($e)&&Oe.add($e);for(const $e of N.current){const Ze=M.getNode($e);Ce(` Checking node ${$e}: exists=${!!Ze}`),Ze&&Oe.add($e)}return Ce(` Found ${Oe.size} selected nodes:`,Array.from(Oe)),Array.from(Oe)};if(C.code==="Delete"||C.code==="Backspace"){Ce(" Delete key pressed. lassoSelectedNodesRef.current size:",N.current.size),Ce(" lassoSelectedNodesRef.current contents:",Array.from(N.current));const Oe=xe();if(Ce(` Deleting ${Oe.length} nodes:`,Oe),Oe.length>0){const $e=[],Ze=[],gt=new Set(Oe);for(const Be of M.getConnections())(gt.has(Be.source)||gt.has(Be.target))&&Ze.push({source:Be.source,target:Be.target,sourceOutput:Be.sourceOutput,targetInput:Be.targetInput});for(const Be of Oe){const He=M.getNode(Be);He&&$e.push({id:Be,label:He.label,position:oe.nodeViews.get(Be)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(He.properties||{}))})}ue.current.push({type:"delete",nodes:$e,connections:Ze}),Ce(" Saved undo state:",ue.current.length,"items in stack");for(const Be of Oe){const He=M.getConnections().filter(De=>De.source===Be||De.target===Be);for(const De of He)await M.removeConnection(De.id);await M.removeNode(Be),N.current.delete(Be)}}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyZ"&&!C.shiftKey){if(C.preventDefault(),ue.current.length===0){Ce(" Nothing to undo");return}const Oe=ue.current.pop();if(Ce(" Undoing:",Oe.type,Oe.nodes.length,"nodes"),Oe.type==="delete"){const $e={};k.current=!0;try{for(const Ze of Oe.nodes){const gt=On.getByLabel(Ze.label);if(gt){let Be;const He=()=>{oe&&oe.update("node",Be.id),c&&M&&(c.reset(),setTimeout(()=>{M.getNodes().forEach(async rt=>{try{await c.fetch(rt.id)}catch{}})},0))},De=()=>{gt.updateStrategy==="dataflow"?(c&&c.reset(),c&&M&&setTimeout(()=>{M.getNodes().forEach(async rt=>{try{await c.fetch(rt.id)}catch{}})},0)):He()};Be=gt.factory(De),Ze.properties&&Object.assign(Be.properties,Ze.properties),await M.addNode(Be),await oe.translate(Be.id,Ze.position),$e[Ze.id]=Be.id}}for(const Ze of Oe.connections){const gt=$e[Ze.source]||Ze.source,Be=$e[Ze.target]||Ze.target,He=M.getNode(gt),De=M.getNode(Be);if(He&&De)try{await M.addConnection(new Gt.Connection(He,Ze.sourceOutput,De,Ze.targetInput))}catch(rt){console.warn("[Editor] Could not restore connection:",rt)}}Ce(" Undo complete - restored",Oe.nodes.length,"nodes")}finally{k.current=!1,oe?.updateBackdropCaptures?.()}}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyC")try{const Oe=xe();if(Oe.length===0){Ce(" Nothing selected to copy");return}Ce(` Copying ${Oe.length} nodes`);const $e=[],Ze=new Set(Oe);for(const He of Oe){const De=M.getNode(He);De&&$e.push({label:De.label,position:oe.nodeViews.get(De.id)?.position||{x:0,y:0},data:{id:De.id,properties:JSON.parse(JSON.stringify(De.properties||{}))}})}if($e.length===0){Ce(" Nothing selected to copy (no nodes in selection)");return}const gt=[];for(const He of M.getConnections())Ze.has(He.source)&&Ze.has(He.target)&&gt.push({source:He.source,target:He.target,sourceOutput:He.sourceOutput,targetInput:He.targetInput});const Be={nodes:$e,connections:gt};localStorage.setItem("rete-clipboard",JSON.stringify(Be)),Ce("Copied to clipboard:",Be)}catch(Oe){console.error("[Editor] Copy failed:",Oe)}if((C.ctrlKey||C.metaKey)&&C.code==="KeyV"){const Oe=localStorage.getItem("rete-clipboard");if(!Oe){Ce(" Clipboard empty");return}try{const $e=JSON.parse(Oe),Ze={},Be=(K.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},He=oe.area.transform,De=(Y.current.x-Be.left-He.x)/He.k,rt=(Y.current.y-Be.top-He.y)/He.k;let mt=1/0,Rt=1/0;for(const A of $e.nodes)mt=Math.min(mt,A.position.x),Rt=Math.min(Rt,A.position.y);de&&de.entities&&Array.from(de.entities).forEach(A=>de.remove(A)),k.current=!0;try{for(const A of $e.nodes){let R;const le=On.getByLabel(A.label);if(le){const be=()=>{oe&&oe.update("node",R.id),c&&M&&(c.reset(),setTimeout(()=>{M.getNodes().forEach(async yt=>{try{await c.fetch(yt.id)}catch{}})},0))},Ae=()=>{le.updateStrategy==="dataflow"?(c&&c.reset(),c&&M&&setTimeout(()=>{M.getNodes().forEach(async yt=>{try{await c.fetch(yt.id)}catch{}})},0)):be()};R=le.factory(Ae)}if(R){typeof R.restore=="function"&&A.data?R.restore(A.data):A.data&&A.data.properties&&R.properties&&Object.assign(R.properties,A.data.properties),await M.addNode(R);const be=A.position.x-mt,Ae=A.position.y-Rt,yt={x:De+be,y:rt+Ae};await oe.translate(R.id,yt),Ze[A.data.id]=R.id,de&&de.add({id:R.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{k.current=!1,oe?.updateBackdropCaptures?.()}const Xt=[];for(const A of $e.connections){const R=Ze[A.source],le=Ze[A.target];if(R&&le){const be=M.getNode(R),Ae=M.getNode(le);be&&Ae&&Xt.push(M.addConnection(new Gt.Connection(be,A.sourceOutput,Ae,A.targetInput)))}}if(await Promise.all(Xt),c&&M){c.reset();for(const A of M.getNodes())try{await c.fetch(A.id)}catch{}}Ce("Pasted from clipboard")}catch($e){console.error("[Editor] Paste failed:",$e)}}C.code==="Home"&&(C.preventDefault(),oe.area&&(oe.area.zoom(1,0,0),oe.area.translate(0,0),Ce(" Viewport reset via Home key"))),C.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Ce(" Drag state reset via Escape key"))},ie=C=>{Y.current={x:C.clientX,y:C.clientY}},ee=C=>{C.key==="Shift"&&(he.current=!0)},je=C=>{C.key==="Shift"&&(he.current=!1)},ve=()=>{Ce(" Received delete from Electron IPC"),X({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let re=null;return window.api&&window.api.onDeleteKey&&(re=window.api.onDeleteKey(ve)),window.addEventListener("keydown",X),window.addEventListener("keydown",ee),window.addEventListener("keyup",je),window.addEventListener("mousemove",ie),()=>{window.removeEventListener("keydown",X),window.removeEventListener("keydown",ee),window.removeEventListener("keyup",je),window.removeEventListener("mousemove",ie),re&&re()}},[n,s,c,h]),x.useEffect(()=>{const X=a.current;if(!X||!n||!s)return;const ie=ee=>{const je=ee.target.closest('[data-testid="node"]');if(je){ee.preventDefault();const ve=je.dataset.nodeId||Array.from(s.nodeViews.entries()).find(([re,C])=>C.element===je)?.[0];if(ve){const re=n.getNode(ve);se({visible:!0,position:{x:ee.clientX,y:ee.clientY},items:[{label:"Delete",handler:async()=>{const C=n.getConnections().filter(M=>M.source===ve||M.target===ve);for(const M of C)await n.removeConnection(M.id);await n.removeNode(ve)}}],nodeContext:re})}}else{ee.preventDefault();const ve=window._t2GetMenuItems?window._t2GetMenuItems():[];se({visible:!0,position:{x:ee.clientX,y:ee.clientY},items:ve,nodeContext:null})}};return X.addEventListener("contextmenu",ie),()=>{X.removeEventListener("contextmenu",ie)}},[n,s]);const me=x.useCallback(()=>{se(X=>({...X,visible:!1}))},[]),Ne=x.useCallback(async X=>{X.handler&&await X.handler(H.position)},[H.position]),Ie=async()=>{if(!(!n||!s))try{const X=n.getNodes().map(xe=>{const Oe=typeof xe.toJSON=="function"?xe.toJSON():{...xe};return xe.properties&&(Oe.properties=xe.properties),{id:xe.id,label:xe.label,position:s.nodeViews.get(xe.id)?.position||{x:0,y:0},data:Oe}}),ie=n.getConnections().map(xe=>({id:xe.id,source:xe.source,target:xe.target,sourceOutput:xe.sourceOutput,targetInput:xe.targetInput})),ee=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:X,connections:ie,viewport:ee},ve=JSON.stringify(je,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Ce("Running in HA ingress - showing save dialog"),Se(je),ce(!0);return}try{ve.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",ve))}catch{console.warn("localStorage skipped")}Ce("Graph saved to localStorage");try{const xe=await fetch(Vn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:ve});xe.ok?Ce("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",xe.status)}catch(xe){console.warn("[handleSave] Failed to save to server:",xe)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",ve),Ce("[handleSave] Saved temp file for Electron reload")}catch(xe){console.warn("[handleSave] Failed to save temp file via Electron API",xe)}if(window.showSaveFilePicker)try{const Oe=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await Oe.write(ve),await Oe.close(),Ce("Graph saved to file");return}catch(xe){if(xe.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",xe)}const M=new Blob([ve],{type:"application/json"}),oe=URL.createObjectURL(M),de=document.createElement("a");de.href=oe,de.download=`autotron_graph_${Date.now()}.json`,de.click(),URL.revokeObjectURL(oe),Ce("Graph saved via download")}catch(X){console.error("Failed to save graph:",X)}};x.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!n||!s))try{const X=n.getNodes().map(re=>{const C=typeof re.toJSON=="function"?re.toJSON():{...re};return re.properties&&(C.properties=re.properties),{id:re.id,label:re.label,position:s.nodeViews.get(re.id)?.position||{x:0,y:0},data:C}}),ie=n.getConnections().map(re=>({id:re.id,source:re.source,target:re.target,sourceOutput:re.sourceOutput,targetInput:re.targetInput})),ee=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:X,connections:ie,viewport:ee,preUpdateSave:!0,timestamp:Date.now()},ve=JSON.stringify(je);ve.length<2e6&&(localStorage.setItem("saved-graph",ve),Ce("[triggerGraphSave] Graph saved before update"))}catch(X){console.warn("[triggerGraphSave] Failed:",X)}},()=>{delete window.triggerGraphSave}),[n,s]);const[et,Je]=x.useState(!1),It=x.useRef(null),Zt=x.useRef(Date.now());x.useEffect(()=>{if(!n)return;const X=()=>{Je(!0)};n.addPipe(ie=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(ie.type)&&X(),ie))},[n]),x.useEffect(()=>{if(!n||!s)return;const X=async()=>{if(!(window.graphLoading||I.current)&&et)try{const ie=n.getNodes().map(C=>{const M=typeof C.toJSON=="function"?C.toJSON():{...C};return C.properties&&(M.properties=C.properties),{id:C.id,label:C.label,position:s.nodeViews.get(C.id)?.position||{x:0,y:0},data:M}}),ee=n.getConnections().map(C=>({id:C.id,source:C.source,target:C.target,sourceOutput:C.sourceOutput,targetInput:C.targetInput})),je=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},ve={nodes:ie,connections:ee,viewport:je,autoSaved:!0,timestamp:Date.now()},re=JSON.stringify(ve);if(re.length<2e6){localStorage.setItem("saved-graph",re),Zt.current=Date.now(),Je(!1);try{await fetch(Vn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:re})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(ie){console.warn("[Auto-save] Failed:",ie)}};return It.current=setInterval(X,12e4),()=>{It.current&&clearInterval(It.current)}},[n,s,et]),x.useEffect(()=>{if(!n||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Ce("[AutoLoad] Detected post-update reload, attempting to restore graph...");const ie=setTimeout(async()=>{try{const ee=localStorage.getItem("saved-graph");if(ee){Ce("[AutoLoad] Found saved graph, loading...");const je=JSON.parse(ee);je.nodes&&je.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(ee){console.warn("[AutoLoad] Failed to auto-load graph:",ee)}},1e3);return()=>clearTimeout(ie)}},[n,s,c]);const $t=x.useRef(!1);x.useEffect(()=>{if(!n||!s||!c||$t.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Ce("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),$t.current=!0;return}const ee=localStorage.getItem("saved-graph"),je=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(ee||je){Ce("[ServerAutoLoad] Skipping - desktop mode with local graph");return}$t.current=!0;const re=setTimeout(async()=>{try{Ce("[ServerAutoLoad] Fetching last active graph from server...");const M=await(await fetch(Vn("/api/engine/last-active"))).json();M.success&&M.graph?(Ce("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(M.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):Ce("[ServerAutoLoad] No last active graph on server")}catch(C){console.warn("[ServerAutoLoad] Failed to fetch from server:",C)}},1500);return()=>clearTimeout(re)},[n,s,c]);const Ke=async()=>{if(!n||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!n,area:!!s,engine:!!c});return}try{let X=localStorage.getItem("saved-graph");if(!X&&window.api?.readTempFile)try{const re=await window.api.readTempFile("autotron_graph.json");re?.success&&re.content&&(X=re.content,Ce("[handleLoad] Loaded graph from Electron temp file"))}catch(re){console.warn("[handleLoad] Failed to read Electron temp file",re)}if(!X){alert("No saved graph found");return}const ie=JSON.parse(X);Ce(`[handleLoad] Loading graph with ${ie.nodes?.length} nodes`);const ee=ib(ie);if(!ee.valid){console.warn("[handleLoad] Graph validation failed:",ee.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ee.errors.length} errors`,4e3);const re=sb(ie);re.repaired&&(Ce("[handleLoad] Graph repaired:",re.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${re.fixes.length} fixes applied`,3e3),Object.assign(ie,re.graphData))}ee.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",ee.warnings),await Ht();const je=n.getNodes();if(je.length>0){console.error("[handleLoad] Clear did not work! Still have",je.length,"nodes");for(const re of je)try{await n.removeNode(re.id)}catch(C){console.error("[handleLoad] Force remove failed:",C)}}if(k.current=!0,I.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of ie.nodes){let M;const oe=On.getByLabel(C.label);if(oe){const de=()=>{if(I.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};M=oe.factory(de)}M&&(M.id=C.id,typeof M.restore=="function"&&C.data?M.restore(C.data):C.data&&C.data.properties&&M.properties&&Object.assign(M.properties,C.data.properties),await n.addNode(M),await s.translate(M.id,C.position))}const re=[];for(const C of ie.connections){const M=n.getNode(C.source),oe=n.getNode(C.target);M&&oe&&re.push(n.addConnection(new Gt.Connection(M,C.sourceOutput,oe,C.targetInput)))}await Promise.all(re)}finally{k.current=!1,s?.updateBackdropCaptures?.()}const ve=n.getNodes();if(ve.length>0&&s){Ce("[handleLoad] Zooming to fit",ve.length,"nodes...");try{await Ir.zoomAt(s,ve,{scale:.9})}catch(re){console.warn("[handleLoad] zoomAt failed:",re)}}P.current&&(Ce("[handleLoad] Processing graph immediately..."),await P.current(),Ce("[handleLoad] Graph processing complete")),I.current=!1,Ce("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Ce("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const re=ie.viewport||{x:0,y:0,k:1},C=re.k||1,M=re.x||0,oe=re.y||0;Ce("[handleLoad] Restoring viewport:",{savedX:M,savedY:oe,savedK:C}),Ce("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(C,0,0),s.area.translate(M,oe)}catch(xe){console.warn("[handleLoad] Viewport restore failed:",xe)}Ce("[handleLoad] Transform after restore:",{...s.area.transform});const de=s.container;if(de){de.tabIndex=-1,de.focus(),document.activeElement&&document.activeElement!==de&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const xe=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(xe,100),setTimeout(xe,500),setTimeout(xe,1e3)}n.getNodes().forEach(xe=>{const Oe=s.nodeViews.get(xe.id);if(Oe?.element)try{for(let $e=0;$e<10;$e++)try{Oe.element.releasePointerCapture($e)}catch{}}catch{}})}},300),Ce("Graph loaded")}catch(X){console.error("Failed to load graph:",X),I.current=!1,alert("Failed to load graph")}},pt=async()=>{if(!n||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(n.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const ie=await fetch(Vn("/api/examples/starter"));if(!ie.ok)throw new Error(`Failed to fetch example: ${ie.status}`);const ee=await ie.json();if(!ee.success||!ee.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(ee.graph)),Ce("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await Ke(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(ie){console.error("[handleLoadExample] Failed:",ie),alert("Failed to load example graph: "+ie.message)}};x.useEffect(()=>{const X=()=>{Ce("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),Ke()};return document.addEventListener("autoLoadGraph",X),()=>document.removeEventListener("autoLoadGraph",X)},[n,s,c]);const Ht=async()=>{if(!n){console.warn("[handleClear] No editor instance!");return}try{const X=n.getConnections(),ie=n.getNodes();Ce(`[handleClear] Removing ${X.length} connections and ${ie.length} nodes`);for(const je of X)await n.removeConnection(je.id);for(const je of ie)await n.removeNode(je.id);const ee=n.getNodes();Ce(`[handleClear] Complete. Remaining nodes: ${ee.length}`),ee.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",ee.map(je=>je.id))}catch(X){console.error("Failed to clear graph:",X)}},dn=()=>{if(!(!n||!s))try{const X=n.getNodes().map(M=>{const oe=typeof M.toJSON=="function"?M.toJSON():{...M};return M.properties&&(oe.properties=M.properties),{id:M.id,label:M.label,position:s.nodeViews.get(M.id)?.position||{x:0,y:0},data:oe}}),ie=n.getConnections().map(M=>({id:M.id,source:M.source,target:M.target,sourceOutput:M.sourceOutput,targetInput:M.targetInput})),ee=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:X,connections:ie,viewport:ee},ve=new Blob([JSON.stringify(je,null,2)],{type:"application/json"}),re=URL.createObjectURL(ve),C=document.createElement("a");C.href=re,C.download=`graph-${Date.now()}.json`,C.click(),URL.revokeObjectURL(re),Ce("Graph exported")}catch(X){console.error("Failed to export graph:",X)}},qa=async X=>{const ie=ib(X);if(!ie.valid){console.warn("[handleImport] Graph validation failed:",ie.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ie.errors.length} errors`,4e3);const ve=sb(X);if(ve.repaired)Ce("[handleImport] Graph repaired:",ve.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${ve.fixes.length} fixes applied`,3e3),X=ve.graphData;else if(!confirm(`Graph has ${ie.errors.length} errors. Continue anyway?`))return}const ee={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let je=0;if(console.error=(...ve)=>{je++<10&&ee.error(...ve)},ee.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!n||!s||!c){Object.assign(console,ee);return}try{if(await Ht(),k.current=!0,I.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of X.nodes){let M;const oe=On.getByLabel(C.label);if(!oe){console.warn(`[handleImport] No definition found for node label: "${C.label}"`);continue}if(oe){const de=()=>{if(I.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};M=oe.factory(de)}M&&(M.id=C.id,C.label==="Timeline Color"&&ee.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof M.restore=="function",hasData:!!C.data,dataKeys:C.data?Object.keys(C.data):"N/A",propertiesKeys:C.data?.properties?Object.keys(C.data.properties):"N/A",previewModeValue:C.data?.properties?.previewMode}),typeof M.restore=="function"&&C.data?M.restore(C.data):C.data&&C.data.properties&&M.properties&&Object.assign(M.properties,C.data.properties),await n.addNode(M),await s.translate(M.id,C.position))}const re=[];for(const C of X.connections){const M=n.getNode(C.source),oe=n.getNode(C.target);M&&oe?re.push(n.addConnection(new Gt.Connection(M,C.sourceOutput,oe,C.targetInput))):console.warn(`[handleImport] Connection skipped - missing node: source=${C.source} (${!!M}), target=${C.target} (${!!oe})`)}await Promise.all(re)}finally{k.current=!1,s?.updateBackdropCaptures?.()}const ve=n.getNodes();if(ve.length>0&&s)try{await Ir.zoomAt(s,ve,{scale:.9})}catch{}I.current=!1,setTimeout(async()=>{window.graphLoading=!1,Ce("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{P.current&&(Ce("[handleImport] Running processImmediate to sync node states"),P.current()),setTimeout(()=>{P.current&&(Ce("[handleImport] Running second processImmediate for late-loading data"),P.current())},1500)},500);try{const C=JSON.stringify(X,null,2);C.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",C),Ce("[handleImport] Graph saved to localStorage")),(await fetch(Vn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:C})).ok&&Ce("[handleImport] Graph saved to server as last active")}catch(C){console.warn("[handleImport] Failed to save imported graph:",C)}const re=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(re,100),setTimeout(re,500)},2e3),Object.assign(console,ee),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Ce("Graph imported successfully. Pan/zoom should work now.")}catch(ve){window.graphLoading=!1,typeof ee<"u"&&Object.assign(console,ee),console.error("Failed to import graph:",ve),I.current=!1,alert("Failed to import graph: "+ve.message)}};return m.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[m.jsx(ZN,{width:W,panelRef:Re,dropActive:Ve,favoriteGroups:fe,onAddFavorite:E,onRemoveFavorite:B,onCreateNode:D}),m.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${W}px`}}),m.jsx("div",{ref:b}),(()=>{const X=y?S.current:b.current;return X?qr.createPortal(m.jsx(PN,{onSave:Ie,onLoad:Ke,onLoadExample:pt,onClear:Ht,onExport:dn,onImport:qa,hasUnsavedChanges:et,isMerged:y,onToggleMerged:()=>v(ie=>!ie)}),X):null})(),m.jsx(FN,{dockSlotRef:S}),m.jsx(KN,{visible:H.visible,position:H.position,items:H.items,onClose:me,onSelect:Ne}),m.jsx(XN,{isOpen:q,onClose:()=>ce(!1),onSave:()=>{Je(!1),ce(!1)},currentGraphData:ge})]})}class uj extends Aa.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",r),this.setState({error:n,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?m.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:m.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),m.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),m.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&m.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[m.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),m.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),m.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[m.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#4a4a6c",onMouseOut:n=>n.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),m.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#339af0",onMouseOut:n=>n.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function fj({isLoading:a,progress:n=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[f,h]=x.useState(!1),[p,y]=x.useState(a);return x.useEffect(()=>{if(!a&&p){h(!0);const v=setTimeout(()=>{y(!1),h(!1)},500);return()=>clearTimeout(v)}else a&&!p&&y(!0)},[a,p]),p?m.jsxs("div",{className:`loading-overlay ${f?"fade-out":""}`,children:[m.jsx("div",{className:"loading-logo",children:""}),m.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),m.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),m.jsx("div",{className:"loading-progress-container",children:m.jsx("div",{className:"loading-progress-bar",children:m.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,n)}%`}})})}),m.jsx("div",{className:"loading-status",children:r}),l>0&&m.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&m.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function dj({updateInfo:a,onClose:n,onApplyUpdate:r}){const[s,l]=x.useState(!1),[c,f]=x.useState("");if(!a||!a.hasUpdate)return null;const h=async()=>{l(!0),f("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),f("Graph saved! Starting update..."))}catch(y){console.warn("Pre-update graph save failed:",y)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const v=await(await Hn("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();f(v.message||"Updating... The app will restart shortly."),setTimeout(()=>{f("Update applied! Reloading page..."),setTimeout(()=>{const b=()=>{Hn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)},2e3)}catch(y){y.message.includes("fetch")||y.message.includes("network")?(f("Server restarting... Reloading page..."),setTimeout(()=>{const v=()=>{Hn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(v,2e3))};v()},3e3)):(f(`Update failed: ${y.message}`),l(!1))}},p=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),n()};return m.jsx("div",{className:"update-modal-overlay",children:m.jsxs("div",{className:"update-modal",children:[m.jsxs("div",{className:"update-modal-header",children:[m.jsx("span",{className:"update-icon",children:""}),m.jsx("h2",{children:"Update Available!"})]}),m.jsxs("div",{className:"update-modal-version",children:[m.jsx("span",{className:"version-current",children:a.currentVersion}),m.jsx("span",{className:"version-arrow",children:""}),m.jsx("span",{className:"version-new",children:a.newVersion})]}),m.jsxs("div",{className:"update-modal-content",children:[m.jsx("h3",{children:"What's New:"}),m.jsx("div",{className:"changelog-content",children:m.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&m.jsxs("div",{className:"update-status",children:[m.jsx("span",{className:"status-spinner",children:""}),c]}),m.jsx("div",{className:"update-modal-actions",children:s?m.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"update-btn update-btn-primary",onClick:h,children:"Update Now"}),m.jsx("button",{className:"update-btn update-btn-secondary",onClick:p,children:"Later"})]})})]})})}const hj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};hj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Fw=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},n={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,f]of Object.entries(s)){const h=n[c];h&&(f.accent&&(l.style.setProperty(`--node-${h}-color`,f.accent),l.style.setProperty(`--node-${h}-color-rgb`,a(f.accent))),f.background&&l.style.setProperty(`--node-${h}-bg`,f.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},Zw=()=>{const a=c=>{const f=parseInt(c.slice(1,3),16),h=parseInt(c.slice(3,5),16),p=parseInt(c.slice(5,7),16);return`${f}, ${h}, ${p}`},n=(c,f=15)=>{const h=parseInt(c.slice(1),16),p=Math.max(0,(h>>16)-Math.round(255*f/100)),y=Math.max(0,(h>>8&255)-Math.round(255*f/100)),v=Math.max(0,(h&255)-Math.round(255*f/100));return`#${(16777216|p<<16|y<<8|v).toString(16).slice(1)}`},r=(c,f=20)=>{const h=parseInt(c.slice(1),16),p=Math.min(255,(h>>16)+Math.round(255*f/100)),y=Math.min(255,(h>>8&255)+Math.round(255*f/100)),v=Math.min(255,(h&255)+Math.round(255*f/100));return`#${(16777216|p<<16|y<<8|v).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),f=c?JSON.parse(c):{},h=document.documentElement;for(const[p,y]of Object.entries(s)){const v=f[p]?.color||l[p];v&&(h.style.setProperty(`--socket-${y}-color`,v),h.style.setProperty(`--socket-${y}-dark`,n(v)),h.style.setProperty(`--socket-${y}-border`,r(v)),h.style.setProperty(`--socket-${y}-rgb`,a(v)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};Fw();Zw();window.applyCategoryColors=Fw;window.applySocketColors=Zw;const Vd=new Map,qd=new Map;function pj(){const[a,n]=x.useState(ye.connected),[r,s]=x.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=x.useState([]),[f,h]=x.useState([]),[p,y]=x.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[v,b]=x.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[S,k]=x.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[N,P]=x.useState(null),[I,Q]=x.useState(0),[K,z]=x.useState(()=>localStorage.getItem("eventLogFilter")||"all"),Y=x.useRef(null),he=x.useRef(null),ue=x.useRef({authenticated:!1,invalidPinNotified:!1}),H=100,se=ap();x.useEffect(()=>{const T=setInterval(()=>{Q(q=>q+1)},3e4);return()=>clearInterval(T)},[]),x.useEffect(()=>Gw(q=>{k(q),!q.isLoading&&q.progress===100&&q.failedPlugins?.length>0&&se.warning(`Loaded ${q.loadedCount} plugins (${q.failedPlugins.length} failed)`),q.error&&se.error(`Plugin loading failed: ${q.error}`)}),[se]),x.useEffect(()=>{function T(){n(!0),se.success("Connected to server"),W("system","Socket connected to server"),qd.clear();const Ke=os();Ke&&ye.emit("authenticate",Ke),ye.emit("editor-active"),ye.emit("request-ha-status")}function q(){n(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),ue.current.authenticated=!1,se.warning("Disconnected from server - reconnecting..."),W("system","Socket disconnected from server")}function ce(Ke){W("system",`Socket reconnected after ${Ke} attempt(s)`)}function ge(Ke){Ke%5===0&&W("system",`Reconnection attempt ${Ke}...`)}function Se(Ke){W("system","Reconnection failed, retrying...")}function E(Ke){s(Ke)}function B(){ue.current.authenticated||(ue.current.authenticated=!0,ue.current.invalidPinNotified=!1,se.success("Authenticated"))}function D(Ke){ue.current.authenticated=!1;const pt=(Ke?.error||"").toString();if(pt.toLowerCase().includes("invalid pin")){ue.current.invalidPinNotified||(ue.current.invalidPinNotified=!0,se.error("Stored PIN is invalid. Update it in Settings  Security."));return}const Ht=pt?`Authentication failed: ${pt}`:"Authentication failed";se.error(Ht)}function V(){if(!ye.connected)return;ue.current.invalidPinNotified=!1;const Ke=os();Ke&&ye.emit("authenticate",Ke)}function me(Ke){const{id:pt,state:Ht,on:dn,name:qa,vendor:X}=Ke;if(!pt)return;const ie=qd.get(pt),ee=dn!==void 0?dn:Ht==="on"||Ht==="playing"||Ht==="open",je=qa||Ke.friendly_name||Ke.attributes?.friendly_name||pt.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(ie&&ie.on===ee)return;qd.set(pt,{on:ee,state:Ht});const ve=Vd.get(pt),re=ee?"ON":"OFF";let C=X||"External";X||(pt.startsWith("ha_")?C="HA":pt.startsWith("hue_")?C="Hue":pt.startsWith("kasa_")&&(C="Kasa")),ve&&Date.now()-ve.timestamp<5e3?(W("device",`${je}  ${re}`,{source:"app",triggeredBy:ve.nodeTitle,nodeId:ve.nodeId}),Vd.delete(pt)):W("trigger",`${je}  ${re}`,{source:C})}function Ne(Ke){}function Ie(Ke){const{nodeId:pt,nodeLabel:Ht,result:dn}=Ke;W("node",`${Ht||pt} executed`,{...dn,nodeId:pt})}function et(Ke){Array.isArray(Ke)&&h(Ke.slice(0,20))}function Je(Ke){const{type:pt,name:Ht,value:dn}=Ke;W("trigger",`${pt}: ${Ht}`,dn)}function It(Ke){if(Ke.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==Ke.newVersion&&se.info(` Update available: ${Ke.currentVersion}  ${Ke.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>P(Ke)})}ye.on("connect",T),ye.on("disconnect",q),ye.on("reconnect",ce),ye.on("reconnect_attempt",ge),ye.on("reconnect_error",Se),ye.on("auth-success",B),ye.on("auth-failed",D),ye.on("ha-connection-status",E),ye.on("device-state-update",me),ye.on("device_state_change",Ne),ye.on("node_executed",Ie),ye.on("scheduled_events",et),ye.on("trigger_event",Je),ye.on("update-available",It),window.addEventListener("t2-pin-changed",V);const Zt=()=>{ye.connected&&ye.emit("editor-inactive")};window.addEventListener("beforeunload",Zt),IT();const $t=setInterval(()=>{ye.connected&&ye.emit("editor-heartbeat")},3e4);return()=>{ye.connected&&ye.emit("editor-inactive"),clearInterval($t),ye.off("connect",T),ye.off("disconnect",q),ye.off("reconnect",ce),ye.off("reconnect_attempt",ge),ye.off("reconnect_error",Se),ye.off("auth-success",B),ye.off("auth-failed",D),ye.off("ha-connection-status",E),ye.off("device-state-update",me),ye.off("device_state_change",Ne),ye.off("node_executed",Ie),ye.off("scheduled_events",et),ye.off("trigger_event",Je),ye.off("update-available",It),window.removeEventListener("t2-pin-changed",V),window.removeEventListener("beforeunload",Zt),$T()}},[]);const W=(T,q,ce=null)=>{const ge=new Date().toLocaleTimeString();c(Se=>[{timestamp:ge,type:T,message:q,details:ce},...Se].slice(0,H))},Z=x.useRef({}),fe=x.useCallback((T,q)=>{const ce=q.map(B=>({...B,nodeId:T}));Z.current[T]=ce;const ge=[];Object.values(Z.current).forEach(B=>{Array.isArray(B)&&ge.push(...B)});const Se=new Date,E=ge.filter(B=>B.time&&new Date(B.time)>Se).sort((B,D)=>new Date(B.time)-new Date(D.time)).slice(0,20);h(E)},[]),_e=x.useCallback(T=>{delete Z.current[T],fe(T,[])},[fe]);x.useEffect(()=>(window.addEventLog=W,window.setUpcomingEvents=h,window.registerScheduledEvents=fe,window.unregisterScheduledEvents=_e,window.T2Toast=se,window.registerPendingCommand=(T,q,ce,ge)=>{Vd.set(T,{nodeTitle:q,action:ce,nodeId:ge,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[fe,_e,se]);const Re=T=>{if(!T)return"";const q=new Date(T),ge=q-new Date,Se=Math.floor(ge/6e4),E=Math.floor(Se/60),B=Math.floor(E/24);let D="";return B>0?D=`${B}d ${E%24}h`:E>0?D=`${E}h ${Se%60}m`:Se>0?D=`${Se}m`:D="<1m",`${q.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${D})`},Ve=x.useCallback(async T=>{if(!T)return;const q=window._t2Area,ce=window._t2Editor;if(!q||!ce){console.warn("[focusNode] Editor not ready");return}const ge=ce.getNode(T);if(!ge){console.warn("[focusNode] Node not found:",T);return}try{const{AreaExtensions:Se}=await Jg(async()=>{const{AreaExtensions:E}=await Promise.resolve().then(()=>kv);return{AreaExtensions:E}},void 0,import.meta.url);await Se.zoomAt(q,[ge],{scale:1})}catch(Se){console.warn("[focusNode] Failed to zoom to node:",Se)}},[]),Ye=x.useCallback(async()=>{const T=window._t2Area,q=window._t2Editor;if(!T||!q){console.warn("[zoomExtents] Editor not ready");return}const ce=q.getNodes();if(ce.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:ge}=await Jg(async()=>{const{AreaExtensions:Se}=await Promise.resolve().then(()=>kv);return{AreaExtensions:Se}},void 0,import.meta.url);await ge.zoomAt(T,ce,{scale:.7})}catch(ge){console.warn("[zoomExtents] Failed to zoom:",ge)}},[]);return m.jsxs("div",{className:"app-container",children:[N&&N.hasUpdate&&m.jsx(dj,{updateInfo:N,onClose:()=>P(null)}),m.jsx(fj,{isLoading:S.isLoading,progress:S.progress,status:S.status,loadedCount:S.loadedCount,totalCount:S.totalCount,error:S.error}),m.jsx("div",{className:"editor-wrapper",children:m.jsx(cj,{})}),m.jsx("div",{className:"resize-handle",ref:he,onMouseDown:T=>{T.preventDefault();const q=T.clientY,ce=p,ge=E=>{const B=q-E.clientY,D=Math.max(80,Math.min(400,ce+B));y(D),localStorage.setItem("panelHeight",D)},Se=()=>{document.removeEventListener("mousemove",ge),document.removeEventListener("mouseup",Se)};document.addEventListener("mousemove",ge),document.addEventListener("mouseup",Se)},children:m.jsx("div",{className:"resize-handle-grip"})}),m.jsxs("div",{className:"bottom-panels",style:{height:p,fontSize:v},children:[m.jsxs("div",{className:"panel event-log-panel",children:[m.jsxs("div",{className:"panel-header",children:[m.jsx("span",{className:"panel-title",children:"Event Log"}),m.jsxs("div",{className:"panel-controls",children:[m.jsxs("div",{className:"filter-buttons",children:[m.jsx("button",{className:`filter-btn ${K==="all"?"active":""}`,onClick:()=>{z("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),m.jsx("button",{className:`filter-btn ${K==="app"?"active":""}`,onClick:()=>{z("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),m.jsx("button",{className:`filter-btn ${K==="ha"?"active":""}`,onClick:()=>{z("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),m.jsx("button",{className:"font-size-btn",onClick:()=>{const T=Math.max(8,v-1);b(T),localStorage.setItem("panelFontSize",T)},children:"A-"}),m.jsxs("span",{className:"font-size-label",children:[v,"px"]}),m.jsx("button",{className:"font-size-btn",onClick:()=>{const T=Math.min(16,v+1);b(T),localStorage.setItem("panelFontSize",T)},children:"A+"}),m.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),m.jsx("div",{className:"panel-content",ref:Y,children:l.length===0?m.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(T=>K==="all"?!0:K==="app"?T.details?.triggeredBy||T.details?.source==="app"||T.type==="node"||T.type==="device"||T.type==="system":K==="ha"?T.type==="trigger"||T.details?.source&&T.details.source!=="app"&&!T.details?.triggeredBy:!0).map((T,q)=>m.jsxs("div",{className:`log-entry log-${T.type}${T.details?.nodeId?" clickable":""}`,title:T.details?.nodeId?"Click to jump to this node":T.details?.triggeredBy?`Triggered by: ${T.details.triggeredBy}`:T.details?.source&&T.details.source!=="app"?`Triggered externally via ${T.details.source}`:"",onClick:()=>T.details?.nodeId&&Ve(T.details.nodeId),style:T.details?.nodeId?{cursor:"pointer"}:{},children:[m.jsx("span",{className:"log-time",children:T.timestamp}),m.jsx("span",{className:`log-type-badge ${T.type}`,children:T.type==="trigger"?"external":T.type}),m.jsx("span",{className:"log-message",children:T.message}),T.details?.triggeredBy&&m.jsxs("span",{className:"log-source app-source",children:["via ",T.details.triggeredBy]}),T.details?.source&&T.details.source!=="app"&&!T.details?.triggeredBy&&m.jsxs("span",{className:"log-source external-source",children:["via ",T.details.source]})]},q))})]}),m.jsxs("div",{className:"panel upcoming-events-panel",children:[m.jsx("div",{className:"panel-header clickable-header",onClick:Ye,title:"Click to zoom to fit all nodes",children:m.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),m.jsx("div",{className:"panel-content",children:f.length===0?m.jsx("div",{className:"empty-message",children:"No scheduled events..."}):f.map((T,q)=>m.jsxs("div",{className:`event-entry event-${T.action||"unknown"}${T.nodeId?" clickable":""}`,onClick:()=>T.nodeId&&Ve(T.nodeId),title:T.nodeId?"Click to jump to this node":"",style:T.nodeId?{cursor:"pointer"}:{},children:[m.jsx("span",{className:"event-time",children:Re(T.time)}),m.jsx("span",{className:`event-action ${T.action}`,children:T.action||"event"}),m.jsx("span",{className:"event-device",children:T.deviceName||T.device||"Unknown"})]},q))})]})]})]})}function mj(){return m.jsx(uj,{children:m.jsxs(YN,{children:[m.jsx(GN,{}),m.jsx(pj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");cb.createRoot(document.getElementById("root")).render(m.jsx(x.StrictMode,{children:m.jsx(mj,{})}));
