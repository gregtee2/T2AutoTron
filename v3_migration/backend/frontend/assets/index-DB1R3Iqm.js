function ob(a,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Eh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var af={exports:{}},go={};var Hg;function tk(){if(Hg)return go;Hg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return go.Fragment=n,go.jsx=r,go.jsxs=r,go}var Vg;function nk(){return Vg||(Vg=1,af.exports=tk()),af.exports}var p=nk(),rf={exports:{}},Je={};var qg;function ak(){if(qg)return Je;qg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function E(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,H={};function K(S,L,j){this.props=S,this.context=L,this.refs=H,this.updater=j||N}K.prototype.isReactComponent={},K.prototype.setState=function(S,L){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,L,"setState")},K.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function X(){}X.prototype=K.prototype;function R(S,L,j){this.props=S,this.context=L,this.refs=H,this.updater=j||N}var Y=R.prototype=new X;Y.constructor=R,F(Y,K.prototype),Y.isPureReactComponent=!0;var he=Array.isArray;function ge(){}var G={H:null,A:null,T:null,S:null},de=Object.prototype.hasOwnProperty;function ne(S,L,j){var M=j.ref;return{$$typeof:a,type:S,key:L,ref:M!==void 0?M:null,props:j}}function pe(S,L){return ne(S.type,L,S.props)}function Ie(S){return typeof S=="object"&&S!==null&&S.$$typeof===a}function ze(S){var L={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(j){return L[j]})}var ae=/\/+/g;function ke(S,L){return typeof S=="object"&&S!==null&&S.key!=null?ze(""+S.key):L.toString(36)}function He(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(ge,ge):(S.status="pending",S.then(function(L){S.status==="pending"&&(S.status="fulfilled",S.value=L)},function(L){S.status==="pending"&&(S.status="rejected",S.reason=L)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function U(S,L,j,M,le){var ve=typeof S;(ve==="undefined"||ve==="boolean")&&(S=null);var Ae=!1;if(S===null)Ae=!0;else switch(ve){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(S.$$typeof){case a:case n:Ae=!0;break;case v:return Ae=S._init,U(Ae(S._payload),L,j,M,le)}}if(Ae)return le=le(S),Ae=M===""?"."+ke(S,0):M,he(le)?(j="",Ae!=null&&(j=Ae.replace(ae,"$&/")+"/"),U(le,L,j,"",function(Rt){return Rt})):le!=null&&(Ie(le)&&(le=pe(le,j+(le.key==null||S&&S.key===le.key?"":(""+le.key).replace(ae,"$&/")+"/")+Ae)),L.push(le)),1;Ae=0;var Qe=M===""?".":M+":";if(he(S))for(var Ze=0;Ze<S.length;Ze++)M=S[Ze],ve=Qe+ke(M,Ze),Ae+=U(M,L,j,ve,le);else if(Ze=E(S),typeof Ze=="function")for(S=Ze.call(S),Ze=0;!(M=S.next()).done;)M=M.value,ve=Qe+ke(M,Ze++),Ae+=U(M,L,j,ve,le);else if(ve==="object"){if(typeof S.then=="function")return U(He(S),L,j,M,le);throw L=String(S),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function W(S,L,j){if(S==null)return S;var M=[],le=0;return U(S,M,"","",function(ve){return L.call(j,ve,le++)}),M}function ce(S){if(S._status===-1){var L=S._result;L=L(),L.then(function(j){(S._status===0||S._status===-1)&&(S._status=1,S._result=j)},function(j){(S._status===0||S._status===-1)&&(S._status=2,S._result=j)}),S._status===-1&&(S._status=0,S._result=L)}if(S._status===1)return S._result.default;throw S._result}var je=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},B={map:W,forEach:function(S,L,j){W(S,function(){L.apply(this,arguments)},j)},count:function(S){var L=0;return W(S,function(){L++}),L},toArray:function(S){return W(S,function(L){return L})||[]},only:function(S){if(!Ie(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return Je.Activity=b,Je.Children=B,Je.Component=K,Je.Fragment=r,Je.Profiler=l,Je.PureComponent=R,Je.StrictMode=s,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Je.__COMPILER_RUNTIME={__proto__:null,c:function(S){return G.H.useMemoCache(S)}},Je.cache=function(S){return function(){return S.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(S,L,j){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var M=F({},S.props),le=S.key;if(L!=null)for(ve in L.key!==void 0&&(le=""+L.key),L)!de.call(L,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&L.ref===void 0||(M[ve]=L[ve]);var ve=arguments.length-2;if(ve===1)M.children=j;else if(1<ve){for(var Ae=Array(ve),Qe=0;Qe<ve;Qe++)Ae[Qe]=arguments[Qe+2];M.children=Ae}return ne(S.type,le,M)},Je.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:c,_context:S},S},Je.createElement=function(S,L,j){var M,le={},ve=null;if(L!=null)for(M in L.key!==void 0&&(ve=""+L.key),L)de.call(L,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(le[M]=L[M]);var Ae=arguments.length-2;if(Ae===1)le.children=j;else if(1<Ae){for(var Qe=Array(Ae),Ze=0;Ze<Ae;Ze++)Qe[Ze]=arguments[Ze+2];le.children=Qe}if(S&&S.defaultProps)for(M in Ae=S.defaultProps,Ae)le[M]===void 0&&(le[M]=Ae[M]);return ne(S,ve,le)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(S){return{$$typeof:h,render:S}},Je.isValidElement=Ie,Je.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:ce}},Je.memo=function(S,L){return{$$typeof:y,type:S,compare:L===void 0?null:L}},Je.startTransition=function(S){var L=G.T,j={};G.T=j;try{var M=S(),le=G.S;le!==null&&le(j,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(ge,je)}catch(ve){je(ve)}finally{L!==null&&j.types!==null&&(L.types=j.types),G.T=L}},Je.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Je.use=function(S){return G.H.use(S)},Je.useActionState=function(S,L,j){return G.H.useActionState(S,L,j)},Je.useCallback=function(S,L){return G.H.useCallback(S,L)},Je.useContext=function(S){return G.H.useContext(S)},Je.useDebugValue=function(){},Je.useDeferredValue=function(S,L){return G.H.useDeferredValue(S,L)},Je.useEffect=function(S,L){return G.H.useEffect(S,L)},Je.useEffectEvent=function(S){return G.H.useEffectEvent(S)},Je.useId=function(){return G.H.useId()},Je.useImperativeHandle=function(S,L,j){return G.H.useImperativeHandle(S,L,j)},Je.useInsertionEffect=function(S,L){return G.H.useInsertionEffect(S,L)},Je.useLayoutEffect=function(S,L){return G.H.useLayoutEffect(S,L)},Je.useMemo=function(S,L){return G.H.useMemo(S,L)},Je.useOptimistic=function(S,L){return G.H.useOptimistic(S,L)},Je.useReducer=function(S,L,j){return G.H.useReducer(S,L,j)},Je.useRef=function(S){return G.H.useRef(S)},Je.useState=function(S){return G.H.useState(S)},Je.useSyncExternalStore=function(S,L,j){return G.H.useSyncExternalStore(S,L,j)},Je.useTransition=function(){return G.H.useTransition()},Je.version="19.2.0",Je}var Gg;function Ch(){return Gg||(Gg=1,rf.exports=ak()),rf.exports}var k=Ch();const _a=Eh(k),rk=ob({__proto__:null,default:_a},[k]);var sf={exports:{}},vo={},of={exports:{}},lf={};var Yg;function ik(){return Yg||(Yg=1,(function(a){function n(U,W){var ce=U.length;U.push(W);e:for(;0<ce;){var je=ce-1>>>1,B=U[je];if(0<l(B,W))U[je]=W,U[ce]=B,ce=je;else break e}}function r(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var W=U[0],ce=U.pop();if(ce!==W){U[0]=ce;e:for(var je=0,B=U.length,S=B>>>1;je<S;){var L=2*(je+1)-1,j=U[L],M=L+1,le=U[M];if(0>l(j,ce))M<B&&0>l(le,j)?(U[je]=le,U[M]=ce,je=M):(U[je]=j,U[L]=ce,je=L);else if(M<B&&0>l(le,ce))U[je]=le,U[M]=ce,je=M;else break e}}return W}function l(U,W){var ce=U.sortIndex-W.sortIndex;return ce!==0?ce:U.id-W.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();a.unstable_now=function(){return d.now()-h}}var m=[],y=[],v=1,b=null,x=3,E=!1,N=!1,F=!1,H=!1,K=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function Y(U){for(var W=r(y);W!==null;){if(W.callback===null)s(y);else if(W.startTime<=U)s(y),W.sortIndex=W.expirationTime,n(m,W);else break;W=r(y)}}function he(U){if(F=!1,Y(U),!N)if(r(m)!==null)N=!0,ge||(ge=!0,ze());else{var W=r(y);W!==null&&He(he,W.startTime-U)}}var ge=!1,G=-1,de=5,ne=-1;function pe(){return H?!0:!(a.unstable_now()-ne<de)}function Ie(){if(H=!1,ge){var U=a.unstable_now();ne=U;var W=!0;try{e:{N=!1,F&&(F=!1,X(G),G=-1),E=!0;var ce=x;try{t:{for(Y(U),b=r(m);b!==null&&!(b.expirationTime>U&&pe());){var je=b.callback;if(typeof je=="function"){b.callback=null,x=b.priorityLevel;var B=je(b.expirationTime<=U);if(U=a.unstable_now(),typeof B=="function"){b.callback=B,Y(U),W=!0;break t}b===r(m)&&s(m),Y(U)}else s(m);b=r(m)}if(b!==null)W=!0;else{var S=r(y);S!==null&&He(he,S.startTime-U),W=!1}}break e}finally{b=null,x=ce,E=!1}W=void 0}}finally{W?ze():ge=!1}}}var ze;if(typeof R=="function")ze=function(){R(Ie)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ke=ae.port2;ae.port1.onmessage=Ie,ze=function(){ke.postMessage(null)}}else ze=function(){K(Ie,0)};function He(U,W){G=K(function(){U(a.unstable_now())},W)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(U){U.callback=null},a.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<U?Math.floor(1e3/U):5},a.unstable_getCurrentPriorityLevel=function(){return x},a.unstable_next=function(U){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var ce=x;x=W;try{return U()}finally{x=ce}},a.unstable_requestPaint=function(){H=!0},a.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ce=x;x=U;try{return W()}finally{x=ce}},a.unstable_scheduleCallback=function(U,W,ce){var je=a.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?je+ce:je):ce=je,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ce+B,U={id:v++,callback:W,priorityLevel:U,startTime:ce,expirationTime:B,sortIndex:-1},ce>je?(U.sortIndex=ce,n(y,U),r(m)===null&&U===r(y)&&(F?(X(G),G=-1):F=!0,He(he,ce-je))):(U.sortIndex=B,n(m,U),N||E||(N=!0,ge||(ge=!0,ze()))),U},a.unstable_shouldYield=pe,a.unstable_wrapCallback=function(U){var W=x;return function(){var ce=x;x=W;try{return U.apply(this,arguments)}finally{x=ce}}}})(lf)),lf}var Pg;function sk(){return Pg||(Pg=1,of.exports=ik()),of.exports}var cf={exports:{}},Nn={};var Fg;function ok(){if(Fg)return Nn;Fg=1;var a=Ch();function n(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:m,containerInfo:y,implementation:v}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Nn.createPortal=function(m,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return c(m,y,null,v)},Nn.flushSync=function(m){var y=d.T,v=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=y,s.p=v,s.d.f()}},Nn.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(m,y))},Nn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Nn.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,E=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:E}):v==="script"&&s.d.X(m,{crossOrigin:b,integrity:x,fetchPriority:E,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Nn.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=h(y.as,y.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(m)},Nn.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=h(v,y.crossOrigin);s.d.L(m,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Nn.preloadModule=function(m,y){if(typeof m=="string")if(y){var v=h(y.as,y.crossOrigin);s.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(m)},Nn.requestFormReset=function(m){s.d.r(m)},Nn.unstable_batchedUpdates=function(m,y){return m(y)},Nn.useFormState=function(m,y,v){return d.H.useFormState(m,y,v)},Nn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Nn.version="19.2.0",Nn}var Zg;function lb(){if(Zg)return cf.exports;Zg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),cf.exports=ok(),cf.exports}var Xg;function lk(){if(Xg)return vo;Xg=1;var a=sk(),n=Ch(),r=lb();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(s(188))}function y(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,o=t;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return m(u),e;if(f===o)return m(u),t;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=f;else{for(var g=!1,w=u.child;w;){if(w===i){g=!0,i=u,o=f;break}if(w===o){g=!0,o=u,i=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===i){g=!0,i=f,o=u;break}if(w===o){g=!0,o=f,i=u;break}w=w.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),R=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),Ie=Symbol.iterator;function ze(e){return e===null||typeof e!="object"?null:(e=Ie&&e[Ie]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Symbol.for("react.client.reference");function ke(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ae?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case K:return"Profiler";case H:return"StrictMode";case he:return"Suspense";case ge:return"SuspenseList";case ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case R:return e.displayName||"Context";case X:return(e._context.displayName||"Context")+".Consumer";case Y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:ke(e.type)||"Memo";case de:t=e._payload,e=e._init;try{return ke(e(t))}catch{}}return null}var He=Array.isArray,U=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},je=[],B=-1;function S(e){return{current:e}}function L(e){0>B||(e.current=je[B],je[B]=null,B--)}function j(e,t){B++,je[B]=e.current,e.current=t}var M=S(null),le=S(null),ve=S(null),Ae=S(null);function Qe(e,t){switch(j(ve,t),j(le,e),j(M,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ug(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ug(t),e=dg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(M),j(M,e)}function Ze(){L(M),L(le),L(ve)}function Rt(e){e.memoizedState!==null&&j(Ae,e);var t=M.current,i=dg(t,e.type);t!==i&&(j(le,e),j(M,i))}function $t(e){le.current===e&&(L(M),L(le)),Ae.current===e&&(L(Ae),ho._currentValue=ce)}var _t,Mn;function pn(e){if(_t===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);_t=t&&t[1]||"",Mn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_t+e+Mn}var dn=!1;function Rn(e,t){if(!e||dn)return"";dn=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Z){var q=Z}Reflect.construct(e,[],re)}else{try{re.call()}catch(Z){q=Z}e.call(re.prototype)}}else{try{throw Error()}catch(Z){q=Z}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Z){if(Z&&q&&typeof Z.stack=="string")return[Z.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),g=f[0],w=f[1];if(g&&w){var T=g.split(`
`),$=w.split(`
`);for(u=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;u<$.length&&!$[u].includes("DetermineComponentFrameRoot");)u++;if(o===T.length||u===$.length)for(o=T.length-1,u=$.length-1;1<=o&&0<=u&&T[o]!==$[u];)u--;for(;1<=o&&0<=u;o--,u--)if(T[o]!==$[u]){if(o!==1||u!==1)do if(o--,u--,0>u||T[o]!==$[u]){var J=`
`+T[o].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=o&&0<=u);break}}}finally{dn=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?pn(i):""}function We(e,t){switch(e.tag){case 26:case 27:case 5:return pn(e.type);case 16:return pn("Lazy");case 13:return e.child!==t&&t!==null?pn("Suspense Fallback"):pn("Suspense");case 19:return pn("SuspenseList");case 0:case 15:return Rn(e.type,!1);case 11:return Rn(e.type.render,!1);case 1:return Rn(e.type,!0);case 31:return pn("Activity");default:return""}}function V(e){try{var t="",i=null;do t+=We(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ie=Object.prototype.hasOwnProperty,Q=a.unstable_scheduleCallback,_e=a.unstable_cancelCallback,xe=a.unstable_shouldYield,se=a.unstable_requestPaint,C=a.unstable_now,D=a.unstable_getCurrentPriorityLevel,oe=a.unstable_ImmediatePriority,fe=a.unstable_UserBlockingPriority,be=a.unstable_NormalPriority,Oe=a.unstable_LowPriority,Ve=a.unstable_IdlePriority,Xe=a.log,yt=a.unstable_setDisableYieldValue,Ue=null,qe=null;function Me(e){if(typeof Xe=="function"&&yt(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Ue,e)}catch{}}var rt=Math.clz32?Math.clz32:Qt,pt=Math.log,Lt=Math.LN2;function Qt(e){return e>>>=0,e===0?32:31-(pt(e)/Lt|0)|0}var A=256,z=262144,ue=4194304;function we(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function De(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?u=we(o):(g&=w,g!==0?u=we(g):i||(i=w&~e,i!==0&&(u=we(i))))):(w=o&~f,w!==0?u=we(w):g!==0?u=we(g):i||(i=o&~e,i!==0&&(u=we(i)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,i=t&-t,f>=i||f===32&&(i&4194048)!==0)?t:u}function mt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Fn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var e=ue;return ue<<=1,(ue&62914560)===0&&(ue=4194304),e}function zt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Tt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kt(e,t,i,o,u,f){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,T=e.expirationTimes,$=e.hiddenUpdates;for(i=g&~i;0<i;){var J=31-rt(i),re=1<<J;w[J]=0,T[J]=-1;var q=$[J];if(q!==null)for($[J]=null,J=0;J<q.length;J++){var Z=q[J];Z!==null&&(Z.lane&=-536870913)}i&=~re}o!==0&&Ts(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(g&~t))}function Ts(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-rt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Jt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-rt(i),u=1<<o;u&t|e[o]&t&&(e[o]|=t),i&=~u}}function aa(e,t){var i=t&-t;return i=(i&42)!==0?1:ba(i),(i&(e.suspendedLanes|t))!==0?0:i}function ba(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ns(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:Rg(e.type))}function Os(e,t){var i=W.p;try{return W.p=e,t()}finally{W.p=i}}var wa=Math.random().toString(36).slice(2),nn="__reactFiber$"+wa,wn="__reactProps$"+wa,Ya="__reactContainer$"+wa,Vo="__reactEvents$"+wa,Kc="__reactListeners$"+wa,qo="__reactHandles$"+wa,yn="__reactResources$"+wa,Sa="__reactMarker$"+wa;function xa(e){delete e[nn],delete e[wn],delete e[Vo],delete e[Kc],delete e[qo]}function ra(e){var t=e[nn];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ya]||i[nn]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=vg(e);e!==null;){if(i=e[nn])return i;e=vg(e)}return t}e=i,i=e.parentNode}return null}function mr(e){if(e=e[nn]||e[Ya]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Pa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function P(e){var t=e[yn];return t||(t=e[yn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function te(e){e[Sa]=!0}var me=new Set,Ee={};function Ce(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(Ee[e]=t,e=0;e<t.length;e++)me.add(t[e])}var Ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wt={},Ft={};function Zt(e){return ie.call(Ft,e)?!0:ie.call(Wt,e)?!1:Ht.test(e)?Ft[e]=!0:(Wt[e]=!0,!1)}function fn(e,t,i){if(Zt(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Nt(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Vt(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function gn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ma(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fa(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){i=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Go(e){if(!e._valueTracker){var t=Ma(e)?"checked":"value";e._valueTracker=Fa(e,t,""+e[t])}}function ap(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=Ma(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xw=/[\n"\\]/g;function ia(e){return e.replace(Xw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Qc(e,t,i,o,u,f,g,w){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+gn(t)):e.value!==""+gn(t)&&(e.value=""+gn(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Jc(e,g,gn(t)):i!=null?Jc(e,g,gn(i)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+gn(w):e.removeAttribute("name")}function rp(e,t,i,o,u,f,g,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Go(e);return}i=i!=null?""+gn(i):"",t=t!=null?""+gn(t):i,w||t===e.value||(e.value=t),e.defaultValue=t}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Go(e)}function Jc(e,t,i){t==="number"&&Yo(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function xi(e,t,i,o){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+gn(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function ip(e,t,i){if(t!=null&&(t=""+gn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+gn(i):""}function sp(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(s(92));if(He(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=gn(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Go(e)}function ki(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Kw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function op(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||Kw.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function lp(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in t)o=t[u],t.hasOwnProperty(u)&&i[u]!==o&&op(e,u,o)}else for(var f in t)t.hasOwnProperty(f)&&op(e,f,t[f])}function Wc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Po(e){return Jw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Za(){}var eu=null;function tu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ei=null,Ci=null;function cp(e){var t=mr(e);if(t&&(e=t.stateNode)){var i=e[wn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Qc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ia(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var u=o[wn]||null;if(!u)throw Error(s(90));Qc(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&ap(o)}break e;case"textarea":ip(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&xi(e,!!i.multiple,t,!1)}}}var nu=!1;function up(e,t,i){if(nu)return e(t,i);nu=!0;try{var o=e(t);return o}finally{if(nu=!1,(Ei!==null||Ci!==null)&&(Ml(),Ei&&(t=Ei,e=Ci,Ci=Ei=null,cp(t),e)))for(t=0;t<e.length;t++)cp(e[t])}}function js(e,t){var i=e.stateNode;if(i===null)return null;var o=i[wn]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),au=!1;if(Xa)try{var As={};Object.defineProperty(As,"passive",{get:function(){au=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{au=!1}var yr=null,ru=null,Fo=null;function dp(){if(Fo)return Fo;var e,t=ru,i=t.length,o,u="value"in yr?yr.value:yr.textContent,f=u.length;for(e=0;e<i&&t[e]===u[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===u[f-o];o++);return Fo=u.slice(e,1<o?1-o:void 0)}function Zo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xo(){return!0}function fp(){return!1}function Bn(e){function t(i,o,u,f,g){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xo:fp,this.isPropagationStopped=fp,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),t}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=Bn(Qr),_s=b({},Qr,{view:0,detail:0}),Ww=Bn(_s),iu,su,Ds,Qo=b({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(iu=e.screenX-Ds.screenX,su=e.screenY-Ds.screenY):su=iu=0,Ds=e),iu)},movementY:function(e){return"movementY"in e?e.movementY:su}}),hp=Bn(Qo),eS=b({},Qo,{dataTransfer:0}),tS=Bn(eS),nS=b({},_s,{relatedTarget:0}),ou=Bn(nS),aS=b({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),rS=Bn(aS),iS=b({},Qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sS=Bn(iS),oS=b({},Qr,{data:0}),pp=Bn(oS),lS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uS[e])?!!t[e]:!1}function lu(){return dS}var fS=b({},_s,{key:function(e){if(e.key){var t=lS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lu,charCode:function(e){return e.type==="keypress"?Zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hS=Bn(fS),pS=b({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=Bn(pS),mS=b({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lu}),yS=Bn(mS),gS=b({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vS=Bn(gS),bS=b({},Qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wS=Bn(bS),SS=b({},Qr,{newState:0,oldState:0}),xS=Bn(SS),kS=[9,13,27,32],cu=Xa&&"CompositionEvent"in window,Ms=null;Xa&&"documentMode"in document&&(Ms=document.documentMode);var ES=Xa&&"TextEvent"in window&&!Ms,yp=Xa&&(!cu||Ms&&8<Ms&&11>=Ms),gp=" ",vp=!1;function bp(e,t){switch(e){case"keyup":return kS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ti=!1;function CS(e,t){switch(e){case"compositionend":return wp(t);case"keypress":return t.which!==32?null:(vp=!0,gp);case"textInput":return e=t.data,e===gp&&vp?null:e;default:return null}}function TS(e,t){if(Ti)return e==="compositionend"||!cu&&bp(e,t)?(e=dp(),Fo=ru=yr=null,Ti=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yp&&t.locale!=="ko"?null:t.data;default:return null}}var NS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!NS[e.type]:t==="textarea"}function xp(e,t,i,o){Ei?Ci?Ci.push(o):Ci=[o]:Ei=o,t=$l(t,"onChange"),0<t.length&&(i=new Ko("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Rs=null,zs=null;function OS(e){rg(e,0)}function Jo(e){var t=Pa(e);if(ap(t))return e}function kp(e,t){if(e==="change")return t}var Ep=!1;if(Xa){var uu;if(Xa){var du="oninput"in document;if(!du){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),du=typeof Cp.oninput=="function"}uu=du}else uu=!1;Ep=uu&&(!document.documentMode||9<document.documentMode)}function Tp(){Rs&&(Rs.detachEvent("onpropertychange",Np),zs=Rs=null)}function Np(e){if(e.propertyName==="value"&&Jo(zs)){var t=[];xp(t,zs,e,tu(e)),up(OS,t)}}function jS(e,t,i){e==="focusin"?(Tp(),Rs=t,zs=i,Rs.attachEvent("onpropertychange",Np)):e==="focusout"&&Tp()}function AS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(zs)}function _S(e,t){if(e==="click")return Jo(t)}function DS(e,t){if(e==="input"||e==="change")return Jo(t)}function MS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zn=typeof Object.is=="function"?Object.is:MS;function Ls(e,t){if(Zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!ie.call(t,u)||!Zn(e[u],t[u]))return!1}return!0}function Op(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jp(e,t){var i=Op(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Op(i)}}function Ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _p(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Yo(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Yo(e.document)}return t}function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var RS=Xa&&"documentMode"in document&&11>=document.documentMode,Ni=null,hu=null,Bs=null,pu=!1;function Dp(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;pu||Ni==null||Ni!==Yo(o)||(o=Ni,"selectionStart"in o&&fu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Bs&&Ls(Bs,o)||(Bs=o,o=$l(hu,"onSelect"),0<o.length&&(t=new Ko("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=Ni)))}function Jr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Oi={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},mu={},Mp={};Xa&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function Wr(e){if(mu[e])return mu[e];if(!Oi[e])return e;var t=Oi[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Mp)return mu[e]=t[i];return e}var Rp=Wr("animationend"),zp=Wr("animationiteration"),Lp=Wr("animationstart"),zS=Wr("transitionrun"),LS=Wr("transitionstart"),BS=Wr("transitioncancel"),Bp=Wr("transitionend"),Up=new Map,yu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yu.push("scrollEnd");function ka(e,t){Up.set(e,t),Ce(t,[e])}var Wo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},sa=[],ji=0,gu=0;function el(){for(var e=ji,t=gu=ji=0;t<e;){var i=sa[t];sa[t++]=null;var o=sa[t];sa[t++]=null;var u=sa[t];sa[t++]=null;var f=sa[t];if(sa[t++]=null,o!==null&&u!==null){var g=o.pending;g===null?u.next=u:(u.next=g.next,g.next=u),o.pending=u}f!==0&&Ip(i,u,f)}}function tl(e,t,i,o){sa[ji++]=e,sa[ji++]=t,sa[ji++]=i,sa[ji++]=o,gu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function vu(e,t,i,o){return tl(e,t,i,o),nl(e)}function ei(e,t){return tl(e,null,null,t),nl(e)}function Ip(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-rt(i),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[t]:o.push(t),t.lane=i|536870912),f):null}function nl(e){if(50<io)throw io=0,Nd=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ai={};function US(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(e,t,i,o){return new US(e,t,i,o)}function bu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ka(e,t){var i=e.alternate;return i===null?(i=Xn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function $p(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function al(e,t,i,o,u,f){var g=0;if(o=e,typeof e=="function")bu(e)&&(g=1);else if(typeof e=="string")g=qx(e,i,M.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ne:return e=Xn(31,i,t,u),e.elementType=ne,e.lanes=f,e;case F:return ti(i.children,u,f,t);case H:g=8,u|=24;break;case K:return e=Xn(12,i,t,u|2),e.elementType=K,e.lanes=f,e;case he:return e=Xn(13,i,t,u),e.elementType=he,e.lanes=f,e;case ge:return e=Xn(19,i,t,u),e.elementType=ge,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:g=10;break e;case X:g=9;break e;case Y:g=11;break e;case G:g=14;break e;case de:g=16,o=null;break e}g=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return t=Xn(g,i,t,u),t.elementType=e,t.type=o,t.lanes=f,t}function ti(e,t,i,o){return e=Xn(7,e,o,t),e.lanes=i,e}function wu(e,t,i){return e=Xn(6,e,null,t),e.lanes=i,e}function Hp(e){var t=Xn(18,null,null,0);return t.stateNode=e,t}function Su(e,t,i){return t=Xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vp=new WeakMap;function oa(e,t){if(typeof e=="object"&&e!==null){var i=Vp.get(e);return i!==void 0?i:(t={value:e,source:t,stack:V(t)},Vp.set(e,t),t)}return{value:e,source:t,stack:V(t)}}var _i=[],Di=0,rl=null,Us=0,la=[],ca=0,gr=null,Ra=1,za="";function Qa(e,t){_i[Di++]=Us,_i[Di++]=rl,rl=e,Us=t}function qp(e,t,i){la[ca++]=Ra,la[ca++]=za,la[ca++]=gr,gr=e;var o=Ra;e=za;var u=32-rt(o)-1;o&=~(1<<u),i+=1;var f=32-rt(t)+u;if(30<f){var g=u-u%5;f=(o&(1<<g)-1).toString(32),o>>=g,u-=g,Ra=1<<32-rt(t)+u|i<<u|o,za=f+e}else Ra=1<<f|i<<u|o,za=e}function xu(e){e.return!==null&&(Qa(e,1),qp(e,1,0))}function ku(e){for(;e===rl;)rl=_i[--Di],_i[Di]=null,Us=_i[--Di],_i[Di]=null;for(;e===gr;)gr=la[--ca],la[ca]=null,za=la[--ca],la[ca]=null,Ra=la[--ca],la[ca]=null}function Gp(e,t){la[ca++]=Ra,la[ca++]=za,la[ca++]=gr,Ra=t.id,za=t.overflow,gr=e}var Sn=null,Bt=null,dt=!1,vr=null,ua=!1,Eu=Error(s(519));function br(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Is(oa(t,e)),Eu}function Yp(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[nn]=e,t[wn]=o,i){case"dialog":st("cancel",t),st("close",t);break;case"iframe":case"object":case"embed":st("load",t);break;case"video":case"audio":for(i=0;i<oo.length;i++)st(oo[i],t);break;case"source":st("error",t);break;case"img":case"image":case"link":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"input":st("invalid",t),rp(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":st("invalid",t);break;case"textarea":st("invalid",t),sp(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||lg(t.textContent,i)?(o.popover!=null&&(st("beforetoggle",t),st("toggle",t)),o.onScroll!=null&&st("scroll",t),o.onScrollEnd!=null&&st("scrollend",t),o.onClick!=null&&(t.onclick=Za),t=!0):t=!1,t||br(e,!0)}function Pp(e){for(Sn=e.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:Sn=Sn.return}}function Mi(e){if(e!==Sn)return!1;if(!dt)return Pp(e),dt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Vd(e.type,e.memoizedProps)),i=!i),i&&Bt&&br(e),Pp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Bt=gg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Bt=gg(e)}else t===27?(t=Bt,Mr(e.type)?(e=Fd,Fd=null,Bt=e):Bt=t):Bt=Sn?fa(e.stateNode.nextSibling):null;return!0}function ni(){Bt=Sn=null,dt=!1}function Cu(){var e=vr;return e!==null&&(Hn===null?Hn=e:Hn.push.apply(Hn,e),vr=null),e}function Is(e){vr===null?vr=[e]:vr.push(e)}var Tu=S(null),ai=null,Ja=null;function wr(e,t,i){j(Tu,t._currentValue),t._currentValue=i}function Wa(e){e._currentValue=Tu.current,L(Tu)}function Nu(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function Ou(e,t,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var g=u.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=u;for(var T=0;T<t.length;T++)if(w.context===t[T]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),Nu(f.return,i,e),o||(g=null);break e}f=w.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(s(341));g.lanes|=i,f=g.alternate,f!==null&&(f.lanes|=i),Nu(g,i,e),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function Ri(e,t,i,o){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(s(387));if(g=g.memoizedProps,g!==null){var w=u.type;Zn(u.pendingProps.value,g.value)||(e!==null?e.push(w):e=[w])}}else if(u===Ae.current){if(g=u.alternate,g===null)throw Error(s(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ho):e=[ho])}u=u.return}e!==null&&Ou(t,e,i,o),t.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ri(e){ai=e,Ja=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xn(e){return Fp(ai,e)}function sl(e,t){return ai===null&&ri(e),Fp(e,t)}function Fp(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ja===null){if(e===null)throw Error(s(308));Ja=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ja=Ja.next=t;return i}var IS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},$S=a.unstable_scheduleCallback,HS=a.unstable_NormalPriority,an={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ju(){return{controller:new IS,data:new Map,refCount:0}}function $s(e){e.refCount--,e.refCount===0&&$S(HS,function(){e.controller.abort()})}var Hs=null,Au=0,zi=0,Li=null;function VS(e,t){if(Hs===null){var i=Hs=[];Au=0,zi=Md(),Li={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Au++,t.then(Zp,Zp),t}function Zp(){if(--Au===0&&Hs!==null){Li!==null&&(Li.status="fulfilled");var e=Hs;Hs=null,zi=0,Li=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function qS(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var u=0;u<i.length;u++)(0,i[u])(t)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Xp=U.S;U.S=function(e,t){Dy=C(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&VS(e,t),Xp!==null&&Xp(e,t)};var ii=S(null);function _u(){var e=ii.current;return e!==null?e:Dt.pooledCache}function ol(e,t){t===null?j(ii,ii.current):j(ii,t.pool)}function Kp(){var e=_u();return e===null?null:{parent:an._currentValue,pool:e}}var Bi=Error(s(460)),Du=Error(s(474)),ll=Error(s(542)),cl={then:function(){}};function Qp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jp(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Za,Za),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,em(e),e;default:if(typeof t.status=="string")t.then(Za,Za);else{if(e=Dt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=o}},function(o){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,em(e),e}throw oi=t,Bi}}function si(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(oi=i,Bi):i}}var oi=null;function Wp(){if(oi===null)throw Error(s(459));var e=oi;return oi=null,e}function em(e){if(e===Bi||e===ll)throw Error(s(483))}var Ui=null,Vs=0;function ul(e){var t=Vs;return Vs+=1,Ui===null&&(Ui=[]),Jp(Ui,e,t)}function qs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dl(e,t){throw t.$$typeof===x?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function tm(e){function t(_,O){if(e){var I=_.deletions;I===null?(_.deletions=[O],_.flags|=16):I.push(O)}}function i(_,O){if(!e)return null;for(;O!==null;)t(_,O),O=O.sibling;return null}function o(_){for(var O=new Map;_!==null;)_.key!==null?O.set(_.key,_):O.set(_.index,_),_=_.sibling;return O}function u(_,O){return _=Ka(_,O),_.index=0,_.sibling=null,_}function f(_,O,I){return _.index=I,e?(I=_.alternate,I!==null?(I=I.index,I<O?(_.flags|=67108866,O):I):(_.flags|=67108866,O)):(_.flags|=1048576,O)}function g(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function w(_,O,I,ee){return O===null||O.tag!==6?(O=wu(I,_.mode,ee),O.return=_,O):(O=u(O,I),O.return=_,O)}function T(_,O,I,ee){var $e=I.type;return $e===F?J(_,O,I.props.children,ee,I.key):O!==null&&(O.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===de&&si($e)===O.type)?(O=u(O,I.props),qs(O,I),O.return=_,O):(O=al(I.type,I.key,I.props,null,_.mode,ee),qs(O,I),O.return=_,O)}function $(_,O,I,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==I.containerInfo||O.stateNode.implementation!==I.implementation?(O=Su(I,_.mode,ee),O.return=_,O):(O=u(O,I.children||[]),O.return=_,O)}function J(_,O,I,ee,$e){return O===null||O.tag!==7?(O=ti(I,_.mode,ee,$e),O.return=_,O):(O=u(O,I),O.return=_,O)}function re(_,O,I){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=wu(""+O,_.mode,I),O.return=_,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case E:return I=al(O.type,O.key,O.props,null,_.mode,I),qs(I,O),I.return=_,I;case N:return O=Su(O,_.mode,I),O.return=_,O;case de:return O=si(O),re(_,O,I)}if(He(O)||ze(O))return O=ti(O,_.mode,I,null),O.return=_,O;if(typeof O.then=="function")return re(_,ul(O),I);if(O.$$typeof===R)return re(_,sl(_,O),I);dl(_,O)}return null}function q(_,O,I,ee){var $e=O!==null?O.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return $e!==null?null:w(_,O,""+I,ee);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case E:return I.key===$e?T(_,O,I,ee):null;case N:return I.key===$e?$(_,O,I,ee):null;case de:return I=si(I),q(_,O,I,ee)}if(He(I)||ze(I))return $e!==null?null:J(_,O,I,ee,null);if(typeof I.then=="function")return q(_,O,ul(I),ee);if(I.$$typeof===R)return q(_,O,sl(_,I),ee);dl(_,I)}return null}function Z(_,O,I,ee,$e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return _=_.get(I)||null,w(O,_,""+ee,$e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case E:return _=_.get(ee.key===null?I:ee.key)||null,T(O,_,ee,$e);case N:return _=_.get(ee.key===null?I:ee.key)||null,$(O,_,ee,$e);case de:return ee=si(ee),Z(_,O,I,ee,$e)}if(He(ee)||ze(ee))return _=_.get(I)||null,J(O,_,ee,$e,null);if(typeof ee.then=="function")return Z(_,O,I,ul(ee),$e);if(ee.$$typeof===R)return Z(_,O,I,sl(O,ee),$e);dl(O,ee)}return null}function Re(_,O,I,ee){for(var $e=null,gt=null,Le=O,tt=O=0,lt=null;Le!==null&&tt<I.length;tt++){Le.index>tt?(lt=Le,Le=null):lt=Le.sibling;var vt=q(_,Le,I[tt],ee);if(vt===null){Le===null&&(Le=lt);break}e&&Le&&vt.alternate===null&&t(_,Le),O=f(vt,O,tt),gt===null?$e=vt:gt.sibling=vt,gt=vt,Le=lt}if(tt===I.length)return i(_,Le),dt&&Qa(_,tt),$e;if(Le===null){for(;tt<I.length;tt++)Le=re(_,I[tt],ee),Le!==null&&(O=f(Le,O,tt),gt===null?$e=Le:gt.sibling=Le,gt=Le);return dt&&Qa(_,tt),$e}for(Le=o(Le);tt<I.length;tt++)lt=Z(Le,_,tt,I[tt],ee),lt!==null&&(e&&lt.alternate!==null&&Le.delete(lt.key===null?tt:lt.key),O=f(lt,O,tt),gt===null?$e=lt:gt.sibling=lt,gt=lt);return e&&Le.forEach(function(Ur){return t(_,Ur)}),dt&&Qa(_,tt),$e}function Ge(_,O,I,ee){if(I==null)throw Error(s(151));for(var $e=null,gt=null,Le=O,tt=O=0,lt=null,vt=I.next();Le!==null&&!vt.done;tt++,vt=I.next()){Le.index>tt?(lt=Le,Le=null):lt=Le.sibling;var Ur=q(_,Le,vt.value,ee);if(Ur===null){Le===null&&(Le=lt);break}e&&Le&&Ur.alternate===null&&t(_,Le),O=f(Ur,O,tt),gt===null?$e=Ur:gt.sibling=Ur,gt=Ur,Le=lt}if(vt.done)return i(_,Le),dt&&Qa(_,tt),$e;if(Le===null){for(;!vt.done;tt++,vt=I.next())vt=re(_,vt.value,ee),vt!==null&&(O=f(vt,O,tt),gt===null?$e=vt:gt.sibling=vt,gt=vt);return dt&&Qa(_,tt),$e}for(Le=o(Le);!vt.done;tt++,vt=I.next())vt=Z(Le,_,tt,vt.value,ee),vt!==null&&(e&&vt.alternate!==null&&Le.delete(vt.key===null?tt:vt.key),O=f(vt,O,tt),gt===null?$e=vt:gt.sibling=vt,gt=vt);return e&&Le.forEach(function(ek){return t(_,ek)}),dt&&Qa(_,tt),$e}function At(_,O,I,ee){if(typeof I=="object"&&I!==null&&I.type===F&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case E:e:{for(var $e=I.key;O!==null;){if(O.key===$e){if($e=I.type,$e===F){if(O.tag===7){i(_,O.sibling),ee=u(O,I.props.children),ee.return=_,_=ee;break e}}else if(O.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===de&&si($e)===O.type){i(_,O.sibling),ee=u(O,I.props),qs(ee,I),ee.return=_,_=ee;break e}i(_,O);break}else t(_,O);O=O.sibling}I.type===F?(ee=ti(I.props.children,_.mode,ee,I.key),ee.return=_,_=ee):(ee=al(I.type,I.key,I.props,null,_.mode,ee),qs(ee,I),ee.return=_,_=ee)}return g(_);case N:e:{for($e=I.key;O!==null;){if(O.key===$e)if(O.tag===4&&O.stateNode.containerInfo===I.containerInfo&&O.stateNode.implementation===I.implementation){i(_,O.sibling),ee=u(O,I.children||[]),ee.return=_,_=ee;break e}else{i(_,O);break}else t(_,O);O=O.sibling}ee=Su(I,_.mode,ee),ee.return=_,_=ee}return g(_);case de:return I=si(I),At(_,O,I,ee)}if(He(I))return Re(_,O,I,ee);if(ze(I)){if($e=ze(I),typeof $e!="function")throw Error(s(150));return I=$e.call(I),Ge(_,O,I,ee)}if(typeof I.then=="function")return At(_,O,ul(I),ee);if(I.$$typeof===R)return At(_,O,sl(_,I),ee);dl(_,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,O!==null&&O.tag===6?(i(_,O.sibling),ee=u(O,I),ee.return=_,_=ee):(i(_,O),ee=wu(I,_.mode,ee),ee.return=_,_=ee),g(_)):i(_,O)}return function(_,O,I,ee){try{Vs=0;var $e=At(_,O,I,ee);return Ui=null,$e}catch(Le){if(Le===Bi||Le===ll)throw Le;var gt=Xn(29,Le,null,_.mode);return gt.lanes=ee,gt.return=_,gt}finally{}}}var li=tm(!0),nm=tm(!1),Sr=!1;function Mu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ru(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function kr(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(bt&2)!==0){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,t=nl(e),Ip(e,null,i),t}return tl(e,o,t,i),nl(e)}function Gs(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Jt(e,i)}}function zu(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?u=f=t:f=f.next=t}else u=f=t;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Lu=!1;function Ys(){if(Lu){var e=Li;if(e!==null)throw e}}function Ps(e,t,i,o){Lu=!1;var u=e.updateQueue;Sr=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var T=w,$=T.next;T.next=null,g===null?f=$:g.next=$,g=T;var J=e.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==g&&(w===null?J.firstBaseUpdate=$:w.next=$,J.lastBaseUpdate=T))}if(f!==null){var re=u.baseState;g=0,J=$=T=null,w=f;do{var q=w.lane&-536870913,Z=q!==w.lane;if(Z?(ot&q)===q:(o&q)===q){q!==0&&q===zi&&(Lu=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=e,Ge=w;q=t;var At=i;switch(Ge.tag){case 1:if(Re=Ge.payload,typeof Re=="function"){re=Re.call(At,re,q);break e}re=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ge.payload,q=typeof Re=="function"?Re.call(At,re,q):Re,q==null)break e;re=b({},re,q);break e;case 2:Sr=!0}}q=w.callback,q!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=u.callbacks,Z===null?u.callbacks=[q]:Z.push(q))}else Z={lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?($=J=Z,T=re):J=J.next=Z,g|=q;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,u.lastBaseUpdate=Z,u.shared.pending=null}}while(!0);J===null&&(T=re),u.baseState=T,u.firstBaseUpdate=$,u.lastBaseUpdate=J,f===null&&(u.shared.lanes=0),Or|=g,e.lanes=g,e.memoizedState=re}}function am(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function rm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)am(i[e],t)}var Ii=S(null),fl=S(0);function im(e,t){e=lr,j(fl,e),j(Ii,t),lr=e|t.baseLanes}function Bu(){j(fl,lr),j(Ii,Ii.current)}function Uu(){lr=fl.current,L(Ii),L(fl)}var Kn=S(null),da=null;function Er(e){var t=e.alternate;j(en,en.current&1),j(Kn,e),da===null&&(t===null||Ii.current!==null||t.memoizedState!==null)&&(da=e)}function Iu(e){j(en,en.current),j(Kn,e),da===null&&(da=e)}function sm(e){e.tag===22?(j(en,en.current),j(Kn,e),da===null&&(da=e)):Cr()}function Cr(){j(en,en.current),j(Kn,Kn.current)}function Qn(e){L(Kn),da===e&&(da=null),L(en)}var en=S(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Yd(i)||Pd(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var er=0,et=null,Ot=null,rn=null,pl=!1,$i=!1,ci=!1,ml=0,Fs=0,Hi=null,GS=0;function Xt(){throw Error(s(321))}function $u(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Zn(e[i],t[i]))return!1;return!0}function Hu(e,t,i,o,u,f){return er=f,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?qm:nd,ci=!1,f=i(o,u),ci=!1,$i&&(f=lm(t,i,o,u)),om(e),f}function om(e){U.H=Ks;var t=Ot!==null&&Ot.next!==null;if(er=0,rn=Ot=et=null,pl=!1,Fs=0,Hi=null,t)throw Error(s(300));e===null||sn||(e=e.dependencies,e!==null&&il(e)&&(sn=!0))}function lm(e,t,i,o){et=e;var u=0;do{if($i&&(Hi=null),Fs=0,$i=!1,25<=u)throw Error(s(301));if(u+=1,rn=Ot=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}U.H=Gm,f=t(i,o)}while($i);return f}function YS(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?Zs(t):t,e=e.useState()[0],(Ot!==null?Ot.memoizedState:null)!==e&&(et.flags|=1024),t}function Vu(){var e=ml!==0;return ml=0,e}function qu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Gu(e){if(pl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pl=!1}er=0,rn=Ot=et=null,$i=!1,Fs=ml=0,Hi=null}function zn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?et.memoizedState=rn=e:rn=rn.next=e,rn}function tn(){if(Ot===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=rn===null?et.memoizedState:rn.next;if(t!==null)rn=t,Ot=e;else{if(e===null)throw et.alternate===null?Error(s(467)):Error(s(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},rn===null?et.memoizedState=rn=e:rn=rn.next=e}return rn}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zs(e){var t=Fs;return Fs+=1,Hi===null&&(Hi=[]),e=Jp(Hi,e,t),t=et,(rn===null?t.memoizedState:rn.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?qm:nd),e}function gl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zs(e);if(e.$$typeof===R)return xn(e)}throw Error(s(438,String(e)))}function Yu(e){var t=null,i=et.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=et.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=yl(),et.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=pe;return t.index++,i}function tr(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=tn();return Pu(t,Ot,e)}function Pu(e,t,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}t.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var w=g=null,T=null,$=t,J=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(ot&re)===re:(er&re)===re){var q=$.revertLane;if(q===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===zi&&(J=!0);else if((er&q)===q){$=$.next,q===zi&&(J=!0);continue}else re={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},T===null?(w=T=re,g=f):T=T.next=re,et.lanes|=q,Or|=q;re=$.action,ci&&i(f,re),f=$.hasEagerState?$.eagerState:i(f,re)}else q={lane:re,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},T===null?(w=T=q,g=f):T=T.next=q,et.lanes|=re,Or|=re;$=$.next}while($!==null&&$!==t);if(T===null?g=f:T.next=w,!Zn(f,e.memoizedState)&&(sn=!0,J&&(i=Li,i!==null)))throw i;e.memoizedState=f,e.baseState=g,e.baseQueue=T,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Fu(e){var t=tn(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,f=t.memoizedState;if(u!==null){i.pending=null;var g=u=u.next;do f=e(f,g.action),g=g.next;while(g!==u);Zn(f,t.memoizedState)||(sn=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,o]}function cm(e,t,i){var o=et,u=tn(),f=dt;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=t();var g=!Zn((Ot||u).memoizedState,i);if(g&&(u.memoizedState=i,sn=!0),u=u.queue,Ku(fm.bind(null,o,u,e),[e]),u.getSnapshot!==t||g||rn!==null&&rn.memoizedState.tag&1){if(o.flags|=2048,Vi(9,{destroy:void 0},dm.bind(null,o,u,i,t),null),Dt===null)throw Error(s(349));f||(er&127)!==0||um(o,t,i)}return i}function um(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=et.updateQueue,t===null?(t=yl(),et.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function dm(e,t,i,o){t.value=i,t.getSnapshot=o,hm(t)&&pm(e)}function fm(e,t,i){return i(function(){hm(t)&&pm(e)})}function hm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Zn(e,i)}catch{return!0}}function pm(e){var t=ei(e,2);t!==null&&Vn(t,e,2)}function Zu(e){var t=zn();if(typeof e=="function"){var i=e;if(e=i(),ci){Me(!0);try{i()}finally{Me(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:e},t}function mm(e,t,i,o){return e.baseState=i,Pu(e,Ot,typeof o=="function"?o:tr)}function PS(e,t,i,o,u){if(Sl(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};U.T!==null?i(!0):f.isTransition=!1,o(f),i=t.pending,i===null?(f.next=t.pending=f,ym(t,f)):(f.next=i.next,t.pending=i.next=f)}}function ym(e,t){var i=t.action,o=t.payload,u=e.state;if(t.isTransition){var f=U.T,g={};U.T=g;try{var w=i(u,o),T=U.S;T!==null&&T(g,w),gm(e,t,w)}catch($){Xu(e,t,$)}finally{f!==null&&g.types!==null&&(f.types=g.types),U.T=f}}else try{f=i(u,o),gm(e,t,f)}catch($){Xu(e,t,$)}}function gm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){vm(e,t,o)},function(o){return Xu(e,t,o)}):vm(e,t,i)}function vm(e,t,i){t.status="fulfilled",t.value=i,bm(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,ym(e,i)))}function Xu(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,bm(t),t=t.next;while(t!==o)}e.action=null}function bm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function wm(e,t){return t}function Sm(e,t){if(dt){var i=Dt.formState;if(i!==null){e:{var o=et;if(dt){if(Bt){t:{for(var u=Bt,f=ua;u.nodeType!==8;){if(!f){u=null;break t}if(u=fa(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Bt=fa(u.nextSibling),o=u.data==="F!";break e}}br(o)}o=!1}o&&(t=i[0])}}return i=zn(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wm,lastRenderedState:t},i.queue=o,i=$m.bind(null,et,o),o.dispatch=i,o=Zu(!1),f=td.bind(null,et,!1,o.queue),o=zn(),u={state:t,dispatch:null,action:e,pending:null},o.queue=u,i=PS.bind(null,et,u,f,i),u.dispatch=i,o.memoizedState=e,[t,i,!1]}function xm(e){var t=tn();return km(t,Ot,e)}function km(e,t,i){if(t=Pu(e,t,wm)[0],e=vl(tr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Zs(t)}catch(g){throw g===Bi?ll:g}else o=t;t=tn();var u=t.queue,f=u.dispatch;return i!==t.memoizedState&&(et.flags|=2048,Vi(9,{destroy:void 0},FS.bind(null,u,i),null)),[o,f,e]}function FS(e,t){e.action=t}function Em(e){var t=tn(),i=Ot;if(i!==null)return km(t,i,e);tn(),t=t.memoizedState,i=tn();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function Vi(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=et.updateQueue,t===null&&(t=yl(),et.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function Cm(){return tn().memoizedState}function bl(e,t,i,o){var u=zn();et.flags|=e,u.memoizedState=Vi(1|t,{destroy:void 0},i,o===void 0?null:o)}function wl(e,t,i,o){var u=tn();o=o===void 0?null:o;var f=u.memoizedState.inst;Ot!==null&&o!==null&&$u(o,Ot.memoizedState.deps)?u.memoizedState=Vi(t,f,i,o):(et.flags|=e,u.memoizedState=Vi(1|t,f,i,o))}function Tm(e,t){bl(8390656,8,e,t)}function Ku(e,t){wl(2048,8,e,t)}function ZS(e){et.flags|=4;var t=et.updateQueue;if(t===null)t=yl(),et.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Nm(e){var t=tn().memoizedState;return ZS({ref:t,nextImpl:e}),function(){if((bt&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Om(e,t){return wl(4,2,e,t)}function jm(e,t){return wl(4,4,e,t)}function Am(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _m(e,t,i){i=i!=null?i.concat([e]):null,wl(4,4,Am.bind(null,t,e),i)}function Qu(){}function Dm(e,t){var i=tn();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&$u(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Mm(e,t){var i=tn();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&$u(t,o[1]))return o[0];if(o=e(),ci){Me(!0);try{e()}finally{Me(!1)}}return i.memoizedState=[o,t],o}function Ju(e,t,i){return i===void 0||(er&1073741824)!==0&&(ot&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Ry(),et.lanes|=e,Or|=e,i)}function Rm(e,t,i,o){return Zn(i,t)?i:Ii.current!==null?(e=Ju(e,i,o),Zn(e,t)||(sn=!0),e):(er&42)===0||(er&1073741824)!==0&&(ot&261930)===0?(sn=!0,e.memoizedState=i):(e=Ry(),et.lanes|=e,Or|=e,t)}function zm(e,t,i,o,u){var f=W.p;W.p=f!==0&&8>f?f:8;var g=U.T,w={};U.T=w,td(e,!1,t,i);try{var T=u(),$=U.S;if($!==null&&$(w,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var J=qS(T,o);Xs(e,t,J,ea(e))}else Xs(e,t,o,ea(e))}catch(re){Xs(e,t,{then:function(){},status:"rejected",reason:re},ea())}finally{W.p=f,g!==null&&w.types!==null&&(g.types=w.types),U.T=g}}function XS(){}function Wu(e,t,i,o){if(e.tag!==5)throw Error(s(476));var u=Lm(e).queue;zm(e,u,t,ce,i===null?XS:function(){return Bm(e),i(o)})}function Lm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:ce},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Bm(e){var t=Lm(e);t.next===null&&(t=e.alternate.memoizedState),Xs(e,t.next.queue,{},ea())}function ed(){return xn(ho)}function Um(){return tn().memoizedState}function Im(){return tn().memoizedState}function KS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=ea();e=xr(i);var o=kr(t,e,i);o!==null&&(Vn(o,t,i),Gs(o,t,i)),t={cache:ju()},e.payload=t;return}t=t.return}}function QS(e,t,i){var o=ea();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Sl(e)?Hm(t,i):(i=vu(e,t,i,o),i!==null&&(Vn(i,e,o),Vm(i,t,o)))}function $m(e,t,i){var o=ea();Xs(e,t,i,o)}function Xs(e,t,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Sl(e))Hm(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,w=f(g,i);if(u.hasEagerState=!0,u.eagerState=w,Zn(w,g))return tl(e,t,u,0),Dt===null&&el(),!1}catch{}finally{}if(i=vu(e,t,u,o),i!==null)return Vn(i,e,o),Vm(i,t,o),!0}return!1}function td(e,t,i,o){if(o={lane:2,revertLane:Md(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sl(e)){if(t)throw Error(s(479))}else t=vu(e,i,o,2),t!==null&&Vn(t,e,2)}function Sl(e){var t=e.alternate;return e===et||t!==null&&t===et}function Hm(e,t){$i=pl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Vm(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Jt(e,i)}}var Ks={readContext:xn,use:gl,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt,useHostTransitionStatus:Xt,useFormState:Xt,useActionState:Xt,useOptimistic:Xt,useMemoCache:Xt,useCacheRefresh:Xt};Ks.useEffectEvent=Xt;var qm={readContext:xn,use:gl,useCallback:function(e,t){return zn().memoizedState=[e,t===void 0?null:t],e},useContext:xn,useEffect:Tm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,bl(4194308,4,Am.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bl(4194308,4,e,t)},useInsertionEffect:function(e,t){bl(4,2,e,t)},useMemo:function(e,t){var i=zn();t=t===void 0?null:t;var o=e();if(ci){Me(!0);try{e()}finally{Me(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=zn();if(i!==void 0){var u=i(t);if(ci){Me(!0);try{i(t)}finally{Me(!1)}}}else u=t;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=QS.bind(null,et,e),[o.memoizedState,e]},useRef:function(e){var t=zn();return e={current:e},t.memoizedState=e},useState:function(e){e=Zu(e);var t=e.queue,i=$m.bind(null,et,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Qu,useDeferredValue:function(e,t){var i=zn();return Ju(i,e,t)},useTransition:function(){var e=Zu(!1);return e=zm.bind(null,et,e.queue,!0,!1),zn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=et,u=zn();if(dt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Dt===null)throw Error(s(349));(ot&127)!==0||um(o,t,i)}u.memoizedState=i;var f={value:i,getSnapshot:t};return u.queue=f,Tm(fm.bind(null,o,f,e),[e]),o.flags|=2048,Vi(9,{destroy:void 0},dm.bind(null,o,f,i,t),null),i},useId:function(){var e=zn(),t=Dt.identifierPrefix;if(dt){var i=za,o=Ra;i=(o&~(1<<32-rt(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=ml++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=GS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ed,useFormState:Sm,useActionState:Sm,useOptimistic:function(e){var t=zn();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=td.bind(null,et,!0,i),i.dispatch=t,[e,t]},useMemoCache:Yu,useCacheRefresh:function(){return zn().memoizedState=KS.bind(null,et)},useEffectEvent:function(e){var t=zn(),i={impl:e};return t.memoizedState=i,function(){if((bt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},nd={readContext:xn,use:gl,useCallback:Dm,useContext:xn,useEffect:Ku,useImperativeHandle:_m,useInsertionEffect:Om,useLayoutEffect:jm,useMemo:Mm,useReducer:vl,useRef:Cm,useState:function(){return vl(tr)},useDebugValue:Qu,useDeferredValue:function(e,t){var i=tn();return Rm(i,Ot.memoizedState,e,t)},useTransition:function(){var e=vl(tr)[0],t=tn().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:ed,useFormState:xm,useActionState:xm,useOptimistic:function(e,t){var i=tn();return mm(i,Ot,e,t)},useMemoCache:Yu,useCacheRefresh:Im};nd.useEffectEvent=Nm;var Gm={readContext:xn,use:gl,useCallback:Dm,useContext:xn,useEffect:Ku,useImperativeHandle:_m,useInsertionEffect:Om,useLayoutEffect:jm,useMemo:Mm,useReducer:Fu,useRef:Cm,useState:function(){return Fu(tr)},useDebugValue:Qu,useDeferredValue:function(e,t){var i=tn();return Ot===null?Ju(i,e,t):Rm(i,Ot.memoizedState,e,t)},useTransition:function(){var e=Fu(tr)[0],t=tn().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:cm,useId:Um,useHostTransitionStatus:ed,useFormState:Em,useActionState:Em,useOptimistic:function(e,t){var i=tn();return Ot!==null?mm(i,Ot,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Yu,useCacheRefresh:Im};Gm.useEffectEvent=Nm;function ad(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:b({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var rd={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=ea(),u=xr(o);u.payload=t,i!=null&&(u.callback=i),t=kr(e,u,o),t!==null&&(Vn(t,e,o),Gs(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=ea(),u=xr(o);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=kr(e,u,o),t!==null&&(Vn(t,e,o),Gs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ea(),o=xr(i);o.tag=2,t!=null&&(o.callback=t),t=kr(e,o,i),t!==null&&(Vn(t,e,i),Gs(t,e,i))}};function Ym(e,t,i,o,u,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):t.prototype&&t.prototype.isPureReactComponent?!Ls(i,o)||!Ls(u,f):!0}function Pm(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&rd.enqueueReplaceState(t,t.state,null)}function ui(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=b({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Fm(e){Wo(e)}function Zm(e){console.error(e)}function Xm(e){Wo(e)}function xl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Km(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function id(e,t,i){return i=xr(i),i.tag=3,i.payload={element:null},i.callback=function(){xl(e,t)},i}function Qm(e){return e=xr(e),e.tag=3,e}function Jm(e,t,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){Km(t,i,o)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Km(t,i,o),typeof u!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function JS(e,t,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Ri(t,i,u,!0),i=Kn.current,i!==null){switch(i.tag){case 31:case 13:return da===null?Rl():i.alternate===null&&Kt===0&&(Kt=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),Ad(e,o,u)),!1;case 22:return i.flags|=65536,o===cl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),Ad(e,o,u)),!1}throw Error(s(435,i.tag))}return Ad(e,o,u),Rl(),!1}if(dt)return t=Kn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,o!==Eu&&(e=Error(s(422),{cause:o}),Is(oa(e,i)))):(o!==Eu&&(t=Error(s(423),{cause:o}),Is(oa(t,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=oa(o,i),u=id(e.stateNode,o,u),zu(e,u),Kt!==4&&(Kt=2)),!1;var f=Error(s(520),{cause:o});if(f=oa(f,i),ro===null?ro=[f]:ro.push(f),Kt!==4&&(Kt=2),t===null)return!0;o=oa(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=id(i.stateNode,o,e),zu(i,e),!1;case 1:if(t=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(jr===null||!jr.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Qm(u),Jm(u,e,i,o),zu(i,u),!1}i=i.return}while(i!==null);return!1}var sd=Error(s(461)),sn=!1;function kn(e,t,i,o){t.child=e===null?nm(t,null,i,o):li(t,e.child,i,o)}function Wm(e,t,i,o,u){i=i.render;var f=t.ref;if("ref"in o){var g={};for(var w in o)w!=="ref"&&(g[w]=o[w])}else g=o;return ri(t),o=Hu(e,t,i,g,f,u),w=Vu(),e!==null&&!sn?(qu(e,t,u),nr(e,t,u)):(dt&&w&&xu(t),t.flags|=1,kn(e,t,o,u),t.child)}function ey(e,t,i,o,u){if(e===null){var f=i.type;return typeof f=="function"&&!bu(f)&&f.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=f,ty(e,t,f,o,u)):(e=al(i.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!pd(e,u)){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:Ls,i(g,o)&&e.ref===t.ref)return nr(e,t,u)}return t.flags|=1,e=Ka(f,o),e.ref=t.ref,e.return=t,t.child=e}function ty(e,t,i,o,u){if(e!==null){var f=e.memoizedProps;if(Ls(f,o)&&e.ref===t.ref)if(sn=!1,t.pendingProps=o=f,pd(e,u))(e.flags&131072)!==0&&(sn=!0);else return t.lanes=e.lanes,nr(e,t,u)}return od(e,t,i,o,u)}function ny(e,t,i,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=t.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,t.child=null;return ay(e,t,f,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ol(t,f!==null?f.cachePool:null),f!==null?im(t,f):Bu(),sm(t);else return o=t.lanes=536870912,ay(e,t,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(ol(t,f.cachePool),im(t,f),Cr(),t.memoizedState=null):(e!==null&&ol(t,null),Bu(),Cr());return kn(e,t,u,i),t.child}function Qs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ay(e,t,i,o,u){var f=_u();return f=f===null?null:{parent:an._currentValue,pool:f},t.memoizedState={baseLanes:i,cachePool:f},e!==null&&ol(t,null),Bu(),sm(t),e!==null&&Ri(e,t,o,!0),t.childLanes=u,null}function kl(e,t){return t=Cl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ry(e,t,i){return li(t,e.child,null,i),e=kl(t,t.pendingProps),e.flags|=2,Qn(t),t.memoizedState=null,e}function WS(e,t,i){var o=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(dt){if(o.mode==="hidden")return e=kl(t,o),t.lanes=536870912,Qs(null,e);if(Iu(t),(e=Bt)?(e=yg(e,ua),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:gr!==null?{id:Ra,overflow:za}:null,retryLane:536870912,hydrationErrors:null},i=Hp(e),i.return=t,t.child=i,Sn=t,Bt=null)):e=null,e===null)throw br(t);return t.lanes=536870912,null}return kl(t,o)}var f=e.memoizedState;if(f!==null){var g=f.dehydrated;if(Iu(t),u)if(t.flags&256)t.flags&=-257,t=ry(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(sn||Ri(e,t,i,!1),u=(i&e.childLanes)!==0,sn||u){if(o=Dt,o!==null&&(g=aa(o,i),g!==0&&g!==f.retryLane))throw f.retryLane=g,ei(e,g),Vn(o,e,g),sd;Rl(),t=ry(e,t,i)}else e=f.treeContext,Bt=fa(g.nextSibling),Sn=t,dt=!0,vr=null,ua=!1,e!==null&&Gp(t,e),t=kl(t,o),t.flags|=4096;return t}return e=Ka(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function El(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function od(e,t,i,o,u){return ri(t),i=Hu(e,t,i,o,void 0,u),o=Vu(),e!==null&&!sn?(qu(e,t,u),nr(e,t,u)):(dt&&o&&xu(t),t.flags|=1,kn(e,t,i,u),t.child)}function iy(e,t,i,o,u,f){return ri(t),t.updateQueue=null,i=lm(t,o,i,u),om(e),o=Vu(),e!==null&&!sn?(qu(e,t,f),nr(e,t,f)):(dt&&o&&xu(t),t.flags|=1,kn(e,t,i,f),t.child)}function sy(e,t,i,o,u){if(ri(t),t.stateNode===null){var f=Ai,g=i.contextType;typeof g=="object"&&g!==null&&(f=xn(g)),f=new i(o,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=rd,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=o,f.state=t.memoizedState,f.refs={},Mu(t),g=i.contextType,f.context=typeof g=="object"&&g!==null?xn(g):Ai,f.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ad(t,i,g,o),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&rd.enqueueReplaceState(f,f.state,null),Ps(t,o,f,u),Ys(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){f=t.stateNode;var w=t.memoizedProps,T=ui(i,w);f.props=T;var $=f.context,J=i.contextType;g=Ai,typeof J=="object"&&J!==null&&(g=xn(J));var re=i.getDerivedStateFromProps;J=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||$!==g)&&Pm(t,f,o,g),Sr=!1;var q=t.memoizedState;f.state=q,Ps(t,o,f,u),Ys(),$=t.memoizedState,w||q!==$||Sr?(typeof re=="function"&&(ad(t,i,re,o),$=t.memoizedState),(T=Sr||Ym(t,i,T,o,q,$,g))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=$),f.props=o,f.state=$,f.context=g,o=T):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,Ru(e,t),g=t.memoizedProps,J=ui(i,g),f.props=J,re=t.pendingProps,q=f.context,$=i.contextType,T=Ai,typeof $=="object"&&$!==null&&(T=xn($)),w=i.getDerivedStateFromProps,($=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==re||q!==T)&&Pm(t,f,o,T),Sr=!1,q=t.memoizedState,f.state=q,Ps(t,o,f,u),Ys();var Z=t.memoizedState;g!==re||q!==Z||Sr||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof w=="function"&&(ad(t,i,w,o),Z=t.memoizedState),(J=Sr||Ym(t,i,J,o,q,Z,T)||e!==null&&e.dependencies!==null&&il(e.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,Z,T),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,Z,T)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Z),f.props=o,f.state=Z,f.context=T,o=J):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),o=!1)}return f=o,El(e,t),o=(t.flags&128)!==0,f||o?(f=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&o?(t.child=li(t,e.child,null,u),t.child=li(t,null,i,u)):kn(e,t,i,u),t.memoizedState=f.state,e=t.child):e=nr(e,t,u),e}function oy(e,t,i,o){return ni(),t.flags|=256,kn(e,t,i,o),t.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cd(e){return{baseLanes:e,cachePool:Kp()}}function ud(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Wn),e}function ly(e,t,i){var o=t.pendingProps,u=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(en.current&2)!==0),g&&(u=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(dt){if(u?Er(t):Cr(),(e=Bt)?(e=yg(e,ua),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:gr!==null?{id:Ra,overflow:za}:null,retryLane:536870912,hydrationErrors:null},i=Hp(e),i.return=t,t.child=i,Sn=t,Bt=null)):e=null,e===null)throw br(t);return Pd(e)?t.lanes=32:t.lanes=536870912,null}var w=o.children;return o=o.fallback,u?(Cr(),u=t.mode,w=Cl({mode:"hidden",children:w},u),o=ti(o,u,i,null),w.return=t,o.return=t,w.sibling=o,t.child=w,o=t.child,o.memoizedState=cd(i),o.childLanes=ud(e,g,i),t.memoizedState=ld,Qs(null,o)):(Er(t),dd(t,w))}var T=e.memoizedState;if(T!==null&&(w=T.dehydrated,w!==null)){if(f)t.flags&256?(Er(t),t.flags&=-257,t=fd(e,t,i)):t.memoizedState!==null?(Cr(),t.child=e.child,t.flags|=128,t=null):(Cr(),w=o.fallback,u=t.mode,o=Cl({mode:"visible",children:o.children},u),w=ti(w,u,i,null),w.flags|=2,o.return=t,w.return=t,o.sibling=w,t.child=o,li(t,e.child,null,i),o=t.child,o.memoizedState=cd(i),o.childLanes=ud(e,g,i),t.memoizedState=ld,t=Qs(null,o));else if(Er(t),Pd(w)){if(g=w.nextSibling&&w.nextSibling.dataset,g)var $=g.dgst;g=$,o=Error(s(419)),o.stack="",o.digest=g,Is({value:o,source:null,stack:null}),t=fd(e,t,i)}else if(sn||Ri(e,t,i,!1),g=(i&e.childLanes)!==0,sn||g){if(g=Dt,g!==null&&(o=aa(g,i),o!==0&&o!==T.retryLane))throw T.retryLane=o,ei(e,o),Vn(g,e,o),sd;Yd(w)||Rl(),t=fd(e,t,i)}else Yd(w)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,Bt=fa(w.nextSibling),Sn=t,dt=!0,vr=null,ua=!1,e!==null&&Gp(t,e),t=dd(t,o.children),t.flags|=4096);return t}return u?(Cr(),w=o.fallback,u=t.mode,T=e.child,$=T.sibling,o=Ka(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,$!==null?w=Ka($,w):(w=ti(w,u,i,null),w.flags|=2),w.return=t,o.return=t,o.sibling=w,t.child=o,Qs(null,o),o=t.child,w=e.child.memoizedState,w===null?w=cd(i):(u=w.cachePool,u!==null?(T=an._currentValue,u=u.parent!==T?{parent:T,pool:T}:u):u=Kp(),w={baseLanes:w.baseLanes|i,cachePool:u}),o.memoizedState=w,o.childLanes=ud(e,g,i),t.memoizedState=ld,Qs(e.child,o)):(Er(t),i=e.child,e=i.sibling,i=Ka(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function dd(e,t){return t=Cl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Cl(e,t){return e=Xn(22,e,null,t),e.lanes=0,e}function fd(e,t,i){return li(t,e.child,null,i),e=dd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cy(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Nu(e.return,t,i)}function hd(e,t,i,o,u,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:f}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=i,g.tailMode=u,g.treeForkCount=f)}function uy(e,t,i){var o=t.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var g=en.current,w=(g&2)!==0;if(w?(g=g&1|2,t.flags|=128):g&=1,j(en,g),kn(e,t,o,i),o=dt?Us:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cy(e,i,t);else if(e.tag===19)cy(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&hl(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),hd(t,!1,u,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&hl(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}hd(t,!0,i,null,f,o);break;case"together":hd(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function nr(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Ri(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Ka(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ka(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function pd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function ex(e,t,i){switch(t.tag){case 3:Qe(t,t.stateNode.containerInfo),wr(t,an,e.memoizedState.cache),ni();break;case 27:case 5:Rt(t);break;case 4:Qe(t,t.stateNode.containerInfo);break;case 10:wr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Iu(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(Er(t),t.flags|=128,null):(i&t.child.childLanes)!==0?ly(e,t,i):(Er(t),e=nr(e,t,i),e!==null?e.sibling:null);Er(t);break;case 19:var u=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Ri(e,t,i,!1),o=(i&t.childLanes)!==0),u){if(o)return uy(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),j(en,en.current),o)break;return null;case 22:return t.lanes=0,ny(e,t,i,t.pendingProps);case 24:wr(t,an,e.memoizedState.cache)}return nr(e,t,i)}function dy(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)sn=!0;else{if(!pd(e,i)&&(t.flags&128)===0)return sn=!1,ex(e,t,i);sn=(e.flags&131072)!==0}else sn=!1,dt&&(t.flags&1048576)!==0&&qp(t,Us,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=si(t.elementType),t.type=e,typeof e=="function")bu(e)?(o=ui(e,o),t.tag=1,t=sy(null,t,e,o,i)):(t.tag=0,t=od(null,t,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===Y){t.tag=11,t=Wm(null,t,e,o,i);break e}else if(u===G){t.tag=14,t=ey(null,t,e,o,i);break e}}throw t=ke(e)||e,Error(s(306,t,""))}}return t;case 0:return od(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,u=ui(o,t.pendingProps),sy(e,t,o,u,i);case 3:e:{if(Qe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));o=t.pendingProps;var f=t.memoizedState;u=f.element,Ru(e,t),Ps(t,o,null,i);var g=t.memoizedState;if(o=g.cache,wr(t,an,o),o!==f.cache&&Ou(t,[an],i,!0),Ys(),o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=oy(e,t,o,i);break e}else if(o!==u){u=oa(Error(s(424)),t),Is(u),t=oy(e,t,o,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Bt=fa(e.firstChild),Sn=t,dt=!0,vr=null,ua=!0,i=nm(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ni(),o===u){t=nr(e,t,i);break e}kn(e,t,o,i)}t=t.child}return t;case 26:return El(e,t),e===null?(i=xg(t.type,null,t.pendingProps,null))?t.memoizedState=i:dt||(i=t.type,e=t.pendingProps,o=Hl(ve.current).createElement(i),o[nn]=t,o[wn]=e,En(o,i,e),te(o),t.stateNode=o):t.memoizedState=xg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Rt(t),e===null&&dt&&(o=t.stateNode=bg(t.type,t.pendingProps,ve.current),Sn=t,ua=!0,u=Bt,Mr(t.type)?(Fd=u,Bt=fa(o.firstChild)):Bt=u),kn(e,t,t.pendingProps.children,i),El(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&dt&&((u=o=Bt)&&(o=Ax(o,t.type,t.pendingProps,ua),o!==null?(t.stateNode=o,Sn=t,Bt=fa(o.firstChild),ua=!1,u=!0):u=!1),u||br(t)),Rt(t),u=t.type,f=t.pendingProps,g=e!==null?e.memoizedProps:null,o=f.children,Vd(u,f)?o=null:g!==null&&Vd(u,g)&&(t.flags|=32),t.memoizedState!==null&&(u=Hu(e,t,YS,null,null,i),ho._currentValue=u),El(e,t),kn(e,t,o,i),t.child;case 6:return e===null&&dt&&((e=i=Bt)&&(i=_x(i,t.pendingProps,ua),i!==null?(t.stateNode=i,Sn=t,Bt=null,e=!0):e=!1),e||br(t)),null;case 13:return ly(e,t,i);case 4:return Qe(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=li(t,null,o,i):kn(e,t,o,i),t.child;case 11:return Wm(e,t,t.type,t.pendingProps,i);case 7:return kn(e,t,t.pendingProps,i),t.child;case 8:return kn(e,t,t.pendingProps.children,i),t.child;case 12:return kn(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,wr(t,t.type,o.value),kn(e,t,o.children,i),t.child;case 9:return u=t.type._context,o=t.pendingProps.children,ri(t),u=xn(u),o=o(u),t.flags|=1,kn(e,t,o,i),t.child;case 14:return ey(e,t,t.type,t.pendingProps,i);case 15:return ty(e,t,t.type,t.pendingProps,i);case 19:return uy(e,t,i);case 31:return WS(e,t,i);case 22:return ny(e,t,i,t.pendingProps);case 24:return ri(t),o=xn(an),e===null?(u=_u(),u===null&&(u=Dt,f=ju(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),t.memoizedState={parent:o,cache:u},Mu(t),wr(t,an,u)):((e.lanes&i)!==0&&(Ru(e,t),Ps(t,null,null,i),Ys()),u=e.memoizedState,f=t.memoizedState,u.parent!==o?(u={parent:o,cache:o},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),wr(t,an,o)):(o=f.cache,wr(t,an,o),o!==u.cache&&Ou(t,[an],i,!0))),kn(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function ar(e){e.flags|=4}function md(e,t,i,o,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Uy())e.flags|=8192;else throw oi=cl,Du}else e.flags&=-16777217}function fy(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ng(t))if(Uy())e.flags|=8192;else throw oi=cl,Du}function Tl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Pe():536870912,e.lanes|=t,Pi|=t)}function Js(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function tx(e,t,i){var o=t.pendingProps;switch(ku(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return Ut(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Wa(an),Ze(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Mi(t)?ar(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Cu())),Ut(t),null;case 26:var u=t.type,f=t.memoizedState;return e===null?(ar(t),f!==null?(Ut(t),fy(t,f)):(Ut(t),md(t,u,null,o,i))):f?f!==e.memoizedState?(ar(t),Ut(t),fy(t,f)):(Ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&ar(t),Ut(t),md(t,u,e,o,i)),null;case 27:if($t(t),i=ve.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ar(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ut(t),null}e=M.current,Mi(t)?Yp(t):(e=bg(u,o,i),t.stateNode=e,ar(t))}return Ut(t),null;case 5:if($t(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ar(t);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ut(t),null}if(f=M.current,Mi(t))Yp(t);else{var g=Hl(ve.current);switch(f){case 1:f=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=g.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?g.createElement(u,{is:o.is}):g.createElement(u)}}f[nn]=t,f[wn]=o;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)f.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=f;e:switch(En(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ar(t)}}return Ut(t),md(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&ar(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(e=ve.current,Mi(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,u=Sn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[nn]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||lg(e.nodeValue,i)),e||br(t,!0)}else e=Hl(e).createTextNode(o),e[nn]=t,t.stateNode=e}return Ut(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=Mi(t),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[nn]=t}else ni(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ut(t),e=!1}else i=Cu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Qn(t),t):(Qn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Ut(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Mi(t),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[nn]=t}else ni(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ut(t),u=!1}else u=Cu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Qn(t),t):(Qn(t),null)}return Qn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Tl(t,t.updateQueue),Ut(t),null);case 4:return Ze(),e===null&&Bd(t.stateNode.containerInfo),Ut(t),null;case 10:return Wa(t.type),Ut(t),null;case 19:if(L(en),o=t.memoizedState,o===null)return Ut(t),null;if(u=(t.flags&128)!==0,f=o.rendering,f===null)if(u)Js(o,!1);else{if(Kt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=hl(e),f!==null){for(t.flags|=128,Js(o,!1),e=f.updateQueue,t.updateQueue=e,Tl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)$p(i,e),i=i.sibling;return j(en,en.current&1|2),dt&&Qa(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&C()>_l&&(t.flags|=128,u=!0,Js(o,!1),t.lanes=4194304)}else{if(!u)if(e=hl(f),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Tl(t,e),Js(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!dt)return Ut(t),null}else 2*C()-o.renderingStartTime>_l&&i!==536870912&&(t.flags|=128,u=!0,Js(o,!1),t.lanes=4194304);o.isBackwards?(f.sibling=t.child,t.child=f):(e=o.last,e!==null?e.sibling=f:t.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=C(),e.sibling=null,i=en.current,j(en,u?i&1|2:i&1),dt&&Qa(t,o.treeForkCount),e):(Ut(t),null);case 22:case 23:return Qn(t),Uu(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),i=t.updateQueue,i!==null&&Tl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&L(ii),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Wa(an),Ut(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function nx(e,t){switch(ku(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wa(an),Ze(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return $t(t),null;case 31:if(t.memoizedState!==null){if(Qn(t),t.alternate===null)throw Error(s(340));ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(en),null;case 4:return Ze(),null;case 10:return Wa(t.type),null;case 22:case 23:return Qn(t),Uu(),e!==null&&L(ii),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Wa(an),null;case 25:return null;default:return null}}function hy(e,t){switch(ku(t),t.tag){case 3:Wa(an),Ze();break;case 26:case 27:case 5:$t(t);break;case 4:Ze();break;case 31:t.memoizedState!==null&&Qn(t);break;case 13:Qn(t);break;case 19:L(en);break;case 10:Wa(t.type);break;case 22:case 23:Qn(t),Uu(),e!==null&&L(ii);break;case 24:Wa(an)}}function Ws(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var f=i.create,g=i.inst;o=f(),g.destroy=o}i=i.next}while(i!==u)}}catch(w){Ct(t,t.return,w)}}function Tr(e,t,i){try{var o=t.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var g=o.inst,w=g.destroy;if(w!==void 0){g.destroy=void 0,u=t;var T=i,$=w;try{$()}catch(J){Ct(u,T,J)}}}o=o.next}while(o!==f)}}catch(J){Ct(t,t.return,J)}}function py(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{rm(t,i)}catch(o){Ct(e,e.return,o)}}}function my(e,t,i){i.props=ui(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Ct(e,t,o)}}function eo(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){Ct(e,t,u)}}function La(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){Ct(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){Ct(e,t,u)}else i.current=null}function yy(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){Ct(e,e.return,u)}}function yd(e,t,i){try{var o=e.stateNode;Ex(o,e.type,i,t),o[wn]=t}catch(u){Ct(e,e.return,u)}}function gy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mr(e.type)||e.tag===4}function gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vd(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Za));else if(o!==4&&(o===27&&Mr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(vd(e,t,i),e=e.sibling;e!==null;)vd(e,t,i),e=e.sibling}function Nl(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&Mr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Nl(e,t,i),e=e.sibling;e!==null;)Nl(e,t,i),e=e.sibling}function vy(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);En(t,o,i),t[nn]=e,t[wn]=i}catch(f){Ct(e,e.return,f)}}var rr=!1,on=!1,bd=!1,by=typeof WeakSet=="function"?WeakSet:Set,vn=null;function ax(e,t){if(e=e.containerInfo,$d=Zl,e=_p(e),fu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,w=-1,T=-1,$=0,J=0,re=e,q=null;t:for(;;){for(var Z;re!==i||u!==0&&re.nodeType!==3||(w=g+u),re!==f||o!==0&&re.nodeType!==3||(T=g+o),re.nodeType===3&&(g+=re.nodeValue.length),(Z=re.firstChild)!==null;)q=re,re=Z;for(;;){if(re===e)break t;if(q===i&&++$===u&&(w=g),q===f&&++J===o&&(T=g),(Z=re.nextSibling)!==null)break;re=q,q=re.parentNode}re=Z}i=w===-1||T===-1?null:{start:w,end:T}}else i=null}i=i||{start:0,end:0}}else i=null;for(Hd={focusedElem:e,selectionRange:i},Zl=!1,vn=t;vn!==null;)if(t=vn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,vn=e;else for(;vn!==null;){switch(t=vn,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=t,u=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var Re=ui(i.type,u);e=o.getSnapshotBeforeUpdate(Re,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Ge){Ct(i,i.return,Ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Gd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,vn=e;break}vn=t.return}}function wy(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:sr(e,i),o&4&&Ws(5,i);break;case 1:if(sr(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){Ct(i,i.return,g)}else{var u=ui(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ct(i,i.return,g)}}o&64&&py(i),o&512&&eo(i,i.return);break;case 3:if(sr(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{rm(e,t)}catch(g){Ct(i,i.return,g)}}break;case 27:t===null&&o&4&&vy(i);case 26:case 5:sr(e,i),t===null&&o&4&&yy(i),o&512&&eo(i,i.return);break;case 12:sr(e,i);break;case 31:sr(e,i),o&4&&ky(e,i);break;case 13:sr(e,i),o&4&&Ey(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=fx.bind(null,i),Dx(e,i))));break;case 22:if(o=i.memoizedState!==null||rr,!o){t=t!==null&&t.memoizedState!==null||on,u=rr;var f=on;rr=o,(on=t)&&!f?or(e,i,(i.subtreeFlags&8772)!==0):sr(e,i),rr=u,on=f}break;case 30:break;default:sr(e,i)}}function Sy(e){var t=e.alternate;t!==null&&(e.alternate=null,Sy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&xa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qt=null,Un=!1;function ir(e,t,i){for(i=i.child;i!==null;)xy(e,t,i),i=i.sibling}function xy(e,t,i){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Ue,i)}catch{}switch(i.tag){case 26:on||La(i,t),ir(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:on||La(i,t);var o=qt,u=Un;Mr(i.type)&&(qt=i.stateNode,Un=!1),ir(e,t,i),co(i.stateNode),qt=o,Un=u;break;case 5:on||La(i,t);case 6:if(o=qt,u=Un,qt=null,ir(e,t,i),qt=o,Un=u,qt!==null)if(Un)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(i.stateNode)}catch(f){Ct(i,t,f)}else try{qt.removeChild(i.stateNode)}catch(f){Ct(i,t,f)}break;case 18:qt!==null&&(Un?(e=qt,pg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),es(e)):pg(qt,i.stateNode));break;case 4:o=qt,u=Un,qt=i.stateNode.containerInfo,Un=!0,ir(e,t,i),qt=o,Un=u;break;case 0:case 11:case 14:case 15:Tr(2,i,t),on||Tr(4,i,t),ir(e,t,i);break;case 1:on||(La(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&my(i,t,o)),ir(e,t,i);break;case 21:ir(e,t,i);break;case 22:on=(o=on)||i.memoizedState!==null,ir(e,t,i),on=o;break;default:ir(e,t,i)}}function ky(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{es(e)}catch(i){Ct(t,t.return,i)}}}function Ey(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{es(e)}catch(i){Ct(t,t.return,i)}}function rx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new by),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new by),t;default:throw Error(s(435,e.tag))}}function Ol(e,t){var i=rx(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var u=hx.bind(null,e,o);o.then(u,u)}})}function In(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],f=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 27:if(Mr(w.type)){qt=w.stateNode,Un=!1;break e}break;case 5:qt=w.stateNode,Un=!1;break e;case 3:case 4:qt=w.stateNode.containerInfo,Un=!0;break e}w=w.return}if(qt===null)throw Error(s(160));xy(f,g,u),qt=null,Un=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Cy(t,e),t=t.sibling}var Ea=null;function Cy(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:In(t,e),$n(e),o&4&&(Tr(3,e,e.return),Ws(3,e),Tr(5,e,e.return));break;case 1:In(t,e),$n(e),o&512&&(on||i===null||La(i,i.return)),o&64&&rr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Ea;if(In(t,e),$n(e),o&512&&(on||i===null||La(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Sa]||f[nn]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),En(f,o,i),f[nn]=e,te(f),o=f;break e;case"link":var g=Cg("link","href",u).get(o+(i.href||""));if(g){for(var w=0;w<g.length;w++)if(f=g[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(w,1);break t}}f=u.createElement(o),En(f,o,i),u.head.appendChild(f);break;case"meta":if(g=Cg("meta","content",u).get(o+(i.content||""))){for(w=0;w<g.length;w++)if(f=g[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(w,1);break t}}f=u.createElement(o),En(f,o,i),u.head.appendChild(f);break;default:throw Error(s(468,o))}f[nn]=e,te(f),o=f}e.stateNode=o}else Tg(u,e.type,e.stateNode);else e.stateNode=Eg(u,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?Tg(u,e.type,e.stateNode):Eg(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&yd(e,e.memoizedProps,i.memoizedProps)}break;case 27:In(t,e),$n(e),o&512&&(on||i===null||La(i,i.return)),i!==null&&o&4&&yd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(In(t,e),$n(e),o&512&&(on||i===null||La(i,i.return)),e.flags&32){u=e.stateNode;try{ki(u,"")}catch(Re){Ct(e,e.return,Re)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,yd(e,u,i!==null?i.memoizedProps:u)),o&1024&&(bd=!0);break;case 6:if(In(t,e),$n(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Re){Ct(e,e.return,Re)}}break;case 3:if(Gl=null,u=Ea,Ea=Vl(t.containerInfo),In(t,e),Ea=u,$n(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{es(t.containerInfo)}catch(Re){Ct(e,e.return,Re)}bd&&(bd=!1,Ty(e));break;case 4:o=Ea,Ea=Vl(e.stateNode.containerInfo),In(t,e),$n(e),Ea=o;break;case 12:In(t,e),$n(e);break;case 31:In(t,e),$n(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 13:In(t,e),$n(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Al=C()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 22:u=e.memoizedState!==null;var T=i!==null&&i.memoizedState!==null,$=rr,J=on;if(rr=$||u,on=J||T,In(t,e),on=J,rr=$,$n(e),o&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(i===null||T||rr||on||di(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){T=i=t;try{if(f=T.stateNode,u)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{w=T.stateNode;var re=T.memoizedProps.style,q=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(Re){Ct(T,T.return,Re)}}}else if(t.tag===6){if(i===null){T=t;try{T.stateNode.nodeValue=u?"":T.memoizedProps}catch(Re){Ct(T,T.return,Re)}}}else if(t.tag===18){if(i===null){T=t;try{var Z=T.stateNode;u?mg(Z,!0):mg(T.stateNode,!1)}catch(Re){Ct(T,T.return,Re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Ol(e,i))));break;case 19:In(t,e),$n(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ol(e,o)));break;case 30:break;case 21:break;default:In(t,e),$n(e)}}function $n(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(gy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=gd(e);Nl(e,f,u);break;case 5:var g=i.stateNode;i.flags&32&&(ki(g,""),i.flags&=-33);var w=gd(e);Nl(e,w,g);break;case 3:case 4:var T=i.stateNode.containerInfo,$=gd(e);vd(e,$,T);break;default:throw Error(s(161))}}catch(J){Ct(e,e.return,J)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ty(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ty(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function sr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wy(e,t.alternate,t),t=t.sibling}function di(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Tr(4,t,t.return),di(t);break;case 1:La(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&my(t,t.return,i),di(t);break;case 27:co(t.stateNode);case 26:case 5:La(t,t.return),di(t);break;case 22:t.memoizedState===null&&di(t);break;case 30:di(t);break;default:di(t)}e=e.sibling}}function or(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,u=e,f=t,g=f.flags;switch(f.tag){case 0:case 11:case 15:or(u,f,i),Ws(4,f);break;case 1:if(or(u,f,i),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch($){Ct(o,o.return,$)}if(o=f,u=o.updateQueue,u!==null){var w=o.stateNode;try{var T=u.shared.hiddenCallbacks;if(T!==null)for(u.shared.hiddenCallbacks=null,u=0;u<T.length;u++)am(T[u],w)}catch($){Ct(o,o.return,$)}}i&&g&64&&py(f),eo(f,f.return);break;case 27:vy(f);case 26:case 5:or(u,f,i),i&&o===null&&g&4&&yy(f),eo(f,f.return);break;case 12:or(u,f,i);break;case 31:or(u,f,i),i&&g&4&&ky(u,f);break;case 13:or(u,f,i),i&&g&4&&Ey(u,f);break;case 22:f.memoizedState===null&&or(u,f,i),eo(f,f.return);break;case 30:break;default:or(u,f,i)}t=t.sibling}}function wd(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&$s(i))}function Sd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e))}function Ca(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ny(e,t,i,o),t=t.sibling}function Ny(e,t,i,o){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Ca(e,t,i,o),u&2048&&Ws(9,t);break;case 1:Ca(e,t,i,o);break;case 3:Ca(e,t,i,o),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e)));break;case 12:if(u&2048){Ca(e,t,i,o),e=t.stateNode;try{var f=t.memoizedProps,g=f.id,w=f.onPostCommit;typeof w=="function"&&w(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Ct(t,t.return,T)}}else Ca(e,t,i,o);break;case 31:Ca(e,t,i,o);break;case 13:Ca(e,t,i,o);break;case 23:break;case 22:f=t.stateNode,g=t.alternate,t.memoizedState!==null?f._visibility&2?Ca(e,t,i,o):to(e,t):f._visibility&2?Ca(e,t,i,o):(f._visibility|=2,qi(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),u&2048&&wd(g,t);break;case 24:Ca(e,t,i,o),u&2048&&Sd(t.alternate,t);break;default:Ca(e,t,i,o)}}function qi(e,t,i,o,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,g=t,w=i,T=o,$=g.flags;switch(g.tag){case 0:case 11:case 15:qi(f,g,w,T,u),Ws(8,g);break;case 23:break;case 22:var J=g.stateNode;g.memoizedState!==null?J._visibility&2?qi(f,g,w,T,u):to(f,g):(J._visibility|=2,qi(f,g,w,T,u)),u&&$&2048&&wd(g.alternate,g);break;case 24:qi(f,g,w,T,u),u&&$&2048&&Sd(g.alternate,g);break;default:qi(f,g,w,T,u)}t=t.sibling}}function to(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,u=o.flags;switch(o.tag){case 22:to(i,o),u&2048&&wd(o.alternate,o);break;case 24:to(i,o),u&2048&&Sd(o.alternate,o);break;default:to(i,o)}t=t.sibling}}var no=8192;function Gi(e,t,i){if(e.subtreeFlags&no)for(e=e.child;e!==null;)Oy(e,t,i),e=e.sibling}function Oy(e,t,i){switch(e.tag){case 26:Gi(e,t,i),e.flags&no&&e.memoizedState!==null&&Gx(i,Ea,e.memoizedState,e.memoizedProps);break;case 5:Gi(e,t,i);break;case 3:case 4:var o=Ea;Ea=Vl(e.stateNode.containerInfo),Gi(e,t,i),Ea=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=no,no=16777216,Gi(e,t,i),no=o):Gi(e,t,i));break;default:Gi(e,t,i)}}function jy(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];vn=o,_y(o,e)}jy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ay(e),e=e.sibling}function Ay(e){switch(e.tag){case 0:case 11:case 15:ao(e),e.flags&2048&&Tr(9,e,e.return);break;case 3:ao(e);break;case 12:ao(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,jl(e)):ao(e);break;default:ao(e)}}function jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];vn=o,_y(o,e)}jy(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Tr(8,t,t.return),jl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,jl(t));break;default:jl(t)}e=e.sibling}}function _y(e,t){for(;vn!==null;){var i=vn;switch(i.tag){case 0:case 11:case 15:Tr(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:$s(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,vn=o;else e:for(i=e;vn!==null;){o=vn;var u=o.sibling,f=o.return;if(Sy(o),o===i){vn=null;break e}if(u!==null){u.return=f,vn=u;break e}vn=f}}}var ix={getCacheForType:function(e){var t=xn(an),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return xn(an).controller.signal}},sx=typeof WeakMap=="function"?WeakMap:Map,bt=0,Dt=null,it=null,ot=0,Et=0,Jn=null,Nr=!1,Yi=!1,xd=!1,lr=0,Kt=0,Or=0,fi=0,kd=0,Wn=0,Pi=0,ro=null,Hn=null,Ed=!1,Al=0,Dy=0,_l=1/0,Dl=null,jr=null,hn=0,Ar=null,Fi=null,cr=0,Cd=0,Td=null,My=null,io=0,Nd=null;function ea(){return(bt&2)!==0&&ot!==0?ot&-ot:U.T!==null?Md():Ns()}function Ry(){if(Wn===0)if((ot&536870912)===0||dt){var e=z;z<<=1,(z&3932160)===0&&(z=262144),Wn=e}else Wn=536870912;return e=Kn.current,e!==null&&(e.flags|=32),Wn}function Vn(e,t,i){(e===Dt&&(Et===2||Et===9)||e.cancelPendingCommit!==null)&&(Zi(e,0),_r(e,ot,Wn,!1)),Tt(e,i),((bt&2)===0||e!==Dt)&&(e===Dt&&((bt&2)===0&&(fi|=i),Kt===4&&_r(e,ot,Wn,!1)),Ba(e))}function zy(e,t,i){if((bt&6)!==0)throw Error(s(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||mt(e,t),u=o?cx(e,t):jd(e,t,!0),f=o;do{if(u===0){Yi&&!o&&_r(e,t,0,!1);break}else{if(i=e.current.alternate,f&&!ox(i)){u=jd(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var w=e;u=ro;var T=w.current.memoizedState.isDehydrated;if(T&&(Zi(w,g).flags|=256),g=jd(w,g,!1),g!==2){if(xd&&!T){w.errorRecoveryDisabledLanes|=f,fi|=f,u=4;break e}f=Hn,Hn=u,f!==null&&(Hn===null?Hn=f:Hn.push.apply(Hn,f))}u=g}if(f=!1,u!==2)continue}}if(u===1){Zi(e,0),_r(e,t,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:_r(o,t,Wn,!Nr);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Al+300-C(),10<u)){if(_r(o,t,Wn,!Nr),De(o,0,!0)!==0)break e;cr=t,o.timeoutHandle=fg(Ly.bind(null,o,i,Hn,Dl,Ed,t,Wn,fi,Pi,Nr,f,"Throttled",-0,0),u);break e}Ly(o,i,Hn,Dl,Ed,t,Wn,fi,Pi,Nr,f,null,-0,0)}}break}while(!0);Ba(e)}function Ly(e,t,i,o,u,f,g,w,T,$,J,re,q,Z){if(e.timeoutHandle=-1,re=t.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Za},Oy(t,f,re);var Re=(f&62914560)===f?Al-C():(f&4194048)===f?Dy-C():0;if(Re=Yx(re,Re),Re!==null){cr=f,e.cancelPendingCommit=Re(Gy.bind(null,e,t,f,i,o,u,g,w,T,J,re,null,q,Z)),_r(e,f,g,!$);return}}Gy(e,t,f,i,o,u,g,w,T)}function ox(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],f=u.getSnapshot;u=u.value;try{if(!Zn(f(),u))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _r(e,t,i,o){t&=~kd,t&=~fi,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var u=t;0<u;){var f=31-rt(u),g=1<<f;o[f]=-1,u&=~g}i!==0&&Ts(e,i,t)}function Ml(){return(bt&6)===0?(so(0),!1):!0}function Od(){if(it!==null){if(Et===0)var e=it.return;else e=it,Ja=ai=null,Gu(e),Ui=null,Vs=0,e=it;for(;e!==null;)hy(e.alternate,e),e=e.return;it=null}}function Zi(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Nx(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),cr=0,Od(),Dt=e,it=i=Ka(e.current,null),ot=t,Et=0,Jn=null,Nr=!1,Yi=mt(e,t),xd=!1,Pi=Wn=kd=fi=Or=Kt=0,Hn=ro=null,Ed=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var u=31-rt(o),f=1<<u;t|=e[u],o&=~f}return lr=t,el(),i}function By(e,t){et=null,U.H=Ks,t===Bi||t===ll?(t=Wp(),Et=3):t===Du?(t=Wp(),Et=4):Et=t===sd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Jn=t,it===null&&(Kt=1,xl(e,oa(t,e.current)))}function Uy(){var e=Kn.current;return e===null?!0:(ot&4194048)===ot?da===null:(ot&62914560)===ot||(ot&536870912)!==0?e===da:!1}function Iy(){var e=U.H;return U.H=Ks,e===null?Ks:e}function $y(){var e=U.A;return U.A=ix,e}function Rl(){Kt=4,Nr||(ot&4194048)!==ot&&Kn.current!==null||(Yi=!0),(Or&134217727)===0&&(fi&134217727)===0||Dt===null||_r(Dt,ot,Wn,!1)}function jd(e,t,i){var o=bt;bt|=2;var u=Iy(),f=$y();(Dt!==e||ot!==t)&&(Dl=null,Zi(e,t)),t=!1;var g=Kt;e:do try{if(Et!==0&&it!==null){var w=it,T=Jn;switch(Et){case 8:Od(),g=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(t=!0);var $=Et;if(Et=0,Jn=null,Xi(e,w,T,$),i&&Yi){g=0;break e}break;default:$=Et,Et=0,Jn=null,Xi(e,w,T,$)}}lx(),g=Kt;break}catch(J){By(e,J)}while(!0);return t&&e.shellSuspendCounter++,Ja=ai=null,bt=o,U.H=u,U.A=f,it===null&&(Dt=null,ot=0,el()),g}function lx(){for(;it!==null;)Hy(it)}function cx(e,t){var i=bt;bt|=2;var o=Iy(),u=$y();Dt!==e||ot!==t?(Dl=null,_l=C()+500,Zi(e,t)):Yi=mt(e,t);e:do try{if(Et!==0&&it!==null){t=it;var f=Jn;t:switch(Et){case 1:Et=0,Jn=null,Xi(e,t,f,1);break;case 2:case 9:if(Qp(f)){Et=0,Jn=null,Vy(t);break}t=function(){Et!==2&&Et!==9||Dt!==e||(Et=7),Ba(e)},f.then(t,t);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:Qp(f)?(Et=0,Jn=null,Vy(t)):(Et=0,Jn=null,Xi(e,t,f,7));break;case 5:var g=null;switch(it.tag){case 26:g=it.memoizedState;case 5:case 27:var w=it;if(g?Ng(g):w.stateNode.complete){Et=0,Jn=null;var T=w.sibling;if(T!==null)it=T;else{var $=w.return;$!==null?(it=$,zl($)):it=null}break t}}Et=0,Jn=null,Xi(e,t,f,5);break;case 6:Et=0,Jn=null,Xi(e,t,f,6);break;case 8:Od(),Kt=6;break e;default:throw Error(s(462))}}ux();break}catch(J){By(e,J)}while(!0);return Ja=ai=null,U.H=o,U.A=u,bt=i,it!==null?0:(Dt=null,ot=0,el(),Kt)}function ux(){for(;it!==null&&!xe();)Hy(it)}function Hy(e){var t=dy(e.alternate,e,lr);e.memoizedProps=e.pendingProps,t===null?zl(e):it=t}function Vy(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=iy(i,t,t.pendingProps,t.type,void 0,ot);break;case 11:t=iy(i,t,t.pendingProps,t.type.render,t.ref,ot);break;case 5:Gu(t);default:hy(i,t),t=it=$p(t,lr),t=dy(i,t,lr)}e.memoizedProps=e.pendingProps,t===null?zl(e):it=t}function Xi(e,t,i,o){Ja=ai=null,Gu(t),Ui=null,Vs=0;var u=t.return;try{if(JS(e,u,t,i,ot)){Kt=1,xl(e,oa(i,e.current)),it=null;return}}catch(f){if(u!==null)throw it=u,f;Kt=1,xl(e,oa(i,e.current)),it=null;return}t.flags&32768?(dt||o===1?e=!0:Yi||(ot&536870912)!==0?e=!1:(Nr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Kn.current,o!==null&&o.tag===13&&(o.flags|=16384))),qy(t,e)):zl(t)}function zl(e){var t=e;do{if((t.flags&32768)!==0){qy(t,Nr);return}e=t.return;var i=tx(t.alternate,t,lr);if(i!==null){it=i;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);Kt===0&&(Kt=5)}function qy(e,t){do{var i=nx(e.alternate,e);if(i!==null){i.flags&=32767,it=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){it=e;return}it=e=i}while(e!==null);Kt=6,it=null}function Gy(e,t,i,o,u,f,g,w,T){e.cancelPendingCommit=null;do Ll();while(hn!==0);if((bt&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=gu,kt(e,i,f,g,w,T),e===Dt&&(it=Dt=null,ot=0),Fi=t,Ar=e,cr=i,Cd=f,Td=u,My=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,px(be,function(){return Xy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=U.T,U.T=null,u=W.p,W.p=2,g=bt,bt|=4;try{ax(e,t,i)}finally{bt=g,W.p=u,U.T=o}}hn=1,Yy(),Py(),Fy()}}function Yy(){if(hn===1){hn=0;var e=Ar,t=Fi,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=U.T,U.T=null;var o=W.p;W.p=2;var u=bt;bt|=4;try{Cy(t,e);var f=Hd,g=_p(e.containerInfo),w=f.focusedElem,T=f.selectionRange;if(g!==w&&w&&w.ownerDocument&&Ap(w.ownerDocument.documentElement,w)){if(T!==null&&fu(w)){var $=T.start,J=T.end;if(J===void 0&&(J=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(J,w.value.length);else{var re=w.ownerDocument||document,q=re&&re.defaultView||window;if(q.getSelection){var Z=q.getSelection(),Re=w.textContent.length,Ge=Math.min(T.start,Re),At=T.end===void 0?Ge:Math.min(T.end,Re);!Z.extend&&Ge>At&&(g=At,At=Ge,Ge=g);var _=jp(w,Ge),O=jp(w,At);if(_&&O&&(Z.rangeCount!==1||Z.anchorNode!==_.node||Z.anchorOffset!==_.offset||Z.focusNode!==O.node||Z.focusOffset!==O.offset)){var I=re.createRange();I.setStart(_.node,_.offset),Z.removeAllRanges(),Ge>At?(Z.addRange(I),Z.extend(O.node,O.offset)):(I.setEnd(O.node,O.offset),Z.addRange(I))}}}}for(re=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&re.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var ee=re[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Zl=!!$d,Hd=$d=null}finally{bt=u,W.p=o,U.T=i}}e.current=t,hn=2}}function Py(){if(hn===2){hn=0;var e=Ar,t=Fi,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=U.T,U.T=null;var o=W.p;W.p=2;var u=bt;bt|=4;try{wy(e,t.alternate,t)}finally{bt=u,W.p=o,U.T=i}}hn=3}}function Fy(){if(hn===4||hn===3){hn=0,se();var e=Ar,t=Fi,i=cr,o=My;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?hn=5:(hn=0,Fi=Ar=null,Zy(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(jr=null),mn(i),t=t.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Ue,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=U.T,u=W.p,W.p=2,U.T=null;try{for(var f=e.onRecoverableError,g=0;g<o.length;g++){var w=o[g];f(w.value,{componentStack:w.stack})}}finally{U.T=t,W.p=u}}(cr&3)!==0&&Ll(),Ba(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===Nd?io++:(io=0,Nd=e):io=0,so(0)}}function Zy(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,$s(t)))}function Ll(){return Yy(),Py(),Fy(),Xy()}function Xy(){if(hn!==5)return!1;var e=Ar,t=Cd;Cd=0;var i=mn(cr),o=U.T,u=W.p;try{W.p=32>i?32:i,U.T=null,i=Td,Td=null;var f=Ar,g=cr;if(hn=0,Fi=Ar=null,cr=0,(bt&6)!==0)throw Error(s(331));var w=bt;if(bt|=4,Ay(f.current),Ny(f,f.current,g,i),bt=w,so(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Ue,f)}catch{}return!0}finally{W.p=u,U.T=o,Zy(e,t)}}function Ky(e,t,i){t=oa(i,t),t=id(e.stateNode,t,2),e=kr(e,t,2),e!==null&&(Tt(e,2),Ba(e))}function Ct(e,t,i){if(e.tag===3)Ky(e,e,i);else for(;t!==null;){if(t.tag===3){Ky(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(jr===null||!jr.has(o))){e=oa(i,e),i=Qm(2),o=kr(t,i,2),o!==null&&(Jm(i,o,t,e),Tt(o,2),Ba(o));break}}t=t.return}}function Ad(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new sx;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(i)||(xd=!0,u.add(i),e=dx.bind(null,e,t,i),t.then(e,e))}function dx(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Dt===e&&(ot&i)===i&&(Kt===4||Kt===3&&(ot&62914560)===ot&&300>C()-Al?(bt&2)===0&&Zi(e,0):kd|=i,Pi===ot&&(Pi=0)),Ba(e)}function Qy(e,t){t===0&&(t=Pe()),e=ei(e,t),e!==null&&(Tt(e,t),Ba(e))}function fx(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Qy(e,i)}function hx(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(t),Qy(e,i)}function px(e,t){return Q(e,t)}var Bl=null,Ki=null,_d=!1,Ul=!1,Dd=!1,Dr=0;function Ba(e){e!==Ki&&e.next===null&&(Ki===null?Bl=Ki=e:Ki=Ki.next=e),Ul=!0,_d||(_d=!0,yx())}function so(e,t){if(!Dd&&Ul){Dd=!0;do for(var i=!1,o=Bl;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var g=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-rt(42|e)+1)-1,f&=u&~(g&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,tg(o,f))}else f=ot,f=De(o,o===Dt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||mt(o,f)||(i=!0,tg(o,f));o=o.next}while(i);Dd=!1}}function mx(){Jy()}function Jy(){Ul=_d=!1;var e=0;Dr!==0&&Tx()&&(e=Dr);for(var t=C(),i=null,o=Bl;o!==null;){var u=o.next,f=Wy(o,t);f===0?(o.next=null,i===null?Bl=u:i.next=u,u===null&&(Ki=i)):(i=o,(e!==0||(f&3)!==0)&&(Ul=!0)),o=u}hn!==0&&hn!==5||so(e),Dr!==0&&(Dr=0)}function Wy(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var g=31-rt(f),w=1<<g,T=u[g];T===-1?((w&i)===0||(w&o)!==0)&&(u[g]=Fn(w,t)):T<=t&&(e.expiredLanes|=w),f&=~w}if(t=Dt,i=ot,i=De(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Et===2||Et===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&_e(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||mt(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&_e(o),mn(i)){case 2:case 8:i=fe;break;case 32:i=be;break;case 268435456:i=Ve;break;default:i=be}return o=eg.bind(null,e),i=Q(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&_e(o),e.callbackPriority=2,e.callbackNode=null,2}function eg(e,t){if(hn!==0&&hn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ll()&&e.callbackNode!==i)return null;var o=ot;return o=De(e,e===Dt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(zy(e,o,t),Wy(e,C()),e.callbackNode!=null&&e.callbackNode===i?eg.bind(null,e):null)}function tg(e,t){if(Ll())return null;zy(e,t,!0)}function yx(){Ox(function(){(bt&6)!==0?Q(oe,mx):Jy()})}function Md(){if(Dr===0){var e=zi;e===0&&(e=A,A<<=1,(A&261888)===0&&(A=256)),Dr=e}return Dr}function ng(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Po(""+e)}function ag(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function gx(e,t,i,o,u){if(t==="submit"&&i&&i.stateNode===u){var f=ng((u[wn]||null).action),g=o.submitter;g&&(t=(t=g[wn]||null)?ng(t.formAction):g.getAttribute("formAction"),t!==null&&(f=t,g=null));var w=new Ko("action","action",null,o,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Dr!==0){var T=g?ag(u,g):new FormData(u);Wu(i,{pending:!0,data:T,method:u.method,action:f},null,T)}}else typeof f=="function"&&(w.preventDefault(),T=g?ag(u,g):new FormData(u),Wu(i,{pending:!0,data:T,method:u.method,action:f},f,T))},currentTarget:u}]})}}for(var Rd=0;Rd<yu.length;Rd++){var zd=yu[Rd],vx=zd.toLowerCase(),bx=zd[0].toUpperCase()+zd.slice(1);ka(vx,"on"+bx)}ka(Rp,"onAnimationEnd"),ka(zp,"onAnimationIteration"),ka(Lp,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(zS,"onTransitionRun"),ka(LS,"onTransitionStart"),ka(BS,"onTransitionCancel"),ka(Bp,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Ce("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ce("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ce("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ce("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ce("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ce("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oo));function rg(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var g=o.length-1;0<=g;g--){var w=o[g],T=w.instance,$=w.currentTarget;if(w=w.listener,T!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=$;try{f(u)}catch(J){Wo(J)}u.currentTarget=null,f=T}else for(g=0;g<o.length;g++){if(w=o[g],T=w.instance,$=w.currentTarget,w=w.listener,T!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=$;try{f(u)}catch(J){Wo(J)}u.currentTarget=null,f=T}}}}function st(e,t){var i=t[Vo];i===void 0&&(i=t[Vo]=new Set);var o=e+"__bubble";i.has(o)||(ig(t,e,2,!1),i.add(o))}function Ld(e,t,i){var o=0;t&&(o|=4),ig(i,e,o,t)}var Il="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[Il]){e[Il]=!0,me.forEach(function(i){i!=="selectionchange"&&(wx.has(i)||Ld(i,!1,e),Ld(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Il]||(t[Il]=!0,Ld("selectionchange",!1,t))}}function ig(e,t,i,o){switch(Rg(t)){case 2:var u=Zx;break;case 8:u=Xx;break;default:u=Jd}i=u.bind(null,t,i,e),u=void 0,!au||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function Ud(e,t,i,o,u){var f=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var w=o.stateNode.containerInfo;if(w===u)break;if(g===4)for(g=o.return;g!==null;){var T=g.tag;if((T===3||T===4)&&g.stateNode.containerInfo===u)return;g=g.return}for(;w!==null;){if(g=ra(w),g===null)return;if(T=g.tag,T===5||T===6||T===26||T===27){o=f=g;continue e}w=w.parentNode}}o=o.return}up(function(){var $=f,J=tu(i),re=[];e:{var q=Up.get(e);if(q!==void 0){var Z=Ko,Re=e;switch(e){case"keypress":if(Zo(i)===0)break e;case"keydown":case"keyup":Z=hS;break;case"focusin":Re="focus",Z=ou;break;case"focusout":Re="blur",Z=ou;break;case"beforeblur":case"afterblur":Z=ou;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=tS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=yS;break;case Rp:case zp:case Lp:Z=rS;break;case Bp:Z=vS;break;case"scroll":case"scrollend":Z=Ww;break;case"wheel":Z=wS;break;case"copy":case"cut":case"paste":Z=sS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=mp;break;case"toggle":case"beforetoggle":Z=xS}var Ge=(t&4)!==0,At=!Ge&&(e==="scroll"||e==="scrollend"),_=Ge?q!==null?q+"Capture":null:q;Ge=[];for(var O=$,I;O!==null;){var ee=O;if(I=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||I===null||_===null||(ee=js(O,_),ee!=null&&Ge.push(lo(O,ee,I))),At)break;O=O.return}0<Ge.length&&(q=new Z(q,Re,null,i,J),re.push({event:q,listeners:Ge}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",q&&i!==eu&&(Re=i.relatedTarget||i.fromElement)&&(ra(Re)||Re[Ya]))break e;if((Z||q)&&(q=J.window===J?J:(q=J.ownerDocument)?q.defaultView||q.parentWindow:window,Z?(Re=i.relatedTarget||i.toElement,Z=$,Re=Re?ra(Re):null,Re!==null&&(At=c(Re),Ge=Re.tag,Re!==At||Ge!==5&&Ge!==27&&Ge!==6)&&(Re=null)):(Z=null,Re=$),Z!==Re)){if(Ge=hp,ee="onMouseLeave",_="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Ge=mp,ee="onPointerLeave",_="onPointerEnter",O="pointer"),At=Z==null?q:Pa(Z),I=Re==null?q:Pa(Re),q=new Ge(ee,O+"leave",Z,i,J),q.target=At,q.relatedTarget=I,ee=null,ra(J)===$&&(Ge=new Ge(_,O+"enter",Re,i,J),Ge.target=I,Ge.relatedTarget=At,ee=Ge),At=ee,Z&&Re)t:{for(Ge=Sx,_=Z,O=Re,I=0,ee=_;ee;ee=Ge(ee))I++;ee=0;for(var $e=O;$e;$e=Ge($e))ee++;for(;0<I-ee;)_=Ge(_),I--;for(;0<ee-I;)O=Ge(O),ee--;for(;I--;){if(_===O||O!==null&&_===O.alternate){Ge=_;break t}_=Ge(_),O=Ge(O)}Ge=null}else Ge=null;Z!==null&&sg(re,q,Z,Ge,!1),Re!==null&&At!==null&&sg(re,At,Re,Ge,!0)}}e:{if(q=$?Pa($):window,Z=q.nodeName&&q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&q.type==="file")var gt=kp;else if(Sp(q))if(Ep)gt=DS;else{gt=AS;var Le=jS}else Z=q.nodeName,!Z||Z.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?$&&Wc($.elementType)&&(gt=kp):gt=_S;if(gt&&(gt=gt(e,$))){xp(re,gt,i,J);break e}Le&&Le(e,q,$),e==="focusout"&&$&&q.type==="number"&&$.memoizedProps.value!=null&&Jc(q,"number",q.value)}switch(Le=$?Pa($):window,e){case"focusin":(Sp(Le)||Le.contentEditable==="true")&&(Ni=Le,hu=$,Bs=null);break;case"focusout":Bs=hu=Ni=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,Dp(re,i,J);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":Dp(re,i,J)}var tt;if(cu)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Ti?bp(e,i)&&(lt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(lt="onCompositionStart");lt&&(yp&&i.locale!=="ko"&&(Ti||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Ti&&(tt=dp()):(yr=J,ru="value"in yr?yr.value:yr.textContent,Ti=!0)),Le=$l($,lt),0<Le.length&&(lt=new pp(lt,e,null,i,J),re.push({event:lt,listeners:Le}),tt?lt.data=tt:(tt=wp(i),tt!==null&&(lt.data=tt)))),(tt=ES?CS(e,i):TS(e,i))&&(lt=$l($,"onBeforeInput"),0<lt.length&&(Le=new pp("onBeforeInput","beforeinput",null,i,J),re.push({event:Le,listeners:lt}),Le.data=tt)),gx(re,e,$,i,J)}rg(re,t)})}function lo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function $l(e,t){for(var i=t+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=js(e,i),u!=null&&o.unshift(lo(e,u,f)),u=js(e,t),u!=null&&o.push(lo(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Sx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sg(e,t,i,o,u){for(var f=t._reactName,g=[];i!==null&&i!==o;){var w=i,T=w.alternate,$=w.stateNode;if(w=w.tag,T!==null&&T===o)break;w!==5&&w!==26&&w!==27||$===null||(T=$,u?($=js(i,f),$!=null&&g.unshift(lo(i,$,T))):u||($=js(i,f),$!=null&&g.push(lo(i,$,T)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var xx=/\r\n?/g,kx=/\u0000|\uFFFD/g;function og(e){return(typeof e=="string"?e:""+e).replace(xx,`
`).replace(kx,"")}function lg(e,t){return t=og(t),og(e)===t}function jt(e,t,i,o,u,f){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||ki(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&ki(e,""+o);break;case"className":Nt(e,"class",o);break;case"tabIndex":Nt(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Nt(e,i,o);break;case"style":lp(e,o,f);break;case"data":if(t!=="object"){Nt(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Po(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(t!=="input"&&jt(e,t,"name",u.name,u,null),jt(e,t,"formEncType",u.formEncType,u,null),jt(e,t,"formMethod",u.formMethod,u,null),jt(e,t,"formTarget",u.formTarget,u,null)):(jt(e,t,"encType",u.encType,u,null),jt(e,t,"method",u.method,u,null),jt(e,t,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Po(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=Za);break;case"onScroll":o!=null&&st("scroll",e);break;case"onScrollEnd":o!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Po(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":st("beforetoggle",e),st("toggle",e),fn(e,"popover",o);break;case"xlinkActuate":Vt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Vt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Vt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Vt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Vt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Vt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":fn(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Qw.get(i)||i,fn(e,i,o))}}function Id(e,t,i,o,u,f){switch(i){case"style":lp(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?ki(e,o):(typeof o=="number"||typeof o=="bigint")&&ki(e,""+o);break;case"onScroll":o!=null&&st("scroll",e);break;case"onScrollEnd":o!=null&&st("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ee.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),t=i.slice(2,u?i.length-7:void 0),f=e[wn]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):fn(e,i,o)}}}function En(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var o=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var g=i[f];if(g!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:jt(e,t,f,g,i,null)}}u&&jt(e,t,"srcSet",i.srcSet,i,null),o&&jt(e,t,"src",i.src,i,null);return;case"input":st("invalid",e);var w=f=g=u=null,T=null,$=null;for(o in i)if(i.hasOwnProperty(o)){var J=i[o];if(J!=null)switch(o){case"name":u=J;break;case"type":g=J;break;case"checked":T=J;break;case"defaultChecked":$=J;break;case"value":f=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,t));break;default:jt(e,t,o,J,i,null)}}rp(e,f,w,T,$,g,u,!1);return;case"select":st("invalid",e),o=g=f=null;for(u in i)if(i.hasOwnProperty(u)&&(w=i[u],w!=null))switch(u){case"value":f=w;break;case"defaultValue":g=w;break;case"multiple":o=w;default:jt(e,t,u,w,i,null)}t=f,i=g,e.multiple=!!o,t!=null?xi(e,!!o,t,!1):i!=null&&xi(e,!!o,i,!0);return;case"textarea":st("invalid",e),f=u=o=null;for(g in i)if(i.hasOwnProperty(g)&&(w=i[g],w!=null))switch(g){case"value":o=w;break;case"defaultValue":u=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:jt(e,t,g,w,i,null)}sp(e,o,u,f);return;case"option":for(T in i)if(i.hasOwnProperty(T)&&(o=i[T],o!=null))switch(T){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:jt(e,t,T,o,i,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(o=0;o<oo.length;o++)st(oo[o],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in i)if(i.hasOwnProperty($)&&(o=i[$],o!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:jt(e,t,$,o,i,null)}return;default:if(Wc(t)){for(J in i)i.hasOwnProperty(J)&&(o=i[J],o!==void 0&&Id(e,t,J,o,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(o=i[w],o!=null&&jt(e,t,w,o,i,null))}function Ex(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,g=null,w=null,T=null,$=null,J=null;for(Z in i){var re=i[Z];if(i.hasOwnProperty(Z)&&re!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":T=re;default:o.hasOwnProperty(Z)||jt(e,t,Z,null,o,re)}}for(var q in o){var Z=o[q];if(re=i[q],o.hasOwnProperty(q)&&(Z!=null||re!=null))switch(q){case"type":f=Z;break;case"name":u=Z;break;case"checked":$=Z;break;case"defaultChecked":J=Z;break;case"value":g=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,t));break;default:Z!==re&&jt(e,t,q,Z,o,re)}}Qc(e,g,w,T,$,J,f,u);return;case"select":Z=g=w=q=null;for(f in i)if(T=i[f],i.hasOwnProperty(f)&&T!=null)switch(f){case"value":break;case"multiple":Z=T;default:o.hasOwnProperty(f)||jt(e,t,f,null,o,T)}for(u in o)if(f=o[u],T=i[u],o.hasOwnProperty(u)&&(f!=null||T!=null))switch(u){case"value":q=f;break;case"defaultValue":w=f;break;case"multiple":g=f;default:f!==T&&jt(e,t,u,f,o,T)}t=w,i=g,o=Z,q!=null?xi(e,!!i,q,!1):!!o!=!!i&&(t!=null?xi(e,!!i,t,!0):xi(e,!!i,i?[]:"",!1));return;case"textarea":Z=q=null;for(w in i)if(u=i[w],i.hasOwnProperty(w)&&u!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:jt(e,t,w,null,o,u)}for(g in o)if(u=o[g],f=i[g],o.hasOwnProperty(g)&&(u!=null||f!=null))switch(g){case"value":q=u;break;case"defaultValue":Z=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&jt(e,t,g,u,o,f)}ip(e,q,Z);return;case"option":for(var Re in i)if(q=i[Re],i.hasOwnProperty(Re)&&q!=null&&!o.hasOwnProperty(Re))switch(Re){case"selected":e.selected=!1;break;default:jt(e,t,Re,null,o,q)}for(T in o)if(q=o[T],Z=i[T],o.hasOwnProperty(T)&&q!==Z&&(q!=null||Z!=null))switch(T){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:jt(e,t,T,q,o,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in i)q=i[Ge],i.hasOwnProperty(Ge)&&q!=null&&!o.hasOwnProperty(Ge)&&jt(e,t,Ge,null,o,q);for($ in o)if(q=o[$],Z=i[$],o.hasOwnProperty($)&&q!==Z&&(q!=null||Z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,t));break;default:jt(e,t,$,q,o,Z)}return;default:if(Wc(t)){for(var At in i)q=i[At],i.hasOwnProperty(At)&&q!==void 0&&!o.hasOwnProperty(At)&&Id(e,t,At,void 0,o,q);for(J in o)q=o[J],Z=i[J],!o.hasOwnProperty(J)||q===Z||q===void 0&&Z===void 0||Id(e,t,J,q,o,Z);return}}for(var _ in i)q=i[_],i.hasOwnProperty(_)&&q!=null&&!o.hasOwnProperty(_)&&jt(e,t,_,null,o,q);for(re in o)q=o[re],Z=i[re],!o.hasOwnProperty(re)||q===Z||q==null&&Z==null||jt(e,t,re,q,o,Z)}function cg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],f=u.transferSize,g=u.initiatorType,w=u.duration;if(f&&w&&cg(g)){for(g=0,w=u.responseEnd,o+=1;o<i.length;o++){var T=i[o],$=T.startTime;if($>w)break;var J=T.transferSize,re=T.initiatorType;J&&cg(re)&&(T=T.responseEnd,g+=J*(T<w?1:(w-$)/(T-$)))}if(--o,t+=8*(f+g)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $d=null,Hd=null;function Hl(e){return e.nodeType===9?e:e.ownerDocument}function ug(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qd=null;function Tx(){var e=window.event;return e&&e.type==="popstate"?e===qd?!1:(qd=e,!0):(qd=null,!1)}var fg=typeof setTimeout=="function"?setTimeout:void 0,Nx=typeof clearTimeout=="function"?clearTimeout:void 0,hg=typeof Promise=="function"?Promise:void 0,Ox=typeof queueMicrotask=="function"?queueMicrotask:typeof hg<"u"?function(e){return hg.resolve(null).then(e).catch(jx)}:fg;function jx(e){setTimeout(function(){throw e})}function Mr(e){return e==="head"}function pg(e,t){var i=t,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),es(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")co(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,co(i);for(var f=i.firstChild;f;){var g=f.nextSibling,w=f.nodeName;f[Sa]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=g}}else i==="body"&&co(e.ownerDocument.body);i=u}while(i);es(t)}function mg(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Gd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Gd(i),xa(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Ax(e,t,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Sa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=fa(e.nextSibling),e===null)break}return null}function _x(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=fa(e.nextSibling),e===null))return null;return e}function yg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=fa(e.nextSibling),e===null))return null;return e}function Yd(e){return e.data==="$?"||e.data==="$~"}function Pd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Dx(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function fa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Fd=null;function gg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return fa(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function vg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function bg(e,t,i){switch(t=Hl(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function co(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);xa(e)}var ha=new Map,wg=new Set;function Vl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ur=W.d;W.d={f:Mx,r:Rx,D:zx,C:Lx,L:Bx,m:Ux,X:$x,S:Ix,M:Hx};function Mx(){var e=ur.f(),t=Ml();return e||t}function Rx(e){var t=mr(e);t!==null&&t.tag===5&&t.type==="form"?Bm(t):ur.r(e)}var Qi=typeof document>"u"?null:document;function Sg(e,t,i){var o=Qi;if(o&&typeof t=="string"&&t){var u=ia(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),wg.has(u)||(wg.add(u),e={rel:e,crossOrigin:i,href:t},o.querySelector(u)===null&&(t=o.createElement("link"),En(t,"link",e),te(t),o.head.appendChild(t)))}}function zx(e){ur.D(e),Sg("dns-prefetch",e,null)}function Lx(e,t){ur.C(e,t),Sg("preconnect",e,t)}function Bx(e,t,i){ur.L(e,t,i);var o=Qi;if(o&&e&&t){var u='link[rel="preload"][as="'+ia(t)+'"]';t==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+ia(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+ia(i.imageSizes)+'"]')):u+='[href="'+ia(e)+'"]';var f=u;switch(t){case"style":f=Ji(e);break;case"script":f=Wi(e)}ha.has(f)||(e=b({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),ha.set(f,e),o.querySelector(u)!==null||t==="style"&&o.querySelector(uo(f))||t==="script"&&o.querySelector(fo(f))||(t=o.createElement("link"),En(t,"link",e),te(t),o.head.appendChild(t)))}}function Ux(e,t){ur.m(e,t);var i=Qi;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+ia(o)+'"][href="'+ia(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Wi(e)}if(!ha.has(f)&&(e=b({rel:"modulepreload",href:e},t),ha.set(f,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(fo(f)))return}o=i.createElement("link"),En(o,"link",e),te(o),i.head.appendChild(o)}}}function Ix(e,t,i){ur.S(e,t,i);var o=Qi;if(o&&e){var u=P(o).hoistableStyles,f=Ji(e);t=t||"default";var g=u.get(f);if(!g){var w={loading:0,preload:null};if(g=o.querySelector(uo(f)))w.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},i),(i=ha.get(f))&&Zd(e,i);var T=g=o.createElement("link");te(T),En(T,"link",e),T._p=new Promise(function($,J){T.onload=$,T.onerror=J}),T.addEventListener("load",function(){w.loading|=1}),T.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ql(g,t,o)}g={type:"stylesheet",instance:g,count:1,state:w},u.set(f,g)}}}function $x(e,t){ur.X(e,t);var i=Qi;if(i&&e){var o=P(i).hoistableScripts,u=Wi(e),f=o.get(u);f||(f=i.querySelector(fo(u)),f||(e=b({src:e,async:!0},t),(t=ha.get(u))&&Xd(e,t),f=i.createElement("script"),te(f),En(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Hx(e,t){ur.M(e,t);var i=Qi;if(i&&e){var o=P(i).hoistableScripts,u=Wi(e),f=o.get(u);f||(f=i.querySelector(fo(u)),f||(e=b({src:e,async:!0,type:"module"},t),(t=ha.get(u))&&Xd(e,t),f=i.createElement("script"),te(f),En(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function xg(e,t,i,o){var u=(u=ve.current)?Vl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Ji(i.href),i=P(u).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ji(i.href);var f=P(u).hoistableStyles,g=f.get(e);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,g),(f=u.querySelector(uo(e)))&&!f._p&&(g.instance=f,g.state.loading=5),ha.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ha.set(e,i),f||Vx(u,e,i,g.state))),t&&o===null)throw Error(s(528,""));return g}if(t&&o!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Wi(i),i=P(u).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ji(e){return'href="'+ia(e)+'"'}function uo(e){return'link[rel="stylesheet"]['+e+"]"}function kg(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Vx(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),En(t,"link",i),te(t),e.head.appendChild(t))}function Wi(e){return'[src="'+ia(e)+'"]'}function fo(e){return"script[async]"+e}function Eg(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+ia(i.href)+'"]');if(o)return t.instance=o,te(o),o;var u=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),te(o),En(o,"style",u),ql(o,i.precedence,e),t.instance=o;case"stylesheet":u=Ji(i.href);var f=e.querySelector(uo(u));if(f)return t.state.loading|=4,t.instance=f,te(f),f;o=kg(i),(u=ha.get(u))&&Zd(o,u),f=(e.ownerDocument||e).createElement("link"),te(f);var g=f;return g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),En(f,"link",o),t.state.loading|=4,ql(f,i.precedence,e),t.instance=f;case"script":return f=Wi(i.src),(u=e.querySelector(fo(f)))?(t.instance=u,te(u),u):(o=i,(u=ha.get(f))&&(o=b({},i),Xd(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),te(u),En(u,"link",o),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,ql(o,i.precedence,e));return t.instance}function ql(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,g=0;g<o.length;g++){var w=o[g];if(w.dataset.precedence===t)f=w;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Zd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Xd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Gl=null;function Cg(e,t,i){if(Gl===null){var o=new Map,u=Gl=new Map;u.set(i,o)}else u=Gl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[Sa]||f[nn]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(t)||"";g=e+g;var w=o.get(g);w?w.push(f):o.set(g,[f])}}return o}function Tg(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function qx(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ng(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Gx(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=Ji(o.href),f=t.querySelector(uo(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Yl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=f,te(f);return}f=t.ownerDocument||t,o=kg(o),(u=ha.get(u))&&Zd(o,u),f=f.createElement("link"),te(f);var g=f;g._p=new Promise(function(w,T){g.onload=w,g.onerror=T}),En(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Yl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Kd=0;function Yx(e,t){return e.stylesheets&&e.count===0&&Fl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Fl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Kd===0&&(Kd=62500*Cx());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Kd?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Yl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pl=null;function Fl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pl=new Map,t.forEach(Px,e),Pl=null,Yl.call(e))}function Px(e,t){if(!(t.state.loading&4)){var i=Pl.get(e);if(i)var o=i.get(null);else{i=new Map,Pl.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var g=u[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),o=g)}o&&i.set(null,o)}u=t.instance,g=u.getAttribute("data-precedence"),f=i.get(g)||o,f===o&&i.set(null,u),i.set(g,u),this.count++,o=Yl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var ho={$$typeof:R,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Fx(e,t,i,o,u,f,g,w,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Og(e,t,i,o,u,f,g,w,T,$,J,re){return e=new Fx(e,t,i,g,T,$,J,re,w),t=1,f===!0&&(t|=24),f=Xn(3,null,null,t),e.current=f,f.stateNode=e,t=ju(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:t},Mu(f),e}function jg(e){return e?(e=Ai,e):Ai}function Ag(e,t,i,o,u,f){u=jg(u),o.context===null?o.context=u:o.pendingContext=u,o=xr(t),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=kr(e,o,t),i!==null&&(Vn(i,e,t),Gs(i,e,t))}function _g(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Qd(e,t){_g(e,t),(e=e.alternate)&&_g(e,t)}function Dg(e){if(e.tag===13||e.tag===31){var t=ei(e,67108864);t!==null&&Vn(t,e,67108864),Qd(e,67108864)}}function Mg(e){if(e.tag===13||e.tag===31){var t=ea();t=ba(t);var i=ei(e,t);i!==null&&Vn(i,e,t),Qd(e,t)}}var Zl=!0;function Zx(e,t,i,o){var u=U.T;U.T=null;var f=W.p;try{W.p=2,Jd(e,t,i,o)}finally{W.p=f,U.T=u}}function Xx(e,t,i,o){var u=U.T;U.T=null;var f=W.p;try{W.p=8,Jd(e,t,i,o)}finally{W.p=f,U.T=u}}function Jd(e,t,i,o){if(Zl){var u=Wd(o);if(u===null)Ud(e,t,o,Xl,i),zg(e,o);else if(Qx(u,e,t,i,o))o.stopPropagation();else if(zg(e,o),t&4&&-1<Kx.indexOf(e)){for(;u!==null;){var f=mr(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=we(f.pendingLanes);if(g!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;g;){var T=1<<31-rt(g);w.entanglements[1]|=T,g&=~T}Ba(f),(bt&6)===0&&(_l=C()+500,so(0))}}break;case 31:case 13:w=ei(f,2),w!==null&&Vn(w,f,2),Ml(),Qd(f,2)}if(f=Wd(o),f===null&&Ud(e,t,o,Xl,i),f===u)break;u=f}u!==null&&o.stopPropagation()}else Ud(e,t,o,null,i)}}function Wd(e){return e=tu(e),ef(e)}var Xl=null;function ef(e){if(Xl=null,e=ra(e),e!==null){var t=c(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xl=e,null}function Rg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(D()){case oe:return 2;case fe:return 8;case be:case Oe:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var tf=!1,Rr=null,zr=null,Lr=null,po=new Map,mo=new Map,Br=[],Kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zg(e,t){switch(e){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(t.pointerId)}}function yo(e,t,i,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},t!==null&&(t=mr(t),t!==null&&Dg(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Qx(e,t,i,o,u){switch(t){case"focusin":return Rr=yo(Rr,e,t,i,o,u),!0;case"dragenter":return zr=yo(zr,e,t,i,o,u),!0;case"mouseover":return Lr=yo(Lr,e,t,i,o,u),!0;case"pointerover":var f=u.pointerId;return po.set(f,yo(po.get(f)||null,e,t,i,o,u)),!0;case"gotpointercapture":return f=u.pointerId,mo.set(f,yo(mo.get(f)||null,e,t,i,o,u)),!0}return!1}function Lg(e){var t=ra(e.target);if(t!==null){var i=c(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,Os(e.priority,function(){Mg(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Wd(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);eu=o,i.target.dispatchEvent(o),eu=null}else return t=mr(i),t!==null&&Dg(t),e.blockedOn=i,!1;t.shift()}return!0}function Bg(e,t,i){Kl(e)&&i.delete(t)}function Jx(){tf=!1,Rr!==null&&Kl(Rr)&&(Rr=null),zr!==null&&Kl(zr)&&(zr=null),Lr!==null&&Kl(Lr)&&(Lr=null),po.forEach(Bg),mo.forEach(Bg)}function Ql(e,t){e.blockedOn===t&&(e.blockedOn=null,tf||(tf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Jx)))}var Jl=null;function Ug(e){Jl!==e&&(Jl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jl===e&&(Jl=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],u=e[t+2];if(typeof o!="function"){if(ef(o||i)===null)continue;break}var f=mr(i);f!==null&&(e.splice(t,3),t-=3,Wu(f,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function es(e){function t(T){return Ql(T,e)}Rr!==null&&Ql(Rr,e),zr!==null&&Ql(zr,e),Lr!==null&&Ql(Lr,e),po.forEach(t),mo.forEach(t);for(var i=0;i<Br.length;i++){var o=Br[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Br.length&&(i=Br[0],i.blockedOn===null);)Lg(i),i.blockedOn===null&&Br.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],g=u[wn]||null;if(typeof f=="function")g||Ug(i);else if(g){var w=null;if(f&&f.hasAttribute("formAction")){if(u=f,g=f[wn]||null)w=g.formAction;else if(ef(u)!==null)continue}else w=g.action;typeof w=="function"?i[o+1]=w:(i.splice(o,3),o-=3),Ug(i)}}}function Ig(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(g){return u=g})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function nf(e){this._internalRoot=e}Wl.prototype.render=nf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,o=ea();Ag(i,o,e,t,null,null)},Wl.prototype.unmount=nf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ag(e.current,2,null,e,null,null),Ml(),t[Ya]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ns();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Br.length&&t!==0&&t<Br[i].priority;i++);Br.splice(i,0,e),i===0&&Lg(e)}};var $g=n.version;if($g!=="19.2.0")throw Error(s(527,$g,"19.2.0"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Wx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{Ue=ec.inject(Wx),qe=ec}catch{}}return vo.createRoot=function(e,t){if(!l(e))throw Error(s(299));var i=!1,o="",u=Fm,f=Zm,g=Xm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Og(e,1,!1,null,null,i,o,null,u,f,g,Ig),e[Ya]=t.current,Bd(e),new nf(t)},vo.hydrateRoot=function(e,t,i){if(!l(e))throw Error(s(299));var o=!1,u="",f=Fm,g=Zm,w=Xm,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(T=i.formState)),t=Og(e,1,!0,t,i??null,o,u,T,f,g,w,Ig),t.context=jg(null),i=t.current,o=ea(),o=ba(o),u=xr(o),u.callback=null,kr(i,u,o),i=o,t.current.lanes=i,Tt(t,i),Ba(t),e[Ya]=t.current,Bd(e),new Wl(t)},vo.version="19.2.0",vo}var Kg;function ck(){if(Kg)return sf.exports;Kg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),sf.exports=lk(),sf.exports}var cb=ck();const uk="modulepreload",dk=function(a,n){return new URL(a,n).href},Qg={},Jg=function(n,r,s){let l=Promise.resolve();if(r&&r.length>0){let y=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const d=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),m=h?.nonce||h?.getAttribute("nonce");l=y(r.map(v=>{if(v=dk(v,s),v in Qg)return;Qg[v]=!0;const b=v.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(s)for(let N=d.length-1;N>=0;N--){const F=d[N];if(F.href===v&&(!b||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${x}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":uk,b||(E.as="script"),E.crossOrigin="",E.href=v,m&&E.setAttribute("nonce",m),document.head.appendChild(E),b)return new Promise((N,F)=>{E.addEventListener("load",N),E.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return l.then(d=>{for(const h of d||[])h.status==="rejected"&&c(h.reason);return n().catch(c)})};var Yr=lb();const Th=Eh(Yr),Wg=ob({__proto__:null,default:Th},[Yr]);function ev(a,n,r,s,l,c,d){try{var h=a[c](d),m=h.value}catch(y){return void r(y)}h.done?n(m):Promise.resolve(m).then(s,l)}function at(a){return function(){var n=this,r=arguments;return new Promise(function(s,l){var c=a.apply(n,r);function d(m){ev(c,s,l,d,h,"next",m)}function h(m){ev(c,s,l,d,h,"throw",m)}d(void 0)})}}function ct(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function Cn(a){"@babel/helpers - typeof";return Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cn(a)}function fk(a,n){if(Cn(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,n);if(Cn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function ub(a){var n=fk(a,"string");return Cn(n)=="symbol"?n:n+""}function hk(a,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,ub(s.key),s)}}function ut(a,n,r){return n&&hk(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function pk(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ga(a,n){if(n&&(Cn(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pk(a)}function Mt(a){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mt(a)}function Do(a,n){return Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Do(a,n)}function Pn(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&Do(a,n)}function Be(a,n,r){return(n=ub(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}var uf={exports:{}},df={exports:{}},tv;function db(){return tv||(tv=1,(function(a){function n(r,s){this.v=r,this.k=s}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(df)),df.exports}var ff={exports:{}},hf={exports:{}},nv;function fb(){return nv||(nv=1,(function(a){function n(r,s,l,c){var d=Object.defineProperty;try{d({},"",{})}catch{d=0}a.exports=n=function(m,y,v,b){function x(E,N){n(m,E,function(F){return this._invoke(E,N,F)})}y?d?d(m,y,{value:v,enumerable:!b,configurable:!b,writable:!b}):m[y]=v:(x("next",0),x("throw",1),x("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,n(r,s,l,c)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(hf)),hf.exports}var av;function hb(){return av||(av=1,(function(a){var n=fb();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",h=c.toStringTag||"@@toStringTag";function m(H,K,X,R){var Y=K&&K.prototype instanceof v?K:v,he=Object.create(Y.prototype);return n(he,"_invoke",(function(ge,G,de){var ne,pe,Ie,ze=0,ae=de||[],ke=!1,He={p:0,n:0,v:s,a:U,f:U.bind(s,4),d:function(ce,je){return ne=ce,pe=0,Ie=s,He.n=je,y}};function U(W,ce){for(pe=W,Ie=ce,l=0;!ke&&ze&&!je&&l<ae.length;l++){var je,B=ae[l],S=He.p,L=B[2];W>3?(je=L===ce)&&(Ie=B[(pe=B[4])?5:(pe=3,3)],B[4]=B[5]=s):B[0]<=S&&((je=W<2&&S<B[1])?(pe=0,He.v=ce,He.n=B[1]):S<L&&(je=W<3||B[0]>ce||ce>L)&&(B[4]=W,B[5]=ce,He.n=L,pe=0))}if(je||W>1)return y;throw ke=!0,ce}return function(W,ce,je){if(ze>1)throw TypeError("Generator is already running");for(ke&&ce===1&&U(ce,je),pe=ce,Ie=je;(l=pe<2?s:Ie)||!ke;){ne||(pe?pe<3?(pe>1&&(He.n=-1),U(pe,Ie)):He.n=Ie:He.v=Ie);try{if(ze=2,ne){if(pe||(W="next"),l=ne[W]){if(!(l=l.call(ne,Ie)))throw TypeError("iterator result is not an object");if(!l.done)return l;Ie=l.value,pe<2&&(pe=0)}else pe===1&&(l=ne.return)&&l.call(ne),pe<2&&(Ie=TypeError("The iterator does not provide a '"+W+"' method"),pe=1);ne=s}else if((l=(ke=He.n<0)?Ie:ge.call(G,He))!==y)break}catch(B){ne=s,pe=1,Ie=B}finally{ze=1}}return{value:l,done:ke}}})(H,X,R),!0),he}var y={};function v(){}function b(){}function x(){}l=Object.getPrototypeOf;var E=[][d]?l(l([][d]())):(n(l={},d,function(){return this}),l),N=x.prototype=v.prototype=Object.create(E);function F(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,x):(H.__proto__=x,n(H,h,"GeneratorFunction")),H.prototype=Object.create(N),H}return b.prototype=x,n(N,"constructor",x),n(x,"constructor",b),b.displayName="GeneratorFunction",n(x,h,"GeneratorFunction"),n(N),n(N,h,"Generator"),n(N,d,function(){return this}),n(N,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:m,m:F}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(ff)),ff.exports}var pf={exports:{}},mf={exports:{}},yf={exports:{}},rv;function pb(){return rv||(rv=1,(function(a){var n=db(),r=fb();function s(l,c){function d(m,y,v,b){try{var x=l[m](y),E=x.value;return E instanceof n?c.resolve(E.v).then(function(N){d("next",N,v,b)},function(N){d("throw",N,v,b)}):c.resolve(E).then(function(N){x.value=N,v(x)},function(N){return d("throw",N,v,b)})}catch(N){b(N)}}var h;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(m,y,v){function b(){return new c(function(x,E){d(m,v,x,E)})}return h=h?h.then(b,b):b()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(yf)),yf.exports}var iv;function mb(){return iv||(iv=1,(function(a){var n=hb(),r=pb();function s(l,c,d,h,m){return new r(n().w(l,c,d,h),m||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(mf)),mf.exports}var sv;function mk(){return sv||(sv=1,(function(a){var n=mb();function r(s,l,c,d,h){var m=n(s,l,c,d,h);return m.next().then(function(y){return y.done?y.value:m.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(pf)),pf.exports}var gf={exports:{}},ov;function yk(){return ov||(ov=1,(function(a){function n(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function d(){for(;l.length;)if((c=l.pop())in s)return d.value=c,d.done=!1,d;return d.done=!0,d}}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(gf)),gf.exports}var vf={exports:{}},bf={exports:{}},lv;function gk(){return lv||(lv=1,(function(a){function n(r){"@babel/helpers - typeof";return a.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,n(r)}a.exports=n,a.exports.__esModule=!0,a.exports.default=a.exports})(bf)),bf.exports}var cv;function vk(){return cv||(cv=1,(function(a){var n=gk().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(n(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(vf)),vf.exports}var uv;function bk(){return uv||(uv=1,(function(a){var n=db(),r=hb(),s=mk(),l=mb(),c=pb(),d=yk(),h=vk();function m(){var y=r(),v=y.m(m),b=(Object.getPrototypeOf?Object.getPrototypeOf(v):v.__proto__).constructor;function x(F){var H=typeof F=="function"&&F.constructor;return!!H&&(H===b||(H.displayName||H.name)==="GeneratorFunction")}var E={throw:1,return:2,break:3,continue:3};function N(F){var H,K;return function(X){H||(H={stop:function(){return K(X.a,2)},catch:function(){return X.v},abrupt:function(Y,he){return K(X.a,E[Y],he)},delegateYield:function(Y,he,ge){return H.resultName=he,K(X.d,h(Y),ge)},finish:function(Y){return K(X.f,Y)}},K=function(Y,he,ge){X.p=H.prev,X.n=H.next;try{return Y(he,ge)}finally{H.next=X.n}}),H.resultName&&(H[H.resultName]=X.v,H.resultName=void 0),H.sent=X.v,H.next=X.n;try{return F.call(this,H)}finally{X.p=H.prev,X.n=H.next}}}return(a.exports=m=function(){return{wrap:function(K,X,R,Y){return y.w(N(K),X,R,Y&&Y.reverse())},isGeneratorFunction:x,mark:y.m,awrap:function(K,X){return new n(K,X)},AsyncIterator:c,async:function(K,X,R,Y,he){return(x(X)?l:s)(N(K),X,R,Y,he)},keys:d,values:h}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=m,a.exports.__esModule=!0,a.exports.default=a.exports})(uf)),uf.exports}var wf,dv;function wk(){if(dv)return wf;dv=1;var a=bk()();wf=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return wf}var Sk=wk();const Se=Eh(Sk);function xk(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=kk(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function kk(a,n){if(a){if(typeof a=="string")return fv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fv(a,n):void 0}}function fv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function Ek(){return{debug:function(n){}}}var yb=(function(){function a(){ct(this,a),Be(this,"pipes",[])}return ut(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var n=at(Se.mark(function s(l){var c,d,h,m;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:c=l,d=xk(this.pipes),v.prev=2,d.s();case 4:if((h=d.n()).done){v.next=13;break}return m=h.value,v.next=8,m(c);case 8:if(c=v.sent,!(typeof c>"u")){v.next=11;break}return v.abrupt("return");case 11:v.next=4;break;case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(2),d.e(v.t0);case 18:return v.prev=18,d.f(),v.finish(18);case 21:return v.abrupt("return",c);case 22:case"end":return v.stop()}},s,this,[[2,15,18,21]])}));function r(s){return n.apply(this,arguments)}return r})()}])})(),gs=(function(){function a(n){ct(this,a),Be(this,"signal",new yb),this.name=n}return ut(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),Ek()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function hv(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Ck(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function Ck(a,n){if(a){if(typeof a=="string")return pv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pv(a,n):void 0}}function pv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function Tk(a,n,r){return n=Mt(n),Ga(a,gb()?Reflect.construct(n,r||[],Mt(a).constructor):n.apply(a,r))}function gb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gb=function(){return!!a})()}var Xr=(function(a){function n(){var r;return ct(this,n),r=Tk(this,n,["NodeEditor"]),Be(r,"nodes",[]),Be(r,"connections",[]),r}return Pn(n,a),ut(n,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=at(Se.mark(function l(c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getNode(c.id)){h.next=2;break}throw new Error("node has already been added");case 2:return h.next=4,this.emit({type:"nodecreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.nodes.push(c),h.next=9,this.emit({type:"nodecreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=at(Se.mark(function l(c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.getConnection(c.id)){h.next=2;break}throw new Error("connection has already been added");case 2:return h.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(h.sent){h.next=6;break}return h.abrupt("return",!1);case 6:return this.connections.push(c),h.next=9,this.emit({type:"connectioncreated",data:c});case 9:return h.abrupt("return",!0);case 10:case"end":return h.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=at(Se.mark(function l(c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=this.nodes.find(function(v){return v.id===c}),d){y.next=3;break}throw new Error("cannot find node");case 3:return y.next=5,this.emit({type:"noderemove",data:d});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.nodes.indexOf(d),this.nodes.splice(h,1),y.next=11,this.emit({type:"noderemoved",data:d});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=at(Se.mark(function l(c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=this.connections.find(function(v){return v.id===c}),d){y.next=3;break}throw new Error("cannot find connection");case 3:return y.next=5,this.emit({type:"connectionremove",data:d});case 5:if(y.sent){y.next=7;break}return y.abrupt("return",!1);case 7:return h=this.connections.indexOf(d),this.connections.splice(h,1),y.next=11,this.emit({type:"connectionremoved",data:d});case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=at(Se.mark(function l(){var c,d,h,m,y,v;return Se.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.emit({type:"clear"});case 2:if(x.sent){x.next=6;break}return x.next=5,this.emit({type:"clearcancelled"});case 5:return x.abrupt("return",!1);case 6:c=hv(this.connections.slice()),x.prev=7,c.s();case 9:if((d=c.n()).done){x.next=15;break}return h=d.value,x.next=13,this.removeConnection(h.id);case 13:x.next=9;break;case 15:x.next=20;break;case 17:x.prev=17,x.t0=x.catch(7),c.e(x.t0);case 20:return x.prev=20,c.f(),x.finish(20);case 23:m=hv(this.nodes.slice()),x.prev=24,m.s();case 26:if((y=m.n()).done){x.next=32;break}return v=y.value,x.next=30,this.removeNode(v.id);case 30:x.next=26;break;case 32:x.next=37;break;case 34:x.prev=34,x.t1=x.catch(24),m.e(x.t1);case 37:return x.prev=37,m.f(),x.finish(37);case 40:return x.next=42,this.emit({type:"cleared"});case 42:return x.abrupt("return",!0);case 43:case"end":return x.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(gs),Sf=globalThis.crypto;function Kr(){if("randomBytes"in Sf)return Sf.randomBytes(8).toString("hex");var a=Sf.getRandomValues(new Uint8Array(8)),n=Array.from(a),r=n.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Nh(a,n,r){return n=Mt(n),Ga(a,vb()?Reflect.construct(n,r||[],Mt(a).constructor):n.apply(a,r))}function vb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vb=function(){return!!a})()}var Nk=ut(function a(n){ct(this,a),this.name=n}),Oh=ut(function a(n,r,s){ct(this,a),this.socket=n,this.label=r,this.multipleConnections=s,this.id=Kr()}),Ok=(function(a){function n(r,s,l){var c;return ct(this,n),c=Nh(this,n,[r,s,l]),Be(c,"control",null),Be(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return Pn(n,a),ut(n,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(Oh),jk=(function(a){function n(r,s,l){return ct(this,n),Nh(this,n,[r,s,l!==!1])}return Pn(n,a),ut(n)})(Oh),bb=ut(function a(){ct(this,a),this.id=Kr()}),Ak=(function(a){function n(r,s){var l,c;return ct(this,n),c=Nh(this,n),c.type=r,c.options=s,c.id=Kr(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return Pn(n,a),ut(n,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(bb),_k=(function(){function a(n){ct(this,a),Be(this,"inputs",{}),Be(this,"outputs",{}),Be(this,"controls",{}),this.label=n,this.id=Kr()}return ut(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),Dk=ut(function a(n,r,s,l){if(ct(this,a),this.sourceOutput=r,this.targetInput=l,!n.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=Kr(),this.source=n.id,this.target=s.id}),Pt=Object.freeze({__proto__:null,Socket:Nk,Port:Oh,Input:Ok,Output:jk,Control:bb,InputControl:Ak,Node:_k,Connection:Dk});const Mk=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Pt,NodeEditor:Xr,Scope:gs,Signal:yb,getUID:Kr},Symbol.toStringTag,{value:"Module"}));function qf(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function Rk(a){if(Array.isArray(a))return qf(a)}function zk(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function wb(a,n){if(a){if(typeof a=="string")return qf(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qf(a,n):void 0}}function Lk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vs(a){return Rk(a)||zk(a)||wb(a)||Lk()}var Bk=(function(){function a(n){ct(this,a),this.reordered=n,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ut(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,d=r.clientX-l,h=r.clientY-c;return{x:d,y:h}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var n=at(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.holder.contains(l)){h.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){h.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),h.next=7,this.reordered(l);case 7:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function Sb(a,n){var r=function(d){n.move(d)},s=function(d){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),n.up(d)},l=function(d){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),n.down(d)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var mv=function(n){return n.length===0?0:Math.min.apply(Math,vs(n))},yv=function(n){return n.length===0?0:Math.max.apply(Math,vs(n))};function xb(a){var n=mv(a.map(function(c){return c.position.x})),r=mv(a.map(function(c){return c.position.y})),s=yv(a.map(function(c){return c.position.x+c.width})),l=yv(a.map(function(c){return c.position.y+c.height}));return{left:n,right:s,top:r,bottom:l,width:Math.abs(n-s),height:Math.abs(r-l),center:{x:(n+s)/2,y:(r+l)/2}}}function gv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Uk(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?gv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):gv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var jh=(function(){function a(n){var r=this;ct(this,a),Be(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=Uk({},r.config.getCurrentPosition()),r.events.start(s))}),Be(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),d=r.startPosition.x+l.x/c,h=r.startPosition.y+l.y/c;r.events.translate(d,h,s)}}),Be(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=n||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return ut(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=Sb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),kb=(function(){function a(n){var r=this;ct(this,a),Be(this,"previous",null),Be(this,"pointers",[]),Be(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=s.deltaY<0,m=h?r.intensity:-r.intensity,y=(c-s.clientX)*m,v=(d-s.clientY)*m;r.onzoom(m,y,v,"wheel")}),Be(this,"down",function(s){r.pointers.push(s)}),Be(this,"move",function(s){if(r.pointers=r.pointers.map(function(N){return N.pointerId===s.pointerId?s:N}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=r.getTouches(),m=h.cx,y=h.cy,v=h.distance;if(r.previous!==null&&r.previous.distance>0){var b=v/r.previous.distance-1,x=(c-m)*b,E=(d-y)*b;r.onzoom(b,x-(r.previous.cx-m),E-(r.previous.cy-y),"touch")}r.previous={cx:m,cy:y,distance:v}}}),Be(this,"contextmenu",function(){r.pointers=[]}),Be(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),Be(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,h=4*r.intensity,m=(c-s.clientX)*h,y=(d-s.clientY)*h;r.onzoom(h,m,y,"dblclick")}),this.intensity=n}return ut(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],d=[r.touches[1].clientX,r.touches[1].clientY],h=d[0],m=d[1],y=Math.sqrt(Math.pow(l-h,2)+Math.pow(c-m,2));return{cx:(l+h)/2,cy:(c+m)/2,distance:y}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),Eb=(function(){function a(n,r,s){var l=this;ct(this,a),Be(this,"transform",{k:1,x:0,y:0}),Be(this,"pointer",{x:0,y:0}),Be(this,"zoomHandler",null),Be(this,"dragHandler",null),Be(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),Be(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),Be(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),Be(this,"resize",function(c){l.events.resize(c)}),Be(this,"onTranslate",function(c,d){var h;(h=l.zoomHandler)!==null&&h!==void 0&&h.isTranslating()||l.translate(c,d)}),Be(this,"onZoom",function(c,d,h,m){l.zoom(l.transform.k*(1+c),d,h,m),l.update()}),this.container=n,this.events=r,this.guards=s,this.content=new Bk(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new kb(.1)),this.setDragHandler(new jh),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),n.appendChild(this.content.holder),this.update()}return ut(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,d=this.transform.k;this.pointer={x:l/d,y:c/d}}},{key:"translate",value:(function(){var n=at(Se.mark(function s(l,c){var d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return d={x:l,y:c},y.next=3,this.guards.translate({previous:this.transform,position:d});case 3:if(h=y.sent,h){y.next=6;break}return y.abrupt("return",!1);case 6:return this.transform.x=h.data.position.x,this.transform.y=h.data.position.y,this.update(),y.next=11,this.events.translated(h.data);case 11:return y.abrupt("return",!0);case 12:case"end":return y.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var n=at(Se.mark(function s(l){var c,d,h,m,y,v,b=arguments;return Se.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return c=b.length>1&&b[1]!==void 0?b[1]:0,d=b.length>2&&b[2]!==void 0?b[2]:0,h=b.length>3?b[3]:void 0,m=this.transform.k,E.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:h});case 6:if(y=E.sent,y){E.next=9;break}return E.abrupt("return",!0);case 9:return v=(m-y.data.zoom)/(m-l||1),this.transform.k=y.data.zoom||1,this.transform.x+=c*v,this.transform.y+=d*v,this.update(),E.next=16,this.events.zoomed(y.data);case 16:return E.abrupt("return",!1);case 17:case"end":return E.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function Ik(a,n,r){return n=Mt(n),Ga(a,Cb()?Reflect.construct(n,r||[],Mt(a).constructor):n.apply(a,r))}function Cb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cb=function(){return!!a})()}var Lo=(function(a){function n(){return ct(this,n),Ik(this,n,arguments)}return Pn(n,a),ut(n)})(gs),$k=ut(function a(n){ct(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return n.contextmenu(r)})}),Hk=(function(){function a(){ct(this,a),Be(this,"views",new WeakMap),Be(this,"viewsElements",new Map)}return ut(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function vv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function bv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?vv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Tb=(function(){function a(n,r,s){var l=this;ct(this,a),Be(this,"translate",(function(){var c=at(Se.mark(function d(h,m){var y,v;return Se.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return y=bv({},l.position),x.next=3,l.guards.translate({previous:y,position:{x:h,y:m}});case 3:if(v=x.sent,v){x.next=6;break}return x.abrupt("return",!1);case 6:return l.position=bv({},v.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),x.next=10,l.events.translated({position:l.position,previous:y});case 10:return x.abrupt("return",!0);case 11:case"end":return x.stop()}},d)}));return function(d,h){return c.apply(this,arguments)}})()),Be(this,"resize",(function(){var c=at(Se.mark(function d(h,m){var y,v;return Se.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return y={width:h,height:m},x.next=3,l.guards.resize({size:y});case 3:if(x.sent){x.next=5;break}return x.abrupt("return",!1);case 5:if(v=l.element.querySelector("*:not(span):not([fragment])"),!(!v||!(v instanceof HTMLElement))){x.next=8;break}return x.abrupt("return",!1);case 8:return v.style.width="".concat(h,"px"),v.style.height="".concat(m,"px"),x.next=12,l.events.resized({size:y});case 12:return x.abrupt("return",!0);case 13:case"end":return x.stop()}},d)}));return function(d,h){return c.apply(this,arguments)}})()),this.getZoom=n,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new jh,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ut(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function Nb(a,n){return a.map(function(r){return{view:n.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,d=l.height;return typeof c<"u"&&typeof d<"u"?{position:s.position,width:c,height:d}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function Vk(a,n){var r=a.parentScope(Xr),s=n.map(function(c){return Cn(c)==="object"?c:r.getNode(c)}),l=Nb(s,a.nodeViews);return xb(l)}function qk(a){var n=a;n.addPipe(function(r){if(!r||Cn(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=n.nodeViews.get(r.data.id),l=n.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=n.connectionViews.get(r.data.id),d=n.area.content;c&&d.reorder(c.element,d.holder.firstChild)}return r})}function wv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function dr(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?wv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Gk(a,n){var r=n!=null&&n.scaling?n.scaling===!0?{min:.1,max:1}:n.scaling:!1,s=n!=null&&n.translation?n.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:n.translation:!1;function l(d){if(!r)throw new Error("scaling param isnt defined");var h=typeof r=="function"?r():r,m=h.min,y=h.max;return d<m?m:d>y?y:d}function c(d){if(!s)throw new Error("translation param isnt defined");var h=dr({},d),m=typeof s=="function"?s():s,y=m.left,v=m.top,b=m.right,x=m.bottom;return h.x<y&&(h.x=y),h.x>b&&(h.x=b),h.y<v&&(h.y=v),h.y>x&&(h.y=x),h}a.addPipe(function(d){if(!d||Cn(d)!=="object"||!("type"in d))return d;if(r&&d.type==="zoom")return dr(dr({},d),{},{data:dr(dr({},d.data),{},{zoom:l(d.data.zoom)})});if(s&&d.type==="zoomed"){var h=c(a.area.transform);a.area.translate(h.x,h.y)}return s&&d.type==="translate"?dr(dr({},d),{},{data:dr(dr({},d.data),{},{position:c(d.data.position)})}):d})}function Yk(){var a=!1;function n(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",n),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}}var Ob=(function(){function a(){ct(this,a),Be(this,"entities",new Map),Be(this,"pickId",null)}return ut(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var n=at(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c){h.next=3;break}return h.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var n=at(Se.mark(function s(l){var c,d;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c="".concat(l.label,"_").concat(l.id),d=this.entities.get(c),!d){m.next=6;break}return this.entities.delete(c),m.next=6,d.unselect();case 6:case"end":return m.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var n=at(Se.mark(function s(){var l=this;return Se.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(vs(Array.from(this.entities.values())).map(function(h){return l.remove(h)}));case 2:case"end":return d.stop()}},s,this)}));function r(){return n.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var n=at(Se.mark(function s(l,c){var d=this;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all(Array.from(this.entities.values()).map(function(y){return!d.isPicked(y)&&y.translate(l,c)}));case 2:case"end":return m.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function Pk(){return new Ob}function Fk(a,n,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(Xr))},d=0;function h(E){E.selected||(E.selected=!0,l.update("node",E.id))}function m(E){E.selected&&(E.selected=!1,l.update("node",E.id))}function y(E,N){return v.apply(this,arguments)}function v(){return v=at(Se.mark(function E(N,F){var H;return Se.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(H=c().getNode(N),H){X.next=3;break}return X.abrupt("return");case 3:return X.next=5,n.add({label:"node",id:H.id,translate:function(Y,he){return at(Se.mark(function ge(){var G,de;return Se.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(G=l.nodeViews.get(H.id),de=G?.position,!de){pe.next=5;break}return pe.next=5,G.translate(de.x+Y,de.y+he);case 5:case"end":return pe.stop()}},ge)}))()},unselect:function(){m(H)}},F);case 5:h(H);case 6:case"end":return X.stop()}},E)})),v.apply(this,arguments)}function b(E){return x.apply(this,arguments)}function x(){return x=at(Se.mark(function E(N){return Se.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,n.remove({id:N,label:"node"});case 2:case"end":return H.stop()}},E)})),x.apply(this,arguments)}return l.addPipe((function(){var E=at(Se.mark(function N(F){var H,K,X,R,Y,he,ge,G;return Se.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!(!F||Cn(F)!=="object"||!("type"in F))){ne.next=2;break}return ne.abrupt("return",F);case 2:if(F.type!=="nodepicked"){ne.next=11;break}return H=F.data.id,K=r.accumulating.active(),n.pick({id:H,label:"node"}),d=null,ne.next=9,y(H,K);case 9:ne.next=33;break;case 11:if(F.type!=="nodetranslated"){ne.next=20;break}if(X=F.data,R=X.id,Y=X.position,he=X.previous,ge=Y.x-he.x,G=Y.y-he.y,!n.isPicked({id:R,label:"node"})){ne.next=18;break}return ne.next=18,n.translate(ge,G);case 18:ne.next=33;break;case 20:if(F.type!=="pointerdown"){ne.next=24;break}d=0,ne.next=33;break;case 24:if(F.type!=="pointermove"){ne.next=28;break}d!==null&&d++,ne.next=33;break;case 28:if(F.type!=="pointerup"){ne.next=33;break}if(!(d!==null&&d<4)){ne.next=32;break}return ne.next=32,n.unselectAll();case 32:d=null;case 33:return ne.abrupt("return",F);case 34:case"end":return ne.stop()}},N)}));return function(N){return E.apply(this,arguments)}})()),{select:y,unselect:b}}function Zk(a,n){var r=null,s=function(){return r||(r=a.parentScope(Xr))};function l(c,d){var h=s().getNode(c);if(h){var m=h.inputs[d];if(!m)throw new Error("cannot find input");var y=m.showControl,v=s().getConnections(),b=!!v.find(function(x){return x.target===c&&x.targetInput===d});m.showControl=n?n({hasAnyConnection:b,input:m}):!b,m.showControl!==y&&a.update("node",h.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function Sv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function tc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Sv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Xk(a,n){var r=a,s=typeof n?.size>"u"?16:n.size,l=typeof n?.dynamic>"u"?!0:n.dynamic;function c(d){return Math.round(d/s)*s}r.addPipe(function(d){if(!d||Cn(d)!=="object"||!("type"in d))return d;if(l&&d.type==="nodetranslate"){var h=d.data.position,m=c(h.x),y=c(h.y);return tc(tc({},d),{},{data:tc(tc({},d.data),{},{position:{x:m,y}})})}if(!l&&d.type==="nodedragged"){var v=r.nodeViews.get(d.data.id);if(v){var b=v.position,x=b.x,E=b.y;v.translate(c(x),c(E))}}return d})}function Kk(a,n,r){return Gf.apply(this,arguments)}function Gf(){return Gf=at(Se.mark(function a(n,r,s){var l,c,d,h,m,y,v,b,x,E,N,F,H;return Se.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return l=s||{},c=l.scale,d=c===void 0?.9:c,h=n.parentScope(Xr),m=r.map(function(R){return Cn(R)==="object"?R:h.getNode(R)}),y=Nb(m,n.nodeViews),v=xb(y),b=[n.container.clientWidth,n.container.clientHeight],x=b[0],E=b[1],N=x/v.width,F=E/v.height,H=Math.min(F*d,N*d,1),n.area.transform.x=x/2-v.center.x*H,n.area.transform.y=E/2-v.center.y*H,X.next=12,n.area.zoom(H,0,0);case 12:case"end":return X.stop()}},a)})),Gf.apply(this,arguments)}var Hr=Object.freeze({__proto__:null,getBoundingBox:Vk,simpleNodesOrder:qk,restrictor:Gk,accumulateOnCtrl:Yk,selectableNodes:Fk,Selector:Ob,selector:Pk,showInputControl:Zk,snapGrid:Xk,zoomAt:Kk});function xv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function kv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?xv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Qk(a,n,r){return n=Mt(n),Ga(a,jb()?Reflect.construct(n,r||[],Mt(a).constructor):n.apply(a,r))}function jb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jb=function(){return!!a})()}var Ab=(function(a){function n(r){var s;return ct(this,n),s=Qk(this,n,["area"]),Be(s,"nodeViews",new Map),Be(s,"connectionViews",new Map),Be(s,"elements",new Hk),Be(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!(Cn(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new Eb(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,d){return void s.emit({type:"pointerdown",data:{position:c,event:d}})},pointerMove:function(c,d){return void s.emit({type:"pointermove",data:{position:c,event:d}})},pointerUp:function(c,d){return void s.emit({type:"pointerup",data:{position:c,event:d}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return Pn(n,a),ut(n,[{key:"addNodeView",value:function(s){var l=this,c=s.id,d=new Tb(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(m){return l.emit({type:"nodetranslated",data:kv({id:c},m)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(m){return void l.emit({type:"contextmenu",data:{event:m,context:s}})},resized:function(m){var y=m.size;return l.emit({type:"noderesized",data:{id:s.id,size:y}})}},{translate:function(m){return l.emit({type:"nodetranslate",data:kv({id:c},m)})},resize:function(m){var y=m.size;return l.emit({type:"noderesize",data:{id:s.id,size:y}})}});return this.nodeViews.set(c,d),this.area.content.add(d.element),this.emit({type:"render",data:{element:d.element,type:"node",payload:s}}),d}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new $k({contextmenu:function(h){return void l.emit({type:"contextmenu",data:{event:h,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=at(Se.mark(function l(c,d){var h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(h=this.elements.get(c,d),!h){y.next=4;break}return y.next=4,this.emit({type:"render",data:h});case 4:case"end":return y.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=at(Se.mark(function l(c,d,h){var m;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(m=this.nodeViews.get(c),!m){v.next=5;break}return v.next=4,m.resize(d,h);case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}},l,this)}));function s(l,c,d){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=at(Se.mark(function l(c,d){var h,m,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h=d.x,m=d.y,y=this.nodeViews.get(c),!y){b.next=6;break}return b.next=5,y.translate(h,m);case 5:return b.abrupt("return",b.sent);case 6:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(Lo);const Ev=Object.freeze(Object.defineProperty({__proto__:null,Area:Eb,AreaExtensions:Hr,AreaPlugin:Ab,BaseAreaPlugin:Lo,Drag:jh,NodeView:Tb,Zoom:kb,usePointerListener:Sb},Symbol.toStringTag,{value:"Module"}));function Jk(a,n){for(;!{}.hasOwnProperty.call(a,n)&&(a=Mt(a))!==null;);return a}function Mo(){return Mo=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,n,r){var s=Jk(a,n);if(s){var l=Object.getOwnPropertyDescriptor(s,n);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Mo.apply(null,arguments)}function Wk(a){if(Array.isArray(a))return a}function eE(a,n){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,d,h=[],m=!0,y=!1;try{if(c=(r=r.call(a)).next,n!==0)for(;!(m=(s=c.call(r)).done)&&(h.push(s.value),h.length!==n);m=!0);}catch(v){y=!0,l=v}finally{try{if(!m&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(y)throw l}}return h}}function tE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ln(a,n){return Wk(a)||eE(a,n)||wb(a,n)||tE()}function Cv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function xf(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Cv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function nE(a){var n=null,r=null;function s(c){r&&c.removeConnectionView(r),n=null,r=null}function l(c){s(c),r="pseudo_".concat(Kr())}return{isMounted:function(){return!!r},mount:l,render:function(d,h,m){var y=h.x,v=h.y,b=m.side==="output",x={x:y+(b?-3:3),y:v};if(!r)throw new Error("pseudo connection id wasn't generated");var E=b?xf({id:r,source:m.nodeId,sourceOutput:m.key,target:"",targetInput:""},a??{}):xf({id:r,target:m.nodeId,targetInput:m.key,source:"",sourceOutput:""},a??{});if(!n){var N=d.addConnectionView(E);n=N.element}n&&d.emit({type:"render",data:xf({element:n,type:"connection",payload:E},b?{end:x}:{start:x})})},unmount:s}}function aE(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=rE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function rE(a,n){if(a){if(typeof a=="string")return Tv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tv(a,n):void 0}}function Tv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function iE(a,n){var r=aE(n),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(d){r.e(d)}finally{r.f()}}function _b(a,n){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,n),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,vs(_b(a,n,c))),l}var Ah=(function(){function a(){ct(this,a)}return ut(a,[{key:"setContext",value:function(r){this.context=r}}])})();function Db(a,n){var r=a.side==="output"&&n.side==="input",s=a.side==="input"&&n.side==="output",l=r?[a,n]:s?[n,a]:[],c=Ln(l,2),d=c[0],h=c[1];if(d&&h)return[d,h]}function sE(a,n){return!!Db(a,n)}function oE(a,n,r){var s=Db(a,n)||[null,null],l=Ln(s,2),c=l[0],d=l[1];if(c&&d)return r.editor.addConnection({id:Kr(),source:c.nodeId,sourceOutput:c.key,target:d.nodeId,targetInput:d.key}),!0}function lE(a,n){var r=n.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function cE(a,n){var r=a.nodeId,s=a.side,l=a.key;return n.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Yf(a,n){var r=a.map(function(s){var l=lE(s,n),c=l?.multipleConnections;return c?[]:cE(s,n)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var d=c.id;return d})));l.forEach(function(c){return void n.removeConnection(c)})}}}function _h(a,n,r){return n=Mt(n),Ga(a,Mb()?Reflect.construct(n,[],Mt(a).constructor):n.apply(a,r))}function Mb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mb=function(){return!!a})()}var uE=(function(a){function n(r,s){var l;return ct(this,n),l=_h(this,n),l.initial=r,l.params=s,l}return Pn(n,a),ut(n,[{key:"pick",value:(function(){var r=at(Se.mark(function l(c,d){var h,m;return Se.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:h=c.socket,this.params.canMakeConnection(this.initial,h)&&(Yf([this.initial,h],d.editor).commit(),m=this.params.makeConnection(this.initial,h,d),this.drop(d,m?h:null,m));case 2:case"end":return v.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Dh(this.params))}}])})(Ah),dE=(function(a){function n(r,s,l){var c;ct(this,n),c=_h(this,n),c.connection=r,c.params=s;var d=Array.from(l.socketsCache.values()).find(function(h){return h.nodeId===c.connection.source&&h.side==="output"&&h.key===c.connection.sourceOutput});if(!d)throw new Error("cannot find output socket");return c.outputSocket=d,c}return Pn(n,a),ut(n,[{key:"init",value:(function(){var r=at(Se.mark(function l(c){var d=this;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(y){y?(c.editor.removeConnection(d.connection.id),d.initial=d.outputSocket):d.drop(c)});case 1:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=at(Se.mark(function l(c,d){var h,m,y,v,b,x;return Se.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:h=c.socket,m=c.event,this.initial&&!(h.side==="input"&&this.connection.target===h.nodeId&&this.connection.targetInput===h.key)?this.params.canMakeConnection(this.initial,h)&&(Yf([this.initial,h],d.editor).commit(),y=this.params.makeConnection(this.initial,h,d),v=y?h:null,this.drop(d,v,y)):m==="down"&&this.initial&&(Yf([this.initial,h],d.editor).commit(),b=this.params.makeConnection(this.initial,h,d),x=b?null:h,this.drop(d,x,b));case 2:case"end":return N.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Dh(this.params))}}])})(Ah),Dh=(function(a){function n(r){var s;return ct(this,n),s=_h(this,n),s.params=r,s}return Pn(n,a),ut(n,[{key:"pick",value:(function(){var r=at(Se.mark(function l(c,d){var h,m,y,v;return Se.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(h=c.socket,m=c.event,m==="down"){x.next=3;break}return x.abrupt("return");case 3:if(h.side!=="input"){x.next=11;break}if(y=d.editor.getConnections().find(function(E){return E.target===h.nodeId&&E.targetInput===h.key}),!y){x.next=11;break}return v=new dE(y,this.params,d),x.next=9,v.init(d);case 9:return this.context.switchTo(v),x.abrupt("return");case 11:return x.next=13,d.scope.emit({type:"connectionpick",data:{socket:h}});case 13:if(!x.sent){x.next=17;break}this.context.switchTo(new uE(h,this.params)),x.next=18;break;case 17:this.drop(d);case 18:case"end":return x.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(Ah),fE=(function(){function a(n){ct(this,a);var r=n?.canMakeConnection||sE,s=n?.makeConnection||oE;this.switchTo(new Dh({canMakeConnection:r,makeConnection:s}))}return ut(a,[{key:"pick",value:(function(){var n=at(Se.mark(function s(l,c){return Se.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.currentState.pick(l,c);case 2:case"end":return h.stop()}},s,this)}));function r(s,l){return n.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function hE(){return function(){return new fE}}var pE=Object.freeze({__proto__:null,setup:hE}),mE=Object.freeze({__proto__:null,classic:pE});function yE(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=gE(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function gE(a,n){if(a){if(typeof a=="string")return Nv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nv(a,n):void 0}}function Nv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function vE(a,n,r){return n=Mt(n),Ga(a,Rb()?Reflect.construct(n,r||[],Mt(a).constructor):n.apply(a,r))}function Rb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rb=function(){return!!a})()}function bE(a,n,r,s){var l=Mo(Mt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var wE=(function(a){function n(){var r;return ct(this,n),r=vE(this,n,["connection"]),Be(r,"presets",[]),Be(r,"currentFlow",null),Be(r,"preudoconnection",nE({isPseudo:!0})),Be(r,"socketsCache",new Map),r}return Pn(n,a),ut(n,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=yE(this.presets),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,h=d(s);if(h)return h}}catch(m){l.e(m)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=at(Se.mark(function l(c,d){var h,m,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h={editor:this.editor,scope:this,socketsCache:this.socketsCache},m=_b(c.clientX,c.clientY),y=iE(this.socketsCache,m),!y){b.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(y),!this.currentFlow){b.next=11;break}return b.next=10,this.currentFlow.pick({socket:y,event:d},h);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:b.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(h);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;bE(n,"setParent",this)([s]),this.areaPlugin=this.parentScope(Lo),this.editor=this.areaPlugin.parentScope(Xr);var c=function(h){l.pick(h,"down")};this.addPipe(function(d){if(!d||Cn(d)!=="object"||!("type"in d))return d;if(d.type==="pointermove")l.update();else if(d.type==="pointerup")l.pick(d.data.event,"up");else if(d.type==="render"){if(d.data.type==="socket"){var h=d.data.element;h.addEventListener("pointerdown",c),l.socketsCache.set(h,d.data)}}else if(d.type==="unmount"){var m=d.data.element;m.removeEventListener("pointerdown",c),l.socketsCache.delete(m)}return d})}}])})(gs);function SE(a,n){var r=Ln(a,2),s=r[0],l=s.x,c=s.y,d=r[1],h=d.x,m=d.y,y=Math.abs(c-m),v=l+Math.max(y/2,Math.abs(h-l))*n,b=h-Math.max(y/2,Math.abs(h-l))*n;return"M ".concat(l," ").concat(c," C ").concat(v," ").concat(c," ").concat(b," ").concat(m," ").concat(h," ").concat(m)}function xE(a,n,r){var s=Ln(a,2),l=s[0],c=l.x,d=l.y,h=s[1],m=h.x,y=h.y,v=y>d?1:-1,b=r+Math.abs(c-m)/(r/2),x=(c+m)/2,E=d-v*b,N=(y-d)*n;return`
        M `.concat(c," ").concat(d,`
        C `).concat(c+b," ").concat(d,`
        `).concat(c+b," ").concat(E-N,`
        `).concat(x," ").concat(E,`
        C `).concat(m-b," ").concat(E+N,`
        `).concat(m-b," ").concat(y,`
        `).concat(m," ").concat(y,`
    `)}function kE(a,n){return Pf.apply(this,arguments)}function Pf(){return Pf=at(Se.mark(function a(n,r){var s,l,c,d,h;return Se.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(n.offsetParent){y.next=5;break}return y.next=3,new Promise(function(v){return setTimeout(v,0)});case 3:y.next=0;break;case 5:if(s=n.offsetLeft,l=n.offsetTop,c=n.offsetParent,c){y.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return d=n.offsetWidth,h=n.offsetHeight,y.abrupt("return",{x:s+d/2,y:l+h/2});case 14:case"end":return y.stop()}},a)})),Pf.apply(this,arguments)}var EE=(function(){function a(){ct(this,a),Be(this,"listeners",new Set)}return ut(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),CE=(function(){function a(){ct(this,a),Be(this,"elements",new Map)}return ut(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),d=c.filter(function(h){return h.side===r.side&&h.nodeId===r.nodeId&&h.key===r.key});return d.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=d.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(vs(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),TE=(function(){function a(){ct(this,a),Be(this,"sockets",new CE),Be(this,"emitter",new EE),Be(this,"area",null)}return ut(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(Lo),this.area.addPipe((function(){var l=at(Se.mark(function c(d){var h,m,y,v,b,x,E,N,F,H,K;return Se.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!(d.type==="rendered"&&d.data.type==="socket")){R.next=8;break}return h=d.data,m=h.nodeId,y=h.key,v=h.side,b=h.element,R.next=4,s.calculatePosition(m,v,y,b);case 4:x=R.sent,x&&(s.sockets.add({nodeId:m,key:y,side:v,element:b,position:x}),s.emitter.emit({nodeId:m,key:y,side:v})),R.next=24;break;case 8:if(d.type!=="unmount"){R.next=12;break}s.sockets.remove(d.data.element),R.next=24;break;case 12:if(d.type!=="nodetranslated"){R.next=16;break}s.emitter.emit({nodeId:d.data.id}),R.next=24;break;case 16:if(d.type!=="noderesized"){R.next=23;break}return E=d.data.id,R.next=20,Promise.all(s.sockets.snapshot().filter(function(Y){return Y.nodeId===d.data.id&&Y.side==="output"}).map((function(){var Y=at(Se.mark(function he(ge){var G,de,ne,pe;return Se.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return G=ge.side,de=ge.key,ne=ge.element,ze.next=3,s.calculatePosition(E,G,de,ne);case 3:pe=ze.sent,pe&&(ge.position=pe);case 5:case"end":return ze.stop()}},he)}));return function(he){return Y.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:E}),R.next=24;break;case 23:d.type==="render"&&d.data.type==="connection"&&(N=d.data.payload,F=N.source,H=N.target,K=F||H,s.emitter.emit({nodeId:K}));case 24:return R.abrupt("return",d);case 25:case"end":return R.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var d=this,h=this.emitter.listen(function(m){if(m.nodeId===r&&(!m.key||m.side===s)&&(!m.side||m.key===l)){var y,v=d.sockets.getPosition({side:s,nodeId:r,key:l});if(!v)return;var b=v.x,x=v.y,E=(y=d.area)===null||y===void 0?void 0:y.nodeViews.get(r);E&&c({x:b+E.position.x,y:x+E.position.y})}});return this.sockets.snapshot().forEach(function(m){m.nodeId===r&&d.emitter.emit(m)}),h}}])})();function NE(a,n,r){return n=Mt(n),Ga(a,zb()?Reflect.construct(n,[],Mt(a).constructor):n.apply(a,r))}function zb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zb=function(){return!!a})()}var OE=(function(a){function n(r){var s;return ct(this,n),s=NE(this,n),s.props=r,s}return Pn(n,a),ut(n,[{key:"calculatePosition",value:(function(){var r=at(Se.mark(function l(c,d,h,m){var y,v,b,x;return Se.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(b=(y=this.area)===null||y===void 0?void 0:y.nodeViews.get(c),b!=null&&b.element){N.next=3;break}return N.abrupt("return",null);case 3:return N.next=5,kE(m,b.element);case 5:if(x=N.sent,!((v=this.props)!==null&&v!==void 0&&v.offset)){N.next=8;break}return N.abrupt("return",this.props.offset(x,c,d,h));case 8:return N.abrupt("return",{x:x.x+12*(d==="input"?-1:1),y:x.y});case 9:case"end":return N.stop()}},l,this)}));function s(l,c,d,h){return r.apply(this,arguments)}return s})()}])})(TE);function jE(a){return new OE(a)}function Tn(a,n){return n||(n=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(n)}}))}var Yn=function(){return Yn=Object.assign||function(n){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(n[c]=r[c])}return n},Yn.apply(this,arguments)};function Nc(a,n,r){if(r||arguments.length===2)for(var s=0,l=n.length,c;s<l;s++)(c||!(s in n))&&(c||(c=Array.prototype.slice.call(n,0,s)),c[s]=n[s]);return a.concat(c||Array.prototype.slice.call(n))}var It="-ms-",Oo="-moz-",St="-webkit-",Lb="comm",Bc="rule",Mh="decl",AE="@import",Bb="@keyframes",_E="@layer",Ub=Math.abs,Rh=String.fromCharCode,Ff=Object.assign;function DE(a,n){return bn(a,0)^45?(((n<<2^bn(a,0))<<2^bn(a,1))<<2^bn(a,2))<<2^bn(a,3):0}function Ib(a){return a.trim()}function hr(a,n){return(a=n.exec(a))?a[0]:a}function nt(a,n,r){return a.replace(n,r)}function mc(a,n,r){return a.indexOf(n,r)}function bn(a,n){return a.charCodeAt(n)|0}function ds(a,n,r){return a.slice(n,r)}function Ua(a){return a.length}function $b(a){return a.length}function xo(a,n){return n.push(a),a}function ME(a,n){return a.map(n).join("")}function Ov(a,n){return a.filter(function(r){return!hr(r,n)})}var Uc=1,fs=1,Hb=0,va=0,cn=0,bs="";function Ic(a,n,r,s,l,c,d,h){return{value:a,root:n,parent:r,type:s,props:l,children:c,line:Uc,column:fs,length:d,return:"",siblings:h}}function Vr(a,n){return Ff(Ic("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},n)}function ts(a){for(;a.root;)a=Vr(a.root,{children:[a]});xo(a,a.siblings)}function RE(){return cn}function zE(){return cn=va>0?bn(bs,--va):0,fs--,cn===10&&(fs=1,Uc--),cn}function Aa(){return cn=va<Hb?bn(bs,va++):0,fs++,cn===10&&(fs=1,Uc++),cn}function vi(){return bn(bs,va)}function yc(){return va}function $c(a,n){return ds(bs,a,n)}function Zf(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function LE(a){return Uc=fs=1,Hb=Ua(bs=a),va=0,[]}function BE(a){return bs="",a}function kf(a){return Ib($c(va-1,Xf(a===91?a+2:a===40?a+1:a)))}function UE(a){for(;(cn=vi())&&cn<33;)Aa();return Zf(a)>2||Zf(cn)>3?"":" "}function IE(a,n){for(;--n&&Aa()&&!(cn<48||cn>102||cn>57&&cn<65||cn>70&&cn<97););return $c(a,yc()+(n<6&&vi()==32&&Aa()==32))}function Xf(a){for(;Aa();)switch(cn){case a:return va;case 34:case 39:a!==34&&a!==39&&Xf(cn);break;case 40:a===41&&Xf(a);break;case 92:Aa();break}return va}function $E(a,n){for(;Aa()&&a+cn!==57;)if(a+cn===84&&vi()===47)break;return"/*"+$c(n,va-1)+"*"+Rh(a===47?a:Aa())}function HE(a){for(;!Zf(vi());)Aa();return $c(a,va)}function VE(a){return BE(gc("",null,null,null,[""],a=LE(a),0,[0],a))}function gc(a,n,r,s,l,c,d,h,m){for(var y=0,v=0,b=d,x=0,E=0,N=0,F=1,H=1,K=1,X=0,R="",Y=l,he=c,ge=s,G=R;H;)switch(N=X,X=Aa()){case 40:if(N!=108&&bn(G,b-1)==58){mc(G+=nt(kf(X),"&","&\f"),"&\f",Ub(y?h[y-1]:0))!=-1&&(K=-1);break}case 34:case 39:case 91:G+=kf(X);break;case 9:case 10:case 13:case 32:G+=UE(N);break;case 92:G+=IE(yc()-1,7);continue;case 47:switch(vi()){case 42:case 47:xo(qE($E(Aa(),yc()),n,r,m),m);break;default:G+="/"}break;case 123*F:h[y++]=Ua(G)*K;case 125*F:case 59:case 0:switch(X){case 0:case 125:H=0;case 59+v:K==-1&&(G=nt(G,/\f/g,"")),E>0&&Ua(G)-b&&xo(E>32?Av(G+";",s,r,b-1,m):Av(nt(G," ","")+";",s,r,b-2,m),m);break;case 59:G+=";";default:if(xo(ge=jv(G,n,r,y,v,l,h,R,Y=[],he=[],b,c),c),X===123)if(v===0)gc(G,n,ge,ge,Y,c,b,h,he);else switch(x===99&&bn(G,3)===110?100:x){case 100:case 108:case 109:case 115:gc(a,ge,ge,s&&xo(jv(a,ge,ge,0,0,l,h,R,l,Y=[],b,he),he),l,he,b,h,s?Y:he);break;default:gc(G,ge,ge,ge,[""],he,0,h,he)}}y=v=E=0,F=K=1,R=G="",b=d;break;case 58:b=1+Ua(G),E=N;default:if(F<1){if(X==123)--F;else if(X==125&&F++==0&&zE()==125)continue}switch(G+=Rh(X),X*F){case 38:K=v>0?1:(G+="\f",-1);break;case 44:h[y++]=(Ua(G)-1)*K,K=1;break;case 64:vi()===45&&(G+=kf(Aa())),x=vi(),v=b=Ua(R=G+=HE(yc())),X++;break;case 45:N===45&&Ua(G)==2&&(F=0)}}return c}function jv(a,n,r,s,l,c,d,h,m,y,v,b){for(var x=l-1,E=l===0?c:[""],N=$b(E),F=0,H=0,K=0;F<s;++F)for(var X=0,R=ds(a,x+1,x=Ub(H=d[F])),Y=a;X<N;++X)(Y=Ib(H>0?E[X]+" "+R:nt(R,/&\f/g,E[X])))&&(m[K++]=Y);return Ic(a,n,r,l===0?Bc:h,m,y,v,b)}function qE(a,n,r,s){return Ic(a,n,r,Lb,Rh(RE()),ds(a,2,-2),0,s)}function Av(a,n,r,s,l){return Ic(a,n,r,Mh,ds(a,0,s),ds(a,s+1,-1),s,l)}function Vb(a,n,r){switch(DE(a,n)){case 5103:return St+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return St+a+a;case 4789:return Oo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return St+a+Oo+a+It+a+a;case 5936:switch(bn(a,n+11)){case 114:return St+a+It+nt(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return St+a+It+nt(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return St+a+It+nt(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return St+a+It+a+a;case 6165:return St+a+It+"flex-"+a+a;case 5187:return St+a+nt(a,/(\w+).+(:[^]+)/,St+"box-$1$2"+It+"flex-$1$2")+a;case 5443:return St+a+It+"flex-item-"+nt(a,/flex-|-self/g,"")+(hr(a,/flex-|baseline/)?"":It+"grid-row-"+nt(a,/flex-|-self/g,""))+a;case 4675:return St+a+It+"flex-line-pack"+nt(a,/align-content|flex-|-self/g,"")+a;case 5548:return St+a+It+nt(a,"shrink","negative")+a;case 5292:return St+a+It+nt(a,"basis","preferred-size")+a;case 6060:return St+"box-"+nt(a,"-grow","")+St+a+It+nt(a,"grow","positive")+a;case 4554:return St+nt(a,/([^-])(transform)/g,"$1"+St+"$2")+a;case 6187:return nt(nt(nt(a,/(zoom-|grab)/,St+"$1"),/(image-set)/,St+"$1"),a,"")+a;case 5495:case 3959:return nt(a,/(image-set\([^]*)/,St+"$1$`$1");case 4968:return nt(nt(a,/(.+:)(flex-)?(.*)/,St+"box-pack:$3"+It+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+St+a+a;case 4200:if(!hr(a,/flex-|baseline/))return It+"grid-column-align"+ds(a,n)+a;break;case 2592:case 3360:return It+nt(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return n=l,hr(s.props,/grid-\w+-end/)})?~mc(a+(r=r[n].value),"span",0)?a:It+nt(a,"-start","")+a+It+"grid-row-span:"+(~mc(r,"span",0)?hr(r,/\d+/):+hr(r,/\d+/)-+hr(a,/\d+/))+";":It+nt(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return hr(s.props,/grid-\w+-start/)})?a:It+nt(nt(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return nt(a,/(.+)-inline(.+)/,St+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ua(a)-1-n>6)switch(bn(a,n+1)){case 109:if(bn(a,n+4)!==45)break;case 102:return nt(a,/(.+:)(.+)-([^]+)/,"$1"+St+"$2-$3$1"+Oo+(bn(a,n+3)==108?"$3":"$2-$3"))+a;case 115:return~mc(a,"stretch",0)?Vb(nt(a,"stretch","fill-available"),n,r)+a:a}break;case 5152:case 5920:return nt(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,d,h,m,y){return It+l+":"+c+y+(d?It+l+"-span:"+(h?m:+m-+c)+y:"")+a});case 4949:if(bn(a,n+6)===121)return nt(a,":",":"+St)+a;break;case 6444:switch(bn(a,bn(a,14)===45?18:11)){case 120:return nt(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+St+(bn(a,14)===45?"inline-":"")+"box$3$1"+St+"$2$3$1"+It+"$2box$3")+a;case 100:return nt(a,":",":"+It)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return nt(a,"scroll-","scroll-snap-")+a}return a}function Oc(a,n){for(var r="",s=0;s<a.length;s++)r+=n(a[s],s,a,n)||"";return r}function GE(a,n,r,s){switch(a.type){case _E:if(a.children.length)break;case AE:case Mh:return a.return=a.return||a.value;case Lb:return"";case Bb:return a.return=a.value+"{"+Oc(a.children,s)+"}";case Bc:if(!Ua(a.value=a.props.join(",")))return""}return Ua(r=Oc(a.children,s))?a.return=a.value+"{"+r+"}":""}function YE(a){var n=$b(a);return function(r,s,l,c){for(var d="",h=0;h<n;h++)d+=a[h](r,s,l,c)||"";return d}}function PE(a){return function(n){n.root||(n=n.return)&&a(n)}}function FE(a,n,r,s){if(a.length>-1&&!a.return)switch(a.type){case Mh:a.return=Vb(a.value,a.length,r);return;case Bb:return Oc([Vr(a,{value:nt(a.value,"@","@"+St)})],s);case Bc:if(a.length)return ME(r=a.props,function(l){switch(hr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ts(Vr(a,{props:[nt(l,/:(read-\w+)/,":"+Oo+"$1")]})),ts(Vr(a,{props:[l]})),Ff(a,{props:Ov(r,s)});break;case"::placeholder":ts(Vr(a,{props:[nt(l,/:(plac\w+)/,":"+St+"input-$1")]})),ts(Vr(a,{props:[nt(l,/:(plac\w+)/,":"+Oo+"$1")]})),ts(Vr(a,{props:[nt(l,/:(plac\w+)/,It+"input-$1")]})),ts(Vr(a,{props:[l]})),Ff(a,{props:Ov(r,s)});break}return""})}}var ZE={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ta={},hs=typeof process<"u"&&ta!==void 0&&(ta.REACT_APP_SC_ATTR||ta.SC_ATTR)||"data-styled",qb="active",Gb="data-styled-version",Hc="6.1.19",zh=`/*!sc*/
`,jc=typeof window<"u"&&typeof document<"u",XE=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ta!==void 0&&ta.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ta.REACT_APP_SC_DISABLE_SPEEDY!==""?ta.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ta.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ta!==void 0&&ta.SC_DISABLE_SPEEDY!==void 0&&ta.SC_DISABLE_SPEEDY!==""&&ta.SC_DISABLE_SPEEDY!=="false"&&ta.SC_DISABLE_SPEEDY),Vc=Object.freeze([]),ps=Object.freeze({});function KE(a,n,r){return r===void 0&&(r=ps),a.theme!==r.theme&&a.theme||n||r.theme}var Yb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),QE=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,JE=/(^-|-$)/g;function _v(a){return a.replace(QE,"-").replace(JE,"")}var WE=/(a)(d)/gi,nc=52,Dv=function(a){return String.fromCharCode(a+(a>25?39:97))};function Kf(a){var n,r="";for(n=Math.abs(a);n>nc;n=n/nc|0)r=Dv(n%nc)+r;return(Dv(n%nc)+r).replace(WE,"$1-$2")}var Ef,Pb=5381,ss=function(a,n){for(var r=n.length;r;)a=33*a^n.charCodeAt(--r);return a},Fb=function(a){return ss(Pb,a)};function e2(a){return Kf(Fb(a)>>>0)}function t2(a){return a.displayName||a.name||"Component"}function Cf(a){return typeof a=="string"&&!0}var Zb=typeof Symbol=="function"&&Symbol.for,Xb=Zb?Symbol.for("react.memo"):60115,n2=Zb?Symbol.for("react.forward_ref"):60112,a2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r2={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Kb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i2=((Ef={})[n2]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ef[Xb]=Kb,Ef);function Mv(a){return("type"in(n=a)&&n.type.$$typeof)===Xb?Kb:"$$typeof"in a?i2[a.$$typeof]:a2;var n}var s2=Object.defineProperty,o2=Object.getOwnPropertyNames,Rv=Object.getOwnPropertySymbols,l2=Object.getOwnPropertyDescriptor,c2=Object.getPrototypeOf,zv=Object.prototype;function Qb(a,n,r){if(typeof n!="string"){if(zv){var s=c2(n);s&&s!==zv&&Qb(a,s,r)}var l=o2(n);Rv&&(l=l.concat(Rv(n)));for(var c=Mv(a),d=Mv(n),h=0;h<l.length;++h){var m=l[h];if(!(m in r2||r&&r[m]||d&&m in d||c&&m in c)){var y=l2(n,m);try{s2(a,m,y)}catch{}}}}return a}function ms(a){return typeof a=="function"}function Lh(a){return typeof a=="object"&&"styledComponentId"in a}function mi(a,n){return a&&n?"".concat(a," ").concat(n):a||n||""}function Lv(a,n){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Ro(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function Qf(a,n,r){if(r===void 0&&(r=!1),!r&&!Ro(a)&&!Array.isArray(a))return n;if(Array.isArray(n))for(var s=0;s<n.length;s++)a[s]=Qf(a[s],n[s]);else if(Ro(n))for(var s in n)a[s]=Qf(a[s],n[s]);return a}function Bh(a,n){Object.defineProperty(a,"toString",{value:n})}function Bo(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var u2=(function(){function a(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return a.prototype.indexOfGroup=function(n){for(var r=0,s=0;s<n;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;n>=c;)if((c<<=1)<0)throw Bo(16,"".concat(n));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var d=l;d<c;d++)this.groupSizes[d]=0}for(var h=this.indexOfGroup(n+1),m=(d=0,r.length);d<m;d++)this.tag.insertRule(h,r[d])&&(this.groupSizes[n]++,h++)},a.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],s=this.indexOfGroup(n),l=s+r;this.groupSizes[n]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var s=this.groupSizes[n],l=this.indexOfGroup(n),c=l+s,d=l;d<c;d++)r+="".concat(this.tag.getRule(d)).concat(zh);return r},a})(),vc=new Map,Ac=new Map,bc=1,ac=function(a){if(vc.has(a))return vc.get(a);for(;Ac.has(bc);)bc++;var n=bc++;return vc.set(a,n),Ac.set(n,a),n},d2=function(a,n){bc=n+1,vc.set(a,n),Ac.set(n,a)},f2="style[".concat(hs,"][").concat(Gb,'="').concat(Hc,'"]'),h2=new RegExp("^".concat(hs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),p2=function(a,n,r){for(var s,l=r.split(","),c=0,d=l.length;c<d;c++)(s=l[c])&&a.registerName(n,s)},m2=function(a,n){for(var r,s=((r=n.textContent)!==null&&r!==void 0?r:"").split(zh),l=[],c=0,d=s.length;c<d;c++){var h=s[c].trim();if(h){var m=h.match(h2);if(m){var y=0|parseInt(m[1],10),v=m[2];y!==0&&(d2(v,y),p2(a,v,m[3]),a.getTag().insertRules(y,l)),l.length=0}else l.push(h)}}},Bv=function(a){for(var n=document.querySelectorAll(f2),r=0,s=n.length;r<s;r++){var l=n[r];l&&l.getAttribute(hs)!==qb&&(m2(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function y2(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Jb=function(a){var n=document.head,r=a||n,s=document.createElement("style"),l=(function(h){var m=Array.from(h.querySelectorAll("style[".concat(hs,"]")));return m[m.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(hs,qb),s.setAttribute(Gb,Hc);var d=y2();return d&&s.setAttribute("nonce",d),r.insertBefore(s,c),s},g2=(function(){function a(n){this.element=Jb(n),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var d=s[l];if(d.ownerNode===r)return d}throw Bo(17)})(this.element),this.length=0}return a.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},a.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},a})(),v2=(function(){function a(n){this.element=Jb(n),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[n]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},a.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},a})(),b2=(function(){function a(n){this.rules=[],this.length=0}return a.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},a.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},a.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},a})(),Uv=jc,w2={isServer:!jc,useCSSOMInjection:!XE},Wb=(function(){function a(n,r,s){n===void 0&&(n=ps),r===void 0&&(r={});var l=this;this.options=Yn(Yn({},w2),n),this.gs=r,this.names=new Map(s),this.server=!!n.isServer,!this.server&&jc&&Uv&&(Uv=!1,Bv(this)),Bh(this,function(){return(function(c){for(var d=c.getTag(),h=d.length,m="",y=function(b){var x=(function(K){return Ac.get(K)})(b);if(x===void 0)return"continue";var E=c.names.get(x),N=d.getGroup(b);if(E===void 0||!E.size||N.length===0)return"continue";var F="".concat(hs,".g").concat(b,'[id="').concat(x,'"]'),H="";E!==void 0&&E.forEach(function(K){K.length>0&&(H+="".concat(K,","))}),m+="".concat(N).concat(F,'{content:"').concat(H,'"}').concat(zh)},v=0;v<h;v++)y(v);return m})(l)})}return a.registerId=function(n){return ac(n)},a.prototype.rehydrate=function(){!this.server&&jc&&Bv(this)},a.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new a(Yn(Yn({},this.options),n),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(n=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new b2(l):s?new g2(l):new v2(l)})(this.options),new u2(n)));var n},a.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},a.prototype.registerName=function(n,r){if(ac(n),this.names.has(n))this.names.get(n).add(r);else{var s=new Set;s.add(r),this.names.set(n,s)}},a.prototype.insertRules=function(n,r,s){this.registerName(n,r),this.getTag().insertRules(ac(n),s)},a.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},a.prototype.clearRules=function(n){this.getTag().clearGroup(ac(n)),this.clearNames(n)},a.prototype.clearTag=function(){this.tag=void 0},a})(),S2=/&/g,x2=/^\s*\/\/.*$/gm;function e1(a,n){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(s){return"".concat(n," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=e1(r.children,n)),r})}function k2(a){var n,r,s,l=ps,c=l.options,d=c===void 0?ps:c,h=l.plugins,m=h===void 0?Vc:h,y=function(x,E,N){return N.startsWith(r)&&N.endsWith(r)&&N.replaceAll(r,"").length>0?".".concat(n):x},v=m.slice();v.push(function(x){x.type===Bc&&x.value.includes("&")&&(x.props[0]=x.props[0].replace(S2,r).replace(s,y))}),d.prefix&&v.push(FE),v.push(GE);var b=function(x,E,N,F){E===void 0&&(E=""),N===void 0&&(N=""),F===void 0&&(F="&"),n=F,r=E,s=new RegExp("\\".concat(r,"\\b"),"g");var H=x.replace(x2,""),K=VE(N||E?"".concat(N," ").concat(E," { ").concat(H," }"):H);d.namespace&&(K=e1(K,d.namespace));var X=[];return Oc(K,YE(v.concat(PE(function(R){return X.push(R)})))),X};return b.hash=m.length?m.reduce(function(x,E){return E.name||Bo(15),ss(x,E.name)},Pb).toString():"",b}var E2=new Wb,Jf=k2(),t1=_a.createContext({shouldForwardProp:void 0,styleSheet:E2,stylis:Jf});t1.Consumer;_a.createContext(void 0);function Iv(){return k.useContext(t1)}var C2=(function(){function a(n,r){var s=this;this.inject=function(l,c){c===void 0&&(c=Jf);var d=s.name+c.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,c(s.rules,d,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Bh(this,function(){throw Bo(12,String(s.name))})}return a.prototype.getName=function(n){return n===void 0&&(n=Jf),this.name+n.hash},a})(),T2=function(a){return a>="A"&&a<="Z"};function $v(a){for(var n="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;T2(s)?n+="-"+s.toLowerCase():n+=s}return n.startsWith("ms-")?"-"+n:n}var n1=function(a){return a==null||a===!1||a===""},a1=function(a){var n,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!n1(c)&&(Array.isArray(c)&&c.isCss||ms(c)?s.push("".concat($v(l),":"),c,";"):Ro(c)?s.push.apply(s,Nc(Nc(["".concat(l," {")],a1(c),!1),["}"],!1)):s.push("".concat($v(l),": ").concat((n=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in ZE||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function bi(a,n,r,s){if(n1(a))return[];if(Lh(a))return[".".concat(a.styledComponentId)];if(ms(a)){if(!ms(c=a)||c.prototype&&c.prototype.isReactComponent||!n)return[a];var l=a(n);return bi(l,n,r,s)}var c;return a instanceof C2?r?(a.inject(r,s),[a.getName(s)]):[a]:Ro(a)?a1(a):Array.isArray(a)?Array.prototype.concat.apply(Vc,a.map(function(d){return bi(d,n,r,s)})):[a.toString()]}function N2(a){for(var n=0;n<a.length;n+=1){var r=a[n];if(ms(r)&&!Lh(r))return!1}return!0}var O2=Fb(Hc),j2=(function(){function a(n,r,s){this.rules=n,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&N2(n),this.componentId=r,this.baseHash=ss(O2,r),this.baseStyle=s,Wb.registerId(r)}return a.prototype.generateAndInjectStyles=function(n,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=mi(l,this.staticRulesId);else{var c=Lv(bi(this.rules,n,r,s)),d=Kf(ss(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,d)){var h=s(c,".".concat(d),void 0,this.componentId);r.insertRules(this.componentId,d,h)}l=mi(l,d),this.staticRulesId=d}else{for(var m=ss(this.baseHash,s.hash),y="",v=0;v<this.rules.length;v++){var b=this.rules[v];if(typeof b=="string")y+=b;else if(b){var x=Lv(bi(b,n,r,s));m=ss(m,x+v),y+=x}}if(y){var E=Kf(m>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,s(y,".".concat(E),void 0,this.componentId)),l=mi(l,E)}}return l},a})(),r1=_a.createContext(void 0);r1.Consumer;var Tf={};function A2(a,n,r){var s=Lh(a),l=a,c=!Cf(a),d=n.attrs,h=d===void 0?Vc:d,m=n.componentId,y=m===void 0?(function(Y,he){var ge=typeof Y!="string"?"sc":_v(Y);Tf[ge]=(Tf[ge]||0)+1;var G="".concat(ge,"-").concat(e2(Hc+ge+Tf[ge]));return he?"".concat(he,"-").concat(G):G})(n.displayName,n.parentComponentId):m,v=n.displayName,b=v===void 0?(function(Y){return Cf(Y)?"styled.".concat(Y):"Styled(".concat(t2(Y),")")})(a):v,x=n.displayName&&n.componentId?"".concat(_v(n.displayName),"-").concat(n.componentId):n.componentId||y,E=s&&l.attrs?l.attrs.concat(h).filter(Boolean):h,N=n.shouldForwardProp;if(s&&l.shouldForwardProp){var F=l.shouldForwardProp;if(n.shouldForwardProp){var H=n.shouldForwardProp;N=function(Y,he){return F(Y,he)&&H(Y,he)}}else N=F}var K=new j2(r,x,s?l.componentStyle:void 0);function X(Y,he){return(function(ge,G,de){var ne=ge.attrs,pe=ge.componentStyle,Ie=ge.defaultProps,ze=ge.foldedComponentIds,ae=ge.styledComponentId,ke=ge.target,He=_a.useContext(r1),U=Iv(),W=ge.shouldForwardProp||U.shouldForwardProp,ce=KE(G,He,Ie)||ps,je=(function(le,ve,Ae){for(var Qe,Ze=Yn(Yn({},ve),{className:void 0,theme:Ae}),Rt=0;Rt<le.length;Rt+=1){var $t=ms(Qe=le[Rt])?Qe(Ze):Qe;for(var _t in $t)Ze[_t]=_t==="className"?mi(Ze[_t],$t[_t]):_t==="style"?Yn(Yn({},Ze[_t]),$t[_t]):$t[_t]}return ve.className&&(Ze.className=mi(Ze.className,ve.className)),Ze})(ne,G,ce),B=je.as||ke,S={};for(var L in je)je[L]===void 0||L[0]==="$"||L==="as"||L==="theme"&&je.theme===ce||(L==="forwardedAs"?S.as=je.forwardedAs:W&&!W(L,B)||(S[L]=je[L]));var j=(function(le,ve){var Ae=Iv(),Qe=le.generateAndInjectStyles(ve,Ae.styleSheet,Ae.stylis);return Qe})(pe,je),M=mi(ze,ae);return j&&(M+=" "+j),je.className&&(M+=" "+je.className),S[Cf(B)&&!Yb.has(B)?"class":"className"]=M,de&&(S.ref=de),k.createElement(B,S)})(R,Y,he)}X.displayName=b;var R=_a.forwardRef(X);return R.attrs=E,R.componentStyle=K,R.displayName=b,R.shouldForwardProp=N,R.foldedComponentIds=s?mi(l.foldedComponentIds,l.styledComponentId):"",R.styledComponentId=x,R.target=s?l.target:a,Object.defineProperty(R,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Y){this._foldedDefaultProps=s?(function(he){for(var ge=[],G=1;G<arguments.length;G++)ge[G-1]=arguments[G];for(var de=0,ne=ge;de<ne.length;de++)Qf(he,ne[de],!0);return he})({},l.defaultProps,Y):Y}}),Bh(R,function(){return".".concat(R.styledComponentId)}),c&&Qb(R,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),R}function Hv(a,n){for(var r=[a[0]],s=0,l=n.length;s<l;s+=1)r.push(n[s],a[s+1]);return r}var Vv=function(a){return Object.assign(a,{isCss:!0})};function Uh(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(ms(a)||Ro(a))return Vv(bi(Hv(Vc,Nc([a],n,!0))));var s=a;return n.length===0&&s.length===1&&typeof s[0]=="string"?bi(s):Vv(bi(Hv(s,n)))}function Wf(a,n,r){if(r===void 0&&(r=ps),!n)throw Bo(1,n);var s=function(l){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return a(n,r,Uh.apply(void 0,Nc([l],c,!1)))};return s.attrs=function(l){return Wf(a,n,Yn(Yn({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return Wf(a,n,Yn(Yn({},r),l))},s}var i1=function(a){return Wf(A2,a)},Dn=i1;Yb.forEach(function(a){Dn[a]=i1(a)});function wi(){return wi=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},wi.apply(null,arguments)}function _2(a,n){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(n.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function Ih(a,n){if(a==null)return{};var r,s,l=_2(a,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function D2(a){var n=a?.createRoot,r=new WeakMap;function s(d){var h=r.get(d);if(h)return h;var m=document.createElement("span");return d.appendChild(m),r.set(d,m),m}function l(d){var h=r.get(d);h&&(h.remove(),r.delete(d))}if(n){var c=new WeakMap;return{mount:function(h,m){var y,v=s(m),b=c.get(v);return b||(b=n(v),c.set(v,b)),b.render(h),(y=v.firstElementChild)!==null&&y!==void 0?y:v},unmount:function(h){var m=s(h),y=c.get(m);y&&(y.unmount(),c.delete(m)),l(h)}}}return{mount:function(h,m){var y=s(m);if("render"in Wg&&typeof Yr.render=="function"){var v=Yr.render(h,y);return v||y}throw new Error("ReactDOM.render is not available")},unmount:function(h){var m=s(h);if("unmountComponentAtNode"in Wg&&typeof Yr.unmountComponentAtNode=="function")Yr.unmountComponentAtNode(m);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(h)}}}function M2(a){var n=a.children,r=a.rendered;return k.useEffect(function(){r()}),n}function R2(){var a=k.useRef(!1);return k.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){Yr.flushSync(r)}):r()}}}var s1=k.createContext({start:null,end:null,path:null});function z2(a){var n=a.children,r=k.useState(null),s=Ln(r,2),l=s[0],c=s[1],d=k.useState(null),h=Ln(d,2),m=h[0],y=h[1],v=k.useState(null),b=Ln(v,2),x=b[0],E=b[1],N="x"in a.start?a.start:l,F="x"in a.end?a.end:m,H=R2();return k.useEffect(function(){var K=typeof a.start=="function"&&a.start(function(R){H.apply(function(){c(R)})}),X=typeof a.end=="function"&&a.end(function(R){H.apply(function(){y(R)})});return function(){K&&K(),X&&X()}},[]),k.useEffect(function(){N&&F&&a.path(N,F).then(function(K){H.apply(function(){E(K)})})},[N,F]),k.createElement(s1.Provider,{value:{start:N,end:F,path:x}},n)}function o1(){return k.useContext(s1)}var qv,Gv,L2=Dn.svg(qv||(qv=Tn([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),B2=Dn.path(Gv||(Gv=Tn([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function l1(a){var n=o1(),r=n.path;return r?k.createElement(L2,{"data-testid":"connection"},k.createElement(B2,{styles:a.styles,d:r})):null}function U2(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=I2(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function I2(a,n){if(a){if(typeof a=="string")return Yv(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yv(a,n):void 0}}function Yv(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function $2(a){for(var n=new a.constructor(a.type),r=n;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=U2(s),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,h=n[d];typeof h!="function"&&Object.defineProperty(n,d,{value:a[d]})}}catch(m){l.e(m)}finally{l.f()}}return n}var H2="__reactContainer$";function V2(a){for(var n=a;n;){if(n._reactRootContainer||Object.keys(n).some(function(r){return r.startsWith(H2)}))return n;n=n.parentElement}}function Pv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Fv(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Pv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Pv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function c1(a,n){return{start:function(s){var l=Fv({},n(s));function c(h){var m=Fv({},n(h)),y=m.x-l.x,v=m.y-l.y;l=m,a(y,v)}function d(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d)}}}function q2(a,n){k.useEffect(function(){var r=function(c){if(!n){var d=V2(c.target),h=k.version.startsWith("16")?document:d;h&&(c.stopPropagation(),h.dispatchEvent($2(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,n])}var Zv,G2=Dn.input(Zv||(Zv=Tn([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function eh(a){var n=k.useState(a.data.value),r=Ln(n,2),s=r[0],l=r[1],c=k.useRef(null);return q2(c),k.useEffect(function(){l(a.data.value)},[a.data.value]),k.createElement(G2,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(h){var m=a.data.type==="number"?+h.target.value:h.target.value;l(m),a.data.setValue(m)},styles:a.styles})}var th="rgba(110,136,255,0.8)",u1="#ffd92c",Ia=24,pr=6,d1="#96b38a",f1=180,Y2=Object.freeze({__proto__:null,$nodecolor:th,$nodecolorselected:u1,$socketsize:Ia,$socketmargin:pr,$socketcolor:d1,$nodewidth:f1}),P2=["init","unmount"];function $h(a){var n=a.init,r=a.unmount,s=Ih(a,P2),l=k.useRef(null);return k.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),k.useEffect(function(){l.current&&n(l.current)}),k.createElement("span",wi({},s,{ref:l}))}var F2=["name","emit","payload"];function nh(a){var n=a.name,r=a.emit,s=a.payload,l=Ih(a,F2);return k.createElement($h,wi({},l,{className:n,init:function(d){r({type:"render",data:{type:"control",element:d,payload:s}})},unmount:function(d){r({type:"unmount",data:{element:d}})}}))}var Z2=["name","emit","nodeId","side","socketKey","payload"];function ah(a){var n=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,d=a.payload,h=Ih(a,Z2);return k.createElement($h,wi({},h,{className:n,init:function(y){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:y,payload:d}})},unmount:function(y){r({type:"unmount",data:{element:y}})}}))}var Xv,Kv,h1=Dn.div(Xv||(Xv=Tn([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),th,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(f1,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},th,function(a){return a.selected&&Uh(Kv||(Kv=Tn([`
        background: `,`;
        border-color: #e3c000;
    `])),u1)},Ia/2+pr,Ia/2+pr,pr,Ia,Ia+2*pr,pr,Ia/2+pr,function(a){var n;return(n=a.styles)===null||n===void 0?void 0:n.call(a,a)});function Nf(a){a.sort(function(n,r){var s,l,c=((s=n[1])===null||s===void 0?void 0:s.index)||0,d=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-d})}function p1(a){var n=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,d=c.id,h=c.label,m=c.width,y=c.height;return Nf(n),Nf(r),Nf(s),k.createElement(h1,{selected:l,width:m,height:y,styles:a.styles,"data-testid":"node"},k.createElement("div",{className:"title","data-testid":"title"},h),r.map(function(v){var b=Ln(v,2),x=b[0],E=b[1];return E&&k.createElement("div",{className:"output",key:x,"data-testid":"output-".concat(x)},k.createElement("div",{className:"output-title","data-testid":"output-title"},E.label),k.createElement(ah,{name:"output-socket",side:"output",socketKey:x,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"output-socket"}))}),s.map(function(v){var b=Ln(v,2),x=b[0],E=b[1];return E?k.createElement(nh,{key:x,name:"control",emit:a.emit,payload:E,"data-testid":"control-".concat(x)}):null}),n.map(function(v){var b=Ln(v,2),x=b[0],E=b[1];return E&&k.createElement("div",{className:"input",key:x,"data-testid":"input-".concat(x)},k.createElement(ah,{name:"input-socket",side:"input",socketKey:x,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"input-socket"}),E&&(!E.control||!E.showControl)&&k.createElement("div",{className:"input-title","data-testid":"input-title"},E.label),E.control&&E.showControl&&k.createElement(nh,{key:x,name:"input-control",emit:a.emit,payload:E.control,"data-testid":"input-control"}))}))}var Qv,Jv,m1=Dn.div(Qv||(Qv=Tn([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),Ia/2,Ia,Ia,d1),X2=Dn.div(Jv||(Jv=Tn([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(Ia+pr*2)/2,pr,m1);function y1(a){return k.createElement(X2,null,k.createElement(m1,{title:a.data.name}))}function K2(a){var n=typeof a?.socketPositionWatcher>"u"?jE():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,d=r.control;return{attach:function(m){n.attach(m)},render:function(m,y){if(m.data.type==="node"){var v=y.parentScope(),b=s?s(m.data):p1;return b&&k.createElement(b,{data:m.data.payload,emit:function(he){return void v.emit(he)}})}else if(m.data.type==="connection"){var x=l?l(m.data):l1,E=m.data.payload,N=E.sourceOutput,F=E.targetInput,H=E.source,K=E.target;return x&&k.createElement(z2,{start:m.data.start||function(Y){return n.listen(H,"output",N,Y)},end:m.data.end||function(Y){return n.listen(K,"input",F,Y)},path:(function(){var Y=at(Se.mark(function he(ge,G){var de,ne,pe,Ie,ze;return Se.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=1,y.emit({type:"connectionpath",data:{payload:E,points:[ge,G]}});case 1:if(de=ae.sent,de){ae.next=2;break}return ae.abrupt("return","");case 2:if(ne=de.data,pe=ne.path,Ie=ne.points,ze=.3,!(!pe&&Ie.length!==2)){ae.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(pe){ae.next=4;break}return ae.abrupt("return",E.isLoop?xE(Ie,ze,120):SE(Ie,ze));case 4:return ae.abrupt("return",pe);case 5:case"end":return ae.stop()}},he)}));return function(he,ge){return Y.apply(this,arguments)}})()},k.createElement(x,{data:m.data.payload}))}else if(m.data.type==="socket"){var X=c?c(m.data):y1;return X&&m.data.payload&&k.createElement(X,{data:m.data.payload})}else if(m.data.type==="control"){var R=d&&m.data.payload?d(m.data):m.data.payload instanceof Pt.InputControl?eh:null;return R&&k.createElement(R,{data:m.data.payload})}}}}var Q2=Object.freeze({__proto__:null,vars:Y2,setup:K2,Connection:l1,useConnection:o1,Control:eh,InputControl:eh,Node:p1,NodeStyles:h1,RefControl:nh,RefSocket:ah,Socket:y1});function g1(a,n){var r=k.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},n)};return k.useEffect(function(){return s},[]),[l,s]}var J2="rgba(110,136,255,0.8)",W2="rgba(130, 153, 255, 0.8)",eC="rgba(69, 103, 255, 0.8)",rc="5px",rh=120,Wv,Hh=Dn.div(Wv||(Wv=Tn([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),eC,J2,rc,rc,rc,rc,W2),e0,t0,n0,v1=Dn(Hh)(e0||(e0=Tn([`
    `,`
`])),function(a){return a.hasSubitems&&Uh(t0||(t0=Tn([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),b1=Dn.div(n0||(n0=Tn([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),rh);function w1(a){var n,r,s,l,c=k.useState(!1),d=Ln(c,2),h=d[0],m=d[1],y=k.useCallback(function(){m(!1)},[m]),v=g1(y,a.delay),b=Ln(v,2),x=b[0],E=b[1],N=((n=a.components)===null||n===void 0||(r=n.item)===null||r===void 0?void 0:r.call(n,a.data))||v1,F=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||b1;return k.createElement(N,{onClick:function(K){K.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(K){K.stopPropagation()},onPointerOver:function(){E(),m(!0)},onPointerLeave:function(){x&&x()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&h&&k.createElement(F,null,a.data.subitems.map(function(H){return k.createElement(w1,{key:H.key,data:H,delay:a.delay,hide:a.hide,components:a.components},H.label)})))}var a0,S1=Dn.input(a0||(a0=Tn([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function tC(a){var n=a.component||S1;return k.createElement(n,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var r0,x1=Dn.div(r0||(r0=Tn([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),rh,rh/2);function nC(a){var n,r,s,l,c,d,h=g1(a.onHide,a.delay),m=Ln(h,2),y=m[0],v=m[1],b=k.useState(""),x=Ln(b,2),E=x[0],N=x[1],F=new RegExp(E,"i"),H=a.items.filter(function(R){return R.label.match(F)}),K=((n=a.components)===null||n===void 0||(r=n.main)===null||r===void 0?void 0:r.call(n))||x1,X=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||Hh;return k.createElement(K,{onMouseOver:function(){v()},onMouseLeave:function(){y?.()},onWheel:function(Y){Y.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&k.createElement(X,null,k.createElement(tC,{value:E,onChange:N,component:(c=a.components)===null||c===void 0||(d=c.search)===null||d===void 0?void 0:d.call(c)})),H.map(function(R){return k.createElement(w1,{key:R.key,data:R,delay:a.delay,hide:a.onHide,components:a.components},R.label)}))}function aC(a){var n=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return k.createElement(nC,{items:s.data.items,delay:n,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var rC=Object.freeze({__proto__:null,setup:aC,Item:v1,Subitems:b1,Menu:x1,Search:S1,Common:Hh}),ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iC=typeof ic=="object"&&ic&&ic.Object===Object&&ic,sC=typeof self=="object"&&self&&self.Object===Object&&self;iC||sC||Function("return this")();function oC(){const a=k.useRef(!1);return k.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),k.useCallback(()=>a.current,[])}var i0={width:void 0,height:void 0};function lC(a){const{ref:n,box:r="content-box"}=a,[{width:s,height:l},c]=k.useState(i0),d=oC(),h=k.useRef({...i0}),m=k.useRef(void 0);return m.current=a.onResize,k.useEffect(()=>{if(!n.current||typeof window>"u"||!("ResizeObserver"in window))return;const y=new ResizeObserver(([v])=>{const b=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",x=s0(v,b,"inlineSize"),E=s0(v,b,"blockSize");if(h.current.width!==x||h.current.height!==E){const F={width:x,height:E};h.current.width=x,h.current.height=E,m.current?m.current(F):d()&&c(F)}});return y.observe(n.current,{box:r}),()=>{y.disconnect()}},[r,n,d]),{width:s,height:l}}function s0(a,n,r){return a[n]?Array.isArray(a[n])?a[n][0][r]:a[n][r]:n==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function $a(a){return"".concat(a,"px")}var o0,cC=Dn.div(o0||(o0=Tn([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function uC(a){return k.createElement(cC,{style:{left:$a(a.left),top:$a(a.top),width:$a(a.width),height:$a(a.height)},"data-testid":"minimap-node"})}var l0,dC=Dn.div(l0||(l0=Tn([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function fC(a){var n=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=c1(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return k.createElement(dC,{onPointerDown:s.start,style:{left:$a(n(a.left)),top:$a(n(a.top)),width:$a(n(a.width)),height:$a(n(a.height))},"data-testid":"minimap-viewport"})}var c0,hC=Dn.div(c0||(c0=Tn([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function pC(a){var n,r=k.useRef(null),s=lC({ref:r}),l=s.width,c=l===void 0?0:l,d=((n=r.current)===null||n===void 0?void 0:n.clientWidth)||c,h=k.useCallback(function(m){return m*d},[d]);return k.createElement(hC,{size:a.size,style:{width:$a(a.size*a.ratio),height:$a(a.size)},onPointerDown:function(y){y.stopPropagation(),y.preventDefault()},onDoubleClick:function(y){if(y.stopPropagation(),y.preventDefault(),!!r.current){var v=r.current.getBoundingClientRect(),b=(y.clientX-v.left)/(a.size*a.ratio),x=(y.clientY-v.top)/(a.size*a.ratio);a.point(b,x)}},ref:r,"data-testid":"minimap"},d?a.nodes.map(function(m,y){return k.createElement(uC,{key:y,left:h(m.left),top:h(m.top),width:h(m.width),height:h(m.height)})}):null,k.createElement(fC,wi({},a.viewport,{start:a.start,containerWidth:d,translate:a.translate})))}function mC(a){return{render:function(r){if(r.data.type==="minimap")return k.createElement(pC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var yC=Object.freeze({__proto__:null,setup:mC}),u0,jo=20,gC=Dn.div(u0||(u0=Tn([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),jo,jo,function(a){return a.selected?"#ffd92c":"steelblue"},jo);function vC(a){var n=c1(function(c,d){a.translate(c,d)},a.pointer),r=a.position,s=r.x,l=r.y;return k.createElement(gC,{onPointerDown:function(d){d.stopPropagation(),d.preventDefault(),n.start(d),a.pointerdown()},onContextMenu:function(d){d.stopPropagation(),d.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-jo/2,"px"),left:"".concat(s-jo/2,"px")},"data-testid":"pin"})}function bC(a){function n(r,s){return k.createElement(k.Fragment,null,r.pins.map(function(l){return k.createElement(vC,wi({},l,{key:l.id,contextMenu:function(){var d;a==null||(d=a.contextMenu)===null||d===void 0||d.call(a,l.id)},translate:function(d,h){var m;a==null||(m=a.translate)===null||m===void 0||m.call(a,l.id,d,h)},pointerdown:function(){var d;a==null||(d=a.pointerdown)===null||d===void 0||d.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,d=l.parentScope(Lo);if(c.type==="reroute-pins")return n(c.data,function(){return d.area.pointer})}}}var wC=Object.freeze({__proto__:null,setup:bC}),Of=Object.freeze({__proto__:null,classic:Q2,contextMenu:rC,minimap:yC,reroute:wC});function SC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=xC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function xC(a,n){if(a){if(typeof a=="string")return d0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d0(a,n):void 0}}function d0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}function f0(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function sc(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?f0(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):f0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function kC(a,n,r){return n=Mt(n),Ga(a,k1()?Reflect.construct(n,r||[],Mt(a).constructor):n.apply(a,r))}function k1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k1=function(){return!!a})()}function EC(a,n,r,s){var l=Mo(Mt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var CC=(function(a){function n(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l[0];return ct(this,n),r=kC(this,n,["react-render"]),Be(r,"presets",[]),r.renderer=D2({createRoot:d?.createRoot}),r.addPipe(function(h){if(!h||Cn(h)!=="object"||!("type"in h))return h;if(h.type==="unmount")r.unmount(h.data.element);else if(h.type==="render"){if("filled"in h.data&&h.data.filled)return h;if(r.mount(h.data.element,h))return sc(sc({},h),{},{data:sc(sc({},h.data),{},{filled:!0})})}return h}),r}return Pn(n,a),ut(n,[{key:"setParent",value:function(s){var l=this;EC(n,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),d=SC(this.presets),h;try{for(d.s();!(h=d.n()).done;){var m=h.value,y=m.render(l,this);if(y){var v=k.createElement(M2,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},y);return this.renderer.mount(v,s),!0}}}catch(b){d.e(b)}finally{d.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(gs);function TC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function E1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E1=function(){return!!a})()}function NC(a,n,r){if(E1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,n);var l=new(a.bind.apply(a,s));return r&&Do(l,r.prototype),l}function ih(a){var n=typeof Map=="function"?new Map:void 0;return ih=function(s){if(s===null||!TC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(s))return n.get(s);n.set(s,l)}function l(){return NC(s,arguments,Mt(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Do(l,s)},ih(a)}function OC(a,n){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=jC(a))||n){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(y){throw y},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,h=!1;return{s:function(){r=r.call(a)},n:function(){var y=r.next();return d=y.done,y},e:function(y){h=!0,c=y},f:function(){try{d||r.return==null||r.return()}finally{if(h)throw c}}}}function jC(a,n){if(a){if(typeof a=="string")return h0(a,n);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h0(a,n):void 0}}function h0(a,n){(n==null||n>a.length)&&(n=a.length);for(var r=0,s=Array(n);r<n;r++)s[r]=a[r];return s}var AC=(function(){function a(n){ct(this,a),Be(this,"setups",new Map),this.editor=n}return ut(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var n=at(Se.mark(function s(l){var c=this,d,h,m,y,v,b,x,E,N,F,H,K;return Se.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(d=this.setups.get(l),d){R.next=3;break}throw new Error("node is not initialized");case 3:return h=d.inputs(),m=this.editor.getConnections().filter(function(Y){return Y.target===l&&h.includes(Y.targetInput)}),y={},R.next=8,Promise.all(m.map((function(){var Y=at(Se.mark(function he(ge){return Se.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.t0=ge,de.next=3,c.fetch(ge.source);case 3:return de.t1=de.sent,de.abrupt("return",{c:de.t0,sourceData:de.t1});case 5:case"end":return de.stop()}},he)}));return function(he){return Y.apply(this,arguments)}})()));case 8:v=R.sent,b=OC(v);try{for(b.s();!(x=b.n()).done;)E=x.value,N=E.c,F=E.sourceData,H=y[N.targetInput]?y[N.targetInput]:[],K=y,K[N.targetInput]=[].concat(vs(H),[F[N.sourceOutput]])}catch(Y){b.e(Y)}finally{b.f()}return R.abrupt("return",y);case 12:case"end":return R.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var n=at(Se.mark(function s(l){var c=this,d,h,m,y;return Se.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=this.setups.get(l),d){b.next=3;break}throw new Error("node is not initialized");case 3:return h=d.outputs(),b.next=6,d.data(function(){return c.fetchInputs(l)});case 6:if(m=b.sent,y=Object.keys(m),h.every(function(x){return y.includes(x)})){b.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(h.join('", "'),'". Got "').concat(y.join('", "'),'"'));case 10:return b.abrupt("return",m);case 11:case"end":return b.stop()}},s,this)}));function r(s){return n.apply(this,arguments)}return r})()}])})(),_C=(function(){function a(n){ct(this,a),Be(this,"cache",new Map),this.onDelete=n}return ut(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function DC(a,n,r){return n=Mt(n),Ga(a,C1()?Reflect.construct(n,r||[],Mt(a).constructor):n.apply(a,r))}function C1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C1=function(){return!!a})()}var p0=(function(a){function n(){return ct(this,n),DC(this,n,["cancelled"])}return Pn(n,a),ut(n)})(ih(Error));function MC(){var a=!1;function n(m){if(a)throw new p0;return m}for(var r,s=new Promise(function(m,y){r=y,m()}),l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=c.reduce(function(m,y){var v=m.then(y).then(n);return v},s);return h.cancel=function(){a||r(new p0),a=!0},h}function RC(a,n,r){return n=Mt(n),Ga(a,T1()?Reflect.construct(n,r||[],Mt(a).constructor):n.apply(a,r))}function T1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T1=function(){return!!a})()}function zC(a,n,r,s){var l=Mo(Mt(a.prototype),n,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var LC=(function(a){function n(r){var s;return ct(this,n),s=RC(this,n,["dataflow-engine"]),Be(s,"cache",new _C(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return Pn(n,a),ut(n,[{key:"setParent",value:function(s){zC(n,"setParent",this)([s]),this.editor=this.parentScope(Xr),this.dataflow=new AC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var d=at(Se.mark(function m(y){var v,b;return Se.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(v=l.cache.get(s.id),!v){E.next=3;break}return E.abrupt("return",v);case 3:return b=MC(function(){return y()},function(N){return s.data(N)}),l.cache.add(s.id,b),E.abrupt("return",b);case 6:case"end":return E.stop()}},m)}));function h(m){return d.apply(this,arguments)}return h})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var d=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(h){return h.source===s&&d.includes(h.sourceOutput)}).forEach(function(h){l.reset(h.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=at(Se.mark(function l(c){var d;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=Cn(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetchInputs(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=at(Se.mark(function l(c){var d;return Se.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=Cn(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetch(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(gs);const BC=!1,Vh=(...a)=>BC,m0=Pt.Socket.canConnect;Pt.Socket.canConnect=function(a,n){return Vh(`[Socket Check] ${a.name} <-> ${n.name}`),m0&&m0(a,n)||a.name==="any"||n.name==="any"?!0:a.name===n.name};Pt.Socket.prototype.canConnectTo=function(a){return Vh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Pt.Socket.canConnect(this,a)};const N1={boolean:new Pt.Socket("boolean"),number:new Pt.Socket("number"),object:new Pt.Socket("object"),lightInfo:new Pt.Socket("light_info"),any:new Pt.Socket("any")};Object.values(N1).forEach(a=>{a.canConnectTo=function(n){return Vh(`[Socket Instance Direct] ${this.name} -> ${n.name}`),this.name===n.name||this.name==="any"||n.name==="any"}});let bo=null;function qc(){if(bo!==null)return bo;const n=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return n?bo=n[1]:bo="",bo}function Gn(a){const n=qc(),r=a.startsWith("/")?a:"/"+a;return n+r}qc();const yi="t2app-pin",_c="t2app-pin-remember",O1=(a,n)=>{try{return a.getItem(n)}catch{return null}},oc=(a,n,r)=>{try{return a.setItem(n,r),!0}catch{return!1}},Ao=(a,n)=>{try{return a.removeItem(n),!0}catch{return!1}},Dc=()=>O1(localStorage,_c)==="true",ls=()=>{const n=Dc()?localStorage:sessionStorage;return(O1(n,yi)||"").trim()||null},j1=()=>{Ao(sessionStorage,yi),Ao(localStorage,yi),Ao(localStorage,_c),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},y0=(a,{remember:n}={})=>{const r=(a||"").toString().trim(),s=typeof n=="boolean"?n:Dc();if(!r){j1(),typeof n=="boolean"&&oc(localStorage,_c,n?"true":"false");return}oc(localStorage,_c,s?"true":"false"),s?(oc(localStorage,yi,r),Ao(sessionStorage,yi)):(oc(sessionStorage,yi,r),Ao(localStorage,yi)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},is=async(a,n={})=>{const r=typeof a=="string"?Gn(a):a;return fetch(r,n)},qn=async(a,n={})=>{const r=ls(),s=typeof a=="string"?Gn(a):a;if(!r)return fetch(s,n);const l=new Headers(n.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...n,headers:l})},g0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function UC(){const[a,n]=k.useState([]),[r,s]=k.useState(!1),[l,c]=k.useState(null),[d,h]=k.useState(null),[m,y]=k.useState(5e3),[v,b]=k.useState(null),x=k.useCallback(async()=>{s(!0),c(null);try{const K=await is("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:m})});if(!K.ok){const R=await K.json();throw new Error(R.error||`Scan failed (${K.status})`)}const X=await K.json();n(X.devices||[]),h(new Date)}catch(K){console.error("[Discovery] Scan error:",K),c(K.message)}finally{s(!1)}},[m]),E=K=>g0[K]||g0.generic,N=K=>K?new Date(K).toLocaleTimeString():"",H=(K=>{const X={};for(const R of K){const Y=R.type||"generic";X[Y]||(X[Y]=[]),X[Y].push(R)}return X})(a);return p.jsxs("div",{className:"discovery-panel",children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),p.jsxs("select",{value:m,onChange:K=>y(Number(K.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[p.jsx("option",{value:3e3,children:"3 seconds"}),p.jsx("option",{value:5e3,children:"5 seconds"}),p.jsx("option",{value:1e4,children:"10 seconds"}),p.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),p.jsx("button",{onClick:x,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):p.jsx(p.Fragment,{children:" Scan Network"})})]}),l&&p.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),d&&p.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",d.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&d&&p.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[p.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),p.jsx("div",{children:"No devices found on your network."}),p.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(H).map(([K,X])=>{const R=E(K);return p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[p.jsx("span",{style:{fontSize:"16px"},children:R.icon}),p.jsx("span",{style:{color:R.color,fontSize:"13px",fontWeight:500},children:R.label}),p.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:X.length})]}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:X.map(Y=>p.jsxs("div",{style:{background:v===Y.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>b(v===Y.id?null:Y.id),children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:Y.name}),p.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[Y.ip,":",Y.port]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Y.configured?p.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):p.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),p.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:v===Y.id?"":""})]})]}),v===Y.id&&p.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[p.jsx("span",{children:"Host:"}),p.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:Y.host||"N/A"}),p.jsx("span",{children:"Source:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:Y.source==="mdns"?"mDNS/Bonjour":Y.source==="udp"?"UDP Broadcast":Y.source}),p.jsx("span",{children:"Discovered:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:N(Y.discoveredAt)}),Y.capabilities&&Y.capabilities.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Capabilities:"}),p.jsx("span",{style:{color:"#5fb3b3"},children:Y.capabilities.join(", ")})]}),Y.model&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Model:"}),p.jsx("span",{style:{color:"#c5cdd3"},children:Y.model})]})]}),p.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[p.jsx("button",{onClick:he=>{he.stopPropagation(),window.open(`http://${Y.ip}:${Y.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),p.jsx("button",{onClick:he=>{he.stopPropagation(),navigator.clipboard.writeText(Y.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},Y.id))})]},K)}),p.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const lc=[{key:"primary",label:"Primary Accent Color",type:"color",default:"#5fb3b3"},{key:"background",label:"Node Background",type:"color",default:"#1e2428"},{key:"surface",label:"Node Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text Color",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"},{key:"success",label:"Success Color",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning Color",type:"color",default:"#d4a054"},{key:"error",label:"Error Color",type:"color",default:"#c75f5f"},{key:"borderOpacity",label:"Border Opacity (%)",type:"range",min:0,max:100,default:25}],IC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",testable:"ambient",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],v0=a=>{try{const n=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},b0=a=>{try{const n=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function $C({isOpen:a,onClose:n}){const[r,s]=k.useState({}),[l,c]=k.useState(!0),[d,h]=k.useState(!1),[m,y]=k.useState(null),[v,b]=k.useState(null),[x,E]=k.useState({}),[N,F]=k.useState({}),[H,K]=k.useState({}),[X,R]=k.useState({}),Y=k.useRef(null),[he,ge]=k.useState(""),[G,de]=k.useState(()=>Dc()),[ne,pe]=k.useState(()=>!!ls()),[Ie,ze]=k.useState(!1),[ae,ke]=k.useState(()=>{try{const A=localStorage.getItem("t2theme-overrides"),z=A?JSON.parse(A):{},ue={};return lc.forEach(we=>{ue[we.key]=we.default}),{...ue,...z}}catch{const A={};return lc.forEach(z=>{A[z.key]=z.default}),A}}),[He,U]=k.useState(!1),W={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[ce,je]=k.useState(()=>{try{const A=localStorage.getItem("t2category-overrides"),z=A?JSON.parse(A):{},ue={};for(const[we,De]of Object.entries(W))ue[we]={...De,...z[we]||{}};return ue}catch{return{...W}}}),[B,S]=k.useState(!1),L={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},j={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[M,le]=k.useState(()=>{try{const A=localStorage.getItem("t2socket-colors"),z=A?JSON.parse(A):{},ue={};for(const[we,De]of Object.entries(L))ue[we]={...De,...z[we]||{}};return ue}catch{return{...L}}}),[ve,Ae]=k.useState(!1),[Qe,Ze]=k.useState(!1),[Rt,$t]=k.useState(null),[_t,Mn]=k.useState(!1),[pn,dn]=k.useState(!1);k.useEffect(()=>{a&&(Rn(),F({Security:!0,"Home Assistant":!0}),K({}),de(Dc()),pe(!!ls()),ge(""))},[a]);const Rn=async()=>{c(!0),y(null);try{const A=await qn("/api/settings");if(!A.ok)throw new Error("Failed to fetch settings");const ue=(await A.json()).settings||{};s(ue);try{const we=await qn("/api/config");if(we.ok){const De=await we.json();if(De.success){Mn(De.isAddon||!1),dn(!0);const mt=!ue.LOCATION_CITY,Fn=!ue.LOCATION_LATITUDE,Pe=!ue.LOCATION_LONGITUDE,zt=!ue.LOCATION_TIMEZONE;(mt||Fn||Pe||zt)&&(s(Tt=>({...Tt,...mt&&De.locationName?{LOCATION_CITY:De.locationName}:{},...Fn&&De.latitude?{LOCATION_LATITUDE:String(De.latitude)}:{},...Pe&&De.longitude?{LOCATION_LONGITUDE:String(De.longitude)}:{},...zt&&De.timezone?{LOCATION_TIMEZONE:De.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(we){console.log("[Settings] Could not fetch HA config for location auto-fill:",we.message)}}catch(A){y("Failed to load settings: "+A.message)}finally{c(!1)}},We=async()=>{h(!0),y(null),b(null);try{const A=await qn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!A.ok){const z=await A.json();throw new Error(z.error||"Failed to save settings")}b("Settings saved! Some changes may require a server restart."),setTimeout(()=>b(null),5e3)}catch(A){y("Failed to save: "+A.message)}finally{h(!1)}},V=(A,z)=>{s(ue=>({...ue,[A]:z}))},ie=async()=>{const A=r.LOCATION_CITY;if(!A||A.trim().length<2){$t("Please enter a city name first");return}Ze(!0),$t(null);try{const z=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(A)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!z.ok)throw new Error("Geocoding service unavailable");const ue=await z.json();if(ue.length===0){$t(`Could not find "${A}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const we=ue[0],De=parseFloat(we.lat).toFixed(4),mt=parseFloat(we.lon).toFixed(4),Fn=we.address?[we.address.city||we.address.town||we.address.village||we.name,we.address.state,we.address.country].filter(Boolean).join(", "):we.display_name.split(",").slice(0,3).join(",");let Pe="UTC";const zt=we.address?.state?.toLowerCase()||"",Tt=we.address?.country?.toLowerCase()||"";if(Tt.includes("portugal"))Pe="Europe/Lisbon";else if(Tt.includes("spain"))Pe="Europe/Madrid";else if(Tt.includes("france"))Pe="Europe/Paris";else if(Tt.includes("germany"))Pe="Europe/Berlin";else if(Tt.includes("italy"))Pe="Europe/Rome";else if(Tt.includes("united kingdom")||Tt.includes("ireland"))Pe="Europe/London";else if(Tt.includes("netherlands"))Pe="Europe/Amsterdam";else if(Tt.includes("belgium"))Pe="Europe/Brussels";else if(Tt.includes("australia"))Pe="Australia/Sydney";else if(Tt.includes("japan"))Pe="Asia/Tokyo";else if(Tt.includes("china"))Pe="Asia/Shanghai";else if(Tt.includes("india"))Pe="Asia/Kolkata";else if(Tt.includes("brazil"))Pe="America/Sao_Paulo";else if(Tt.includes("canada"))zt.includes("british columbia")?Pe="America/Vancouver":zt.includes("alberta")?Pe="America/Edmonton":zt.includes("saskatchewan")?Pe="America/Regina":zt.includes("manitoba")?Pe="America/Winnipeg":zt.includes("ontario")?Pe="America/Toronto":zt.includes("quebec")?Pe="America/Montreal":Pe="America/Toronto";else if(Tt.includes("united states")||Tt.includes("usa"))zt.includes("hawaii")?Pe="Pacific/Honolulu":zt.includes("alaska")?Pe="America/Anchorage":["california","nevada","oregon","washington"].some(kt=>zt.includes(kt))?Pe="America/Los_Angeles":["arizona"].some(kt=>zt.includes(kt))?Pe="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(kt=>zt.includes(kt))?Pe="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(kt=>zt.includes(kt))?Pe="America/Chicago":Pe="America/New_York";else{const kt=parseFloat(mt);kt>=-125&&kt<-115?Pe="America/Los_Angeles":kt>=-115&&kt<-102?Pe="America/Denver":kt>=-102&&kt<-87?Pe="America/Chicago":kt>=-87&&kt<-67?Pe="America/New_York":kt>=-10&&kt<3?Pe="Europe/London":kt>=3&&kt<15?Pe="Europe/Paris":kt>=15&&kt<30&&(Pe="Europe/Berlin")}s(kt=>({...kt,LOCATION_CITY:Fn,LOCATION_LATITUDE:De,LOCATION_LONGITUDE:mt,LOCATION_TIMEZONE:Pe})),b(`Found: ${Fn} (${De}, ${mt})`),setTimeout(()=>b(null),5e3)}catch(z){$t("Search failed: "+z.message)}finally{Ze(!1)}},Q=(A,z)=>{ke(ue=>({...ue,[A]:z})),U(!0)},_e=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(ae)),b("Theme saved! Refresh the page to apply changes."),U(!1),setTimeout(()=>b(null),5e3)}catch(A){y("Failed to save theme: "+A.message)}},xe=()=>{const A={};lc.forEach(z=>{A[z.key]=z.default}),ke(A),localStorage.removeItem("t2theme-overrides"),b("Theme reset to defaults! Refresh the page to apply."),U(!1),setTimeout(()=>b(null),5e3)},se=(A,z,ue)=>{je(we=>({...we,[A]:{...we[A],[z]:ue}})),S(!0)},C=A=>{const z=parseInt(A.slice(1,3),16),ue=parseInt(A.slice(3,5),16),we=parseInt(A.slice(5,7),16);return`${z}, ${ue}, ${we}`},D={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},oe=A=>{const z=document.documentElement;for(const[ue,we]of Object.entries(A)){const De=D[ue];De&&(z.style.setProperty(`--node-${De}-color`,we.accent),z.style.setProperty(`--node-${De}-color-rgb`,C(we.accent)),we.background&&z.style.setProperty(`--node-${De}-bg`,we.background))}},fe=()=>{try{const A={};for(const[z,ue]of Object.entries(ce)){const we=W[z],De={};ue.accent!==we.accent&&(De.accent=ue.accent),ue.background!==we.background&&(De.background=ue.background),Object.keys(De).length>0&&(A[z]=De)}Object.keys(A).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(A)):localStorage.removeItem("t2category-overrides"),oe(ce),b("Category colors applied!"),S(!1),setTimeout(()=>b(null),3e3)}catch(A){y("Failed to save category colors: "+A.message)}},be=()=>{je({...W}),localStorage.removeItem("t2category-overrides"),oe(W),b("Category colors reset to defaults!"),S(!1),setTimeout(()=>b(null),3e3)},Oe=(A,z)=>{le(ue=>({...ue,[A]:{...ue[A],color:z}})),Ae(!0)},Ve=(A,z=20)=>{const ue=parseInt(A.slice(1),16),we=Math.max(0,(ue>>16)-Math.round(255*z/100)),De=Math.max(0,(ue>>8&255)-Math.round(255*z/100)),mt=Math.max(0,(ue&255)-Math.round(255*z/100));return`#${(1<<24|we<<16|De<<8|mt).toString(16).slice(1)}`},Xe=(A,z=20)=>{const ue=parseInt(A.slice(1),16),we=Math.min(255,(ue>>16)+Math.round(255*z/100)),De=Math.min(255,(ue>>8&255)+Math.round(255*z/100)),mt=Math.min(255,(ue&255)+Math.round(255*z/100));return`#${(1<<24|we<<16|De<<8|mt).toString(16).slice(1)}`},yt=A=>{const z=document.documentElement;for(const[ue,we]of Object.entries(A)){const De=j[ue];De&&(z.style.setProperty(`--socket-${De}-color`,we.color),z.style.setProperty(`--socket-${De}-dark`,Ve(we.color,15)),z.style.setProperty(`--socket-${De}-border`,Xe(we.color,20)),z.style.setProperty(`--socket-${De}-rgb`,C(we.color)))}},Ue=()=>{try{const A={};for(const[z,ue]of Object.entries(M)){const we=L[z];ue.color!==we.color&&(A[z]={color:ue.color})}Object.keys(A).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(A)):localStorage.removeItem("t2socket-colors"),yt(M),b("Socket colors applied!"),Ae(!1),setTimeout(()=>b(null),3e3)}catch(A){y("Failed to save socket colors: "+A.message)}},qe=()=>{le({...L}),localStorage.removeItem("t2socket-colors"),yt(L),b("Socket colors reset to defaults!"),Ae(!1),setTimeout(()=>b(null),3e3)},Me=A=>{F(z=>({...z,[A]:!z[A]}))},rt=A=>{E(z=>({...z,[A]:!z[A]}))},pt=async A=>{R(z=>({...z,[A]:!0})),K(z=>({...z,[A]:null}));try{const ue=await(await qn("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:A,settings:r})})).json();K(we=>({...we,[A]:{success:ue.success,message:ue.message||(ue.success?"Connection successful!":"Connection failed"),details:ue.details}}))}catch(z){K(ue=>({...ue,[A]:{success:!1,message:"Test failed: "+z.message}}))}finally{R(z=>({...z,[A]:!1}))}},Lt=()=>{const A={version:"1.0",timestamp:new Date().toISOString(),settings:r},z=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),ue=URL.createObjectURL(z),we=document.createElement("a");we.href=ue,we.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(ue),b("Settings exported successfully!"),setTimeout(()=>b(null),3e3)},Qt=A=>{const z=A.target.files?.[0];if(!z)return;const ue=new FileReader;ue.onload=we=>{try{const De=JSON.parse(we.target.result);if(!De.settings||typeof De.settings!="object")throw new Error("Invalid backup file format");s(mt=>({...mt,...De.settings})),b(`Imported ${Object.keys(De.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>b(null),5e3)}catch(De){y("Failed to import backup: "+De.message)}},ue.readAsText(z),A.target.value=""};return a?Th.createPortal(p.jsx("div",{className:"settings-modal-overlay",onClick:n,children:p.jsxs("div",{className:"settings-modal",onClick:A=>A.stopPropagation(),children:[p.jsxs("div",{className:"settings-header",children:[p.jsx("h2",{children:" Settings & API Keys"}),p.jsx("button",{className:"settings-close-btn",onClick:n,children:""})]}),p.jsx("div",{className:"settings-content",children:l?p.jsx("div",{className:"settings-loading",children:"Loading settings..."}):p.jsxs(p.Fragment,{children:[m&&p.jsx("div",{className:"settings-error",children:m}),v&&p.jsx("div",{className:"settings-success",children:v}),p.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>Me("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[p.jsxs("span",{children:[N.Security?"":""," Security (This Device)"]}),ne&&p.jsxs("span",{style:{fontSize:"10px",color:G?"#00c896":"#ffaa00"},children:[" ",G?"REMEMBERED":"SESSION"]})]}),N.Security&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),p.jsxs("div",{className:"settings-field",children:[p.jsxs("label",{className:"settings-label",children:["App PIN",p.jsx("button",{className:"settings-show-btn",onClick:()=>ze(A=>!A),type:"button",children:Ie?" Hide":" Show"})]}),p.jsx("input",{type:Ie?"text":"password",className:"settings-input",value:he,onChange:A=>ge(A.target.value),placeholder:ne?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[p.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[p.jsx("input",{type:"checkbox",checked:G,onChange:A=>{const z=A.target.checked;de(z);const ue=ls();ue&&y0(ue,{remember:z})}}),"Remember PIN on this device"]}),p.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[p.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const A=he.trim();A&&(y0(A,{remember:G}),pe(!0),ge(""),(async()=>{try{const z=await qn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:A}})});if(!z.ok){const ue=await z.text();throw new Error(ue||`HTTP ${z.status}`)}b("PIN saved (server + this device)."),setTimeout(()=>b(null),3e3)}catch{b("PIN saved on this device. Server PIN update failed."),setTimeout(()=>b(null),4e3)}finally{Rn()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!he.trim(),children:" Save PIN"}),p.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{j1(),pe(!1),ge(""),de(!1),b("PIN cleared."),setTimeout(()=>b(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!ne,children:"Clear"})]})]}),p.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:ne?`PIN is saved (${G?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),p.jsxs("div",{className:"settings-backup-section",children:[p.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),p.jsxs("div",{className:"settings-backup-buttons",children:[p.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:Lt,children:" Export Backup"}),p.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>Y.current?.click(),children:" Import Backup"}),p.jsx("input",{ref:Y,type:"file",accept:".json",style:{display:"none"},onChange:Qt})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>Me("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[p.jsxs("span",{children:[N.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&p.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),N.Performance&&p.jsxs("div",{className:"settings-category-content",children:[p.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",p.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),p.jsx("br",{}),p.jsx("br",{}),"Performance Mode disables:",p.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[p.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),p.jsx("li",{children:"Complex glow shadows"}),p.jsx("li",{children:"Infinite pulse/glow animations"}),p.jsx("li",{children:"Transition effects on nodes"})]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),p.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),p.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[p.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:A=>{window.setPerformanceMode?.(A.target.checked),F(z=>({...z}))},style:{opacity:0,width:0,height:0}}),p.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:p.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),p.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsx("div",{className:"settings-category-header",onClick:()=>Me("Discovery"),children:p.jsxs("span",{children:[N.Discovery?"":""," Network Device Discovery"]})}),N.Discovery&&p.jsx("div",{className:"settings-category-content",children:p.jsx(UC,{})})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>Me("Theme"),children:[p.jsxs("span",{children:[N.Theme?"":""," Node Theme Settings"]}),He&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.Theme&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Theme settings are stored locally. Refresh the page after saving to apply changes."}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:lc.map(A=>p.jsxs("div",{className:"settings-field",style:{marginBottom:"8px"},children:[p.jsx("label",{className:"settings-label",style:{fontSize:"10px"},children:A.label}),A.type==="color"?p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("input",{type:"color",value:ae[A.key]||A.default,onChange:z=>Q(A.key,z.target.value),style:{width:"40px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("input",{type:"text",value:ae[A.key]||A.default,onChange:z=>Q(A.key,z.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"11px"}})]}):A.type==="range"?p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("input",{type:"range",min:A.min,max:A.max,value:ae[A.key]||A.default,onChange:z=>Q(A.key,parseInt(z.target.value)),style:{flex:1}}),p.jsxs("span",{style:{minWidth:"35px",textAlign:"right",color:"#c5cdd3",fontSize:"12px"},children:[ae[A.key]||A.default,"%"]})]}):null]},A.key))}),p.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:ae.background,borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(ae.borderOpacity||25)/100})`},children:[p.jsx("div",{style:{fontSize:"10px",color:ae.textMuted,marginBottom:"8px"},children:"PREVIEW"}),p.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[p.jsx("div",{style:{padding:"8px 12px",background:ae.surface,color:ae.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),p.jsx("div",{style:{padding:"8px 12px",background:ae.surfaceLight,color:ae.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),p.jsx("span",{style:{color:ae.primary},children:"Primary"}),p.jsx("span",{style:{color:ae.success},children:"Success"}),p.jsx("span",{style:{color:ae.warning},children:"Warning"}),p.jsx("span",{style:{color:ae.error},children:"Error"})]})]}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:xe,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:_e,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Theme"})]})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>Me("CategoryColors"),children:[p.jsxs("span",{children:[N.CategoryColors?"":""," Category Accent Colors"]}),B&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.CategoryColors&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(ce).map(([A,z])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:z.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${z.accent}55`},children:[p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[p.jsx("input",{type:"color",value:z.accent,onChange:ue=>se(A,"accent",ue.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[p.jsx("input",{type:"color",value:z.background||"#0a0f14",onChange:ue=>se(A,"background",ue.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),p.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),p.jsx("div",{style:{flex:1,minWidth:0},children:p.jsxs("div",{style:{fontSize:"11px",color:z.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[z.icon," ",A]})})]},A))}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:be,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:fe,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>Me("SocketColors"),children:[p.jsxs("span",{children:[N.SocketColors?"":""," Socket Colors"]}),ve&&p.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),N.SocketColors&&p.jsxs("div",{className:"settings-category-content",children:[p.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),p.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[p.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[p.jsx("span",{children:""})," Preview Node"]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(M).slice(0,3).map(([A,z])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${z.color}, ${v0(z.color)})`,border:`2px solid ${b0(z.color)}`,boxShadow:`0 0 8px ${z.color}80`}}),p.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:A})]},A))}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(M).slice(3).map(([A,z])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:A}),p.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${z.color}, ${v0(z.color)})`,border:`2px solid ${b0(z.color)}`,boxShadow:`0 0 8px ${z.color}80`}})]},A))})]})]}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(M).map(([A,z])=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${z.color}55`},children:[p.jsx("input",{type:"color",value:z.color,onChange:ue=>Oe(A,ue.target.value),title:`${A} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),p.jsxs("div",{style:{flex:1,minWidth:0},children:[p.jsxs("div",{style:{fontSize:"12px",color:z.color,fontWeight:"600"},children:[z.icon," ",A]}),p.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:z.description})]})]},A))}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{className:"settings-btn-small",onClick:qe,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),p.jsx("button",{className:"settings-btn-small",onClick:Ue,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),IC.map(A=>p.jsxs("div",{className:"settings-category",children:[p.jsxs("div",{className:"settings-category-header",onClick:()=>Me(A.category),children:[p.jsxs("span",{children:[N[A.category]?"":"",A.icon," ",A.category]}),A.testable&&N[A.category]&&p.jsx("button",{className:`settings-test-btn ${H[A.testable]?.success?"success":H[A.testable]?.success===!1?"error":""}`,onClick:z=>{z.stopPropagation(),pt(A.testable)},disabled:X[A.testable],children:X[A.testable]?" Testing...":" Test Connection"})]}),N[A.category]&&p.jsxs("div",{className:"settings-category-content",children:[H[A.testable]&&p.jsxs("div",{className:`settings-test-result ${H[A.testable].success?"success":"error"}`,children:[H[A.testable].success?"":""," ",H[A.testable].message,H[A.testable].details&&p.jsx("div",{className:"settings-test-details",children:H[A.testable].details})]}),A.category==="Location"&&p.jsxs("div",{className:"settings-location-search",children:[pn&&_t&&p.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),p.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),p.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:z=>V("LOCATION_CITY",z.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:z=>{z.key==="Enter"&&ie()}}),p.jsx("button",{className:"settings-test-btn",onClick:ie,disabled:Qe,style:{whiteSpace:"nowrap"},children:Qe?" Searching...":" Search City"})]}),Rt&&p.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",Rt]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[p.jsxs("div",{className:"settings-field",children:[p.jsx("label",{className:"settings-label",children:"Latitude"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:z=>V("LOCATION_LATITUDE",z.target.value),placeholder:"32.7767"})]}),p.jsxs("div",{className:"settings-field",children:[p.jsx("label",{className:"settings-label",children:"Longitude"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:z=>V("LOCATION_LONGITUDE",z.target.value),placeholder:"-96.7970"})]})]}),p.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[p.jsx("label",{className:"settings-label",children:"Timezone"}),p.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:z=>V("LOCATION_TIMEZONE",z.target.value),placeholder:"America/Chicago"}),p.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),A.category!=="Location"&&A.settings.map(z=>p.jsxs("div",{className:"settings-field",children:[p.jsxs("label",{className:"settings-label",children:[z.label,z.isSecret&&p.jsx("button",{className:"settings-show-btn",onClick:()=>rt(z.key),type:"button",children:x[z.key]?" Hide":" Show"})]}),z.type==="select"?p.jsxs("select",{className:"settings-input",value:r[z.key]||"",onChange:ue=>V(z.key,ue.target.value),children:[p.jsx("option",{value:"",children:"Select..."}),z.options.map(ue=>p.jsx("option",{value:ue,children:ue},ue))]}):p.jsx("input",{type:z.isSecret&&!x[z.key]?"password":"text",className:"settings-input",value:r[z.key]||"",onChange:ue=>V(z.key,ue.target.value),placeholder:z.placeholder}),p.jsx("span",{className:"settings-key-hint",children:z.key})]},z.key))]})]},A.category))]})}),p.jsxs("div",{className:"settings-footer",children:[p.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:n,children:"Cancel"}),p.jsx("button",{className:"settings-btn settings-btn-primary",onClick:We,disabled:d||l,children:d?"Saving...":" Save Settings"})]})]})}),document.body):null}const HC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function VC({isOpen:a,onClose:n}){if(k.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,n]),!a)return null;const r=s=>{s.target===s.currentTarget&&n()};return Th.createPortal(p.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:p.jsxs("div",{className:"shortcuts-modal",children:[p.jsxs("div",{className:"shortcuts-modal-header",children:[p.jsx("h2",{children:" Keyboard Shortcuts"}),p.jsx("button",{className:"shortcuts-close-btn",onClick:n,children:" Close"})]}),p.jsx("div",{className:"shortcuts-modal-body",children:HC.map((s,l)=>p.jsxs("div",{className:"shortcuts-section",children:[p.jsx("h3",{children:s.category}),p.jsx("div",{className:"shortcuts-list",children:s.items.map((c,d)=>p.jsxs("div",{className:"shortcut-row",children:[p.jsx("div",{className:"shortcut-keys",children:c.keys.map((h,m)=>p.jsxs(_a.Fragment,{children:[p.jsx("kbd",{children:h}),m<c.keys.length-1&&p.jsx("span",{className:"key-separator",children:"+"})]},m))}),p.jsx("div",{className:"shortcut-action",children:c.action})]},d))})]},l))}),p.jsx("div",{className:"shortcuts-modal-footer",children:p.jsxs("p",{children:["Press ",p.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function qC({isExpanded:a,onToggle:n}){const[r,s]=k.useState([]),[l,c]=k.useState([]),[d,h]=k.useState(!0),[m,y]=k.useState(!1),[v,b]=k.useState(null),[x,E]=k.useState(!1),[N,F]=k.useState(null),[H,K]=k.useState(null),[X,R]=k.useState({username:"",password:"",name:""}),[Y,he]=k.useState({username:"",password:""}),[ge,G]=k.useState(""),[de,ne]=k.useState(5e3),[pe,Ie]=k.useState(null),ze=k.useRef(null),[ae,ke]=k.useState({});k.useEffect(()=>(He(),()=>{ze.current&&clearInterval(ze.current)}),[]),k.useEffect(()=>(ze.current&&clearInterval(ze.current),a&&r.length>0&&de>0&&(ze.current=setInterval(()=>{ke(j=>{const M={...j};return r.forEach(le=>{M[le.ip]=Date.now()}),M})},de)),()=>{ze.current&&clearInterval(ze.current)}),[a,r,de]);const He=async()=>{try{h(!0);const j=await is("/api/cameras");if(j.ok){const M=await j.json();s(M.cameras||[]),M.defaultCredentials&&he(le=>({...le,username:M.defaultCredentials.username||""}))}}catch{b("Failed to load cameras")}finally{h(!1)}},U=async()=>{y(!0),b(null);try{const j=await is("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(j.ok){const M=await j.json();if(M.found&&M.found.length>0){const le=r.map(Ae=>Ae.ip),ve=M.found.filter(Ae=>!le.includes(Ae.ip));c(ve),window.T2Toast&&(ve.length>0?window.T2Toast.success(`Found ${ve.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${M.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{b("Discovery failed")}finally{y(!1)}},W=async()=>{try{await is("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{b("Failed to save credentials")}},ce=async(j,M,le)=>{try{await is("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:j,name:M||`Camera ${j.split(".").pop()}`,username:le?.username||Y.username,password:le?.password||Y.password})}),c(ve=>ve.filter(Ae=>Ae.ip!==j)),F(null),G(""),await He(),window.T2Toast&&window.T2Toast.success(`Camera ${j} added!`)}catch{b("Failed to add camera")}},je=async j=>{try{await fetch(`/api/cameras/${j}`,{method:"DELETE"}),await He(),pe===j&&Ie(null)}catch{b("Failed to remove camera")}},B=async()=>{if(H)try{await is("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:H,name:X.name,username:X.username,password:X.password})}),K(null),ke(j=>({...j,[H]:Date.now()})),await He(),window.T2Toast&&window.T2Toast.success(`Camera ${H} updated!`)}catch{b("Failed to update camera")}},S={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},L=j=>{const M=ae[j]||Date.now();return`/api/cameras/snapshot/${j}?t=${M}`};return p.jsxs("div",{style:S.container,children:[p.jsxs("div",{style:S.header,onClick:n,children:[p.jsxs("div",{style:S.title,children:[p.jsx("span",{style:S.icon,children:""}),p.jsx("span",{children:"Cameras"}),r.length>0&&p.jsx("span",{style:S.badge,children:r.length})]}),p.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&p.jsxs("div",{style:S.content,children:[p.jsxs("div",{style:S.toolbar,children:[p.jsx("button",{style:{...S.btn,...m?S.btnActive:{}},onClick:U,disabled:m,children:m?" Scanning...":" Discover"}),p.jsx("button",{style:{...S.btn,...x?S.btnActive:{}},onClick:()=>E(!x),children:" Settings"}),p.jsxs("select",{style:S.refreshSelect,value:de,onChange:j=>ne(Number(j.target.value)),title:"Refresh interval",children:[p.jsx("option",{value:0,children:"Manual"}),p.jsx("option",{value:2e3,children:"2s"}),p.jsx("option",{value:5e3,children:"5s"}),p.jsx("option",{value:1e4,children:"10s"}),p.jsx("option",{value:3e4,children:"30s"})]})]}),x&&p.jsxs("div",{style:S.settings,children:[p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Select Camera to Configure"}),p.jsxs("select",{style:{...S.input,cursor:"pointer"},value:H||"",onChange:j=>{const M=j.target.value;if(!M){K(null),R({username:"",password:"",name:""});return}const le=r.find(ve=>ve.ip===M);le?(K(M),R({name:le.name||"",username:le.username||"",password:""})):(K(M),R({name:`Camera ${M.split(".").pop()}`,username:Y.username||"",password:Y.password||""}))},children:[p.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&p.jsx("optgroup",{label:" Configured Cameras",children:r.map(j=>p.jsxs("option",{value:j.ip,children:[j.name," (",j.ip,")"]},j.ip))}),l.length>0&&p.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(j=>p.jsxs("option",{value:j.ip,children:[j.ip," (Ports: ",j.ports.join(", "),")"]},j.ip))})]})]}),H&&p.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Camera Name"}),p.jsx("input",{type:"text",style:S.input,value:X.name,onChange:j=>R(M=>({...M,name:j.target.value})),placeholder:"Front Door"})]}),p.jsxs("div",{style:S.inputGroup,children:[p.jsx("label",{style:S.label,children:"Username"}),p.jsx("input",{type:"text",style:S.input,value:X.username,onChange:j=>R(M=>({...M,username:j.target.value})),placeholder:"admin"})]}),p.jsxs("div",{style:S.inputGroup,children:[p.jsxs("label",{style:S.label,children:["Password ",r.find(j=>j.ip===H)?"(leave blank to keep current)":""]}),p.jsx("input",{type:"password",style:S.input,value:X.password,onChange:j=>R(M=>({...M,password:j.target.value})),placeholder:""})]}),p.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:p.jsx("button",{style:{...S.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(M=>M.ip===H)?ce(H,X.name,X):B()},children:r.find(j=>j.ip===H)?" Save Changes":" Add Camera"})})]}),p.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[p.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("input",{type:"text",style:{...S.input,flex:1},value:Y.username,onChange:j=>he(M=>({...M,username:j.target.value})),placeholder:"Username"}),p.jsx("input",{type:"password",style:{...S.input,flex:1},value:Y.password,onChange:j=>he(M=>({...M,password:j.target.value})),placeholder:"Password"}),p.jsx("button",{style:S.btn,onClick:W,title:"Save as default",children:""})]})]}),p.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[p.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("input",{type:"text",id:"addCameraIp",style:{...S.input,flex:1},placeholder:"192.168.1.100",onKeyDown:j=>{if(j.key==="Enter"&&j.target.value){const M=j.target.value;!l.find(le=>le.ip===M)&&!r.find(le=>le.ip===M)&&c(le=>[...le,{ip:M,ports:["manual"]}]),K(M),R({name:`Camera ${M.split(".").pop()}`,username:Y.username||"",password:Y.password||""}),j.target.value=""}}}),p.jsx("button",{style:S.btn,onClick:()=>{const j=document.getElementById("addCameraIp"),M=j?.value;M&&(!l.find(le=>le.ip===M)&&!r.find(le=>le.ip===M)&&c(le=>[...le,{ip:M,ports:["manual"]}]),K(M),R({name:`Camera ${M.split(".").pop()}`,username:Y.username||"",password:Y.password||""}),j.value="")},children:"Configure"})]})]})]}),v&&p.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",v]}),d?p.jsx("div",{style:S.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?p.jsxs("div",{style:S.emptyState,children:[p.jsx("p",{children:"No cameras configured"}),p.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):p.jsx("div",{style:S.grid,children:r.map(j=>p.jsxs("div",{style:{...S.cameraCard,...pe===j.ip?S.cameraCardSelected:{}},onClick:()=>Ie(j.ip),children:[p.jsx("img",{src:L(j.ip),alt:j.name,style:S.cameraImage,onError:M=>{M.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),p.jsxs("div",{style:S.cameraInfo,children:[p.jsx("span",{style:S.cameraName,title:j.ip,children:j.name}),p.jsxs("div",{style:{display:"flex",gap:"4px"},children:[p.jsx("button",{style:{...S.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:M=>{M.stopPropagation(),E(!0),K(j.ip),R({name:j.name||"",username:j.username||"",password:""})},title:"Edit credentials",children:""}),p.jsx("button",{style:S.deleteBtn,onClick:M=>{M.stopPropagation(),je(j.ip)},title:"Remove camera",children:""})]})]})]},j.ip))})]}),pe&&p.jsxs("div",{style:S.fullView,onClick:()=>Ie(null),children:[p.jsx("img",{src:L(pe),alt:"Camera feed",style:S.fullImage}),p.jsx("button",{style:S.closeBtn,onClick:()=>Ie(null),children:" Close"}),p.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(j=>j.ip===pe)?.name||pe})]})]})}const Va=Object.create(null);Va.open="0";Va.close="1";Va.ping="2";Va.pong="3";Va.message="4";Va.upgrade="5";Va.noop="6";const wc=Object.create(null);Object.keys(Va).forEach(a=>{wc[Va[a]]=a});const sh={type:"error",data:"parser error"},A1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_1=typeof ArrayBuffer=="function",D1=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,qh=({type:a,data:n},r,s)=>A1&&n instanceof Blob?r?s(n):w0(n,s):_1&&(n instanceof ArrayBuffer||D1(n))?r?s(n):w0(new Blob([n]),s):s(Va[a]+(n||"")),w0=(a,n)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];n("b"+(s||""))},r.readAsDataURL(a)};function S0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let jf;function GC(a,n){if(A1&&a.data instanceof Blob)return a.data.arrayBuffer().then(S0).then(n);if(_1&&(a.data instanceof ArrayBuffer||D1(a.data)))return n(S0(a.data));qh(a,!1,r=>{jf||(jf=new TextEncoder),n(jf.encode(r))})}const x0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ko=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<x0.length;a++)ko[x0.charCodeAt(a)]=a;const YC=a=>{let n=a.length*.75,r=a.length,s,l=0,c,d,h,m;a[a.length-1]==="="&&(n--,a[a.length-2]==="="&&n--);const y=new ArrayBuffer(n),v=new Uint8Array(y);for(s=0;s<r;s+=4)c=ko[a.charCodeAt(s)],d=ko[a.charCodeAt(s+1)],h=ko[a.charCodeAt(s+2)],m=ko[a.charCodeAt(s+3)],v[l++]=c<<2|d>>4,v[l++]=(d&15)<<4|h>>2,v[l++]=(h&3)<<6|m&63;return y},PC=typeof ArrayBuffer=="function",Gh=(a,n)=>{if(typeof a!="string")return{type:"message",data:M1(a,n)};const r=a.charAt(0);return r==="b"?{type:"message",data:FC(a.substring(1),n)}:wc[r]?a.length>1?{type:wc[r],data:a.substring(1)}:{type:wc[r]}:sh},FC=(a,n)=>{if(PC){const r=YC(a);return M1(r,n)}else return{base64:!0,data:a}},M1=(a,n)=>{switch(n){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},R1="",ZC=(a,n)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,d)=>{qh(c,!1,h=>{s[d]=h,++l===r&&n(s.join(R1))})})},XC=(a,n)=>{const r=a.split(R1),s=[];for(let l=0;l<r.length;l++){const c=Gh(r[l],n);if(s.push(c),c.type==="error")break}return s};function KC(){return new TransformStream({transform(a,n){GC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),n.enqueue(l),n.enqueue(r)})}})}let Af;function cc(a){return a.reduce((n,r)=>n+r.length,0)}function uc(a,n){if(a[0].length===n)return a.shift();const r=new Uint8Array(n);let s=0;for(let l=0;l<n;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function QC(a,n){Af||(Af=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(d,h){for(r.push(d);;){if(s===0){if(cc(r)<1)break;const m=uc(r,1);c=(m[0]&128)===128,l=m[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(cc(r)<2)break;const m=uc(r,2);l=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),s=3}else if(s===2){if(cc(r)<8)break;const m=uc(r,8),y=new DataView(m.buffer,m.byteOffset,m.length),v=y.getUint32(0);if(v>Math.pow(2,21)-1){h.enqueue(sh);break}l=v*Math.pow(2,32)+y.getUint32(4),s=3}else{if(cc(r)<l)break;const m=uc(r,l);h.enqueue(Gh(c?m:Af.decode(m),n)),s=0}if(l===0||l>a){h.enqueue(sh);break}}}})}const z1=4;function un(a){if(a)return JC(a)}function JC(a){for(var n in un.prototype)a[n]=un.prototype[n];return a}un.prototype.on=un.prototype.addEventListener=function(a,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(n),this};un.prototype.once=function(a,n){function r(){this.off(a,r),n.apply(this,arguments)}return r.fn=n,this.on(a,r),this};un.prototype.off=un.prototype.removeListener=un.prototype.removeAllListeners=un.prototype.removeEventListener=function(a,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===n||s.fn===n){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};un.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,n)}return this};un.prototype.emitReserved=un.prototype.emit;un.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};un.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Gc=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,r)=>r(n,0),ma=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),WC="arraybuffer";function L1(a,...n){return n.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const eT=ma.setTimeout,tT=ma.clearTimeout;function Yc(a,n){n.useNativeTimers?(a.setTimeoutFn=eT.bind(ma),a.clearTimeoutFn=tT.bind(ma)):(a.setTimeoutFn=ma.setTimeout.bind(ma),a.clearTimeoutFn=ma.clearTimeout.bind(ma))}const nT=1.33;function aT(a){return typeof a=="string"?rT(a):Math.ceil((a.byteLength||a.size)*nT)}function rT(a){let n=0,r=0;for(let s=0,l=a.length;s<l;s++)n=a.charCodeAt(s),n<128?r+=1:n<2048?r+=2:n<55296||n>=57344?r+=3:(s++,r+=4);return r}function B1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function iT(a){let n="";for(let r in a)a.hasOwnProperty(r)&&(n.length&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return n}function sT(a){let n={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");n[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return n}class oT extends Error{constructor(n,r,s){super(n),this.description=r,this.context=s,this.type="TransportError"}}class Yh extends un{constructor(n){super(),this.writable=!1,Yc(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,r,s){return super.emitReserved("error",new oT(n,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const r=Gh(n,this.socket.binaryType);this.onPacket(r)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,r={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const r=iT(n);return r.length?"?"+r:""}}class lT extends Yh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";const r=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};XC(n,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,ZC(n,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=B1()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(n,r)}}let U1=!1;try{U1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const cT=U1;function uT(){}class dT extends lT{constructor(n){if(super(n),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||s!==n.port}}doWrite(n,r){const s=this.request({method:"POST",data:n});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=n}}class Ha extends un{constructor(n,r,s){super(),this.createRequest=n,Yc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var n;const r=L1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Ha.requestsCount++,Ha.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=uT,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ha.requests[this._index],this._xhr=null}}_onLoad(){const n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ha.requestsCount=0;Ha.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",k0);else if(typeof addEventListener=="function"){const a="onpagehide"in ma?"pagehide":"unload";addEventListener(a,k0,!1)}}function k0(){for(let a in Ha.requests)Ha.requests.hasOwnProperty(a)&&Ha.requests[a].abort()}const fT=(function(){const a=I1({xdomain:!1});return a&&a.responseType!==null})();class hT extends dT{constructor(n){super(n);const r=n&&n.forceBase64;this.supportsBinary=fT&&!r}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new Ha(I1,this.uri(),n)}}function I1(a){const n=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||cT))return new XMLHttpRequest}catch{}if(!n)try{return new ma[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pT extends Yh{get name(){return"websocket"}doOpen(){const n=this.uri(),r=this.opts.protocols,s=$1?{}:L1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;qh(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Gc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=B1()),this.supportsBinary||(r.b64=1),this.createUri(n,r)}}const _f=ma.WebSocket||ma.MozWebSocket;class mT extends pT{createSocket(n,r,s){return $1?new _f(n,r,s):r?new _f(n,r):new _f(n)}doWrite(n,r){this.ws.send(r)}}class yT extends Yh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{const r=QC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=n.readable.pipeThrough(r).getReader(),l=KC();l.readable.pipeTo(n.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:h,value:m})=>{h||(this.onPacket(m),c())}).catch(h=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let r=0;r<n.length;r++){const s=n[r],l=r===n.length-1;this._writer.write(s).then(()=>{l&&Gc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}}const gT={websocket:mT,webtransport:yT,polling:hT},vT=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function oh(a){if(a.length>8e3)throw"URI too long";const n=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=vT.exec(a||""),c={},d=14;for(;d--;)c[bT[d]]=l[d]||"";return r!=-1&&s!=-1&&(c.source=n,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=wT(c,c.path),c.queryKey=ST(c,c.query),c}function wT(a,n){const r=/\/{2,9}/g,s=n.replace(r,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&s.splice(0,1),n.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ST(a,n){const r={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const lh=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sc=[];lh&&addEventListener("offline",()=>{Sc.forEach(a=>a())},!1);class Pr extends un{constructor(n,r){if(super(),this.binaryType=WC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){const s=oh(n);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=oh(r.host).host);Yc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=sT(this.opts.query)),lh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=z1,r.transport=n,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const n=this.opts.rememberUpgrade&&Pr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Pr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=aT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,Gc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,s){return this._sendPacket("message",n,r,s),this}send(n,r,s){return this._sendPacket("message",n,r,s),this}_sendPacket(n,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:n,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}_onError(n){if(Pr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),lh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Sc.indexOf(this._offlineEventListener);s!==-1&&Sc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}Pr.protocol=z1;class xT extends Pr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let r=this.createTransport(n),s=!1;Pr.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!s)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Pr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=r.name,this.emitReserved("upgradeError",x)}}))};function c(){s||(s=!0,v(),r.close(),r=null)}const d=b=>{const x=new Error("probe error: "+b);x.transport=r.name,c(),this.emitReserved("upgradeError",x)};function h(){d("transport closed")}function m(){d("socket closed")}function y(b){r&&b.name!==r.name&&c()}const v=()=>{r.removeListener("open",l),r.removeListener("error",d),r.removeListener("close",h),this.off("close",m),this.off("upgrading",y)};r.once("open",l),r.once("error",d),r.once("close",h),this.once("close",m),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){const r=[];for(let s=0;s<n.length;s++)~this.transports.indexOf(n[s])&&r.push(n[s]);return r}}let kT=class extends xT{constructor(n,r={}){const s=typeof n=="object"?n:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>gT[l]).filter(l=>!!l)),super(n,s)}};function ET(a,n="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=oh(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+n,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const CT=typeof ArrayBuffer=="function",TT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,H1=Object.prototype.toString,NT=typeof Blob=="function"||typeof Blob<"u"&&H1.call(Blob)==="[object BlobConstructor]",OT=typeof File=="function"||typeof File<"u"&&H1.call(File)==="[object FileConstructor]";function Ph(a){return CT&&(a instanceof ArrayBuffer||TT(a))||NT&&a instanceof Blob||OT&&a instanceof File}function xc(a,n){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(xc(a[r]))return!0;return!1}if(Ph(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return xc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&xc(a[r]))return!0;return!1}function jT(a){const n=[],r=a.data,s=a;return s.data=ch(r,n),s.attachments=n.length,{packet:s,buffers:n}}function ch(a,n){if(!a)return a;if(Ph(a)){const r={_placeholder:!0,num:n.length};return n.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=ch(a[s],n);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=ch(a[s],n));return r}return a}function AT(a,n){return a.data=uh(a.data,n),delete a.attachments,a}function uh(a,n){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<n.length)return n[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=uh(a[r],n);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=uh(a[r],n));return a}const _T=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],DT=5;var ft;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(ft||(ft={}));class MT{constructor(n){this.replacer=n}encode(n){return(n.type===ft.EVENT||n.type===ft.ACK)&&xc(n)?this.encodeAsBinary({type:n.type===ft.EVENT?ft.BINARY_EVENT:ft.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let r=""+n.type;return(n.type===ft.BINARY_EVENT||n.type===ft.BINARY_ACK)&&(r+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(r+=n.nsp+","),n.id!=null&&(r+=n.id),n.data!=null&&(r+=JSON.stringify(n.data,this.replacer)),r}encodeAsBinary(n){const r=jT(n),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function E0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Fh extends un{constructor(n){super(),this.reviver=n}add(n){let r;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(n);const s=r.type===ft.BINARY_EVENT;s||r.type===ft.BINARY_ACK?(r.type=s?ft.EVENT:ft.ACK,this.reconstructor=new RT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Ph(n)||n.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(n),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let r=0;const s={type:Number(n.charAt(0))};if(ft[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===ft.BINARY_EVENT||s.type===ft.BINARY_ACK){const c=r+1;for(;n.charAt(++r)!=="-"&&r!=n.length;);const d=n.substring(c,r);if(d!=Number(d)||n.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(n.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(n.charAt(r)===","||r===n.length););s.nsp=n.substring(c,r)}else s.nsp="/";const l=n.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const d=n.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===n.length)break}s.id=Number(n.substring(c,r+1))}if(n.charAt(++r)){const c=this.tryParse(n.substr(r));if(Fh.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,r){switch(n){case ft.CONNECT:return E0(r);case ft.DISCONNECT:return r===void 0;case ft.CONNECT_ERROR:return typeof r=="string"||E0(r);case ft.EVENT:case ft.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&_T.indexOf(r[0])===-1);case ft.ACK:case ft.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class RT{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const r=AT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const zT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Fh,Encoder:MT,get PacketType(){return ft},protocol:DT},Symbol.toStringTag,{value:"Module"}));function Oa(a,n,r){return a.on(n,r),function(){a.off(n,r)}}const LT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class V1 extends un{constructor(n,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Oa(n,"open",this.onopen.bind(this)),Oa(n,"packet",this.onpacket.bind(this)),Oa(n,"error",this.onerror.bind(this)),Oa(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...r){var s,l,c;if(LT.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(r.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:ft.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,b=r.pop();this._registerAckCallback(v,b),d.id=v}const h=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,m=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!h||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(n,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[n]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===n&&this.sendBuffer.splice(h,1);r.call(this,new Error("operation has timed out"))},l),d=(...h)=>{this.io.clearTimeoutFn(c),r.apply(this,h)};d.withError=!0,this.acks[n]=d}emitWithAck(n,...r){return new Promise((s,l)=>{const c=(d,h)=>d?l(d):s(h);c.withError=!0,r.push(c),this.emit(n,...r)})}_addToQueue(n){let r;typeof n[n.length-1]=="function"&&(r=n.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!n||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:ft.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(s=>String(s.id)===n)){const s=this.acks[n];delete this.acks[n],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case ft.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ft.EVENT:case ft.BINARY_EVENT:this.onevent(n);break;case ft.ACK:case ft.BINARY_ACK:this.onack(n);break;case ft.DISCONNECT:this.ondisconnect();break;case ft.CONNECT_ERROR:this.destroy();const s=new Error(n.data.message);s.data=n.data.data,this.emitReserved("connect_error",s);break}}onevent(n){const r=n.data||[];n.id!=null&&r.push(this.ack(n.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:ft.ACK,id:n,data:l}))}}onack(n){const r=this.acks[n.id];typeof r=="function"&&(delete this.acks[n.id],r.withError&&n.data.unshift(null),r.apply(this,n.data))}onconnect(n,r){this.id=n,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ft.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(n===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,n.data)}}}function ws(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}ws.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),r=Math.floor(n*this.jitter*a);a=(Math.floor(n*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};ws.prototype.reset=function(){this.attempts=0};ws.prototype.setMin=function(a){this.ms=a};ws.prototype.setMax=function(a){this.max=a};ws.prototype.setJitter=function(a){this.jitter=a};class dh extends un{constructor(n,r){var s;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(r=n,n=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Yc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ws({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=n;const l=r.parser||zT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var r;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(r=this.backoff)===null||r===void 0||r.setMin(n),this)}randomizationFactor(n){var r;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(r=this.backoff)===null||r===void 0||r.setJitter(n),this)}reconnectionDelayMax(n){var r;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(r=this.backoff)===null||r===void 0||r.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new kT(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=Oa(r,"open",function(){s.onopen(),n&&n()}),c=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),n?n(h):this.maybeReconnectOnOpen()},d=Oa(r,"error",c);if(this._timeout!==!1){const h=this._timeout,m=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},h);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(l),this.subs.push(d),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Oa(n,"ping",this.onping.bind(this)),Oa(n,"data",this.ondata.bind(this)),Oa(n,"error",this.onerror.bind(this)),Oa(n,"close",this.onclose.bind(this)),Oa(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(r){this.onclose("parse error",r)}}ondecoded(n){Gc(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,r){let s=this.nsps[n];return s?this._autoConnect&&!s.active&&s.connect():(s=new V1(this,n,r),this.nsps[n]=s),s}_destroy(n){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(n){const r=this.encoder.encode(n);for(let s=0;s<r.length;s++)this.engine.write(r[s],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(l=>{l?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",l)):n.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const wo={};function kc(a,n){typeof a=="object"&&(n=a,a=void 0),n=n||{};const r=ET(a,n.path||"/socket.io"),s=r.source,l=r.id,c=r.path,d=wo[l]&&c in wo[l].nsps,h=n.forceNew||n["force new connection"]||n.multiplex===!1||d;let m;return h?m=new dh(s,n):(wo[l]||(wo[l]=new dh(s,n)),m=wo[l]),r.query&&!n.query&&(n.query=r.queryKey),m.socket(r.path,n)}Object.assign(kc,{Manager:dh,Socket:V1,io:kc,connect:kc});const BT=typeof window<"u"?window.location.origin:"http://localhost:3000",C0=qc(),UT=C0?`${C0}/socket.io`:"/socket.io",ye=kc(BT,{path:UT,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]}),IT=()=>{ye.connected||ye.connect()},$T=()=>{ye.connected&&ye.disconnect()};class HT{constructor(){this.nodes=new Map}register(n,r){typeof n=="object"&&r===void 0&&(r=n,n=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(n,r)}get(n){return this.nodes.get(n)}getAll(){return Array.from(this.nodes.values()).filter(n=>n)}getByLabel(n){for(const r of this.nodes.values())if(r.label===n)return r;return null}getByInstance(n){for(const r of this.nodes.values())if(r.nodeClass&&n instanceof r.nodeClass)return r;return null}}const On=new HT;class Si extends Error{}class VT extends Si{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}}class qT extends Si{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}}class GT extends Si{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}}class os extends Si{}class q1 extends Si{constructor(n){super(`Invalid unit ${n}`)}}class jn extends Si{}class Ir extends Si{constructor(){super("Zone is an abstract class")}}const Ne="numeric",Da="short",na="long",Mc={year:Ne,month:Ne,day:Ne},G1={year:Ne,month:Da,day:Ne},YT={year:Ne,month:Da,day:Ne,weekday:Da},Y1={year:Ne,month:na,day:Ne},P1={year:Ne,month:na,day:Ne,weekday:na},F1={hour:Ne,minute:Ne},Z1={hour:Ne,minute:Ne,second:Ne},X1={hour:Ne,minute:Ne,second:Ne,timeZoneName:Da},K1={hour:Ne,minute:Ne,second:Ne,timeZoneName:na},Q1={hour:Ne,minute:Ne,hourCycle:"h23"},J1={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23"},W1={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23",timeZoneName:Da},ew={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23",timeZoneName:na},tw={year:Ne,month:Ne,day:Ne,hour:Ne,minute:Ne},nw={year:Ne,month:Ne,day:Ne,hour:Ne,minute:Ne,second:Ne},aw={year:Ne,month:Da,day:Ne,hour:Ne,minute:Ne},rw={year:Ne,month:Da,day:Ne,hour:Ne,minute:Ne,second:Ne},PT={year:Ne,month:Da,day:Ne,weekday:Da,hour:Ne,minute:Ne},iw={year:Ne,month:na,day:Ne,hour:Ne,minute:Ne,timeZoneName:Da},sw={year:Ne,month:na,day:Ne,hour:Ne,minute:Ne,second:Ne,timeZoneName:Da},ow={year:Ne,month:na,day:Ne,weekday:na,hour:Ne,minute:Ne,timeZoneName:na},lw={year:Ne,month:na,day:Ne,weekday:na,hour:Ne,minute:Ne,second:Ne,timeZoneName:na};class Ss{get type(){throw new Ir}get name(){throw new Ir}get ianaName(){return this.name}get isUniversal(){throw new Ir}offsetName(n,r){throw new Ir}formatOffset(n,r){throw new Ir}offset(n){throw new Ir}equals(n){throw new Ir}get isValid(){throw new Ir}}let Df=null;class Uo extends Ss{static get instance(){return Df===null&&(Df=new Uo),Df}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return ww(n,r,s)}formatOffset(n,r){return _o(this.offset(n),r)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}const fh=new Map;function FT(a){let n=fh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),fh.set(a,n)),n}const ZT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function XT(a,n){const r=a.format(n).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,d,h,m,y,v]=s;return[d,l,c,h,m,y,v]}function KT(a,n){const r=a.formatToParts(n),s=[];for(let l=0;l<r.length;l++){const{type:c,value:d}=r[l],h=ZT[c];c==="era"?s[h]=d:Ye(h)||(s[h]=parseInt(d,10))}return s}const Mf=new Map;class qa extends Ss{static create(n){let r=Mf.get(n);return r===void 0&&Mf.set(n,r=new qa(n)),r}static resetCache(){Mf.clear(),fh.clear()}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch{return!1}}constructor(n){super(),this.zoneName=n,this.valid=qa.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:r,locale:s}){return ww(n,r,s,this.name)}formatOffset(n,r){return _o(this.offset(n),r)}offset(n){if(!this.valid)return NaN;const r=new Date(n);if(isNaN(r))return NaN;const s=FT(this.name);let[l,c,d,h,m,y,v]=s.formatToParts?KT(s,r):XT(s,r);h==="BC"&&(l=-Math.abs(l)+1);const x=Fc({year:l,month:c,day:d,hour:m===24?0:m,minute:y,second:v,millisecond:0});let E=+r;const N=E%1e3;return E-=N>=0?N:1e3+N,(x-E)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}let T0={};function QT(a,n={}){const r=JSON.stringify([a,n]);let s=T0[r];return s||(s=new Intl.ListFormat(a,n),T0[r]=s),s}const hh=new Map;function ph(a,n={}){const r=JSON.stringify([a,n]);let s=hh.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,n),hh.set(r,s)),s}const mh=new Map;function JT(a,n={}){const r=JSON.stringify([a,n]);let s=mh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,n),mh.set(r,s)),s}const yh=new Map;function WT(a,n={}){const{base:r,...s}=n,l=JSON.stringify([a,s]);let c=yh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,n),yh.set(l,c)),c}let Eo=null;function eN(){return Eo||(Eo=new Intl.DateTimeFormat().resolvedOptions().locale,Eo)}const gh=new Map;function cw(a){let n=gh.get(a);return n===void 0&&(n=new Intl.DateTimeFormat(a).resolvedOptions(),gh.set(a,n)),n}const vh=new Map;function tN(a){let n=vh.get(a);if(!n){const r=new Intl.Locale(a);n="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in n||(n={...uw,...n}),vh.set(a,n)}return n}function nN(a){const n=a.indexOf("-x-");n!==-1&&(a=a.substring(0,n));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=ph(a).resolvedOptions(),l=a}catch{const m=a.substring(0,r);s=ph(m).resolvedOptions(),l=m}const{numberingSystem:c,calendar:d}=s;return[l,c,d]}}function aN(a,n,r){return(r||n)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),n&&(a+=`-nu-${n}`)),a}function rN(a){const n=[];for(let r=1;r<=12;r++){const s=Fe.utc(2009,r,1);n.push(a(s))}return n}function iN(a){const n=[];for(let r=1;r<=7;r++){const s=Fe.utc(2016,11,13+r);n.push(a(s))}return n}function dc(a,n,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(n):s(n)}function sN(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||cw(a.locale).numberingSystem==="latn"}class oN{constructor(n,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...d}=s;if(!r||Object.keys(d).length>0){const h={useGrouping:!1,...s};s.padTo>0&&(h.minimumIntegerDigits=s.padTo),this.inf=JT(n,h)}}format(n){if(this.inf){const r=this.floor?Math.floor(n):n;return this.inf.format(r)}else{const r=this.floor?Math.floor(n):Jh(n,3);return ln(r,this.padTo)}}}class lN{constructor(n,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){const d=-1*(n.offset/60),h=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;n.offset!==0&&qa.create(h).valid?(l=h,this.dt=n):(l="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,l=n.zone.name):(l="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=ph(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):n}resolvedOptions(){return this.dtf.resolvedOptions()}}class cN{constructor(n,r,s){this.opts={style:"long",...s},!r&&vw()&&(this.rtf=WT(n,s))}format(n,r){return this.rtf?this.rtf.format(n,r):AN(r,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,r){return this.rtf?this.rtf.formatToParts(n,r):[]}}const uw={firstDay:1,minimalDays:4,weekend:[6,7]};class xt{static fromOpts(n){return xt.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,r,s,l,c=!1){const d=n||Yt.defaultLocale,h=d||(c?"en-US":eN()),m=r||Yt.defaultNumberingSystem,y=s||Yt.defaultOutputCalendar,v=wh(l)||Yt.defaultWeekSettings;return new xt(h,m,y,v,d)}static resetCache(){Eo=null,hh.clear(),mh.clear(),yh.clear(),gh.clear(),vh.clear()}static fromObject({locale:n,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return xt.create(n,r,s,l)}constructor(n,r,s,l,c){const[d,h,m]=nN(n);this.locale=d,this.numberingSystem=r||h||null,this.outputCalendar=s||m||null,this.weekSettings=l,this.intl=aN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=sN(this)),this.fastNumbersCached}listingMode(){const n=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&r?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:xt.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,wh(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,r=!1){return dc(this,n,kw,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:n,day:"numeric"}:{month:n},c=r?"format":"standalone";if(!this.monthsCache[c][n]){const d=s?h=>this.dtFormatter(h,l).format():h=>this.extract(h,l,"month");this.monthsCache[c][n]=rN(d)}return this.monthsCache[c][n]})}weekdays(n,r=!1){return dc(this,n,Tw,()=>{const s=r?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},l=r?"format":"standalone";return this.weekdaysCache[l][n]||(this.weekdaysCache[l][n]=iN(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][n]})}meridiems(){return dc(this,void 0,()=>Nw,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Fe.utc(2016,11,13,9),Fe.utc(2016,11,13,19)].map(r=>this.extract(r,n,"dayperiod"))}return this.meridiemCache})}eras(n){return dc(this,n,Ow,()=>{const r={era:n};return this.eraCache[n]||(this.eraCache[n]=[Fe.utc(-40,1,1),Fe.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[n]})}extract(n,r,s){const l=this.dtFormatter(n,r),c=l.formatToParts(),d=c.find(h=>h.type.toLowerCase()===s);return d?d.value:null}numberFormatter(n={}){return new oN(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,r={}){return new lN(n,this.intl,r)}relFormatter(n={}){return new cN(this.intl,this.isEnglish(),n)}listFormatter(n={}){return QT(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||cw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:bw()?tN(this.locale):uw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Rf=null;class _n extends Ss{static get utcInstance(){return Rf===null&&(Rf=new _n(0)),Rf}static instance(n){return n===0?_n.utcInstance:new _n(n)}static parseSpecifier(n){if(n){const r=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new _n(Zc(r[1],r[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${_o(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${_o(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,r){return _o(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}class dw extends Ss{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Gr(a,n){if(Ye(a)||a===null)return n;if(a instanceof Ss)return a;if(mN(a)){const r=a.toLowerCase();return r==="default"?n:r==="local"||r==="system"?Uo.instance:r==="utc"||r==="gmt"?_n.utcInstance:_n.parseSpecifier(r)||qa.create(a)}else return Fr(a)?_n.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new dw(a)}const Zh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},N0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},uN=Zh.hanidec.replace(/[\[|\]]/g,"").split("");function dN(a){let n=parseInt(a,10);if(isNaN(n)){n="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Zh.hanidec)!==-1)n+=uN.indexOf(a[r]);else for(const l in N0){const[c,d]=N0[l];s>=c&&s<=d&&(n+=s-c)}}return parseInt(n,10)}else return n}const bh=new Map;function fN(){bh.clear()}function Ta({numberingSystem:a},n=""){const r=a||"latn";let s=bh.get(r);s===void 0&&(s=new Map,bh.set(r,s));let l=s.get(n);return l===void 0&&(l=new RegExp(`${Zh[r]}${n}`),s.set(n,l)),l}let O0=()=>Date.now(),j0="system",A0=null,_0=null,D0=null,M0=60,R0,z0=null;class Yt{static get now(){return O0}static set now(n){O0=n}static set defaultZone(n){j0=n}static get defaultZone(){return Gr(j0,Uo.instance)}static get defaultLocale(){return A0}static set defaultLocale(n){A0=n}static get defaultNumberingSystem(){return _0}static set defaultNumberingSystem(n){_0=n}static get defaultOutputCalendar(){return D0}static set defaultOutputCalendar(n){D0=n}static get defaultWeekSettings(){return z0}static set defaultWeekSettings(n){z0=wh(n)}static get twoDigitCutoffYear(){return M0}static set twoDigitCutoffYear(n){M0=n%100}static get throwOnInvalid(){return R0}static set throwOnInvalid(n){R0=n}static resetCaches(){xt.resetCache(),qa.resetCache(),Fe.resetCache(),fN()}}class ja{constructor(n,r){this.reason=n,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const fw=[0,31,59,90,120,151,181,212,243,273,304,334],hw=[0,31,60,91,121,152,182,213,244,274,305,335];function ya(a,n){return new ja("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${a}, which is invalid`)}function Xh(a,n,r){const s=new Date(Date.UTC(a,n-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function pw(a,n,r){return r+(Io(a)?hw:fw)[n-1]}function mw(a,n){const r=Io(a)?hw:fw,s=r.findIndex(c=>c<n),l=n-r[s];return{month:s+1,day:l}}function Kh(a,n){return(a-n+7)%7+1}function Rc(a,n=4,r=1){const{year:s,month:l,day:c}=a,d=pw(s,l,c),h=Kh(Xh(s,l,c),r);let m=Math.floor((d-h+14-n)/7),y;return m<1?(y=s-1,m=zo(y,n,r)):m>zo(s,n,r)?(y=s+1,m=1):y=s,{weekYear:y,weekNumber:m,weekday:h,...Xc(a)}}function L0(a,n=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,d=Kh(Xh(s,1,n),r),h=cs(s);let m=l*7+c-d-7+n,y;m<1?(y=s-1,m+=cs(y)):m>h?(y=s+1,m-=cs(s)):y=s;const{month:v,day:b}=mw(y,m);return{year:y,month:v,day:b,...Xc(a)}}function zf(a){const{year:n,month:r,day:s}=a,l=pw(n,r,s);return{year:n,ordinal:l,...Xc(a)}}function B0(a){const{year:n,ordinal:r}=a,{month:s,day:l}=mw(n,r);return{year:n,month:s,day:l,...Xc(a)}}function U0(a,n){if(!Ye(a.localWeekday)||!Ye(a.localWeekNumber)||!Ye(a.localWeekYear)){if(!Ye(a.weekday)||!Ye(a.weekNumber)||!Ye(a.weekYear))throw new os("Cannot mix locale-based week fields with ISO-based week fields");return Ye(a.localWeekday)||(a.weekday=a.localWeekday),Ye(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ye(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function hN(a,n=4,r=1){const s=Pc(a.weekYear),l=ga(a.weekNumber,1,zo(a.weekYear,n,r)),c=ga(a.weekday,1,7);return s?l?c?!1:ya("weekday",a.weekday):ya("week",a.weekNumber):ya("weekYear",a.weekYear)}function pN(a){const n=Pc(a.year),r=ga(a.ordinal,1,cs(a.year));return n?r?!1:ya("ordinal",a.ordinal):ya("year",a.year)}function yw(a){const n=Pc(a.year),r=ga(a.month,1,12),s=ga(a.day,1,zc(a.year,a.month));return n?r?s?!1:ya("day",a.day):ya("month",a.month):ya("year",a.year)}function gw(a){const{hour:n,minute:r,second:s,millisecond:l}=a,c=ga(n,0,23)||n===24&&r===0&&s===0&&l===0,d=ga(r,0,59),h=ga(s,0,59),m=ga(l,0,999);return c?d?h?m?!1:ya("millisecond",l):ya("second",s):ya("minute",r):ya("hour",n)}function Ye(a){return typeof a>"u"}function Fr(a){return typeof a=="number"}function Pc(a){return typeof a=="number"&&a%1===0}function mN(a){return typeof a=="string"}function yN(a){return Object.prototype.toString.call(a)==="[object Date]"}function vw(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function bw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function gN(a){return Array.isArray(a)?a:[a]}function I0(a,n,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[n(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function vN(a,n){return n.reduce((r,s)=>(r[s]=a[s],r),{})}function ys(a,n){return Object.prototype.hasOwnProperty.call(a,n)}function wh(a){if(a==null)return null;if(typeof a!="object")throw new jn("Week settings must be an object");if(!ga(a.firstDay,1,7)||!ga(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(n=>!ga(n,1,7)))throw new jn("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function ga(a,n,r){return Pc(a)&&a>=n&&a<=r}function bN(a,n){return a-n*Math.floor(a/n)}function ln(a,n=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(n,"0"):s=(""+a).padStart(n,"0"),s}function qr(a){if(!(Ye(a)||a===null||a===""))return parseInt(a,10)}function hi(a){if(!(Ye(a)||a===null||a===""))return parseFloat(a)}function Qh(a){if(!(Ye(a)||a===null||a==="")){const n=parseFloat("0."+a)*1e3;return Math.floor(n)}}function Jh(a,n,r="round"){const s=10**n;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Io(a){return a%4===0&&(a%100!==0||a%400===0)}function cs(a){return Io(a)?366:365}function zc(a,n){const r=bN(n-1,12)+1,s=a+(n-r)/12;return r===2?Io(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Fc(a){let n=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(n=new Date(n),n.setUTCFullYear(a.year,a.month-1,a.day)),+n}function $0(a,n,r){return-Kh(Xh(a,1,n),r)+n-1}function zo(a,n=4,r=1){const s=$0(a,n,r),l=$0(a+1,n,r);return(cs(a)-s+l)/7}function Sh(a){return a>99?a:a>Yt.twoDigitCutoffYear?1900+a:2e3+a}function ww(a,n,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const d={timeZoneName:n,...c},h=new Intl.DateTimeFormat(r,d).formatToParts(l).find(m=>m.type.toLowerCase()==="timezonename");return h?h.value:null}function Zc(a,n){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(n,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function Sw(a){const n=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(n))throw new jn(`Invalid unit value ${a}`);return n}function Lc(a,n){const r={};for(const s in a)if(ys(a,s)){const l=a[s];if(l==null)continue;r[n(s)]=Sw(l)}return r}function _o(a,n){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(n){case"short":return`${l}${ln(r,2)}:${ln(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${ln(r,2)}${ln(s,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function Xc(a){return vN(a,["hour","minute","second","millisecond"])}const wN=["January","February","March","April","May","June","July","August","September","October","November","December"],xw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],SN=["J","F","M","A","M","J","J","A","S","O","N","D"];function kw(a){switch(a){case"narrow":return[...SN];case"short":return[...xw];case"long":return[...wN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Ew=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Cw=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],xN=["M","T","W","T","F","S","S"];function Tw(a){switch(a){case"narrow":return[...xN];case"short":return[...Cw];case"long":return[...Ew];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Nw=["AM","PM"],kN=["Before Christ","Anno Domini"],EN=["BC","AD"],CN=["B","A"];function Ow(a){switch(a){case"narrow":return[...CN];case"short":return[...EN];case"long":return[...kN];default:return null}}function TN(a){return Nw[a.hour<12?0:1]}function NN(a,n){return Tw(n)[a.weekday-1]}function ON(a,n){return kw(n)[a.month-1]}function jN(a,n){return Ow(n)[a.year<0?0:1]}function AN(a,n,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const b=a==="days";switch(n){case 1:return b?"tomorrow":`next ${l[a][0]}`;case-1:return b?"yesterday":`last ${l[a][0]}`;case 0:return b?"today":`this ${l[a][0]}`}}const d=Object.is(n,-0)||n<0,h=Math.abs(n),m=h===1,y=l[a],v=s?m?y[1]:y[2]||y[1]:m?l[a][0]:a;return d?`${h} ${v} ago`:`in ${h} ${v}`}function H0(a,n){let r="";for(const s of a)s.literal?r+=s.val:r+=n(s.val);return r}const _N={D:Mc,DD:G1,DDD:Y1,DDDD:P1,t:F1,tt:Z1,ttt:X1,tttt:K1,T:Q1,TT:J1,TTT:W1,TTTT:ew,f:tw,ff:aw,fff:iw,ffff:ow,F:nw,FF:rw,FFF:sw,FFFF:lw};class An{static create(n,r={}){return new An(n,r)}static parseFormat(n){let r=null,s="",l=!1;const c=[];for(let d=0;d<n.length;d++){const h=n.charAt(d);h==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||h===r?s+=h:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=h,r=h)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(n){return _N[n]}constructor(n,r){this.opts=r,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...r}).format()}dtFormatter(n,r={}){return this.loc.dtFormatter(n,{...this.opts,...r})}formatDateTime(n,r){return this.dtFormatter(n,r).format()}formatDateTimeParts(n,r){return this.dtFormatter(n,r).formatToParts()}formatInterval(n,r){return this.dtFormatter(n.start,r).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,r){return this.dtFormatter(n,r).resolvedOptions()}num(n,r=0,s=void 0){if(this.opts.forceSimple)return ln(n,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(n)}formatDateTimeFromString(n,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(E,N)=>this.loc.extract(n,E,N),d=E=>n.isOffsetFixed&&n.offset===0&&E.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,E.format):"",h=()=>s?TN(n):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(E,N)=>s?ON(n,E):c(N?{month:E}:{month:E,day:"numeric"},"month"),y=(E,N)=>s?NN(n,E):c(N?{weekday:E}:{weekday:E,month:"long",day:"numeric"},"weekday"),v=E=>{const N=An.macroTokenToFormatOpts(E);return N?this.formatWithSystemDefault(n,N):E},b=E=>s?jN(n,E):c({era:E},"era"),x=E=>{switch(E){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return h();case"d":return l?c({day:"numeric"},"day"):this.num(n.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(n.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(n.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(n.year,6);case"G":return b("short");case"GG":return b("long");case"GGGGG":return b("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return v(E)}};return H0(An.parseFormat(r),x)}formatDurationFromString(n,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=v=>{switch(v[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(v,b)=>x=>{const E=l(x);if(E){const N=b.isNegativeDuration&&E!==b.largestUnit?s:1;let F;return this.opts.signMode==="negativeLargestOnly"&&E!==b.largestUnit?F="never":this.opts.signMode==="all"?F="always":F="auto",this.num(v.get(E)*N,x.length,F)}else return x},d=An.parseFormat(r),h=d.reduce((v,{literal:b,val:x})=>b?v:v.concat(x),[]),m=n.shiftTo(...h.map(l).filter(v=>v)),y={isNegativeDuration:m<0,largestUnit:Object.keys(m.values)[0]};return H0(d,c(m,y))}}const jw=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function xs(...a){const n=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${n}$`)}function ks(...a){return n=>a.reduce(([r,s,l],c)=>{const[d,h,m]=c(n,l);return[{...r,...d},h||s,m]},[{},null,1]).slice(0,2)}function Es(a,...n){if(a==null)return[null,null];for(const[r,s]of n){const l=r.exec(a);if(l)return s(l)}return[null,null]}function Aw(...a){return(n,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=qr(n[r+l]);return[s,null,r+l]}}const _w=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,DN=`(?:${_w.source}?(?:\\[(${jw.source})\\])?)?`,Wh=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Dw=RegExp(`${Wh.source}${DN}`),ep=RegExp(`(?:[Tt]${Dw.source})?`),MN=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,RN=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zN=/(\d{4})-?(\d{3})/,LN=Aw("weekYear","weekNumber","weekDay"),BN=Aw("year","ordinal"),UN=/(\d{4})-(\d\d)-(\d\d)/,Mw=RegExp(`${Wh.source} ?(?:${_w.source}|(${jw.source}))?`),IN=RegExp(`(?: ${Mw.source})?`);function us(a,n,r){const s=a[n];return Ye(s)?r:qr(s)}function $N(a,n){return[{year:us(a,n),month:us(a,n+1,1),day:us(a,n+2,1)},null,n+3]}function Cs(a,n){return[{hours:us(a,n,0),minutes:us(a,n+1,0),seconds:us(a,n+2,0),milliseconds:Qh(a[n+3])},null,n+4]}function $o(a,n){const r=!a[n]&&!a[n+1],s=Zc(a[n+1],a[n+2]),l=r?null:_n.instance(s);return[{},l,n+3]}function Ho(a,n){const r=a[n]?qa.create(a[n]):null;return[{},r,n+1]}const HN=RegExp(`^T?${Wh.source}$`),VN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function qN(a){const[n,r,s,l,c,d,h,m,y]=a,v=n[0]==="-",b=m&&m[0]==="-",x=(E,N=!1)=>E!==void 0&&(N||E&&v)?-E:E;return[{years:x(hi(r)),months:x(hi(s)),weeks:x(hi(l)),days:x(hi(c)),hours:x(hi(d)),minutes:x(hi(h)),seconds:x(hi(m),m==="-0"),milliseconds:x(Qh(y),b)}]}const GN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function tp(a,n,r,s,l,c,d){const h={year:n.length===2?Sh(qr(n)):qr(n),month:xw.indexOf(r)+1,day:qr(s),hour:qr(l),minute:qr(c)};return d&&(h.second=qr(d)),a&&(h.weekday=a.length>3?Ew.indexOf(a)+1:Cw.indexOf(a)+1),h}const YN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function PN(a){const[,n,r,s,l,c,d,h,m,y,v,b]=a,x=tp(n,l,s,r,c,d,h);let E;return m?E=GN[m]:y?E=0:E=Zc(v,b),[x,new _n(E)]}function FN(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ZN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,XN=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,KN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function V0(a){const[,n,r,s,l,c,d,h]=a;return[tp(n,l,s,r,c,d,h),_n.utcInstance]}function QN(a){const[,n,r,s,l,c,d,h]=a;return[tp(n,h,r,s,l,c,d),_n.utcInstance]}const JN=xs(MN,ep),WN=xs(RN,ep),eO=xs(zN,ep),tO=xs(Dw),Rw=ks($N,Cs,$o,Ho),nO=ks(LN,Cs,$o,Ho),aO=ks(BN,Cs,$o,Ho),rO=ks(Cs,$o,Ho);function iO(a){return Es(a,[JN,Rw],[WN,nO],[eO,aO],[tO,rO])}function sO(a){return Es(FN(a),[YN,PN])}function oO(a){return Es(a,[ZN,V0],[XN,V0],[KN,QN])}function lO(a){return Es(a,[VN,qN])}const cO=ks(Cs);function uO(a){return Es(a,[HN,cO])}const dO=xs(UN,IN),fO=xs(Mw),hO=ks(Cs,$o,Ho);function pO(a){return Es(a,[dO,Rw],[fO,hO])}const q0="Invalid Duration",zw={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},mO={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...zw},pa=146097/400,ns=146097/4800,yO={years:{quarters:4,months:12,weeks:pa/7,days:pa,hours:pa*24,minutes:pa*24*60,seconds:pa*24*60*60,milliseconds:pa*24*60*60*1e3},quarters:{months:3,weeks:pa/28,days:pa/4,hours:pa*24/4,minutes:pa*24*60/4,seconds:pa*24*60*60/4,milliseconds:pa*24*60*60*1e3/4},months:{weeks:ns/7,days:ns,hours:ns*24,minutes:ns*24*60,seconds:ns*24*60*60,milliseconds:ns*24*60*60*1e3},...zw},gi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],gO=gi.slice(0).reverse();function fr(a,n,r=!1){const s={values:r?n.values:{...a.values,...n.values||{}},loc:a.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||a.conversionAccuracy,matrix:n.matrix||a.matrix};return new ht(s)}function Lw(a,n){let r=n.milliseconds??0;for(const s of gO.slice(1))n[s]&&(r+=n[s]*a[s].milliseconds);return r}function G0(a,n){const r=Lw(a,n)<0?-1:1;gi.reduceRight((s,l)=>{if(Ye(n[l]))return s;if(s){const c=n[s]*r,d=a[l][s],h=Math.floor(c/d);n[l]+=h*r,n[s]-=h*d*r}return l},null),gi.reduce((s,l)=>{if(Ye(n[l]))return s;if(s){const c=n[s]%1;n[s]-=c,n[l]+=c*a[s][l]}return l},null)}function Y0(a){const n={};for(const[r,s]of Object.entries(a))s!==0&&(n[r]=s);return n}class ht{constructor(n){const r=n.conversionAccuracy==="longterm"||!1;let s=r?yO:mO;n.matrix&&(s=n.matrix),this.values=n.values,this.loc=n.loc||xt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(n,r){return ht.fromObject({milliseconds:n},r)}static fromObject(n,r={}){if(n==null||typeof n!="object")throw new jn(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new ht({values:Lc(n,ht.normalizeUnit),loc:xt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(n){if(Fr(n))return ht.fromMillis(n);if(ht.isDuration(n))return n;if(typeof n=="object")return ht.fromObject(n);throw new jn(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,r){const[s]=lO(n);return s?ht.fromObject(s,r):ht.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,r){const[s]=uO(n);return s?ht.fromObject(s,r):ht.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,r=null){if(!n)throw new jn("need to specify a reason the Duration is invalid");const s=n instanceof ja?n:new ja(n,r);if(Yt.throwOnInvalid)throw new GT(s);return new ht({invalid:s})}static normalizeUnit(n){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!r)throw new q1(n);return r}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?An.create(this.loc,s).formatDurationFromString(this,n):q0}toHuman(n={}){if(!this.isValid)return q0;const r=n.showZeros!==!1,s=gi.map(l=>{const c=this.values[l];return Ye(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=Jh(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},Fe.fromMillis(r,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Lw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n),s={};for(const l of gi)(ys(r.values,l)||ys(this.values,l))&&(s[l]=r.get(l)+this.get(l));return fr(this,{values:s},!0)}minus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n);return this.plus(r.negate())}mapUnits(n){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=Sw(n(this.values[s],s));return fr(this,{values:r},!0)}get(n){return this[ht.normalizeUnit(n)]}set(n){if(!this.isValid)return this;const r={...this.values,...Lc(n,ht.normalizeUnit)};return fr(this,{values:r})}reconfigure({locale:n,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const d={loc:this.loc.clone({locale:n,numberingSystem:r}),matrix:l,conversionAccuracy:s};return fr(this,d)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;const n=this.toObject();return G0(this.matrix,n),fr(this,{values:n},!0)}rescale(){if(!this.isValid)return this;const n=Y0(this.normalize().shiftToAll().toObject());return fr(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(d=>ht.normalizeUnit(d));const r={},s={},l=this.toObject();let c;for(const d of gi)if(n.indexOf(d)>=0){c=d;let h=0;for(const y in s)h+=this.matrix[y][d]*s[y],s[y]=0;Fr(l[d])&&(h+=l[d]);const m=Math.trunc(h);r[d]=m,s[d]=(h*1e3-m*1e3)/1e3}else Fr(l[d])&&(s[d]=l[d]);for(const d in s)s[d]!==0&&(r[c]+=d===c?s[d]:s[d]/this.matrix[c][d]);return G0(this.matrix,r),fr(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=this.values[r]===0?0:-this.values[r];return fr(this,{values:n},!0)}removeZeros(){if(!this.isValid)return this;const n=Y0(this.values);return fr(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of gi)if(!r(this.values[s],n.values[s]))return!1;return!0}}const as="Invalid Interval";function vO(a,n){return!a||!a.isValid?Gt.invalid("missing or invalid start"):!n||!n.isValid?Gt.invalid("missing or invalid end"):n<a?Gt.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${n.toISO()}`):null}class Gt{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,r=null){if(!n)throw new jn("need to specify a reason the Interval is invalid");const s=n instanceof ja?n:new ja(n,r);if(Yt.throwOnInvalid)throw new qT(s);return new Gt({invalid:s})}static fromDateTimes(n,r){const s=So(n),l=So(r),c=vO(s,l);return c??new Gt({start:s,end:l})}static after(n,r){const s=ht.fromDurationLike(r),l=So(n);return Gt.fromDateTimes(l,l.plus(s))}static before(n,r){const s=ht.fromDurationLike(r),l=So(n);return Gt.fromDateTimes(l.minus(s),l)}static fromISO(n,r){const[s,l]=(n||"").split("/",2);if(s&&l){let c,d;try{c=Fe.fromISO(s,r),d=c.isValid}catch{d=!1}let h,m;try{h=Fe.fromISO(l,r),m=h.isValid}catch{m=!1}if(d&&m)return Gt.fromDateTimes(c,h);if(d){const y=ht.fromISO(l,r);if(y.isValid)return Gt.after(c,y)}else if(m){const y=ht.fromISO(s,r);if(y.isValid)return Gt.before(h,y)}}return Gt.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(n,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(n,r),Math.floor(l.diff(s,n).get(n))+(l.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:r}={}){return this.isValid?Gt.fromDateTimes(n||this.s,r||this.e):this}splitAt(...n){if(!this.isValid)return[];const r=n.map(So).filter(d=>this.contains(d)).sort((d,h)=>d.toMillis()-h.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const d=r[c]||this.e,h=+d>+this.e?this.e:d;s.push(Gt.fromDateTimes(l,h)),l=h,c+=1}return s}splitBy(n){const r=ht.fromDurationLike(n);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const d=[];for(;s<this.e;){const h=this.start.plus(r.mapUnits(m=>m*l));c=+h>+this.e?this.e:h,d.push(Gt.fromDateTimes(s,c)),s=c,l+=1}return d}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;const r=this.s>n.s?this.s:n.s,s=this.e<n.e?this.e:n.e;return r>=s?null:Gt.fromDateTimes(r,s)}union(n){if(!this.isValid)return this;const r=this.s<n.s?this.s:n.s,s=this.e>n.e?this.e:n.e;return Gt.fromDateTimes(r,s)}static merge(n){const[r,s]=n.sort((l,c)=>l.s-c.s).reduce(([l,c],d)=>c?c.overlaps(d)||c.abutsStart(d)?[l,c.union(d)]:[l.concat([c]),d]:[l,d],[[],null]);return s&&r.push(s),r}static xor(n){let r=null,s=0;const l=[],c=n.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),d=Array.prototype.concat(...c),h=d.sort((m,y)=>m.time-y.time);for(const m of h)s+=m.type==="s"?1:-1,s===1?r=m.time:(r&&+r!=+m.time&&l.push(Gt.fromDateTimes(r,m.time)),r=null);return Gt.merge(l)}difference(...n){return Gt.xor([this].concat(n)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:as}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=Mc,r={}){return this.isValid?An.create(this.s.loc.clone(r),n).formatInterval(this):as}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:as}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:as}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:as}toFormat(n,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(n)}${r}${this.e.toFormat(n)}`:as}toDuration(n,r){return this.isValid?this.e.diff(this.s,n,r):ht.invalid(this.invalidReason)}mapEndpoints(n){return Gt.fromDateTimes(n(this.s),n(this.e))}}class Co{static hasDST(n=Yt.defaultZone){const r=Fe.now().setZone(n).set({month:12});return!n.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(n){return qa.isValidZone(n)}static normalizeZone(n){return Gr(n,Yt.defaultZone)}static getStartOfWeek({locale:n=null,locObj:r=null}={}){return(r||xt.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:r=null}={}){return(r||xt.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:r=null}={}){return(r||xt.create(n)).getWeekendDays().slice()}static months(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||xt.create(r,s,c)).months(n)}static monthsFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||xt.create(r,s,c)).months(n,!0)}static weekdays(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||xt.create(r,s,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||xt.create(r,s,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return xt.create(n).meridiems()}static eras(n="short",{locale:r=null}={}){return xt.create(r,null,"gregory").eras(n)}static features(){return{relative:vw(),localeWeek:bw()}}}function P0(a,n){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(n)-r(a);return Math.floor(ht.fromMillis(s).as("days"))}function bO(a,n,r){const s=[["years",(m,y)=>y.year-m.year],["quarters",(m,y)=>y.quarter-m.quarter+(y.year-m.year)*4],["months",(m,y)=>y.month-m.month+(y.year-m.year)*12],["weeks",(m,y)=>{const v=P0(m,y);return(v-v%7)/7}],["days",P0]],l={},c=a;let d,h;for(const[m,y]of s)r.indexOf(m)>=0&&(d=m,l[m]=y(a,n),h=c.plus(l),h>n?(l[m]--,a=c.plus(l),a>n&&(h=a,l[m]--,a=c.plus(l))):a=h);return[a,l,h,d]}function wO(a,n,r,s){let[l,c,d,h]=bO(a,n,r);const m=n-l,y=r.filter(b=>["hours","minutes","seconds","milliseconds"].indexOf(b)>=0);y.length===0&&(d<n&&(d=l.plus({[h]:1})),d!==l&&(c[h]=(c[h]||0)+m/(d-l)));const v=ht.fromObject(c,s);return y.length>0?ht.fromMillis(m,s).shiftTo(...y).plus(v):v}const SO="missing Intl.DateTimeFormat.formatToParts support";function wt(a,n=r=>r){return{regex:a,deser:([r])=>n(dN(r))}}const xO="",Bw=`[ ${xO}]`,Uw=new RegExp(Bw,"g");function kO(a){return a.replace(/\./g,"\\.?").replace(Uw,Bw)}function F0(a){return a.replace(/\./g,"").replace(Uw," ").toLowerCase()}function Na(a,n){return a===null?null:{regex:RegExp(a.map(kO).join("|")),deser:([r])=>a.findIndex(s=>F0(r)===F0(s))+n}}function Z0(a,n){return{regex:a,deser:([,r,s])=>Zc(r,s),groups:n}}function fc(a){return{regex:a,deser:([n])=>n}}function EO(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function CO(a,n){const r=Ta(n),s=Ta(n,"{2}"),l=Ta(n,"{3}"),c=Ta(n,"{4}"),d=Ta(n,"{6}"),h=Ta(n,"{1,2}"),m=Ta(n,"{1,3}"),y=Ta(n,"{1,6}"),v=Ta(n,"{1,9}"),b=Ta(n,"{2,4}"),x=Ta(n,"{4,6}"),E=H=>({regex:RegExp(EO(H.val)),deser:([K])=>K,literal:!0}),F=(H=>{if(a.literal)return E(H);switch(H.val){case"G":return Na(n.eras("short"),0);case"GG":return Na(n.eras("long"),0);case"y":return wt(y);case"yy":return wt(b,Sh);case"yyyy":return wt(c);case"yyyyy":return wt(x);case"yyyyyy":return wt(d);case"M":return wt(h);case"MM":return wt(s);case"MMM":return Na(n.months("short",!0),1);case"MMMM":return Na(n.months("long",!0),1);case"L":return wt(h);case"LL":return wt(s);case"LLL":return Na(n.months("short",!1),1);case"LLLL":return Na(n.months("long",!1),1);case"d":return wt(h);case"dd":return wt(s);case"o":return wt(m);case"ooo":return wt(l);case"HH":return wt(s);case"H":return wt(h);case"hh":return wt(s);case"h":return wt(h);case"mm":return wt(s);case"m":return wt(h);case"q":return wt(h);case"qq":return wt(s);case"s":return wt(h);case"ss":return wt(s);case"S":return wt(m);case"SSS":return wt(l);case"u":return fc(v);case"uu":return fc(h);case"uuu":return wt(r);case"a":return Na(n.meridiems(),0);case"kkkk":return wt(c);case"kk":return wt(b,Sh);case"W":return wt(h);case"WW":return wt(s);case"E":case"c":return wt(r);case"EEE":return Na(n.weekdays("short",!1),1);case"EEEE":return Na(n.weekdays("long",!1),1);case"ccc":return Na(n.weekdays("short",!0),1);case"cccc":return Na(n.weekdays("long",!0),1);case"Z":case"ZZ":return Z0(new RegExp(`([+-]${h.source})(?::(${s.source}))?`),2);case"ZZZ":return Z0(new RegExp(`([+-]${h.source})(${s.source})?`),2);case"z":return fc(/[a-z_+-/]{1,256}?/i);case" ":return fc(/[^\S\n\r]/);default:return E(H)}})(a)||{invalidReason:SO};return F.token=a,F}const TO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function NO(a,n,r){const{type:s,value:l}=a;if(s==="literal"){const m=/^\s+$/.test(l);return{literal:!m,val:m?" ":l}}const c=n[s];let d=s;s==="hour"&&(n.hour12!=null?d=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?d="hour12":d="hour24":d=r.hour12?"hour12":"hour24");let h=TO[d];if(typeof h=="object"&&(h=h[c]),h)return{literal:!1,val:h}}function OO(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function jO(a,n,r){const s=a.match(n);if(s){const l={};let c=1;for(const d in r)if(ys(r,d)){const h=r[d],m=h.groups?h.groups+1:1;!h.literal&&h.token&&(l[h.token.val[0]]=h.deser(s.slice(c,c+m))),c+=m}return[s,l]}else return[s,{}]}function AO(a){const n=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Ye(a.z)||(r=qa.create(a.z)),Ye(a.Z)||(r||(r=new _n(a.Z)),s=a.Z),Ye(a.q)||(a.M=(a.q-1)*3+1),Ye(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ye(a.u)||(a.S=Qh(a.u)),[Object.keys(a).reduce((c,d)=>{const h=n(d);return h&&(c[h]=a[d]),c},{}),r,s]}let Lf=null;function _O(){return Lf||(Lf=Fe.fromMillis(1555555555555)),Lf}function DO(a,n){if(a.literal)return a;const r=An.macroTokenToFormatOpts(a.val),s=Vw(r,n);return s==null||s.includes(void 0)?a:s}function Iw(a,n){return Array.prototype.concat(...a.map(r=>DO(r,n)))}class $w{constructor(n,r){if(this.locale=n,this.format=r,this.tokens=Iw(An.parseFormat(r),n),this.units=this.tokens.map(s=>CO(s,n)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=OO(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(n){if(this.isValid){const[r,s]=jO(n,this.regex,this.handlers),[l,c,d]=s?AO(s):[null,null,void 0];if(ys(s,"a")&&ys(s,"H"))throw new os("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:d}}else return{input:n,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Hw(a,n,r){return new $w(a,r).explainFromTokens(n)}function MO(a,n,r){const{result:s,zone:l,specificOffset:c,invalidReason:d}=Hw(a,n,r);return[s,l,c,d]}function Vw(a,n){if(!a)return null;const s=An.create(n,a).dtFormatter(_O()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(d=>NO(d,a,c))}const Bf="Invalid DateTime",X0=864e13;function To(a){return new ja("unsupported zone",`the zone "${a.name}" is not supported`)}function Uf(a){return a.weekData===null&&(a.weekData=Rc(a.c)),a.weekData}function If(a){return a.localWeekData===null&&(a.localWeekData=Rc(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function pi(a,n){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Fe({...r,...n,old:r})}function qw(a,n,r){let s=a-n*60*1e3;const l=r.offset(s);if(n===l)return[s,n];s-=(l-n)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function hc(a,n){a+=n*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Ec(a,n,r){return qw(Fc(a),n,r)}function K0(a,n){const r=a.o,s=a.c.year+Math.trunc(n.years),l=a.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,zc(s,l))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},d=ht.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),h=Fc(c);let[m,y]=qw(h,r,a.zone);return d!==0&&(m+=d,y=a.zone.offset(m)),{ts:m,o:y}}function rs(a,n,r,s,l,c){const{setZone:d,zone:h}=r;if(a&&Object.keys(a).length!==0||n){const m=n||h,y=Fe.fromObject(a,{...r,zone:m,specificOffset:c});return d?y:y.setZone(h)}else return Fe.invalid(new ja("unparsable",`the input "${l}" can't be parsed as ${s}`))}function pc(a,n,r=!0){return a.isValid?An.create(xt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,n):null}function $f(a,n,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=ln(a.c.year,s?6:4),r==="year")return l;if(n){if(l+="-",l+=ln(a.c.month),r==="month")return l;l+="-"}else if(l+=ln(a.c.month),r==="month")return l;return l+=ln(a.c.day),l}function Q0(a,n,r,s,l,c,d){let h=!r||a.c.millisecond!==0||a.c.second!==0,m="";switch(d){case"day":case"month":case"year":break;default:if(m+=ln(a.c.hour),d==="hour")break;if(n){if(m+=":",m+=ln(a.c.minute),d==="minute")break;h&&(m+=":",m+=ln(a.c.second))}else{if(m+=ln(a.c.minute),d==="minute")break;h&&(m+=ln(a.c.second))}if(d==="second")break;h&&(!s||a.c.millisecond!==0)&&(m+=".",m+=ln(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?m+="Z":a.o<0?(m+="-",m+=ln(Math.trunc(-a.o/60)),m+=":",m+=ln(Math.trunc(-a.o%60))):(m+="+",m+=ln(Math.trunc(a.o/60)),m+=":",m+=ln(Math.trunc(a.o%60)))),c&&(m+="["+a.zone.ianaName+"]"),m}const Gw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},RO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Cc=["year","month","day","hour","minute","second","millisecond"],LO=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],BO=["year","ordinal","hour","minute","second","millisecond"];function Tc(a){const n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!n)throw new q1(a);return n}function J0(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Tc(a)}}function UO(a){if(No===void 0&&(No=Yt.now()),a.type!=="iana")return a.offset(No);const n=a.name;let r=xh.get(n);return r===void 0&&(r=a.offset(No),xh.set(n,r)),r}function W0(a,n){const r=Gr(n.zone,Yt.defaultZone);if(!r.isValid)return Fe.invalid(To(r));const s=xt.fromObject(n);let l,c;if(Ye(a.year))l=Yt.now();else{for(const m of Cc)Ye(a[m])&&(a[m]=Gw[m]);const d=yw(a)||gw(a);if(d)return Fe.invalid(d);const h=UO(r);[l,c]=Ec(a,h,r)}return new Fe({ts:l,zone:r,loc:s,o:c})}function eb(a,n,r){const s=Ye(r.round)?!0:r.round,l=Ye(r.rounding)?"trunc":r.rounding,c=(h,m)=>(h=Jh(h,s||r.calendary?0:2,r.calendary?"round":l),n.loc.clone(r).relFormatter(r).format(h,m)),d=h=>r.calendary?n.hasSame(a,h)?0:n.startOf(h).diff(a.startOf(h),h).get(h):n.diff(a,h).get(h);if(r.unit)return c(d(r.unit),r.unit);for(const h of r.units){const m=d(h);if(Math.abs(m)>=1)return c(m,h)}return c(a>n?-0:0,r.units[r.units.length-1])}function tb(a){let n={},r;return a.length>0&&typeof a[a.length-1]=="object"?(n=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[n,r]}let No;const xh=new Map;class Fe{constructor(n){const r=n.zone||Yt.defaultZone;let s=n.invalid||(Number.isNaN(n.ts)?new ja("invalid input"):null)||(r.isValid?null:To(r));this.ts=Ye(n.ts)?Yt.now():n.ts;let l=null,c=null;if(!s)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(r))[l,c]=[n.old.c,n.old.o];else{const h=Fr(n.o)&&!n.old?n.o:r.offset(this.ts);l=hc(this.ts,h),s=Number.isNaN(l.year)?new ja("invalid input"):null,l=s?null:l,c=s?null:h}this._zone=r,this.loc=n.loc||xt.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Fe({})}static local(){const[n,r]=tb(arguments),[s,l,c,d,h,m,y]=r;return W0({year:s,month:l,day:c,hour:d,minute:h,second:m,millisecond:y},n)}static utc(){const[n,r]=tb(arguments),[s,l,c,d,h,m,y]=r;return n.zone=_n.utcInstance,W0({year:s,month:l,day:c,hour:d,minute:h,second:m,millisecond:y},n)}static fromJSDate(n,r={}){const s=yN(n)?n.valueOf():NaN;if(Number.isNaN(s))return Fe.invalid("invalid input");const l=Gr(r.zone,Yt.defaultZone);return l.isValid?new Fe({ts:s,zone:l,loc:xt.fromObject(r)}):Fe.invalid(To(l))}static fromMillis(n,r={}){if(Fr(n))return n<-X0||n>X0?Fe.invalid("Timestamp out of range"):new Fe({ts:n,zone:Gr(r.zone,Yt.defaultZone),loc:xt.fromObject(r)});throw new jn(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,r={}){if(Fr(n))return new Fe({ts:n*1e3,zone:Gr(r.zone,Yt.defaultZone),loc:xt.fromObject(r)});throw new jn("fromSeconds requires a numerical input")}static fromObject(n,r={}){n=n||{};const s=Gr(r.zone,Yt.defaultZone);if(!s.isValid)return Fe.invalid(To(s));const l=xt.fromObject(r),c=Lc(n,J0),{minDaysInFirstWeek:d,startOfWeek:h}=U0(c,l),m=Yt.now(),y=Ye(r.specificOffset)?s.offset(m):r.specificOffset,v=!Ye(c.ordinal),b=!Ye(c.year),x=!Ye(c.month)||!Ye(c.day),E=b||x,N=c.weekYear||c.weekNumber;if((E||v)&&N)throw new os("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&v)throw new os("Can't mix ordinal dates with month/day");const F=N||c.weekday&&!E;let H,K,X=hc(m,y);F?(H=LO,K=RO,X=Rc(X,d,h)):v?(H=BO,K=zO,X=zf(X)):(H=Cc,K=Gw);let R=!1;for(const pe of H){const Ie=c[pe];Ye(Ie)?R?c[pe]=K[pe]:c[pe]=X[pe]:R=!0}const Y=F?hN(c,d,h):v?pN(c):yw(c),he=Y||gw(c);if(he)return Fe.invalid(he);const ge=F?L0(c,d,h):v?B0(c):c,[G,de]=Ec(ge,y,s),ne=new Fe({ts:G,zone:s,o:de,loc:l});return c.weekday&&E&&n.weekday!==ne.weekday?Fe.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${ne.toISO()}`):ne.isValid?ne:Fe.invalid(ne.invalid)}static fromISO(n,r={}){const[s,l]=iO(n);return rs(s,l,r,"ISO 8601",n)}static fromRFC2822(n,r={}){const[s,l]=sO(n);return rs(s,l,r,"RFC 2822",n)}static fromHTTP(n,r={}){const[s,l]=oO(n);return rs(s,l,r,"HTTP",r)}static fromFormat(n,r,s={}){if(Ye(n)||Ye(r))throw new jn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,d=xt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[h,m,y,v]=MO(d,n,r);return v?Fe.invalid(v):rs(h,m,s,`format ${r}`,n,y)}static fromString(n,r,s={}){return Fe.fromFormat(n,r,s)}static fromSQL(n,r={}){const[s,l]=pO(n);return rs(s,l,r,"SQL",n)}static invalid(n,r=null){if(!n)throw new jn("need to specify a reason the DateTime is invalid");const s=n instanceof ja?n:new ja(n,r);if(Yt.throwOnInvalid)throw new VT(s);return new Fe({invalid:s})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,r={}){const s=Vw(n,xt.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(n,r={}){return Iw(An.parseFormat(n),xt.fromObject(r)).map(l=>l.val).join("")}static resetCache(){No=void 0,xh.clear()}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Uf(this).weekYear:NaN}get weekNumber(){return this.isValid?Uf(this).weekNumber:NaN}get weekday(){return this.isValid?Uf(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?If(this).weekday:NaN}get localWeekNumber(){return this.isValid?If(this).weekNumber:NaN}get localWeekYear(){return this.isValid?If(this).weekYear:NaN}get ordinal(){return this.isValid?zf(this.c).ordinal:NaN}get monthShort(){return this.isValid?Co.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Co.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Co.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Co.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const n=864e5,r=6e4,s=Fc(this.c),l=this.zone.offset(s-n),c=this.zone.offset(s+n),d=this.zone.offset(s-l*r),h=this.zone.offset(s-c*r);if(d===h)return[this];const m=s-d*r,y=s-h*r,v=hc(m,d),b=hc(y,h);return v.hour===b.hour&&v.minute===b.minute&&v.second===b.second&&v.millisecond===b.millisecond?[pi(this,{ts:m}),pi(this,{ts:y})]:[this]}get isInLeapYear(){return Io(this.year)}get daysInMonth(){return zc(this.year,this.month)}get daysInYear(){return this.isValid?cs(this.year):NaN}get weeksInWeekYear(){return this.isValid?zo(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?zo(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){const{locale:r,numberingSystem:s,calendar:l}=An.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(n=0,r={}){return this.setZone(_n.instance(n),r)}toLocal(){return this.setZone(Yt.defaultZone)}setZone(n,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(n=Gr(n,Yt.defaultZone),n.equals(this.zone))return this;if(n.isValid){let l=this.ts;if(r||s){const c=n.offset(this.ts),d=this.toObject();[l]=Ec(d,c,n)}return pi(this,{ts:l,zone:n})}else return Fe.invalid(To(n))}reconfigure({locale:n,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:n,numberingSystem:r,outputCalendar:s});return pi(this,{loc:l})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;const r=Lc(n,J0),{minDaysInFirstWeek:s,startOfWeek:l}=U0(r,this.loc),c=!Ye(r.weekYear)||!Ye(r.weekNumber)||!Ye(r.weekday),d=!Ye(r.ordinal),h=!Ye(r.year),m=!Ye(r.month)||!Ye(r.day),y=h||m,v=r.weekYear||r.weekNumber;if((y||d)&&v)throw new os("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new os("Can't mix ordinal dates with month/day");let b;c?b=L0({...Rc(this.c,s,l),...r},s,l):Ye(r.ordinal)?(b={...this.toObject(),...r},Ye(r.day)&&(b.day=Math.min(zc(b.year,b.month),b.day))):b=B0({...zf(this.c),...r});const[x,E]=Ec(b,this.o,this.zone);return pi(this,{ts:x,o:E})}plus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n);return pi(this,K0(this,r))}minus(n){if(!this.isValid)return this;const r=ht.fromDurationLike(n).negate();return pi(this,K0(this,r))}startOf(n,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=ht.normalizeUnit(n);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:d}=this;d<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(n,r){return this.isValid?this.plus({[n]:1}).startOf(n,r).minus(1):this}toFormat(n,r={}){return this.isValid?An.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,n):Bf}toLocaleString(n=Mc,r={}){return this.isValid?An.create(this.loc.clone(r),n).formatDateTime(this):Bf}toLocaleParts(n={}){return this.isValid?An.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:d="milliseconds"}={}){if(!this.isValid)return null;d=Tc(d);const h=n==="extended";let m=$f(this,h,d);return Cc.indexOf(d)>=3&&(m+="T"),m+=Q0(this,h,r,s,l,c,d),m}toISODate({format:n="extended",precision:r="day"}={}){return this.isValid?$f(this,n==="extended",Tc(r)):null}toISOWeekDate(){return pc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:d="extended",precision:h="milliseconds"}={}){return this.isValid?(h=Tc(h),(l&&Cc.indexOf(h)>=3?"T":"")+Q0(this,d==="extended",r,n,s,c,h)):null}toRFC2822(){return pc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return pc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?$f(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||n)&&(s&&(l+=" "),r?l+="z":n&&(l+="ZZ")),pc(this,l,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():Bf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};const r={...this.c};return n.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,r="milliseconds",s={}){if(!this.isValid||!n.isValid)return ht.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=gN(r).map(ht.normalizeUnit),d=n.valueOf()>this.valueOf(),h=d?this:n,m=d?n:this,y=wO(h,m,c,l);return d?y.negate():y}diffNow(n="milliseconds",r={}){return this.diff(Fe.now(),n,r)}until(n){return this.isValid?Gt.fromDateTimes(this,n):this}hasSame(n,r,s){if(!this.isValid)return!1;const l=n.valueOf(),c=this.setZone(n.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;const r=n.base||Fe.fromObject({},{zone:this.zone}),s=n.padding?this<r?-n.padding:n.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=n.unit;return Array.isArray(n.unit)&&(l=n.unit,c=void 0),eb(r,this.plus(s),{...n,numeric:"always",units:l,unit:c})}toRelativeCalendar(n={}){return this.isValid?eb(n.base||Fe.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(Fe.isDateTime))throw new jn("min requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.min)}static max(...n){if(!n.every(Fe.isDateTime))throw new jn("max requires all arguments be DateTimes");return I0(n,r=>r.valueOf(),Math.max)}static fromFormatExplain(n,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,d=xt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return Hw(d,n,r)}static fromStringExplain(n,r,s={}){return Fe.fromFormatExplain(n,r,s)}static buildFormatParser(n,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=xt.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new $w(c,n)}static fromFormatParser(n,r,s={}){if(Ye(n)||Ye(r))throw new jn("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,d=xt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!d.equals(r.locale))throw new jn(`fromFormatParser called with a locale of ${d}, but the format parser was created for ${r.locale}`);const{result:h,zone:m,specificOffset:y,invalidReason:v}=r.explainFromTokens(n);return v?Fe.invalid(v):rs(h,m,s,`format ${r.format}`,n,y)}static get DATE_SHORT(){return Mc}static get DATE_MED(){return G1}static get DATE_MED_WITH_WEEKDAY(){return YT}static get DATE_FULL(){return Y1}static get DATE_HUGE(){return P1}static get TIME_SIMPLE(){return F1}static get TIME_WITH_SECONDS(){return Z1}static get TIME_WITH_SHORT_OFFSET(){return X1}static get TIME_WITH_LONG_OFFSET(){return K1}static get TIME_24_SIMPLE(){return Q1}static get TIME_24_WITH_SECONDS(){return J1}static get TIME_24_WITH_SHORT_OFFSET(){return W1}static get TIME_24_WITH_LONG_OFFSET(){return ew}static get DATETIME_SHORT(){return tw}static get DATETIME_SHORT_WITH_SECONDS(){return nw}static get DATETIME_MED(){return aw}static get DATETIME_MED_WITH_SECONDS(){return rw}static get DATETIME_MED_WITH_WEEKDAY(){return PT}static get DATETIME_FULL(){return iw}static get DATETIME_FULL_WITH_SECONDS(){return sw}static get DATETIME_HUGE(){return ow}static get DATETIME_HUGE_WITH_SECONDS(){return lw}}function So(a){if(Fe.isDateTime(a))return a;if(a&&a.valueOf&&Fr(a.valueOf()))return Fe.fromJSDate(a);if(a&&typeof a=="object")return Fe.fromObject(a);throw new jn(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const IO="3.7.2",$O=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Fe,Duration:ht,FixedOffsetZone:_n,IANAZone:qa,Info:Co,Interval:Gt,InvalidZone:dw,Settings:Yt,SystemZone:Uo,VERSION:IO,Zone:Ss},Symbol.toStringTag,{value:"Module"}));window.Rete=Mk;window.React=rk;window.RefComponent=$h;window.luxon=$O;window.nodeRegistry=On;window.sockets=N1;window.socket=ye;window.apiUrl=Gn;window.getApiBase=qc;window.apiFetch=async function(a,n={}){const r=Gn(a);return fetch(r,n)};let Zr={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const kh=new Set;function Yw(a){return kh.add(a),a({...Zr}),()=>kh.delete(a)}function $r(a){Zr={...Zr,...a},kh.forEach(n=>n({...Zr}))}function HO(){return{...Zr}}async function VO(){$r({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(Gn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const n=await a.json(),r=n.length,s=n.filter(m=>m.includes("/00_")),l=n.filter(m=>!m.includes("/00_"));$r({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const m of s){const y=m.split("/").pop().replace(".js","");$r({status:`Loading ${y}...`});try{await nb(Gn(m)),c++,$r({loadedCount:c,progress:Math.round(c/r*100)})}catch(v){console.error(`[PluginLoader] Failed to load infrastructure ${m}`,v),Zr.failedPlugins.push({name:y,error:v.message})}}$r({status:`Loading ${l.length} node plugins in parallel...`});const d=await Promise.allSettled(l.map(async m=>{const y=m.split("/").pop().replace(".js","");try{return await nb(Gn(m)),c++,$r({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:y}}catch(v){return console.error(`[PluginLoader] Failed to load ${m}`,v),Zr.failedPlugins.push({name:y,error:v.message}),{success:!1,name:y,error:v.message}}})),h=Zr.failedPlugins.length;$r({isLoading:!1,progress:100,status:h>0?`Loaded ${c} plugins (${h} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),$r({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function nb(a){return new Promise((n,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=n,s.onerror=r,document.body.appendChild(s)})}const Pw=k.createContext(null),ab={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function qO({id:a,type:n,message:r,duration:s,onRemove:l,action:c,actionLabel:d}){const[h,m]=k.useState(!1),y=ab[n]||ab.info;k.useEffect(()=>{if(s>0){const x=setTimeout(()=>{m(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(x)}},[a,s,l]);const v=()=>{m(!0),setTimeout(()=>l(a),300)},b=()=>{c&&c(),v()};return p.jsxs("div",{className:`toast ${y.className} ${h?"toast-exit":""}`,children:[p.jsx("span",{className:"toast-icon",children:y.icon}),p.jsx("span",{className:"toast-message",children:r}),c&&d&&p.jsx("button",{className:"toast-action",onClick:b,children:d}),p.jsx("button",{className:"toast-close",onClick:v,children:""})]})}function GO({children:a}){const[n,r]=k.useState([]);let s=0;const l=k.useCallback((h,m,y={})=>{const v=++s,b=typeof y=="number"?y:y.duration??4e3,x=typeof y=="object"?y.action:null,E=typeof y=="object"?y.actionLabel:null;return r(N=>[...N,{id:v,type:h,message:m,duration:b,action:x,actionLabel:E}]),v},[]),c=k.useCallback(h=>{r(m=>m.filter(y=>y.id!==h))},[]),d={success:(h,m)=>l("success",h,m),error:(h,m)=>l("error",h,typeof m=="number"?m:{duration:6e3,...m}),warning:(h,m)=>l("warning",h,m),info:(h,m)=>l("info",h,m),dismiss:c,dismissAll:()=>r([])};return p.jsxs(Pw.Provider,{value:d,children:[a,p.jsx("div",{className:"toast-container",children:n.map(h=>p.jsx(qO,{id:h.id,type:h.type,message:h.message,duration:h.duration,onRemove:c,action:h.action,actionLabel:h.actionLabel},h.id))})]})}function np(){const a=k.useContext(Pw);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function YO(){const a=np();return k.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const rb=window.location.pathname.includes("/api/hassio/ingress/");function PO({onSave:a,onLoad:n,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:d,isMerged:h=!1,onToggleMerged:m}){const[y,v]=k.useState(!1),[b,x]=k.useState(!1),[E,N]=k.useState(!1),[F,H]=k.useState([]),[K,X]=k.useState(!1),[R,Y]=k.useState(!1),[he,ge]=k.useState(!1),[G,de]=k.useState(null),ne=np(),[pe,Ie]=k.useState(()=>{const C=localStorage.getItem("dock-position");return C?JSON.parse(C):{x:20,y:20}}),[ze,ae]=k.useState(!1),[ke,He]=k.useState({x:0,y:0}),[U,W]=k.useState(!0),[ce,je]=k.useState(!0),[B,S]=k.useState(!1),[L,j]=k.useState(new Date),[M,le]=k.useState({backend:ye.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[ve,Ae]=k.useState({loaded:0,failed:0,total:0}),[Qe,Ze]=k.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let Rt;const $t=k.useRef(null),_t=k.useRef(null);k.useEffect(()=>{(async()=>{try{const D=await fetch("/api/version");if(D.ok){const oe=await D.json();de(oe.version)}}catch{}})()},[]),k.useEffect(()=>{Rt=Yw(D=>{let oe=0,fe=D.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(oe=window.nodeRegistry.getAll().length,(!fe||oe>fe)&&(fe=oe)):oe=D.loadedCount,Ae({loaded:oe,failed:D.failedPlugins?.length||0,total:fe})});const C=D=>{D.target.tagName==="INPUT"||D.target.tagName==="TEXTAREA"||D.target.isContentEditable||(D.key==="?"||D.shiftKey&&D.code==="Slash")&&(D.preventDefault(),x(!0))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[]),k.useEffect(()=>{const C=()=>{le(Me=>({...Me,backend:!0})),ye.emit("request-hue-status")},D=()=>le(Me=>({...Me,backend:!1})),oe=Me=>le(rt=>({...rt,ha:{connected:Me.connected,wsConnected:Me.wsConnected,deviceCount:Me.deviceCount||0}})),fe=Me=>{Me.hue&&le(rt=>({...rt,hue:Me.hue})),Me.kasa&&le(rt=>({...rt,kasa:Me.kasa}))},be=Me=>{le(rt=>({...rt,hue:{connected:Me.connected,deviceCount:Me.deviceCount||0,bridgeIp:Me.bridgeIp||null}}))};ye.on("connect",C),ye.on("disconnect",D),ye.on("ha-connection-status",oe),ye.on("device-counts",fe),ye.on("hue-connection-status",be);const Oe=Me=>Ze(Me),Ve=Me=>Ze(rt=>({...rt,...Me,running:!0})),Xe=Me=>Ze(rt=>({...rt,...Me,running:!1}));ye.on("engine-status",Oe),ye.on("engine-started",Ve),ye.on("engine-stopped",Xe),le(Me=>({...Me,backend:ye.connected})),ye.connected&&(ye.emit("request-hue-status"),ye.emit("request-engine-status"));const yt=HO();let Ue=0,qe=yt.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(Ue=window.nodeRegistry.getAll().length,(!qe||Ue>qe)&&(qe=Ue)):Ue=yt.loadedCount,Ae({loaded:Ue,failed:yt.failedPlugins?.length||0,total:qe}),()=>{ye.off("connect",C),ye.off("disconnect",D),ye.off("ha-connection-status",oe),ye.off("device-counts",fe),ye.off("hue-connection-status",be),ye.off("engine-status",Oe),ye.off("engine-started",Ve),ye.off("engine-stopped",Xe),Rt&&Rt()}},[]),k.useEffect(()=>{const C=setInterval(()=>{j(new Date)},1e3);return()=>clearInterval(C)},[]);const Mn=()=>{const C={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return L.toLocaleDateString("en-US",C)};k.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(pe))},[pe]);const pn=C=>{h||C.target.closest(".dock-header")&&(ae(!0),He({x:C.clientX-pe.x,y:C.clientY-pe.y}))},dn=C=>{ze&&Ie({x:C.clientX-ke.x,y:C.clientY-ke.y})},Rn=()=>{ae(!1)};k.useEffect(()=>{if(ze)return window.addEventListener("mousemove",dn),window.addEventListener("mouseup",Rn),()=>{window.removeEventListener("mousemove",dn),window.removeEventListener("mouseup",Rn)}},[ze,ke]);const We=()=>{_t.current?.click()},V=C=>{const D=C.target.files?.[0];if(D){const oe=new FileReader;oe.onload=fe=>{try{const be=JSON.parse(fe.target.result);c(be)}catch(be){console.error("Failed to parse JSON:",be),alert("Invalid JSON file")}},oe.readAsText(D)}C.target.value=""},ie=async()=>{N(!0),X(!0);try{const C=await qn("/api/engine/graphs");if(C.ok){const D=await C.json();H(D.graphs||[])}else ne.error("Failed to load graphs list"),H([])}catch(C){console.error("Failed to fetch server graphs:",C),ne.error("Failed to connect to server"),H([])}finally{X(!1)}},Q=async C=>{try{const D=await qn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(D.ok){const oe=await D.json();oe.graph&&(c(oe.graph),N(!1),ne.success(`Loaded: ${C.replace(".json","")}`))}else ne.error("Failed to load graph")}catch(D){console.error("Failed to load graph:",D),ne.error("Failed to load graph")}},_e=async(C,D)=>{D.stopPropagation();try{const oe=await qn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(oe.ok){const fe=await oe.json();if(fe.graph){const be=new Blob([JSON.stringify(fe.graph,null,2)],{type:"application/json"}),Oe=URL.createObjectURL(be),Ve=document.createElement("a");Ve.href=Oe,Ve.download=C.endsWith(".json")?C:`${C}.json`,Ve.click(),URL.revokeObjectURL(Oe),ne.success(`Downloaded: ${C.replace(".json","")}`)}}else ne.error("Failed to download graph")}catch(oe){console.error("Failed to download graph:",oe),ne.error("Failed to download graph")}},xe=async()=>{if(!R){Y(!0);try{const C=await qn("/api/update/check?force=true");if(!C.ok){const oe=await C.text();throw new Error(oe||`HTTP ${C.status}`)}const D=await C.json();if(D.isAddon){D.hasUpdate?ne.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):ne.success(` You're up to date! (v${D.currentVersion})`,4e3);return}D.hasUpdate?ne.info(` Update available: ${D.currentVersion}  ${D.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{ye.emit("request-show-update-modal",D),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:D}))}}):ne.success(` You're up to date! (v${D.currentVersion})`,4e3)}catch(C){console.error("Failed to check for updates:",C),ne.error("Failed to check for updates: "+C.message,5e3)}finally{Y(!1)}}},se=async()=>{if(!he){ge(!0);try{const C=await qn("/api/update/plugins/check");if(!C.ok)throw new Error(`HTTP ${C.status}`);const D=await C.json();if(!D.hasUpdates){ne.success(" Plugins are up to date!",3e3);return}const oe=(D.newPlugins?.length||0)+(D.modifiedPlugins?.length||0);ne.info(` ${oe} plugin update(s) available. Downloading...`,3e3);const fe=await qn("/api/update/plugins",{method:"POST"});if(!fe.ok)throw new Error(`HTTP ${fe.status}`);const be=await fe.json();be.success&&be.updated?.length>0?ne.success(` Updated ${be.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):be.updated?.length===0?ne.info("No plugins needed updating",3e3):ne.error("Plugin update failed: "+(be.error||"Unknown error"),5e3)}catch(C){console.error("Failed to update plugins:",C),ne.error("Failed to update plugins: "+C.message,5e3)}finally{ge(!1)}}};return p.jsxs("div",{ref:$t,className:`dock-container ${h?"dock-merged":""}`,style:{...h?{cursor:"default"}:{left:`${pe.x}px`,top:`${pe.y}px`,cursor:ze?"grabbing":"default"}},onMouseDown:pn,children:[p.jsxs("div",{className:"dock-header",style:{cursor:h?"default":"grab"},children:[p.jsxs("div",{className:"dock-header-row",children:[p.jsx("span",{className:"dock-title",children:" Control Panel"}),p.jsx("button",{type:"button",className:"dock-btn-small",onClick:C=>{C.stopPropagation(),m?.()},onMouseDown:C=>C.stopPropagation(),title:h?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:h?"Pop out":"Merge"})]}),p.jsx("span",{className:"dock-datetime",children:Mn()})]}),p.jsxs("div",{className:"dock-section",children:[p.jsx("div",{className:"dock-section-header",onClick:()=>W(!U),children:p.jsxs("span",{children:[U?"":""," Graph Tools ",d&&p.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),U&&p.jsxs("div",{className:"dock-section-content",children:[p.jsxs("button",{onClick:a,className:`dock-btn ${d?"dock-btn-unsaved":""}`,children:[" Save ",d&&"*"]}),p.jsx("button",{onClick:n,className:"dock-btn",children:" Load Last"}),p.jsx("button",{onClick:ie,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),p.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),p.jsx("button",{onClick:We,className:"dock-btn",children:" Import File"}),p.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),p.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),p.jsx("button",{onClick:()=>ye.emit(Qe.running?"stop-engine":"start-engine"),className:`dock-btn ${Qe.running?"dock-btn-active":""}`,title:Qe.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:Qe.running?" Stop Engine":" Start Engine"}),p.jsx("input",{ref:_t,type:"file",accept:".json",style:{display:"none"},onChange:V})]})]}),p.jsxs("div",{className:"dock-section",children:[p.jsx("div",{className:"dock-section-header",onClick:()=>je(!ce),children:p.jsxs("span",{children:[ce?"":""," Connection Status"]})}),ce&&p.jsxs("div",{className:"dock-section-content dock-status-grid",children:[p.jsxs("div",{className:`dock-status-item ${M.backend?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Backend"}),p.jsx("span",{className:"dock-status-value",children:M.backend?"Connected":"Offline"})]}),p.jsxs("div",{className:`dock-status-item ${M.ha.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),p.jsx("span",{className:"dock-status-value",children:M.ha.connected?`${M.ha.deviceCount} devices`:"Offline"})]}),p.jsxs("div",{className:`dock-status-item ${M.hue.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),p.jsx("span",{className:"dock-status-value",children:M.hue.connected?`${M.hue.deviceCount||0} lights${M.hue.bridgeIp?` (${M.hue.bridgeIp})`:""}`:"Offline"})]}),M.kasa.deviceCount>0&&p.jsxs("div",{className:`dock-status-item ${M.kasa.connected?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot"}),p.jsx("span",{className:"dock-status-label",children:"Kasa"}),p.jsxs("span",{className:"dock-status-value",children:[M.kasa.deviceCount," devices"]})]}),p.jsxs("div",{className:"dock-status-item plugins",children:[p.jsx("span",{className:"dock-status-dot",style:{background:ve.failed>0?"#f59e0b":"#10b981"}}),p.jsx("span",{className:"dock-status-label",children:"Plugins"}),p.jsx("span",{className:"dock-status-value",children:ve.total>0?`${ve.loaded} / ${ve.total} loaded${ve.failed>0?` (${ve.failed} failed)`:""}`:`${ve.loaded} loaded`})]}),p.jsxs("div",{className:`dock-status-item ${Qe.running?"connected":"disconnected"}`,children:[p.jsx("span",{className:"dock-status-dot",style:{background:Qe.running?"#10b981":"#6b7280"}}),p.jsx("span",{className:"dock-status-label",children:"Engine"}),p.jsx("span",{className:"dock-status-value",children:Qe.running?`Running (${Qe.nodeCount} nodes)`:"Stopped"})]})]})]}),p.jsx(qC,{isExpanded:B,onToggle:()=>S(!B)}),p.jsxs("div",{className:"dock-section",children:[p.jsxs("div",{className:"dock-section-content",children:[p.jsx("button",{onClick:()=>v(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),p.jsx("button",{onClick:()=>x(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),p.jsx("button",{onClick:async()=>{let C=G||"unknown";try{const be=await fetch("/api/version");be.ok&&(C=(await be.json()).version||C)}catch{}const D={version:C,userAgent:navigator.userAgent,isAddon:rb,backend:M.backend,ha:M.ha.connected,engine:Qe.running,plugins:ve.loaded},oe=Object.entries(D).map(([be,Oe])=>`- **${be}**: ${Oe}`).join(`
`),fe=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");fe.searchParams.set("template","bug_report.md"),fe.searchParams.set("title","[Bug]: "),fe.searchParams.set("body",`##  Environment (auto-filled)
${oe}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(fe.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),p.jsx("button",{onClick:()=>{const C=`${window.location.origin}/tools/debug_dashboard.html`;window.open(C,"_blank")},className:"dock-btn",title:"Open Debug Dashboard in new tab",children:" Debug Dashboard"}),rb?p.jsx("button",{onClick:()=>ne.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):p.jsx("button",{onClick:xe,disabled:R,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:R?" Checking...":" Check for Updates"}),p.jsx("button",{onClick:se,disabled:he,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:he?" Updating...":" Update Plugins"})]}),G&&p.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",G]})]}),p.jsx($C,{isOpen:y,onClose:()=>v(!1)}),p.jsx(VC,{isOpen:b,onClose:()=>x(!1)}),E&&p.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:p.jsxs("div",{className:"modal server-graphs-modal",onClick:C=>C.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:" Saved Graphs"}),p.jsx("button",{className:"modal-close",onClick:()=>N(!1),children:""})]}),p.jsx("div",{className:"modal-body",children:K?p.jsx("div",{className:"loading-message",children:"Loading graphs..."}):F.length===0?p.jsxs("div",{className:"empty-message",children:[p.jsx("p",{children:"No saved graphs found."}),p.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):p.jsx("div",{className:"graphs-list",children:F.map((C,D)=>p.jsxs("div",{className:"graph-item",children:[p.jsxs("div",{className:"graph-info",onClick:()=>Q(C.name),title:"Click to load this graph",children:[p.jsx("span",{className:"graph-name",children:C.displayName}),p.jsx("span",{className:"graph-date",children:new Date(C.modified).toLocaleDateString()})]}),p.jsx("button",{className:"graph-download-btn",onClick:oe=>_e(C.name,oe),title:"Download this graph to your computer",children:""})]},D))})})]})})]})}function FO({dockSlotRef:a}){const[n,r]=k.useState(!0),[s,l]=k.useState(!0),[c,d]=k.useState(null),[h,m]=k.useState(null),[y,v]=k.useState(ye?.connected??!1),[b,x]=k.useState({connected:!1,wsConnected:!1,deviceCount:0}),[E,N]=k.useState(new Map),[F,H]=k.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[K,X]=k.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),[R,Y]=k.useState(null),he=k.useRef(null);k.useEffect(()=>{if(!ye)return;const ae=()=>{v(!0),ye.emit("request-ha-status")},ke=()=>{v(!1),x({connected:!1,wsConnected:!1,deviceCount:0})},He=ce=>{x(ce)};ye.on("connect",ae),ye.on("disconnect",ke),ye.on("ha-connection-status",He),ye.on("forecast-update",ce=>{d(ce)});const U=ce=>{Y({temp:ce.tempf,humidity:ce.humidity,windSpeed:ce.windspeedmph,windDir:ce.winddir,rainRate:ce.hourlyrainin,dailyRain:ce.dailyrainin,source:ce._source||"ambient"})};ye.on("weather-update",U),ye.emit("request-weather-update");const W=ce=>{const{id:je,state:B,on:S,name:L}=ce;if(!je)return;const j=S!==void 0?S:B==="on"||B==="playing"||B==="open",M=L||ce.friendly_name||ce.attributes?.friendly_name||je.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(je.includes("light.")||je.includes("switch.")||je.startsWith("kasa_"))&&N(ve=>{const Ae=new Map(ve);return j?Ae.set(je,{name:M,on:!0}):Ae.delete(je),Ae})};return ye.on("device-state-update",W),ye.emit("request-forecast"),ye.connected&&(v(!0),ye.emit("request-ha-status")),()=>{ye.off("connect",ae),ye.off("disconnect",ke),ye.off("ha-connection-status",He),ye.off("forecast-update"),ye.off("weather-update",U),ye.off("device-state-update",W)}},[]);const ge=()=>{ye?.emit("request-forecast"),ye?.emit("request-weather-update")},G=ae=>{if(ae==null)return"";const ke=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],He=Math.round(ae/22.5)%16;return ke[He]},de=ae=>{const ke=(ae||"").toLowerCase();return ke.includes("clear")||ke.includes("sun")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"5"}),p.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),p.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),p.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),p.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),p.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),p.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),p.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):ke.includes("rain")||ke.includes("drizzle")||ke.includes("shower")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),p.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),p.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),p.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),p.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),p.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):ke.includes("partly")||ke.includes("partial")||ke.includes("few")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),p.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),p.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),p.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),p.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),p.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),p.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):ke.includes("snow")||ke.includes("flurr")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),p.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),p.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),p.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),p.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),p.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),p.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):ke.includes("thunder")||ke.includes("storm")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),p.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):ke.includes("fog")||ke.includes("mist")||ke.includes("haze")?p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),p.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),p.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},ne=ae=>{if(!ae)return{day:"",date:""};let ke;if(typeof ae=="string"&&ae.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const W=ae.match(/(\w+),\s*(\w+)\s*(\d+)/);return W?{day:`${W[1]}, ${W[2]}`,date:W[3]}:{day:ae,date:""}}if(ke=new Date(parseInt(ae)||ae),isNaN(ke.getTime()))return{day:ae,date:""};const He=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${He[ke.getUTCDay()]}, ${U[ke.getUTCMonth()]}`,date:`${ke.getUTCDate()}`}},pe=()=>{if(!c||!c.length)return p.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(h!==null){const ae=c[h],ke=ne(ae.date||ae.day);return p.jsxs("div",{className:"forecast-detail",children:[p.jsxs("div",{className:"forecast-detail-header",children:[p.jsx("button",{className:"detail-back-btn",onClick:()=>m(null),children:" Back"}),p.jsxs("span",{className:"detail-date",children:[ke.day," ",ke.date]})]}),p.jsxs("div",{className:"detail-main",children:[p.jsx("div",{className:"detail-icon",children:de(ae.conditions||ae.condition)}),p.jsxs("div",{className:"detail-temps",children:[p.jsxs("div",{className:"detail-high",children:[ae.high,""]}),p.jsxs("div",{className:"detail-low",children:[ae.low,""]})]}),p.jsx("div",{className:"detail-condition",children:ae.conditions||ae.condition||"N/A"})]}),ae.description&&p.jsx("div",{className:"detail-description",children:ae.description}),p.jsxs("div",{className:"detail-stats",children:[p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Precipitation"}),p.jsx("span",{className:"stat-value",children:ae.precipitation||ae.precip||"0%"})]}),ae.humidity&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Humidity"}),p.jsxs("span",{className:"stat-value",children:[ae.humidity,"%"]})]}),ae.wind&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:"Wind"}),p.jsx("span",{className:"stat-value",children:ae.wind})]}),(ae.sunrise||ae.sunset)&&p.jsxs("div",{className:"detail-sun-times",children:[ae.sunrise&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:" Sunrise"}),p.jsx("span",{className:"stat-value",children:ae.sunrise})]}),ae.sunset&&p.jsxs("div",{className:"detail-stat",children:[p.jsx("span",{className:"stat-label",children:" Sunset"}),p.jsx("span",{className:"stat-value",children:ae.sunset})]})]})]})]})}return c.slice(0,5).map((ae,ke)=>{const He=ne(ae.date||ae.day),U=ke===0;return p.jsxs("div",{className:`forecast-card ${U&&R?"forecast-card-today":""}`,onClick:()=>m(ke),children:[p.jsxs("div",{className:"forecast-row-top",children:[p.jsxs("div",{className:"forecast-date",children:[p.jsx("span",{className:"date-day",children:He.day}),p.jsx("span",{className:"date-num",children:He.date})]}),p.jsx("div",{className:"forecast-icon",children:de(ae.conditions||ae.condition)})]}),U&&R&&p.jsxs("div",{className:"station-data",children:[p.jsxs("div",{className:"station-current-temp",children:[Math.round(R.temp),"",p.jsx("span",{className:"station-label",children:"now"})]}),p.jsxs("div",{className:"station-details",children:[p.jsxs("span",{className:"station-detail",title:"Wind",children:[" ",Math.round(R.windSpeed||0)," mph ",G(R.windDir)]}),R.rainRate>0&&p.jsxs("span",{className:"station-detail station-rain",title:"Rain Rate",children:[" ",R.rainRate.toFixed(2),'"/hr']})]})]}),p.jsxs("div",{className:"forecast-row-bottom",children:[p.jsxs("span",{className:"temp-low",children:[ae.low,""]}),p.jsxs("span",{className:"temp-high",children:[ae.high,""]}),p.jsxs("span",{className:"precip-group",children:[p.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),p.jsx("path",{d:"M16 14v4"}),p.jsx("path",{d:"M8 14v4"}),p.jsx("path",{d:"M12 16v4"})]}),p.jsx("span",{className:"precip-value",children:ae.precipitation||ae.precip||"0%"})]})]})]},ke)})},Ie=ae=>{ae.preventDefault();const ke=ae.clientX,He=F,U=ce=>{const je=ke-ce.clientX,B=Math.max(250,Math.min(500,He+je));H(B),localStorage.setItem("forecastPanelWidth",B)},W=()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",W)};document.addEventListener("mousemove",U),document.addEventListener("mouseup",W)},ze=ae=>{ae.preventDefault(),ae.stopPropagation();const ke=ae.clientY,He=K,U=ce=>{const je=ke-ce.clientY,B=Math.max(100,Math.min(500,He+je));X(B),localStorage.setItem("devicesOnHeight",B)},W=()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",W)};document.addEventListener("mousemove",U),document.addEventListener("mouseup",W)};return p.jsxs("div",{className:"forecast-panel",style:{width:F},children:[p.jsx("div",{className:"forecast-resize-handle",ref:he,onMouseDown:Ie,children:p.jsx("div",{className:"forecast-resize-grip"})}),p.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!n),children:[p.jsx("span",{children:"5-Day Forecast"}),p.jsx("button",{onClick:ae=>{ae.stopPropagation(),ge()},className:"forecast-refresh-btn",children:"Refresh"})]}),n&&p.jsx("div",{className:"forecast-panel-content",children:pe()}),p.jsx("div",{className:"forecast-dock-slot",ref:a}),p.jsxs("div",{className:"devices-on-section",style:{height:s?K:"auto"},children:[p.jsx("div",{className:"devices-resize-handle",onMouseDown:ze,children:p.jsx("div",{className:"devices-resize-grip"})}),p.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[p.jsxs("span",{children:["Devices ON (",E.size,")"]}),p.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&p.jsx("div",{className:"devices-on-list",children:E.size===0?p.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(E.values()).sort((ae,ke)=>ae.name.localeCompare(ke.name)).map((ae,ke)=>p.jsxs("div",{className:"device-on-item",children:[p.jsx("span",{className:"device-on-indicator"}),p.jsx("span",{className:"device-on-name",children:ae.name})]},ke))})]}),p.jsxs("div",{className:"status-indicators",children:[p.jsx("div",{className:`connection-status ${y?"connected":"disconnected"}`,children:y?"Backend":"Backend X"}),p.jsx("div",{className:`connection-status ${b.connected?"connected":"disconnected"}`,children:b.connected?`HA (${b.deviceCount})`:"HA X"})]})]})}function ZO({width:a=180,panelRef:n,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:d}){const h=window.T2Controls?.Tooltip,m=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,y=(s||[]).reduce((b,x)=>b+(x?.labels||[]).length,0),v=b=>{const x=(b||"").toString().trim();x&&c?.(x)};return p.jsxs("div",{ref:n,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:b=>b.stopPropagation(),children:[p.jsx("div",{className:"favorites-header",children:p.jsxs("div",{className:"favorites-header-row",children:[p.jsx("span",{className:"favorites-title",children:" Favorites"}),h?p.jsx(h,{text:m,position:"bottom",children:p.jsx("span",{className:"favorites-help-fallback",children:"?"})}):p.jsx("span",{className:"favorites-help-fallback",title:m,children:"?"})]})}),p.jsx("div",{className:"favorites-list",children:y===0?p.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(b=>{const x=(b?.category||"Other").toString(),E=Array.isArray(b?.labels)?b.labels:[];return E.length===0?null:p.jsxs("div",{className:"favorites-group",children:[p.jsx("div",{className:"favorites-divider",children:p.jsx("span",{className:"favorites-divider-text",children:x})}),E.map(N=>p.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>d?.(N),onContextMenu:F=>{F.preventDefault(),F.stopPropagation(),v(N)},title:"Click: add to canvas  Right-click: remove",children:N},`${x}:${N}`))]},x)})})]})}function XO({isOpen:a,onClose:n,onSave:r,currentGraphData:s}){const[l,c]=k.useState(""),[d,h]=k.useState([]),[m,y]=k.useState(!1),[v,b]=k.useState(!1),[x,E]=k.useState(null),N=k.useRef(null);k.useEffect(()=>{a&&(F(),setTimeout(()=>N.current?.focus(),100))},[a]);const F=async()=>{y(!0),E(null);try{const Y=await(await fetch(Gn("/api/engine/graphs"))).json();Y.success?h(Y.graphs||[]):E("Failed to load existing graphs")}catch(R){console.error("[SaveModal] Error fetching graphs:",R),E("Failed to connect to server")}finally{y(!1)}},H=async()=>{if(!l.trim()){E("Please enter a filename");return}b(!0),E(null);try{const Y=await(await fetch(Gn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();Y.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${Y.filename}"`,3e3),r?.(Y.filename),n()):E(Y.error||"Failed to save graph")}catch(R){console.error("[SaveModal] Error saving:",R),E("Failed to save graph")}finally{b(!1)}},K=R=>{R.key==="Enter"&&!v?H():R.key==="Escape"&&n()},X=R=>{const Y=R.replace(".json","");c(Y),N.current?.focus()};return a?p.jsx("div",{className:"save-modal-overlay",onClick:n,children:p.jsxs("div",{className:"save-modal",onClick:R=>R.stopPropagation(),children:[p.jsxs("div",{className:"save-modal-header",children:[p.jsx("h2",{children:" Save Graph"}),p.jsx("button",{className:"save-modal-close",onClick:n,children:""})]}),p.jsxs("div",{className:"save-modal-content",children:[p.jsxs("div",{className:"save-modal-input-section",children:[p.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),p.jsxs("div",{className:"save-modal-input-row",children:[p.jsx("input",{ref:N,id:"graph-filename",type:"text",value:l,onChange:R=>c(R.target.value),onKeyDown:K,placeholder:"my_automation_graph",disabled:v}),p.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),x&&p.jsxs("div",{className:"save-modal-error",children:[" ",x]}),p.jsxs("div",{className:"save-modal-existing",children:[p.jsxs("h3",{children:["Existing Graphs ",m&&p.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),d.length===0&&!m?p.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):p.jsx("ul",{className:"save-modal-list",children:d.map(R=>p.jsxs("li",{onClick:()=>X(R.name),className:l===R.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(R.modified).toLocaleString()}`,children:[p.jsx("span",{className:"graph-name",children:R.displayName}),p.jsx("span",{className:"graph-date",children:new Date(R.modified).toLocaleDateString()})]},R.name))})]})]}),p.jsxs("div",{className:"save-modal-footer",children:[p.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:n,disabled:v,children:"Cancel"}),p.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:H,disabled:v||!l.trim(),children:v?"Saving...":" Save"})]})]})}):null}function KO({visible:a,position:n,items:r,onClose:s,onSelect:l}){const c=k.useRef(null),d=k.useRef(null),[h,m]=k.useState(null),[y,v]=k.useState({x:0,y:0}),[b,x]=k.useState(""),E=k.useRef(null),N=k.useRef(null);k.useEffect(()=>{a&&(x(""),m(null),setTimeout(()=>{d.current?.focus()},50))},[a]);const F=k.useMemo(()=>{if(!b.trim())return r;const G=b.toLowerCase(),de=[];for(const ne of r)if(ne.subitems)for(const pe of ne.subitems)pe.label&&pe.label.toLowerCase().includes(G)&&de.push({...pe,categoryHint:ne.label});else ne.label&&ne.label.toLowerCase().includes(G)&&de.push(ne);return de},[r,b]),H=b.trim().length>0;k.useEffect(()=>{if(!a)return;const G=ne=>{c.current&&!c.current.contains(ne.target)&&s()},de=ne=>{ne.key==="Escape"&&s()};return document.addEventListener("mousedown",G),document.addEventListener("keydown",de),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("keydown",de)}},[a,s]),k.useEffect(()=>()=>{E.current&&clearTimeout(E.current),N.current&&clearTimeout(N.current)},[]);const K=k.useCallback((G,de,ne)=>{N.current&&(clearTimeout(N.current),N.current=null),de.subitems&&de.subitems.length>0?m(ne):m(null)},[]),X=k.useCallback(()=>{N.current=setTimeout(()=>{m(null)},150)},[]),R=k.useCallback(()=>{N.current&&(clearTimeout(N.current),N.current=null)},[]),Y=k.useCallback(()=>{N.current=setTimeout(()=>{m(null)},100)},[]),he=k.useCallback(G=>{G.subitems&&G.subitems.length>0||(l(G),s())},[l,s]);if(!a)return null;const ge={...n};if(typeof window<"u"){const de=Math.min(F.length*36+50,400);n.x+220>window.innerWidth&&(ge.x=window.innerWidth-220-10),n.y+de>window.innerHeight&&(ge.y=Math.max(10,window.innerHeight-de-10))}return p.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:ge.x,top:ge.y},children:[p.jsxs("div",{className:"fast-menu-search",children:[p.jsx("input",{ref:d,type:"text",placeholder:"Search nodes...",value:b,onChange:G=>x(G.target.value),onClick:G=>G.stopPropagation(),onKeyDown:G=>{if(G.key==="Enter"&&F.length===1){const de=F[0];de.subitems||he(de)}G.stopPropagation()}}),b&&p.jsx("span",{className:"search-clear",onClick:G=>{G.stopPropagation(),x(""),d.current?.focus()},children:""})]}),p.jsx("div",{className:"fast-menu-results",children:F.length===0?p.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):H?F.map((G,de)=>p.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>he(G),children:[p.jsx("span",{className:"menu-label",children:G.label}),G.categoryHint&&p.jsx("span",{className:"category-hint",children:G.categoryHint})]},G.label||de)):F.map((G,de)=>p.jsxs("div",{className:`fast-menu-item ${G.subitems?"has-submenu":""} ${h===de?"active":""}`,onMouseEnter:ne=>K(ne,G,de),onMouseLeave:X,onClick:()=>he(G),children:[G.icon&&p.jsx("span",{className:"menu-icon",children:G.icon}),p.jsx("span",{className:"menu-label",children:G.label}),G.subitems&&p.jsx("span",{className:"submenu-arrow",children:""}),h===de&&G.subitems&&p.jsx("div",{className:"fast-submenu",onMouseEnter:R,onMouseLeave:Y,children:G.subitems.map((ne,pe)=>p.jsx("div",{className:"fast-menu-item",title:ne.description||"",onClick:Ie=>{Ie.stopPropagation(),he(ne)},children:p.jsx("span",{className:"menu-label",children:ne.label})},ne.label||pe))})]},G.label||de))})]})}function ib(a){const n=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))n.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&n.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):n.push(`Node at index ${c} is missing "id"`),l.label||n.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&n.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))n.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,d)=>{c.source?s.has(c.source)||n.push(`Connection ${d} references non-existent source node: ${c.source}`):n.push(`Connection at index ${d} is missing "source"`),c.target?s.has(c.target)||n.push(`Connection ${d} references non-existent target node: ${c.target}`):n.push(`Connection at index ${d} is missing "target"`),c.sourceOutput||r.push(`Connection ${d} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${d} is missing "targetInput"`);const h=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(h)&&r.push(`Duplicate connection: ${h}`),l.add(h),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:n.length===0,errors:n,warnings:r}}function sb(a){const n=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],n.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],n.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((d,h)=>{if(!d.id)return n.push(`Removed node at index ${h} (missing ID)`),r=!0,!1;if(c.has(d.id)){const m=`${d.id}_${Date.now()}_${h}`;n.push(`Renamed duplicate node ID ${d.id} to ${m}`),d.id=m,r=!0}return c.add(d.id),l.add(d.id),d.label||(d.label="Unknown Node",n.push(`Set label for node ${d.id} to "Unknown Node"`),r=!0),!d.position||typeof d.position!="object"?(d.position={x:0,y:0},n.push(`Reset position for node ${d.id}`),r=!0):(Number.isFinite(d.position.x)||(d.position.x=0,n.push(`Fixed NaN x position for node ${d.id}`),r=!0),Number.isFinite(d.position.y)||(d.position.y=0,n.push(`Fixed NaN y position for node ${d.id}`),r=!0)),!0}),s.connections=s.connections.filter((d,h)=>l.has(d.source)?l.has(d.target)?!0:(n.push(`Removed connection ${h} (invalid target: ${d.target})`),r=!0,!1):(n.push(`Removed connection ${h} (invalid source: ${d.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,n.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,n.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,n.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:n}}class gj extends Pt.Control{constructor(n,r){super(),this.label=n,this.onClick=r}}function QO({data:a}){return p.jsx("button",{onPointerDown:n=>n.stopPropagation(),onDoubleClick:n=>n.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.25)",n.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:n=>{n.currentTarget.style.background="rgba(0, 243, 255, 0.1)",n.currentTarget.style.boxShadow="none"},children:a.label})}class vj extends Pt.Control{constructor(n,r,s,l){super(),this.label=n,this.values=r,this.value=s,this.onChange=l}setValue(n){this.value=n}}function JO({data:a}){const[,n]=k.useReducer(d=>d+1,0),[r,s]=k.useState(a.value);k.useEffect(()=>{s(a.value)},[a.value]),k.useEffect(()=>{n()},[a]);const l=d=>{const h=d.target.value;s(h),typeof a.setValue=="function"?a.setValue(h):a.value=h,a.onChange&&a.onChange(h)},c=a.values||[];return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("select",{value:r,onChange:l,onPointerDown:d=>d.stopPropagation(),onDoubleClick:d=>d.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((d,h)=>p.jsx("option",{value:d,style:{background:"#0a0f14",color:"#00f3ff"},children:d},`${h}-${d}`))})]})}class bj extends Pt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function WO({data:a}){const[n,r]=k.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class wj extends Pt.Control{constructor(n,r,s){super(),this.label=n,this.value=r,this.onChange=s}}function ej({data:a}){const[n,r]=k.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[p.jsx("input",{type:"checkbox",checked:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),p.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Sj extends Pt.Control{constructor(n,r,s,l={}){super(),this.label=n,this.value=r,this.onChange=s,this.options=l}}function tj({data:a}){const[n,r]=k.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:"number",value:n,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class xj extends Pt.Control{constructor(n,r,s,l="text"){super(),this.label=n,this.value=r,this.onChange=s,this.type=l}}function nj({data:a}){const[n,r]=k.useState(a.value);k.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return p.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&p.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),p.jsx("input",{type:a.type||"text",value:n,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class kj extends Pt.Control{constructor(n,r){super(),this.deviceId=n,this.getState=r}}function aj({data:a}){const n=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!n)return p.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:p.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=n.on||n.state==="on",l=n.attributes&&typeof n.attributes.brightness=="number"?Number(n.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof n.brightness=="number"&&Number.isFinite(n.brightness)?c=n.brightness>100?Math.round(n.brightness/255*100):Math.round(n.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c));const d=n.hs_color||[0,0],[h,m]=d;let y="#e74c3c";s&&(m===0?y="#f1c40f":y=`hsl(${h}, ${m}%, 50%)`);const v={width:"14px",height:"14px",borderRadius:"50%",background:y,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:y,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${y}`:"none"};return p.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[p.jsx("div",{style:v}),p.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:n.name||a.deviceId})]}),p.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&p.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:p.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${y})`,transition:"width 0.3s ease-out"}})})]})}function rj(a){const{state:n,color:r}=a.data.data||{},s=n==="on"||n==="open"||n==="playing",l=r||(s?"#00f3ff":"#333");return p.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[p.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),p.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function ij(a){const[,n]=k.useState(0);k.useEffect(()=>{let b=JSON.stringify(a.data.data||{});const x=setInterval(()=>{const E=JSON.stringify(a.data.data||{});E!==b&&(b=E,n(N=>N+1))},100);return()=>clearInterval(x)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:d}=a.data.data||{};let h="#444";s&&s.length===2?h=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(h="#ffaa00");const m=c==="on"||d===!0;let y=typeof r=="number"&&Number.isFinite(r)?r:0;y>100&&(y=y/255*100),y=Math.max(0,Math.min(100,y));const v=m?y:0;return p.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:b=>b.stopPropagation(),children:p.jsx("div",{style:{width:`${v}%`,height:"100%",backgroundColor:h,transition:"all 0.3s ease",boxShadow:v>0?`0 0 10px ${h}`:"none"}})})}function sj(a){const{power:n,energy:r}=a.data.data||{};return n===null&&r===null?p.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):p.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("span",{children:"PWR:"}),p.jsx("span",{style:{color:"#00f3ff"},children:n!==null?`${n} W`:"--"})]}),r!==null&&p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("span",{children:"NRG:"}),p.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const oj=window.EDITOR_DEBUG,Te=(...a)=>oj&&console.debug("[Editor]",...a),lj=_a.memo(({data:a,socketKey:n,side:r})=>{let l=a?.name||"any";if(n&&typeof n=="string"){const d=n.toLowerCase();d.includes("hsv")||d.includes("color")?l="hsv_info":d.includes("trigger")||d.includes("enable")||d.includes("active")?l="boolean":(d.includes("light")||d.includes("device"))&&(l="light_info")}const c=`${n||"socket"} (${l})`;return _a.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function cj(){const a=k.useRef(null),[n,r]=k.useState(null),[s,l]=k.useState(null),[c,d]=k.useState(null),[h,m]=k.useState(null),[y,v]=k.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),b=k.useRef(null),x=k.useRef(null);k.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(y))}catch{}},[y]);const E=k.useRef(!1),N=k.useRef(new Set),F=k.useRef(null),H=k.useRef(!1),K=k.useRef(null),X=k.useRef(null),R=k.useRef(null),Y=k.useRef({x:0,y:0}),he=k.useRef(!1),ge=k.useRef([]),[G,de]=k.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),ne=180,pe="favoriteNodes",[Ie,ze]=k.useState(()=>{try{const V=localStorage.getItem(pe),ie=V?JSON.parse(V):null,Q=se=>{const C=[];for(const D of Array.isArray(se)?se:[]){if(typeof D!="string")continue;const oe=D.trim();oe&&(C.includes(oe)||C.push(oe))}return C};if(Array.isArray(ie)){const se=Q(ie);return se.length?[{category:"Other",labels:se}]:[]}const _e=Array.isArray(ie?.groups)?ie.groups:Array.isArray(ie?.favoriteGroups)?ie.favoriteGroups:Array.isArray(ie)?ie:null;if(!_e)return[];const xe=[];for(const se of _e){const C=(se?.category||"Other").toString().trim()||"Other",D=Q(se?.labels);D.length!==0&&xe.push({category:C,labels:D})}return xe}catch{return[]}}),ae=k.useRef(null),[ke,He]=k.useState(!1),U=k.useRef(null),[W,ce]=k.useState(!1),[je,B]=k.useState(null);k.useEffect(()=>{try{localStorage.setItem(pe,JSON.stringify({version:2,groups:Ie}))}catch{}},[Ie]);const S=k.useCallback(V=>{const ie=(V||"").toString().trim();if(!ie)return;const _e=(On.getByLabel(ie)?.category||"Other").toString().trim()||"Other";ze(xe=>{for(const D of xe)if(Array.isArray(D?.labels)&&D.labels.includes(ie))return xe;const se=xe.map(D=>({category:D.category,labels:[...D.labels]})),C=se.findIndex(D=>D.category===_e);return C===-1?se.push({category:_e,labels:[ie]}):se[C].labels.push(ie),se})},[]),L=k.useCallback(V=>{const ie=(V||"").toString().trim();ie&&ze(Q=>{const _e=[];for(const xe of Q){const se=(xe?.labels||[]).filter(C=>C!==ie);se.length!==0&&_e.push({category:xe.category,labels:se})}return _e})},[]),j=k.useCallback(async V=>{const ie=a.current,Q=K.current,_e=X.current;if(!ie||!Q||!_e)return;const xe=ie.getBoundingClientRect(),se={x:xe.left+xe.width/2,y:xe.top+xe.height/2};try{const oe=window._t2GetMenuItems;if(typeof oe=="function"){const fe=oe();for(const be of fe||[])for(const Oe of be.subitems||[])if(Oe.label===V&&typeof Oe.handler=="function"){await Oe.handler(se);return}}}catch(oe){console.warn("[Favorites] Failed to create via context handlers:",oe)}const C=On.getByLabel(V);if(!C)return;const D=()=>{try{F.current?.()}catch{}};try{const oe=C.factory(D);await Q.addNode(oe);const fe=_e.area.transform,be=(se.x-fe.x)/fe.k,Oe=(se.y-fe.y)/fe.k;await _e.translate(oe.id,{x:be,y:Oe}),V==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}catch(oe){console.warn("[Favorites] Fallback create failed:",oe)}},[]);k.useEffect(()=>{try{const V=On.getAll();if(V.length===0)return;const ie=new Map;for(const Q of V)Q?.label&&ie.set(Q.label,(Q.category||"Other").toString().trim()||"Other");ze(Q=>{const _e=[],xe=new Map,se=(C,D)=>{xe.has(C)||(xe.set(C,[]),_e.push(C));const oe=xe.get(C);oe.includes(D)||oe.push(D)};for(const C of Q)for(const D of C?.labels||[]){const oe=ie.get(D);oe&&se(oe,D)}return _e.map(C=>({category:C,labels:xe.get(C)})).filter(C=>C.labels.length>0)})}catch{}},[n]);const M=k.useCallback(async V=>{await new Promise(P=>{const te=()=>{const me=V.getBoundingClientRect();me.width>0&&me.height>0?P():requestAnimationFrame(te)};requestAnimationFrame(te)});const ie=new Xr,Q=new Ab(V),_e=new wE,xe=new CC({createRoot:cb.createRoot}),se=new LC;ie.use(se);let C=0,D=0,oe=Date.now();window._t2PerfStats=()=>{const P=(Date.now()-oe)/1e3;return console.log(`[Perf] In ${P.toFixed(1)}s: ${C} process calls, ${D} skipped (${(C/P).toFixed(1)}/sec)`),{calls:C,skipped:D,perSecond:C/P}},window._t2PerfReset=()=>{C=0,D=0,oe=Date.now(),console.log("[Perf] Stats reset")};let fe=null;const be=()=>{const P=ie?.getNodes?.()?.length||0;return P<50?16:P<100?32:P<150?50:100};let Oe=!1;const Ve=async()=>{if(Oe){D++;return}if(fe)return;C++;const P=be();fe=setTimeout(async()=>{fe=null,Oe=!0;try{const te=ie.getNodes(),me=ie.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",te.map(Ce=>`${Ce.id}:${Ce.label}`)),console.log("[Editor] process() - connections:",me.map(Ce=>`${Ce.source}:${Ce.sourceOutput} -> ${Ce.target}:${Ce.targetInput}`)),window._debugProcess=!1),se.reset();for(const Ce of te)try{await se.fetch(Ce.id)}catch{}}finally{Oe=!1}},P)},Xe=async()=>{if(!Oe){fe&&(clearTimeout(fe),fe=null),Oe=!0;try{se.reset();for(const P of ie.getNodes())try{await se.fetch(P.id)}catch{}}finally{Oe=!1}}},yt=new Set;let Ue=null;const qe=P=>{yt.add(P),Ue||(Ue=setTimeout(()=>{Ue=null,yt.forEach(te=>{Q.update("node",te)}),yt.clear(),Ve()},16))},Me=()=>{Ve()},rt=()=>{const P=On.getAll(),te={};P.forEach(Ce=>{const Ke=Ce.category||"Other";te[Ke]||(te[Ke]=[]),te[Ke].push({label:Ce.label,order:Ce.order,description:Ce.description,handler:async Ht=>{let Wt;const Ft=()=>{Ce.updateStrategy==="dataflow"?Me():qe(Wt.id)};Wt=Ce.factory(Ft),await ie.addNode(Wt);const Zt=Q.area.transform,fn=(Ht.x-Zt.x)/Zt.k,Nt=(Ht.y-Zt.y)/Zt.k;await Q.translate(Wt.id,{x:fn,y:Nt}),Ce.label==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}})});const me=window.T2Controls?.THEME?.categories||{};return Object.entries(te).map(([Ce,Ke])=>({label:Ce,icon:me[Ce]?.icon||"",subitems:Ke.sort((Ht,Wt)=>{const Ft=Ht.order??999,Zt=Wt.order??999;return Ft!==Zt?Ft-Zt:Ht.label.localeCompare(Wt.label)})})).sort((Ce,Ke)=>Ce.label.localeCompare(Ke.label))};window._t2GetMenuItems=rt,window._t2Editor=ie,window._t2Area=Q,window._t2Process=Ve,window._t2ProcessImmediate=Xe,window._t2Engine=se;const pt=Hr.selector();xe.addPreset(Of.classic.setup({customize:{node(P){const te=On.getByInstance(P.payload);return te?te.component:Of.classic.Node},socket(P){const te=P.key,me=P.side;return function({data:Ce}){return _a.createElement(lj,{data:Ce,socketKey:te,side:me})}},control(P){if(P.payload instanceof Pt.Control){const me=P.payload.constructor.name;if(me==="ButtonControl")return QO;if(me==="DropdownControl")return JO;if(me==="TextControl")return WO;if(me==="SwitchControl")return ej;if(me==="NumberControl")return tj;if(me==="InputControl")return nj;if(me==="DeviceStateControl")return aj;if(me==="StatusIndicatorControl")return rj;if(me==="ColorBarControl")return ij;if(me==="PowerStatsControl")return sj}return Of.classic.Control}}})),_e.addPreset(mE.classic.setup()),ie.use(Q),Q.use(_e),Q.use(xe),Hr.selectableNodes(Q,pt,{accumulating:Hr.accumulateOnCtrl()}),Hr.simpleNodesOrder(Q),ie.addPipe(P=>{if(P.type==="nodecreated"){const te=P.data,me=On.getByInstance(te);me&&me.isBackdrop&&setTimeout(()=>{const Ee=Q.nodeViews.get(te.id);Ee&&Ee.element&&(Ee.element.style.zIndex="-10",Te("[Backdrop] Set z-index on creation for:",te.id))},50)}return P});let Lt=!1,Qt=!1,A={x:0,y:0};_e.addPipe(P=>(P.type==="connectionpick"?(Lt=!0,Te(" Connection pick - wire dragging started")):P.type==="connectiondrop"&&(Lt=!1,Qt=!1,Te(" Connection drop - wire dragging ended")),P));const z=P=>{if(Lt)if(P.ctrlKey||P.metaKey)if(!Qt)Qt=!0,A={x:P.clientX,y:P.clientY},V.style.cursor="grab";else{const te=P.clientX-A.x,me=P.clientY-A.y;if(te!==0||me!==0){const Ee=Q.area.transform;Q.area.translate(Ee.x+te,Ee.y+me),A={x:P.clientX,y:P.clientY}}}else Qt&&(Qt=!1,V.style.cursor="")},ue=P=>{(P.key==="Control"||P.key==="Meta")&&Qt&&(Qt=!1,V.style.cursor="")};window.addEventListener("pointermove",z),window.addEventListener("keyup",ue);let we=!1,De=!1,mt=null,Fn=!1,Pe={x:0,y:0},zt={x:0,y:0};const Tt=P=>{P.code==="Space"&&we&&mt&&(Fn=!0,zt={x:0,y:0},P.preventDefault())},kt=P=>{if(P.code==="Space"&&(Fn=!1,De&&mt)){const te=Q.nodeViews.get(mt);if(te){const me=Q.area.transform,Ee=zt.x/me.k,Ce=zt.y/me.k,Ke={x:te.position.x-Ee,y:te.position.y-Ce};E.current=!0,Q.translate(mt,Ke).finally(()=>{E.current=!1})}De=!1,V.style.cursor=""}},Ts=P=>{if(!(!we||!mt))if(Fn)if(!De)De=!0,Pe={x:P.clientX,y:P.clientY},zt={x:0,y:0},V.style.cursor="grab";else{const te=P.clientX-Pe.x,me=P.clientY-Pe.y;if(te!==0||me!==0){const Ee=Q.area.transform;Q.area.translate(Ee.x+te,Ee.y+me),zt.x+=te,zt.y+=me,Pe={x:P.clientX,y:P.clientY}}}else De&&(De=!1,V.style.cursor="")};window.addEventListener("keydown",Tt,!0),window.addEventListener("keyup",kt,!0),V.addEventListener("pointermove",Ts,!0);const Jt=document.createElement("div");Jt.classList.add("selection-box"),V.appendChild(Jt);let aa=!1,ba={x:0,y:0};const mn=N.current,Ns=()=>{aa&&(Te(" Safety reset: clearing stuck lasso selection"),aa=!1,Jt.style.display="none")},Os=()=>{Ns(),window.resetEditorDragState&&window.resetEditorDragState()},wa=()=>{document.hidden&&(Ns(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",Os),document.addEventListener("visibilitychange",wa);const nn=P=>{try{const te=P.target;te&&(te.tagName==="INPUT"||te.tagName==="TEXTAREA"||te.isContentEditable)||(V.tabIndex=-1,V.focus())}catch{}if((P.ctrlKey||P.metaKey)&&P.button===0){P.stopPropagation(),P.preventDefault(),aa=!0;const te=V.getBoundingClientRect();ba={x:P.clientX-te.left,y:P.clientY-te.top},Jt.style.display="block",Jt.style.left=`${ba.x}px`,Jt.style.top=`${ba.y}px`,Jt.style.width="0px",Jt.style.height="0px",P.shiftKey||(mn.forEach(me=>{const Ee=Q.nodeViews.get(me);Ee&&Ee.element&&(Ee.element.classList.remove("selected"),Ee.element.style.outline="")}),mn.clear(),pt&&pt.entities&&Array.from(pt.entities).forEach(me=>pt.remove(me)))}},wn=P=>{if(!aa)return;const te=V.getBoundingClientRect(),me=P.clientX-te.left,Ee=P.clientY-te.top,Ce=Math.min(ba.x,me),Ke=Math.min(ba.y,Ee),Ht=Math.abs(me-ba.x),Wt=Math.abs(Ee-ba.y);Jt.style.left=`${Ce}px`,Jt.style.top=`${Ke}px`,Jt.style.width=`${Ht}px`,Jt.style.height=`${Wt}px`},Ya=P=>{if(!aa)return;const te=Jt.getBoundingClientRect();if(aa=!1,Jt.style.display="none",te.width<5&&te.height<5)return;const me=[];ie.getNodes().forEach(Ee=>{const Ce=Q.nodeViews.get(Ee.id);if(Ce&&Ce.element){const Ke=Ce.element.getBoundingClientRect();te.left<=Ke.left&&te.right>=Ke.right&&te.top<=Ke.top&&te.bottom>=Ke.bottom&&me.push({node:Ee,view:Ce})}}),me.forEach(({node:Ee,view:Ce})=>{mn.add(Ee.id),pt.add({id:Ee.id,label:"node",translate(Ke,Ht){},unselect(){Ce.element.classList.remove("selected"),Ce.element.style.outline=""}},!1),Ce.element.classList.add("selected"),Ce.element.style.outline="3px solid #00f3ff"})},Kc=()=>{mn.size>0&&(mn.forEach(P=>{const te=Q.nodeViews.get(P);te&&te.element&&(te.element.classList.remove("selected"),te.element.style.outline="")}),mn.clear()),pt&&pt.entities&&(pt.entities instanceof Map?Array.from(pt.entities.values()):Array.from(pt.entities)).forEach(te=>{te.unselect&&te.unselect(),pt.remove(te)}),ie.getNodes().forEach(P=>{const te=Q.nodeViews.get(P.id);te&&te.element&&te.element.classList.remove("selected")})},qo=P=>{if(!P.ctrlKey&&!P.metaKey&&!aa){let te=!1;for(const[me,Ee]of Q.nodeViews)if(Ee.element.contains(P.target)){te=!0;break}if(!te){const me=P.target;(me===V||me.classList.contains("rete-area")||me.closest('[data-testid="area"]'))&&Kc()}}};V.addEventListener("pointerdown",nn,{capture:!0}),V.addEventListener("click",qo),window.addEventListener("pointermove",wn),window.addEventListener("pointerup",Ya),ie.addPipe(P=>((P.type==="connectioncreated"||P.type==="connectionremoved")&&Ve(),P));let yn={activeBackdropId:null,isDragging:!1,nodesBeingMoved:new Set},Sa=!1,xa=null;const ra=P=>{Sa=P,xa&&(clearTimeout(xa),xa=null),P&&(xa=setTimeout(()=>{Sa&&(Te(" Safety reset: clearing stuck isGroupMoving"),Sa=!1),xa=null},500))},mr=()=>{aa&&(Te(" Resetting stuck lasso selection"),aa=!1,Jt.style.display="none"),Sa&&(Te(" Resetting stuck group moving"),ra(!1)),yn.isDragging&&(Te(" Resetting stuck backdrop drag"),yn.isDragging=!1,yn.activeBackdropId=null,yn.nodesBeingMoved.clear())};window.resetEditorDragState=mr;function Pa(){const P=ie.getNodes(),te=P.filter(Ee=>{const Ce=On.getByInstance(Ee);return Ce&&Ce.isBackdrop}),me=P.filter(Ee=>{const Ce=On.getByInstance(Ee);return!Ce||!Ce.isBackdrop});te.forEach(Ee=>{const Ce=Q.nodeViews.get(Ee.id);if(!Ce)return;Ce.element&&(Ce.element.style.zIndex="-10");const Ke=Ce.position,Ht=[],Wt=Ee.properties.width||400,Ft=Ee.properties.height||300,Zt=(Nt,Vt,gn)=>{const Ma=Nt.x+Vt/2,Fa=Nt.y+gn/2;return Ma>=Ke.x&&Ma<=Ke.x+Wt&&Fa>=Ke.y&&Fa<=Ke.y+Ft};me.forEach(Nt=>{const Vt=Q.nodeViews.get(Nt.id);if(!Vt)return;Vt.element&&parseInt(Vt.element.style.zIndex||"0",10)<0&&(Vt.element.style.zIndex="1");const gn=Vt.position,Ma=Nt.width||180,Fa=Nt.height||100;Zt(gn,Ma,Fa)&&Ht.push(Nt.id)}),te.forEach(Nt=>{if(Nt.id===Ee.id)return;const Vt=Q.nodeViews.get(Nt.id);if(!Vt)return;const gn=Vt.position,Ma=Nt.properties.width||400,Fa=Nt.properties.height||300;Ma>=Wt||Fa>=Ft||Zt(gn,Ma,Fa)&&Ht.push(Nt.id)});const fn=Ee.properties.capturedNodes.length;Ee.properties.capturedNodes=Ht,fn!==Ht.length&&Ee.changeCallback&&Ee.changeCallback()})}return Q.updateBackdropCaptures=Pa,Q.addPipe(P=>{if(P.type==="nodepicked"){const te=P.data.id,me=ie.getNode(te);we=!0,mt=te,De=!1;try{if(me&&U?.current!==void 0){const Ce=Q.nodeViews.get(te)?.position||{x:0,y:0};U.current={nodeId:te,label:me.label,startPos:Ce,active:!1,over:!1}}}catch{}if(me){const Ce=On.getByInstance(me);if(Ce&&Ce.isBackdrop&&me.properties.locked)return}!he.current&&!mn.has(te)&&(mn.forEach(Ce=>{const Ke=Q.nodeViews.get(Ce);Ke&&Ke.element&&(Ke.element.classList.remove("selected"),Ke.element.style.outline="")}),mn.clear()),mn.add(te);const Ee=Q.nodeViews.get(te);Ee&&Ee.element&&(Ee.element.classList.add("selected"),Ee.element.style.outline="3px solid #00f3ff")}return P}),Q.addPipe(P=>{try{if(E.current)return P;const te=me=>{const Ee=ae.current?.getBoundingClientRect();if(!Ee)return!1;const Ke=Q.nodeViews.get(me)?.element;if(!Ke)return!1;const Ht=Ke.getBoundingClientRect(),Wt=Ht.left+Ht.width/2,Ft=Ht.top+Ht.height/2;return Wt>=Ee.left&&Wt<=Ee.right&&Ft>=Ee.top&&Ft<=Ee.bottom};if(P.type==="nodetranslate"){const me=U.current;if(!me)return P;const Ee=P.data?.id;if(!Ee||me.nodeId!==Ee)return P;me.active||(me.active=!0,!me.startPos&&P.data?.previous&&(me.startPos=P.data.previous));const Ce=te(Ee);return Ce!==me.over&&(me.over=Ce,He(Ce)),P}if(P.type==="nodedragged"){const me=U.current;if(!me)return P;const Ee=P.data?.id;if(!Ee||me.nodeId!==Ee)return P;if(me.active&&te(Ee)){S(me.label);const Ke=me.startPos;Ke&&setTimeout(()=>{try{Q.translate(Ee,Ke)}catch{}},0)}return U.current=null,He(!1),P}}catch{}return P}),Q.addPipe(P=>{if(P.type==="render"&&P.data?.payload){const te=P.data.payload,me=On.getByInstance(te);me&&me.isBackdrop&&setTimeout(()=>{const Ee=Q.nodeViews.get(te.id);if(Ee&&Ee.element){Ee.element.style.zIndex!=="-10"&&(Ee.element.style.zIndex="-10");const Ce=te.properties.locked?"none":"auto";Ee.element.style.pointerEvents!==Ce&&(Ee.element.style.pointerEvents=Ce)}},0)}if(P.type==="nodetranslate"){if(E.current||Sa)return P;const te=P.data.id,me=ie.getNode(te);if(!me)return P;const Ee=P.data.position,Ce=P.data.previous,Ke=Ee.x-Ce.x,Ht=Ee.y-Ce.y;if(Ke===0&&Ht===0)return P;if(De&&mt===te)return{...P,data:{...P.data,position:P.data.previous}};if(mn.size>1&&mn.has(te)){ra(!0);const Ft=[];return mn.forEach(Zt=>{if(Zt!==te){const fn=Q.nodeViews.get(Zt);if(fn){const Nt=fn.position.x+Ke,Vt=fn.position.y+Ht;Ft.push(Q.translate(Zt,{x:Nt,y:Vt}))}}}),Promise.all(Ft).then(()=>{ra(!1)}),P}const Wt=On.getByInstance(me);if(Wt&&Wt.isBackdrop){if(me.properties.locked)return{...P,data:{...P.data,position:P.data.previous}};if(yn.isDragging&&yn.nodesBeingMoved.has(te)&&yn.activeBackdropId!==te)return P;if(yn.activeBackdropId!==te){yn.activeBackdropId=te,yn.isDragging=!0,yn.nodesBeingMoved.clear(),Pa();const Ft=Zt=>{Zt.forEach(fn=>{yn.nodesBeingMoved.add(fn);const Nt=ie.getNode(fn);Nt&&Nt.properties.capturedNodes&&Ft(Nt.properties.capturedNodes)})};Ft(me.properties.capturedNodes)}if(me.properties.capturedNodes.length>0){ra(!0);const Ft=[];return me.properties.capturedNodes.forEach(Zt=>{if(!mn.has(Zt)){const fn=Q.nodeViews.get(Zt);if(fn){const Nt=fn.position.x+Ke,Vt=fn.position.y+Ht;Ft.push(Q.translate(Zt,{x:Nt,y:Vt}))}}}),Promise.all(Ft).then(()=>{ra(!1)}),P}}}if(P.type==="nodedragged"){if(E.current)return P;yn.isDragging=!1,yn.activeBackdropId=null,yn.nodesBeingMoved.clear(),we=!1,mt=null,De&&(De=!1,V.style.cursor=""),Pa()}return P}),K.current=ie,X.current=Q,R.current=pt,window.updateBackdropLockState=(P,te)=>{const me=Q.nodeViews.get(P);me&&me.element&&(me.element.style.pointerEvents=te?"none":"auto",Te(" Updated backdrop lock state:",P,"locked:",te))},r(ie),l(Q),d(se),{destroy:()=>{V.removeEventListener("pointerdown",nn,{capture:!0}),V.removeEventListener("click",qo),V.removeEventListener("pointermove",Ts,!0),window.removeEventListener("pointermove",wn),window.removeEventListener("pointerup",Ya),window.removeEventListener("pointermove",z),window.removeEventListener("keyup",ue),window.removeEventListener("keydown",Tt,!0),window.removeEventListener("keyup",kt,!0),window.removeEventListener("blur",Os),document.removeEventListener("visibilitychange",wa),xa&&clearTimeout(xa),Jt.parentNode&&Jt.parentNode.removeChild(Jt),Q.destroy()},selector:pt,editor:ie,area:Q,engine:se,process:Ve,processImmediate:Xe}},[]);k.useEffect(()=>{const V=a.current;if(!V)return;let ie=null,Q=null,_e=null;const xe=new Map,se=fe=>{try{typeof fe.pointerId=="number"&&xe.set(fe.pointerId,{el:fe.target,pointerType:fe.pointerType||"mouse"})}catch{}},C=fe=>{try{typeof fe.pointerId=="number"&&xe.delete(fe.pointerId)}catch{}},D=fe=>{try{typeof fe.pointerId=="number"&&xe.delete(fe.pointerId)}catch{}};V.addEventListener("gotpointercapture",se,!0),V.addEventListener("lostpointercapture",C,!0),window.addEventListener("pointerup",D,!0),window.addEventListener("pointercancel",D,!0),Q=VO().then(()=>(Te(" External plugins loaded, now creating editor..."),M(V))).then(fe=>{fe.editor,ie=fe.area,fe.engine,fe.selector,r(fe.editor),l(fe.area),d(fe.engine),m(fe.selector),F.current=fe.processImmediate,setTimeout(()=>{if(V){V.tabIndex=-1,V.focus();const Oe=V.getBoundingClientRect(),Ve=Oe.left+Oe.width/2,Xe=Oe.top+Oe.height/2,yt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ve,clientY:Xe,deltaY:0});V.dispatchEvent(yt),Te(" Container initialized and focused"),window.resetEditorView=()=>{Te(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const Ue=V.getBoundingClientRect(),qe=Ue.left+Ue.width/2,Me=Ue.top+Ue.height/2;V.tabIndex=-1,V.focus();try{const pt=Array.from(xe.entries());xe.clear(),pt.forEach(([Lt,Qt])=>{const A=Qt?.el,z=Qt?.pointerType||"mouse";try{const ue=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:Lt,pointerType:z});V.dispatchEvent(ue)}catch{}try{V.releasePointerCapture(Lt)}catch{}try{A&&typeof A.releasePointerCapture=="function"&&A.releasePointerCapture(Lt)}catch{}})}catch{}try{for(let Lt=0;Lt<5;Lt++)try{V.releasePointerCapture(Lt)}catch{}V.querySelectorAll(".node, .connection, [data-drag]").forEach(Lt=>{try{Lt.releasePointerCapture(1)}catch{}})}catch{}if(ie){const pt=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});V.dispatchEvent(pt);const Lt=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});V.dispatchEvent(Lt)}setTimeout(()=>{const pt=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:qe,clientY:Me,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),Lt=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:qe,clientY:Me,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});V.dispatchEvent(pt),setTimeout(()=>{V.dispatchEvent(Lt);const Qt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:qe,clientY:Me,deltaY:0});V.dispatchEvent(Qt),Te(" Reset complete")},50)},50)})}}},100);let be=!1;return _e=new ResizeObserver(Oe=>{for(const Ve of Oe){const{width:Xe,height:yt}=Ve.contentRect;!be&&Xe>0&&yt>0&&(be=!0,Te(" ResizeObserver: Container now has size",Xe,yt),setTimeout(()=>{V.focus();const Ue=V.getBoundingClientRect(),qe=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ue.left+Ue.width/2,clientY:Ue.top+Ue.height/2,deltaY:0});V.dispatchEvent(qe)},50))}}),_e.observe(V),fe});const oe=()=>{Te(" graphLoadComplete event received - triggering view reset");const fe=()=>{window.resetEditorView&&window.resetEditorView()};fe(),setTimeout(fe,100),setTimeout(fe,500),setTimeout(fe,1e3)};return window.addEventListener("graphLoadComplete",oe),()=>{_e&&_e.disconnect(),window.removeEventListener("graphLoadComplete",oe),V.removeEventListener("gotpointercapture",se,!0),V.removeEventListener("lostpointercapture",C,!0),window.removeEventListener("pointerup",D,!0),window.removeEventListener("pointercancel",D,!0),Q.then(fe=>fe.destroy())}},[M]),k.useEffect(()=>{if(!n||!s||!h)return;const V=async C=>{if(C.target.tagName==="INPUT"||C.target.tagName==="TEXTAREA"||C.target.isContentEditable)return;if(Te(` KeyDown: ${C.code} (Ctrl: ${C.ctrlKey}, Meta: ${C.metaKey})`),C.code==="F5"||(C.ctrlKey||C.metaKey)&&C.shiftKey&&C.code==="KeyR"){C.preventDefault(),Te(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(C.code==="KeyF"&&!C.ctrlKey&&!C.metaKey&&!C.altKey){C.preventDefault();const Oe=X.current,Ve=K.current;if(Oe&&Ve){const Xe=Ve.getNodes();Xe.length>0&&(Te(" Zoom extents triggered (F key)"),Hr.zoomAt(Oe,Xe,{scale:.9}).catch(yt=>{console.warn("[F key] zoomAt failed:",yt)}))}return}const D=K.current,oe=X.current,fe=R.current;if(!D||!oe){Te(" No editor/area ref available");return}const be=()=>{const Oe=new Set;if(fe&&fe.entities&&fe.entities instanceof Map)for(const[Ve,Xe]of fe.entities)D.getNode(Ve)&&Oe.add(Ve);for(const Ve of N.current){const Xe=D.getNode(Ve);Te(` Checking node ${Ve}: exists=${!!Xe}`),Xe&&Oe.add(Ve)}return Te(` Found ${Oe.size} selected nodes:`,Array.from(Oe)),Array.from(Oe)};if(C.code==="Delete"||C.code==="Backspace"){Te(" Delete key pressed. lassoSelectedNodesRef.current size:",N.current.size),Te(" lassoSelectedNodesRef.current contents:",Array.from(N.current));const Oe=be();if(Te(` Deleting ${Oe.length} nodes:`,Oe),Oe.length>0){const Ve=[],Xe=[],yt=new Set(Oe);for(const Ue of D.getConnections())(yt.has(Ue.source)||yt.has(Ue.target))&&Xe.push({source:Ue.source,target:Ue.target,sourceOutput:Ue.sourceOutput,targetInput:Ue.targetInput});for(const Ue of Oe){const qe=D.getNode(Ue);qe&&Ve.push({id:Ue,label:qe.label,position:oe.nodeViews.get(Ue)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(qe.properties||{}))})}ge.current.push({type:"delete",nodes:Ve,connections:Xe}),Te(" Saved undo state:",ge.current.length,"items in stack");for(const Ue of Oe){const qe=D.getConnections().filter(Me=>Me.source===Ue||Me.target===Ue);for(const Me of qe)await D.removeConnection(Me.id);await D.removeNode(Ue),N.current.delete(Ue)}window.refreshBackdropGroups&&window.refreshBackdropGroups()}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyZ"&&!C.shiftKey){if(C.preventDefault(),ge.current.length===0){Te(" Nothing to undo");return}const Oe=ge.current.pop();if(Te(" Undoing:",Oe.type,Oe.nodes.length,"nodes"),Oe.type==="delete"){const Ve={};E.current=!0;try{for(const Xe of Oe.nodes){const yt=On.getByLabel(Xe.label);if(yt){let Ue;const qe=()=>{oe&&oe.update("node",Ue.id),c&&D&&(c.reset(),setTimeout(()=>{D.getNodes().forEach(async rt=>{try{await c.fetch(rt.id)}catch{}})},0))},Me=()=>{yt.updateStrategy==="dataflow"?(c&&c.reset(),c&&D&&setTimeout(()=>{D.getNodes().forEach(async rt=>{try{await c.fetch(rt.id)}catch{}})},0)):qe()};Ue=yt.factory(Me),Xe.properties&&Object.assign(Ue.properties,Xe.properties),await D.addNode(Ue),await oe.translate(Ue.id,Xe.position),Ve[Xe.id]=Ue.id}}for(const Xe of Oe.connections){const yt=Ve[Xe.source]||Xe.source,Ue=Ve[Xe.target]||Xe.target,qe=D.getNode(yt),Me=D.getNode(Ue);if(qe&&Me)try{await D.addConnection(new Pt.Connection(qe,Xe.sourceOutput,Me,Xe.targetInput))}catch(rt){console.warn("[Editor] Could not restore connection:",rt)}}Te(" Undo complete - restored",Oe.nodes.length,"nodes"),window.refreshBackdropGroups&&window.refreshBackdropGroups()}finally{E.current=!1,oe?.updateBackdropCaptures?.()}}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyC")try{const Oe=be();if(Oe.length===0){Te(" Nothing selected to copy");return}Te(` Copying ${Oe.length} nodes`);const Ve=[],Xe=new Set(Oe);for(const qe of Oe){const Me=D.getNode(qe);Me&&Ve.push({label:Me.label,position:oe.nodeViews.get(Me.id)?.position||{x:0,y:0},data:{id:Me.id,properties:JSON.parse(JSON.stringify(Me.properties||{}))}})}if(Ve.length===0){Te(" Nothing selected to copy (no nodes in selection)");return}const yt=[];for(const qe of D.getConnections())Xe.has(qe.source)&&Xe.has(qe.target)&&yt.push({source:qe.source,target:qe.target,sourceOutput:qe.sourceOutput,targetInput:qe.targetInput});const Ue={nodes:Ve,connections:yt};localStorage.setItem("rete-clipboard",JSON.stringify(Ue)),Te("Copied to clipboard:",Ue)}catch(Oe){console.error("[Editor] Copy failed:",Oe)}if((C.ctrlKey||C.metaKey)&&C.code==="KeyV"){const Oe=localStorage.getItem("rete-clipboard");if(!Oe){Te(" Clipboard empty");return}try{const Ve=JSON.parse(Oe),Xe={},Ue=(X.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},qe=oe.area.transform,Me=(Y.current.x-Ue.left-qe.x)/qe.k,rt=(Y.current.y-Ue.top-qe.y)/qe.k;let pt=1/0,Lt=1/0;for(const A of Ve.nodes)pt=Math.min(pt,A.position.x),Lt=Math.min(Lt,A.position.y);fe&&fe.entities&&Array.from(fe.entities).forEach(A=>fe.remove(A)),E.current=!0;try{for(const A of Ve.nodes){let z;const ue=On.getByLabel(A.label);if(ue){const we=()=>{oe&&oe.update("node",z.id),c&&D&&(c.reset(),setTimeout(()=>{D.getNodes().forEach(async mt=>{try{await c.fetch(mt.id)}catch{}})},0))},De=()=>{ue.updateStrategy==="dataflow"?(c&&c.reset(),c&&D&&setTimeout(()=>{D.getNodes().forEach(async mt=>{try{await c.fetch(mt.id)}catch{}})},0)):we()};z=ue.factory(De)}if(z){typeof z.restore=="function"&&A.data?z.restore(A.data):A.data&&A.data.properties&&z.properties&&Object.assign(z.properties,A.data.properties),await D.addNode(z);const we=A.position.x-pt,De=A.position.y-Lt,mt={x:Me+we,y:rt+De};await oe.translate(z.id,mt),Xe[A.data.id]=z.id,fe&&fe.add({id:z.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{E.current=!1,oe?.updateBackdropCaptures?.()}const Qt=[];for(const A of Ve.connections){const z=Xe[A.source],ue=Xe[A.target];if(z&&ue){const we=D.getNode(z),De=D.getNode(ue);we&&De&&Qt.push(D.addConnection(new Pt.Connection(we,A.sourceOutput,De,A.targetInput)))}}if(await Promise.all(Qt),c&&D){c.reset();for(const A of D.getNodes())try{await c.fetch(A.id)}catch{}}Te("Pasted from clipboard")}catch(Ve){console.error("[Editor] Paste failed:",Ve)}}C.code==="Home"&&(C.preventDefault(),oe.area&&(oe.area.zoom(1,0,0),oe.area.translate(0,0),Te(" Viewport reset via Home key"))),C.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Te(" Drag state reset via Escape key"))},ie=C=>{Y.current={x:C.clientX,y:C.clientY}},Q=C=>{C.key==="Shift"&&(he.current=!0)},_e=C=>{C.key==="Shift"&&(he.current=!1)},xe=()=>{Te(" Received delete from Electron IPC"),V({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let se=null;return window.api&&window.api.onDeleteKey&&(se=window.api.onDeleteKey(xe)),window.addEventListener("keydown",V),window.addEventListener("keydown",Q),window.addEventListener("keyup",_e),window.addEventListener("mousemove",ie),()=>{window.removeEventListener("keydown",V),window.removeEventListener("keydown",Q),window.removeEventListener("keyup",_e),window.removeEventListener("mousemove",ie),se&&se()}},[n,s,c,h]),k.useEffect(()=>{const V=a.current;if(!V||!n||!s)return;const ie=Q=>{const _e=Q.target.closest('[data-testid="node"]');if(_e){Q.preventDefault();const xe=_e.dataset.nodeId||Array.from(s.nodeViews.entries()).find(([se,C])=>C.element===_e)?.[0];if(xe){const se=n.getNode(xe);de({visible:!0,position:{x:Q.clientX,y:Q.clientY},items:[{label:"Delete",handler:async()=>{const C=n.getConnections().filter(D=>D.source===xe||D.target===xe);for(const D of C)await n.removeConnection(D.id);await n.removeNode(xe)}}],nodeContext:se})}}else{Q.preventDefault();const xe=window._t2GetMenuItems?window._t2GetMenuItems():[];de({visible:!0,position:{x:Q.clientX,y:Q.clientY},items:xe,nodeContext:null})}};return V.addEventListener("contextmenu",ie),()=>{V.removeEventListener("contextmenu",ie)}},[n,s]);const le=k.useCallback(()=>{de(V=>({...V,visible:!1}))},[]),ve=k.useCallback(async V=>{V.handler&&await V.handler(G.position)},[G.position]),Ae=async()=>{if(!(!n||!s))try{const V=n.getNodes().map(be=>{const Oe=typeof be.toJSON=="function"?be.toJSON():{...be};return be.properties&&(Oe.properties=be.properties),{id:be.id,label:be.label,position:s.nodeViews.get(be.id)?.position||{x:0,y:0},data:Oe}}),ie=n.getConnections().map(be=>({id:be.id,source:be.source,target:be.target,sourceOutput:be.sourceOutput,targetInput:be.targetInput})),Q=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},_e={nodes:V,connections:ie,viewport:Q},xe=JSON.stringify(_e,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Te("Running in HA ingress - showing save dialog"),B(_e),ce(!0);return}try{xe.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",xe))}catch{console.warn("localStorage skipped")}Te("Graph saved to localStorage");try{const be=await fetch(Gn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:xe});be.ok?Te("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",be.status)}catch(be){console.warn("[handleSave] Failed to save to server:",be)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",xe),Te("[handleSave] Saved temp file for Electron reload")}catch(be){console.warn("[handleSave] Failed to save temp file via Electron API",be)}if(window.showSaveFilePicker)try{const Oe=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await Oe.write(xe),await Oe.close(),Te("Graph saved to file");return}catch(be){if(be.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",be)}const D=new Blob([xe],{type:"application/json"}),oe=URL.createObjectURL(D),fe=document.createElement("a");fe.href=oe,fe.download=`autotron_graph_${Date.now()}.json`,fe.click(),URL.revokeObjectURL(oe),Te("Graph saved via download")}catch(V){console.error("Failed to save graph:",V)}};k.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!n||!s))try{const V=n.getNodes().map(se=>{const C=typeof se.toJSON=="function"?se.toJSON():{...se};return se.properties&&(C.properties=se.properties),{id:se.id,label:se.label,position:s.nodeViews.get(se.id)?.position||{x:0,y:0},data:C}}),ie=n.getConnections().map(se=>({id:se.id,source:se.source,target:se.target,sourceOutput:se.sourceOutput,targetInput:se.targetInput})),Q=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},_e={nodes:V,connections:ie,viewport:Q,preUpdateSave:!0,timestamp:Date.now()},xe=JSON.stringify(_e);xe.length<2e6&&(localStorage.setItem("saved-graph",xe),Te("[triggerGraphSave] Graph saved before update"))}catch(V){console.warn("[triggerGraphSave] Failed:",V)}},()=>{delete window.triggerGraphSave}),[n,s]);const[Qe,Ze]=k.useState(!1),Rt=k.useRef(null),$t=k.useRef(Date.now());k.useEffect(()=>{if(!n)return;const V=()=>{Ze(!0)};n.addPipe(ie=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(ie.type)&&V(),ie))},[n]),k.useEffect(()=>{if(!n||!s)return;const V=async()=>{if(!(window.graphLoading||H.current)&&Qe)try{const ie=n.getNodes().map(C=>{const D=typeof C.toJSON=="function"?C.toJSON():{...C};return C.properties&&(D.properties=C.properties),{id:C.id,label:C.label,position:s.nodeViews.get(C.id)?.position||{x:0,y:0},data:D}}),Q=n.getConnections().map(C=>({id:C.id,source:C.source,target:C.target,sourceOutput:C.sourceOutput,targetInput:C.targetInput})),_e=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},xe={nodes:ie,connections:Q,viewport:_e,autoSaved:!0,timestamp:Date.now()},se=JSON.stringify(xe);if(se.length<2e6){localStorage.setItem("saved-graph",se),$t.current=Date.now(),Ze(!1);try{await fetch(Gn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:se})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(ie){console.warn("[Auto-save] Failed:",ie)}};return Rt.current=setInterval(V,12e4),()=>{Rt.current&&clearInterval(Rt.current)}},[n,s,Qe]),k.useEffect(()=>{if(!n||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Te("[AutoLoad] Detected post-update reload, attempting to restore graph...");const ie=setTimeout(async()=>{try{const Q=localStorage.getItem("saved-graph");if(Q){Te("[AutoLoad] Found saved graph, loading...");const _e=JSON.parse(Q);_e.nodes&&_e.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(Q){console.warn("[AutoLoad] Failed to auto-load graph:",Q)}},1e3);return()=>clearTimeout(ie)}},[n,s,c]);const _t=k.useRef(!1);k.useEffect(()=>{if(!n||!s||!c||_t.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Te("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),_t.current=!0;return}const Q=localStorage.getItem("saved-graph"),_e=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(Q||_e){Te("[ServerAutoLoad] Skipping - desktop mode with local graph");return}_t.current=!0;const se=setTimeout(async()=>{try{Te("[ServerAutoLoad] Fetching last active graph from server...");const D=await(await fetch(Gn("/api/engine/last-active"))).json();D.success&&D.graph?(Te("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(D.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):Te("[ServerAutoLoad] No last active graph on server")}catch(C){console.warn("[ServerAutoLoad] Failed to fetch from server:",C)}},1500);return()=>clearTimeout(se)},[n,s,c]);const Mn=async()=>{if(!n||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!n,area:!!s,engine:!!c});return}try{let V=localStorage.getItem("saved-graph");if(!V&&window.api?.readTempFile)try{const se=await window.api.readTempFile("autotron_graph.json");se?.success&&se.content&&(V=se.content,Te("[handleLoad] Loaded graph from Electron temp file"))}catch(se){console.warn("[handleLoad] Failed to read Electron temp file",se)}if(!V){alert("No saved graph found");return}const ie=JSON.parse(V);Te(`[handleLoad] Loading graph with ${ie.nodes?.length} nodes`);const Q=ib(ie);if(!Q.valid){console.warn("[handleLoad] Graph validation failed:",Q.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${Q.errors.length} errors`,4e3);const se=sb(ie);se.repaired&&(Te("[handleLoad] Graph repaired:",se.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${se.fixes.length} fixes applied`,3e3),Object.assign(ie,se.graphData))}Q.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",Q.warnings),await dn();const _e=n.getNodes();if(_e.length>0){console.error("[handleLoad] Clear did not work! Still have",_e.length,"nodes");for(const se of _e)try{await n.removeNode(se.id)}catch(C){console.error("[handleLoad] Force remove failed:",C)}}if(E.current=!0,H.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of ie.nodes){let D;const oe=On.getByLabel(C.label);if(oe){const fe=()=>{if(H.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};D=oe.factory(fe)}D&&(D.id=C.id,typeof D.restore=="function"&&C.data?D.restore(C.data):C.data&&C.data.properties&&D.properties&&Object.assign(D.properties,C.data.properties),await n.addNode(D),await s.translate(D.id,C.position))}const se=[];for(const C of ie.connections){const D=n.getNode(C.source),oe=n.getNode(C.target);D&&oe&&se.push(n.addConnection(new Pt.Connection(D,C.sourceOutput,oe,C.targetInput)))}await Promise.all(se)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const xe=n.getNodes();if(xe.length>0&&s){Te("[handleLoad] Zooming to fit",xe.length,"nodes...");try{await Hr.zoomAt(s,xe,{scale:.9})}catch(se){console.warn("[handleLoad] zoomAt failed:",se)}}F.current&&(Te("[handleLoad] Processing graph immediately..."),await F.current(),Te("[handleLoad] Graph processing complete")),H.current=!1,Te("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Te("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const se=ie.viewport||{x:0,y:0,k:1},C=se.k||1,D=se.x||0,oe=se.y||0;Te("[handleLoad] Restoring viewport:",{savedX:D,savedY:oe,savedK:C}),Te("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(C,0,0),s.area.translate(D,oe)}catch(be){console.warn("[handleLoad] Viewport restore failed:",be)}Te("[handleLoad] Transform after restore:",{...s.area.transform});const fe=s.container;if(fe){fe.tabIndex=-1,fe.focus(),document.activeElement&&document.activeElement!==fe&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const be=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(be,100),setTimeout(be,500),setTimeout(be,1e3)}n.getNodes().forEach(be=>{const Oe=s.nodeViews.get(be.id);if(Oe?.element)try{for(let Ve=0;Ve<10;Ve++)try{Oe.element.releasePointerCapture(Ve)}catch{}}catch{}})}},300),Te("Graph loaded")}catch(V){console.error("Failed to load graph:",V),H.current=!1,alert("Failed to load graph")}},pn=async()=>{if(!n||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(n.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const ie=await fetch(Gn("/api/examples/starter"));if(!ie.ok)throw new Error(`Failed to fetch example: ${ie.status}`);const Q=await ie.json();if(!Q.success||!Q.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(Q.graph)),Te("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await Mn(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(ie){console.error("[handleLoadExample] Failed:",ie),alert("Failed to load example graph: "+ie.message)}};k.useEffect(()=>{const V=()=>{Te("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),Mn()};return document.addEventListener("autoLoadGraph",V),()=>document.removeEventListener("autoLoadGraph",V)},[n,s,c]);const dn=async()=>{if(!n){console.warn("[handleClear] No editor instance!");return}try{const V=n.getConnections(),ie=n.getNodes();Te(`[handleClear] Removing ${V.length} connections and ${ie.length} nodes`);for(const _e of V)await n.removeConnection(_e.id);for(const _e of ie)await n.removeNode(_e.id);const Q=n.getNodes();Te(`[handleClear] Complete. Remaining nodes: ${Q.length}`),Q.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",Q.map(_e=>_e.id))}catch(V){console.error("Failed to clear graph:",V)}},Rn=()=>{if(!(!n||!s))try{const V=n.getNodes().map(D=>{const oe=typeof D.toJSON=="function"?D.toJSON():{...D};return D.properties&&(oe.properties=D.properties),{id:D.id,label:D.label,position:s.nodeViews.get(D.id)?.position||{x:0,y:0},data:oe}}),ie=n.getConnections().map(D=>({id:D.id,source:D.source,target:D.target,sourceOutput:D.sourceOutput,targetInput:D.targetInput})),Q=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},_e={nodes:V,connections:ie,viewport:Q},xe=new Blob([JSON.stringify(_e,null,2)],{type:"application/json"}),se=URL.createObjectURL(xe),C=document.createElement("a");C.href=se,C.download=`graph-${Date.now()}.json`,C.click(),URL.revokeObjectURL(se),Te("Graph exported")}catch(V){console.error("Failed to export graph:",V)}},We=async V=>{const ie=ib(V);if(!ie.valid){console.warn("[handleImport] Graph validation failed:",ie.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ie.errors.length} errors`,4e3);const xe=sb(V);if(xe.repaired)Te("[handleImport] Graph repaired:",xe.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${xe.fixes.length} fixes applied`,3e3),V=xe.graphData;else if(!confirm(`Graph has ${ie.errors.length} errors. Continue anyway?`))return}const Q={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let _e=0;if(console.error=(...xe)=>{_e++<10&&Q.error(...xe)},Q.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!n||!s||!c){Object.assign(console,Q);return}try{if(await dn(),E.current=!0,H.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of V.nodes){let D;const oe=On.getByLabel(C.label);if(!oe){console.warn(`[handleImport] No definition found for node label: "${C.label}"`);continue}if(oe){const fe=()=>{if(H.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};D=oe.factory(fe)}D&&(D.id=C.id,C.label==="Timeline Color"&&Q.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof D.restore=="function",hasData:!!C.data,dataKeys:C.data?Object.keys(C.data):"N/A",propertiesKeys:C.data?.properties?Object.keys(C.data.properties):"N/A",previewModeValue:C.data?.properties?.previewMode}),typeof D.restore=="function"&&C.data?D.restore(C.data):C.data&&C.data.properties&&D.properties&&Object.assign(D.properties,C.data.properties),await n.addNode(D),await s.translate(D.id,C.position))}const se=[];for(const C of V.connections){const D=n.getNode(C.source),oe=n.getNode(C.target);D&&oe?se.push(n.addConnection(new Pt.Connection(D,C.sourceOutput,oe,C.targetInput))):console.warn(`[handleImport] Connection skipped - missing node: source=${C.source} (${!!D}), target=${C.target} (${!!oe})`)}await Promise.all(se)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const xe=n.getNodes();if(xe.length>0&&s)try{await Hr.zoomAt(s,xe,{scale:.9})}catch{}H.current=!1,setTimeout(async()=>{window.graphLoading=!1,Te("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{F.current&&(Te("[handleImport] Running processImmediate to sync node states"),F.current()),setTimeout(()=>{F.current&&(Te("[handleImport] Running second processImmediate for late-loading data"),F.current())},1500)},500);try{const C=JSON.stringify(V,null,2);C.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",C),Te("[handleImport] Graph saved to localStorage")),(await fetch(Gn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:C})).ok&&Te("[handleImport] Graph saved to server as last active")}catch(C){console.warn("[handleImport] Failed to save imported graph:",C)}const se=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(se,100),setTimeout(se,500)},2e3),Object.assign(console,Q),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Te("Graph imported successfully. Pan/zoom should work now.")}catch(xe){window.graphLoading=!1,typeof Q<"u"&&Object.assign(console,Q),console.error("Failed to import graph:",xe),H.current=!1,alert("Failed to import graph: "+xe.message)}};return p.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[p.jsx(ZO,{width:ne,panelRef:ae,dropActive:ke,favoriteGroups:Ie,onAddFavorite:S,onRemoveFavorite:L,onCreateNode:j}),p.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${ne}px`}}),p.jsx("div",{ref:b}),(()=>{const V=y?x.current:b.current;return V?Yr.createPortal(p.jsx(PO,{onSave:Ae,onLoad:Mn,onLoadExample:pn,onClear:dn,onExport:Rn,onImport:We,hasUnsavedChanges:Qe,isMerged:y,onToggleMerged:()=>v(ie=>!ie)}),V):null})(),p.jsx(FO,{dockSlotRef:x}),p.jsx(KO,{visible:G.visible,position:G.position,items:G.items,onClose:le,onSelect:ve}),p.jsx(XO,{isOpen:W,onClose:()=>ce(!1),onSave:()=>{Ze(!1),ce(!1)},currentGraphData:je})]})}class uj extends _a.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n),console.error("[ErrorBoundary] Error info:",r),this.setState({error:n,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?p.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:p.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[p.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),p.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),p.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&p.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[p.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),p.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[p.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#4a4a6c",onMouseOut:n=>n.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),p.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:n=>n.target.style.backgroundColor="#339af0",onMouseOut:n=>n.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function dj({isLoading:a,progress:n=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[d,h]=k.useState(!1),[m,y]=k.useState(a);return k.useEffect(()=>{if(!a&&m){h(!0);const v=setTimeout(()=>{y(!1),h(!1)},500);return()=>clearTimeout(v)}else a&&!m&&y(!0)},[a,m]),m?p.jsxs("div",{className:`loading-overlay ${d?"fade-out":""}`,children:[p.jsx("div",{className:"loading-logo",children:""}),p.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),p.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),p.jsx("div",{className:"loading-progress-container",children:p.jsx("div",{className:"loading-progress-bar",children:p.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,n)}%`}})})}),p.jsx("div",{className:"loading-status",children:r}),l>0&&p.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&p.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function fj({updateInfo:a,onClose:n,onApplyUpdate:r}){const[s,l]=k.useState(!1),[c,d]=k.useState("");if(!a||!a.hasUpdate)return null;const h=async()=>{l(!0),d("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),d("Graph saved! Starting update..."))}catch(y){console.warn("Pre-update graph save failed:",y)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const v=await(await qn("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d(v.message||"Updating... The app will restart shortly."),setTimeout(()=>{d("Update applied! Reloading page..."),setTimeout(()=>{const b=()=>{qn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)},2e3)}catch(y){y.message.includes("fetch")||y.message.includes("network")?(d("Server restarting... Reloading page..."),setTimeout(()=>{const v=()=>{qn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(v,2e3))};v()},3e3)):(d(`Update failed: ${y.message}`),l(!1))}},m=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),n()};return p.jsx("div",{className:"update-modal-overlay",children:p.jsxs("div",{className:"update-modal",children:[p.jsxs("div",{className:"update-modal-header",children:[p.jsx("span",{className:"update-icon",children:""}),p.jsx("h2",{children:"Update Available!"})]}),p.jsxs("div",{className:"update-modal-version",children:[p.jsx("span",{className:"version-current",children:a.currentVersion}),p.jsx("span",{className:"version-arrow",children:""}),p.jsx("span",{className:"version-new",children:a.newVersion})]}),p.jsxs("div",{className:"update-modal-content",children:[p.jsx("h3",{children:"What's New:"}),p.jsx("div",{className:"changelog-content",children:p.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&p.jsxs("div",{className:"update-status",children:[p.jsx("span",{className:"status-spinner",children:""}),c]}),p.jsx("div",{className:"update-modal-actions",children:s?p.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"update-btn update-btn-primary",onClick:h,children:"Update Now"}),p.jsx("button",{className:"update-btn update-btn-secondary",onClick:m,children:"Later"})]})})]})})}const hj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};hj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Fw=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},n={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,d]of Object.entries(s)){const h=n[c];h&&(d.accent&&(l.style.setProperty(`--node-${h}-color`,d.accent),l.style.setProperty(`--node-${h}-color-rgb`,a(d.accent))),d.background&&l.style.setProperty(`--node-${h}-bg`,d.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},Zw=()=>{const a=c=>{const d=parseInt(c.slice(1,3),16),h=parseInt(c.slice(3,5),16),m=parseInt(c.slice(5,7),16);return`${d}, ${h}, ${m}`},n=(c,d=15)=>{const h=parseInt(c.slice(1),16),m=Math.max(0,(h>>16)-Math.round(255*d/100)),y=Math.max(0,(h>>8&255)-Math.round(255*d/100)),v=Math.max(0,(h&255)-Math.round(255*d/100));return`#${(16777216|m<<16|y<<8|v).toString(16).slice(1)}`},r=(c,d=20)=>{const h=parseInt(c.slice(1),16),m=Math.min(255,(h>>16)+Math.round(255*d/100)),y=Math.min(255,(h>>8&255)+Math.round(255*d/100)),v=Math.min(255,(h&255)+Math.round(255*d/100));return`#${(16777216|m<<16|y<<8|v).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),d=c?JSON.parse(c):{},h=document.documentElement;for(const[m,y]of Object.entries(s)){const v=d[m]?.color||l[m];v&&(h.style.setProperty(`--socket-${y}-color`,v),h.style.setProperty(`--socket-${y}-dark`,n(v)),h.style.setProperty(`--socket-${y}-border`,r(v)),h.style.setProperty(`--socket-${y}-rgb`,a(v)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};Fw();Zw();window.applyCategoryColors=Fw;window.applySocketColors=Zw;const Hf=new Map,Vf=new Map;function pj(){const[a,n]=k.useState(ye.connected),[r,s]=k.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=k.useState([]),[d,h]=k.useState([]),[m,y]=k.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[v,b]=k.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[x,E]=k.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[N,F]=k.useState(null),[H,K]=k.useState(0),[X,R]=k.useState(()=>localStorage.getItem("eventLogFilter")||"all"),[Y,he]=k.useState([]),ge=k.useRef(null),G=k.useRef(null),de=k.useRef({authenticated:!1,invalidPinNotified:!1}),ne=100,pe=np();k.useEffect(()=>{const B=setInterval(()=>{K(S=>S+1)},3e4);return()=>clearInterval(B)},[]);const Ie=k.useCallback(()=>{const B=window._t2Editor;if(!B)return;const L=B.getNodes().filter(j=>j.label==="Backdrop"||j.constructor?.name==="BackdropNode"||j.properties?.width!==void 0&&j.properties?.height!==void 0&&j.properties?.title!==void 0).map(j=>({id:j.id,title:j.properties?.title||"Group",color:j.properties?.customColor||window.BackdropColorPalette?.[j.properties?.colorIndex]?.border||"#888"})).sort((j,M)=>j.title.localeCompare(M.title));he(L)},[]);k.useEffect(()=>{const B=()=>{setTimeout(Ie,200)};window.addEventListener("graphLoadComplete",B),window.refreshBackdropGroups=Ie;const S=setTimeout(Ie,500);return()=>{window.removeEventListener("graphLoadComplete",B),delete window.refreshBackdropGroups,clearTimeout(S)}},[Ie]),k.useEffect(()=>Yw(S=>{E(S),!S.isLoading&&S.progress===100&&S.failedPlugins?.length>0&&pe.warning(`Loaded ${S.loadedCount} plugins (${S.failedPlugins.length} failed)`),S.error&&pe.error(`Plugin loading failed: ${S.error}`)}),[pe]),k.useEffect(()=>{function B(){n(!0),pe.success("Connected to server"),ze("system","Socket connected to server"),Vf.clear();const We=ls();We&&ye.emit("authenticate",We),ye.emit("editor-active"),ye.emit("request-ha-status")}function S(){n(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),de.current.authenticated=!1,pe.warning("Disconnected from server - reconnecting..."),ze("system","Socket disconnected from server")}function L(We){ze("system",`Socket reconnected after ${We} attempt(s)`)}function j(We){We%5===0&&ze("system",`Reconnection attempt ${We}...`)}function M(We){ze("system","Reconnection failed, retrying...")}function le(We){s(We)}function ve(){de.current.authenticated||(de.current.authenticated=!0,de.current.invalidPinNotified=!1,pe.success("Authenticated"))}function Ae(We){de.current.authenticated=!1;const V=(We?.error||"").toString();if(V.toLowerCase().includes("invalid pin")){de.current.invalidPinNotified||(de.current.invalidPinNotified=!0,pe.error("Stored PIN is invalid. Update it in Settings  Security."));return}const ie=V?`Authentication failed: ${V}`:"Authentication failed";pe.error(ie)}function Qe(){if(!ye.connected)return;de.current.invalidPinNotified=!1;const We=ls();We&&ye.emit("authenticate",We)}function Ze(We){const{id:V,state:ie,on:Q,name:_e,vendor:xe}=We;if(!V)return;const se=Vf.get(V),C=Q!==void 0?Q:ie==="on"||ie==="playing"||ie==="open",D=_e||We.friendly_name||We.attributes?.friendly_name||V.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(se&&se.on===C)return;Vf.set(V,{on:C,state:ie});const oe=Hf.get(V),fe=C?"ON":"OFF";let be=xe||"External";xe||(V.startsWith("ha_")?be="HA":V.startsWith("hue_")?be="Hue":V.startsWith("kasa_")&&(be="Kasa")),oe&&Date.now()-oe.timestamp<5e3?(ze("device",`${D}  ${fe}`,{source:"app",triggeredBy:oe.nodeTitle,nodeId:oe.nodeId}),Hf.delete(V)):ze("trigger",`${D}  ${fe}`,{source:be})}function Rt(We){}function $t(We){const{nodeId:V,nodeLabel:ie,result:Q}=We;ze("node",`${ie||V} executed`,{...Q,nodeId:V})}function _t(We){Array.isArray(We)&&h(We.slice(0,20))}function Mn(We){const{type:V,name:ie,value:Q}=We;ze("trigger",`${V}: ${ie}`,Q)}function pn(We){if(We.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==We.newVersion&&pe.info(` Update available: ${We.currentVersion}  ${We.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>F(We)})}ye.on("connect",B),ye.on("disconnect",S),ye.on("reconnect",L),ye.on("reconnect_attempt",j),ye.on("reconnect_error",M),ye.on("auth-success",ve),ye.on("auth-failed",Ae),ye.on("ha-connection-status",le),ye.on("device-state-update",Ze),ye.on("device_state_change",Rt),ye.on("node_executed",$t),ye.on("scheduled_events",_t),ye.on("trigger_event",Mn),ye.on("update-available",pn),window.addEventListener("t2-pin-changed",Qe);const dn=()=>{ye.connected&&ye.emit("editor-inactive")};window.addEventListener("beforeunload",dn),IT();const Rn=setInterval(()=>{ye.connected&&ye.emit("editor-heartbeat")},3e4);return()=>{ye.connected&&ye.emit("editor-inactive"),clearInterval(Rn),ye.off("connect",B),ye.off("disconnect",S),ye.off("reconnect",L),ye.off("reconnect_attempt",j),ye.off("reconnect_error",M),ye.off("auth-success",ve),ye.off("auth-failed",Ae),ye.off("ha-connection-status",le),ye.off("device-state-update",Ze),ye.off("device_state_change",Rt),ye.off("node_executed",$t),ye.off("scheduled_events",_t),ye.off("trigger_event",Mn),ye.off("update-available",pn),window.removeEventListener("t2-pin-changed",Qe),window.removeEventListener("beforeunload",dn),$T()}},[]);const ze=(B,S,L=null)=>{const j=new Date().toLocaleTimeString();c(M=>[{timestamp:j,type:B,message:S,details:L},...M].slice(0,ne))},ae=k.useRef({}),ke=k.useCallback((B,S)=>{const L=S.map(ve=>({...ve,nodeId:B}));ae.current[B]=L;const j=[];Object.values(ae.current).forEach(ve=>{Array.isArray(ve)&&j.push(...ve)});const M=new Date,le=j.filter(ve=>ve.time&&new Date(ve.time)>M).sort((ve,Ae)=>new Date(ve.time)-new Date(Ae.time)).slice(0,20);h(le)},[]),He=k.useCallback(B=>{delete ae.current[B],ke(B,[])},[ke]);k.useEffect(()=>(window.addEventLog=ze,window.setUpcomingEvents=h,window.registerScheduledEvents=ke,window.unregisterScheduledEvents=He,window.T2Toast=pe,window.registerPendingCommand=(B,S,L,j)=>{Hf.set(B,{nodeTitle:S,action:L,nodeId:j,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[ke,He,pe]);const U=B=>{if(!B)return"";const S=new Date(B),j=S-new Date,M=Math.floor(j/6e4),le=Math.floor(M/60),ve=Math.floor(le/24);let Ae="";return ve>0?Ae=`${ve}d ${le%24}h`:le>0?Ae=`${le}h ${M%60}m`:M>0?Ae=`${M}m`:Ae="<1m",`${S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${Ae})`},W=k.useCallback(async B=>{if(!B)return;const S=window._t2Area,L=window._t2Editor;if(!S||!L){console.warn("[focusNode] Editor not ready");return}const j=L.getNode(B);if(!j){console.warn("[focusNode] Node not found:",B);return}try{const{AreaExtensions:M}=await Jg(async()=>{const{AreaExtensions:le}=await Promise.resolve().then(()=>Ev);return{AreaExtensions:le}},void 0,import.meta.url);await M.zoomAt(S,[j],{scale:1})}catch(M){console.warn("[focusNode] Failed to zoom to node:",M)}},[]),ce=k.useCallback(async B=>{if(!B)return;const S=window._t2Area,L=window._t2Editor;if(!S||!L){console.warn("[focusBackdrop] Editor not ready");return}const j=L.getNode(B);if(!j){console.warn("[focusBackdrop] Backdrop not found:",B);return}try{const M=S.nodeViews.get(B);if(!M){console.warn("[focusBackdrop] Node view not found");return}const le=M.position,ve=j.properties?.width||j.width||400,Ae=j.properties?.height||j.height||300,Qe=le.x+ve/2,Ze=le.y+Ae/2,Rt=S.container,$t=Rt.clientWidth,_t=Rt.clientHeight,Mn=$t*.85/ve,pn=_t*.85/Ae,dn=Math.min(Mn,pn,1.5),Rn=$t/2-Qe*dn,We=_t/2-Ze*dn;await S.area.zoom(dn,0,0),await S.area.translate(Rn,We)}catch(M){console.warn("[focusBackdrop] Failed to zoom to backdrop:",M)}},[]),je=k.useCallback(async()=>{const B=window._t2Area,S=window._t2Editor;if(!B||!S){console.warn("[zoomExtents] Editor not ready");return}const L=S.getNodes();if(L.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:j}=await Jg(async()=>{const{AreaExtensions:M}=await Promise.resolve().then(()=>Ev);return{AreaExtensions:M}},void 0,import.meta.url);await j.zoomAt(B,L,{scale:.7})}catch(j){console.warn("[zoomExtents] Failed to zoom:",j)}},[]);return p.jsxs("div",{className:"app-container",children:[N&&N.hasUpdate&&p.jsx(fj,{updateInfo:N,onClose:()=>F(null)}),p.jsx(dj,{isLoading:x.isLoading,progress:x.progress,status:x.status,loadedCount:x.loadedCount,totalCount:x.totalCount,error:x.error}),p.jsx("div",{className:"editor-wrapper",children:p.jsx(cj,{})}),p.jsx("div",{className:"resize-handle",ref:G,onMouseDown:B=>{B.preventDefault();const S=B.clientY,L=m,j=le=>{const ve=S-le.clientY,Ae=Math.max(80,Math.min(400,L+ve));y(Ae),localStorage.setItem("panelHeight",Ae)},M=()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",M)},children:p.jsx("div",{className:"resize-handle-grip"})}),p.jsxs("div",{className:"bottom-panels",style:{height:m,fontSize:v},children:[p.jsxs("div",{className:"panel event-log-panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("span",{className:"panel-title",children:"Event Log"}),p.jsxs("div",{className:"group-nav-buttons",children:[p.jsx("button",{className:"group-nav-btn group-nav-all",onClick:je,title:"Zoom to fit all nodes (F key)",children:" All"}),Y.map(B=>p.jsx("button",{className:"group-nav-btn",style:{borderColor:B.color},onClick:()=>ce(B.id),title:`Zoom to "${B.title}" group`,children:B.title},B.id))]}),p.jsxs("div",{className:"panel-controls",children:[p.jsxs("div",{className:"filter-buttons",children:[p.jsx("button",{className:`filter-btn ${X==="all"?"active":""}`,onClick:()=>{R("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),p.jsx("button",{className:`filter-btn ${X==="app"?"active":""}`,onClick:()=>{R("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),p.jsx("button",{className:`filter-btn ${X==="ha"?"active":""}`,onClick:()=>{R("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),p.jsx("button",{className:"font-size-btn",onClick:()=>{const B=Math.max(8,v-1);b(B),localStorage.setItem("panelFontSize",B)},children:"A-"}),p.jsxs("span",{className:"font-size-label",children:[v,"px"]}),p.jsx("button",{className:"font-size-btn",onClick:()=>{const B=Math.min(16,v+1);b(B),localStorage.setItem("panelFontSize",B)},children:"A+"}),p.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),p.jsx("div",{className:"panel-content",ref:ge,children:l.length===0?p.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(B=>X==="all"?!0:X==="app"?B.details?.triggeredBy||B.details?.source==="app"||B.type==="node"||B.type==="device"||B.type==="system":X==="ha"?B.type==="trigger"||B.details?.source&&B.details.source!=="app"&&!B.details?.triggeredBy:!0).map((B,S)=>p.jsxs("div",{className:`log-entry log-${B.type}${B.details?.nodeId?" clickable":""}`,title:B.details?.nodeId?"Click to jump to this node":B.details?.triggeredBy?`Triggered by: ${B.details.triggeredBy}`:B.details?.source&&B.details.source!=="app"?`Triggered externally via ${B.details.source}`:"",onClick:()=>B.details?.nodeId&&W(B.details.nodeId),style:B.details?.nodeId?{cursor:"pointer"}:{},children:[p.jsx("span",{className:"log-time",children:B.timestamp}),p.jsx("span",{className:`log-type-badge ${B.type}`,children:B.type==="trigger"?"external":B.type}),p.jsx("span",{className:"log-message",children:B.message}),B.details?.triggeredBy&&p.jsxs("span",{className:"log-source app-source",children:["via ",B.details.triggeredBy]}),B.details?.source&&B.details.source!=="app"&&!B.details?.triggeredBy&&p.jsxs("span",{className:"log-source external-source",children:["via ",B.details.source]})]},S))})]}),p.jsxs("div",{className:"panel upcoming-events-panel",children:[p.jsx("div",{className:"panel-header",children:p.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),p.jsx("div",{className:"panel-content",children:d.length===0?p.jsx("div",{className:"empty-message",children:"No scheduled events..."}):d.map((B,S)=>p.jsxs("div",{className:`event-entry event-${B.action||"unknown"}${B.nodeId?" clickable":""}`,onClick:()=>B.nodeId&&W(B.nodeId),title:B.nodeId?"Click to jump to this node":"",style:B.nodeId?{cursor:"pointer"}:{},children:[p.jsx("span",{className:"event-time",children:U(B.time)}),p.jsx("span",{className:`event-action ${B.action}`,children:B.action||"event"}),p.jsx("span",{className:"event-device",children:B.deviceName||B.device||"Unknown"})]},S))})]})]})]})}function mj(){return p.jsx(uj,{children:p.jsxs(GO,{children:[p.jsx(YO,{}),p.jsx(pj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");cb.createRoot(document.getElementById("root")).render(p.jsx(k.StrictMode,{children:p.jsx(mj,{})}));
